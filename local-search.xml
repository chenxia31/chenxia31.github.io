<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>GITç®¡ç†å’Œå¸¸è§æ“ä½œ</title>
    <link href="/posts/cd758988.html"/>
    <url>/posts/cd758988.html</url>
    
    <content type="html"><![CDATA[<p>ä»<a href="https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell">Git - Branches in a Nutshell</a>ä¸­çœ‹Gitçš„ä¸€äº›å¸¸è§æ“ä½œï¼Œä¸»è¦æ˜¯è®¾è®¡ç†å¿µå’Œæœ¬åœ°çš„æ“ä½œã€‚æ›´å¤æ‚çš„è¿œç¨‹åä½œå’Œé¡¹ç›®ç®¡ç†åç»­ç»™å‡ºã€‚</p><span id="more"></span><p>Git PRO</p><h2 id="what-is-git"><a class="markdownIt-Anchor" href="#what-is-git"></a> What is git</h2><p>åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆå…·æœ‰å¾ˆå¤šä¼˜ç‚¹å·´æ‹‰å·´æ‹‰ï¼‰</p><p>å‡ ä¸ªæ˜¾è‘—çš„æŠ€æœ¯ä¸Šçš„ç‰¹ç‚¹ï¼š</p><ol><li>snapshotï¼Œnot differencesï¼Œno delta- based system<ol><li>Git thinks of tis data more like a series of a snapshots of a miniature filesystem</li><li>every time you commit, or save the state of your project, Git basically takes a picture of what all your files look like at that moment and stores a reference to that snapshot. If the data is not changed , Git doesnâ€™t store the file again.</li></ol></li><li>Nearly every operation is local<ol><li>you have the entire history of the project right there on your local disk, most operations seem almost instantaneous</li><li>commit to local copy util you get to a network connection to upload</li></ol></li><li>Git has integrity<ol><li>you will see these hash values all over the place in Git because it uses them so much. In fact, Git stores everything in its database not by file name but 40 cahrs</li></ol></li><li>Git generally only adds data<ol><li>When you do actions in Git, nearly all over the place in Git because it uses them so much.  It is hard to get the system to do anything that is not undoable or to make it erase in any way</li></ol></li><li>three state<ol><li>modified</li><li>staged</li><li>committed</li></ol></li></ol><p>åŸºæœ¬çš„å·¥ä½œæµç¨‹å¯ä»¥çœ‹ä½œï¼š</p><ol><li>ä¿®æ”¹working directoryçš„æ–‡ä»¶</li><li>å½“æ—¶è§‰å¾—åšçš„å¤Ÿå¥½ä¹‹åï¼Œadd changed to the staging area</li><li>å°†æ‰€æœ‰æš‚å­˜åŒºçš„æ–‡ä»¶æäº¤ï¼Œstores that snapshot permanently to your Git directory</li></ol><h3 id="getting-start-first-time-git-setup"><a class="markdownIt-Anchor" href="#getting-start-first-time-git-setup"></a> Getting start â€”- First time git setup</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># git config å­˜å‚¨çš„ä¸‰ä¸ªåœ°æ–¹</span><br>[path]/etc/gitconfigï¼šåŒ…å«åº”ç”¨äºç³»ç»Ÿä¸Šæ¯ä¸ªç”¨æˆ·åŠå…¶æ‰€æœ‰å­˜å‚¨åº“çš„å€¼ï¼Œå¦‚æœä½ è®²é€‰é¡¹ systemä¼ é€’ç»™<br>å®ƒä¼šä»ä¸“é—¨çš„æ–‡ä»¶ä¸­è¯»å–å’Œå†™å…¥<br><br>~/.gitconfig æˆ–è€… ï½/.config/git/config ç‰¹å®šç”¨æˆ·ä¸ªäººçš„åº“<br><br>config å½“å‰å­˜å‚¨ç›®å½•çš„å‘ƒè®¾ç½®<br></code></pre></td></tr></table></figure><h2 id="basic-topic"><a class="markdownIt-Anchor" href="#basic-topic"></a> Basic topic</h2><h3 id="31-è·å–gitä»“åº“"><a class="markdownIt-Anchor" href="#31-è·å–gitä»“åº“"></a> 3.1 è·å–Gitä»“åº“</h3><p>ä¸€ç§æ–¹å¼æ˜¯å°†å½“å‰ä¸å—ç‰ˆæœ¬æ§åˆ¶çš„æœ¬åœ°ç›®å½•è½¬æ¢ä¸ºGitå­˜å‚¨åº“</p><p>ç¬¬äºŒç§æ–¹å¼æ˜¯ä»å…¶ä»–åœ°æ–¹cloneç°æœ‰çš„Gitä»“åº“</p><h3 id="32-è®°å½•æ›´æ”¹"><a class="markdownIt-Anchor" href="#32-è®°å½•æ›´æ”¹"></a> 3.2 è®°å½•æ›´æ”¹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">git status<br>git status -s <span class="hljs-comment"># for short</span><br></code></pre></td></tr></table></figure><p>å·¥ä½œç›®å½•ä¸­æ¯ä¸ªæ–‡ä»¶éƒ½å­˜åœ¨ tracked or  untracked</p><p>ä»ç”Ÿå‘½å‘¨æœŸæ¥çœ‹ï¼Œæ–‡ä»¶å¯ä»¥åˆ†ä¸ºuntrackedã€unmodifiedã€modifiedã€staged</p><aside> ğŸ’¡ Githubå°†é»˜è®¤è½¬æ¢ä¸ºmainã€ä½†æ˜¯gité»˜è®¤ä¾æ—§æ˜¯master</aside><p>åŒæ—¶å¯ä»¥è®¾ç½®gitignoreæ¥ä¸å¸Œæœ›Gitè‡ªåŠ¨æ·»åŠ ï¼Œç”šè‡³é™åˆ¶æ‚¨æœªè¿½è¸ª</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¸¸è§çš„gitignoreè§„åˆ™</span><br><span class="hljs-number">1.</span> å¿½ç•¥ç©ºç™½è¡Œæˆ–è€… <span class="hljs-comment">#</span><br><span class="hljs-number">2.</span> åœ¨æ•´ä¸ªå·¥ä½œç›®å½•ä¸­é€’å½’<br><span class="hljs-number">3.</span> å¯ä»¥ä½¿ç”¨æ­£æ–œæ  / å¼€å§‹æ¨¡å¼<br><span class="hljs-number">4.</span> å¯ä»¥ä½¿ç”¨æ­£æ–œæ  / ç»“æŸæ¨¡å¼æ¥æŒ‡å®šç›®å½•<br><span class="hljs-number">5.</span> å¯ä»¥é€šè¿‡æ„Ÿå¹å· ï¼ æ¥å¦å®šæ¨¡å¼<br></code></pre></td></tr></table></figure><p>GitHubä¸­ç»´æŠ¤äº†ä¸€ä¸ªéå¸¸å¥½çš„ç¤ºä¾‹<a href="https://github.com/github/gitignore">https://github.com/github/gitignore</a></p><p>ä»…ä»…æŸ¥çœ‹æ›´æ”¹è®°å½•ä¸å¤Ÿï¼Œä½ å¸Œæœ›æ£€æŸ¥æ›´æ”¹äº†å“ªäº›ä¸œè¥¿</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">git diff <span class="hljs-comment"># æŸ¥çœ‹æ›´æ”¹ä½†æ˜¯æœªæš‚å­˜</span><br>git diff --staged <span class="hljs-comment"># æŸ¥çœ‹å·²ç»æäº¤ä¸‹ä¸€ä¸ªé˜¶æ®µçš„å†…å®¹ï¼Œæˆ–è€…-- cached</span><br></code></pre></td></tr></table></figure><p>æäº¤è®°å½•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">git commit<br></code></pre></td></tr></table></figure><p>ä»Gitä¸­åˆ é™¤æ–‡ä»¶å¿…é¡»å°†å…¶ä»trackedæ–‡ä»¶ä¸­åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä»æš‚å­˜åŒºä¸­åˆ é™¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">git rm<br>git rm - cached FILENAME <span class="hljs-comment"># å°†æ–‡ä»¶ä¿å­˜åœ¨ç›®å½•ä¸­ï¼Œä¾æ—§ä¿ç•™åœ¨ç¡¬ç›˜ã€‚ä½†æ˜¯ä»æš‚å­˜åŒºä¸­åˆ é™¤ã€‚</span><br>git mv <span class="hljs-comment"># é‡å‘½åæ–‡ä»¶</span><br></code></pre></td></tr></table></figure><h3 id="33-æŸ¥çœ‹æäº¤çš„å†å²è®°å½•"><a class="markdownIt-Anchor" href="#33-æŸ¥çœ‹æäº¤çš„å†å²è®°å½•"></a> 3.3 æŸ¥çœ‹æäº¤çš„å†å²è®°å½•</h3><p>ä¸Šè¿°æ“ä½œå¯ä»¥å®ŒæˆåŸºæœ¬çš„å·¥ä½œæµã€‚åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œåˆ›å»ºå¾ˆå¤šæ¬¡æäº¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç°æœ‰æäº¤å†å²è®°å½•çš„å­˜å‚¨åº“ï¼Œå›é¡¾ä¸€ä¸‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨git log</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">git log <span class="hljs-comment"># æŒ‰ç…§åå‘æ—¶é—´é¡ºåºåˆ—å‡ºæäº¤çš„æ›´æ”¹ã€‚åŒæ—¶ä¹Ÿå…·æœ‰å¤§é‡é€‰é¡¹</span><br>git log -p <span class="hljs-comment"># æ˜¾ç¤ºæ¯ä¸ªæäº¤ä¸­å¼•å…¥çš„å·®å¼‚</span><br>git log --stat <span class="hljs-comment"># ç¼©å†™çš„ç»Ÿè®¡ä¿¡æ¯</span><br>git log --pretty=oneline <span class="hljs-comment"># å°†æ—¥å¿—è¾“å‡ºæ›´æ”¹ä¸ºé»˜è®¤æ ¼å¼ä»¥ä¸ºçš„æ ¼å¼</span><br>git log --pretty=<span class="hljs-built_in">format</span> --graph<br></code></pre></td></tr></table></figure><h3 id="34-æ’¤é”€æ“ä½œ"><a class="markdownIt-Anchor" href="#34-æ’¤é”€æ“ä½œ"></a> 3.4 æ’¤é”€æ“ä½œ</h3><p>åœ¨ä»»ä½•stagedï¼Œä½ éƒ½å›°éš¾æƒ³æ’¤é”€ä¸€äº›äº‹æƒ…ï¼Œé€šè¿‡å›é¡¾ä¸€äº›åŸºæœ¬å·¥å…·æ¥ä¿å­˜æ’¤é”€çš„æ›´æ”¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">git commit -amend <span class="hljs-comment"># å¦‚æœä½ æƒ³é‡åšè¯¥æäº¤ï¼Œè¯·ä½ å¿˜è®°é¢å¤–çš„æ›´æ”¹ï¼Œæš‚å­˜ä»–ä»¬</span><br></code></pre></td></tr></table></figure><p>åŠ å…¥åœ¨ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶ä¹‹åï¼Œä¸å°å¿ƒadd * åˆ°æš‚å­˜åŒº</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">$ git add *<br>$ git status<br>On branch master<br>Changes to be committed:<br>  (use <span class="hljs-string">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage)<br>modified:   CONTRIBUTING.md<br>renamed:    README.md -&gt; README<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯åªæƒ³commitå…¶ä¸­çš„ä¸€ä¸ªï¼Œé‚£ä¹ˆéœ€è¦</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">git reset HEAD [filename you <span class="hljs-keyword">not</span> to commit]<br></code></pre></td></tr></table></figure><p>æ³¨æ„resetæ˜¯éå¸¸å±é™©çš„å‘½ä»¤ï¼Œcheckoutä¹Ÿå¯ä»¥å®ç°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">git checkout --&lt;file&gt; <span class="hljs-comment"># å¯¹æ–‡ä»¶æ‰€åšçš„ä»»ä½•æœ¬åœ°æ›´æ”¹éƒ½å·²ç»æ¶ˆå¤±ï¼Œæ›¿æ¢æˆä¸ºæœ€åä¸€ä¸ªåˆ†é˜¶æ®µæˆ–è€…æäº¤çš„ç‰ˆæœ¬ã€‚</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¹‹åå¸¸ç”¨git restoreè€Œä¸æ˜¯git reset</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">git restore --staged &lt;file&gt; <span class="hljs-comment"># å–æ¶ˆæš‚å­˜</span><br></code></pre></td></tr></table></figure><h3 id="35-è¿œç¨‹æ“ä½œ"><a class="markdownIt-Anchor" href="#35-è¿œç¨‹æ“ä½œ"></a> 3.5 è¿œç¨‹æ“ä½œ</h3><p>originæ˜¯Gitèµ‹äºˆæ‚¨å…‹éš†çš„æœåŠ¡å™¨çš„é»˜è®¤åç§°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">git clone [your-git-url]<br>git remote <span class="hljs-comment"># show your remote git name</span><br>git remote -v <span class="hljs-comment"># æ˜¾ç¤ºå­˜å‚¨çš„URL</span><br>git remote add shortname url <span class="hljs-comment"># git remote add pb &lt;https://github.com/chenxia31/blog&gt;</span><br><span class="hljs-comment">#  common lineä¸­å¯ä»¥ä½¿ç”¨short nameæ¥ä»£æ›¿url</span><br></code></pre></td></tr></table></figure><p>ä»è¿œç¨‹ä»“åº“è¿æ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">git fetch &lt;remote&gt; <span class="hljs-comment"># ä»è¿œç¨‹ä»“åº“è·å–æ•°æ®</span><br>git push origin master <span class="hljs-comment"># æ¨é€æœ¬åœ°çš„masteråˆ†æ”¯</span><br>git remote show origin <span class="hljs-comment"># æ˜¾ç¤ºä¸€äº›å¸¸è§çš„ä¿¡æ¯</span><br>git remote rename [oldname] [newname]<br>git remote remove [url]<br></code></pre></td></tr></table></figure><h3 id="36-æ ‡ç­¾"><a class="markdownIt-Anchor" href="#36-æ ‡ç­¾"></a> 3.6 æ ‡ç­¾</h3><p>å’Œbranchè·Ÿè¸ªæ¯æ¬¡æœ€æ–°çš„commit ç›¸åï¼Œtagæ˜¯è·Ÿè¸ªæŸä¸€ä¸ªç‰¹å®šcommitçš„ä½ç½®ï¼Œå¦‚æœä¸éœ€è¦æ”¹åŠ¨è€Œä»…æŸ¥çœ‹çš„æ—¶å€™å¯ä»¥ç›´æ¥ä½¿ç”¨tagã€‚æ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨éœ€è¦æ˜¾å¼çš„è¡¨è¾¾å‡ºtagname</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">git tag<br>git tag -l <span class="hljs-string">&#x27;v1.8.5.*&#x27;</span><br><br><span class="hljs-comment"># æ ‡ç­¾åˆ†ä¸ºè½»é‡çº§å’Œæ³¨é‡Š</span><br>git tag -a v1<span class="hljs-number">.4</span> -m <span class="hljs-string">&#x27;my version 1.4&#x27;</span><br><br>git tag v1<span class="hljs-number">.4</span><br><br>git push origin [tagname] <span class="hljs-comment"># git push origin v1.5</span><br>git push origin --tags<br><br><span class="hljs-comment"># åˆ é™¤æ ‡ç­¾</span><br>git tag -d v1<span class="hljs-number">.4</span> <span class="hljs-comment"># ä½†æ˜¯è¿™æ ·ä¸ä¼šä»ä»»ä½•è¿œç¨‹æœåŠ¡å™¨åˆ é™¤æ ‡ç­¾</span><br>git push origin --delete &lt;tagname&gt;<br><br><span class="hljs-comment"># æŸ¥çœ‹tag</span><br>git checkout v2<span class="hljs-number">.0</span> <span class="hljs-comment">#è¿™ç§ä¼šå¯¼è‡´ä»“åº“å¤„äºâ€œåˆ†ç¦»çš„HEADçŠ¶æ€â€œï¼Œå¦‚æœè¿›è¡Œæ›´æ”¹ã€åˆ›å»ºæäº¤ã€æ ‡ç­¾å°†ä¿æŒä¸å˜</span><br></code></pre></td></tr></table></figure><h3 id="37-åˆ«å-alias"><a class="markdownIt-Anchor" href="#37-åˆ«å-alias"></a> 3.7 åˆ«å alias</h3><p>åˆ›å»ºè‡ªå·±snippets</p><h3 id="381-éå¸¸é‡è¦åˆ†æ”¯æ¨¡å¼"><a class="markdownIt-Anchor" href="#381-éå¸¸é‡è¦åˆ†æ”¯æ¨¡å¼"></a> 3.8.1 ï¼ˆéå¸¸é‡è¦ï¼‰åˆ†æ”¯æ¨¡å¼</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">git add [filename]<br>git commit -m <span class="hljs-string">&#x27;message&#x27;</span><br><br><span class="hljs-comment">#gitçš„é»˜è®¤åˆ†æ”¯åç§°æ˜¯masterï¼Œåªä¸è¿‡å¾ˆå¤šäººæ‡’å¾—æ”¹</span><br>git branch testing<br>git log --oneline --decorate<br>git checkout testing <span class="hljs-comment"># æ›´æ¨ègit switch</span><br>git commit -a -m <span class="hljs-string">&#x27;new commit&#x27;</span><br>git checkout master<br>git commit -a -m <span class="hljs-string">&#x27;new commit2&#x27;</span><br>git log --oneline -decorate --graph --asll<br></code></pre></td></tr></table></figure><p>ååºæŸ¥çœ‹ä¸€äº›åŸºæœ¬åˆ†æ”¯å’Œåˆå¹¶çš„å…·ä½“æ“ä½œã€‚æƒ³è±¡ä¸€ä¸ªå·¥ä½œæµç¨‹ï¼Œåœ¨ç½‘ç«™ä¸Šåšä¸€äº›å·¥ä½œï¼Œä¸ºä¸€ä¸ªæ–°çš„æ•…äº‹åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¹‹ååœ¨å¦å¤–åˆ†æ”¯åšä¸€äº›å·¥ä½œã€‚å› æ­¤å¯ä»¥å‚è€ƒä¸€ä¸‹çš„è¿‡ç¨‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">git checkout -b [NewBranchName] <span class="hljs-comment"># git branch and git checkout ç¼©å†™</span><br><span class="hljs-comment"># æ³¨æ„åœ¨ç­¾å‡ºçš„åˆ†æ”¯å†²çªæœªæäº¤æ›´æ”¹ï¼Œä½†æ˜¯å¯ä»¥å…è®¸ stashing and cleaningä¸­äº†è§£</span><br>git checkout master <span class="hljs-comment"># ä¸“æ³¨ä½ çš„ä¸»çº¿ä»»åŠ¡</span><br>git checkout -b <span class="hljs-string">&#x27;newfeature2&#x27;</span><br><br><span class="hljs-comment"># ~~ newfeature2ç»“æŸ</span><br>git checkout master<br>git merge newfeature2<br><span class="hljs-comment"># åˆ é™¤åˆ†æ”¯</span><br>git branch -d hotfix<br><span class="hljs-comment"># å¤„ç†</span><br>git checkout NewBranchName<br><span class="hljs-comment"># å†æ¬¡åˆå¹¶</span><br>git checkout master<br>git merge master<br><br><span class="hljs-comment"># ä¸¤ä¸ªåˆå¹¶å‡ºç°å†²çª</span><br>git status <span class="hljs-comment">#æŸ¥çœ‹</span><br><span class="hljs-comment"># æ‰‹åŠ¨æ‰“å¼€æ–‡ä»¶ï¼Œå¤„ç†å†²çª</span><br>git mergetool<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°å¯¼è‡´å·²ç»ä¼šåˆ›å»ºã€åˆå¹¶ã€åˆ é™¤ä¸€äº›åˆ†æ”¯ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€äº›åˆ†æ”¯ç®¡ç†å·¥å…·</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">git branch -V <span class="hljs-comment"># æŸ¥çœ‹æ¯ä¸ªåˆ†æ”¯çš„æœ€åä¸€æ¬¡æäº¤</span><br>git branch --merged <span class="hljs-keyword">or</span> --no-merged<span class="hljs-comment"># è¿‡æ»¤æ‚¨å·²ç»æˆ–å°šæœªåˆå¹¶åˆ°æ‚¨å½“å‰ä½¿ç”¨çš„åˆ†æ”¯ä¸­çš„åˆ†æ”¯</span><br>git brach --move <span class="hljs-comment"># æœ¬åœ°é‡å‘½ååˆ†æ”¯</span><br>git push --<span class="hljs-built_in">set</span>-upstream origin main<br></code></pre></td></tr></table></figure><h3 id="382-åˆ†æ”¯å·¥ä½œæµç¨‹"><a class="markdownIt-Anchor" href="#382-åˆ†æ”¯å·¥ä½œæµç¨‹"></a> 3.8.2 åˆ†æ”¯å·¥ä½œæµç¨‹</h3><p>å·²ç»æœ‰branchå’Œmergeçš„åŸºç¡€çŸ¥è¯†ï¼Œåº”è¯¥ç”¨æ­¤åšäº›ä»€ä¹ˆï¼Ÿè¿™é‡Œå°†è½»é‡çº§åˆ†æ”¯çš„å¸¸è§çš„å·¥ä½œæµç¨‹å±•ç¤ºï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦å°†å…¶çº³å…¥è‡ªå·±çš„å¼€å‘å‘¨æœŸ</p><p><a href="https://git-scm.com/book/en/v2/Git-Branching-Branching-Workflows">Git - Branching Workflows</a></p><p>å¸¸è§çš„åˆ†ç±»åŒ…æ‹¬</p><ul><li>master åˆ†æ”¯ä¸­å®Œå…¨ç¨³å®šçš„ä»£ç </li><li>developæˆ–next å·¥ä½œä¸­ç”¨äºæµ‹è¯•ç¨³å®šæ€§ï¼Œä¸ä¸€å®šæ€»æ˜¯ç¨³å®šçš„ã€‚å½“å®ƒç¨³å®šä¹‹åå¯ä»¥åˆå¹¶åˆ°master</li><li>proposed åè®®æ›´æ–°</li><li>topic çŸ­ç”Ÿå‘½å‘¨æœŸçš„åˆ†æ”¯ï¼Œç”¨äºå¤„ç†ä¸€äº›ç®€å•çš„feature add</li></ul><h3 id="383-è¿œç¨‹åˆ†æ”¯"><a class="markdownIt-Anchor" href="#383-è¿œç¨‹åˆ†æ”¯"></a> 3.8.3 è¿œç¨‹åˆ†æ”¯</h3><ul><li>[ ]  å¾…å®š</li></ul><p><a href="https://git-scm.com/book/en/v2/Git-Branching-Remote-Branches">Git - Remote Branches</a></p><h3 id="384-åˆ†æ”¯ç®¡ç†"><a class="markdownIt-Anchor" href="#384-åˆ†æ”¯ç®¡ç†"></a> 3.8.4 åˆ†æ”¯ç®¡ç†</h3><h3 id="39-git-æœåŠ¡å™¨"><a class="markdownIt-Anchor" href="#39-git-æœåŠ¡å™¨"></a> 3.9 Git æœåŠ¡å™¨</h3><h3 id="310-åˆ†å¸ƒå¼å·¥ä½œæµ"><a class="markdownIt-Anchor" href="#310-åˆ†å¸ƒå¼å·¥ä½œæµ"></a> 3.10 åˆ†å¸ƒå¼å·¥ä½œæµ</h3>]]></content>
    
    
    <categories>
      
      <category>baseline</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å®˜æ–¹æ–‡æ¡£_Pandasé˜…è¯»å’Œæ„Ÿæ‚Ÿ</title>
    <link href="/posts/9f94980a.html"/>
    <url>/posts/9f94980a.html</url>
    
    <content type="html"><![CDATA[<p>å®˜æ–¹æ–‡æ¡£æ˜¯å¼€å‘è€…å¯¹è‡ªå·±ä»£ç çš„è§£é‡Šã€‚å¯¹äºæˆç†Ÿçš„æ¡†æ¶ï¼Œå®˜æ–¹æ–‡æ¡£å¯ä»¥æœ€å‡†ç¡®ã€æƒå¨çš„èµ„æ–™ã€‚å¦‚ä½•é˜…è¯»è‹±æ–‡çš„å®˜æ–¹æ–‡æ¡£ä¸€ç›´æ˜¯ä½œä¸ºCoder weakerå’ŒEnglish weakerçš„å¿ƒé­”ï¼Œè¿™é‡Œä»¥Pandasæ–‡æ¡£ä¸ºä¾‹å­ï¼Œå°è¯•ç»™å‡ºè‡ªå·±å¯¹äºé˜…è¯»å®˜æ–¹æ–‡æ¡£ã€å®˜æ–¹æ–‡æ¡£çš„æŸ¥è¯¢å·¥å…·ã€ä»£ç æ³¨é‡Šå’ŒPandasæ–‡æ¡£çš„æ€»ç»“ã€‚</p><span id="more"></span><h2 id="0x01-why-é˜…è¯»å®˜æ–¹æ–‡æ¡£"><a class="markdownIt-Anchor" href="#0x01-why-é˜…è¯»å®˜æ–¹æ–‡æ¡£"></a> 0x01 Why é˜…è¯»å®˜æ–¹æ–‡æ¡£</h2><p>å¯¹äºè´¨é‡æ¯”è¾ƒé«˜çš„é¡¹ç›®ï¼Œå…¶å®˜æ–¹æ–‡æ¡£å¾€å¾€èƒ½åæ˜ å¼€å‘è€…çš„æœ€ç›´æ¥çš„æ€æƒ³ï¼Œè€Œäº’è”ç½‘ä¸Šç»è¿‡è®¸å¤šäººçš„ç¼–ç å’Œè§£ç ï¼Œå¯¼è‡´æœ€åçš„æ„æ€å¯èƒ½å’Œæœ¬æ„ç›¸å·®å·¨å¤§ã€‚è™½ç„¶å¯èƒ½å­˜åœ¨å…¶ä»–æ›´å¥½çš„æ•™ç¨‹ï¼Œä½†æ˜¯å®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„æ€æƒ³ä¸€å®šæ˜¯æœ€å‡†ç¡®ã€æƒå¨çš„ã€‚</p><blockquote><p>ä¹‹å‰ä¸€ç›´ä¸çŸ¥é“GitHubåœ¨å›½å†…ä¸ºä»€ä¹ˆè®¿é—®è¿™ä¹ˆæ…¢ã€‚</p><p>åœ¨ç½‘ä¸Šæ‰¾åˆ°å¾ˆå¤šç­”æ¡ˆï¼Œæ¯”å¦‚ä¿®æ”¹DNSçš„ã€ä¿®æ”¹Hostsçš„ã€ä¿®æ”¹é•œåƒæºæˆ–è€…å¢åŠ ä»£ç†çš„ï¼Œä½†å…¶å®æœ¬è´¨çš„é—®é¢˜æ˜¯GitHub.comçš„åŸŸåè§£æåœ¨å›½å†…å¾€å¾€éœ€è¦å¤šå±‚ä¸­è½¬è¿›è€Œå› ä¸ºæ±¡æŸ“ç­‰åŸå› é€ æˆé€Ÿåº¦è¾ƒæ…¢ï¼Œå› æ­¤ä¸Šè¿°æ–¹æ³•å¯¹åº”çš„æ˜¯ä¿®æ”¹DNSã€æœ¬æœºè§£æã€è®¾ç½®é•œåƒã€èµ°ä»£ç†ç­‰å¤šç§æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•éƒ½æ²¡æœ‰é”™ã€‚ä½†æ˜¯åªæ˜¯ç»™å‡ºè¿™äº›æ–¹æ³•ä¼šè®©äººä¸èƒ½ä¸€è§ˆèƒŒåçš„æ€æƒ³è€Œå›°æƒ‘ã€‚</p></blockquote><h2 id="0x02-what-å®˜æ–¹æ–‡æ¡£"><a class="markdownIt-Anchor" href="#0x02-what-å®˜æ–¹æ–‡æ¡£"></a> 0x02 What å®˜æ–¹æ–‡æ¡£</h2><p>ä»¥Pandasä¸ºä¾‹å­ï¼Œæ–‡æ¡£é€šå¸¸å¯ä»¥åˆ†ä¸º</p><ul><li>Getting startï¼šæ–°æ‰‹æ•™ç¨‹ï¼Œä¸€èˆ¬ä¼šæ•™ä½ å¦‚ä½•æ­å»ºä¸€ä¸ªç®€å•çš„åº”ç”¨ç¤ºä¾‹ã€‚</li><li>User guideï¼šä½¿ç”¨æ•™ç¨‹ï¼Œä»‹ç»æŠ€æœ¯çš„å…³é”®çŸ¥è¯†ã€æ€æƒ³å’Œæ¦‚å¿µã€‚</li><li>API referenceï¼šAPIæ–‡æ¡£ï¼ŒåŒ…æ‹¬å…·ä½“çš„APIä½¿ç”¨ç»†èŠ‚ä»¥åŠæœºåˆ¶</li><li>Developer guideï¼šå¼€å‘æ–‡æ¡£</li></ul><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/image-20230507140000120.png" alt="image-20230507140000120" style="zoom: 25%;" /><p>æ¨èä½¿ç”¨  <a href="https://kapeli.com/dash">Dash gives your Mac instant offline access to 200+ API documentation sets.</a>  æ¥è¿›è¡Œå®˜æ–¹APIæ–‡æ¡£çš„ç®¡ç†ã€‚ä½œä¸ºä¸€ä¸ªAPIæ–‡æ¡£æµè§ˆå™¨(API documentation brower)å’Œä»£ç ç‰‡æ®µç®¡ç†ï¼ˆCode snippet managerï¼‰ï¼Œå¯ä»¥æä¾›çš„å¸®åŠ©æœ‰</p><ol><li>è¿…é€Ÿ</li><li>ç›´æ¥</li><li>æœ¬åœ°</li><li>Alfredåä½œ</li></ol><p>å½“ç„¶å¸¸è§çš„å‡½æ•°ç”¨æ³•å¯ä»¥ç›´æ¥é€šè¿‡å‘½ä»¤æ¥è·å–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> module_name <span class="hljs-comment">#such as import math</span><br><span class="hljs-built_in">help</span>(module_name) <span class="hljs-comment">#æ¨¡å—å¸®åŠ©æŸ¥è¯¢</span><br><span class="hljs-built_in">dir</span>(module_name) <span class="hljs-comment"># æŸ¥è¯¢æ¨¡å—ä¸‹æ‰€æœ‰çš„å‡½æ•°</span><br><span class="hljs-built_in">help</span>(module_name.func_name) <span class="hljs-comment">#æŸ¥è¯¢å…·ä½“å‡½æ•°çš„ç”¨æ³•</span><br><span class="hljs-built_in">print</span>(func_name.__doc__) <span class="hljs-comment"># æ‰“å°å‡½æ•°çš„ç”¨æ³•</span><br></code></pre></td></tr></table></figure><h2 id="0x03-pandas-æ–°æ‰‹æ•™ç¨‹"><a class="markdownIt-Anchor" href="#0x03-pandas-æ–°æ‰‹æ•™ç¨‹"></a> 0x03 Pandas æ–°æ‰‹æ•™ç¨‹</h2><p>é¦–å…ˆä»‹ç»pandasæ˜¯ä»€ä¹ˆï¼š</p><blockquote><p>Pandas is a <a href="https://www.python.org/">Python</a> package providing fast, flexible, and expressive data structures designed to make working with â€œrelationalâ€ or â€œlabeledâ€ data both easy and intuitive.</p><p>It aims to be the fundamental high-level building block for doing practical, <strong>real-world</strong> data analysis in Python.</p></blockquote><p>å…¶ä¸­åŸºæœ¬çš„æ•°æ®ç±»å‹å¯ä»¥åˆ†ä¸ºSerieså’ŒDataFrameä¸¤ç§ï¼ŒåŸºäºNumPyæ„å»ºã€‚æ–°æ‰‹æ•™ç¨‹ç»™å‡ºå¸¸è§çš„Pandasä½¿ç”¨çš„Topicã€‚åŒ…æ‹¬</p><h3 id="31-åˆ›å»ºæ•°æ®-æŸ¥çœ‹æ•°æ®-ç´¢å¼•æ•°æ®"><a class="markdownIt-Anchor" href="#31-åˆ›å»ºæ•°æ®-æŸ¥çœ‹æ•°æ®-ç´¢å¼•æ•°æ®"></a> 3.1 åˆ›å»ºæ•°æ®ã€æŸ¥çœ‹æ•°æ®ã€ç´¢å¼•æ•°æ®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Series ä¸€ç»´æ ‡è®°æ•°ç»„ï¼Œå¯ä»¥å®¹çº³å„ç§æ•°æ®ç±»å‹(intã€floatã€stringã€chatã€python object)</span><br><span class="hljs-comment"># Pandas äºŒç»´æ ‡è®°æ•°æ®æ¡†æ¶ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸€å¼ æ•°æ®è¡¨æ ¼ï¼Œæˆ–è€…æ˜¯SQLè¡¨æ ¼</span><br><span class="hljs-comment"># Insight01ï¼šPandasä¸­çš„æ•°æ®ç»“æ„å¯ä»¥çœ‹ä½œæ˜¯ndarrayæ–¹å¼çš„æ ‡é‡ï¼ˆé€šè¿‡indexç´¢å¼•ï¼‰ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯dictæ–¹å¼çš„å­—å…¸ï¼ˆå¯ä»¥é€šè¿‡keyç´¢å¼•ï¼‰</span><br><span class="hljs-comment"># Attention01:Pandasæ•°æ®ä¹‹é—´çš„è¿ç®—é€šå¸¸æ˜¯æŒ‰ç…§å…ƒç´ çš„ï¼Œå¹¶ä¸”æ˜¯broadcastingçš„ã€‚å¯¹äºç¼ºå¤±å€¼é€šå¸¸ä½¿ç”¨numpy.nanå¡«è¡¥</span><br><br><span class="hljs-comment"># åˆ›å»ºæ•°æ®ï¼Œå¯ä»¥æ¥è‡ªäº 1. ndarrayã€2. dictã€3. scalarã€4. tuple of dict</span><br>d = &#123;<br>    <span class="hljs-string">&quot;one&quot;</span>: pd.Series([<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>], index=[<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>]),<br>    <span class="hljs-string">&quot;two&quot;</span>: pd.Series([<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>], index=[<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>]),<br>&#125;<br><br>d = &#123;<span class="hljs-string">&quot;one&quot;</span>: [<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>], <span class="hljs-string">&quot;two&quot;</span>: [<span class="hljs-number">4.0</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">2.0</span>, <span class="hljs-number">1.0</span>]&#125;<br>pd.DataFrame(d, index=[<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;d&quot;</span>])<br><br>data2 = [&#123;<span class="hljs-string">&quot;a&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&quot;b&quot;</span>: <span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-string">&quot;a&quot;</span>: <span class="hljs-number">5</span>, <span class="hljs-string">&quot;b&quot;</span>: <span class="hljs-number">10</span>, <span class="hljs-string">&quot;c&quot;</span>: <span class="hljs-number">20</span>&#125;]<br>pd.DataFrame(data2, index=[<span class="hljs-string">&quot;first&quot;</span>, <span class="hljs-string">&quot;second&quot;</span>])<br><br>data3= &#123;<br>        (<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>): &#123;(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>): <span class="hljs-number">1</span>, (<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>): <span class="hljs-number">2</span>&#125;,<br>        (<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>): &#123;(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>): <span class="hljs-number">3</span>, (<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>): <span class="hljs-number">4</span>&#125;,<br>        (<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>): &#123;(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>): <span class="hljs-number">5</span>, (<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>): <span class="hljs-number">6</span>&#125;,<br>        (<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>): &#123;(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>): <span class="hljs-number">7</span>, (<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>): <span class="hljs-number">8</span>&#125;,<br>        (<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>): &#123;(<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;D&quot;</span>): <span class="hljs-number">9</span>, (<span class="hljs-string">&quot;A&quot;</span>, <span class="hljs-string">&quot;B&quot;</span>): <span class="hljs-number">10</span>&#125;,<br>    &#125;<br>pd.DataFrame(data3)<br><br><span class="hljs-comment"># æŸ¥çœ‹æ•°æ®</span><br>.head() <span class="hljs-comment">#æŸ¥çœ‹dataframeçš„é¡¶éƒ¨</span><br>.tail() <span class="hljs-comment">#æŸ¥çœ‹dataframeçš„åº•éƒ¨</span><br>.columns()<br>.index()<br>.to_numpy() <span class="hljs-comment">#æ³¨æ„è¿™ä¸ªå¯èƒ½æ˜¯ä¸€ä¸ªæ˜‚è´µçš„æ“ä½œ</span><br>.describe() <span class="hljs-comment"># æ˜¾ç¤ºæ•°æ®çš„å¿«é€Ÿæ‘˜è¦</span><br>.T <span class="hljs-comment"># è½¬ç½®</span><br><br>df.sort_index(axis=<span class="hljs-number">1</span>, ascending=<span class="hljs-literal">False</span>) <span class="hljs-comment">#æŒ‰ç…§è½´è¿›è¡Œæ’åº</span><br>df.sort_values(by=<span class="hljs-string">&quot;B&quot;</span>)<br><br><span class="hljs-comment"># æ›´æ”¹æ§åˆ¶å°æ˜¾ç¤º</span><br>info() <span class="hljs-comment"># ç”¨äºå¿«é€Ÿæ˜¾ç¤ºdataframeä¿¡æ¯</span><br>baseball.info()<br><br>to_string() <span class="hljs-comment"># ä»¥è¡¨æ ¼çš„å½¢å¼è¿”å›dataframeçš„å­—ç¬¦ä¸²è¡¨ç¤º</span><br><span class="hljs-built_in">print</span>(baseball.iloc[-<span class="hljs-number">20</span>:, :<span class="hljs-number">12</span>].to_string())<br>display.width <span class="hljs-comment"># æ›´æ”¹å•è¡Œçš„æ‰“å°é‡</span><br>pd.set_option(<span class="hljs-string">&quot;display.width&quot;</span>, <span class="hljs-number">40</span>)  <span class="hljs-comment"># default is 80</span><br>pd.set_option(<span class="hljs-string">&quot;display.max_colwidth&quot;</span>, <span class="hljs-number">30</span>)<br>pd.DataFrame(np.random.randn(<span class="hljs-number">3</span>, <span class="hljs-number">12</span>))<br><br><span class="hljs-comment"># ç´¢å¼•æ•°æ®</span><br><span class="hljs-comment"># ç»§æ‰¿seriesçš„ç´¢å¼•</span><br>df[<span class="hljs-string">&quot;one&quot;</span>]<br>df[<span class="hljs-string">&quot;three&quot;</span>] = df[<span class="hljs-string">&quot;one&quot;</span>] * df[<span class="hljs-string">&quot;two&quot;</span>]<br>df[<span class="hljs-string">&quot;flag&quot;</span>] = df[<span class="hljs-string">&quot;one&quot;</span>] &gt; <span class="hljs-number">2</span><br><span class="hljs-keyword">del</span> df[<span class="hljs-string">&quot;two&quot;</span>]<br>three = df.pop(<span class="hljs-string">&quot;three&quot;</span>)<br>df[<span class="hljs-string">&quot;foo&quot;</span>] = <span class="hljs-string">&quot;bar&quot;</span> <span class="hljs-comment">#è‡ªåŠ¨broadcasting</span><br>df[<span class="hljs-string">&quot;one_trunc&quot;</span>] = df[<span class="hljs-string">&quot;one&quot;</span>][:<span class="hljs-number">2</span>] <span class="hljs-comment"># è‡ªåŠ¨ç¬¦åˆindex</span><br>df.insert(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;bar&quot;</span>, df[<span class="hljs-string">&quot;one&quot;</span>])<br><br><span class="hljs-comment"># assign() å§‹ç»ˆè¿”å›æ•°æ®çš„å‰¯æœ¬ï¼Œä½†æ˜¯åŸå§‹çš„dataframeå¹¶ä¸ä¼šä¿®æ”¹</span><br>iris.assign(sepal_ratio=<span class="hljs-keyword">lambda</span> x: (x[<span class="hljs-string">&quot;SepalWidth&quot;</span>] / x[<span class="hljs-string">&quot;SepalLength&quot;</span>])).head()<br>df.loc <span class="hljs-comment">#æ ¹æ®æ ‡ç­¾é€‰æ‹©</span><br>df.iloc <span class="hljs-comment">#æ ¹æ®ä¸‹æ ‡é€‰æ‹©</span><br>df[<span class="hljs-number">5</span>:<span class="hljs-number">10</span>] <span class="hljs-comment"># åˆ‡ç‰‡è¡Œ</span><br>df[<span class="hljs-built_in">bool</span>] <span class="hljs-comment"># åˆ‡ç‰‡è¡Œ</span><br><br></code></pre></td></tr></table></figure><h3 id="32-æ•°æ®ç¼ºå¤±å¤„ç†-è¿ç®—å‡½æ•°"><a class="markdownIt-Anchor" href="#32-æ•°æ®ç¼ºå¤±å¤„ç†-è¿ç®—å‡½æ•°"></a> 3.2 æ•°æ®ç¼ºå¤±å¤„ç†ã€è¿ç®—å‡½æ•°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">np.nan <span class="hljs-comment">#è¡¨ç¤ºä¸¢å¤±çš„æ•°æ®ç±»å‹</span><br><br>df.reindex() <span class="hljs-comment"># å…è®¸æ›´æ”¹ã€æ·»åŠ å’Œåˆ é™¤æŒ‡å®šè½´ä¸Šçš„ç´¢å¼•ï¼ŒåŒæ—¶è¿”å›æ•°æ®å‰¯æœ¬</span><br>df1 = df.reindex(index=dates[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>], columns=<span class="hljs-built_in">list</span>(df.columns) + [<span class="hljs-string">&quot;E&quot;</span>])<br>df1.loc[dates[<span class="hljs-number">0</span>] : dates[<span class="hljs-number">1</span>], <span class="hljs-string">&quot;E&quot;</span>] = <span class="hljs-number">1</span><br><br>df.dropna() <span class="hljs-comment"># åˆ é™¤ä»»ä½•ç¼ºå°‘æ•°æ®çš„è¡Œ</span><br>df.fillna() <span class="hljs-comment"># å¡«å……ç¡®å®çš„æ•°æ®</span><br>isna() <span class="hljs-comment">#è·å–å€¼æ˜¯å¦ä¸ºnan</span><br><br>é»˜è®¤æŒ‰ç…§broadcastingè¿›è¡Œè®¡ç®—<br>df.mean() <span class="hljs-comment"># è®¡ç®—å¹³å‡å€¼</span><br>df.mean(<span class="hljs-number">1</span>) <span class="hljs-comment"># å¦å¤–ä¸€ä¸ªæ–¹å‘</span><br>df.apply() <span class="hljs-comment"># å°†ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°åº”ç”¨äºæ•°æ®</span><br>df.apply(np.cumsum)<br>df.apply(<span class="hljs-keyword">lambda</span> x: x.<span class="hljs-built_in">max</span>() - x.<span class="hljs-built_in">min</span>())<br><br>values_count()<br>df.<span class="hljs-built_in">str</span>.ufunc() <span class="hljs-comment"># åœ¨strå±æ€§ä¸‹ï¼Œå¯ä»¥è°ƒç”¨éœ€è¦å…¶ä»–çš„å­—ç¬¦ä¸²</span><br></code></pre></td></tr></table></figure><h3 id="33-é›†åˆä¹‹é—´çš„å¤„ç†åˆå¹¶-åˆ†ç»„-é‡å¡‘å’Œå¤šç´¢å¼•"><a class="markdownIt-Anchor" href="#33-é›†åˆä¹‹é—´çš„å¤„ç†åˆå¹¶-åˆ†ç»„-é‡å¡‘å’Œå¤šç´¢å¼•"></a> 3.3 é›†åˆä¹‹é—´çš„å¤„ç†ï¼šåˆå¹¶ã€åˆ†ç»„ã€é‡å¡‘å’Œå¤šç´¢å¼•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">pd.concat([df1,df2,df3]) <span class="hljs-comment"># æŒ‰ç…§axisè¿›è¡Œåˆå¹¶ï¼Œjoinå‚æ•°ä¸ºouteræˆ–è€…innerï¼Œignore_indeé‡å»ºç´¢å¼•</span><br>pd.merge(df1,df2,key) <span class="hljs-comment"># ç±»ä¼¼SQLä¸­çš„è¿æ¥ï¼Œå¯ä»¥æ ¹æ®ä¸€ä¸ªæˆ–è€…å¤šä¸ªé”®å°†ä¸åŒçš„dataframeè¿æ¥èµ·æ¥</span><br>pd.join() <span class="hljs-comment"># ç”¨äºkeyçš„åˆå¹¶</span><br><br>df.groupby(<span class="hljs-string">&quot;A&quot;</span>)[[<span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;D&quot;</span>]].<span class="hljs-built_in">sum</span>() <span class="hljs-comment"># ç±»ä¼¼SQLä¸­çš„group by</span><br><br><span class="hljs-comment"># é‡å¡‘å’Œå¤šç´¢å¼•çœ‹ä¸æ‡‚ï½</span><br></code></pre></td></tr></table></figure><h3 id="34æ—¶é—´åºåˆ—å¤„ç†å‡½æ•°ä¸“é¢˜"><a class="markdownIt-Anchor" href="#34æ—¶é—´åºåˆ—å¤„ç†å‡½æ•°ä¸“é¢˜"></a> 3.4æ—¶é—´åºåˆ—å¤„ç†å‡½æ•°ä¸“é¢˜</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">resample() <span class="hljs-comment">#å°†ç¬¬äºŒåˆ—æ•°æ®è½¬æ¢æˆ5minï¼Œæœ‰ç‚¹æ„æ€</span><br>series.tz_localize() <span class="hljs-comment"># å°†æ—¶é—´åºåˆ—è½¬æ¢æˆä¸ºæœ¬åœ°æ—¶åŒº</span><br>series.tz_convert() <span class="hljs-comment"># å°†æ—¶åŒºæ„ŸçŸ¥æ—¶é—´åºåˆ—è½¬æ¢æˆä¸ºå¦ä¸€ä¸ªæ—¶åŒº</span><br>.to_period() <span class="hljs-comment"># è½¬æ¢æˆä¸ºæ—¶é—´è·¨åº¦</span><br>.to_timestamp() <span class="hljs-comment"># è½¬æ¢æˆä¸ºæ—¶é—´æˆ³</span><br></code></pre></td></tr></table></figure><h2 id="0x04-pandas-ç”¨æˆ·æ•™ç¨‹"><a class="markdownIt-Anchor" href="#0x04-pandas-ç”¨æˆ·æ•™ç¨‹"></a> 0x04 Pandas ç”¨æˆ·æ•™ç¨‹</h2><p>åœ¨ç”¨æˆ·æ•™ç¨‹ä¸­ï¼ŒPandasæä¾›äº†ä¸€äº›æ›´åŠ ç»†è‡´çš„ä¸“é¢˜ã€‚è¿™é‡Œåªç»™å‡ºæœ‰è¶£çš„è¯é¢˜</p><h3 id="41-æ•°æ®ç»“æ„ç®€ä»‹-intro-to-data-structure"><a class="markdownIt-Anchor" href="#41-æ•°æ®ç»“æ„ç®€ä»‹-intro-to-data-structure"></a> 4.1 æ•°æ®ç»“æ„ç®€ä»‹ intro to data structure</h3><p>å’Œç¬¬ä¸‰ç« çš„ç±»ä¼¼</p><h3 id="42-å…³é”®åŸºç¡€å‡½æ•°-essential-basic-functionality"><a class="markdownIt-Anchor" href="#42-å…³é”®åŸºç¡€å‡½æ•°-essential-basic-functionality"></a> 4.2 å…³é”®åŸºç¡€å‡½æ•° essential basic functionality</h3><p>Attention02:å¯¹äºdataframeçš„æ“ä½œå¯ä»¥ä¸‰ä¸ªç»´åº¦ï¼šå…ƒç´ çš„ç»´åº¦ã€è¡Œæˆ–è€…åˆ—çš„ç»´åº¦ã€æ•´ä¸ªDataFrameçš„ç»´åº¦</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æŸ¥çœ‹</span><br>.head()<br>.tail()<br><br>.shape<br>.index<br>.columns<br><br>.to_numpy()<br>.array()<br><span class="hljs-comment"># Attention03:æ›´åŠ æ¨èä½¿ç”¨è¿™ä¸¤ä¸ªï¼Œè€Œä¸æ˜¯ä½¿ç”¨valuesæ¥ç´¢å¼•ã€‚å› ä¸ºdataframeä¸­å¸¸è§çš„æ“ä½œåŒ…æ‹¬æ‰©å±•ç±»å‹ï¼Œæˆ–è€…ä¸åŒç±»å‹ï¼Œä½¿ç”¨valueså¯èƒ½ä¼šå‡ºç°æ€§èƒ½ä¸Šçš„é—®é¢˜</span><br><br><span class="hljs-comment"># è¿ç®—ï¼ˆelementLevelï¼‰</span><br>df1 &gt; df2<br>df1*df2<br>df1+df2<br><br><span class="hljs-comment"># äºŒç»´è¿ç®—ï¼Œè¿™é‡Œéœ€è¦é‡è§† 1.é«˜ç»´å’Œä½ç»´ä¹‹é—´å­˜åœ¨broadcasting 2.è®¡ç®—ä¸­æ•°æ®ä¸¢å¤±çš„æƒ…å†µ</span><br>.add() <span class="hljs-comment"># ç›¸åŠ ï¼Œå¯ä»¥è®¾ç½®axiså‡½æ•°</span><br>.sub() <span class="hljs-comment"># ç›¸å‡ï¼Œå¯ä»¥è®¾ç½®axis</span><br>.mul() <span class="hljs-comment"># ç›¸ä¹˜ï¼Œå¯ä»¥è®¾ç½®axis</span><br>.div() <span class="hljs-comment"># ç›¸é™¤ï¼Œå¯ä»¥è®¾ç½®axis</span><br><br>.radd()<br>.rsub()<br>.<span class="hljs-built_in">divmod</span>() <span class="hljs-comment"># å•†ï¼Œå’Œä½™</span><br><br><span class="hljs-comment"># ç¼ºå¤±å€¼æ“ä½œ</span><br>fill_value=<span class="hljs-number">0</span> <span class="hljs-comment">#å¯é€‰å‚æ•°</span><br>.fill_na() <span class="hljs-comment">#åˆ©ç”¨å‡½æ•°å¡«è¡¥</span><br><br><span class="hljs-comment"># äºŒè¿›åˆ¶æ¯”è¾ƒæ–¹æ³• eq ne lt qt le ge</span><br><span class="hljs-comment"># å¸ƒå°”è¿ç®—ç¬¦å·</span><br>.empty() <span class="hljs-comment"># æµ‹è¯•å¯¹è±¡æ˜¯å¦ä¸ºç©º</span><br>.<span class="hljs-built_in">all</span>() <span class="hljs-comment"># æµ‹è¯•å¹¶</span><br>.<span class="hljs-built_in">any</span>() <span class="hljs-comment"># æµ‹è¯•æˆ–</span><br>.<span class="hljs-built_in">bool</span>() <span class="hljs-comment"># æµ‹è¯•å•ä¸ªå…ƒç´ </span><br><br><span class="hljs-comment">#Attention 04ï¼šä¸å¯ä»¥ä½¿ç”¨ if df:...ï¼Œè¿™æ ·ä¸ç¬¦åˆå¸ƒå°”é€»è¾‘</span><br><br><span class="hljs-comment"># æè¿°æ€§åˆ†æ</span><br><span class="hljs-built_in">sum</span>()<br>mean()<br>quantile()<br>cumsum()<br>cumprod()<br><br>describe()<br>idxmin() <span class="hljs-comment"># å¯»æ‰¾æœ€å°å€¼ä¸‹æ ‡ argmin</span><br>idxmax() <span class="hljs-comment"># å¯»æ‰¾æœ€å¤§å€¼ä¸‹æ ‡ argmax</span><br>res=df.value_counts()<br>mode()<br><br><span class="hljs-comment"># discretization and quantiling</span><br>cut() <span class="hljs-comment">#åŸºäºå€¼çš„bin</span><br>qcut() <span class="hljs-comment">#åŸºäºåˆ†ä½æ•°çš„bin</span><br><br><span class="hljs-comment"># å‡½æ•°åº”ç”¨ï¼špipeline(),apply(),applymap(); èšåˆå‡½æ•°agg() and transform()</span><br><br><span class="hljs-comment"># å°è¯•æƒ³è±¡ä¸€ä¸‹å¦‚ä½•æ–°å¢ä¸¤ä¸ªåˆ—</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extractCityName</span>(<span class="hljs-params">df</span>):<br>df[<span class="hljs-string">&#x27;cityName&#x27;</span>]=df[<span class="hljs-string">&#x27;cityAndCode&#x27;</span>].<span class="hljs-built_in">str</span>.aplit(<span class="hljs-string">&quot;,&quot;</span>).<span class="hljs-built_in">str</span>.get(<span class="hljs-number">0</span>)<br><span class="hljs-keyword">return</span> df<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">addCountryName</span>(<span class="hljs-params">df,countryName=<span class="hljs-literal">None</span></span>):<br>col=<span class="hljs-string">&#x27;cityName&#x27;</span><br>df[<span class="hljs-string">&#x27;cityAndCounty&#x27;</span>]=df[col]+countryName<br>df_p=pd.Dataframe(&#123;<span class="hljs-string">&#x27;cityAndCode&#x27;</span>:[<span class="hljs-string">&#x27;chicago&#x27;</span>,<span class="hljs-string">&#x27;IL&#x27;</span>]&#125;)<br><span class="hljs-comment"># ç°åœ¨å¯ä»¥æœ‰ä¸¤ç§æ–¹å¼æ¥æ–°å¢å¿ƒå¾—countryName</span><br>addCounryName(extractCityName(df_p),country_name=<span class="hljs-string">&#x27;US&#x27;</span>)<span class="hljs-comment">#æ³•1</span><br>df_p.pipeline(extractCityName).pipe(addCountryName,countryName=<span class="hljs-string">&#x27;US&#x27;</span>)<span class="hljs-comment">#æ³•2:æˆ–è€…ä½¿ç”¨pipeline</span><br><br><span class="hljs-comment"># é‡ç´¢å¼• reindex</span><br><br><span class="hljs-comment"># è¿­ä»£ iteration</span><br><span class="hljs-keyword">for</span> label,ser <span class="hljs-keyword">in</span> df.items():<br>  <span class="hljs-built_in">print</span>(label)<br>  <span class="hljs-built_in">print</span>(ser)<br><span class="hljs-keyword">for</span> row_index,row <span class="hljs-keyword">in</span> df.iterrows():<br>  <span class="hljs-built_in">print</span>(row)<br><br><span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> df.itertuples():<br>  <span class="hljs-built_in">print</span>(row)<br><br><span class="hljs-comment"># æ’åºè®¿é—®</span><br>.sort_index()<br>.sort_values()<br></code></pre></td></tr></table></figure><h3 id="45-ç´¢å¼•å’Œé€‰æ‹©æ•°æ®-indexing-and-selecting-data"><a class="markdownIt-Anchor" href="#45-ç´¢å¼•å’Œé€‰æ‹©æ•°æ®-indexing-and-selecting-data"></a> 4.5 ç´¢å¼•å’Œé€‰æ‹©æ•°æ® Indexing and selecting data</h3><p>å’Œæ–°æ‰‹æ•™ç¨‹å·®ä¸å¤š</p><h3 id="46-å¤šé‡ä¸‹æ ‡å’Œé«˜çº§ç´¢å¼•-multiindex-and-advanced-indexing"><a class="markdownIt-Anchor" href="#46-å¤šé‡ä¸‹æ ‡å’Œé«˜çº§ç´¢å¼•-multiindex-and-advanced-indexing"></a> 4.6 å¤šé‡ä¸‹æ ‡å’Œé«˜çº§ç´¢å¼• MultiIndex and advanced indexing</h3><p>å’Œæ–°æ‰‹æ•™ç¨‹å·®ä¸å¤š</p><h3 id="465-merge-join-concatenate-compare"><a class="markdownIt-Anchor" href="#465-merge-join-concatenate-compare"></a> 4.6.5 Mergeã€joinã€concatenateã€compare</h3><p>å’ŒSQLæ•™ç¨‹å·®ä¸å¤š</p><h3 id="47-é‡å¡‘å’Œæ•°æ®é€è§†è¡¨"><a class="markdownIt-Anchor" href="#47-é‡å¡‘å’Œæ•°æ®é€è§†è¡¨"></a> 4.7 é‡å¡‘å’Œæ•°æ®é€è§†è¡¨</h3><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/reshaping_pivot.png" alt="../_images/reshaping_pivot.png" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># pivot() æ¥æŒ‰ç…§å…ƒç´ è¿›è¡Œå †å ,å¯ä»¥é€‰æ‹©stackæˆ–è€…unstack</span><br>         date variable     value<br><span class="hljs-number">0</span>  <span class="hljs-number">2000</span>-01-03        A  <span class="hljs-number">0.469112</span><br><span class="hljs-number">1</span>  <span class="hljs-number">2000</span>-01-04        A -<span class="hljs-number">0.282863</span><br><span class="hljs-number">2</span>  <span class="hljs-number">2000</span>-01-05        A -<span class="hljs-number">1.509059</span><br><span class="hljs-number">3</span>  <span class="hljs-number">2000</span>-01-03        B -<span class="hljs-number">1.135632</span><br><span class="hljs-number">4</span>  <span class="hljs-number">2000</span>-01-04        B  <span class="hljs-number">1.212112</span><br><span class="hljs-number">5</span>  <span class="hljs-number">2000</span>-01-05        B -<span class="hljs-number">0.173215</span><br><span class="hljs-number">6</span>  <span class="hljs-number">2000</span>-01-03        C  <span class="hljs-number">0.119209</span><br><span class="hljs-number">7</span>  <span class="hljs-number">2000</span>-01-04        C -<span class="hljs-number">1.044236</span><br><span class="hljs-number">8</span>  <span class="hljs-number">2000</span>-01-05        C -<span class="hljs-number">0.861849</span><br><span class="hljs-number">9</span>  <span class="hljs-number">2000</span>-01-03        D -<span class="hljs-number">2.104569</span><br><span class="hljs-number">10</span> <span class="hljs-number">2000</span>-01-04        D -<span class="hljs-number">0.494929</span><br><span class="hljs-number">11</span> <span class="hljs-number">2000</span>-01-05        D  <span class="hljs-number">1.071804</span><br><br>pivoted = df.pivot(index=<span class="hljs-string">&quot;date&quot;</span>, columns=<span class="hljs-string">&quot;variable&quot;</span>, values=<span class="hljs-string">&quot;value&quot;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/reshaping_stack.png" alt="../_images/reshaping_stack.png" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/reshaping_unstack.png" alt="../_images/reshaping_unstack.png" /></p><p>å‰©ä½™çš„å¤ªç†è®ºäº†ï½</p><h2 id="0x05-å¿ƒå¾—"><a class="markdownIt-Anchor" href="#0x05-å¿ƒå¾—"></a> 0x05 å¿ƒå¾—</h2><p>æ–‡æ¡£å¾ˆå¤šï¼Œä½†æ˜¯å…¶ä¸­ç»™å‡ºå¼€å‘è€…çš„defaultçš„é€‰é¡¹ï¼Œå¯ä»¥æé«˜å¯¹å…¶çš„ç†è§£ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>baseline</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pandas</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>macOSä½¿ç”¨æŠ€å·§_é¢„è§ˆPreview</title>
    <link href="/posts/de0c5bf1.html"/>
    <url>/posts/de0c5bf1.html</url>
    
    <content type="html"><![CDATA[<p>é¢„è§ˆPreview</p><span id="more"></span><p>åœ¨Mç³»åˆ—çš„macä¸Šï¼Œé¢„è§ˆçš„å¯ä»¥å°†æ‰«æçš„PDFä¸­çš„æ–‡å­—è½¬æ¢æˆä¸ºå¯ç¼–è¾‘çŠ¶æ€ã€‚è½¬æ¢æ—¶é—´å¤§æ¦‚200é¡µçš„PDFéœ€è¦5åˆ†é’Ÿï½</p><p>exportå°±ä¼šæœ‰ä¸‹åˆ—é€‰é¡¹</p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/image-20230504134518543.png" alt="image-20230504134518543" /></p>]]></content>
    
    
    <categories>
      
      <category>macOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä½¿ç”¨æŠ€å·§</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-10-problemSet01</title>
    <link href="/posts/7b309918.html"/>
    <url>/posts/7b309918.html</url>
    
    <content type="html"><![CDATA[<p>Problem set00 æ˜¯å…³äºçº¿æ€§ä»£æ•°å’Œå¤šå…ƒå¾®ç§¯åˆ†å­¦çš„åŸºæœ¬çŸ¥è¯†ï¼ŒProblem set 01ä¸»è¦æ˜¯ç›‘ç£å­¦ä¹ ã€‚ä½œä¸šè¦æ±‚æœ€å¥½ä½¿ç”¨LaTexè¿›è¡Œç¼–å†™ï¼ŒåŒæ—¶éœ€è¦å°†libraryä¿å­˜åˆ°environment.ymlæ–‡ä»¶ä¸­ï¼Œå¹¶ä¿è¯run.pyè„šæœ¬å¯ä»¥æ­£å¸¸è¿è¡Œã€‚</p><span id="more"></span><h2 id="0x01-çº¿æ€§åˆ†ç±»é€»è¾‘å›å½’å’Œå¹¿ä¹‰çº¿æ€§æ¨¡å‹"><a class="markdownIt-Anchor" href="#0x01-çº¿æ€§åˆ†ç±»é€»è¾‘å›å½’å’Œå¹¿ä¹‰çº¿æ€§æ¨¡å‹"></a> 0x01 çº¿æ€§åˆ†ç±»ï¼ˆé€»è¾‘å›å½’å’Œå¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼‰</h2><h3 id="11-é—®é¢˜å›é¡¾"><a class="markdownIt-Anchor" href="#11-é—®é¢˜å›é¡¾"></a> 1.1 é—®é¢˜å›é¡¾</h3><p>Linear classifiers ( logistic regression and GDA)</p><p>åœ¨æœ¬æ¬¡ä½œä¸šä¸­å°†å›é¡¾ä¹‹å‰çš„æ¦‚ç‡çº¿æ€§åˆ†ç±»å™¨ï¼Œ</p><ol><li>åˆ¤åˆ«çº¿æ€§åˆ†ç±» (discriminative linear classifier) ï¼šé€»è¾‘å›å½’</li><li>ç”Ÿæˆçº¿æ€§åˆ†ç±» ï¼ˆgenerative linear classifierï¼‰ï¼šé«˜æ–¯åˆ¤åˆ«æ¨¡å‹</li></ol><p>ä¸¤è€…å‡å¯ä»¥å°†ä¸€ä¸ªæ•°æ®é›†åˆ†æˆä¸¤ç±»ï¼Œä½†æ˜¯åŸºäºä¸åŒçš„å‡è®¾ï¼Œæœ¬æ¬¡é—®é¢˜çš„ç›®çš„æ˜¯æ‰¾åˆ°ä¸¤è€…çš„ç›¸åŒç‚¹å’Œå·®å¼‚ã€‚</p><h3 id="12-å®é™…é—®é¢˜"><a class="markdownIt-Anchor" href="#12-å®é™…é—®é¢˜"></a> 1.2 å®é™…é—®é¢˜</h3><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301100927616.png" alt="é—®é¢˜1-(a)" /></p><p>æ³¨æ„HessiançŸ©é˜µä¸ºPSDï¼Œåˆ™è¯´æ˜æŸå¤±å‡½æ•°æ˜¯å‡¸ï¼ˆconvexï¼‰çš„ï¼Œä¹Ÿå°±æ˜¯å­˜åœ¨æå€¼ç‚¹</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo separator="true">,</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo>)</mo><mo>=</mo><mi>p</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo>)</mo><mi mathvariant="normal">/</mi><mi>p</mi><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo>)</mo><mo>=</mo><mi>p</mi><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi><mi mathvariant="normal">âˆ£</mi><mi>y</mi><mo>)</mo><mi>p</mi><mo>(</mo><mi>y</mi><mo>)</mo><mi mathvariant="normal">/</mi><mi>p</mi><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>t</mi><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p(y|x,theta)=p(y,x,theta)/p(x,theta)=p(x,theta|y)p(y)/p(x,theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mord mathrm">/</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord mathrm">/</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit">t</span><span class="mord mathit">h</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span></span></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301101647405.png" alt="1-b" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301101647666.png" alt="1-c" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301101650344.png" alt="1-c(2)" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301101650705.png" alt="1-d" /></p><h3 id="13-é—®é¢˜æ±‚è§£"><a class="markdownIt-Anchor" href="#13-é—®é¢˜æ±‚è§£"></a> 1.3 é—®é¢˜æ±‚è§£</h3><p>ç”±äºå…¬å¼è¾ƒå¤šï¼Œåªèƒ½ç»™å‡ºæ€è·¯</p><p>ï¼ˆ1ï¼‰ å±•å¼€æ±‚å¯¼å°±èƒ½å‘ç°æ˜¯å¤§äº0</p><p>ï¼ˆ2ï¼‰codingå°±å®Œäº‹äº†ï¼Œnumpyçš„MATLABçš„çŸ©é˜µè®¡ç®—æ–¹å¼</p><p>ï¼ˆ3ï¼‰GDAæŒ‰ç…§è´å¶æ–¯å±•å¼€å°±è¡Œäº†</p><p>ï¼ˆ4ï¼‰ å‘ç°æ˜¯ç›¸åŒçš„</p><p>ï¼ˆ5ï¼‰ï¼ˆ6ï¼‰ï¼ˆ7ï¼‰ï¼ˆ8ï¼‰æ˜¯ä¸€äº›å¯è§†åŒ–çš„ä¸œè¥¿</p><h2 id="0x02-ä¸å®Œæ•´-åªæœ‰æ­£æ ‡ç­¾incompletepositive-only-labels"><a class="markdownIt-Anchor" href="#0x02-ä¸å®Œæ•´-åªæœ‰æ­£æ ‡ç­¾incompletepositive-only-labels"></a> 0x02 ä¸å®Œæ•´ã€åªæœ‰æ­£æ ‡ç­¾ï¼šIncompleteï¼ŒPositive- only labels</h2><h3 id="21-é—®é¢˜å›é¡¾"><a class="markdownIt-Anchor" href="#21-é—®é¢˜å›é¡¾"></a> 2.1 é—®é¢˜å›é¡¾</h3><p>å‡è®¾åœ¨æˆ‘ä»¬æ²¡æœ‰å¾—åˆ°å®Œæ•´çš„æ ‡ç­¾çš„æƒ…å†µä¸‹çš„ï¼Œåªèƒ½ç¡®å®šæ€§å¾—åˆ°éƒ¨åˆ†çš„æ­£æ ·æœ¬ï¼Œè€Œä¸èƒ½å¾—åˆ°å…¶ä»–æ ·æœ¬çš„æ ‡ç­¾ã€‚ä¹Ÿå°±æ˜¯æ‰€æœ‰è´Ÿæ ·æœ¬å’Œå‰©ä½™çš„æ­£æ ·æœ¬æ˜¯æ²¡æœ‰æ ‡ç­¾çš„ã€‚</p><p>è¿™é“é¢˜çš„é—®é¢˜è®¾ç½®æ›´åƒæ˜¯ä¸€ç§å¼•å¯¼ï¼Œå¦‚ä½•ç†è§£è¿™ç§æƒ…å†µä¸‹å¦‚ä½•æ„å»ºæ¨¡å‹</p><h3 id="22-é—®é¢˜"><a class="markdownIt-Anchor" href="#22-é—®é¢˜"></a> 2.2 é—®é¢˜</h3><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301101657770.png" alt="2-a" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301101657662.png" alt="2-b" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301101657533.png" alt="2-c" /></p><p>åç»­æ˜¯é‚£ä¸ªcoding problem</p><h3 id="23-é—®é¢˜è§£ç­”"><a class="markdownIt-Anchor" href="#23-é—®é¢˜è§£ç­”"></a> 2.3 é—®é¢˜è§£ç­”</h3><p>ï¼ˆ1ï¼‰ ç®€å•éšæœºæ ·æœ¬æŠ½æ ·</p><h2 id="0x03-æ³Šæ¾åˆ†å¸ƒçš„æ‹Ÿåˆ"><a class="markdownIt-Anchor" href="#0x03-æ³Šæ¾åˆ†å¸ƒçš„æ‹Ÿåˆ"></a> 0x03 æ³Šæ¾åˆ†å¸ƒçš„æ‹Ÿåˆ</h2><p>é‡æ–°å›å½’GLMä¸­çš„ä¸‰ä¸ªåŸºæœ¬å‡è®¾ï¼š</p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301102059026.png" alt="GLM-assumption" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301102059330.png" alt="GLM-assumption02" /></p><p>æœ¬é‡æ–°è®¤è¯†åˆ°ï¼š</p><ol><li>ç¬¬ä¸€ä¸ªassumptionç»™å‡ºäº†yçš„åˆ†å¸ƒï¼è¿™å¯ä»¥ç”¨æ¥è®¡ç®—ä¼¼ç„¶å‡½æ•°</li><li>ç¬¬äºŒä¸ªassumptionç»™å‡ºå¦‚ä½•ç¡®å®šhypothesisï¼Œä¹Ÿå°±æ˜¯æ¨¡å‹</li><li>ç¬¬ä¸‰ä¸ªassumptionä¼¼ä¹æ˜¯äººä»¬è®¾è®¡å¥½çš„ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½å¯¹ä¸€äº›çº¿æ€§æ¨¡å‹åšå‡è®¾</li></ol><h2 id="0x04-å¹¿ä¹‰çº¿æ€§æ¨¡å‹çš„convexç›¸å…³çš„ç ”ç©¶"><a class="markdownIt-Anchor" href="#0x04-å¹¿ä¹‰çº¿æ€§æ¨¡å‹çš„convexç›¸å…³çš„ç ”ç©¶"></a> 0x04 å¹¿ä¹‰çº¿æ€§æ¨¡å‹çš„convexç›¸å…³çš„ç ”ç©¶</h2><p>å¤ªç†è®ºäº†çœ‹ä¸ä¸‹å»ï½</p><h2 id="0x05-åŠ æƒçº¿æ€§å›å½’"><a class="markdownIt-Anchor" href="#0x05-åŠ æƒçº¿æ€§å›å½’"></a> 0x05 åŠ æƒçº¿æ€§å›å½’</h2><p>é™¤äº† åˆ©ç”¨gradient descentæ±‚è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨normal equationæ¥è¿›è¡Œå‚æ•°çš„æ±‚è§£ï¼›éå¸¸çš„å¥‡å¦™ï¼</p><p>æ³¨æ„è¿™éƒ¨åˆ†å’Œåé¢çš„attentionæœ‰å…³ç³»</p><p>åé¢çš„å…¬å¼å¤ªå¤šäº†ä¸æƒ³æ‰“ï¼Œ</p><h2 id="0x06-æ„Ÿæ‚Ÿ"><a class="markdownIt-Anchor" href="#0x06-æ„Ÿæ‚Ÿ"></a> 0x06 æ„Ÿæ‚Ÿ</h2><p>åŠ¨æ‰‹æ‰èƒ½å‘ç°å­¦ä¹ çš„é—®é¢˜æ‰€åœ¨ï¼ŒåŠ¨æ‰‹æ‰èƒ½çŸ¥é“ä»£ç åº”è¯¥å¦‚ä½•å®è·µï¼</p><p>å¯¹äºç°å®ä¸–ç•Œçš„æŠ½è±¡å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›ä¸€æ­¥å­¦ä¹ å’Œç ”ç©¶ï¼Œè™½ç„¶çŸ©é˜µçš„å®šä¹‰å¾ˆç®€å•ï¼Œä½†æ˜¯åªæœ‰åœ¨è¿™ä¸ªæŠ½è±¡å®šä¹‰çš„åŸºç¡€ä¸Šæ‰èƒ½å‘å±•å‡ºçº¿æ€§ä»£æ•°è¿™é—¨å­¦ç§‘ï¼Œæ‰èƒ½ç”¨æ­¤è§£å†³é—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS229</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-10-problemSet00</title>
    <link href="/posts/c37a98e.html"/>
    <url>/posts/c37a98e.html</url>
    
    <content type="html"><![CDATA[<p>CS229çš„homeworkä¹‹å‰ä¸€ç›´æ²¡æœ‰å†™ï¼Œè¶è¿™ä¸ªå¯’å‡ç»“æŸæ‰å®ƒï¼å¦‚æœ‰é”™è¯¯æ¬¢è¿æŒ‡æ­£ï¼</p><span id="more"></span><h2 id="0x01-gradients-and-hessiansæ±‚å¯¼å’Œæµ·æ£®çŸ©é˜µ"><a class="markdownIt-Anchor" href="#0x01-gradients-and-hessiansæ±‚å¯¼å’Œæµ·æ£®çŸ©é˜µ"></a> 0x01 Gradients and Hessiansï¼š<a href="https://en.wikipedia.org/wiki/Gradient">æ±‚å¯¼</a>å’Œ<a href="https://zh.m.wikipedia.org/zh-hans/%E9%BB%91%E5%A1%9E%E7%9F%A9%E9%99%A3">æµ·æ£®çŸ©é˜µ</a></h2><h3 id="11-å®šä¹‰å›é¡¾"><a class="markdownIt-Anchor" href="#11-å®šä¹‰å›é¡¾"></a> 1.1 å®šä¹‰å›é¡¾</h3><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301091015744.png" alt="å¤šå…ƒå‡½æ•°ä¸€é˜¶å¯¼" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301091016793.png" alt="å¤šå…ƒå‡½æ•°äºŒé˜¶å¯¼" /></p><p><a href="https://zh.m.wikipedia.org/zh-hans/%E5%B0%8D%E7%A8%B1%E7%9F%A9%E9%99%A3">Symmetric</a>: å¯¹ç§°çŸ©é˜µ</p><h3 id="12-é—®é¢˜"><a class="markdownIt-Anchor" href="#12-é—®é¢˜"></a> 1.2 é—®é¢˜</h3><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301091018345.png" alt="é—®é¢˜" /></p><h3 id="13-è§£ç­”"><a class="markdownIt-Anchor" href="#13-è§£ç­”"></a> 1.3 è§£ç­”</h3><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>1</mn><mo>)</mo><mi mathvariant="normal">âˆ‡</mi><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mi>A</mi><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">(1)\nabla f(x)=Ax+b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mord mathrm">âˆ‡</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">A</span><span class="mord mathit">x</span><span class="mbin">+</span><span class="mord mathit">b</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>2</mn><mo>)</mo><mi mathvariant="normal">âˆ‡</mi><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msup><mi>g</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>(</mo><mi>h</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>)</mo><mi mathvariant="normal">âˆ‡</mi><mi>h</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(2)\nabla f(x)=g&#x27;(h(x)) \nabla h(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.801892em;"></span><span class="strut bottom" style="height:1.051892em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="mord mathrm">âˆ‡</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mclose">)</span><span class="mord mathrm">âˆ‡</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>3</mn><mo>)</mo><msup><mi mathvariant="normal">âˆ‡</mi><mn>2</mn></msup><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msup><mi>A</mi><mi>T</mi></msup><mo>=</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">(3)\nabla^2f(x)=A^T=A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathrm">3</span><span class="mclose">)</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">A</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>4</mn><mo>)</mo><msup><mi mathvariant="normal">âˆ‡</mi><mn>2</mn></msup><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msup><mi>g</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msup><mo>(</mo><msup><mi>a</mi><mi>T</mi></msup><mi>x</mi><mo>)</mo><msup><mi>a</mi><mi>T</mi></msup><mi>a</mi></mrow><annotation encoding="application/x-tex">(4) \nabla^2 f(x)=g&#x27;&#x27;(a^Tx)a^Ta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathrm">4</span><span class="mclose">)</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">a</span></span></span></span></span></p><h2 id="0x02-positive-definite-matrices-æ­£å®šçŸ©é˜µ"><a class="markdownIt-Anchor" href="#0x02-positive-definite-matrices-æ­£å®šçŸ©é˜µ"></a> 0x02 Positive definite matrices : æ­£å®šçŸ©é˜µ</h2><h3 id="21-å®šä¹‰å›é¡¾"><a class="markdownIt-Anchor" href="#21-å®šä¹‰å›é¡¾"></a> 2.1 å®šä¹‰å›é¡¾</h3><p>positive semi-definite(PSD): åŠæ­£å®šçŸ©é˜µ</p><p><a href="https://zh.wikipedia.org/wiki/%E6%AD%A3%E5%AE%9A%E7%9F%A9%E9%98%B5">positive definite: æ­£å®šçŸ©é˜µï¼Œegï¼šå•ä½é˜µ</a></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301091027124.png" alt="æ­£å®šçŸ©é˜µå®šä¹‰" /></p><p><a href="https://zh.wikipedia.org/wiki/%E9%9B%B6%E7%A9%BA%E9%97%B4">Null-space:</a> æ ¸ï¼Œè¡¨ç¤ºä¸€ä¸ªç®—å­çš„é›¶ç©ºé—´æ˜¯æ–¹ç¨‹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>V</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">AV=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span>çš„æ‰€æœ‰è§£<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">v</span></span></span></span>çš„é›†åˆ</p><p><a href="https://zh.wikipedia.org/wiki/%E7%A7%A9_(%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0)">Rank</a>: çŸ©é˜µAçš„åˆ—ç§©æ˜¯Açº¿æ€§æ— å…³çš„çºµåˆ—çš„æå¤§æ•°ç›®ï¼›å¯ä»¥ç”¨äºè®¡ç®—çº¿æ€§æ–¹ç¨‹ç»„è§£çš„æ ‘æœ¨ã€ä¹Ÿå¯ä»¥ç”¨æ¥ç¡®å®šçº¿æ€§ç³»ç»Ÿæ˜¯å¦ä¸ºå¯æ§åˆ¶çš„ã€å¯è§‚å¯Ÿçš„</p><h3 id="22-é—®é¢˜"><a class="markdownIt-Anchor" href="#22-é—®é¢˜"></a> 2.2 é—®é¢˜</h3><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301091028776.png" alt="2.2 é—®é¢˜" /></p><h3 id="23-è§£ç­”"><a class="markdownIt-Anchor" href="#23-è§£ç­”"></a> 2.3 è§£ç­”</h3>(a) A^T=(zz^T)=z^Tz=zz^T=A\\x^Tzz^Tx=(x^Tz)(x^Tz)^T \geq0(b) Nullï¼ˆAï¼‰=\{x \in Z;Ax=0\}<p>ä¸¤è¾¹åŒæ—¶ä¹˜<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">x^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8413309999999999em;"></span><span class="strut bottom" style="height:0.8413309999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mi>T</mi></msup><mi>z</mi><msup><mi>z</mi><mi>T</mi></msup><mi>x</mi><mo>=</mo><mo>(</mo><msup><mi>z</mi><mi>T</mi></msup><mi>x</mi><msup><mo>)</mo><mi>T</mi></msup><mo>(</mo><msup><mi>z</mi><mi>T</mi></msup><mi>x</mi><mo>)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x^Tzz^Tx=(z^Tx)^T(z^Tx)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span><span class="mrel">=</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></span></p><p>å¯ä»¥åŒ–ç®€ä¸º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>u</mi><mi>l</mi><mi>l</mi><mo>(</mo><mi>A</mi><mo>)</mo><mo>=</mo><mi>N</mi><mi>u</mi><mi>l</mi><mi>l</mi><mo>(</mo><mi>z</mi><mo>)</mo><mo>=</mo><mrow><mi>x</mi><mo>âˆˆ</mo><mi>z</mi><mo separator="true">,</mo><msup><mi>z</mi><mi>x</mi></msup><mo>=</mo><mn>0</mn></mrow></mrow><annotation encoding="application/x-tex">Null(A)=Null(z)={x \in z, z^x=0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathit">A</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">x</span><span class="mrel">âˆˆ</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">x</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></span></span></p><p>å› ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>a</mi><mi>n</mi><mi>k</mi><mo>(</mo><mi>z</mi><mo>)</mo><mo>â‰¤</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">Rank(z) \leq 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mrel">â‰¤</span><span class="mord mathrm">1</span></span></span></span>,ä½†æ˜¯zéé›¶;ç»“åˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mi>u</mi><mi>l</mi><mi>l</mi><mo>(</mo><mi>A</mi><mo>)</mo><mo>=</mo><mi>N</mi><mi>u</mi><mi>l</mi><mi>l</mi><mo>(</mo><mi>z</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Null(A)=Null(z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathit">A</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mord mathit">u</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>(</mo><mi>A</mi><mo>)</mo><mo>=</mo><mi>R</mi><mo>(</mo><mi>z</mi><mo>)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">R(A)=R(z)=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathit">A</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>c</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">c</span><span class="mclose">)</span></span></span></span></span></p><p>ç»“åˆAçš„PSDç‰¹ç‚¹å¯ä»¥è¯æ˜ï¼Œç•¥</p><h2 id="0x03-eigenvectorseigenvaluesspectral-theoremç‰¹å¾å‘é‡-ç‰¹å¾å€¼-è°±å®šç†"><a class="markdownIt-Anchor" href="#0x03-eigenvectorseigenvaluesspectral-theoremç‰¹å¾å‘é‡-ç‰¹å¾å€¼-è°±å®šç†"></a> 0x03 Eigenvectorsï¼Œeigenvaluesï¼Œspectral theoremï¼šç‰¹å¾å‘é‡ã€ç‰¹å¾å€¼ã€è°±å®šç†</h2><h3 id="31-å®šä¹‰å›é¡¾"><a class="markdownIt-Anchor" href="#31-å®šä¹‰å›é¡¾"></a> 3.1 å®šä¹‰å›é¡¾</h3><p>Eigenvectors &amp; Eigenvaluesï¼šç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡</p><p>æ±‚è§£<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>A</mi></msub><mo>(</mo><mi>Î»</mi><mo>)</mo><mo>=</mo><mi>d</mi><mi>e</mi><mi>t</mi><mo>(</mo><mi>Î»</mi><mi>I</mi><mo>âˆ’</mo><mi>A</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p_A(\lambda)=det(\lambda I-A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">A</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">Î»</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mopen">(</span><span class="mord mathit">Î»</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mbin">âˆ’</span><span class="mord mathit">A</span><span class="mclose">)</span></span></span></span>æˆ–è€…<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>x</mi><mo>=</mo><mi>Î»</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">Ax=\lambda x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mord mathit">x</span><span class="mrel">=</span><span class="mord mathit">Î»</span><span class="mord mathit">x</span></span></span></span>ä¹‹é—´çš„å…³ç³»</p><p>Diagonal matrixï¼šå¯¹è§’çŸ©é˜µï¼Œå¯ä»¥ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>e</mi><mi>t</mi><mo>(</mo><mi>d</mi><mn>1</mn><mo separator="true">,</mo><mi>d</mi><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">det(d1,d2,...)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit">d</span><span class="mord mathrm">2</span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mclose">)</span></span></span></span>è¡¨ç¤º</p><p>Orthogonalï¼šæ­£äº¤çŸ©é˜µ</p><p><a href="https://zh.m.wikipedia.org/zh-hans/%E8%B0%B1%E5%AE%9A%E7%90%86">Spectral theoremï¼šè°±å®šç†</a></p><h3 id="32-é—®é¢˜"><a class="markdownIt-Anchor" href="#32-é—®é¢˜"></a> 3.2 é—®é¢˜</h3><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301091102746.png" alt="image-20230109110250716" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202301091102792.png" alt="image-20230109110258767" /></p><h3 id="33-è§£è¯»"><a class="markdownIt-Anchor" href="#33-è§£è¯»"></a> 3.3 è§£è¯»</h3><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span></span></p><p>ä¸¤è¾¹åŒä¹˜é€†</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>T</mi><mo>=</mo><mi>T</mi><mi mathvariant="normal">Î›</mi></mrow><annotation encoding="application/x-tex">AT=T\Lambda</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">A</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathrm">Î›</span></span></span></span></span></p><p>åˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Î›</mi><mo>=</mo><mi>d</mi><mi>i</mi><mi>a</mi><mi>g</mi><mo>(</mo><msub><mi>Î»</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>Î»</mi><mi>n</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\Lambda=diag(\lambda_1,...,\lambda_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">Î›</span><span class="mrel">=</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">Î»</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">Î»</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><msup><mi>t</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>=</mo><msub><mi>Î»</mi><mi>i</mi></msub><msup><mi>t</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">At^{(i)}=\lambda_it^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.938em;"></span><span class="strut bottom" style="height:1.0879999999999999em;vertical-align:-0.15em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">A</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">Î»</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>æ‰€ä»¥ç‰¹å¾å€¼å¯¹åº”çš„å‘é‡ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><msub><mi>Î»</mi><mi>i</mi></msub><mo separator="true">,</mo><msup><mi>t</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">(\lambda_i,t^{(i)})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">Î»</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>b</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span></span></p><p>å› ä¸ºAæ˜¯å¯¹ç§°çŸ©é˜µï¼ŒUä¸ºæ­£äº¤çŸ©é˜µï¼ŒåŒæ—¶</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>U</mi><mo>=</mo><mi mathvariant="normal">Î›</mi><mi>U</mi></mrow><annotation encoding="application/x-tex">AU=\Lambda U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">A</span><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mrel">=</span><span class="mord mathrm">Î›</span><span class="mord mathit" style="margin-right:0.10903em;">U</span></span></span></span></span></p><p>æ‰€ä»¥åŒä¸Š $$Au<sup>{(i)}=\lambda_iu</sup>{(i)}$$</p>(c)$$ æ ¹æ®è°±å®šç†å¯ä»¥å¾—åˆ°$$\Lambda=U^TAU \geq 0<p>å› æ­¤å¤§äºç­‰äº0</p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS229</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Paper04_Combining_Reinforcement_Learning_and Constraint_Programming_for_Combinatorial Optimization</title>
    <link href="/posts/bbefc8de.html"/>
    <url>/posts/bbefc8de.html</url>
    
    <content type="html"><![CDATA[<p>æ‘˜è¦</p><span id="more"></span><h1 id="httpsarxivorgabs200601610"><a class="markdownIt-Anchor" href="#httpsarxivorgabs200601610"></a> <a href="https://arxiv.org/abs/2006.01610">https://arxiv.org/abs/2006.01610</a></h1><h1 id="abstract"><a class="markdownIt-Anchor" href="#abstract"></a> Abstract</h1><p><a href="https://www.notion.so/Combinatorial-Optimization-0f8d8ad2698643b1abf8e955f2a4e869">Combinatorial Optimization</a> åº”ç”¨å¹¿æ³›ï¼šä»èˆªç©ºé¢†åŸŸã€äº¤é€šè§„åˆ’ç”šè‡³åˆ°ç»æµå­¦ä¸­ï¼Œå®ƒçš„ç›®æ ‡æ˜¯åœ¨æœ‰é™çš„è§£ç©ºé—´ä¸­æ‰¾åˆ°æœ€ä¼˜è§£ï¼ˆfind an optimal solution among a finite set of possibilitiesï¼‰ï¼Œå…¶é¢ä¸´çš„æœ€ä¸¥é‡çš„æŒ‘æˆ˜ä¸º<a href="https://www.notion.so/Q-state-action-d9e8f9603c0a47f895d30615644c41d9">Q-state-actionæ–¹æ³•</a> ä¸­æåˆ°çš„ çŠ¶æ€ç©ºé—´çˆ†ç‚¸ï¼ˆState- space explosion problemï¼‰ï¼šé—®é¢˜çš„è§£ç©ºé—´å²é—®é¢˜è§„æ¨¡å¢å¤§æˆæŒ‡æ•°å‹çš„å¢å¤§ï¼Œå¯¼è‡´å¯¹äºä¸€äº›å¤§å‹çš„é—®é¢˜éš¾ä»¥æ±‚è§£ï¼›å¦ä¸€æ–¹é¢DRLï¼ˆdeep reinforcement learningï¼‰åœ¨æ±‚è§£NP-hard ç»„åˆä¼˜åŒ–é—®é¢˜è¿‡ç¨‹å¯¹è®¾è®¡å¥½çš„å¯å‘å¼æ±‚è§£ç®—æ³•å…·æœ‰æ¯”è¾ƒå¥½çš„è´¡çŒ®ï¼Œä½†æ˜¯ç°æœ‰çš„æ–¹æ³•å…·æœ‰ä¸¤ä¸ªç¼ºç‚¹</p><ol><li>ä»–ä»¬ä»…ä»…ä¸“æ³¨äºæ ‡å‡†çš„TSPé—®é¢˜ï¼Œä¸å®¹æ˜“æ‹“å±•åˆ°å…¶ä»–é—®é¢˜</li><li>é€šå¸¸åªç»™å‡ºä¸€ç§è¿‘ä¼¼è§£ï¼ˆapproximate solutionï¼‰ï¼Œè€Œæ²¡æœ‰ç»™å‡ºä¸€ç§ç³»ç»Ÿçš„æ–¹æ³•æ¥æé«˜æˆ–è€…è¯æ˜å®ƒçš„æœ€ä¼˜æ€§ï¼ˆOptimalityï¼‰</li></ol><p>åœ¨å¦å¤–ä¸€ç§æƒ…å†µä¸‹ï¼Œ<a href="https://www.notion.so/Constraint-programming-05ee88110f8b4c18ac9f9cffe6f65976">Constraint programming</a> æ˜¯è§£å†³ç»„åˆä¼˜åŒ–é—®é¢˜çš„é€šç”¨å·¥å…·ï¼ŒåŸºäºä¸€ä¸ªå®Œæ•´çš„æœç´¢è¿‡ç¨‹ï¼Œé€šå¸¸å¯ä»¥åœ¨æ¯”è¾ƒå¤§çš„è¿è¡Œæ—¶é—´ä¸­æ‰¾åˆ°æœ€ä¼˜è§£ã€‚å…¶ä¸­å†³å®šæ€§çš„ç¡®å®šæœç´¢çš„æ–¹å‘ï¼Œæˆ–è€…è¯´åˆ†æç­–ç•¥ï¼Œæˆ–è€…è¯´æ˜¯æ¢ç´¢ç­–ç•¥ã€‚</p><p>åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬æå‡ºä¸€ç§é€šç”¨å’Œæ··åˆçš„æ–¹æ³•ï¼ˆlï¼‰çš„æ–¹æ³•ï¼Œç»“åˆCPå’ŒDRLæ¥æ±‚è§£COPï¼Œä¸»è¦æ˜¯åŸºäº<a href="https://www.notion.so/Part01-dynamic-programming-8f83f0126c2447e8984b0904e305a33a">è¿ç­¹å­¦Part01â€“dynamic programming</a> ä½œä¸ºä¸¤è€…ä¹‹é—´çš„æ¡¥æ¢ï¼Œå¹¶é€šè¿‡å®éªŒæ¥è¯æ˜æ±‚è§£å™¨åœ¨ä¸¤ä¸ªæœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ä¸Šè¿›è¡Œæ±‚è§£ï¼š<a href="https://www.notion.so/TSPTW-the-traveling-salesman-problem-with-time-windows-e46e9c09083041af998fa7a2ffe2ee1e">TSPTW the traveling salesman problem with time windows</a> å’Œ <a href="https://www.notion.so/4POP-4-moments-portfolio-optimization-problem-b67f257853f348c29fd54edd42d79092">4POP 4-moments portfolio optimization problem</a>,å®æ—¶è¯æ˜æ¯”ä¸€äº›å•ç‹¬çš„RLæˆ–è€…åˆ©ç”¨é€šç”¨æ±‚è§£å™¨æ•ˆæœæ›´å¥½</p><blockquote><p>Brief Conclusion Pï¼šå…·æœ‰å¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼Œç®—å¾—å¾ˆå¿«çš„é—®é¢˜ NPï¼šä¸ç¡®å®šéœ€è¦å¤šé•¿æ—¶é—´ï¼Œä½†æ˜¯æˆ‘ä»¬éªŒè¯å®ƒåªéœ€è¦å¤šé¡¹å¼æ—¶é—´ NP- completeï¼šå±äºNPé—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå±äºNP-hardé—®é¢˜ NP-hardï¼šæ¯”NPé—®é¢˜éƒ½è¦éš¾çš„é—®é¢˜</p></blockquote><p>NPé—®é¢˜ æŒ‡çš„æ˜¯éç¡®å®šæ€§å¤šé¡¹å¼é—®é¢˜ï¼ˆnon- deterministic polynomial NPï¼‰ï¼Œéç¡®å®šæ€§æŒ‡çš„æ˜¯å¯ç”¨ä¸€å®šæ•°é‡çš„è¿ç®—å»è§£å†³å¤šé¡¹å¼æ—¶é—´å†…å¯è§£å†³çš„é—®é¢˜ï¼Œé€šå¸¸è§£å†³é—®é¢˜åŒ…æ‹¬ï¼šTSPã€Hamiltonå›è·¯é—®é¢˜ã€æœ€å¤§å›¢é—®é¢˜ï¼›ä½†æ˜¯å…¶å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…å¯ä»¥è¢«éªŒè¯å…¶æ­£ç¡®å®šçš„é—®é¢˜</p><p>NP-hardé—®é¢˜ æŒ‡çš„æ˜¯non- deterministic polynomial time hardnessï¼Œå¦‚æœæ‰€æœ‰çš„NPé—®é¢˜éƒ½å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´è§„çº¦åˆ°æŸä¸ªé—®é¢˜ï¼Œåˆ™ç§°è¿™ä¸ªé—®é¢˜ä¸ºNPå›°éš¾</p><h1 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> Introduction</h1><p>åœ¨ç»„åˆä¼˜åŒ–ä¸­å¤§å¤šæ•°é—®é¢˜ä¸ºNP-hardé—®é¢˜ï¼Œå¯¹å…¶é«˜æ•ˆçš„ä¼˜åŒ–ç®—æ³•çš„æ¢ç´¢ç”±æ¥å·²ä¹…ã€‚å¹¿æ³›çš„å¯ä»¥å°†å…¶åˆ†ä¸ºä¸¤ç§æ–¹æ³•</p><p><a href="https://www.notion.so/exact-algorithm-6f0de3f67ad942299d12b6e6962f9e10">ç²¾ç¡®ç®—æ³• exact algorithm</a> æ˜¯åŸºäºå¯¹æ±‚è§£ç©ºé—´çš„å®Œæ•´å¹¶ä¸”å·§å¦™çš„æšä¸¾ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯å¯ä»¥é€‰æ‹›åˆ°æœ€ä¼˜è§£ï¼Œä½†æ˜¯åœ¨å¯¹äºä¸€äº›å¤§å‹çš„æ¡ˆä¾‹ä¸­å¾€å¾€ä¼šå‡ºç°æ±‚è§£æ—¶é—´æ‰©å¤§ã€‚ä½†ä¹Ÿæœ‰å¦å¤–çš„è¯´æ³•å¯ä»¥è®©ç²¾ç¡®ç®—æ³•åœ¨æ‰¾åˆ°æœ€ä¼˜è§£ä¹‹å‰å°±ç»ˆæ­¢çš„æ–¹å¼æ¥æ¢ç´¢å¾—åˆ°æ¬¡ä¼˜è§£ã€‚è¿™ç§çµæ´»æ€§è®©ç²¾ç¡®æ±‚è§£ç®—æ³•æ›´åŠ appealingå¹¶ä¸”practicalï¼Œä¹Ÿæ­£æ˜¯å¦‚æ­¤æ„æˆäº†ç°ä»£æ±‚è§£å™¨çš„æ ¸å¿ƒ CPLEXã€Gurobiã€Gecodeç­‰ç­‰ã€‚è¿™æ˜¯ä¸€ä¸ªCPçš„ä»‹ç»ï¼Œé€šè¿‡additional asset ç”¨æ¥æ±‚è§£éå¸¸å¤§çš„å¤æ‚æ€§çš„COPé—®é¢˜ï¼Œé€šå¸¸<a href="https://www.notion.so/mixed-integer-programming-MIP-fc936c07376b4ef098d1307191c9019e">æ··åˆæ•´æ•°è§„åˆ’mixed integer programming MIP</a> æ±‚è§£å™¨å¾€å¾€åªèƒ½æ±‚è§£çº¿æ€§é—®é¢˜æˆ–è€…æœ‰é™çš„éçº¿å½¢é—®é¢˜ã€‚</p><p><a href="https://www.elsevier.com/books/handbook-of-constraint-programming/rossi/978-0-444-52726-4">Handbook of Constraint Programming</a></p><p>è€Œåœ¨åˆ©ç”¨CPè¿›è¡Œæ±‚è§£çš„è¿‡ç¨‹ä¸­é‡è¦çš„æ˜¯branching strategyï¼Œéå¸¸è‡ªç„¶çš„ï¼Œå¥½çš„è®¾è®¡çš„å¯å‘å¼çš„æ¢ç´¢æ–¹æ³•å¯ä»¥å¾ˆå¥½çš„å‘ç°æ±‚è§£ï¼Œä½†æ˜¯å·®çš„å¯å‘å¼åˆ†æç­–ç•¥å¾€å¾€ä¼šå¯¼è‡´è¿›å…¥æ²¡æœ‰è§£çš„å­ç©ºé—´ã€‚æ‰€ä»¥åœ¨CPæ±‚è§£é—®é¢˜ä¸­bråˆ†æç­–ç•¥çš„ç ”ç©¶æ˜¯éå¸¸çƒ­é—¨çš„è¯é¢˜</p><p><a href="https://www.notion.so/heuristic-algorithm-5887d2ccbbc34a0db4eb5136ab9645ca">å¯å‘å¼ç®—æ³• heuristic algorithm</a> æ˜¯ä¸€ç§éå®Œå…¨çš„æ‰‹æ®µæ¥æ±‚è§£å¾—åˆ°æœ€ç»ˆè§£ï¼Œä½†æ˜¯ä¸èƒ½è¯æ˜è§£çš„æœ€ä¼˜æ€§ã€‚ä»–ä»¬é€šå¸¸éœ€è¦ç‰¹å®šå­é—®é¢˜çš„çŸ¥è¯†æ‰èƒ½æ„å»ºä»–ä»¬ã€‚åœ¨è¿‘å‡ å¹´ï¼Œ<a href="https://www.notion.so/Lecture01-Deep-Reinforcement-Learning-Decision-Making-and-Control-38667912b7734364a527d8ae71ff2a40">Lecture01 Deep Reinforcement Learning, Decision Making,and Control</a> åœ¨å¯¹ä¸€äº›NP-hardçš„COPé—®é¢˜çš„è¿‘ä¼¼æ±‚è§£ä¸­å–å¾—äº†éå¸¸å¥½çš„æˆæœã€‚åªè¦ä¸€ä¸ªæ¨¡å‹è®­ç»ƒå¥½ï¼Œåœ¨å®è·µä¸­çš„è¿è¡Œæ—¶é—´æ˜¯å¯ä»¥å¿½ç•¥ä¸è®¡çš„ï¼Œåˆ©ç”¨DRLæ±‚è§£é—®é¢˜çš„å‰ææ˜¯</p><ol><li>æˆ‘ä»¬çŸ¥é“å®é™…é—®é¢˜çš„ä¾‹å­åˆ†å¸ƒ</li><li>æˆ‘ä»¬æœ‰è¶³å¤Ÿå¤šçš„æ ·æœ¬ï¼Œå¹¶å¯ä»¥ä»ä¸­é‡‡æ ·æ¥è®­ç»ƒæ¨¡å‹</li></ol><p>ä½†æ˜¯ç°æœ‰çš„DRLåœ¨COPåº”ç”¨ä¸­å­˜åœ¨çš„ä¸€äº›é—®é¢˜è¡¨é˜”</p><ol><li>ä»…é™äºæ±‚è§£ç‰¹å®šçš„é—®é¢˜ï¼Œæ¯”å¦‚TSP</li><li>å…¶æ¬¡ï¼Œå®ƒä»¬ä»…æ—¨åœ¨å……å½“å»ºè®¾æ€§çš„å¯å‘å¼æ–¹æ³•ï¼Œå¹¶ä¸”ä¸å®Œæ•´çš„æ–¹æ³•ï¼ˆä¾‹å¦‚CPï¼‰ä¸åŒï¼Œæ²¡æœ‰ç³»ç»Ÿçš„æ–¹æ³•æ¥æ”¹è¿›æ‰€è·å¾—çš„è§£å†³æ–¹æ¡ˆã€‚</li></ol><p>ä¸Šè¿°çš„<a href="https://www.notion.so/exact-algorithm-6f0de3f67ad942299d12b6e6962f9e10">ç²¾ç¡®ç®—æ³• exact algorithm</a> å’ŒåŸºäºå­¦ä¹ çš„<a href="https://www.notion.so/heuristic-algorithm-5887d2ccbbc34a0db4eb5136ab9645ca">å¯å‘å¼ç®—æ³• heuristic algorithm</a> éƒ½å…·æœ‰å¥½å¤„å’Œåå¤„ï¼Œå¾ˆè‡ªç„¶çš„å°±æœ‰ä¸€ä¸ªé—®é¢˜</p><blockquote><p>æˆ‘ä»¬æ˜¯å¦å¯ä»¥å°†ä»–ä»¬çš„ä¼˜ç‚¹è”åˆèµ·æ¥æ¥æ±‚è§£COP</p></blockquote><p>åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬æˆæœå°†RLä¸CPåˆ©ç”¨<a href="https://www.notion.so/Part01-dynamic-programming-8f83f0126c2447e8984b0904e305a33a">è¿ç­¹å­¦Part01â€“dynamic programming</a> ç»“åˆèµ·æ¥ï¼ŒåŠ¨æ€è§„åˆ’åœ¨å¾ˆå¤šåœºåˆä¸­éƒ½å…·æœ‰å¾ˆæˆæœçš„ä½œç”¨ï¼Œæ˜¯ä¸€ç§éå¸¸å…³é”®çš„å»ºæ¨¡COPé—®é¢˜çš„æ–¹æ³•ï¼Œç®€å•æ¥è¯´DPé—®é¢˜å°†ä¸€ä¸ªé—®é¢˜åˆ†è§£æˆä¸ºå­é—®é¢˜å¹¶é€šè¿‡é€’å½’å…¬å¼ï¼ˆrecursive formulationï¼Œæ¯”å¦‚å¸¸è§çš„bellman equationç»“åˆèµ·æ¥ï¼‰ï¼Œå…¶ä¸­DPé¢ä¸´çš„è‹¦éš¾å¸¸å¸¸æ˜¯ ç»´åº¦ç¾éš¾é—®é¢˜ï¼šç”Ÿæˆçš„å­é—®é¢˜çš„æ•°é‡å‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œä»¥è‡³äºå°†å®ƒä»¬å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­å˜å¾—ä¸å¯è¡Œã€‚</p><p>æ®æˆ‘ä»¬æ‰€çŸ¥æ˜¯ç¬¬ä¸€æ¬¡åœ¨CPæ±‚è§£å™¨ä¸­å†…ç½®å¯å­¦ä¹ çš„å¯å‘å¼æ¢ç´¢ï¼Œè¯¦ç»†çš„è´¡çŒ®å¦‚ä¸‹ï¼š</p><ol><li>å¯¹äºCOPé—®é¢˜æ–°çš„DPç¼–ç æ–¹å¼æ¥åˆ©ç”¨RLæ±‚è§£å’ŒCPæ¨¡å‹</li><li>åˆ©ç”¨ä¸¤ç§å¸¸è§çš„RLæ¨¡å‹ï¼ŒDQLã€PPOï¼Œè®­ç»ƒæ•°æ®é›†æ˜¯ä»é—®é¢˜ä¸­éšæœºæŠ½æ ·å¾—åˆ°çš„</li><li>ä¸ç°æœ‰çš„CPæ±‚è§£è¿‡ç¨‹ä¸­åˆ†æç­–ç»“åˆï¼Œå½¢æˆä¸‰ç§ brand and bound \ iterative limited discrpancy search and restart based searchä¸‰ç§</li><li>ç»™å‡ºæœ‰æ„ä¹‰çš„ç»“æœ</li><li>ä»£ç å¼€æºï¼Œä¸ºäº†ç®€åŒ–åç»­ç ”ç©¶çš„è¿›ç¨‹</li></ol><p>é€šå¸¸å¦‚æœæ²¡æœ‰å†…åœ¨çš„å‡è®¾ï¼Œæ¯”å¦‚çº¿å½¢å’Œå‡¸æ€§ï¼ŒDPä¸èƒ½ç®€å•çš„ç¼–ç ç„¶ååˆ©ç”¨æ ‡å‡†çš„MIPæ–¹æ³•æ±‚è§£ï¼Œè¿™ä¹Ÿæ˜¯é©±åŠ¨æˆ‘ä»¬æ€è€ƒå°è¯•ä½¿ç”¨CPè¿›è¡Œç¼–ç çš„åŸå› ä¹‹ä¸€</p><p>ä¸‹ä¸€ç« ç»™å‡ºæ··åˆæ•´æ•°æ±‚è§£å™¨æ±‚è§£çš„è¿‡ç¨‹</p><p>å¯¹ä¸¤ä¸ªæ¡ˆä¾‹è¿›è¡Œå®éªŒåˆ†æ</p><p>æœ€åç»™å‡ºæ€»ç»“</p><h1 id="2-æ•°æ®è¡¨å¾"><a class="markdownIt-Anchor" href="#2-æ•°æ®è¡¨å¾"></a> 2  æ•°æ®è¡¨å¾</h1><p>è¿™ä¸€éƒ¨åˆ†æ€»ç»“æˆ‘ä»¬æå‡ºçš„å®Œæ•´çš„æ¡†æ¶ï¼Œä¸€ä¸ªæ¦‚æ‹¬æ€§çš„æ¡†æ¶å›¾åœ¨å›¾ä¸€ä¸­å±•ç¤ºï¼Œåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>å­¦ä¹ éƒ¨åˆ†ï¼Œåˆ©ç”¨éšæœºç”Ÿæˆçš„ä¾‹å­é€šè¿‡unifying representationä½œä¸ºRLçš„ç¯å¢ƒè¿›è¡Œè®­ç»ƒï¼Œæœ€ç»ˆè®­ç»ƒçš„æ™ºèƒ½ä½“æ˜¯å¯¹æ±‚è§£è¿‡ç¨‹ä¸­searchçš„å¯å‘å¼åˆ†æç­–ç•¥è¿›è¡ŒåŸºäºä»·å€¼çš„é€‰æ‹©ï¼ˆæˆ–è€…è¯´æ˜¯å¼ºåŒ–å­¦ä¹ çš„æ¢ç´¢ï¼‰</li><li>æ±‚è§£éƒ¨åˆ†ï¼Œåˆ©ç”¨CPå¯¹æ¨¡å‹è¿›è¡Œæ±‚è§£ï¼ŒåŒæ—¶å¯¹æ±‚è§£çš„æ¡ˆä¾‹è¿›è¡Œè¯„ä¼°</li><li>è”åˆè¡¨ç¤ºé˜¶æ®µï¼Œè®²è¾“å…¥çš„COPé—®é¢˜ï¼Œç»“åˆDominance pruning ruleså‰ªæç­–ç•¥å¾—åˆ°åŠ¨æ€è§„åˆ’æ¨¡å‹çš„å»ºæ¨¡ï¼Œè¿™æ ·å¯ä»¥ä½œä¸ºå­¦ä¹ é˜¶æ®µçš„ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ±‚è§£èŠ‚ç‚¹çš„è¾“å…¥æ¨¡å‹</li></ol><p>ç»¿è‰²è¡¨ç¤ºæˆ‘ä»¬çš„åŸåˆ›å…±äº«ï¼Œè“è‰²è¡¨ç¤ºå·²ç»æœ‰çš„æ¡†æ¶</p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202212181549805.png" alt="image-20221218154958762" /></p><h2 id="21-åŠ¨æ€è§„åˆ’æ¨¡å‹"><a class="markdownIt-Anchor" href="#21-åŠ¨æ€è§„åˆ’æ¨¡å‹"></a> 2.1 åŠ¨æ€è§„åˆ’æ¨¡å‹</h2><p>åŠ¨æ€è§„åˆ’æ¨¡å‹æ˜¯ä¸€ç§å°†æ•°å­¦å»ºæ¨¡ä¸è®¡ç®—æœºç¼–ç¨‹è”ç³»èµ·æ¥æ±‚è§£å¤æ‚ä¼˜åŒ–é—®é¢˜çš„æ‰‹æ®µï¼Œç®€å•æ¥è¯´æ˜¯å°†ä¸€ä¸ªå¤§çš„é—®é¢˜è½¬æ¢æˆå¾ˆå¤šå°çš„å­é—®é¢˜ç„¶åå°†ä»–ä»¬åˆ©ç”¨recursive formulationçš„æ–¹å¼è”ç³»èµ·æ¥æœ€ç»ˆæ±‚è§£ï¼Œå…¶ä¸­åŒ…æ‹¬çš„ä¸€äº›å…³é”®çš„å½±å“å› ç´ </p><table><thead><tr><th>Q</th><th>COPé—®é¢˜</th></tr></thead><tbody><tr><td>controls</td><td>C</td></tr><tr><td>domain</td><td>D</td></tr><tr><td>transition</td><td>T</td></tr><tr><td>states</td><td>S</td></tr><tr><td>stage</td><td></td></tr><tr><td>reward</td><td>R</td></tr><tr><td>validity conditions</td><td>V</td></tr><tr><td>dominance rules</td><td>P</td></tr></tbody></table><p>å…¶ä¸­validity conditions å’Œdominance rulesä¹‹é—´çš„åŒºåˆ«åœ¨äºä¸¤è€…ä¹‹é—´çš„åŒºåˆ«åœ¨äºï¼Œæœ‰æ•ˆæ€§æ¡ä»¶æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä»¥ç¡®ä¿DPæ¨¡å‹çš„æ­£ç¡®æ€§ï¼ˆV ï¼ˆsï¼Œ xï¼‰ = 0 â‡” Tï¼ˆsï¼Œ xï¼‰ = âŠ¥ï¼‰ï¼Œè€Œä¼˜åŠ¿è§„åˆ™ä»…ç”¨äºæ•ˆç‡ç›®çš„ï¼ˆPï¼ˆsï¼Œ xï¼‰ = 0 â‡’ Tï¼ˆsï¼Œ xï¼‰ = âŠ¥ï¼‰ï¼Œå…¶ä¸­â‡”ã€â‡’å’ŒâŠ¥è¡¨ç¤ºç­‰ä»·æ€§ã€å«ä¹‰ã€ å’Œä¸å¯è¡Œçš„çŠ¶æ€ï¼Œåˆ†åˆ«ã€‚å…¶ä¸­DPå»ºæ¨¡å¯ä»¥åŒ…æ‹¬ Sï¼ŒXï¼ŒTï¼ŒRï¼ŒVï¼ŒPï¼›æ ¹æ®è´å°”æ›¼æ–¹ç¨‹æˆ‘ä»¬å¯ä»¥ä¸€ç›´è®¡ç®—åˆ°å¼€å¤´çš„çŠ¶æ€çš„ä»·å€¼ã€‚</p><p>ä½†æ˜¯DPæ”¶åˆ°curse of dimensionalityçš„å½±å“ï¼Œåœ¨è§£å†³å¤§çš„çŠ¶æ€æˆ–è€…åŠ¨ä½œç©ºé—´ä¸‹éœ€è¦çš„å†…å­˜å¾ˆå¤šï¼Œä¸€ç§æ–¹æ³•æ˜¯å¯¹å…¶è¿›è¡Œå‰ªæå¤„ç†ï¼Œå…¶ä¸­éœ€è¦è¯„ä¼°</p><p>æ­¤é—®é¢˜çš„éƒ¨åˆ†è§£å†³æ–¹æ¡ˆæ˜¯ä¿®å‰ªä¸»å¯¼æ“ä½œ ï¼ˆPï¼ˆsï¼Œ xï¼‰ = 0ï¼‰ã€‚å¦‚æœä¸€ä¸ªåŠ¨ä½œæ ¹æ®é€’å½’å…¬å¼æ˜¯æœ‰æ•ˆçš„ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸»å¯¼çš„ï¼Œä½†ï¼ˆ1ï¼‰è¦ä¹ˆä¸¥æ ¼åœ°æ¯”å¦ä¸€ä¸ªåŠ¨ä½œå·®ï¼Œè¦ä¹ˆï¼ˆ2ï¼‰å®ƒä¸èƒ½å¯¼è‡´å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚åœ¨å®è·µä¸­ï¼Œä¿®å‰ªè¿™äº›ä¸»å¯¼æ“ä½œä¼šå¯¹æœç´¢ç©ºé—´çš„å¤§å°äº§ç”Ÿå·¨å¤§å½±å“ï¼Œä½†æ˜¯åœ¨å®è·µè¿‡ç¨‹ä¸­æ‰¾åˆ°è¿™æ ·çš„æ±‚è§£æ–¹æ¡ˆå¹¶ä¸æ˜¯å®¹æ˜“çš„</p><p>è€Œä¸”å°±ç®—åœ¨DPè¿‡ç¨‹ä¸­å¯¹ä¸Šè¿°çš„å­é—®é¢˜è¿›è¡Œä¿®å»ºä¹‹åä»ä¸èƒ½ç¡®ä¿è§£ç©ºé—´è¶³å¤Ÿå°</p><h2 id="22-å¼ºåŒ–å­¦ä¹ ç¼–ç "><a class="markdownIt-Anchor" href="#22-å¼ºåŒ–å­¦ä¹ ç¼–ç "></a> 2.2 å¼ºåŒ–å­¦ä¹ ç¼–ç </h2><p>ä»DPé—®é¢˜ä¸­ï¼Œç»“åˆä¸€ä¸ªå®é™…COPé—®é¢˜å¯ä»¥å®šä¹‰ä¸€ä¸ªå¼ºåŒ–å­¦ä¹ è¿‡ç¨‹ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå…³äºå¼ºåŒ–å­¦ä¹ çš„æ¦‚è¿°</p><p>ä»‹ç»å¼ºåŒ–å­¦ä¹ çš„ä½œç”¨ï¼š</p><p>ä»‹ç»ä¸€ä¸ªåŸºæœ¬çš„è¿‡ç¨‹</p><h3 id="221-state"><a class="markdownIt-Anchor" href="#221-state"></a> 2.2.1 State</h3><p>å¯¹äºDPé—®é¢˜ä¸­ä¸åŒçš„é˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼ˆQï¼Œs_iï¼‰ä½œä¸ºå½“å‰çŠ¶æ€çš„å®šä¹‰ï¼Œé€šå¸¸çŠ¶æ€è¢«embedä¸€ç§å¼ é‡ä½œä¸ºç¥ç»ç½‘ç»œçš„è¾“å…¥ï¼Œä¹ŸåŒ…æ‹¬actionï¼Œæœ€ç»ˆè¾“å‡ºæ˜¯æœ€ä¼˜çš„åŠ¨ä½œ</p><h3 id="222-action"><a class="markdownIt-Anchor" href="#222-action"></a> 2.2.2 Action</h3><p>ç»™å®šä¸€ä¸ªDPé—®é¢˜ä¸­çš„stateï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ç§ä¸€å¯¹ä¸€å…³ç³»çš„ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>å¯ä»¥è¢«é‡‡ç”¨é™¤é<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æ˜¯æœ‰æ•ˆçš„ï¼Œé€šå¸¸å¯è¡Œçš„åŠ¨ä½œå¯ä»¥ç”±domainå’Œvalidè¿›è¡Œåˆ¤æ–­</p><h3 id="223-transition"><a class="markdownIt-Anchor" href="#223-transition"></a> 2.2.3 Transition</h3><p>è¾“å…¥å½“å‰çŠ¶æ€å’Œä¾—æ—å“¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨DPé—®é¢˜æ¥è¿›è¡Œè½¬æ¢å°±è¡Œ</p><h3 id="224-reward"><a class="markdownIt-Anchor" href="#224-reward"></a> 2.2.4 Reward</h3><p>æœ€åˆçš„æƒ³æ³•æ˜¯ä½¿ç”¨DPé—®é¢˜ä¸­å­˜åœ¨çš„å¥–åŠ±ï¼Œä½†æ˜¯è¿™æ ·å¯èƒ½ä¼šå­˜åœ¨æ²¡æœ‰è§£çš„è½¨è¿¹å¥–åŠ±è¦é«˜äºæœ‰è§£æ–¹æ¡ˆçš„å¥–åŠ±ï¼Œå› æ­¤åœ¨è®¾è®¡å¥–åŠ±çš„éœ€è¦è€ƒè™‘COPé—®é¢˜ä¸­å­˜åœ¨çš„ä¸¤ä¸ªåŸåˆ™</p><p>1ï¼Œ å¦‚æœe1æ¯”e2æ›´åï¼Œæˆ‘ä»¬éœ€è¦e1çš„å¥–åŠ±å°äºe2çš„å¥–åŠ±</p><ol><li>æ‰€æœ‰æ‰¾åˆ°å¯è¡Œè§£çš„è½¨è¿¹éœ€è¦æ¯”æ²¡æœ‰æ‰¾åˆ°å¯è¡Œè§£çš„è½¨è¿¹é«˜</li></ol><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>Ï•</mi><mo>(</mo><mn>1</mn><mo>+</mo><mi mathvariant="normal">âˆ£</mi><mi>U</mi><mi>B</mi><mo>(</mo><msub><mi>Q</mi><mi>p</mi></msub><mo>)</mo><mi mathvariant="normal">âˆ£</mi><mo>+</mo><mi>r</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">R(s,a)=\phi(1+|UB(Q_p)|+r(s,a) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">Ï•</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathrm">âˆ£</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span></span></p><p>UBå¯¹åº”è§„åˆ’é—®é¢˜å¯èƒ½åˆ°è¾¾çš„ä¸Šé™ï¼Œç¬¬äºŒä¸ªé—®é¢˜å¼ºè¿«æ™ºèƒ½ä½“å»å¯»æ‰¾åˆ°æœ€ä½³çš„å¯è¡Œè§£ï¼Œæœ€ç»ˆçš„scaling factor é˜²æ­¢æœ€ç»ˆå¥–åŠ±è½å…¥é›¶å€¼å‘¨è¾¹</p><h2 id="23-å­¦ä¹ æ–¹æ³•"><a class="markdownIt-Anchor" href="#23-å­¦ä¹ æ–¹æ³•"></a> 2.3 å­¦ä¹ æ–¹æ³•</h2><p>DQN</p><p>PPO</p><p>æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„å‡è®¾ï¼Œåˆ©ç”¨ç”Ÿæˆå™¨å¾—åˆ°instanceçš„æ—¶å€™ï¼Œå¾—åˆ°çš„åˆ†å¸ƒä¸å®é™…é—®é¢˜ä¸­çš„é—®é¢˜æƒ³ç­‰ï¼Œè¿™ä¹Ÿæ˜¯åœ¨RLè§£å†³å…¶ä»–é—®é¢˜ä¸­å¸¸è§çš„å‡è®¾ï¼Œå¼ºåŒ–å­¦ä¹ çš„è¿‡ç¨‹æ˜¯å¸Œæœ›å­¦ä¹ å‡ºä¸åŒçŠ¶æ€å’ŒåŠ¨ä½œä¸‹å¾—åˆ°ä¸åŒçš„Qï¼Œæˆ‘ä»¬çš„ç­–ç•¥å¾€å¾€æ˜¯é‡‡ç”¨æœ€å¤§Qå€¼çš„ä¸œè¥¿ï¼Œåˆ©ç”¨DQNå¾—åˆ°Qå€¼çš„è®­ç»ƒè¿‡ç¨‹æœ‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Trainerâ€”â€”DQNï¼ˆï¼‰</span><br><span class="hljs-comment"># class Envï¼Œ</span><br><span class="hljs-comment"># class BrainDQN</span><br><span class="hljs-comment"># class TSPTW</span><br><span class="hljs-comment"># class state</span><br></code></pre></td></tr></table></figure><p>å±•ç°ä»£ç çš„è°ƒç”¨è¿‡ç¨‹</p><ol><li>è¿™ä¸€æ­¥ä»…ä»…æ˜¯å¸Œæœ›è®­ç»ƒå‡ºDQNçš„brainï¼Œè€Œæ²¡æœ‰å…¶ä»–çš„ä¸œè¥¿</li><li>é‡ç‚¹åœ¨ç¯å¢ƒç”Ÿæˆï¼Œä»¥åŠè®­ç»ƒçš„æ•´ä¸ªè¿‡ç¨‹</li></ol><p>é¦–å…ˆç¡®ä¿å¦‚ä½•ç”Ÿæˆä¸€ä¸ªTSPTWé—®é¢˜</p><p>ä¹‹åç”Ÿæˆå¤šä¸ªä½œä¸ºè®­ç»ƒçš„é›†åˆ</p><p>åŒæ—¶åœ¨æ¯æ¬¡è®­ç»ƒä¸­æé«˜</p><h2 id="24-ç½‘ç»œæ¡†æ¶"><a class="markdownIt-Anchor" href="#24-ç½‘ç»œæ¡†æ¶"></a> 2.4 ç½‘ç»œæ¡†æ¶</h2><p>ä¸ºäº†ç¡®ä¿æ¡†æ¶çš„é€šç”¨å‹å’Œæœ‰æ•ˆæ€§ï¼Œå¯¹äºç½‘ç»œæ¡†æ¶æˆ‘ä»¬éœ€è¦ç¡®ä¿ä¸¤ä»¶äº‹æƒ…</p><ol><li>å¯¹äºç›¸åŒçš„COPé—®é¢˜ï¼Œå¯ä»¥æœ‰ä¸åŒçš„è¾“å…¥å°ºå¯¸</li><li>å¯¹è¾“å…¥çš„æ’åˆ—ä¿æŒä¸å˜</li></ol><p>ä¸ºäº†ä¿è¯è¿™æ ·çš„æ¶æ„æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ä¸€ç§Transformeræ¶æ„ï¼Œå¯¹äºTSPé—®é¢˜å¤©ç„¶çš„æˆ‘ä»¬å¯ä»¥é‡‡ç”¨GATçš„æ–¹å¼æ¥å®ç°åºåˆ—åˆ°åºåˆ—çš„è½¬æ¢</p><p>å¯¹äºDQNç½‘ç»œä¸­æœ€åä¸€å±‚çš„è¾“å…¥æ˜¯ä¸åŒåŠ¨ä½œå¯¹åº”çš„Q- value</p><h2 id="25-cp-encoding"><a class="markdownIt-Anchor" href="#25-cp-encoding"></a> 2.5 CP Encoding</h2><p>ç°åœ¨ä»‹ç»å¦‚ä½•å°†DPè¿‡ç¨‹ç¼–ç æ”¾å…¥Constraint model</p><table><thead><tr><th></th><th>CP</th><th>DP</th></tr></thead><tbody><tr><td>variable and domains</td><td>X- decision variablesï¼Œset of the variablesï¼Œè¡¨ç¤ºåŠ¨ä½œ</td><td>X</td></tr><tr><td></td><td>X-auxiliary variablesï¼Œè¡¨ç¤ºstate</td><td>S</td></tr><tr><td></td><td>Dï¼Œset of the domain</td><td>V</td></tr><tr><td></td><td>Cï¼Œset of the constraints</td><td>P</td></tr><tr><td></td><td>Oï¼Œobjective function</td><td>åœ¨åé¢Né˜¶æ®µä¸­çš„æœ€å¤§å€¼ï¼Œè¿™é‡Œçš„åŠ¨æ€è§„åˆ’æ–¹å‘ä»…ä»…å’Œx_aæœ‰å…³</td></tr></tbody></table><h2 id="26-æœç´¢ç­–ç•¥"><a class="markdownIt-Anchor" href="#26-æœç´¢ç­–ç•¥"></a> 2.6 æœç´¢ç­–ç•¥</h2><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202212181550868.png" alt="image-20221218155022842" /></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202212181550935.png" alt="image-20221218155036915" /></p><p>ä¸DPæ–¹å¼ç›¸åŒï¼Œæˆ‘ä»¬ç”¨æ­¤æ¥æ„å»ºRLçš„ç¯å¢ƒï¼ˆå¹¶å›ºå®šCOé—®é¢˜ï¼‰æ¥å¾—åˆ°åŠ¨ä½œçš„è¾“å‡ºï¼Œæ¡†æ¶çš„ç»Ÿä¸€æ€§æ˜¯é—®é¢˜çš„æ ¸å¿ƒï¼Œè¿™ä¸€éƒ¨åˆ†å±•ç¤ºæˆ‘ä»¬å¦‚ä½•å°†å­¦ä¹ çš„æ¨¡å‹åµŒå…¥åˆ°CPæœç´¢ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘å‡ ç§å¸¸è§çš„æœç´¢æ–¹å¼</p><ol><li>Depth-first branch-and-bound search</li><li>iterative limited discrepancy search</li><li>restart based search</li></ol><p>è¿™é‡Œä»…ä»‹ç»ç¬¬ä¸€ç§æœç´¢ç­–ç•¥ä¸DQNçš„ç»“åˆï¼ŒDFSç¡®ä¿äº†å½“ä¸€ä¸ªå¯è¡Œè§£æ‰¾åˆ°ä¹‹åï¼Œä¸‹ä¸€ä¸ªè§£éœ€è¦å¥½ä¸å½“å‰çš„ï¼Œå½“é‡åˆ°æ²¡æœ‰å¯è¡Œçš„åˆ†æ”¯ä¼šå›æº¯åˆ°ä¹‹å‰çš„åˆ†æ”¯ï¼Œç”±æ­¤æ¥ç¡®ä¿æ•´ä¸ªè§£ç©ºé—´éƒ½å¾—åˆ°éå†ï¼ŒåŒæ—¶æœ€ç»ˆå¾—åˆ°çš„è§£å¯ä»¥è¢«è¯æ˜æ˜¯æœ€ä¼˜çš„optimalï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦éå¸¸å¥½çš„value- selection</p><p>åœ¨å­¦ä¹ ä¹‹åï¼ŒDQNçš„ä½œç”¨æ˜¯è¾“å…¥å½“å‰çš„çŠ¶æ€ï¼Œä»¥åŠå¯è¡Œçš„åŠ¨ä½œï¼Œè¾“å…¥ä¸åŒåŠ¨ä½œçš„æœ€å¤§å€¼ï¼Œè¿™é‡Œå¯ä»¥è´ªå¿ƒæœç´¢çš„æ–¹å¼è¿›è¡Œä¸‹å»ï¼Œå°½ç®¡å¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„ï¼Œéœ€è¦ä¿è¯å’ŒDPé—®é¢˜ä¸­å­˜åœ¨çš„ä¸€è‡´æ€§ï¼Œé€šå¸¸è¿™é‡Œä¼šæœ‰ä¸€äº›è¿‘ä¼¼å˜é‡æ¥ä½œä¸ºå¯¹DPé—®é¢˜çš„å…³é”®å½±å“ï¼Œä½†æ˜¯è¿™é‡Œä¸æ˜¯é‡ç‚¹</p><p>æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹è¡¨æ‰€ç¤ºâ¬‡ï¸</p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202212181551671.png" alt="image-20221218155108646" /></p><h1 id="3-experimental-result"><a class="markdownIt-Anchor" href="#3-experimental-result"></a> 3 Experimental result</h1><p>TSPTWæ˜¯ä»ä¼ ç»Ÿçš„TSPé—®é¢˜ä¸­å¾—åˆ°çš„ï¼Œåªæ˜¯ç»™æ‰€æœ‰çš„salesmanå¢åŠ ä¸€ä¸ªæ—¶é—´çª—çš„æ¦‚å¿µï¼Œæœ€ç»ˆè§„å®šéœ€è¦åœ¨è§„å®šæ—¶é—´å†…æ²¿ç€æ‰€æœ‰çš„èŠ‚ç‚¹èµ°ä¸€åœˆã€‚</p><p><a href="https://developers.google.com/optimization/routing/vrptw">Vehicle Routing Problem with Time Windows | OR-Tools | Google Developers</a></p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202212181551430.png" alt="image-20221218155120405" /></p><p>æœ€ç»ˆè¯æ˜äº†ç»“æœ</p><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202212181551101.png" alt="image-20221218155134078" /></p><h1 id="4-discussion-and-limitation"><a class="markdownIt-Anchor" href="#4-discussion-and-limitation"></a> 4 Discussion and Limitation</h1><p>é¦–å…ˆæœ¬æ–‡å¹¶ä¸æ˜¯ç¬¬ä¸€ä¸ªå°è¯•ä½¿ç”¨MLæ¥å¼•å¯¼ä¼˜åŒ–æ±‚è§£å™¨çš„åˆ†æ”¯ï¼Œä½†æ˜¯ä»–ä»¬çš„æ–¹æ³•ä¸“æ³¨äºç›‘ç£å­¦ä¹ å¹¶ä¸”ä»…é™äºçº¿æ€§é—®é¢˜ï¼Œè¿™é‡Œæœ¬æ–‡çš„å…±äº«</p><ol><li>å…³æ³¨ä¸å°†COPé—®é¢˜å»ºæ¨¡æˆä¸ºDP</li><li>å®Œå…¨åˆ©ç”¨RLè¿›è¡Œè®­ç»ƒ</li></ol><p>åŒæ—¶ç»“åˆCPé—®é¢˜çš„å®Œæ•´æ€§ï¼Œå¯ä»¥æ›´å¥½çš„æ±‚è§£ä¸€ç³»åˆ—é—®é¢˜åŒ…æ‹¬éçº¿æ€§çº¦æŸæˆ–è€…éçº¿æ€§çº¦æŸå‡½æ•°</p><p>åŒæ—¶æˆ‘ä»¬ä¹Ÿä¸éœ€è¦ä¸€äº›å†å²æ•°æ®æˆ–è€…ä»¿çœŸç”Ÿæˆå™¨ï¼ŒåŒæ—¶æ˜¯ä¸€ç§ç«¯åˆ°ç«¯çš„æ±‚è§£å™¨ï¼Œå¹¶ä¸”å¯ä»¥è¯æ˜æ±‚è§£ç»“æœçš„æœ€ä¼˜æ€§</p><h1 id="5-conclusion"><a class="markdownIt-Anchor" href="#5-conclusion"></a> 5 Conclusion</h1><p>è¿™äº›ç»“æœè¡¨æ˜ï¼Œè¯¥æ¡†æ¶å¯èƒ½æ˜¯è§£å†³å…·æœ‰æŒ‘æˆ˜æ€§çš„ç»„åˆä¼˜åŒ–é—®é¢˜çš„ä¸€ç§æœ‰å‰é€”çš„æ–°é€”å¾„ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><br></code></pre></td></tr></table></figure><p><img src="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202212181551911.png" alt="image-20221218155147889" /></p><p><a href="https://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/img/202212181553133.pdf">æ€»ç»“çš„ppt</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Paper03_Rainbow_Combining_Improvements_in_Deep_Reinforcement_Learning</title>
    <link href="/posts/d590ba5e.html"/>
    <url>/posts/d590ba5e.html</url>
    
    <content type="html"><![CDATA[<p>ä½œè€…ï¼šHessel, M., Modayil, J., Van Hasselt, H., Schaul, T., Ostrovski, G., Dabney, W., â€¦ &amp; Silver, D.</p><p>å®éªŒå®¤ï¼šGoogle DeepMind</p><p>è®ºæ–‡åœ°å€ï¼š<a href="https://arxiv.org/pdf/1710.02298">https://arxiv.org/pdf/1710.02298</a></p><p>å‘è¡¨ï¼š In <em>Thirty-second AAAI conference on artificial intelligence</em>.</p><span id="more"></span><h2 id="0x01-æ‘˜è¦"><a class="markdownIt-Anchor" href="#0x01-æ‘˜è¦"></a> 0x01 æ‘˜è¦</h2><h3 id="11-æ‘˜è¦èƒŒæ™¯åŠé—®é¢˜"><a class="markdownIt-Anchor" href="#11-æ‘˜è¦èƒŒæ™¯åŠé—®é¢˜"></a> 1.1 æ‘˜è¦â€“èƒŒæ™¯åŠé—®é¢˜</h3><p>ä»DQN<sup><a href="#ref1">1</a></sup>æ¨å¯¼è¿‡ç¨‹ä¸­å‘ç°ä¾æ—§å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œå¸¸è§çš„æ”¹è¿›æªæ–½Double DQN<sup><a href="#ref1">2</a></sup>ã€Dueling DQN<sup><a href="#ref1">3</a></sup>ã€Prioritized replay<sup><a href="#ref1">4</a></sup>ã€Multi-step<sup><a href="#ref1">5</a></sup>ã€Distributional RL<sup><a href="#ref1">6</a></sup>ã€Noisy Net<sup><a href="#ref1">7</a></sup>ç­‰æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å¹¶ä¸æ˜¯å®Œå…¨ç‹¬ç«‹ï¼Œæ¯”å¦‚åœ¨Duelingä¸­å…¶å®å·²ç»å°†Double DQNå’ŒPrioritized replayç»“åˆèµ·æ¥ã€‚</p><h3 id="12-æ‘˜è¦æ–¹æ³•"><a class="markdownIt-Anchor" href="#12-æ‘˜è¦æ–¹æ³•"></a> 1.2 æ‘˜è¦â€“æ–¹æ³•</h3><p>æœ¬æ–‡å¸Œæœ›å°†ä¸Šè¿°å…­ç§DQNæ–¹æ³•ç»“åˆç»éªŒèåˆåœ¨ä¸€èµ·ï¼Œæ¥å¾—åˆ°ä¸€ä¸ªæ›´å¥½çš„ç½‘ç»œã€‚</p><h3 id="13-æ‘˜è¦è´¡çŒ®"><a class="markdownIt-Anchor" href="#13-æ‘˜è¦è´¡çŒ®"></a> 1.3 æ‘˜è¦â€“è´¡çŒ®</h3><ol><li>æˆä¸ºAtari 2600ä¸­SOTA</li><li>æˆ‘ä»¬è¿˜æä¾›è¯¦ç»†çš„æ¶ˆèç ”ç©¶çš„ç»“æœï¼Œè¯¥ç ”ç©¶ç»“æœæ˜¾ç¤ºäº†æ¯ä¸ªç»„ä»¶å¯¹æ•´ä½“æ€§èƒ½çš„è´¡çŒ®ã€‚</li></ol><h2 id="0x02-é—®é¢˜èƒŒæ™¯"><a class="markdownIt-Anchor" href="#0x02-é—®é¢˜èƒŒæ™¯"></a> 0x02 é—®é¢˜èƒŒæ™¯</h2><h3 id="21-rl-problem-è®°å·"><a class="markdownIt-Anchor" href="#21-rl-problem-è®°å·"></a> 2.1 RL problem &amp; è®°å·</h3><p>å¼ºåŒ–å­¦ä¹ å¸Œæœ›ä¸€ä¸ªå…·æœ‰è¡Œä¸ºï¼ˆaction)çš„æ™ºèƒ½ä½“(agent) åœ¨ä¸ç¯å¢ƒ(environment)äº¤äº’çš„è¿‡ç¨‹å¯ä»¥æœ€å¤§åŒ–å¥–åŠ±(reward),åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¹¶ä¸ä¼šç›´æ¥ç›‘ç£å¼çš„å­¦ä¹ ã€‚è¿™é‡Œåˆ†äº«å¦å¤–ä¸€ç§å®šä¹‰:</p><blockquote><p>ä¸€ã€Mathematical formalism for learning- based decision making</p><p>äºŒã€Approach for learning decision making and control form experience</p></blockquote><p>**MDP (Markov Decision Process) <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mi>S</mi><mo separator="true">,</mo><mi>A</mi><mo separator="true">,</mo><mi>T</mi><mo separator="true">,</mo><mi>r</mi><mo separator="true">,</mo><mi>Î³</mi><mo>}</mo></mrow><annotation encoding="application/x-tex">\{S,A,T,r,\gamma\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mord mathit">A</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mclose">}</span></span></span></span> **</p><p>åœ¨ä¸åŒçš„æ—¶é—´æ­¥ä¸‹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">t=0,1,2,..</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathrm">2</span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span></span></span></span>ï¼Œç¯å¢ƒçŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">S_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æä¾›ç»™æ™ºèƒ½ä½“ä¸€ä¸ªè§‚æµ‹ä¿¡æ¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>O</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">O_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>,é€šå¸¸æˆ‘ä»¬ä¼šè®¤ä¸ºæ˜¯å®Œå…¨è§‚æµ‹(å³<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><msub><mi>O</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">S_t=O_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>)ï¼ŒåŒæ—¶æ™ºèƒ½ä½“æ ¹æ®è§‚æµ‹ä¿¡æ¯åšå‡ºåŠ¨ä½œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">A_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>, ä¹‹åç¯å¢ƒç»™å‡ºä¸‹ä¸€ä¸ªå¥–åŠ±<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">R_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>,å¥–åŠ±çš„æŠ˜æ‰£<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î³</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\gamma_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05556em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ä»¥åŠæ›´æ–°çŠ¶æ€ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">S_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-033033.jpg" alt="MDP" /></p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹é€šå¸¸<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo separator="true">,</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">S,A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mord mathit">A</span></span></span></span>æ˜¯æœ‰é™çš„æƒ…å†µ,å¯¹äºç¯å¢ƒæ¥è¯´çŠ¶æ€è½¬ç§»ï¼ˆstochastic transition function)ï¼›å¥–åŠ±æ–¹ç¨‹åŒ…æ‹¬</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>=</mo><mi>P</mi><mo>[</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn><mo>=</mo><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><mi>s</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><mi>a</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">T(s,a,s&#x27;)=P[S_{t+1=s&#x27;}|S_t=s,A_t=a]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.801892em;"></span><span class="strut bottom" style="height:1.051892em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">a</span><span class="mclose">]</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>E</mi><mo>[</mo><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><mi>s</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><mi>a</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">r(s,a)=E[R_{t+1}|S_t=s,A_t=a]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">a</span><span class="mclose">]</span></span></span></span></span></p><p>å¯¹äºæ™ºèƒ½ä½“æ¥è¯´ï¼Œæ ¹æ®çŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">S_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼ˆæˆ–è€…å®Œå…¨è§‚æµ‹ä¸‹çš„è§‚æµ‹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>O</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">O_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>)å¾—åˆ°å¾—åˆ°åŠ¨ä½œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">A_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æ¥è‡ªäºç­–ç•¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span></span>ï¼ˆpolicy),åœ¨åºåˆ—å†³ç­–ä¸­æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–æŸä¸ªçŠ¶æ€é‡‡å–æŸä¸ªåŠ¨ä½œçš„æŠ˜æ‰£å¥–åŠ±ä¹‹å’Œ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><mi>a</mi><mo>)</mo><mo>=</mo><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub><mo>[</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><mi>a</mi><mi mathvariant="normal">âˆ£</mi><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><mi>s</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">P(A_t=a)=\pi_{\theta}[A_t=a|S_t=s]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">a</span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">s</span><span class="mclose">]</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><msub><mi>G</mi><mi>t</mi></msub><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi mathvariant="normal">âˆ</mi></mrow></msubsup><msubsup><mi>r</mi><mi>t</mi><mrow><mi>k</mi></mrow></msubsup><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">max G_t=\Sigma_{k=0}^{\infty}r_t^{k}R_{t+k+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8991079999999998em;"></span><span class="strut bottom" style="height:1.146108em;vertical-align:-0.247em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">âˆ</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.247em;margin-left:-0.02778em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>æˆ‘ä»¬åœ¨åˆ©ç”¨ç®—æ³•è¿›è¡Œæ¢¯åº¦æå‡é€šå¸¸ä¼šç»è¿‡ä¸‰ä¸ªæ­¥éª¤</p><ol><li>ç”Ÿæˆæ ·æœ¬</li><li>è¯„ä¼°æ¨¡å‹æˆ–è€…æ˜¯è®¡ç®—return</li><li>æå‡ç­–ç•¥</li></ol><h3 id="22-policy-gradientç›´æ¥æå‡policy"><a class="markdownIt-Anchor" href="#22-policy-gradientç›´æ¥æå‡policy"></a> 2.2 Policy Gradientï¼šç›´æ¥æå‡policy</h3><p>ä¸ºäº†æœ€å¤§åŒ–ç­–ç•¥çš„å›æŠ¥ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">G_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æœ€å¤§åŒ–ï¼ˆREINFRORCEMENTï¼‰ï¼Œæ¨å¯¼è¿‡ç¨‹ç•¥</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-101742.png" alt="REINFORCE algorithm " /></p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨baselineã€n-stepsã€discountã€import samplingçš„æ–¹æ³•å¯¹ä»–è¿›è¡Œæ”¹è¿›ã€‚</p><h3 id="23-actor-crticæ–¹æ³•returnä¸policyåˆ†å¼€"><a class="markdownIt-Anchor" href="#23-actor-crticæ–¹æ³•returnä¸policyåˆ†å¼€"></a> 2.3 <strong>Actor-Crticæ–¹æ³•</strong>ï¼šReturnä¸Policyåˆ†å¼€</h3><p>ä¹Ÿå¯ä»¥å¼•å…¥æ–°çš„çŠ¶æ€ä»·å€¼å‡½æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>V</mi><mrow><mi>Ï€</mi></mrow></msup><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">V^{\pi}(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span>æ¥ç»“åˆæ‹Ÿåˆçš„æ–¹å¼è®¡ç®—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">G_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ä¹‹åæœ€å¤§åŒ–(A3C),ä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>V</mi><mrow><mi>Ï€</mi></mrow></msup><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">V^{\pi}(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span>å’ŒåŠ¨ä½œçŠ¶æ€ä»·å€¼å‡½æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Q</mi><mrow><mi>Ï€</mi></mrow></msup><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Q^{\pi}(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span>æ¥è¿›è¡ŒåŸºäºä»·å€¼å‡½æ•°çš„å­¦ä¹ æ–¹æ³•ã€‚</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>V</mi><mrow><mi>Ï€</mi></mrow></msup><mo>(</mo><mi>s</mi><mo>)</mo><mo>=</mo><msub><mi>E</mi><mrow><mi>Ï€</mi></mrow></msub><mo>[</mo><msub><mi>G</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><mi>s</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">V^{\pi}(s)=E_{\pi}[G_t|S_t=s]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">s</span><span class="mclose">]</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Q</mi><mrow><mi>Ï€</mi></mrow></msup><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><msub><mi>E</mi><mi>Ï€</mi></msub><mo>[</mo><msub><mi>G</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><mi>s</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><mi>a</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">Q^{\pi}(s,a)=E_\pi[G_t|S_t=s,A_t=a]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">a</span><span class="mclose">]</span></span></span></span></span></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-102038.png" alt="batch actor-crtic algorithm" /></p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨replay bufferã€ç¥ç»ç½‘ç»œæ¥å­¦ä¹ é™ä½policy gradientä¸­çš„æ–¹å·®ã€‚</p><h3 id="24-value-based-method-æŠ›å¼ƒpolicy"><a class="markdownIt-Anchor" href="#24-value-based-method-æŠ›å¼ƒpolicy"></a> 2.4 Value- based method  æŠ›å¼ƒpolicy</h3><p>Policy iteration-&gt;Value iteration-&gt;Q learning</p><p>é¦–å…ˆä»policy iterationä¸value iterationè¯´èµ·ï¼Œ<a href="https://hrl.boyuai.com/chapter/1/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95">å‚è€ƒé“¾æ¥</a>å¯ä»¥çœ‹ä½œæ˜¯åˆ©ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹å¼ååº”å¼ºåŒ–å­¦ä¹ çš„è¿‡ç¨‹ï¼Œä¸¤è€…çš„åŒºåˆ«åœ¨äºååº”çš„æ˜¯è´å°”æ›¼æœŸæœ›è¿˜æ˜¯è´å°”æ›¼æœ€ä¼˜ã€‚</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-102432.png" alt="è´å°”æ›¼æœŸæœ›æ–¹ç¨‹" /></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-102502.png" alt="è´å°”æ›¼æœ€ä¼˜æ–¹ç¨‹" /></p><p>åœ¨åŸºäºä»·å€¼å­¦ä¹ ç®—æ³•çš„è¿‡ç¨‹ä¸­ï¼Œä¼˜ç‚¹æ˜¯æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªç»éªŒå›æ”¾æ± ï¼Œåªéœ€è¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo separator="true">,</mo><mi>r</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(s,a,s&#x27;,r)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mclose">)</span></span></span></span>è€Œä¸æ˜¯éœ€è¦å®Œæ•´çš„å†³ç­–åºåˆ—ã€‚æˆ‘ä»¬é€šå¸¸ä¼šå¼•å…¥éšæœºæ¢ç´¢ï¼ˆexplorationï¼‰çš„æ¦‚å¿µï¼Œå¸¸è§çš„åŒ…æ‹¬<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïµ</mi><mo>âˆ’</mo><mi>G</mi><mi>r</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">\epsilon-Greedy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Ïµ</span><span class="mbin">âˆ’</span><span class="mord mathit">G</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>çš„æ–¹æ³•ï¼Œåœ¨ä¸€å®šæ¦‚ç‡ä¸‹é€‰æ‹©éç­–ç•¥äº§ç”Ÿçš„åŠ¨ä½œã€‚</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-034903.png" alt="epsilon-greedy" /></p><p>åœ¨ value iterationçš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æŠ›å¼ƒå¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span>çš„å­¦ä¹ ï¼Œè€Œåªæ˜¯è®°å½•<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Q(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span>;Q- iteration algorithm(æˆ–è€…<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>âˆ’</mo><mi>l</mi><mi>e</mi><mi>a</mi><mi>r</mi><mi>n</mi><mi>i</mi><mi>n</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">Q- learning</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Q</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">n</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span></span></span></span>ï¼‰çœ‹è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-034721.png" alt="image-20221106114721046" /></p><h3 id="22-dqnæ¨å¯¼"><a class="markdownIt-Anchor" href="#22-dqnæ¨å¯¼"></a> 2.2 DQNæ¨å¯¼</h3><p>åœ¨ä¸Šè¿°æˆ‘ä»¬è®¤è¯†å¯¹äºMDPç›®æ ‡ï¼Œä»æ˜¾å¼è¡¨è¾¾Policyï¼Œåˆ°ç»“åˆValue functionå†åˆ°ä¹‹åçš„å®Œå…¨ä½¿ç”¨Value functionæ¥ä½¿ç”¨Q- learningçš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ²¡æœ‰è§£å†³çš„é—®é¢˜åŒ…æ‹¬</p><ol><li>çŠ¶æ€-åŠ¨ä½œç©ºé—´çš„è¿ç»­æ€§</li><li>åœ¨çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´çº¬åº¦å¤§çš„æ—¶å€™æ— æ³•å‡†ç¡®åˆ»ç”» çŠ¶æ€-åŠ¨ä½œä»·å€¼</li></ol><p>éšç€ç¥ç»ç½‘ç»œçš„å‘å±•ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ©ç”¨ç½‘ç»œæ‹Ÿåˆçš„æ–¹å¼æ¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼ŒåŒæ—¶æ¯ä¸€æ­¥åˆ©ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïµ</mi><mo>âˆ’</mo><mi>G</mi><mi>r</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">\epsilon-Greedy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Ïµ</span><span class="mbin">âˆ’</span><span class="mord mathit">G</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>çš„æ–¹å¼æ¥æ¢ç´¢å›æ”¾æ± ä¸­çš„ç»éªŒï¼Œå¹¶åˆ©ç”¨æ¢¯åº¦ä¸‹é™ç­‰æ–¹æ³•æœ€å°åŒ–ä»·å€¼å‡½æ•°è¡¨è¾¾çš„å›æŠ¥</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo>(</mo><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>Î³</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi>m</mi><mi>a</mi><msub><mi>x</mi><mrow><msup><mi>a</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msup><mi>a</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>âˆ’</mo><msub><mi>q</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msub><mi>S</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">min (R_{t+1}+\gamma_{t+1}max_{a&#x27;}(S_{t+1},a&#x27;)-q_{\theta}(S_t,A_t))^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8641079999999999em;"></span><span class="strut bottom" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05556em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><ul><li>1 åˆå§‹åŒ–å¤§å°ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span>çš„ç»éªŒå›æ”¾æ± (PSï¼šæ³¨æ„æœ‰å¤§å°é™åˆ¶)</li><li>2 ç”¨ç›¸åŒéšæœºçš„ç½‘ç»œå‚æ•°åˆå§‹åŒ–<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Q</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Q_{\theta}(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span>ä¸ç›®æ ‡ç½‘ç»œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Q</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Q_{\theta&#x27;}(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span></li><li>3 for å›åˆepisode=1ï¼ŒN doï¼š<ul><li>4 è·å–ç¯å¢ƒåˆå§‹çŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">s_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></li><li>5 for æ—¶é—´æ­¥numstep=1ï¼ŒT doï¼š<ul><li>6 æ ¹æ®å½“å‰ç½‘ç»œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub><mo>=</mo><mi>m</mi><mi>a</mi><msub><mi>x</mi><mi>a</mi></msub><msub><mi>Q</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">a_t=max_a Q_{\theta}(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">a</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span>ç»“åˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïµ</mi><mo>âˆ’</mo><mi>G</mi><mi>r</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">\epsilon-Greedy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Ïµ</span><span class="mbin">âˆ’</span><span class="mord mathit">G</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>æ–¹æ³•æ¥å¾—åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼ˆPSï¼šæ³¨æ„è¿™ä¸€æ­¥åŠ¨ä½œçš„ç¡®å®šéšå«ä¹‹åDQNå›æŠ¥åå¤§çš„ç‰¹ç‚¹ï¼‰</li><li>7 æ‰§è¡ŒåŠ¨ä½œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">a_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>,è·å–<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">r_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>,ç¯å¢ƒçŠ¶æ€å˜ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">s_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></li><li>8 å­˜å‚¨ä¸Šè¿°é‡‡æ ·ä¿¡æ¯åˆ°ç»éªŒå›æ”¾æ± </li><li>9 if ç»éªŒå›æ”¾æ± æ•°ç›®è¶³å¤Ÿï¼š<ul><li>10 é‡‡æ ·batchsizeæ ·æœ¬<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><msubsup><mi>s</mi><mi>t</mi><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mi>t</mi><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>r</mi><mi>t</mi><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo>}</mo></mrow><annotation encoding="application/x-tex">\{s_t^i,a_t^i,r_t^i,s_{t+1}^i\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:1.131103em;vertical-align:-0.30643899999999996em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.247em;margin-left:-0.02778em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24810799999999997em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.36299999999999993em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">}</span></span></span></span></li><li>11 è®¡ç®—ç›®æ ‡å€¼<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>y</mi><mi>t</mi><mi>i</mi></msubsup><mo>=</mo><msubsup><mi>r</mi><mi>t</mi><mi>i</mi></msubsup><mo>+</mo><mi>Î³</mi><mo>âˆ—</mo><mi>m</mi><mi>a</mi><msub><mi>x</mi><mi>a</mi></msub><msub><mi>Q</mi><mrow><mover accent="true"><mi>Î¸</mi><mo>^</mo></mover></mrow></msub><mo>(</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mi>t</mi><mi>i</mi></msubsup><mo>)</mo></mrow><annotation encoding="application/x-tex">y^i_t=r^i_t+\gamma*max_aQ_{\hat \theta}(s^i_{t+1},a^i_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:1.1503799999999997em;vertical-align:-0.3257159999999999em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.247em;margin-left:-0.03588em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.247em;margin-left:-0.02778em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mbin">âˆ—</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">a</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.3257159999999999em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span><span style="top:-0.26343999999999995em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24810799999999997em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.36299999999999993em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></li><li>12 æœ€å°åŒ–æŸå¤±å‡½æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><mo>(</mo><msubsup><mi>y</mi><mi>t</mi><mi>i</mi></msubsup><mo>âˆ’</mo><msub><mi>Q</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msubsup><mi>s</mi><mi>t</mi><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mi>t</mi><mi>i</mi></msubsup><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L=\frac{1}{N}(y_t^i-Q_{\theta}(s_t^i,a_t^i))^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord mathit">L</span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.247em;margin-left:-0.03588em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></li><li>13 æ›´æ–°ç½‘ç»œå‚æ•°</li></ul></li></ul></li><li>14 END FOR</li><li>15 æ›´æ–°ç›®æ ‡ç½‘ç»œå‚æ•°</li></ul></li><li>16 END FOR</li></ul><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-040037.png" alt="Deep Q- learning with Experience Replay" /></p><p>å…¶ä¸­éå¸¸æœ‰è¶£çš„æŠ€å·§åŒ…æ‹¬ï¼š</p><ol><li>ç»éªŒå›æ”¾(Experience Replay )ä¸éšæœºæ¢ç´¢;è¿™ä¸€éƒ¨åˆ†ä¸»è¦æ˜¯ä¸ºäº†æé«˜æ ·æœ¬é‡‡æ ·æ•ˆç‡ï¼ŒåŒæ—¶é™ä½åç»­æ¢¯åº¦ä¸‹é™ä¸­æ ·æœ¬çš„ç›¸å…³æ€§ã€‚</li><li>ç›®æ ‡ç½‘ç»œ(Target Network)ï¼Œç”±äºTDè¯¯å·®åœ¨ç­–ç•¥æ”¹å˜è¿‡ç¨‹ä¸­ä¹Ÿä¼šæ”¹å˜ï¼Œå› æ­¤é€ æˆç¥ç»ç½‘ç»œæ‹Ÿåˆè¿‡ç¨‹çš„ä¸ç¨³å®šæ€§ï¼Œå› æ­¤æ„å»ºæ–°çš„ç›®æ ‡ç½‘ç»œï¼Œåœ¨æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­æš‚æ—¶å›ºå®šï¼Œåœ¨å›åˆç»“åˆåæ›´æ–°å‚æ•°ï¼Œè¿™æ ·éœ€è¦ä¸¤å±‚Qç½‘ç»œ</li></ol><p><a href="https://paperswithcode.com/paper/playing-atari-with-deep-reinforcement">ç›¸å…³ä»£ç å®ç°</a></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-080345.png" alt="A more general view of DQN" /></p><h2 id="0x03-dqnæ”¹è¿›"><a class="markdownIt-Anchor" href="#0x03-dqnæ”¹è¿›"></a> 0x03 DQNæ”¹è¿›</h2><p>è™½ç„¶DQNæˆåŠŸè®©å¼ºåŒ–å­¦ä¹ åœ¨æŸäº›æ–¹é¢è¶…è¿‡äººç±»ï¼Œä½†æ˜¯ä¾æ—§æœ‰è¿™è®¸å¤šé™åˆ¶ã€‚</p><h3 id="31-æ”¹è¿›1double-q-learning"><a class="markdownIt-Anchor" href="#31-æ”¹è¿›1double-q-learning"></a> 3.1 æ”¹è¿›1â€“Double Q- Learning</h3><p>åœ¨DQNä¸­ä¼šæœ‰ä¼°è®¡å€¼è¿‡é«˜çš„æƒ…å†µï¼Œè¯æ˜å¦‚ä¸‹ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi><mo>âˆ’</mo><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>:</mo><msubsup><mi>y</mi><mi>t</mi><mi>i</mi></msubsup><mo>=</mo><msubsup><mi>r</mi><mi>t</mi><mi>i</mi></msubsup><mo>+</mo><mi>Î³</mi><mi>m</mi><mi>a</mi><msub><mi>x</mi><mrow><msubsup><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup></mrow></msub><msub><mi>Q</mi><mrow><mover accent="true"><mi>Î¸</mi><mo>^</mo></mover></mrow></msub><mo>(</mo><msubsup><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo>)</mo></mrow><annotation encoding="application/x-tex">target-value:y^i_t=r^i_t+\gamma max_{a_{t+1}^i}Q_{\hat \theta}(S^i_{t+1},a^i_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.874664em;"></span><span class="strut bottom" style="height:1.335509em;vertical-align:-0.46084499999999995em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mrel">:</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.247em;margin-left:-0.03588em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.247em;margin-left:-0.02778em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.22631999999999994em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.27551428571428577em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.3448em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.3257159999999999em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span><span style="top:-0.26343999999999995em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><msub><mi>x</mi><mrow><msubsup><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup></mrow></msub><msub><mi>Q</mi><mrow><mover accent="true"><mi>Î¸</mi><mo>^</mo></mover></mrow></msub><mo>(</mo><msubsup><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo>)</mo><mo>=</mo><msub><mi>Q</mi><mrow><mover accent="true"><mi>Î¸</mi><mo>^</mo></mover></mrow></msub><mo>(</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo separator="true">,</mo><mi>a</mi><mi>r</mi><mi>g</mi><mi>m</mi><mi>a</mi><msub><mi>x</mi><mrow><msubsup><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup></mrow></msub><msub><mi>Q</mi><mrow><mover accent="true"><mi>Î¸</mi><mo>^</mo></mover></mrow></msub><mo>(</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">max_{a_{t+1}^i}Q_{\hat \theta}(S^i_{t+1},a^i_{t+1})=Q_{\hat \theta}(s_{t+1}^i,argmax_{a_{t+1}^i}Q_{\hat \theta}(s_{t+1}^i,a_{t+1}^i))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.874664em;"></span><span class="strut bottom" style="height:1.335509em;vertical-align:-0.46084499999999995em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.22631999999999994em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.27551428571428577em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.3448em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.3257159999999999em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span><span style="top:-0.26343999999999995em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.3257159999999999em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span><span style="top:-0.26343999999999995em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.22631999999999994em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.27551428571428577em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.3448em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.3257159999999999em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span><span style="top:-0.26343999999999995em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p>æ ¹æ®æœŸæœ›å…¬å¼</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>[</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>X</mi><mn>1</mn><mo separator="true">,</mo><mi>X</mi><mn>2</mn><mo>)</mo><mo>]</mo><mo>&gt;</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>E</mi><mo>(</mo><mi>X</mi><mn>1</mn><mo>)</mo><mo separator="true">,</mo><mi>E</mi><mo>(</mo><mi>X</mi><mn>2</mn><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">E[max(X1,X2)]&gt;max(E(X1),E(X2))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="mclose">]</span><span class="mrel">&gt;</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-081747.png" alt="image-20221106161746893" /></p><p>æˆ‘ä»¬é€šè¿‡è¯æ˜å‘ç°ä¼°è®¡å€¼è¾ƒå¤§çš„åŸå› æ˜¯å› ä¸ºæˆ‘åœ¨æ¨¡å‹é€‰æ‹©è¡Œä¸ºå’Œè®¡ç®—Qå€¼ä½¿ç”¨åŒä¸€ä¸ªç½‘ç»œï¼Œå¦‚æœé™ä½è¡Œä¸ºé€‰æ‹©å’ŒQå€¼è®¡ç®—çš„ç›¸å…³æ€§å°±å¯ä»¥é™ä½é«˜ä¼°ï¼Œå› æ­¤ç›´è§‰çš„æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸¤ä¸ªç½‘ç»œ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Q</mi><mrow><msub><mi>Î¸</mi><mi>A</mi></msub></mrow></msub><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>r</mi><mo>+</mo><mi>Î³</mi><msub><mi>Q</mi><mrow><msub><mi>Î¸</mi><mi>b</mi></msub></mrow></msub><mo>(</mo><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo separator="true">,</mo><msup><mi>a</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">Q_{\theta_A}(s,a)=r+\gamma Q_{\theta_b}(s&#x27;,a&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.801892em;"></span><span class="strut bottom" style="height:1.057752em;vertical-align:-0.25586em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">A</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">b</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Q</mi><mrow><msub><mi>Î¸</mi><mi>B</mi></msub></mrow></msub><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>r</mi><mo>+</mo><mi>Î³</mi><msub><mi>Q</mi><mrow><msub><mi>Î¸</mi><mi>a</mi></msub></mrow></msub><mo>(</mo><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo separator="true">,</mo><msup><mi>a</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">Q_{\theta_B}(s,a)=r+\gamma Q_{\theta_a}(s&#x27;,a&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.801892em;"></span><span class="strut bottom" style="height:1.056892em;vertical-align:-0.255em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">a</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>æˆ‘ä»¬çš„ç¡®å¯ä»¥æ–°åŠ ä¸€ä¸ªç½‘ç»œï¼Œä½†æ˜¯ä¼šå¢åŠ å­¦ä¹ éš¾åº¦ï¼Œéœ€è¦é‡æ–°è®¾è®¡æ¶æ„ã€‚æ‰€ä»¥ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Q</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Q_{\theta}(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span>ä½œä¸ºè¡Œä¸ºçš„ä¼°è®¡ï¼Ÿ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>t</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>e</mi><mi>t</mi><mo>âˆ’</mo><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>âˆ’</mo><mi>d</mi><mi>o</mi><mi>u</mi><mi>b</mi><mi>l</mi><mi>e</mi><mo>âˆ’</mo><mi>Q</mi><mo>âˆ’</mo><mi>l</mi><mi>e</mi><mi>a</mi><mi>r</mi><mi>n</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>)</mo><mo>:</mo><msubsup><mi>y</mi><mi>t</mi><mi>i</mi></msubsup><mo>=</mo><msubsup><mi>r</mi><mi>t</mi><mi>i</mi></msubsup><mo>+</mo><mi>Î³</mi><msub><mi>Q</mi><mrow><mover accent="true"><mi>Î¸</mi><mo>^</mo></mover></mrow></msub><mo>(</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo separator="true">,</mo><mi>a</mi><mi>r</mi><mi>g</mi><mi>m</mi><mi>a</mi><msub><mi>x</mi><mrow><msubsup><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><msub><mi>Q</mi><mrow><mi>Î¸</mi></mrow></msub></mrow></msub><mo>(</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">(target-value-double-Q-learning):y^i_t=r^i_t+\gamma Q_{\hat \theta}(s^i_{t+1},argmax_{r^i_{t+1}Q_{\theta}}(s^i_{t+1},a^i_{t+1}))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.874664em;"></span><span class="strut bottom" style="height:1.335509em;vertical-align:-0.46084499999999995em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">e</span><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mbin">âˆ’</span><span class="mord mathit">d</span><span class="mord mathit">o</span><span class="mord mathit">u</span><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mbin">âˆ’</span><span class="mord mathit">Q</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">n</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mclose">)</span><span class="mrel">:</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.247em;margin-left:-0.03588em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.247em;margin-left:-0.02778em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.3257159999999999em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span><span style="top:-0.26343999999999995em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.22631999999999994em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.27551428571428577em;margin-left:-0.02778em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.3448em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><h3 id="32-æ”¹è¿›2prioritized-replay"><a class="markdownIt-Anchor" href="#32-æ”¹è¿›2prioritized-replay"></a> 3.2 æ”¹è¿›2ï¼šPrioritized replay</h3><p>åœ¨DQNå­¦ä¹ ä¸­ä¸ºé«˜æ•ˆåˆ©ç”¨ï¼ˆsï¼Œaï¼Œrï¼Œsï¼‰æ ·æœ¬ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç»éªŒå›æ”¾çš„æ–¹å¼æ¥å­˜å‚¨ä¸€å®šè§„æ¨¡çš„æ ·æœ¬ï¼Œåœ¨æ¢¯åº¦ä¸‹é™çš„æ—¶å€™é€šå¸¸æ˜¯ä»ç»éªŒå›æ”¾ä¸­å‡åŒ€é‡‡æ ·ï¼ˆuniformly samplingï¼‰æ¥è¿›è¡Œå­¦ä¹ ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾æ—§ä¼šå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</p><ol><li>ä¾æ—§æ²¡æœ‰å®Œå…¨è§£å†³æ•°æ®ä¹‹é—´ç‹¬ç«‹åŒåˆ†å¸ƒçš„å‡è®¾</li><li>å®¹æ˜“å¿˜è®°ä¸€äº›ç½•è§çš„ã€é‡è¦çš„ç»éªŒæ•°æ®</li></ol><p>åœ¨è¯¥è®ºæ–‡ä¸­ä½œè€…é¦–å…ˆåˆ¶å®šæŒ‡æ ‡â€œTD-errorâ€ä½œä¸ºè¡¡é‡<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><msubsup><mi>s</mi><mi>t</mi><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mi>t</mi><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>r</mi><mi>t</mi><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>i</mi></msubsup><mo>)</mo></mrow><annotation encoding="application/x-tex">(s_t^i,a_t^i,r_t^i,s^i_{t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:1.131103em;vertical-align:-0.30643899999999996em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.247em;margin-left:-0.02778em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24810799999999997em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.36299999999999993em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>çš„ä¿¡æ¯é‡å¤§å°ï¼Œä½œä¸ºé‡‡æ ·çš„ä¼˜å…ˆçº§ï¼ŒåŒæ—¶åˆ©ç”¨éšæœºä¼˜å…ˆçº§é‡‡æ ·ã€åç½®å’Œé‡è¦æ€§é‡‡æ ·ç­‰æ–¹å¼æ¥é¿å…è´ªå¿ƒçš„é—®é¢˜ã€‚ä¼˜å…ˆçº§çš„è·å–æœ‰3.2.1å’Œ3.2.2ä¸¤ç§æ–¹å¼</p>(éšæœºé‡‡æ ·)P(i)=\frac{p_i^\alpha}{\Sigma_kP_k^\alpha}<h3 id="321-æ¯”ä¾‹ä¼˜å…ˆçº§proportional-prioritization"><a class="markdownIt-Anchor" href="#321-æ¯”ä¾‹ä¼˜å…ˆçº§proportional-prioritization"></a> 3.2.1 æ¯”ä¾‹ä¼˜å…ˆçº§ï¼ˆProportional prioritizationï¼‰</h3><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>i</mi></msub><mo>=</mo><mi mathvariant="normal">âˆ£</mi><msub><mi>Ïƒ</mi><mi>i</mi></msub><mi mathvariant="normal">âˆ£</mi><mo>+</mo><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">P_i=|\sigma_i|+\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mbin">+</span><span class="mord mathit">Ïµ</span></span></span></span></span></p><h3 id="322-åŸºäºæ’åçš„ä¼˜å…ˆçº§rank-based-prioritization"><a class="markdownIt-Anchor" href="#322-åŸºäºæ’åçš„ä¼˜å…ˆçº§rank-based-prioritization"></a> 3.2.2 åŸºäºæ’åçš„ä¼˜å…ˆçº§(Rank-based prioritization)</h3>P_i=\frac{1}{rank(i)}$$ï¼›ä¼˜ç‚¹å¯ä»¥ä¿è¯çº¿æ€§æ€§è´¨ï¼Œå¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿã€‚ä¸Šè¿°ä¸¤ç§æ˜¯ä¸åŒå¾—åˆ°é‡è¦æ€§çš„æ–¹å¼ï¼›åœ¨å®ç°æ—¶å€™é‡‡ç”¨sum-treeçš„æ•°æ®ç»“æ„é™ä½ç®—æ³•å¤æ‚ç¨‹åº¦ã€‚åœ¨é‡‡æ ·ä¸­è€ƒè™‘é‡è¦æ€§é‡‡æ ·ï¼ˆimportance samplingï¼‰ï¼Œå¹¶ç”±æ­¤æ¥è¿›è¡Œçƒ­åç½®ï¼ˆAnnealing the biasï¼‰æ¥ä¿®æ­£è¯¯å·®$$w_j=(\frac{1}{N}*\frac{1}{P(i)})^\beta<p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-083749.png" alt="Double DQN with proportional prioritization " /></p><h3 id="33-æ”¹è¿›3-dueling-networks"><a class="markdownIt-Anchor" href="#33-æ”¹è¿›3-dueling-networks"></a> 3.3 æ”¹è¿›3: Dueling networks</h3><p>Dueling DQNæ˜¯ä¸€ç§é’ˆå¯¹åŸºäºä»·å€¼å‡½æ•°çš„å¼ºåŒ–å­¦ä¹ çš„ç½‘ç»œç»“æ„è®¾è®¡ï¼Œå…¶å¹¶ä¸ç›´æ¥è¾“å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Q(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span>ï¼Œè€Œæ˜¯è¾“å‡º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">V(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span>ä¸<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">A(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span>,é€šå¸¸ä¼šå…±ç”¨å‰å‡ å±‚çš„å·ç§¯å‚æ•°ï¼Œåœ¨åé¢åˆ™æ˜¯çŠ¶æ€ä»·å€¼å‡½æ•°ä¸ä¼˜åŠ¿å‡½æ•°å„è‡ªçš„å‚æ•°ã€‚</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-085135.png" alt="image-20221106165135693" /></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-084642.png" alt="Dueling DQN" /></p><h3 id="34-æ”¹è¿›4multi-step-learning"><a class="markdownIt-Anchor" href="#34-æ”¹è¿›4multi-step-learning"></a> 3.4 æ”¹è¿›4:Multi-step learning</h3><p>åœ¨å¯¹çŠ¶æ€åŠ¨ä½œå‡½æ•°çš„ä¼˜åŠ¿ä¼°è®¡æ—¶å€™ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šåˆ†ä¸ºè’™ç‰¹å¡æ´›æ–¹æ³•ä¸Bootstrap(æˆ–è€…æ˜¯Actor- criticå†…çš„C)çš„æ–¹æ³•</p>(MC-sampling)A_t=\Sigma_{k=0}^{\infty}\gamma_t^{k}ï¼ˆR_{t+k+1}-b)<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>b</mi><mi>o</mi><mi>o</mi><mi>t</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>a</mi><mi>p</mi><mo>âˆ’</mo><mi>s</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>g</mi><mo>)</mo><msub><mi>G</mi><mi>t</mi></msub><mo>=</mo><msub><mi>r</mi><mrow><mi>t</mi></mrow></msub><mo>+</mo><mi>Î³</mi><mo>âˆ—</mo><mi>V</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo><mo>âˆ’</mo><mi>V</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">(bootstrap-sampling)G_t=r_{t}+\gamma*V(s_{t+1})-V(s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">o</span><span class="mord mathit">o</span><span class="mord mathit">t</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">p</span><span class="mbin">âˆ’</span><span class="mord mathit">s</span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mclose">)</span><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å‰è€…æ–¹æ³•åå·®ä½ä½†æ˜¯æ–¹å·®è¾ƒå¤§ï¼›åè€…æ–¹å·®ä½ä½†æ˜¯æœ‰åã€‚å› æ­¤ç»“åˆä¸¤è€…æˆ‘ä»¬é€šå¸¸ä¼šæœ‰Multi-step targetçš„æ–¹æ³•ã€‚</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-090001.png" alt="N-stepæ›´è¿›ä¸€æ­¥ï¼Œå¹¿ä¹‰ä¼˜åŠ¿ä¼°è®¡" /></p><p>åŒæ ·çš„ä¹Ÿå¯ä»¥ç”¨åœ¨DQNä¸­å¯¹äºçŠ¶æ€åŠ¨ä½œä»·å€¼å‡½æ•°çš„ä¼°è®¡ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>R</mi><mi>t</mi><mrow><mi>n</mi></mrow></msubsup><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><msubsup><mi>Î³</mi><mi>t</mi><mrow><mi>k</mi></mrow></msubsup><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">R_t^{n}=\Sigma_{k=0}^{n-1}\gamma_t^{k}R_{t+k+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8991079999999998em;"></span><span class="strut bottom" style="height:1.1905469999999996em;vertical-align:-0.2914389999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.247em;margin-left:-0.00773em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.2914389999999999em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="vlist"><span style="top:0.247em;margin-left:-0.05556em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>æ›´æ–°ä¹‹åçš„æŸå¤±å‡½æ•°ä¸º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><msubsup><mi>R</mi><mi>t</mi><mrow><mi>n</mi></mrow></msubsup><mo>+</mo><msubsup><mi>Î³</mi><mi>t</mi><mi>n</mi></msubsup><mi>m</mi><mi>a</mi><msub><mi>x</mi><mrow><msup><mi>a</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><msub><mi>Q</mi><mrow><mover accent="true"><mi>Î¸</mi><mo>^</mo></mover></mrow></msub><mo>(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mi>n</mi></mrow></msub><mo separator="true">,</mo><msup><mi>a</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>âˆ’</mo><msub><mi>Q</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>S</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">(R_t^{n}+\gamma_t^nmax_{a&#x27;}Q_{\hat \theta}(S_{t+n},a&#x27;)-Q_\theta(S_t,A_t))^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8641079999999999em;"></span><span class="strut bottom" style="height:1.1898239999999998em;vertical-align:-0.3257159999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.247em;margin-left:-0.00773em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="vlist"><span style="top:0.247em;margin-left:-0.05556em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.3257159999999999em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span><span style="top:-0.26343999999999995em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><h3 id="35-æ”¹è¿›5distributional-rl"><a class="markdownIt-Anchor" href="#35-æ”¹è¿›5distributional-rl"></a> 3.5 æ”¹è¿›5:Distributional RL</h3><p>åœ¨åŸºäºä»·å€¼å‡½æ•°çš„å­¦ä¹ ä¸­æˆ‘ä»¬é€šå¸¸æ˜¯è¿”å›ä¸€ä¸ªæœŸæœ›æˆ–è€…æœ€å¤§å€¼è€Œä¸¢å¤±å¾ˆå¤šå…¶ä»–ä¿¡æ¯ï¼Œå› æ­¤Distributional RLå°è¯•åˆ©ç”¨å…¶åˆ†å¸ƒè€Œä¸æ˜¯å•ä¸ªå€¼æ¥è¿›è¡Œå¼ºåŒ–å­¦ä¹ ã€‚é¦–å…ˆæœ¬æ–‡å°è¯•å°†ä»·å€¼å‡½æ•°èŒƒå›´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><msub><mi>V</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub><mo separator="true">,</mo><msub><mi>V</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">[V_{min},V_{max}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span>åˆ’åˆ†ä¸ºNä¸ªå„è‡ªæ¥ä¼°è®¡ä»·å€¼å‡½æ•°ï¼Œåˆ©ç”¨Boltzmannåˆ†å¸ƒè¡¨ç¤ºä»·å€¼å‡½æ•°çš„åˆ†å¸ƒï¼ŒåŒæ—¶åˆ©ç”¨æŠ•å½±çš„æ“ä½œ</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-091649.png" alt="ä¼°è®¡Z(s)" /></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-091719.png" alt="ä¸åŒoption" /></p><p>ç”±æ­¤å¯¹äºåˆ†å¸ƒæ‹Ÿåˆå¯ä»¥åˆ’åˆ†ä¸ºäº¤å‰ç†µçš„å½¢å¼ï¼Œç®—æ³•æµç¨‹</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-091812.png" alt="Distribution RL" /></p><h3 id="36-æ”¹è¿›6noisy-nets"><a class="markdownIt-Anchor" href="#36-æ”¹è¿›6noisy-nets"></a> 3.6 æ”¹è¿›6ï¼šNoisy Nets</h3><p>åœ¨Q- learningæˆ–è€…æ˜¯DQNä¸­ï¼Œæˆ‘ä»¬çš„è½¨è¿¹å¹¶ä¸æ˜¯å®Œå…¨é‡‡æ ·çš„ï¼Œè€Œæ˜¯ä¸æˆ‘ä»¬çš„æ¢ç´¢ç­–ç•¥ç›¸å…³ï¼Œæœ€åŸæœ¬çš„æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïµ</mi><mo>âˆ’</mo><mi>G</mi><mi>r</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">\epsilon-Greedy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Ïµ</span><span class="mbin">âˆ’</span><span class="mord mathit">G</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>ç­–ç•¥ï¼Œè¿™é‡Œæå‡ºä¸€ç§NoisyNetæ¥å¯¹å‚æ•°å¢åŠ å™ªå£°æ¥å¢åŠ æ¨¡å‹çš„æ¢ç´¢èƒ½åŠ›</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mo>(</mo><mi>W</mi><mi>x</mi><mo>+</mo><mi>b</mi><mo>)</mo><mo>+</mo><mo>(</mo><msub><mi>b</mi><mrow><mi>n</mi><mi>o</mi><mi>i</mi><mi>s</mi><mi>y</mi></mrow></msub><mo>âŠ™</mo><msup><mi>Ïµ</mi><mi>b</mi></msup><mo>+</mo><msub><mi>W</mi><mrow><mi>n</mi><mi>o</mi><mi>i</mi><mi>s</mi><mi>y</mi></mrow></msub><mo>âŠ™</mo><msup><mi>Ïµ</mi><mi>w</mi></msup><mo>)</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">y=(Wx+b)+(b_{noisy}\odot\epsilon^b+W_{noisy}\odot\epsilon^w)x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8991079999999999em;"></span><span class="strut bottom" style="height:1.1852159999999998em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">=</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="mord mathit">x</span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mbin">+</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span><span class="mord mathit">o</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âŠ™</span><span class="mord"><span class="mord mathit">Ïµ</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">b</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span><span class="mord mathit">o</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âŠ™</span><span class="mord"><span class="mord mathit">Ïµ</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathit">x</span></span></span></span></span></p><p>å™ªå£°çš„ç”Ÿæˆå¯ä»¥åˆ†ä¸ºIndependent Gaussian noiseï¼›Factorised Gaussian noiseä¸¤ç§æ–¹å¼ã€‚</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-093441.png" alt="Nosy netçš„æ•ˆæœ" /></p><h3 id="37-èåˆä¸Šè¿°ç­–ç•¥"><a class="markdownIt-Anchor" href="#37-èåˆä¸Šè¿°ç­–ç•¥"></a> 3.7 èåˆä¸Šè¿°ç­–ç•¥</h3><p>é¦–å…ˆå°†ï¼ˆæ”¹è¿›5:Distributional RLï¼‰ä¸­çš„æŸå¤±å‡½æ•°æ›´æ¢ç§°ä¸ºï¼ˆæ”¹è¿›4:Multi-step learningï¼‰ï¼Œå¹¶åˆ©ç”¨ï¼ˆæ”¹è¿›1â€“Double Q- Learningï¼‰è®¡ç®—æ–°çš„ç›®æ ‡å€¼</p>d_t^n=(R_t^n+r_t^nz,p_\hat\theta(S_{t+n},a^*_{t+n}))<p>æŸå¤±å‡½æ•°ä¸º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo>(</mo><msub><mi mathvariant="normal">Î¦</mi><mi>z</mi></msub><msubsup><mi>d</mi><mi>t</mi><mi>n</mi></msubsup><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><msub><mi>d</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">D_{KL}(\Phi_zd_t^n||d_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="mord mathit">L</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathrm">Î¦</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">d</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">d</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>åŒæ—¶åœ¨é‡‡æ ·è¿‡ç¨‹ä¸­æˆ‘ä»¬é€šå¸¸ä¼šå‡å°‘TD-errorï¼Œè€Œåœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬çš„æŸå¤±å‡½æ•°ä¸ºKLæŸå¤±ï¼Œå› æ­¤æˆ‘ä»¬çš„ï¼ˆæ”¹è¿›2ï¼šPrioritized replayï¼‰ä¸­çš„ä¼˜å…ˆçº§å®šä¹‰ä¸º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>t</mi></msub><mo>âˆ</mo><mo>(</mo><msub><mi>D</mi><mrow><mi>K</mi><mi>L</mi></mrow></msub><mo>(</mo><msub><mi mathvariant="normal">Î¦</mi><mi>z</mi></msub><msubsup><mi>d</mi><mi>t</mi><mi>n</mi></msubsup><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><msub><mi>d</mi><mi>t</mi></msub><mo>)</mo><msup><mo>)</mo><mi>w</mi></msup></mrow><annotation encoding="application/x-tex">p_t\propto (D_{KL}(\Phi_zd_t^n||d_t))^w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆ</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="mord mathit">L</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathrm">Î¦</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">d</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">d</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>åŒæ—¶æ”¹å˜ï¼ˆæ”¹è¿›3: Dueling networksï¼‰ç”±æ¥å—æœŸæœ›è½¬å‘æ¥å—ä»·å€¼å‡½æ•°åˆ†å¸ƒï¼Œæœ€åæ›´æ”¹æ‰€æœ‰çš„çº¿æ€§å±‚æ›´æ¢ä¸ºï¼ˆæ”¹è¿›6ï¼šNoisy Netsï¼‰</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><msup><mo>)</mo><mi>i</mi></msup><mo>=</mo><mfrac><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><msubsup><mi>v</mi><mi>Î·</mi><mi>i</mi></msubsup><mo>(</mo><mi>Ï•</mi><mo>)</mo><mo>+</mo><msubsup><mi>a</mi><mi>Ïˆ</mi><mi>i</mi></msubsup><mo>(</mo><mi>Ï•</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>âˆ’</mo><msubsup><mover accent="true"><mi>a</mi><mo>^</mo></mover><mi>Ïˆ</mi><mi>i</mi></msubsup><mo>(</mo><mi>s</mi><mo>)</mo><mo>)</mo></mrow><mrow><msub><mi mathvariant="normal">Î£</mi><mi>j</mi></msub><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><msubsup><mi>v</mi><mi>Î·</mi><mi>j</mi></msubsup><mo>(</mo><mi>Ï•</mi><mo>)</mo><mo>+</mo><msubsup><mi>a</mi><mi>Ïˆ</mi><mi>j</mi></msubsup><mo>(</mo><mi>Ï•</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>âˆ’</mo><msubsup><mover accent="true"><mi>a</mi><mo>^</mo></mover><mi>Ïˆ</mi><mi>j</mi></msubsup><mo>(</mo><mi>s</mi><mo>)</mo><mo>)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">p_\theta(s,a)^i=\frac{exp(v^i_\eta(\phi)+a^i_\psi(\phi,a)-\hat a_\psi^i(s))}{\Sigma_j exp(v^j_\eta(\phi)+a^j_\psi(\phi,a)-\hat a_\psi^j(s)) }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.63388em;"></span><span class="strut bottom" style="height:2.903868em;vertical-align:-1.269988em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.832572em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="vlist"><span style="top:0.116592em;margin-left:-0.03588em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Î·</span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">Ï•</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.3013079999999999em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Ïˆ</span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">Ï•</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit">a</span></span><span style="top:0em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.3013079999999999em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Ïˆ</span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.8092159999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Î·</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">Ï•</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.2831079999999999em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Ïˆ</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">Ï•</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit">a</span></span><span style="top:0em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.2831079999999999em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Ïˆ</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><h2 id="0x04-å®éªŒ"><a class="markdownIt-Anchor" href="#0x04-å®éªŒ"></a> 0x04 å®éªŒ</h2><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-095019.png" alt="Median human- normalized performance" /></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-094444.png" alt="ç»“æœ" /></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-06-095358.png" alt="image-20221106175357633" /></p><h2 id="0x05-æ€»ç»“"><a class="markdownIt-Anchor" href="#0x05-æ€»ç»“"></a> 0x05 æ€»ç»“</h2><h3 id="51-ç»“è®º"><a class="markdownIt-Anchor" href="#51-ç»“è®º"></a> 5.1 ç»“è®º</h3><ol><li>rainbowæƒ³æ¯”è¾ƒå…¶ä»–ç°æœ‰çš„ç®—æ³•è¦æ›´å¥½ï¼Œé€Ÿåº¦ä¹Ÿä¼šæ›´å¿«</li><li>åœ¨æ¶ˆèå®ç°ä¸­ï¼›æˆ‘ä»¬ä¼šå‘ç°ï¼ˆæ”¹è¿›2ï¼šPrioritized replayï¼‰ä¸ï¼ˆæ”¹è¿›4:Multi-step learningï¼‰ä¼šé€ æˆç»“æœä¸­ä½æ•°å¤§å¹…åº¦ä¸‹é™;(æ”¹è¿›5:Distributional RL)åœ¨æœ€å¼€å§‹è¡¨ç°è‰¯å¥½ï¼Œä½†æ˜¯æœ€ç»ˆç»“æœè¡¨ç°è¾ƒå·®ï¼›åŒæ—¶ï¼ˆæ”¹è¿›6ï¼šNoisy Netsï¼‰é€šå¸¸ä¼šæœ‰æ›´å¥½çš„ä¸­ä½æ•°è¡¨ç°ï¼ŒåŒæ—¶ç”±äºæœ¬æ¬¡çŠ¶æ€ä¸­é€šå¸¸æ˜¯underestimateçš„ï¼Œæ‰€ä»¥ï¼ˆæ”¹è¿›1â€“Double Q- Learningï¼‰æ•ˆæœå¹¶ä¸æ˜¾è‘—ï¼Œï¼ˆæ”¹è¿›3: Dueling networksï¼‰æå‡å¹…åº¦ä¸å¤§ã€‚</li></ol><h3 id="52-è®¨è®º"><a class="markdownIt-Anchor" href="#52-è®¨è®º"></a> 5.2 è®¨è®º</h3><p>ä½œè€…åœ¨æœ€åæ€»ç»“ä»–ä»¬çš„å·¥ä½œï¼Œä¸»è¦æ˜¯ä»value- basedçš„Q-learningæ–¹æ³•é›†åˆä¸­å¯»æ‰¾ï¼Œè€Œæ²¡æœ‰è€ƒè™‘purely policy- basedçš„ç®—æ³•ï¼ˆæ¯”å¦‚TRPO),æœ¬æ–‡ä»ç½‘ç»œæ¢ç´¢ã€ç½‘ç»œåˆå§‹åŒ–ã€æ•°æ®ä½¿ç”¨ã€æŸå¤±æˆ–å‡½æ•°ç­‰æ–¹é¢è¿›è¡Œé›†åˆï¼Œä¸ä¹‹ç›¸å¯¹åº”çš„åŒæ ·æœ‰å¾ˆå¤šå·¥ä½œï¼Œæœªæ¥è¿˜å¯ä»¥ç”¨å¾ˆå¤šå…¶ä»–çš„æ–¹æ³•ã€‚ä½†æ˜¯æˆ‘ä»¬ç›¸ä¿¡</p><blockquote><p>In general, we believe that exposing the real game to the agent is a promising direction for future research.</p></blockquote><h3 id="53-ä¸ªäººæ„Ÿæ‚Ÿ"><a class="markdownIt-Anchor" href="#53-ä¸ªäººæ„Ÿæ‚Ÿ"></a> 5.3 ä¸ªäººæ„Ÿæ‚Ÿ</h3><p>è¿™ç¯‡è®ºæ–‡çœ‹ä¸Šå»å¾ˆæ°´ï¼Œä½†å…¶å®ä½œè€…åšäº†å¾ˆå¤šdirty workå¹¶æœ€ç»ˆæœ‰æ•ˆï¼Œå·¥ä½œé‡éå¸¸å¤§ï¼</p><p>ã€1ã€‘<span name = "DQN"><a href="https://arxiv.org/abs/1312.5602">Mnih, V., Kavukcuoglu, K., Silver, D., Graves, A., Antonoglou, I., Wierstra, D., &amp; Riedmiller, M. (2013). Playing atari with deep reinforcement learning. <em>arXiv preprint arXiv:1312.5602</em>.</a></span></p><p>ã€2ã€‘<span name = "DDQN"><a href="http://arxiv.org/abs/1509.06461">Van Hasselt, H., Guez, A., &amp; Silver, D. (2016, March). Deep reinforcement learning with double q-learning. In <em>Proceedings of the AAAI conference on artificial intelligence</em> (Vol. 30, No. 1).</a></span></p><p>ã€3ã€‘ <span name = "Prioritized experience replay"> <a href="https://arxiv.org/abs/1511.05952">Schaul, T., Quan, J., Antonoglou, I., &amp; Silver, D. (2015). Prioritized experience replay. <em>arXiv preprint arXiv:1511.05952</em>.</a></span></p><p>ã€4ã€‘<span name = "Multistep"><a href="https://www.cs.mcgill.ca/~dprecup/courses/RL/Lectures/8-multistep-2019.pdf">Multi StepÂ Learning</a></span></p><p>ã€5ã€‘<span name = "Dueling"><a href="https://arxiv.org/abs/1511.06581">Wang, Z., Schaul, T., Hessel, M., Hasselt, H., Lanctot, M., &amp; Freitas, N. (2016, June). Dueling network architectures for deep reinforcement learning. In <em>International conference on machine learning</em> (pp. 1995-2003). PMLR.</a></span></p><p>ã€6ã€‘<span name = "Distributional"><a href="https://arxiv.org/pdf/1707.06887.pdf">Bellemare, M. G., Dabney, W., &amp; Munos, R. (2017, July). A distributional perspective on reinforcement learning. In <em>International Conference on Machine Learning</em> (pp. 449-458). PMLR.</a></span></p><p>ã€7ã€‘<span name = "NoisyDQN"><a href="https://arxiv.org/abs/1706.10295">Fortunato, M., Azar, M. G., Piot, B., Menick, J., Osband, I., Graves, A., â€¦ &amp; Legg, S. (2017). Noisy networks for exploration. <em>arXiv preprint arXiv:1706.10295</em>.</a></span></p><h2 id="è‡ªæˆ‘ä»‹ç»"><a class="markdownIt-Anchor" href="#è‡ªæˆ‘ä»‹ç»"></a> è‡ªæˆ‘ä»‹ç»</h2><p>50ï½100å­—</p>]]></content>
    
    
    <categories>
      
      <category>Paper</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS285_Lecture08_Deep_RL_with_QFunctions</title>
    <link href="/posts/81031871.html"/>
    <url>/posts/81031871.html</url>
    
    <content type="html"><![CDATA[<p>ä»Policy gradientï¼Œåˆ°Actor- criticï¼Œæˆ‘ä»¬å°è¯•ä¸¢å¼ƒpolicyï¼Œä»ACåˆ°Q- iterationæˆ–è€…Q- learningæˆ‘ä»¬å½»åº•ä¸¢å¼ƒPolicyï¼Œä½†æ˜¯é‡åˆ°ä¸èƒ½æ”¶æ•›çš„é—®é¢˜ã€‚ç°åœ¨æˆ‘ä»¬å°è¯•æ”¹è¿›Q- learningæ¥å®ç°æƒ³è¦çš„åŠŸèƒ½</p><span id="more"></span><h2 id="0x01-q-learningä¸­çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#0x01-q-learningä¸­çš„é—®é¢˜"></a> 0x01 Q- learningä¸­çš„é—®é¢˜</h2><p>ä¸Šæ¬¡ä»ç†è®ºçš„è§’åº¦çœ‹å‡ºonline Q iterationå¾ˆéš¾æ”¶æ•›ï¼Œæ›´ç›´è§‚çš„çœ‹å¾…é—®é¢˜æˆ‘ä»¬ä¼šå‘ç°æœ‰ä»¥ä¸‹å‡ ç‚¹çš„åŸå› ï¼š</p><ol><li>Q- learningä¸­é€šå¸¸ä½¿ç”¨çš„æ˜¯å•ä¸ªæ ·æœ¬ï¼Œè¿™æ ·å¯¹äºæ›´æ–°è¿­ä»£å¹¶ä¸å‹å¥½</li><li>åœ¨ç¬¬ä¸‰æ­¥ä¸­çš„æœ‰ä¸€ä¸ªç±»ä¼¼gradient descentçš„å…¬å¼ä½†æ˜¯å…¶å®åœ¨åŒä¸€ä¸ªè½¨è¿¹ä¸­ä¸¤è€…ä¹‹é—´å…·æœ‰å¼ºçƒˆç›¸å…³æ€§</li><li>ä¸æ»¡è¶³iidå‡è®¾æ ·æœ¬ä¸­çš„æ•ˆæœå¹¶ä¸å¥½</li></ol><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-143452.png" alt="image-20221102223452106" /></p><p>è§£å†³æ€è·¯</p><ol><li>ä¿®æ­£æ ·æœ¬ï¼ŒåŒæ ·å€Ÿé‰´ACä¸­çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨synchronized parallel Q- learningæˆ–è€…asynchronous parallel Q- learningæ¥å®ç°ã€‚</li><li>ä½¿ç”¨replay buffersï¼Œå› ä¸ºQ- learningåªéœ€è¦ï¼ˆstateï¼Œactionï¼Œnext- stateï¼Œrewardï¼‰å°±è¡Œ</li></ol><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-143917.png" alt="image-20221102223917061" /></p><h3 id="0x02-q-learning-with-replay-bufferçš„é—®é¢˜"><a class="markdownIt-Anchor" href="#0x02-q-learning-with-replay-bufferçš„é—®é¢˜"></a> 0x02 Q-learning with replay- bufferçš„é—®é¢˜</h3><p>æŒ‰ç…§å‚é‡Œåé¢çš„ä¸€éƒ¨ä»½åº”è¯¥æ˜¯æ²¡æœ‰æ¢¯åº¦çš„ï¼Œä½†æ˜¯å› ä¸ºä¸¤è€…å…·æœ‰ç›¸å…³æ€§æˆ‘ä»¬çš„æ•ˆæœä¼šå¾ˆå·®ï¼Œèµ·ä¸åˆ°æ¢¯åº¦ä¸‹é™çš„æ•ˆæœã€‚</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-144124.png" alt="image-20221102224124136" /></p><p>å› æ­¤æˆ‘ä»¬ä¼šè®¾ç½®ä¸€ä¸ªtarget networkï¼Œåœ¨æ¯æ¬¡æ›´æ–°çš„æ—¶å€™ï¼Œtargetä¹Ÿä¸ä¼šæ”¹å˜ï¼ŒåŒæ—¶è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸¤è€…æ˜¯æŸç§æ„ä¹‰ä¸Šçš„ä¸æƒ³å…³çš„ã€‚èƒŒåçš„æ–¹å¼æ˜¯å¯å‘å¼çš„ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯ä¸€ç§ç»éªŒå¾ˆå¥½çš„å®è·µæ–¹æ³•ã€‚é€šå¸¸æ›´æ–°çš„æ—¶å€™å¯ä»¥ç”¨æŒ‡æ•°å¹³å‡çš„æ–¹æ³•</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï„</mi><mo>=</mo><mi>p</mi><msub><mi>Ï„</mi><mn>0</mn></msub><mo>+</mo><mo>(</mo><mn>1</mn><mo>âˆ’</mo><mi>p</mi><mo>)</mo><mo>âˆ—</mo><mi>Ï„</mi></mrow><annotation encoding="application/x-tex">\tau=p\tau_0+(1-p)*\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mord"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.1132em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mclose">)</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span></span></span></span></span></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-145023.png" alt="image-20221102225023533" /></p><p>æ›´é«˜çš„è§†è§’</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-145216.png" alt="image-20221102225216215" /></p><h3 id="0x03-æé«˜q-learning"><a class="markdownIt-Anchor" href="#0x03-æé«˜q-learning"></a> 0x03 æé«˜Q-learning</h3><p>åé¢ç»“åˆä¸€ç¯‡è®ºæ–‡æ¥ä»‹ç»ï¼Œä¹Ÿå°±æ˜¯Rainbowï½</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-145350.png" alt="image-20221102225350693" /></p>]]></content>
    
    
    <categories>
      
      <category>CS285</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS285_Lecture07_Value_Function_Methods</title>
    <link href="/posts/1e3ff77f.html"/>
    <url>/posts/1e3ff77f.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨ç»è¿‡Lecture04ä»‹ç»RLçš„åŸºæœ¬æ¦‚å¿µä¹‹åï¼ŒLecture05ä»‹ç»åŸºäºpolicyçš„æ–¹æ³•ï¼Œæˆ‘ä»¬ç›´æ¥åˆ©ç”¨returnçš„æ¢¯åº¦è¿›è¡Œç­–ç•¥å­¦ä¹ ï¼Œä¹‹åæˆ‘ä»¬å°è¯•åˆ©ç”¨Qæˆ–è€…Væ¥æ”¹è¿›policy evaluationæ­¥éª¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ç›´æ¥æŠ›å¼ƒå‚æ•°åŒ–çš„æ¢¯åº¦ï¼ˆparameterized policiesï¼‰ï¼Œè½¬å‘ä»…ä»…åˆ©ç”¨Qæˆ–è€…Vè¿›è¡ŒRL</p><span id="more"></span><h2 id="0x01-æŠ›å¼ƒactor-criticä¸­çš„actor"><a class="markdownIt-Anchor" href="#0x01-æŠ›å¼ƒactor-criticä¸­çš„actor"></a> 0x01 æŠ›å¼ƒActor- criticä¸­çš„Actor</h2><h3 id="11-å›é¡¾actor-critic"><a class="markdownIt-Anchor" href="#11-å›é¡¾actor-critic"></a> 1.1 å›é¡¾Actor- critic</h3><p>ç¬¬ä¸€æ­¥ï¼šæˆ‘ä»¬åˆ©ç”¨ç°æœ‰çš„policyå¾—åˆ°å¤šä¸ªé‡‡æ ·è½¨è¿¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï„</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\tau_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.1132em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><br />ç¬¬äºŒæ­¥ï¼šåˆ©ç”¨æ•°æ®æ‹Ÿåˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>Ï•</mi><mi>Ï€</mi></msubsup><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\hat V_\phi^\pi(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9467699999999999em;"></span><span class="strut bottom" style="height:1.365986em;vertical-align:-0.4192159999999999em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span><span style="top:-0.25233em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.2831079999999999em;margin-left:-0.22222em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span>ï¼ˆå¸¸è§ç”¨è’™ç‰¹å¡æ´›æ–¹æ³•ã€bootstrappedã€n-stepç­‰æ–¹æ³•ï¼‰<br />ç¬¬ä¸‰æ­¥ï¼šè¯„ä¼°ä¼˜åŠ¿ç­–ç•¥A<br />ç¬¬å››æ­¥ï¼šæ ¹æ®ä¼˜åŠ¿ç­–ç•¥å¾—åˆ°Actorçš„æ¢¯åº¦<br />ç¬¬äº”æ­¥ï¼šæ›´æ–°Actorçš„æ¢¯åº¦</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-134617.png" alt="image-20221102214616955" /></p><p>ä½†æ˜¯è¿™æ ·å­˜åœ¨çš„æ½œåœ¨é—®é¢˜æ˜¯æ–¹å·®å¤ªå¤§ï¼Œå› ä¸ºæˆ‘ä»¬æ‹Ÿåˆå‡ºæ¥çš„state- value- functionæ–¹å·®å¤ªå¤§ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šåšç»éªŒé‡æ”¾ç­‰æ–¹æ³•ï¼Œä½†æ˜¯å¹¶ä¸èƒ½å®Œå…¨è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ‰€ä»¥ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç›´æ¥ä¸¢åˆ°æœ‰å‚çš„policyï¼Œè½¬å‘ç”Ÿæˆä¸€ä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï€</mi><mo>âˆ—</mo></mrow><annotation encoding="application/x-tex">\pi*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.46528em;"></span><span class="strut bottom" style="height:0.46528em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mbin">âˆ—</span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï€</mi><mo>âˆ—</mo><mo>=</mo><mi>a</mi><mi>r</mi><mi>g</mi><mi>m</mi><mi>a</mi><msub><mi>x</mi><mrow><msub><mi>a</mi><mi>t</mi></msub></mrow></msub><msup><mi>A</mi><mi>Ï€</mi></msup><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\pi*=argmax_{a_t}A^\pi(s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.005em;vertical-align:-0.255em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mbin">âˆ—</span><span class="mrel">=</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><h3 id="12-policy-evaluation"><a class="markdownIt-Anchor" href="#12-policy-evaluation"></a> 1.2 Policy Evaluation</h3><p>åœ¨æ¢è®¨ä¸Šè¿°å¯èƒ½æ€§æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹policy evaluationçš„æ¦‚å¿µï¼›ä¹Ÿå°±æ˜¯ä»Dynamic programmingçš„æ¥çœ‹æˆ‘ä»¬ä¼šå¦‚ä½•æ±‚è§£é—®é¢˜ï¼›åŒæ—¶ä»policy evaluationæˆ‘ä»¬ä¼šé€æ¸èµ°å‘value evaluationã€‚</p><p>ç¬¬ä¸€æ­¥ï¼šé¦–å…ˆçŠ¶æ€è½¬ç§»æ¦‚ç‡Tæ˜¯å‡åŒ€çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨Policy evaluation()ä¸­å¾—åˆ°æ¯ä¸ªçŠ¶æ€ä¸‹çš„Q-state-action-listï¼›æ±‚å¹³å‡æ¥å¾—åˆ°V-state-listã€‚å½“ç„¶ä¸€æ¬¡è®¡ç®—ä¸å¤Ÿï¼Œæˆ‘ä»¬ä¼šè®¾ç½®ä¸€ä¸ªepsilonï¼Œå½“V- stateå˜åŒ–çš„æœ€å¤§å€¼éƒ½å°äºè¿™ä¸ªepsilonçš„æ—¶å€™åœæ­¢æ›´æ–°ã€‚è¯´æ˜æˆ‘ä»¬å¾—åˆ°æ‰€æœ‰çŠ¶æ€ä¸‹çš„V- state<br />ç¬¬äºŒæ­¥ï¼šåœ¨å¾—åˆ°V- stateä¸‹æˆ‘ä»¬ä¾¿èƒ½åˆ¤æ–­ä»€ä¹ˆactionæ˜¯å¥½çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åˆ©ç”¨Q- state- actionä¸V- stateä¹‹é—´çš„å…³ç³»æ¥é€‰æ‹©ä¸åŒstateä¸‹çš„æœ€ä¼˜actionï¼Œé‡æ–°åˆ†é…æ¦‚ç‡ï¼Œä¹Ÿå°±æ˜¯policy evaluation<br />ç¬¬ä¸‰æ­¥ï¼šç”±äºpolicy evaluationä¼šé‡æ–°æ”¹å˜ç©ºé—´ã€‚V- stateä¹Ÿä¼šæ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°è®¡ç®—Policy evaluationï¼Œç›´åˆ°æ”¶æ•›ã€‚</p><p>Policy evaluationä¸Value evaluationä¹‹é—´çš„åŒºåˆ«åœ¨äºPolicy evaluationä¸­æ ¹æ®Q- state- value-listå¾—åˆ°V- state-listæ˜¯æ±‚æœŸæœ›ï¼Œè¿˜æ˜¯æ±‚æœ€å¤§å€¼çš„æ–¹å¼ã€‚</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>p</mi><mi>o</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>y</mi><mo>âˆ’</mo><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>)</mo><msup><mi>V</mi><mi>Ï€</mi></msup><mo>(</mo><mi>s</mi><mo>)</mo><mo>=</mo><msub><mi>E</mi><mrow><mi>a</mi><mo>âˆ’</mo><mi>Ï€</mi><mo>(</mo><mi>a</mi><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo>)</mo></mrow></msub><mo>[</mo><mi>r</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>Ï€</mi><mo>(</mo><mi>s</mi><mo>)</mo><mo>)</mo><mo>+</mo><mi>Î³</mi><msub><mi>E</mi><mrow><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>âˆ’</mo><mi>p</mi><mo>(</mo><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>Ï€</mi><mo>(</mo><mi>s</mi><mo>)</mo><mo>)</mo></mrow></msub><mo>[</mo><msup><mi>V</mi><mi>Ï€</mi></msup><mo>(</mo><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>]</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">(policy-iteration)V^\pi(s)=E_{a-\pi(a|s)}[r(s,\pi(s))+\gamma E_{s&#x27;-p(s&#x27;|s,\pi(s))}[V^\pi(s&#x27;)]]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.801892em;"></span><span class="strut bottom" style="height:1.157092em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ’</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">a</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mclose">]</span></span></span></span></span></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-141107.png" alt="image-20221102221107185" /></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>v</mi><mi>a</mi><mi>l</mi><mi>u</mi><mi>e</mi><mo>âˆ’</mo><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>)</mo><msup><mi>V</mi><mi>Ï€</mi></msup><mo>(</mo><mi>s</mi><mo>)</mo><mo>=</mo><mi>m</mi><mi>a</mi><msub><mi>x</mi><mi>a</mi></msub><mi>Q</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>m</mi><mi>a</mi><msub><mi>x</mi><mi>a</mi></msub><mo>(</mo><mi>r</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>+</mo><mi>Î³</mi><msub><mi>E</mi><mrow><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>âˆ’</mo><mi>p</mi><mo>(</mo><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow></msub><mo>[</mo><msup><mi>V</mi><mi>Ï€</mi></msup><mo>(</mo><msup><mi>s</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>]</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">(value-iteration)V^\pi(s)=max_aQ(s,a)=max_a(r(s,a)+\gamma E_{s&#x27;-p(s&#x27;|s,a)}[V^\pi(s&#x27;)])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.801892em;"></span><span class="strut bottom" style="height:1.157092em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">u</span><span class="mord mathit">e</span><span class="mbin">âˆ’</span><span class="mord mathit">i</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">a</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">a</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></span></p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-141125.png" alt="image-20221102221124987" /></p><p>è¿™é‡Œå‚è€ƒï¼Œå¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºpolicy evaluationï¼Œä»¥åŠvalue evaluationå¯¹å…¶åšäº†ä»€ä¹ˆç®€åŒ–</p><p><a href="https://hrl.boyuai.com/chapter/1/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95">åŠ¨æ‰‹å­¦å¼ºåŒ–å­¦ä¹ - Dynamic Programming</a></p><h2 id="0x02-fitted-value-iteration-and-q-iteration"><a class="markdownIt-Anchor" href="#0x02-fitted-value-iteration-and-q-iteration"></a> 0x02 Fitted value  iteration and Q- iteration</h2><h3 id="21-æˆ‘ä»¬å¦‚ä½•è¡¨ç¤ºstate-value-function-vs"><a class="markdownIt-Anchor" href="#21-æˆ‘ä»¬å¦‚ä½•è¡¨ç¤ºstate-value-function-vs"></a> 2.1 æˆ‘ä»¬å¦‚ä½•è¡¨ç¤ºstate- value- function V(s)</h3><p>åœ¨æ•°é‡è¾ƒå°‘çš„ç¦»æ•£ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¡¨æ ¼æˆ–è€…ä»€ä¹ˆæ¥è®°å½•ï¼Œä½†æ˜¯å¯¹äºè¿ç»­ç©ºé—´æˆ‘ä»¬å¯èƒ½æ— èƒ½ä¸ºåŠ›ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>ç¥ç»ç½‘ç»œæ¥å®ç°ä¸¤è€…çš„è¿‘ä¼¼</strong>ï¼Œä¹Ÿå°±æ˜¯è½¬æ¢ä¸º</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-141230.png" alt="image-20221102221230276" /></p><h3 id="22-ä»ç„¶æœ‰é—®é¢˜"><a class="markdownIt-Anchor" href="#22-ä»ç„¶æœ‰é—®é¢˜"></a> 2.2 ä»ç„¶æœ‰é—®é¢˜</h3><p>å› ä¸ºåœ¨ç¦»æ•£çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“çŠ¶æ€æ¦‚ç‡è½¬ç§»æ–¹å¼ã€‚æˆ‘ä»¬ä¼šå‡è®¾ä¸€ä¸ªå¹³å‡æ¦‚ç‡å†é‡æ–°åˆ†é…çš„æ–¹å¼æ¥æ›´æ–°è½¬ç§»æ¦‚ç‡ã€‚ä½†æ˜¯åœ¨è¿ç»­æƒ…å†µä¸‹è™½ç„¶æˆ‘ä»¬çŸ¥é“æ‹Ÿåˆæ‹Ÿåˆå‡ºstate- value- functionï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜ä¸çŸ¥é“çŠ¶æ€è½¬ç§»æ¦‚ç‡ï¼Œæ‰€ä»¥æˆ‘ä»¬æ±‚è§£ä¸å‡ºstate- value- function</p><p>ä½†æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦state- functionï¼Ÿç›´æ¥åˆ©ç”¨state- action- functionæ¥å–æœ€å¤§å€¼å°±è¡Œ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Q</mi><mi>Ï€</mi></msup><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>r</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>+</mo><mi>Î³</mi><mo>âˆ—</mo><mi>m</mi><mi>a</mi><msub><mi>x</mi><mrow><msup><mi>a</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><msub><mi>Q</mi><mi>Ï•</mi></msub><mo>(</mo><msubsup><mi>s</mi><mi>i</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mi>i</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow><annotation encoding="application/x-tex">Q^\pi(s,a)=r(s,a)+\gamma *max_{a&#x27;}Q_\phi(s_i&#x27;,a_i&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8018919999999999em;"></span><span class="strut bottom" style="height:1.0879999999999999em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mbin">âˆ—</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>ä½†æ˜¯è¿™æ ·æˆ‘ä»¬å¹¶ä¸èƒ½ä¿è¯æ”¶æ•›æ€§</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-141837.png" alt="image-20221102221836862" /></p><h2 id="0x03-q-learning-method"><a class="markdownIt-Anchor" href="#0x03-q-learning-method"></a> 0x03 Q- learning method</h2><h3 id="31-q-iteration-çš„ä¸€äº›æ€§è´¨"><a class="markdownIt-Anchor" href="#31-q-iteration-çš„ä¸€äº›æ€§è´¨"></a> 3.1 Q-iteration çš„ä¸€äº›æ€§è´¨</h3><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-142232.png" alt="image-20221102222232800" /></p><ol><li>å®ƒæ˜¯off- policyçš„</li><li>ç­‰ä»·ä¼˜åŒ–bellman error</li></ol><h3 id="32-online-q-learning"><a class="markdownIt-Anchor" href="#32-online-q-learning"></a> 3.2 Online Q- learning</h3><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-142533.png" alt="image-20221102222533482" /></p><p>é€šå¸¸ä¼šéœ€è¦ä¸€äº›exploration</p><ol><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïµ</mi><mo>âˆ’</mo><mi>g</mi><mi>r</mi><mi>e</mi><mi>e</mi><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">\epsilon-greedy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Ïµ</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span></li><li>Boltzman exploration</li></ol><h2 id="0x04-value-functions-in-theory"><a class="markdownIt-Anchor" href="#0x04-value-functions-in-theory"></a> 0x04 Value Functions in Theory</h2><p>æˆ‘ä»¬éœ€è¦å°è¯•è§£é‡Šä¹‹å‰å–æœ€å¤§å€¼çš„æ–¹å¼æ˜¯å¦å¯ä»¥æ”¶æ•›ï¼ˆconvergeï¼‰</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-142722.png" alt="image-20221102222722182" /></p><ol><li>MDPä¸­çš„bellmanä¸€å®šæ˜¯æ”¶æ•›çš„</li><li>åœ¨åˆ©ç”¨è¿‘ä¼¼ç½‘ç»œï¼ˆfunction approximationï¼‰çš„æ–¹å¼ä¸‹å¹¶ä¸æ”¶æ•›</li></ol><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-11-02-143053.png" alt="image-20221102223053608" />æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªéå¸¸sad corollaryï¼Œä½†æ˜¯åœ¨ä¸‹ä¸€å¼ çš„DQNä¸­å¯ä»¥è®©å®ƒå˜çš„æ›´å¥½</p>]]></content>
    
    
    <categories>
      
      <category>CS285</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS285_Lecture06_Actor_Critic_Algorithms</title>
    <link href="/posts/d30aca79.html"/>
    <url>/posts/d30aca79.html</url>
    
    <content type="html"><![CDATA[<p>ä¸»è¦ä»‹ç»æ¼”å‘˜è¯„è®ºå®¶è¿‡ç¨‹,ä»æœ€åŸºç¡€çš„Policy Gradientä¸­å‰–æå¦‚ä½•æ‹ŸåˆPolicy Evaluationçš„éƒ¨åˆ†ï¼Œå¹¶æ¨å¯¼å¾—åˆ°Actor- Criticç®—æ³•ã€‚å¯ä»¥çœ‹å‡ºä»ä¹‹å‰ç›´è§‚çš„Policyï¼Œåˆ°åˆ©ç”¨state- valueæˆ–è€…action- state- valueè¿›è¡Œè¿‘ä¼¼ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­é‡‡æ ·ç»“æœä¸ç†è®ºæ¨å¯¼çš„æƒè¡¡è´¯ç©¿ç†è®ºæ¨å¯¼è¿‡ç¨‹ã€‚åœ¨è¿™ä¸ªåŸºç¡€ä¸Šä¹Ÿä¼šå¼•æ¥ä¸‹ä¸€èŠ‚Lecture07å…³äºvalue functionæ–¹æ³•ã€‚åŒæ—¶çªç„¶æœ‰ä¸ªæ–°çš„æƒ³æ³•ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ä»£ç éƒ½éœ€è¦æ‰‹æ’•ï¼Œbaseline is always thereï¼</p><span id="more"></span><h2 id="0x01-ä»ç­–ç•¥æ¢¯åº¦policy-gradientåˆ°è¯„åˆ¤å®¶critic"><a class="markdownIt-Anchor" href="#0x01-ä»ç­–ç•¥æ¢¯åº¦policy-gradientåˆ°è¯„åˆ¤å®¶critic"></a> 0x01 ä»ç­–ç•¥æ¢¯åº¦ï¼ˆPolicy Gradientï¼‰åˆ°è¯„åˆ¤å®¶ï¼ˆCriticï¼‰</h2><h3 id="11-å›é¡¾reinforceç®—æ³•"><a class="markdownIt-Anchor" href="#11-å›é¡¾reinforceç®—æ³•"></a> 1.1 å›é¡¾REINFORCEç®—æ³•</h3><p>ä»å¼ºåŒ–å­¦ä¹ çš„ä¸‰æ­¥èŒƒå¼å‡ºå‘ï¼š</p><p>ç¬¬ä¸€æ­¥ï¼šé€šè¿‡è¿è¡Œç­–ç•¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">Î </mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\Pi_\theta(a_t|s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">Î </span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>å¾—åˆ°å¤šä¸ªæ ·æœ¬<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><msub><mi>Ï„</mi><mi>i</mi></msub><mo>}</mo></mrow><annotation encoding="application/x-tex">\{\tau_i\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.1132em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">}</span></span></span></span></p><p>ç¬¬äºŒæ­¥ï¼šæ ¹æ®é‡‡æ ·æ ·æœ¬ï¼ˆSampleï¼‰å¾—åˆ°ç­–ç•¥çš„æ¢¯åº¦</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><mo>[</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo><mo>]</mo><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mi>T</mi></msubsup><mi>r</mi><mo>(</mo><msubsup><mi>s</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><mi>i</mi></msubsup><mo separator="true">,</mo><msubsup><mi>a</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><mi>i</mi></msubsup><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\nabla_\theta J(\theta)=\frac{1}{N}\Sigma_{i=1}^N\Sigma_{t=1}^T [\nabla_\theta log \pi_\theta(a_{i,t}|s_{i,t})][\Sigma_{t&#x27;=t}^Tr(s_{t&#x27;}^i,a_{t&#x27;}^i)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>=</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><mo>[</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo><mo>]</mo><mo>[</mo><msub><mover accent="true"><mi>Q</mi><mo>^</mo></mover><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">=\nabla_\theta J(\theta)=\frac{1}{N}\Sigma_{i=1}^N\Sigma_{t=1}^T [\nabla_\theta log \pi_\theta(a_{i,t}|s_{i,t})][\hat Q_{i,t}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mrel">=</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit">Q</span></span><span style="top:-0.25233em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span></span></p><p>ç¬¬ä¸‰æ­¥ï¼šæ¢¯åº¦ä¸Šå‡</p><h3 id="12-å›é¡¾æ¢¯åº¦å…¬å¼"><a class="markdownIt-Anchor" href="#12-å›é¡¾æ¢¯åº¦å…¬å¼"></a> 1.2 å›é¡¾æ¢¯åº¦å…¬å¼</h3><p>æ¢¯åº¦å…¬å¼ä¸­çš„logé¡¹ç›®åœ¨REINFORCEMENTä¸­å·²ç»è¯¦ç»†æ¨å¯¼è¿‡ï¼Œç›¸å½“äºæ˜¯LIkelihoodçš„ä¸€ç§åŠ æƒï¼›è€Œåé¢çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mi>Q</mi><mo>^</mo></mover><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\hat Q_{i,t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9467699999999999em;"></span><span class="strut bottom" style="height:1.232878em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit">Q</span></span><span style="top:-0.25233em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ä»£è¡¨çš„æ˜¯æˆ‘ä»¬åœ¨è½¨è¿¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï„</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\tau_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.1132em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ä¸­æ—¶é—´tä¸­çŠ¶æ€<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">s_{i,t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>é‡‡å–<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">a_{i,t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æ‰€å¾—åˆ°çš„åç»­state- actionæœŸæœ›å¥–åŠ±ï¼ˆexcepted rewardï¼‰ï¼›ä¸‹é¢æ˜¯çœŸå®çš„reward to goï¼Œæ³¨æ„å’Œé‡‡æ ·æ—¶å€™çš„åŒºåˆ«</p>ï¼ˆç†è®ºstate- action-valueï¼‰Q(s_t,a_t)=\Sigma_{t'=t}^TE\pi_\theta[r(s_{t'},a_{t'})|s_t,a_t]<p>ä¸è¦å¿˜è®°æˆ‘ä»¬çš„baselineï¼Œå®ƒå¯ä»¥èµ·åˆ°é™ä½æ–¹å·®çš„ä½œç”¨ã€‚æˆ‘ä»¬å¯ä»¥å°†baselineåŠ åˆ°REINFORCEMENTç®—æ³•ä¸­ã€‚åŒæ—¶å¯ä»¥è®¾ç½®æˆä¸ºä¸€ä¸ªä¸çŠ¶æ€æœ‰å…³çš„å€¼ï¼Œè¯¦ç»†è§ä¸Šä¸€ä¸ªLecture</p>ï¼ˆç†è®ºstate- valueï¼‰V(s_t)=E_{a_t-\pi_\theta(a_t|s_t)}Q(s_t,a_t)<p>ä»¥ä¸Šæ˜¯ç†è®ºçš„æ¨å¯¼</p><p>æˆ‘ä»¬åœ¨å®é™…é‡‡æ ·ä¸­å¾€å¾€åªèƒ½ä»æœ‰é™çš„æ ·æœ¬ä¸­å¾—åˆ°ï¼Œæ‰€ä»¥å¯¹äºæŸä¸ªé‡‡æ ·è½¨è¿¹å¾—åˆ°çš„æ¢¯åº¦å¯ä»¥è®¡ç®—ä¸ºï¼š</p>ï¼ˆé‡‡æ ·æ¢¯åº¦ï¼‰\nabla_\theta J(\theta)=\frac{1}{N}\Sigma_{i=1}^N\Sigma_{t=1}^T \nabla_\theta log \pi_\theta(a_{i,t}|s_{i,t})[Q(s_{i,t},a_{i,t})-V(S_{i,t})]<p>æ³¨æ„è¿™é‡Œçš„Nä»£è¡¨çš„æ˜¯æ€»å…±æœ‰iä¸ªè½¨è¿¹ï¼Œé‡‡æ ·å’Œç†è®ºä¹‹é—´çš„åŒºåˆ«ï¼Œæ›´è¿‘ä¸€æ­¥æˆ‘ä»¬å¯ä»¥å°†ï¼šã€æŸä¸ªçŠ¶æ€ä¸‹çš„åŠ¨ä½œæ€»å¥–åŠ±ã€‘å‡å»ã€æŸä¸ªçŠ¶æ€ä¸‹çš„æ‰€æœ‰åŠ¨ä½œæœŸæœ›ã€‘å¯ä»¥å®šä¹‰ä¸ºè¿™ä¸ªã€ç‰¹å®šåŠ¨ä½œåœ¨è¯¥çŠ¶æ€ä¸‹çš„ä¼˜åŠ¿ã€‘</p>ï¼ˆç†è®ºaction- stateä¼˜åŠ¿ï¼‰A^\pi(s_t,a_t)=Q^\pi(s_t,a_t)-V^\pi(s_t)<p>åŒæ ·çš„å’Œæˆ‘ä»¬ä¸çŸ¥é“Qå’ŒVä¸€æ ·ï¼Œæˆ‘ä»¬é€šå¸¸ä¹Ÿä¸çŸ¥é“Açš„å®é™…ä»·å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨è¿‘ä¼¼ï¼ˆapproximateï¼‰çš„æ–¹æ³•æ¥è¿‘ä¼¼å®ƒï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„estimate returnã€‚é€šå¸¸å¦‚æœæˆ‘ä»¬çš„é‡‡æ ·æ–¹å¼åªæ˜¯å•çº¯çš„è’™ç‰¹å¡æ´›é‡‡æ ·ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç»“æœå¾€å¾€æ˜¯ï¼šæ— åå·®ä½†æ˜¯é«˜æ–¹å·®çš„ç®€å•é‡‡æ ·ä¼°è®¡ã€‚</p><h2 id="0x02-æ¢¯åº¦è¯„ä¼°policy-evaluation"><a class="markdownIt-Anchor" href="#0x02-æ¢¯åº¦è¯„ä¼°policy-evaluation"></a> 0x02 æ¢¯åº¦è¯„ä¼°ï¼ˆPolicy Evaluationï¼‰</h2><p>åœ¨ä¸Šè¿°æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨REINFORCEMENTé‡Œé¢å¯¹äºpolicy gradientæˆ‘ä»¬é€šå¸¸æ˜¯ä½¿ç”¨ã€æ ·æœ¬ä¸­ç‰¹å®šçš„å¥–åŠ±æ±‚å’Œã€‘ï¼Œè¿™æ ·å¸¦æ¥çš„ç»“æœæ˜¯å› ä¸ºæˆ‘ä»¬é‡‡æ ·çš„è¯¯å·®æ€§å¯¼è‡´æœ€ç»ˆç»“æœå…·æœ‰high varianceï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯èƒ½å¸Œæœ›ï¼š</p><p>ä¸ºä»€ä¹ˆä¸æŠŠè¿™ä¸ªå‡½æ•°æ‹Ÿåˆå‡ºæ¥ï¼Ÿ------&gt; value function fitting</p><p>å¦‚æœæˆ‘ä»¬å¸Œæœ›æ‹Ÿåˆå‡½æ•°ï¼Œä¸Šè¿°çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Q</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo separator="true">,</mo><mi>V</mi><mo>(</mo><mi>s</mi><mo>)</mo><mo separator="true">,</mo><mi>A</mi><mo>(</mo><mi>a</mi><mo separator="true">,</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Q(s,a),V(s),A(a,s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Q</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit">A</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mpunct">,</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span>ä¸­ä¼šé€‰æ‹©å“ªä¸ªå‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Q</mi><mi>Ï€</mi></msup><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mi>T</mi></msubsup><msub><mi>E</mi><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mo>[</mo><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">Q^\pi(s,a)=\Sigma_{t&#x27;=t}^TE_{\pi_\theta}[r(s_{t&#x27;},a_{t&#x27;})|s,a]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.1471909999999998em;vertical-align:-0.25586em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">]</span></span></span></span></span></p><p>ä½†æ˜¯ç”±äºå½“å‰çš„çŠ¶æ€æˆ‘ä»¬çŸ¥é“ï¼Œæ‰€ä»¥å¯ä»¥å†™æˆ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Q</mi><mi>Ï€</mi></msup><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>r</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>+</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi><mo>+</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi>E</mi><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mo>[</mo><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">Q^\pi(s,a)=r(s,a)+\Sigma_{t&#x27;=t+1}^TE_{\pi_\theta}[r(s_{t&#x27;},a_{t&#x27;})|s,a]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.891331em;"></span><span class="strut bottom" style="height:1.196662em;vertical-align:-0.305331em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">]</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Q</mi><mi>Ï€</mi></msup><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>r</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>+</mo><msub><mi>E</mi><mrow><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>âˆ’</mo><mi>p</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><msup><mi>V</mi><mi>Ï€</mi></msup><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow></msub></mrow><annotation encoding="application/x-tex">Q^\pi(s,a)=r(s,a)+E_{s_{t+1}-p(s_{t+1}|s_t,a_t)V^\pi(s_{t+1})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.1052em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°åœ¨ç†è®ºæƒ…å†µä¸‹åŸæ¥çš„policy gradientä¸º</p>ï¼ˆç†è®ºä¼˜åŠ¿ï¼‰A^\pi(s_t,a_t)=r(s,a)+E_{s_{t+1}-p(s_{t+1}|s_t,a_t)V^\pi(s_{t+1})}-V^\pi(s_t)<p>åœ¨é‡‡æ ·æƒ…å†µä¸‹</p>ï¼ˆé‡‡æ ·ä¼˜åŠ¿ï¼‰A^\pi(s_t,a_t)=r(s,a)+V^\pi(s_{t+1})-V^\pi(s_t)<h3 id="21-policy-evaluation-based-on-monte-carlo-sampling"><a class="markdownIt-Anchor" href="#21-policy-evaluation-based-on-monte-carlo-sampling"></a> 2.1 Policy evaluation based on Monte Carlo sampling</h3><p>æˆ‘ä»¬çŸ¥é“</p>ï¼ˆç†è®ºstate- valueï¼‰V(s_t)=E_{a_t-\pi_\theta(a_t|s_t)}Q(s_t,a_t)<p>æ‰€ä»¥æˆ‘ä»¬çš„policyè¯„ä»·å°±æ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>âˆ’</mo><mi>a</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>(</mo><mi>p</mi><mi>o</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>y</mi><mo>)</mo><mo>)</mo><mi>J</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><msub><mi>E</mi><mrow><msub><mi>s</mi><mn>1</mn></msub><mo>âˆ’</mo><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>s</mi><mo>)</mo></mrow></msub><mo>[</mo><msup><mi>V</mi><mi>Ï€</mi></msup><mo>(</mo><msub><mi>s</mi><mn>1</mn></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">(state-action(policy))J(\theta)=E_{s_1-p_\theta(s)}[V^\pi(s_1)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.1052em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mbin">âˆ’</span><span class="mord mathit">a</span><span class="mord mathit">c</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">i</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mclose">)</span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>å¦‚æœæˆ‘ä»¬åªæ˜¯ä»é‡‡æ ·çš„æ–¹å¼æ¥å¾—åˆ°æˆ‘ä»¬çš„ä¼°è®¡ï¼Œé‚£ä¹ˆ</p>ï¼ˆé‡‡æ ·ï¼‰V^\pi(s_t)=\Sigma_{t'=t}^Tr(s_{t'},a_{t'})<p>è™½ç„¶ä¸æƒ³ç†è®ºæ¨å¯¼é‚£æ ·çš„ä¼˜ç§€ï¼Œä½†æ˜¯åŒæ ·æ˜¯æœ‰æ•ˆçš„ã€‚æ³¨æ„è¿™é‡Œçš„è¿‡ç¨‹æ˜¯æˆ‘ä»¬ä»REINFORCEMENTé‡Œé¢å•çº¯çš„ä½¿ç”¨é‡‡æ ·ç»“æœï¼Œè½¬å‘æ„å»ºä¸€ä¸ªstate- based- functionï¼Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯æ ¹æ®æ ·æœ¬æ‹Ÿåˆè¿™æ ·çš„å‡½æ•°ã€‚ä½†æ˜¯æ³¨æ„è¿™é‡Œï¼ï¼æˆ‘ä»¬æœ‰äº†datasetï¼ˆinputï¼Œoutputï¼‰ï¼Œæˆ–è®¸æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›‘ç£å­¦ä¹ ï¼ˆsupervised learningï¼‰æ¥ä½¿ç”¨ä¸€ç§ç¥ç»ç½‘ç»œçš„æ–¹æ³•æ¥å­¦ä¹ ä¸€ç§å‡½æ•°å…³ç³»ã€‚æ‰€ä»¥æ¥ä¸‹æ¥é—®é¢˜æ˜¯ã€æˆ‘ä»¬å¦‚ä½•ä»å°‘é‡çš„æ ·æœ¬ä¸­å¾—åˆ°è¶³å¤Ÿå¥½çš„æ•°æ®ã€‘</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo>âˆ’</mo><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mo>:</mo><mrow><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo separator="true">,</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mi>T</mi></msubsup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mo>)</mo></mrow></mrow><annotation encoding="application/x-tex">train-data:{(s_{i,t},\Sigma_{t&#x27;=t}^T r(s_{i,t&#x27;},a_{i,t&#x27;}))}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mord mathit">d</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mrel">:</span><span class="mord displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>b</mi><mi>o</mi><mi>o</mi><mi>t</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>d</mi><mo>âˆ’</mo><mi>e</mi><mi>s</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>)</mo><msub><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>Ï•</mi></msub><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mi>T</mi></msubsup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mo>)</mo><mo>=</mo><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mo>+</mo><msub><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>Ï•</mi></msub><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">(bootstrapped-estimate)\hat V_\phi(s_{i,t})=\Sigma_{t&#x27;=t}^T r(s_{i,t&#x27;},a_{i,t&#x27;}))=r(s_{i,t&#x27;},a_{i,t&#x27;})+\hat V_\phi(s_{i,t+1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9467699999999999em;"></span><span class="strut bottom" style="height:1.232878em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">o</span><span class="mord mathit">o</span><span class="mord mathit">t</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">a</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">âˆ’</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mclose">)</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span><span style="top:-0.25233em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span><span style="top:-0.25233em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.22222em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>v</mi><mi>i</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>âˆ’</mo><mi>r</mi><mi>e</mi><mi>g</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>:</mo><mi>L</mi><mo>(</mo><mi>Ï•</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><msubsup><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>Ï•</mi><mi>Ï€</mi></msubsup><mo>(</mo><msub><mi>s</mi><mi>i</mi></msub><mo>)</mo><mo>âˆ’</mo><msub><mi>y</mi><mi>i</mi></msub><mi mathvariant="normal">âˆ£</mi><msup><mi mathvariant="normal">âˆ£</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">supervised-regression:L(\phi)=\frac{1}{2}\Sigma_{i=1}^N||\hat V_\phi^\pi(s_i)-y_i||^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">p</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">s</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mrel">:</span><span class="mord mathit">L</span><span class="mopen">(</span><span class="mord mathit">Ï•</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span><span style="top:-0.25233em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathrm">âˆ£</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><h2 id="0x03-ä»evaluationåˆ°actor-critic"><a class="markdownIt-Anchor" href="#0x03-ä»evaluationåˆ°actor-critic"></a> 0x03 ä»Evaluationåˆ°Actor- Critic</h2><h3 id="31-æ‰¹é‡acç®—æ³•actor-critic-algorithm"><a class="markdownIt-Anchor" href="#31-æ‰¹é‡acç®—æ³•actor-critic-algorithm"></a> 3.1 æ‰¹é‡ACç®—æ³•ï¼ˆactor- critic algorithmï¼‰</h3><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-10-31-153109.png" alt="image-20221031195007227" /></p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨è¿™æ ·çš„ç®—æ³•ï¼Œæˆ‘ä»¬ä¼šå‘ç°å…¶å®åœ¨è½¨è¿¹ä¹‹é—´éƒ½å¯ä»¥å¯¹state- valueè¿›è¡Œè¯„ä¼°ï¼Œä½†æ˜¯è¿™æ ·æ±‚è§£å¾—åˆ°çš„yæ˜¯ä¸ä¸€æ ·çš„ï¼Œåœ¨ä¸åŒè½¨è¿¹ä¸­å› ä¸ºçŠ¶æ€å˜æ¢ä¸ä¸€æ ·ï¼Œå¦‚æœæœ€åéƒ½è¾¾åˆ°stationçŠ¶æ€æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¯¹äºä¸å¹³ç¨³æ˜¯ä¸OKçš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„labelä¸å‡†ç¡®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¢åŠ ä¸€ä¸ªdiscount factor</p>ï¼ˆé‡‡æ ·ä¼˜åŠ¿ï¼‰A^\pi(s_t,a_t)=r(s,a)+\gamma V^\pi(s_{t+1})-V^\pi(s_t)<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬é‡‡æ ·Monte Carloé‡‡æ ·ï¼Œè®¡ç®—æ¢¯åº¦ï¼Œå“ªä¸€ä¸ªæ˜¯å¯¹çš„ï¼Ÿ</p>(option1é‡‡æ ·ï¼‰\nabla_\theta J(\theta)=\frac{1}{N}\Sigma\Sigma \nabla_\theta \pi_\theta(a_{i,t}|s_{i,t})(\Sigma_{t'=t}^T\gamma^{t'-t}r(s_{i,t'},a_{i,t'}))(option2é‡‡æ ·ï¼‰\nabla_\theta J(\theta)=\frac{1}{N}\Sigma\Sigma \nabla_\theta \pi_\theta(a_{i,t}|s_{i,t})(\Sigma_{t'=t}^T\gamma^{t'-1}r(s_{i,t'},a_{i,t'}))<p>å¦‚æœåªæ˜¯ä»option1é‡‡æ ·ï¼Œæˆ‘ä»¬å¾—åˆ°çš„ç»“æœæ˜¯ä»æ¯ä¸€æ­¥é‡æ–°å¼€å§‹åšdiscountï¼Œè¿™ä¸ªæ˜¯ç¬¦åˆç›´è§‰çš„</p><p>å¦‚æœæ˜¯ä»option2é‡‡æ ·ä¹Ÿä¸æ˜¯æ²¡æœ‰ç»“æœçš„ï¼Œå¦‚æœæˆ‘ä»¬é’ˆå¯¹æœªæ¥ææƒ§æ‰€ä»¥ä¼šæœ‰å¾ˆå¤šçš„discountã€‚</p><p>exampleï¼šè¿™é‡ŒSergey Levineå°è¯•ä½¿ç”¨deadæ¥è§£é‡Šoption1å’Œoption2çš„åŒºåˆ«ï¼Œä¸¤è€…éƒ½æ˜¯å¯¹çš„ã€‚</p><p>æ‰€ä»¥æ€»ç»“æˆ‘ä»¬çš„ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†ä¸ºbatcc ACä¸online ACä¸¤ç§æ–¹æ³•</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-10-31-153113.png" alt="image-20221031200710794" /></p><h2 id="0x04-æ¼”å‘˜è¯„è®ºç®—æ³•-actor-critics-algorithmç»†èŠ‚"><a class="markdownIt-Anchor" href="#0x04-æ¼”å‘˜è¯„è®ºç®—æ³•-actor-critics-algorithmç»†èŠ‚"></a> 0x04 æ¼”å‘˜è¯„è®ºç®—æ³• Actor- Critics Algorithmç»†èŠ‚</h2><h3 id="41-æ‹Ÿåˆå‡½æ•°è®­ç»ƒ"><a class="markdownIt-Anchor" href="#41-æ‹Ÿåˆå‡½æ•°è®­ç»ƒ"></a> 4.1 æ‹Ÿåˆå‡½æ•°è®­ç»ƒ</h3><p>æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç”¨ä¸¤ä¸ªnetworkæ¥åˆ†åˆ«æ‹Ÿåˆstate- value functionä¸policy- state- actionç½‘ç»œï¼›ä½†æ˜¯åœ¨æ¯”è¾ƒå¤æ‚çš„è¾“å…¥ï¼Œæ¯”å¦‚æ¸¸æˆå›¾ç‰‡ä¸­æˆ‘ä»¬å¾€å¾€éœ€è¦ä½¿ç”¨convolution layerå…±äº«å‚æ•°æ¥å‡å°‘ç½‘ç»œçš„å‚æ•°</p><h3 id="42-åœ¨çº¿acè®­ç»ƒ"><a class="markdownIt-Anchor" href="#42-åœ¨çº¿acè®­ç»ƒ"></a> 4.2 åœ¨çº¿ACè®­ç»ƒ</h3><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-10-31-153116.png" alt="image-20221031201549764" /></p><p>å¦‚æœåªæ˜¯è¿™æ ·è®­ç»ƒï¼Œç›¸å½“äºæˆ‘ä»¬æ¯æ¬¡æ›´æ–°æ¢¯åº¦ä½¿ç”¨æ‰¹é‡batchsize=1ï¼Œæ‰€ä»¥éå¸¸å·®ã€‚æˆ‘ä»¬ä»é‡‡æ ·çš„è§’åº¦å‡ºå‘ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæ­¥å¹¶è¡Œ(synchronized parallel actor-critic) æˆ–è€…å¼‚æ­¥å¹³è¡Œï¼ˆasynchronous parallel actor- criticï¼‰æ¥å¤šæ¬¡é‡‡æ ·ï¼Œä½†æ˜¯è¿™æ ·çš„æŸè€—å¤ªå¤§äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨replay bufferæ¥å­˜å‚¨ä¹‹å‰é‡‡æ ·çš„æ•°æ®ã€‚</p><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬åªæ˜¯ç®€å•çš„ä»replay bufferä¸­å¾—åˆ°train-dataï¼Œä½†æ˜¯è¿™æ ·æ˜¯æ²¡æœ‰æ•ˆæœçš„ï¼Œå› ä¸ºä¸æ˜¯åŒä¸€ä¸ªè½¨è¿¹æ„æˆçš„policy gradientæ˜¯æ²¡æœ‰æ•ˆæœçš„ï¼Œæ‰€ä»¥è¿™æ ·çš„ç®—æ³•æ˜¯ä¸å¯¹çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¼šå°è¯•å°†ä¹‹é—´çš„æŠ½æ ·å¾—åˆ°çš„state- valueè½¬æ¢æˆä¸ºåŒ…æ‹¬Q(s,a)çš„å€¼</p><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-10-31-153117.png" alt="image-20221031202523007" /></p><p>æ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬ä¸å†ä½¿ç”¨state- valueï¼Œè€Œæ˜¯ä½¿ç”¨action- state- value</p><h3 id="43-baselineè®¾ç½®"><a class="markdownIt-Anchor" href="#43-baselineè®¾ç½®"></a> 4.3 Baselineè®¾ç½®</h3><p>æˆ‘ä»¬åœ¨Policy gradientå¼•å…¥ä¸€ä¸ªå¸¸æ•°ï¼Œå¾—åˆ°æ— åå·®ã€ä½†æ˜¯é«˜æ–¹å·®çš„æ¢¯åº¦ï¼›åœ¨ACä¸­æˆ‘ä»¬ä½¿ç”¨ r+Vï¼ˆt+1ï¼‰- Vï¼ˆtï¼‰æ¥å¾—åˆ°è¯„ä¼°ï¼Œè¿™æ ·ä¼šæœ‰ä¸€ä¸ªä½æ–¹å·®ä½†æ˜¯æœ‰åçš„æ–¹ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚ä½•åœ¨æ‹Ÿåˆä»·å€¼å‡½æ•°è¿‡ç¨‹ä¸­å¾—åˆ°æˆ‘ä»¬çš„æ¢¯åº¦ï¼Œä¹Ÿå°±æ˜¯ç”¨Q-Væ¥è¯„ä¼°ï¼ˆç§°ä¸ºè’™ç‰¹å¡æ´›æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯è¿™æ ·å¯¹é‡‡æ ·æ•°é‡è¦æ±‚é«˜ã€‚</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mover accent="true"><mi>A</mi><mo>^</mo></mover><mi>C</mi><mi>Ï€</mi></msubsup><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>=</mo><mi>r</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>+</mo><mi>Î³</mi><msubsup><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>Ï•</mi><mi>Ï€</mi></msubsup><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo><mo>âˆ’</mo><msubsup><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>Ï•</mi><mi>Ï€</mi></msubsup><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\hat A^\pi_C(s_t,a_t)=r(s_t,a_t)+\gamma \hat V^\pi_\phi(s_{t+1})-\hat V^\pi_\phi(s_{t})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9467699999999999em;"></span><span class="strut bottom" style="height:1.329878em;vertical-align:-0.383108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit">A</span></span><span style="top:-0.25233em;margin-left:0.27778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span><span style="top:-0.25233em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span><span style="top:-0.25233em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mover accent="true"><mi>A</mi><mo>^</mo></mover><mrow><mi>M</mi><mi>C</mi></mrow><mi>Ï€</mi></msubsup><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>=</mo><msub><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow></msub><msup><mi>Î³</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>âˆ’</mo><mi>t</mi></mrow></msup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mo>âˆ’</mo><msubsup><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>Ï•</mi><mi>Ï€</mi></msubsup><mo>(</mo><msub><mi>s</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\hat A^\pi_{MC}(s_t,a_t)=\Sigma_{t&#x27;=t}\gamma^{t&#x27;-t}r(s_{t&#x27;},a_{t&#x27;})-\hat V^\pi_\phi(s_{t&#x27;})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9467699999999999em;"></span><span class="strut bottom" style="height:1.329878em;vertical-align:-0.383108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit">A</span></span><span style="top:-0.25233em;margin-left:0.27778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="vlist"><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord scriptscriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span><span style="top:-0.25233em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨æŸç§æ–¹å¼æ¥ç»“åˆä¸¤è€…ï¼Œä¹Ÿå°±æ˜¯é‡‡æ ·N-step returns</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mover accent="true"><mi>A</mi><mo>^</mo></mover><mrow><mi>n</mi></mrow><mi>Ï€</mi></msubsup><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mrow><mi>t</mi><mo>+</mo><mi>n</mi></mrow></msubsup><msup><mi>Î³</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>âˆ’</mo><mi>t</mi></mrow></msup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mo>âˆ’</mo><msubsup><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>Ï•</mi><mi>Ï€</mi></msubsup><mo>(</mo><msub><mi>s</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mo>+</mo><msup><mi>Î³</mi><mi>n</mi></msup><msubsup><mover accent="true"><mi>V</mi><mo>^</mo></mover><mi>Ï•</mi><mi>Ï€</mi></msubsup><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mi>n</mi></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\hat A^\pi_{n}(s_t,a_t)=\Sigma_{t&#x27;=t}^{t+n}\gamma^{t&#x27;-t}r(s_{t&#x27;},a_{t&#x27;})-\hat V^\pi_\phi(s_{t&#x27;})+\gamma^n\hat V^\pi_\phi(s_{t+n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9467699999999999em;"></span><span class="strut bottom" style="height:1.329878em;vertical-align:-0.383108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit">A</span></span><span style="top:-0.25233em;margin-left:0.27778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.28541099999999997em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="vlist"><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord scriptscriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span><span style="top:-0.25233em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span><span style="top:-0.25233em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">Ï•</span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>ä¹‹ååŒ…æ‹¬generalized advantage estimationæ¨å¯¼å¯ä»¥å‘ç°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span></span></span></span>å¯ä»¥æœ‰æ•ˆçš„é™ä½æ–¹å·®</p><h2 id="0x05-review"><a class="markdownIt-Anchor" href="#0x05-review"></a> 0x05 review</h2><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-10-31-153122.png" alt="image-20221031203538556" /></p><h2 id="0x06-code"><a class="markdownIt-Anchor" href="#0x06-code"></a> 0x06 code</h2><p>å‚è€ƒ<a href="https://hrl.boyuai.com/chapter/intro/">åŠ¨æ‰‹å­¦å¼ºåŒ–å­¦ä¹ </a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> gym<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn.functional <span class="hljs-keyword">as</span> F<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> rl_utils<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ActorCritic</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, state_dim, hidden_dim, action_dim, actor_lr, critic_lr,</span><br><span class="hljs-params">                 gamma, device</span>):<br>        <span class="hljs-comment"># ç­–ç•¥ç½‘ç»œ</span><br>        self.actor = PolicyNet(state_dim, hidden_dim, action_dim).to(device)<br>        self.critic = ValueNet(state_dim, hidden_dim).to(device)  <span class="hljs-comment"># ä»·å€¼ç½‘ç»œ</span><br>        <span class="hljs-comment"># ç­–ç•¥ç½‘ç»œä¼˜åŒ–å™¨</span><br>        self.actor_optimizer = torch.optim.Adam(self.actor.parameters(),<br>                                                lr=actor_lr)<br>        self.critic_optimizer = torch.optim.Adam(self.critic.parameters(),<br>                                                 lr=critic_lr)  <span class="hljs-comment"># ä»·å€¼ç½‘ç»œä¼˜åŒ–å™¨</span><br>        self.gamma = gamma<br>        self.device = device<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">take_action</span>(<span class="hljs-params">self, state</span>):<br>        state = torch.tensor([state], dtype=torch.<span class="hljs-built_in">float</span>).to(self.device)<br>        probs = self.actor(state)<br>        action_dist = torch.distributions.Categorical(probs)<br>        action = action_dist.sample()<br>        <span class="hljs-keyword">return</span> action.item()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self, transition_dict</span>):<br>        states = torch.tensor(transition_dict[<span class="hljs-string">&#x27;states&#x27;</span>],<br>                              dtype=torch.<span class="hljs-built_in">float</span>).to(self.device)<br>        actions = torch.tensor(transition_dict[<span class="hljs-string">&#x27;actions&#x27;</span>]).view(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>).to(<br>            self.device)<br>        rewards = torch.tensor(transition_dict[<span class="hljs-string">&#x27;rewards&#x27;</span>],<br>                               dtype=torch.<span class="hljs-built_in">float</span>).view(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>).to(self.device)<br>        next_states = torch.tensor(transition_dict[<span class="hljs-string">&#x27;next_states&#x27;</span>],<br>                                   dtype=torch.<span class="hljs-built_in">float</span>).to(self.device)<br>        dones = torch.tensor(transition_dict[<span class="hljs-string">&#x27;dones&#x27;</span>],<br>                             dtype=torch.<span class="hljs-built_in">float</span>).view(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>).to(self.device)<br><br>        <span class="hljs-comment"># æ—¶åºå·®åˆ†ç›®æ ‡</span><br>        td_target = rewards + self.gamma * self.critic(next_states) * (<span class="hljs-number">1</span> -<br>                                                                       dones)<br>        td_delta = td_target - self.critic(states)  <span class="hljs-comment"># æ—¶åºå·®åˆ†è¯¯å·®</span><br>        log_probs = torch.log(self.actor(states).gather(<span class="hljs-number">1</span>, actions))<br>        actor_loss = torch.mean(-log_probs * td_delta.detach())<br>        <span class="hljs-comment"># å‡æ–¹è¯¯å·®æŸå¤±å‡½æ•°</span><br>        critic_loss = torch.mean(<br>            F.mse_loss(self.critic(states), td_target.detach()))<br>        self.actor_optimizer.zero_grad()<br>        self.critic_optimizer.zero_grad()<br>        actor_loss.backward()  <span class="hljs-comment"># è®¡ç®—ç­–ç•¥ç½‘ç»œçš„æ¢¯åº¦</span><br>        critic_loss.backward()  <span class="hljs-comment"># è®¡ç®—ä»·å€¼ç½‘ç»œçš„æ¢¯åº¦</span><br>        self.actor_optimizer.step()  <span class="hljs-comment"># æ›´æ–°ç­–ç•¥ç½‘ç»œçš„å‚æ•°</span><br>        self.critic_optimizer.step()  <span class="hljs-comment"># æ›´æ–°ä»·å€¼ç½‘ç»œçš„å‚æ•°</span><br>  actor_lr = <span class="hljs-number">1e-3</span><br>critic_lr = <span class="hljs-number">1e-2</span><br>num_episodes = <span class="hljs-number">1000</span><br>hidden_dim = <span class="hljs-number">128</span><br>gamma = <span class="hljs-number">0.98</span><br>device = torch.device(<span class="hljs-string">&quot;cuda&quot;</span>) <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> torch.device(<br>    <span class="hljs-string">&quot;cpu&quot;</span>)<br><br>env_name = <span class="hljs-string">&#x27;CartPole-v0&#x27;</span><br>env_name=<span class="hljs-string">&#x27;MountainCar-v0&#x27;</span><br>env = gym.make(env_name)<br>env.seed(<span class="hljs-number">0</span>)<br>torch.manual_seed(<span class="hljs-number">0</span>)<br>state_dim = env.observation_space.shape[<span class="hljs-number">0</span>]<br>action_dim = env.action_space.n<br>agent = ActorCritic(state_dim, hidden_dim, action_dim, actor_lr, critic_lr,<br>                    gamma, device)<br><br>return_list = rl_utils.train_on_policy_agent(env, agent, num_episodes)<br>episodes_list = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(return_list)))<br>plt.plot(episodes_list, return_list)<br>plt.xlabel(<span class="hljs-string">&#x27;Episodes&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;Returns&#x27;</span>)<br>plt.title(<span class="hljs-string">&#x27;Actor-Critic on &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(env_name))<br>plt.show()<br><br>mv_return = rl_utils.moving_average(return_list, <span class="hljs-number">9</span>)<br>plt.plot(episodes_list, mv_return)<br>plt.xlabel(<span class="hljs-string">&#x27;Episodes&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;Returns&#x27;</span>)<br>plt.title(<span class="hljs-string">&#x27;Actor-Critic on &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(env_name))<br>plt.show()<br></code></pre></td></tr></table></figure><p><img src="http://chenxia31blog.oss-cn-hangzhou.aliyuncs.com/blog/2022-10-31-153251.png" alt="image-20221031233251437" /></p>]]></content>
    
    
    <categories>
      
      <category>CS285</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS285_Lecture05_Policy_Gradient</title>
    <link href="/posts/ed4cf7b5.html"/>
    <url>/posts/ed4cf7b5.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬èŠ‚è¯¾çš„ç›®æ ‡æ˜¯ææ˜ç™½Policy gradientä¸€ç±»çš„REINFORCEMENTæ–¹æ³•ï¼Œå¹¶ä¸”ç†è§£èƒŒåçš„å±€é™æ€§ï¼Œç„¶åçŸ¥é“ä¸ºä»€ä¹ˆtextbookå¾ˆå®¹æ˜“è®²æ¸…æ¥šï¼Œä½†æ˜¯åœ¨å®è·µä¸­ä¸è¡Œçš„åŸå› ã€‚ä¹‹åä»Causalityå’ŒBaselineä¸¤ç§æ–¹æ³•æ¥é™ä½On- policy PGçš„æ–¹å·®ã€‚å¹¶ç»™å‡ºç»“åˆISï¼ˆimportant samplingï¼‰çš„Off policyçš„æ¢¯åº¦æ–¹æ³•ã€‚æœ€ååˆ©ç”¨ä»£ç å®ç°RLé‡Œé¢çš„hello worldâ€”CartPole-v0æ¥å®ç°ã€‚</p><span id="more"></span><h2 id="01-ä»€ä¹ˆæ˜¯policy-gradients"><a class="markdownIt-Anchor" href="#01-ä»€ä¹ˆæ˜¯policy-gradients"></a> 01 ä»€ä¹ˆæ˜¯Policy gradients</h2><h3 id="11-pgçš„æ¢¯åº¦å‡½æ•°çš„ä¸‹è½½"><a class="markdownIt-Anchor" href="#11-pgçš„æ¢¯åº¦å‡½æ•°çš„ä¸‹è½½"></a> 1.1 PGçš„æ¢¯åº¦å‡½æ•°çš„ä¸‹è½½</h3><p>å›é¡¾DRLçš„ç›®æ ‡ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯å¢åŠ ç´¯ç§¯å¥–åŠ±çš„æœŸæœ›ï¼š</p>ï¼ˆç›®æ ‡å‡½æ•°ï¼‰max\ E_{\tau-p_\theta(\tau)}[\Sigma_tr(s_t,a_t)] <p>æ ¹æ®<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">(s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span> å¯¹çš„é©¬å°”å¯å¤«æ€§è´¨ï¼Œ(åœ¨æœ‰é™çš„æƒ…å†µä¸‹finite horizon caseï¼‰ä¸‹ç®€åŒ–æˆä¸º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mtext>Â </mtext><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi>E</mi><mrow><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>âˆ’</mo><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow></msub><mo>[</mo><mi>r</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">max\ \Sigma_{t=1}^TE_{(s_t,a_t)-p_\theta(s_t,a_t)}[r(s_t,a_t)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.2465309999999998em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mord mspace">Â </span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥æ ¹æ®<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>é‡‡æ ·Nä¸ª<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï„</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span></span></span></span>,ç„¶åæ±‚å¾—æœŸæœ›ä¸º</p>ï¼ˆé‡‡æ ·åçš„ç›®æ ‡å‡½æ•°ï¼‰J(\theta)=\frac{1}{N}\Sigma_i\Sigma_tr(s_{i,t},a_{i,t}) <p>è¿™ä¸ªå¼å­çš„é‡è¦æ„ä¹‰åœ¨äºå®ƒç›´æ¥ç»™æˆ‘ä»¬ååº”å½“å‰policyçš„ä¼˜åŠ£ï¼Œä¹ŸæŒ‡æ˜äº†æˆ‘ä»¬éœ€è¦å‰è¿›çš„æ–¹å‘ï¼Œå°±æ˜¯æœ€å¤§åŒ–è¿™ä¸ªæœŸæœ›ï¼Œè™½ç„¶æœ‰çš„æ—¶å€™è¿™ä¸ªå¼å­å¹¶ä¸æ˜¯å®¹æ˜“è®¡ç®—ã€‚ä½†æ˜¯è¯·æŠŠå“ªäº›é—®é¢˜å…ˆæ”¾æ”¾ï¼Œç›´è§‚çš„æœ€å¤§åŒ–è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ç”¨æ¢¯åº¦æå‡çš„æ–¹æ³•ï¼š</p>J(\theta)=\int p_\theta(\tau)r(\tau)d\tauï¼ˆä¸Šå¼ç®€å†™ï¼‰ <p>é‚£ä¹ˆå¯¹å‚æ•°æ±‚å¯¼çš„ç»“æœå°±æ˜¯ï¼›åŒæ—¶ç”±äºæˆ‘ä»¬æ— æ³•ç›´æ¥å–å€¼å‡½æ•°ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è½¬æ¢ä¸ºæœŸæœ›çš„æ–¹å¼æ¥åˆ©ç”¨samplingâ€”expectationçš„æ–¹å¼æ¥æ±‚æœŸæœ›</p>ï¼ˆç›®æ ‡å‡½æ•°æ¢¯åº¦ï¼‰\nabla_\theta J(\theta)=\int \nabla_\theta p_\theta(\tau)*r(\tau)d\tau)\\=\int p_\theta(\tau)*\nabla_\theta logp_\theta(\tau)*r(\tau)d\tau\\=E_{\tau-p_\theta(\tau)}[\nabla_\theta logp_\theta(\tau)*r(\tau)] <p>æˆ‘ä»¬å¯¹ä¸Šé¢çš„ç›®æ ‡å‡½æ•°æ›´è¿›ä¸€æ­¥çš„æ¢è®¨ï¼›é¦–å…ˆç–‘é—®å°±æ˜¯ä»€ä¹ˆæ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p_\theta(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span>,åœ¨MDPçš„state- observation-action- stateè½¬ç§»ä¸­æˆ‘ä»¬å¯ä»¥è®¤è¯†åˆ°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>=</mo><mi>p</mi><mo>(</mo><msub><mi>s</mi><mn>1</mn></msub><mo>)</mo><mo>âˆ</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mi>p</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">p_\theta(\tau)=p(s_1)\prod \pi_\theta(a_t|s_t)p(s_{t+1}|s_t,a_t) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.05em;"></span><span class="strut bottom" style="height:1.6000100000000002em;vertical-align:-0.55001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="op-symbol large-op mop" style="top:-0.000004999999999977245em;">âˆ</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>æ‰€ä»¥å¯ä»¥å¾ˆè½»æ¾çš„æ›¿æ¢æ‰ä¸Šè¿°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>p</mi><mo>(</mo><msub><mi>s</mi><mn>1</mn></msub><mo>)</mo><mo>+</mo><mi mathvariant="normal">Î£</mi><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo>+</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>p</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">logp_\theta(\tau)=logp(s_1)+\Sigma log\pi_\theta(a_t|s_t)+logp(s_{t+1}|s_t,a_t) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathrm">Î£</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å‡è®¾æˆ‘ä»¬æ±‚å¯¼çš„åŒ–ï¼Œé‚£ä¹ˆç›®æ ‡å‡½æ•°æ¢¯åº¦å°±ä¼šå˜æˆ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><msub><mi>E</mi><mrow><mi>Ï„</mi><mo>âˆ’</mo><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></msub><mo>[</mo><mo>(</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo>)</mo><mo>(</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\nabla_\theta J(\theta)=E_{\tau-p_\theta(\tau)}[(\Sigma_{t=1}^T \nabla_\theta log \pi_\theta(a_t|s_t))(\Sigma_{t=1}^T r(s_t,a_t))] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.2465309999999998em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mopen">(</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>Stop to think : just like before we <strong>evaluated our reinforcement learning objective</strong> by <strong>generating samples</strong> by actually running our policy in the world to <strong>get an estimate of an exception</strong></p><p>è¿™æ ·æƒ…å†µä¸‹æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°é‡‡æ ·çš„åçš„æ¢¯åº¦è®¡ç®—ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo><mo>]</mo><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\nabla_\theta J(\theta)=\frac{1}{N}\Sigma_{i=1}^N[\Sigma_{t=1}^T \nabla_\theta log \pi_\theta(a_{i,t}|s_{i,t})][\Sigma_{t=1}^T r(s_{i,t},a_{i,t})] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>è™½ç„¶æˆ‘ä»¬æˆåŠŸå¾—åˆ°äº†ï¼Œæˆ‘ä»¬å¦‚ä½•ä»é‡‡æ ·ç»“æœä¸­å¾—åˆ°å¦‚ä½•è®¡ç®—æ¢¯åº¦ï¼›ä½†æ˜¯æˆ‘ä»¬éœ€è¦å¯¹åˆ†æå®ƒå…·ä½“çš„å«ä¹‰ã€‚</p><h3 id="12-ç†è§£pgå«ä¹‰"><a class="markdownIt-Anchor" href="#12-ç†è§£pgå«ä¹‰"></a> 1.2 ç†è§£PGå«ä¹‰</h3><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æŸå¤±å‡½æ•°å†…éƒ¨ä¸»è¦æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æœ‰æ¢¯åº¦çš„ä¸œè¥¿ï¼Œç¬¬äºŒéƒ¨ä»½æ˜¯å¥–åŠ±çš„æ±‚å’Œï¼›é‚£ä¹ˆå¯¹äºä¸¤é¡¹åˆ†åˆ«åˆ†æï¼Œå¯ä»¥å‘ç°ç¬¬ä¸€éƒ¨åˆ†æ¢¯åº¦ä¸ç®€å•çš„MLEç±»ä¼¼ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥çš„æ¢¯åº¦ä¸‹é™ï¼Œä½†æ˜¯ç”±äºæœ‰å¥–åŠ±çš„åŠ æƒï¼Œå¯¼è‡´æˆ‘ä»¬çš„ç»“æœæ˜¯ï¼š</p><p>good stuff is made more likely;bad stuff is made less likelyï¼ˆå¢åŠ å¥½çš„å¯èƒ½æ€§ï¼Œé™ä½åçš„å¯èƒ½æ€§ï¼‰ï¼Œä¹Ÿæ ‡è®°ä¸ºâ€œtrial and errorâ€</p><p>å¯¹äºä¸­é—´çš„ä¸€é¡¹ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\nabla_\theta log \pi_\theta(a_{i,t}|s_{i,t})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>,å‡è®¾æˆ‘ä»¬ç”¨ä¸€ä¸ªç¥ç»ç½‘ç»œæ¥è¿›è¡Œæ‹Ÿåˆï¼Œå‡å¦‚é‡‡ç”¨Gaussian policiesï¼›ä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„æ¨¡å‹å‡è®¾æ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo>=</mo><mi>N</mi><mo>(</mo><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo separator="true">;</mo><mi mathvariant="normal">Î£</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">log\pi_\theta(a_t|s_t)=N(model(s_t);\Sigma) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathit">m</span><span class="mord mathit">o</span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mpunct">;</span><span class="mord mathrm">Î£</span><span class="mclose">)</span></span></span></span></span></p><p>é‚£ä¹ˆæˆ‘ä»¬çš„æŸå¤±å‡½æ•°ï¼Œæ ¹æ®MLEè‡ªç„¶è€Œç„¶å°±å¯ä»¥å¾—åˆ°(å‚è€ƒlinear regressionï¼‰</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><mo>âˆ’</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><msup><mi mathvariant="normal">Î£</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>(</mo><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo>âˆ’</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mfrac><mrow><mi>d</mi><mi>f</mi></mrow><mrow><mi>d</mi><mi>Î¸</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\nabla_\theta J(\theta)=-\frac{1}{2}\Sigma^{-1}(model(s_t)-a_t)\frac{df}{d\theta} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.37144em;"></span><span class="strut bottom" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord">âˆ’</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">m</span><span class="mord mathit">o</span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.10764em;">f</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°æˆ‘ä»¬çš„REINFORCEMENT algorithmï¼›è¿™é‡Œç¼©å†™æ˜¯é’ˆå¯¹ï¼šREward Increments=nonnegative Factor<em>Offset Reinforcement</em> Characteristic+Eligibility</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ikgfpgx7j30ns0co0u8.jpg" alt="image-20221026121451902" /></p><p>ä½†æ˜¯PGçš„é—®é¢˜åœ¨äºï¼š</p><ol><li>æˆ‘ä»¬æ˜¯å¦å¯ä»¥åœ¨partial observationï¼Œä¹Ÿå°±æ˜¯oä¸ç­‰äºsæƒ…å†µä¸‹ä½¿ç”¨ï¼Ÿ</li><li>å…·æœ‰å¾ˆå¤§çš„æ–¹å·®ï¼Œå¯¹äºä¸åŒçš„rewardå–å€¼ç»“æœå¤§ä¸ç›¸åŒã€‚<ol><li>exampleï¼šå‡è®¾N=3ï¼›å…¶ä¸­æ€»çš„å¥–åŠ±åˆ†ä¸ºä¸ï¼ˆä¸€è´Ÿï¼Œä¸¤æ­£ï¼‰ï¼Œé‚£ä¹ˆæ›´æ–°åçš„ç­–ç•¥ä¼šåå‘äºå³è¾¹ï¼Œå‡å¦‚æ˜¯åŠ ä¸Šconstantï¼ˆä¸‰æ­£ï¼‰ï¼Œé‚£ä¹ˆæ›´æ–°çš„ç­–ç•¥ä¼šæ¯”åå‘ä¸­é—´ã€‚è¿™ç§ä¸ç¡®å®šæ€§å¯¼è‡´æœ€ç»ˆç»“æœçš„æ–¹å·®åå¤§</li></ol></li></ol><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ikglnmtcj312o0fat9v.jpg" alt="image-20221026121503952" /></p><h2 id="0x02-å¦‚ä½•é™ä½æ–¹å·®ä¸€causality"><a class="markdownIt-Anchor" href="#0x02-å¦‚ä½•é™ä½æ–¹å·®ä¸€causality"></a> 0x02 å¦‚ä½•é™ä½æ–¹å·®ä¸€ï¼šCausality</h2><p>åœ¨æœªæ¥å‘ç”Ÿçš„äº‹æƒ…å¹¶ä¸ä¼šå¯¹ç°åœ¨çš„äº‹æƒ…é€ æˆå½±å“ï¼ˆpolicy at time b cannot affect reward at time a when a&lt;bï¼‰,å› æ­¤åœ¨tä¹‹å‰çš„æ¢¯åº¦ä¸ä¼šå¯¹åé¢é€ æˆå½±å“</p><p>æ‰€ä»¥æˆ‘ä»¬çš„æ¢¯åº¦éœ€è¦ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo><mo>]</mo><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\nabla_\theta J(\theta)=\frac{1}{N}\Sigma_{i=1}^N[\Sigma_{t=1}^T \nabla_\theta log \pi_\theta(a_{i,t}|s_{i,t})][\Sigma_{i=1}^T r(s_{i,t},a_{i,t})] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>å˜æˆï¼›æ³¨æ„åé¢è®¡ç®—å¥–åŠ±çš„ä¸‹æ ‡ï¼æœ‰æ•ˆçš„è¯æ˜è¿‡ç¨‹å¯èƒ½éœ€è¦åœ¨paperä¸­æ‰èƒ½çœ‹åˆ°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo><mo>]</mo><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mi>T</mi></msubsup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\nabla_\theta J(\theta)=\frac{1}{N}\Sigma_{i=1}^N[\Sigma_{t=1}^T \nabla_\theta log \pi_\theta(a_{i,t}|s_{i,t})][\Sigma_{t&#x27;=t}^T r(s_{i,t&#x27;},a_{i,t&#x27;})] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>é€šå¸¸çš„æˆ‘ä»¬ä¼šå°†åé¢çš„è®°ä¸ºï¼šreward to goï¼š</p>ï¼ˆreward\ to\ go) \hat Q_{i,t}=\Sigma_{t'=t}^Tr(s_{i,t'},a_{i,t'}) <h2 id="0x03-å¦‚ä½•é™ä½å‘å·®äºŒbaselines"><a class="markdownIt-Anchor" href="#0x03-å¦‚ä½•é™ä½å‘å·®äºŒbaselines"></a> 0x03 å¦‚ä½•é™ä½å‘å·®äºŒï¼šBaselines</h2><p>é¦–å…ˆç›´è§‰çš„æ„Ÿå—ä¸åŒrewardçš„å½±å“ï¼Œè¿˜æ˜¯ä¹‹å‰çš„ä¾‹å­ï¼Œå¦‚æœreward=(-1,2,2)å’Œï¼ˆ1ï¼Œ4ï¼Œ4ï¼‰æˆ–è€…æ˜¯ï¼ˆ10000ï¼Œ10005ï¼Œ10005ï¼‰è¿™æ ·è®¡ç®—çš„ç»“æœé€šå¸¸æ˜¯ä¸ä¸€æ ·çš„ã€‚æˆ‘ä»¬éœ€è¦åœ¨å…¶ä¸­å‡å»ä¸€ä¸ªbaselineï¼Œç›¸å½“äºunbiased in expectationï¼Œå¾ˆç›´è§‚çš„æˆ‘ä»¬æ˜¯å‡å»å¥–åŠ±çš„å¹³å‡å€¼ï¼Œæ³¨æ„ï¼ï¼å¹³å‡å€¼ä¸ä¸€å®šæ˜¯æœ€å¥½çš„</p>\nabla_\theta J(\theta)=\int p_\theta(\tau)*\nabla_\theta logp_\theta(\tau)*(r(\tau)-b)d\tau\\ <p>å¯ä»¥ç®€å•çš„è¯æ˜å‡å»ä¸€ä¸ªbaselineä¸ä¼šå¯¹æ¢¯åº¦é€ æˆå½±å“ï¼Œä½†æ˜¯ä¼šå¯¹æ¢¯åº¦å˜åŒ–ç¨‹åº¦é€ æˆå½±å“</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>[</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo><mi>b</mi><mo>]</mo><mo>=</mo><mi>b</mi><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mo>âˆ«</mo><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo><mi>d</mi><mi>Ï„</mi><mo>=</mo><mi>b</mi><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mo>âˆ—</mo><mn>1</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">E[\nabla_\theta logp_\theta(\tau)b]=b\nabla_\theta \int p_\theta(\tau)d \tau=b\nabla_\theta*1=0 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.36em;"></span><span class="strut bottom" style="height:2.22225em;vertical-align:-0.86225em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mord mathit">b</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">b</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="op-symbol large-op mop" style="margin-right:0.44445em;top:-0.0011249999999999316em;">âˆ«</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mrel">=</span><span class="mord mathit">b</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathrm">1</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></span></p><p>é™¤å»å¹³å‡å€¼ï¼Œæˆ‘ä»¬ä¼šé‡‡å–ä»€ä¹ˆbaselineæ¥è®¡ç®—ï¼Ÿæˆ‘ä»¬çš„ç›®æ ‡æ˜¯é™ä½æ¨¡å‹çš„æ–¹å·®ï¼Œé‚£ä¹ˆæœ€å¥½çš„baselineå°±æ˜¯è®©æ¨¡å‹æ–¹å·®æœ€ä½çš„ï¼Œæ ¹æ®æ–¹å·®è®¡ç®—</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mo>[</mo><mi>X</mi><mo>]</mo><mo>=</mo><mi>E</mi><mo>[</mo><msup><mi>X</mi><mn>2</mn></msup><mo>]</mo><mo>âˆ’</mo><mi>E</mi><mo>[</mo><mi>X</mi><msup><mo>]</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Var[X]=E[X^2]-E[X]^2 </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8641079999999999em;"></span><span class="strut bottom" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">]</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>é‚£ä¹ˆ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mi>a</mi><mi>r</mi><mo>=</mo><mi>E</mi><mo>[</mo><mo>(</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>âˆ—</mo><mo>(</mo><mi>r</mi><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>âˆ’</mo><mi>b</mi><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup><mo>]</mo><mo>âˆ’</mo><msup><mi>E</mi><mn>2</mn></msup><mo>[</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>âˆ—</mo><mo>(</mo><mi>r</mi><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>âˆ’</mo><mi>b</mi><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">Var=E[(\nabla_\theta logp_\theta(\tau)*(r(\tau)-b))^2]-E^2[\nabla_\theta logp_\theta(\tau)*(r(\tau)-b)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8641079999999999em;"></span><span class="strut bottom" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mopen">(</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mbin">âˆ—</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mbin">âˆ—</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>ç›´æ¥å¯¹æ–¹å·®Varçš„biasæ±‚å¯¼</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>d</mi><mi>V</mi><mi>a</mi><mi>r</mi></mrow><mrow><mi>d</mi><mi>b</mi></mrow></mfrac><mo>=</mo><mo>âˆ’</mo><mn>2</mn><mi>E</mi><mo>[</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><msup><mo>)</mo><mn>2</mn></msup><mo>âˆ—</mo><mi>r</mi><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>]</mo><mo>+</mo><mn>2</mn><mi>b</mi><mi>E</mi><mo>[</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><msup><mo>)</mo><mn>2</mn></msup><mo>]</mo></mrow><annotation encoding="application/x-tex">\frac{dVar}{db}=-2E[\nabla_\theta logp_\theta(\tau)^2*r(\tau)]+2bE[\nabla_\theta logp_\theta(\tau)^2] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.37144em;"></span><span class="strut bottom" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit">d</span><span class="mord mathit">b</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord">âˆ’</span><span class="mord mathrm">2</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathrm">2</span><span class="mord mathit">b</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span></span></p><p>è¿™æ ·å°±å¯ä»¥å¾—åˆ°æœ€å¥½çš„bå€¼ï¼Œä½†æ˜¯é€šå¸¸åœ¨å®è·µä¸­å¾ˆéš¾è®¡ç®—ï¼Œæ‰€ä»¥è¿˜å›ä¹‹å¥½ç”¨</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mo>=</mo><mfrac><mrow><mi>E</mi><mo>[</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><msup><mo>)</mo><mn>2</mn></msup><mo>âˆ—</mo><mi>r</mi><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>]</mo></mrow><mrow><mi>E</mi><mo>[</mo><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><msup><mo>)</mo><mn>2</mn></msup><mo>]</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">b=\frac{E[\nabla_\theta logp_\theta(\tau)^2*r(\tau)]}{E[\nabla_\theta logp_\theta(\tau)^2]} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.491108em;"></span><span class="strut bottom" style="height:2.427108em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">b</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><h2 id="0x04-off-policy-policy-gradient"><a class="markdownIt-Anchor" href="#0x04-off-policy-policy-gradient"></a> 0x04 Off-policy Policy gradient</h2><p>æˆ‘ä»¬åœ¨ä¹‹å‰çš„è®¨è®ºä¸­å¾—åˆ°æœ€ç»ˆçš„æ¢¯åº¦ç†è®ºå…¬å¼å’Œé‡‡æ ·å…¬å¼ï¼Œä½†æ˜¯æˆ‘ä»¬ä»”ç»†æ€è€ƒè¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦ç¬¬iæ¬¡é‡‡æ ·å¾—åˆ°å®Œæ•´<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï„</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\tau_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.1132em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ä¹‹åæ‰èƒ½åˆ©ç”¨æ¢¯åº¦æå‡æ›´æ–°policyï¼Œè¿™æ ·å¯¹äºæ¯æ¬¡policyåªæ˜¯ç®€å•çš„æ›´æ–°ä¸€æ¬¡æ¢¯åº¦ï¼›è¿™æ ·çš„ç»“æœå°±æ˜¯é‡‡æ ·æ•ˆç‡éå¸¸ä½ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ikgwr1kuj30ri09o74z.jpg" alt="image-20221026121521658" /></p><p>å¯ä»¥ç®€å•çš„å¼•å…¥ important samplingï¼›æ¥å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…¶ç†è®ºè¿‡ç¨‹æ˜¯è¿™æ ·çš„</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>E</mi><mrow><mi>x</mi><mo>âˆ’</mo><mi>p</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></msub><mo>[</mo><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>]</mo><mo>=</mo><mo>âˆ«</mo><mi>p</mi><mo>(</mo><mi>x</mi><mo>)</mo><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mi>d</mi><mi>x</mi><mo>=</mo><msub><mi>E</mi><mrow><mi>x</mi><mo>âˆ’</mo><mi>q</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></msub><mo>[</mo><mfrac><mrow><mi>p</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><mrow><mi>q</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mfrac><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">E_{x-p(x)}[f(x)]=\int p(x)f(x)dx=E_{x-q(x)}[\frac{p(x)}{q(x)}f(x)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.363em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">x</span><span class="mbin">âˆ’</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mclose">]</span><span class="mrel">=</span><span class="op-symbol large-op mop" style="margin-right:0.44445em;top:-0.0011249999999999316em;">âˆ«</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord mathit">d</span><span class="mord mathit">x</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">x</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">q</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>è¿™æ ·çš„å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ™ºèƒ½ä½“æ—§ç­–ç•¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p_\theta(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span> æ¥æ›´æ–°ç­–ç•¥æ¢¯åº¦çš„å€¼,å¾—åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p_{\theta&#x27;}(\tau)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span>,ä¹Ÿå°±æ˜¯ç›®æ ‡å‡½æ•°ä¼šå˜æˆ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi><mo>(</mo><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>=</mo><msub><mi>E</mi><mrow><mi>Ï„</mi><mo>âˆ’</mo><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></msub><mo>[</mo><mfrac><mrow><msub><mi>p</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow><mrow><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></mfrac><mo>(</mo><mi>r</mi><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>âˆ’</mo><mi>b</mi><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">J(\theta&#x27;)=E_{\tau-p_\theta(\tau)}[\frac{p_{\theta&#x27;}(\tau)}{p_\theta(\tau)}(r(\tau)-b)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.363em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>ä¹‹é—´çš„æ¯”å€¼å¯ä»¥å±•å¼€å¾—åˆ°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><msub><mi>p</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow><mrow><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>p</mi><mo>(</mo><msub><mi>s</mi><mn>1</mn></msub><mo>)</mo><mo>âˆ</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mi>p</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow><mrow><mi>p</mi><mo>(</mo><msub><mi>s</mi><mn>1</mn></msub><mo>)</mo><mo>âˆ</mo><msub><mi>Ï€</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mi>p</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mo>âˆ</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo></mrow><mrow><mo>âˆ</mo><msub><mi>Ï€</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{p_{\theta&#x27;}(\tau)}{p_\theta(\tau)}=\frac{p(s_1)\prod\pi_\theta(a_t|s_t)p(s_{t+1}|s_t,a_t)}{p(s_1)\prod \pi_{\theta&#x27;}(a_t|s_t)p(s_{t+1}|s_t,a_t)}=\frac{\prod \pi_\theta(a_t|s_t)}{\prod\pi_{\theta&#x27;}(a_t|s_t)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.36301em;vertical-align:-0.93601em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.6859999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.6859999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>å› æ­¤å¯ä»¥å¾—åˆ° Important samplingä¸‹çš„ç›®æ ‡å‡½æ•°çš„æœŸæœ›</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi>J</mi><mo>(</mo><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>=</mo><msub><mi>E</mi><mrow><mi>Ï„</mi><mo>âˆ’</mo><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></msub><mo>[</mo><mfrac><mrow><msub><mi>p</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow><mrow><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></mfrac><msub><mi mathvariant="normal">âˆ‡</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>(</mo><mi>r</mi><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>âˆ’</mo><mi>b</mi><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\nabla_{\theta&#x27;} J(\theta&#x27;)=E_{\tau-p_\theta(\tau)}[\frac{p_{\theta&#x27;}(\tau)}{p_\theta(\tau)}\nabla_{\theta&#x27;}log\pi_{\theta&#x27;}(\tau)(r(\tau)-b)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.363em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi>J</mi><mo>(</mo><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>=</mo><msub><mi>E</mi><mrow><mi>Ï„</mi><mo>âˆ’</mo><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></msub><mo>[</mo><mfrac><mrow><mo>âˆ</mo><msub><mi>Ï€</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi mathvariant="normal">âˆ£</mi><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo></mrow><mrow><mo>âˆ</mo><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo></mrow></mfrac><msub><mi mathvariant="normal">âˆ‡</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>(</mo><mi>r</mi><mo>(</mo><mi>Ï„</mi><mo>)</mo><mo>âˆ’</mo><mi>b</mi><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\nabla_{\theta&#x27;} J(\theta&#x27;)=E_{\tau-p_\theta(\tau)}[\frac{\prod \pi_{\theta&#x27;}|(a_t|s_t)}{\prod\pi_{\theta}(a_t|s_t)}\nabla_{\theta&#x27;}log\pi_{\theta&#x27;}(\tau)(r(\tau)-b)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.36301em;vertical-align:-0.93601em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.6859999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>ç»§ç»­æˆ‘ä»¬ä¹‹å‰çš„causalityçš„è¯´æ˜ï¼Œæ‰€ä»¥é‡‡æ ·æƒ…å†µä¸‹ä¸Šé¢å±•å¼€å¾—åˆ°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi>J</mi><mo>(</mo><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>=</mo><msub><mi>E</mi><mrow><mi>Ï„</mi><mo>âˆ’</mo><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></msub><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi mathvariant="normal">âˆ‡</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo>(</mo><mo>âˆ</mo><mo>âˆ—</mo><msup><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msup><mfrac><mrow><mi>Ï€</mi><mo>âˆ—</mo><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mi mathvariant="normal">âˆ£</mi><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow><mrow><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mi mathvariant="normal">âˆ£</mi><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow></mfrac><mo>)</mo><mo>(</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mi>T</mi></msubsup><mo>(</mo><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>âˆ’</mo><mi>b</mi><mo>)</mo><mo>(</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msubsup><mo>âˆ</mo><mo>âˆ—</mo><msup><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msup><mfrac><mrow><mi>Ï€</mi><mo>âˆ—</mo><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msubsup><mi mathvariant="normal">âˆ£</mi><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow><mrow><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msubsup><mi mathvariant="normal">âˆ£</mi><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow></mfrac><mo>)</mo><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\nabla_{\theta&#x27;} J(\theta&#x27;)=E_{\tau-p_\theta(\tau)}[\Sigma_{t=1}^T \nabla_{\theta&#x27;}log\pi_{\theta&#x27;}(a_t|s_t)(\prod *{t&#x27;=1}^T\frac{\pi*{\theta&#x27;}(a_t&#x27;|s_t&#x27;)}{\pi_{\theta}(a_t&#x27;|s_t&#x27;)})(\Sigma_{t&#x27;=t}^T(r(s_{t&#x27;},a_{t&#x27;}-b)(\Sigma_{t&#x27;&#x27;=t}^{t&#x27;}\prod *{t&#x27;=1}^T\frac{\pi*{\theta&#x27;}(a_t&#x27;&#x27;|s_t&#x27;&#x27;)}{\pi_{\theta}(a_t&#x27;&#x27;|s_t&#x27;&#x27;)}))] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.428892em;"></span><span class="strut bottom" style="height:2.364892em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="op-symbol large-op mop" style="top:-0.000004999999999977245em;">âˆ</span><span class="mord">âˆ—</span><span class="mord"><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span><span class="vlist"><span style="top:-0.41589200000000004em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mbin">âˆ—</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord scriptscriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="op-symbol large-op mop" style="top:-0.000004999999999977245em;">âˆ</span><span class="mord">âˆ—</span><span class="mord"><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span><span class="vlist"><span style="top:-0.41589200000000004em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mbin">âˆ—</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>é€šå¸¸reward to goé‡Œçš„åˆ†å¸ƒä¼šåˆ æ‰ï¼Œå› æ­¤ä¸å½±å“ç»“æœï¼ˆpaperä¸­æœ‰ï¼‰</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msubsup><mo>âˆ</mo><mo>âˆ—</mo><msup><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msup><mfrac><mrow><mi>Ï€</mi><mo>âˆ—</mo><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msubsup><mi mathvariant="normal">âˆ£</mi><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow><mrow><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msubsup><mi mathvariant="normal">âˆ£</mi><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow></mfrac><mo>)</mo></mrow><annotation encoding="application/x-tex">(\Sigma_{t&#x27;&#x27;=t}^{t&#x27;}\prod *{t&#x27;=1}^T\frac{\pi*{\theta&#x27;}(a_t&#x27;&#x27;|s_t&#x27;&#x27;)}{\pi_{\theta}(a_t&#x27;&#x27;|s_t&#x27;&#x27;)}) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.428892em;"></span><span class="strut bottom" style="height:2.364892em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord scriptscriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="op-symbol large-op mop" style="top:-0.000004999999999977245em;">âˆ</span><span class="mord">âˆ—</span><span class="mord"><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span><span class="vlist"><span style="top:-0.41589200000000004em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mbin">âˆ—</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p><p>åŒæ—¶å¯ä»¥æ”¹å˜ç­–ç•¥çš„æ¯”å€¼ï¼Œè¿™ä¸ªåœ¨ä¹‹åè¯¾ç¨‹ä¸­ä¼šè®²åˆ°,è¿™é‡Œé‡‡ç”¨first- order approximationï¼Œ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âˆ</mo><mo>âˆ—</mo><msup><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msup><mfrac><mrow><mi>Ï€</mi><mo>âˆ—</mo><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo></mrow><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo></mrow></mfrac><mfrac><mrow><msub><mi>Ï€</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mi mathvariant="normal">âˆ£</mi><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow><mrow><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mi mathvariant="normal">âˆ£</mi><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow></mfrac><mo>=</mo><mo>âˆ</mo><mo>âˆ—</mo><msup><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msup><mfrac><mrow><mi>Ï€</mi><mo>âˆ—</mo><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><mo>(</mo><msub><mi>a</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow><mrow><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo separator="true">,</mo><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\prod *{t&#x27;=1}^T\frac{\pi*{\theta&#x27;}(s_{i,t})}{\pi_\theta(s_{i,t})}\frac{\pi_{\theta&#x27;}(a_t&#x27;|s_t&#x27;)}{\pi_{\theta}(a_t&#x27;|s_t&#x27;)}=\prod *{t&#x27;=1}^T\frac{\pi*{\theta&#x27;}(a_{t&#x27;},s_t&#x27;)}{\pi_{\theta}(a_t&#x27;,s_t&#x27;)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.428892em;"></span><span class="strut bottom" style="height:2.401em;vertical-align:-0.972108em;"></span><span class="base displaystyle textstyle uncramped"><span class="op-symbol large-op mop" style="top:-0.000004999999999977245em;">âˆ</span><span class="mord">âˆ—</span><span class="mord"><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span><span class="vlist"><span style="top:-0.41589200000000004em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.6859999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mbin">âˆ—</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="op-symbol large-op mop" style="top:-0.000004999999999977245em;">âˆ</span><span class="mord">âˆ—</span><span class="mord"><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span><span class="vlist"><span style="top:-0.41589200000000004em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mbin">âˆ—</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>å› æ­¤å¾—åˆ°Off-Policy Policy gradient with important samplingçš„ç›®æ ‡å‡½æ•°æ¢¯åº¦ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi>J</mi><mo>(</mo><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi mathvariant="normal">âˆ‡</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo>(</mo><mo>âˆ</mo><mo>âˆ—</mo><msup><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msup><mfrac><mrow><mi>Ï€</mi><mo>âˆ—</mo><mrow><msup><mi>Î¸</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow><mo>(</mo><msub><mi>a</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow><mrow><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msubsup><mi>a</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo separator="true">,</mo><msubsup><mi>s</mi><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msubsup><mo>)</mo></mrow></mfrac><mo>)</mo><msub><mover accent="true"><mi>Q</mi><mo>^</mo></mover><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">\nabla_{\theta&#x27;} J(\theta&#x27;)=\frac{1}{N}\Sigma_{i=1}^N[\Sigma_{t=1}^T \nabla_{\theta&#x27;}log\pi_{\theta&#x27;}(a_t|s_t)(\prod *{t&#x27;=1}^T\frac{\pi*{\theta&#x27;}(a_{t&#x27;},s_t&#x27;)}{\pi_{\theta}(a_t&#x27;,s_t&#x27;)}) \hat Q_{i,t}] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.428892em;"></span><span class="strut bottom" style="height:2.364892em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="op-symbol large-op mop" style="top:-0.000004999999999977245em;">âˆ</span><span class="mord">âˆ—</span><span class="mord"><span class="mord displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span><span class="vlist"><span style="top:-0.41589200000000004em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.24575599999999992em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.34479999999999994em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mbin">âˆ—</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit">Q</span></span><span style="top:-0.25233em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span></span></p><p>ä½œä¸ºå¯¹æ¯”ä¹‹å‰çš„on- policy gradientæ˜¯ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>J</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>N</mi></mrow></mfrac><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi mathvariant="normal">âˆ‡</mi><mi>Î¸</mi></msub><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub><mo>)</mo><mo>]</mo><msub><mover accent="true"><mi>Q</mi><mo>^</mo></mover><mrow><mi>i</mi><mo separator="true">,</mo><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\nabla_\theta J(\theta)=\frac{1}{N}\Sigma_{i=1}^N[\Sigma_{t=1}^T \nabla_\theta log \pi_\theta(a_{i,t}|s_{i,t})]\hat Q_{i,t} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathrm">âˆ‡</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit">Q</span></span><span style="top:-0.25233em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><h2 id="0x05-ä»£ç å®ç°"><a class="markdownIt-Anchor" href="#0x05-ä»£ç å®ç°"></a> 0x05 ä»£ç å®ç°</h2><p>å‚è€ƒ<a href="https://hrl.boyuai.com/chapter/2/%E7%AD%96%E7%95%A5%E6%A2%AF%E5%BA%A6%E7%AE%97%E6%B3%95">ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹</a></p><p>é¦–å…ˆå‡ ä¸ªæœ‰è¶£çš„å‘ç°</p><ol><li>åœ¨CartPole-v0æˆåŠŸçš„ä¸ä¸€å®šèƒ½åœ¨MountainCar-v0ä¸­å®ç°ï¼Œè¿™ä¸ªä¸å¥–åŠ±å‡½æ•°çš„è®¾ç½®å…³ç³»å¾ˆå¤§ï¼ˆå°è½¦æ²¡æœ‰ä¸Šå±±ä¹‹å‰éƒ½æ˜¯-1ï¼Œè¢«æ‰“å‡»åˆ°äº†ï¼‰</li><li>ä¸åŒçš„è¶…å‚æ•°å¯¹æœ€ç»ˆç»“æœå½±å“å¾ˆå¤§</li><li>æ¨èä½¿ç”¨GYM 0.21ç‰ˆæœ¬ï¼›æœ€æ–°ç‰ˆæœ¬æ€»ä¼šå‡ºé—®é¢˜</li></ol><h3 id="51-ç¯å¢ƒæ­å»º"><a class="markdownIt-Anchor" href="#51-ç¯å¢ƒæ­å»º"></a> 5.1 ç¯å¢ƒæ­å»º</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section">## ç¯å¢ƒè¯´æ˜ï¼šCartpole-v0 </span><br>æˆ‘ä»¬é‡‡ç”¨çš„æµ‹è¯•ç¯å¢ƒæ˜¯ CartPole-v0ï¼Œå…¶çŠ¶æ€ç©ºé—´ç›¸å¯¹ç®€å•ï¼Œåªæœ‰ 4 ä¸ªå˜é‡ï¼Œå› æ­¤ç½‘ç»œç»“æ„<br>çš„è®¾è®¡ä¹Ÿç›¸å¯¹ç®€å•ï¼šé‡‡ç”¨ä¸€å±‚ 128 ä¸ªç¥ç»å…ƒçš„å…¨è¿æ¥å¹¶ä»¥ ReLU ä½œä¸ºæ¿€æ´»å‡½æ•°ã€‚å½“é‡åˆ°æ›´å¤<br>æ‚çš„è¯¸å¦‚ä»¥å›¾åƒä½œä¸ºè¾“å…¥çš„ç¯å¢ƒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘é‡‡ç”¨æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œã€‚<br><span class="hljs-section"># å¼•å…¥ä¸€äº›åŒ…</span><br>from pyvirtualdisplay import Display<br>display = Display(visible=0, size=(1400, 900))<br>display.start()<br><br>import matplotlib.pyplot as plt<br>from IPython import display<br>import time<br>from IPython import display<br>from PIL import Image<br>import gym<br>import torch<br>import torch.nn.functional as F<br>import numpy as np<br>import matplotlib.pyplot as plt<br>from tqdm import tqdm<br></code></pre></td></tr></table></figure><h3 id="52-å®šä¹‰policy-net"><a class="markdownIt-Anchor" href="#52-å®šä¹‰policy-net"></a> 5.2 å®šä¹‰Policy net</h3><p>è¾“å…¥æ˜¯stateï¼Œè¾“å‡ºæ˜¯actionã€‚éšä¾¿ä¸€ä¸ªæµ…å±‚MLPå°±å¤Ÿäº†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PolicyNet</span>(torch.nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,state_dim,hidden_dim,action_dim</span>):<br>        <span class="hljs-built_in">super</span>(PolicyNet,self).__init__()<br>        self.fc1=torch.nn.Linear(state_dim,hidden_dim)<br>        self.fc2=torch.nn.Linear(hidden_dim,action_dim)<br>        <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> self.modules():<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(m, torch.nn.Linear):<br>                torch.nn.init.normal_(m.weight, std=<span class="hljs-number">0.01</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self,x</span>):<br>        x=F.relu(self.fc1(x))<br>        <span class="hljs-keyword">return</span> F.softmax(self.fc2(x),dim=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><h3 id="53-å®šä¹‰ç®—æ³•"><a class="markdownIt-Anchor" href="#53-å®šä¹‰ç®—æ³•"></a> 5.3 å®šä¹‰ç®—æ³•</h3><p>ä¸‰æ­¥ï¼Œé¦–å…ˆsample generationã€ç„¶åpolicy evaluateï¼Œä¹‹åæ˜¯improve policy</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> traitlets <span class="hljs-keyword">import</span> observe<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">REINFORCE</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,state_dim,hidden_dim,action_dim,learning_rate,gamma,device</span>):<br>        self.policy_net=PolicyNet(state_dim,hidden_dim,action_dim).to(device)<br>        self.optimizer=torch.optim.Adam(self.policy_net.parameters(),lr=learning_rate)<br>        self.gamma=gamma<br>        self.device=device<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">take_action</span>(<span class="hljs-params">self,state</span>):<br>        <span class="hljs-comment"># æ ¹æ®åŠ¨ä½œæ¦‚ç‡åˆ†å¸ƒéšæœºé‡‡æ ·</span><br>        state=torch.tensor([state],dtype=torch.<span class="hljs-built_in">float</span>).to(self.device)<br>        probs=self.policy_net(state)<br>        action_dist=torch.distributions.Categorical(probs)<br>        action=action_dist.sample()<br>        <span class="hljs-keyword">return</span> action.item()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self,transition_dict</span>):<br>        reward_list=transition_dict[<span class="hljs-string">&#x27;rewards&#x27;</span>]<br>        state_list=transition_dict[<span class="hljs-string">&#x27;states&#x27;</span>]<br>        action_list=transition_dict[<span class="hljs-string">&#x27;actions&#x27;</span>]<br><br>        G=<span class="hljs-number">0</span><br>        self.optimizer.zero_grad()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(reward_list))):<br>            <span class="hljs-comment"># ä»æœ€åä¸€æ­¥å¼€å§‹</span><br>            state=torch.tensor([state_list[i]],dtype=torch.<span class="hljs-built_in">float</span>).to(self.device)<br>            reward=reward_list[i]<br>            action=torch.tensor([action_list[i]]).view(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>).to(self.device)<br>            log_prob=torch.log(self.policy_net(state).gather(<span class="hljs-number">1</span>,action))<br>            G=self.gamma*G+reward<br>            loss=-log_prob*G<br>            loss.backward()<br>        self.optimizer.step()<br></code></pre></td></tr></table></figure><h3 id="53-å¼€å§‹å®éªŒ"><a class="markdownIt-Anchor" href="#53-å¼€å§‹å®éªŒ"></a> 5.3 å¼€å§‹å®éªŒ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs python">learning_rate=<span class="hljs-number">0.001</span><br>num_episodes=<span class="hljs-number">1000</span><br>hidden_dim=<span class="hljs-number">128</span><br>gamma=<span class="hljs-number">0.98</span><br>device=torch.device(<span class="hljs-string">&#x27;cuda&#x27;</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;cpu&#x27;</span>)<br>env_name=<span class="hljs-string">&#x27;CartPole-v0&#x27;</span><br><span class="hljs-comment"># env_name=&#x27;MountainCar-v0&#x27;</span><br><span class="hljs-comment"># env_name=&#x27;LunarLander-v2&#x27;</span><br><span class="hljs-comment">## è§‚å¯Ÿç¯å¢ƒ</span><br><br>env=gym.make(env_name)<br>env.seed(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;state:&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(env.observation_space.dtype))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;action:&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(env.action_space))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;state shape:&#123;&#125;~&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(env.observation_space.low,env.observation_space.high))<br>torch.manual_seed(<span class="hljs-number">0</span>)<br>state_dim=env.observation_space.shape[<span class="hljs-number">0</span>]<br>action_dim=env.action_space.n<br>agent=REINFORCE(state_dim,hidden_dim,action_dim,learning_rate,gamma,device)<br>return_list = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>    <span class="hljs-keyword">with</span> tqdm(total=<span class="hljs-built_in">int</span>(num_episodes / <span class="hljs-number">10</span>), desc=<span class="hljs-string">&#x27;Iteration %d&#x27;</span> % i) <span class="hljs-keyword">as</span> pbar:<br>        <span class="hljs-keyword">for</span> i_episode <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(num_episodes / <span class="hljs-number">10</span>)):<br>            episode_return = <span class="hljs-number">0</span><br>            transition_dict = &#123;<br>                <span class="hljs-string">&#x27;states&#x27;</span>: [],<br>                <span class="hljs-string">&#x27;actions&#x27;</span>: [],<br>                <span class="hljs-string">&#x27;next_states&#x27;</span>: [],<br>                <span class="hljs-string">&#x27;rewards&#x27;</span>: [],<br>                <span class="hljs-string">&#x27;dones&#x27;</span>: []<br>            &#125;<br><br>            state = env.reset()<br>            <span class="hljs-comment"># æ¸…é™¤å½“å‰ Cell çš„è¾“å‡º</span><br>            done = <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> done:<br>                action = agent.take_action(state)<br>                next_state, reward, done, _ = env.step(action)<br>                transition_dict[<span class="hljs-string">&#x27;states&#x27;</span>].append(state)<br>                transition_dict[<span class="hljs-string">&#x27;actions&#x27;</span>].append(action)<br>                transition_dict[<span class="hljs-string">&#x27;next_states&#x27;</span>].append(next_state)<br>                <span class="hljs-comment"># special for Mountain</span><br>                <span class="hljs-comment"># reward=(next_state[0]+1)**5</span><br>                <span class="hljs-comment"># if abs(next_state[1])&gt;0.04:</span><br>                <span class="hljs-comment">#     reward+=1</span><br>                transition_dict[<span class="hljs-string">&#x27;rewards&#x27;</span>].append(reward)<br>                transition_dict[<span class="hljs-string">&#x27;dones&#x27;</span>].append(done)<br>                state = next_state<br>                episode_return += reward<br>            return_list.append(episode_return)<br>            agent.update(transition_dict)<br>            <span class="hljs-keyword">if</span> (i_episode + <span class="hljs-number">1</span>) % <span class="hljs-number">10</span> == <span class="hljs-number">0</span>:<br>                pbar.set_postfix(&#123;<br>                    <span class="hljs-string">&#x27;episode&#x27;</span>:<br>                    <span class="hljs-string">&#x27;%d&#x27;</span> % (num_episodes / <span class="hljs-number">10</span> * i + i_episode + <span class="hljs-number">1</span>),<br>                    <span class="hljs-string">&#x27;return&#x27;</span>:<br>                    <span class="hljs-string">&#x27;%.3f&#x27;</span> % np.mean(return_list[-<span class="hljs-number">10</span>:])<br>                &#125;)<br>            pbar.update(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bbba8e21-036e-4367-b445-11be4e03b94b/Untitled.png" alt="Untitled" /></p><p>å‡å¦‚è®¾ç½®ä¸‰å±‚ç½‘ç»œç»“æœæœ‰ç‚¹å¥‡æ€ªï¼Œä½†æ˜¯policyæ˜¯å¥½çš„</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ikhi2wvjj30za0s0tby.jpg" alt="ä¸¤å±‚ç»“æœ" /></p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ikhy1hu7j30xs0roju6.jpg" alt="ä¸‰å±‚ç¥ç»ç½‘ç»œï¼Œä½†æ˜¯policyå¥½çš„" /></p><h3 id="54-è§‚å¯Ÿ"><a class="markdownIt-Anchor" href="#54-è§‚å¯Ÿ"></a> 5.4 è§‚å¯Ÿ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">done = <span class="hljs-literal">False</span><br>state = env.reset()<br>flag=<span class="hljs-number">1</span><br>    <span class="hljs-comment"># é˜²æ­¢åˆ·æ–°è¿‡å¿«</span><br><span class="hljs-keyword">while</span> flag&lt;<span class="hljs-number">100</span>:<br>    action = agent.take_action(state)<br>    next_state, reward, done, _ = env.step(action)<br>    state=next_state<br>    <span class="hljs-comment"># æ¸…é™¤å½“å‰ Cell çš„è¾“å‡º</span><br>    display.clear_output(wait=<span class="hljs-literal">True</span>)<br>    <span class="hljs-comment"># æ¸²æŸ“ç”»é¢ï¼Œå¾—åˆ°ç”»é¢çš„åƒç´ æ•°ç»„</span><br>    rgb_array = env.render(mode=<span class="hljs-string">&#x27;rgb_array&#x27;</span>)<br>    <span class="hljs-comment"># ä½¿ç”¨åƒç´ æ•°ç»„ç”Ÿæˆå›¾ç‰‡</span><br>    img = Image.fromarray(rgb_array)<br>    <span class="hljs-comment"># å½“å‰ Cell ä¸­å±•ç¤ºå›¾ç‰‡</span><br>    display.display(img)<br>    time.sleep(<span class="hljs-number">1</span>/<span class="hljs-number">24</span>)<br>    flag+=<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªæ˜¯2å±‚ï¼Œç¬¬äºŒæ˜¯3å±‚</p><p>è§†é¢‘å¯ä»¥çœ‹<a href="https://www.notion.so/clouddirty/Lecture-05-Policy-Gradients-9384f9b7ad1f49d5aa326f66b97f05eb#3d9149bbd9b642ce926f0df2f0bf62f0">https://www.notion.so/clouddirty/Lecture-05-Policy-Gradients-9384f9b7ad1f49d5aa326f66b97f05eb#3d9149bbd9b642ce926f0df2f0bf62f0</a></p>]]></content>
    
    
    <categories>
      
      <category>CS285</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS285_Lecture04_Introduction_to_Reinforcement_Learning</title>
    <link href="/posts/e1096304.html"/>
    <url>/posts/e1096304.html</url>
    
    <content type="html"><![CDATA[<p>Sergev Levineçš„è¯¾è®²å¼ºåŒ–å­¦ä¹ æˆ‘å”¯ä¸€å¬å¾—æ‡‚ä¸åŒå¼ºåŒ–å­¦ä¹ ç©¶ç«Ÿæœ‰å“ªäº›åˆ†ç±»ï¼ŒåŒæ—¶æ˜¯å¦‚ä½•è¿›è¡Œåˆ†ç±»çš„ã€‚æœ¬æ¬¡Lectureçš„ç›®æ ‡æ˜¯å®Œå–„å®šä¹‰Definitionä¸è®°å·notationï¼Œå¹¶è®¤æ¸…æ¥šRL objectiveï¼Œå¹¶ç»™å‡ºå…·ä½“å¼ºåŒ–å­¦ä¹ ç®—æ³•çš„æ€»ç»“ã€‚</p><span id="more"></span><h2 id="0x01-definition-of-a-mdp"><a class="markdownIt-Anchor" href="#0x01-definition-of-a-mdp"></a> 0x01 Definition of a MDP</h2><h3 id="11-recap-rl-with-imitation-learning"><a class="markdownIt-Anchor" href="#11-recap-rl-with-imitation-learning"></a> 1.1 Recap RL with imitation learning</h3><p>æˆ‘ä»¬åœ¨ä¹‹å‰çš„<a href="https://blog.tjdata.site/posts/7d84bcc6.html">Lecture02-<em><strong>*Supervised_Learning_of_Behavior*</strong></em></a>ä¸­è®¤è¯†äº†Notationï¼Œä»¥åŠimitation learningçš„å±€é™æ€§ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯éœ€è¦ä¸€ä¸ªä¸“å®¶æ™ºèƒ½ä½“æˆ–è€…äººå·¥æ¥æä¾›æ•°æ®ã€‚ä½†æ˜¯æ˜¾ç„¶è¿™æ˜¯ä¸å¯è¡Œçš„ã€‚æ‰€ä»¥é¦–å…ˆæˆ‘ä»¬éœ€è¦è®¤è¯†åˆ°æˆ‘ä»¬çš„ä»»åŠ¡åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿæˆ–è®¸æˆ‘ä»¬ä¸çŸ¥é“ä»»åŠ¡å…·ä½“æ ·å­ï¼Œä½†æˆ‘ä»¬çŸ¥é“å®ƒå’Œæˆ‘ä»¬çŠ¶æ€è½¬å˜åºåˆ—ä¸­çš„æ¯ä¸€æ­¥çš„rewardæœ‰å…³ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æˆ‘ä»¬observation=çœ‹åˆ°çº¢ç¯çš„æƒ…å†µä¸‹ï¼Œaction=åœè½¦å¾€å¾€ä»£è¡¨æ›´é«˜çš„rewardï¼Œå¦‚æœaction=å¼€è½¦é—¯è¿‡äº¤å‰å£å¾€å¾€ä»£è¡¨è´Ÿçš„rewardã€‚</p><h2 id="0x02-definition-of-reinforcement-learning-problem"><a class="markdownIt-Anchor" href="#0x02-definition-of-reinforcement-learning-problem"></a> 0x02 Definition of Reinforcement learning problem</h2><p>åœ¨ä¹‹å‰çš„<a href="https://blog.tjdata.site/posts/3e3a5c92.html">å¼ºåŒ–å­¦ä¹ -åŸºæœ¬æ¦‚å¿µ</a>ä¸­å·²ç»ç»™å‡ºMPã€MDPã€MRPçš„å®šä¹‰ï¼Œè¿™é‡Œç»™å‡ºCS285å®˜æ–¹å¯¹äºMDPå’ŒPOMDPï¼ˆPartial observation MDPï¼Œæš‚æ—¶ä¸è®¨è®ºï¼‰çš„è®°å·</p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ghd1zmu5j312s0i6dhj.jpg" alt="image-20221024165643496" style="zoom:50%;" /><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ghdfylnsj312k0nqn02.jpg" alt="image-20221024165705565" style="zoom:50%;" /><p>åœ¨å¼ºåŒ–å­¦ä¹ è¿‡ç¨‹ä¸­ state-observation- action- stateè½¬å˜ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†ï¼ˆs_1,a_1,...,s_T,a_Tï¼‰æ ‡è®°ä¸ºä¸€ä¸ªtrajectoryï¼Œä¸åŒè½¨è¿¹çš„æ¦‚ç‡å¯ä»¥ç”±ä¸‹å›¾è¡¨ç¤ºï¼›ç”±äºçŠ¶æ€s1æ˜¯éšæœºå˜é‡ï¼Œç­–ç•¥ä¹Ÿä¼šè¾“å‡ºä¸åŒçš„å€¼ï¼Œå› æ­¤è¿™é‡Œé€šå¸¸æ˜¯å…·æœ‰æŒ‡æ•°çš„trajectoryï¼Œå› æ­¤é€šå¸¸åªèƒ½ç”¨é‡‡æ ·çš„æ–¹æ³•æ¥è¿‘ä¼¼çš„æè¿°æ€»ä½“ã€‚</p><p>p_{\theta}(\Tau=\tau)=p(s_1)\prod \limits_{i=0}^T\pi_{\theta}(a_t|s_t)p(s_{t+1}|s_t,a_t)</p><p>å¦‚æœæˆ‘ä»¬çŸ¥é“æ‰€æœ‰å¯èƒ½çš„è½¨è¿¹çš„æ¦‚ç‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½æ±‚è§£å‡ºæˆ‘ä»¬ç­–ç•¥å¯¹åº”çš„æœŸæœ›;å¾ˆ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>E</mi><mrow><mi>Ï„</mi><mo>âˆ’</mo><msub><mi>p</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></msub><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>T</mi></msubsup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">E_{\tau-p_{\theta}(\tau)}[\Sigma _{i=0}^Tr(s_t,a_t)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.2465309999999998em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>å¾ˆä¸å¹¸çš„æ˜¯ï¼Œåœ¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï„</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span></span></span></span>çš„æ¦‚ç‡åˆ†å¸ƒä¸­ï¼Œæˆ‘ä»¬ä¸çŸ¥é“<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">s_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>çš„åˆ†å¸ƒï¼Œä¹Ÿä¸çŸ¥é“çŠ¶æ€è½¬ç§»<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">p(s_{t+1}|s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>;ä½†æ˜¯æˆ‘ä»¬æƒ³ç¡®å®šçš„æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\pi_{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼›æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€äº›çŸ¥è¯†æ¥åšæ¼”åŒ–ï¼Œæ¯”å¦‚æˆ‘ä»¬çŸ¥é“<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">(s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>æ˜¯å…·æœ‰MPæ€§è´¨çš„ï¼Œä¹Ÿå°±æ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo><mi mathvariant="normal">âˆ£</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>)</mo><mo>=</mo><mi>p</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msub><mi>a</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">p((s_{t+1},a_{t+1})|(s_t,a_t))=p(s_{t+1}|s_t,a_t)\pi_{\theta}(a_{t+1}|s_{t+1})) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathrm">âˆ£</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ghdwn5ixj31380ciwfc.jpg" alt="image-20221024165732870" /></p><p>é‚£ä¹ˆæˆ‘ä»¬çš„å¥–åŠ±æœŸæœ›å°±å¯ä»¥ç­‰ä»·</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></msubsup><msub><mi>E</mi><mrow><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>âˆ’</mo><msub><mi>p</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow></msub><mo>[</mo><mi>r</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\Sigma_{t=1}^TE_{(s_t,a_t)-p_{\theta}(s_t,a_t)}[r(s_t,a_t)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.2465309999999998em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>å…¶ä¸­çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">p_\theta(s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>è¡¨ç¤ºä¸ºçŠ¶æ€åŠ¨ä½œçš„è¾¹ç¼˜æ¦‚ç‡åˆ†å¸ƒã€‚</p><p>æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æ‰¾åˆ°å®ƒå…¶ä¸­çš„æœ€å¤§å€¼ï¼ŒåŒæ ·çš„å¯¹äºåœºæ™¯ä¸­æˆ‘ä»¬ä¼šç®€å•çš„åŒºåˆ†ä¸ºæœ‰é™åœºæ™¯ä¸æ— é™åœºæ™¯</p><ol><li><p>infinite horizon caseï¼Œæˆ‘ä»¬éœ€è¦æœ€ç»ˆè¾¾åˆ°ç¨³å®šåˆ†å¸ƒï¼ˆstationary distributionï¼‰ï¼Œä¹Ÿå°±æ˜¯çŠ¶æ€çŠ¶æ€ä¸å‘ç”Ÿæ”¹å˜ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¼</mi><mo>=</mo><mi>T</mi><mi>Î¼</mi></mrow><annotation encoding="application/x-tex">\mu=T\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Î¼</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit">Î¼</span></span></span></span>,è¿™æ—¶å€™å®šä¹‰å¹³å‡å›æŠ¥å…¬å¼ï¼ˆæ— æŠ˜æ‰£ï¼‰çš„ç›®æ ‡å‡½æ•°ä¸º 1.</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ghe6yxv0j3130070js3.jpg" alt="image-20221024165749396" /></p></li><li><p>finite horizon case ,æˆ‘ä»¬ä¾æ—§éœ€è¦ state- action marginalæ¥æ±‚è§£</p></li></ol><p>Questionï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æœŸæœ›ï¼Ÿ</p><p>è¯¾ç¨‹ä¸­ç»™å‡ºçš„è§£ç­”æ˜¯åœ¨ç°å®ä¸–ç•Œä¸­çš„æœŸæœ›ä¸è¿ç»­çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡éšæœºæ€§å’ŒæœŸæœ›æˆ‘ä»¬å¯ä»¥å°†å…¶è½¬å˜ç§°ä¸ºè¿ç»­ï¼ˆsmoothï¼‰çš„é—®é¢˜</p><p>PSï¼šä¸ªäººçœ‹æ³•é™¤äº†ä¸Šè¿°ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯RLä¸­æˆ‘ä»¬é€šå¸¸å¸Œæœ›ä½¿ç”¨é‡‡æ ·Samplingçš„æ–¹æ³•æ¥è¿›è¡Œæ±‚è§£ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¯èƒ½ç½—åˆ—å‡ºæ‰€æœ‰çš„å¯èƒ½æ€§ï¼Œè€Œé‡‡æ ·æ–¹æ³•å¾—åˆ°çš„å¾€å¾€æ˜¯æœŸæœ›è€Œä¸æ˜¯ç§¯åˆ†å¼ã€‚å› æ­¤åœ¨RLå¥½çš„samplingæ–¹æ³•ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ã€‚å¸¸è§çš„æœ‰åŸºäºé©¬å°”å¯å¤«è’™ç‰¹å¡æ´›MCMCæ–¹æ³•ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè’™åœ°å¡ç½—ã€é‡è¦æ€§é‡‡æ ·ã€åŸºäºèƒ½é‡é‡‡æ ·ã€Gibbsé‡‡æ ·ç­‰ç­‰å¥‡å¥‡æ€ªæ€ªçš„é‡‡æ ·æ–¹å¼ã€‚</p><h2 id="0x03-anatomy-of-a-rl-algorithm"><a class="markdownIt-Anchor" href="#0x03-anatomy-of-a-rl-algorithm"></a> 0x03 Anatomy of a RL algorithm</h2><p>æˆ‘ä»¬å¯ä»¥å›é¡¾ä¸€ä¸‹ç›‘ç£å­¦ä¹ çš„èŒƒå¼ï¼Œå¯¹äºdatasetï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªå‡è®¾hypothesisï¼Œä¹‹åæˆ‘ä»¬å¯ä»¥åœ¨datasetä¸­åˆ©ç”¨learning modelæ¥é€šè¿‡lossæ¥optimå‡è®¾ä¸­çš„paramï¼Œç„¶åå¾—åˆ°æˆ‘ä»¬çš„modelï¼Œå¹¶å¯ä»¥evaluateã€‚</p><p>å¼ºåŒ–å­¦ä¹ ä¸­çš„æ–¹å¼åŒ…æ‹¬</p><ol><li>generate sampleï¼Œä¸ç¯å¢ƒäº¤äº’æˆ–è€…æ”¶é›†æ ·æœ¬æ¥å¾—åˆ°åŸºç¡€æ•°æ®</li><li>fit a modelæˆ–è€…estimate the returnï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹Ÿåˆä¸€ä¸ªç­–ç•¥ï¼ˆç”¨ç¥ç»ç½‘ç»œï¼‰ï¼›æˆ–è€…è®¡ç®—è½¨è¿¹çš„å¥–åŠ±å€¼ï¼ˆrewardï¼ŸQï¼Ÿvalueï¼Ÿï¼‰æ¥é—´æ¥ååº”å¥½çš„ç­–ç•¥</li><li>improve the policyï¼Œæ— è®ºç¬¬äºŒæ­¥æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ä»€ä¹ˆæ–¹æ³•ï¼Œæˆ‘ä»¬çš„æœ€ç»ˆç›®çš„æ˜¯éœ€è¦æå‡æˆ‘ä»¬çš„policy</li></ol><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7gheq7pvmj314w0mkwhe.jpg" alt="image-20221024165819656" /></p><h2 id="0x04-brief-overview-of-rl-algorithm-types"><a class="markdownIt-Anchor" href="#0x04-brief-overview-of-rl-algorithm-types"></a> 0x04 Brief overview of RL algorithm types</h2><p>åœ¨step2ä¸­ï¼Œæˆ‘ä»¬å¤©ç„¶çš„å¯ä»¥å°†RLç®—æ³•åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯æ˜¯ç›´æ¥æ‹Ÿåˆpolicyçš„ï¼Œä¸€ç±»æ˜¯æ ¹æ®rewardæ¥é—´æ¥åæ˜ policyçš„å¥½åã€‚ä½†æ˜¯rewardå¹¶ä¸æ˜¯å®¹æ˜“è®¡ç®—çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šæœ‰rewardã€Q- functionæˆ–è€…value - function</p><h3 id="41-å…³äºè¯„ä»·policyçš„å¥½å"><a class="markdownIt-Anchor" href="#41-å…³äºè¯„ä»·policyçš„å¥½å"></a> 4.1 å…³äºè¯„ä»·Policyçš„å¥½å</h3><p>æœ€ç›´æ¥çš„æˆ‘ä»¬åœ¨0x02ä¸­å·²ç»å®šä¹‰å¥½äº†ï¼Œæˆ‘ä»¬æ¥å±•å¼€è®¡ç®—å®ƒï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>E</mi><mrow><mi>Ï„</mi><mo>âˆ’</mo><msub><mi>p</mi><mi>Î¸</mi></msub><mo>(</mo><mi>Ï„</mi><mo>)</mo></mrow></msub><mo>[</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>t</mi><mo>=</mo><mi>T</mi></mrow></msubsup><mi>r</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">E_{\tau-p_\theta(\tau)}[\Sigma_{t=1}^{t=T}r(s_t,a_t)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.2465309999999998em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p>=E_{s_1-p_\theta(s_1)}[E_{a_1-\pi(a_1|s_1)}[r(s_1,a_1)+å¾…å®š]ï½œs_1,a_1] <p>å¦‚æœç»§ç»­å†™ä¸‹å»ï¼Œæˆ‘ä»¬ä¼šå‘ç°å…¶ä¸­çš„â€œå¾…å®šâ€œæ˜¯å¯ä»¥é€’å½’çš„å†™ä¸‹å»çš„ï¼Œç›´åˆ°è½¨è¿¹çš„æœ€åï¼Œå‡è®¾æˆ‘ä»¬å®šä¹‰ä¸€ç§å‡½æ•°ï¼Œåç§°ä¸ºQ- function</p>Qï¼ˆs_1,a_1ï¼‰=r(s_1,a_1)+å¾…å®š <p>é‚£ä¹ˆæˆ‘ä»¬çš„æœŸæœ›å¥–åŠ±å°±æˆä¸º</p>E_{\tau-p_\theta(\tau)}[\Sigma_{t=1}^{t=T}r(s_t,a_t)]=E_{s_1-p_\theta(s_1)}[E_{a_1-\pi(a_1|s_1)}[Q(s_1,t_1)]ï½œs_1,a_1] <p>æ›´è¯¦ç»†çš„å®šä¹‰Q- functionï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Q</mi><mi>Ï€</mi></msup><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup><mo>=</mo><mi>t</mi></mrow><mi>T</mi></msubsup><msub><mi>E</mi><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow></msub><mo>[</mo><mi>r</mi><mo>(</mo><msub><mi>s</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo separator="true">,</mo><msub><mi>a</mi><mrow><msup><mi>t</mi><mrow><mi mathvariant="normal">â€²</mi></mrow></msup></mrow></msub><mo>)</mo><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">Q^\pi(s_t,a_t)=\Sigma_{t&#x27;=t}^TE_{\pi_\theta}[r(s_{t&#x27;},a_{t&#x27;})|s_t,a_t] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.1471909999999998em;vertical-align:-0.25586em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathrm">â€²</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span></span></p><p>åœ¨MRPé—®é¢˜ä¸­æˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªçŠ¶æ€ä»·å€¼çš„æ¦‚å¿µï¼ŒåŒæ ·æˆ‘ä»¬è¿™é‡Œå¯ä»¥ç”±state-value- functionï¼Œç”¨æ¥ååº”æ‰€æœ‰è¡Œä¸ºä¸‹çš„æœŸæœ›</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>V</mi><mi>Ï€</mi></msup><mo>(</mo><mi>s</mi><mo>)</mo><mo>=</mo><mi>E</mi><mo>[</mo><msup><mi>Q</mi><mi>Ï€</mi></msup><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>]</mo><mtext>Â </mtext><mi>u</mi><mi>n</mi><mi>d</mi><mi>e</mi><mi>r</mi><mtext>Â </mtext><mi>Ï€</mi><mo>(</mo><mi>a</mi><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">V^\pi(s)=E[Q^\pi(s,a)]\ under\ \pi(a|s) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mclose">]</span><span class="mord mspace">Â </span><span class="mord mathit">u</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mspace">Â </span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span></span></p><p>ä½†æ˜¯è¿™æ ·å¾—åˆ°çš„Qæœ‰ç”¨å—ï¼Ÿ</p><ol><li>ï¼ˆQ- learningï¼‰è¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡æ”¹å˜<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub></mrow><annotation encoding="application/x-tex">\pi_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>æ¥æ”¹å˜æ€»æœŸæœ›å—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å¯¹åº”æ›´å¤§Qå€¼çš„è¡Œä¸ºï¼Œè™½ç„¶è¿™ä¸æ˜¯æ•°å­¦ä¸Šçš„æè¿°ï¼Œä½†æ˜¯å¯ä»¥ç»™æˆ‘ä»¬ç›´è§‰ä¸Šçš„å¯èƒ½æ€§ã€‚</li><li>ï¼ˆActor- criticï¼‰å°½å¯èƒ½é€‰æ‹©Q&gt;Vçš„è¡Œä¸ºï¼Œå› ä¸ºVååº”è¿™ä¸ªçŠ¶æ€ä¸‹æ‰€æœ‰actionçš„å¹³å‡å€¼</li></ol><p>PSï¼šè¿™ä¸€æ®µçœŸæ˜¯å¤ªæ£’äº†ï¼ï¼ï¼</p><h3 id="42-types-of-rl-algorithm"><a class="markdownIt-Anchor" href="#42-types-of-rl-algorithm"></a> 4.2 Types of RL algorithm</h3><p>æ ¹æ®ç¬¬äºŒæ­¥fit modelæˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ˜¯model- based RLï¼Œé€šå¸¸åŒ…æ‹¬</p><ol><li>planingï¼›trajectory optimizationã€optimal controlã€MCTS</li><li>improve a policyï¼Œback propagate gradients into the policy with tricks</li><li>something elseï¼Œdynamic programmingï¼Œsimulated experience for model-free leaner</li><li>åé¢å†è¯´</li></ol><p>å¦‚æœæ˜¯evaluate returnï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ˜¯model- free RLï¼Œé€šå¸¸åŒ…æ‹¬</p><ol><li>policy gradientsï¼Œç›´æ¥è®¡ç®—Objectiveå’Œgradient</li><li>value- basedï¼Œé€šè¿‡å¹³å±€value- functionå’ŒQ- functionæ¥å¯»æ‰¾æ¯”è¾ƒå¥½çš„æ–¹æ³•</li><li>actor- criticï¼Œé€šè¿‡è¯„ä¼°ç°åœ¨çš„value functionå’ŒQ- functionï¼Œç»“åˆPGçš„æƒ³æ³•æ¥æå‡ç­–ç•¥</li></ol><h3 id="43-why-so-many-algorithms"><a class="markdownIt-Anchor" href="#43-why-so-many-algorithms"></a> 4.3 why so many algorithmsï¼Ÿ</h3><p>æ¨¡å‹æœ¬èº«æœ‰efficiency- stabilityï¼›ä¸åŒçš„assumptionï¼›ä»¥åŠä¸åŒé—®é¢˜çš„ä½¿ç”¨åœºæ™¯ï¼›æ­£å¦‚MLä¸­çš„variance-bias tradeoffï¼ŒRLä¸­é€šå¸¸æ˜¯efficiency- stability trade-off</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7gheycofkj313w0bi75p.jpg" alt="image-20221024165833359" /></p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ghf3ji0cj312q0mcgor.jpg" alt="image-20221024165841658" /></p><p>åŒæ—¶ä¸åŒæ¨¡å‹ä¹Ÿä¼šæœ‰ä¸åŒçš„assumptionï¼Œæ¯”å¦‚æ˜¯å¦å…¨è§‚æµ‹ï¼Œæ˜¯å¦è¿ç»­ç­‰</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ghf94j8dj312m0mqn24.jpg" alt="image-20221024165849690" /></p><h3 id="44-example-of-algorithm"><a class="markdownIt-Anchor" href="#44-example-of-algorithm"></a> 4.4 example of algorithm</h3><ol><li>model- based<ol><li>Dyna</li><li>Guided policy search</li></ol></li><li>model - free<ol><li>Policy gradient<ol><li>REINFORCEï¼ˆREward Increments=nonnegative Factor<em>Offset Reinforcement</em>Characteristic+Eligibilityï¼‰</li><li>Natural Policy gradient</li><li>Trust region policy optimization</li></ol></li><li>Value function fitting methods<ol><li>Q- learningï¼ŒDQN</li><li>Temporal difference learning</li><li>Fitted value iteration</li></ol></li><li>Actor- critic algorithms<ol><li>Asynchronous advantage actor- critic</li><li>Soft actor- criticï¼ˆSACï¼‰</li></ol></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>CS285</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS285_Lecture02_Supervised_Learning_of_Behavior</title>
    <link href="/posts/7d84bcc6.html"/>
    <url>/posts/7d84bcc6.html</url>
    
    <content type="html"><![CDATA[<p>ç›®æ ‡æ˜¯æ˜ç™½RLä¸­çš„ä¸€äº›å®šä¹‰ï¼ˆdefinitionï¼‰å’Œè®°å·ï¼ˆnotationï¼‰ï¼Œä¸»è¦æ˜¯ä»MDPçš„å®šä¹‰ï¼Œç„¶åæ¨¡ä»¿å­¦ä¹ ï¼ˆImitation learningï¼‰å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Ïµ</span></span></span></span>-greedy å­¦ä¹ çš„è§’åº¦ä»‹ç»äº†å¼ºåŒ–å­¦ä¹ ä¸­çš„case</p><span id="more"></span><h2 id="0x01-definition-of-sequential-decision-problem"><a class="markdownIt-Anchor" href="#0x01-definition-of-sequential-decision-problem"></a> <strong>0x01 Definition of Sequential decision problem</strong></h2><h3 id="11-æ¦‚ç‡è®º"><a class="markdownIt-Anchor" href="#11-æ¦‚ç‡è®º"></a> 1.1 æ¦‚ç‡è®º</h3><p>å…³äºæ¦‚ç‡è®ºçš„è®°å·ï¼Œä¸ç ”ä¸€è¯¾ç¨‹ã€Šåº”ç”¨ç»Ÿè®¡ã€‹ä¸ä¸€æ ·ã€‚æˆ‘çŒœæƒ³å¤šæ˜¯å…·æœ‰å¦å¤–çš„è§„å®šï¼Œè¿™é‡Œå¼•ç”¨ä»ã€ŠDeep learningã€‹ï¼ˆ2015ï¼ŒLan Goodfellowï¼‰ä¸­çš„è¯´æ˜ï¼š</p><p>éšæœºå˜é‡ï¼ˆrandom variableï¼‰æ˜¯å¯ä»¥éšæœºå–ä¸åŒå€¼çš„å˜é‡ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ— æ ¼å¼å­—ä½“ï¼ˆplain typefaceï¼‰ä¸­çš„å°å†™å­—æ¯è¡¨ç¤ºéšæœºå˜é‡æœ¬èº«ï¼Œç”¨æ‰‹å†™ä½“ä¸­çš„å°å†™å­—æ¯è¡¨ç¤ºéšæœºå˜é‡èƒ½å¤Ÿå–çš„å€¼ã€‚<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_1,x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>è¡¨ç¤ºéšæœºå˜é‡xå¯èƒ½çš„å–å€¼ï¼Œå¯¹äºå‘é‡ï¼ˆvectorï¼‰çš„å˜é‡ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨xï¼Œå¯èƒ½çš„å–å€¼ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>ã€‚æ‰€ä»¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo></mrow><annotation encoding="application/x-tex">p(</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span></span></span></span>x=xï¼‰å¯ä»¥ç®€å†™ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span></p><h3 id="12-å¼ºåŒ–å­¦ä¹ "><a class="markdownIt-Anchor" href="#12-å¼ºåŒ–å­¦ä¹ "></a> 1.2 å¼ºåŒ–å­¦ä¹ </h3><p>ä¸å¼ºåŒ–å­¦ä¹ å…¸ä¸­å…¸çš„ï¼šç¯å¢ƒï¼ˆEnvironmentï¼‰ä¸æ™ºèƒ½ä½“ï¼ˆAgentï¼‰å’ŒåŠ¨ä½œï¼ˆActionï¼‰ä¸‰è€…äº¤äº’ç±»ä¼¼ï¼ŒCS285è¯¾ç¨‹åŒæ ·ä»¥è¿™æ ·çš„ä¾‹å­ä½œä¸ºå¼€ç«¯ï¼Œå¹¶åˆ©ç”¨æ¦‚ç‡å›¾çš„æ–¹å¼æ¥åˆ†æè¿™ä¸ªè¿‡ç¨‹ã€‚</p><ul><li>ï¼ˆç¬¬ä¸€å±‚ï¼‰åœ¨è‰åŸè¿™ä¸ªç¯å¢ƒä¸­çœ‹åˆ°äº†æŸä¸ªä¸œè¥¿ï¼Œç„¶åæˆ‘ä»¬åˆ¤åˆ«å‡ºæ¥å®ƒæ˜¯è€è™ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬é€šå¸¸åšå‡ºæŸä¸ªåŠ¨ä½œï¼Œä½†æ˜¯æˆ‘ä»¬çš„åŠ¨ä½œä¹Ÿä¼šå½±å“è‰åŸç¯å¢ƒï¼Œè¿›è€Œå½±å“è€è™çš„åŠ¨ä½œ</li><li>ï¼ˆç¬¬äºŒå±‚ï¼‰ï¼Œå‡è®¾è‰åŸç¯å¢ƒä½œä¸ºEnvironmentï¼ŒæŸä¸ªæ—¶é—´ç‚¹çš„çŠ¶æ€ä¸ºStateï¼Œæˆ‘ä»¬ä½œä¸ºAgenté€šè¿‡çœ‹è®¤è¯†è¿™ä¸ªçŠ¶æ€å¾—åˆ°Observationï¼ˆè€è™çš„æ¦‚ç‡ä¸º0.99ï¼ŒçŒ«çš„æ¦‚ç‡ä¸º0.01ï¼‰ï¼Œä¹‹åæˆ‘ä»¬ä¼šæ ¹æ®Observationæ¥é‡‡å–Policy( <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>o</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\pi_\theta(a_t|o_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>)ï¼ˆå¦‚æœæ˜¯è€è™ï¼Œåˆ™é€ƒè·‘æ¦‚ç‡=0.9ï¼Œå½“å® ç‰©=0.1ï¼›å¦‚æœæ˜¯çŒ«ï¼Œåˆ™é€ƒè·‘æ¦‚ç‡=0.1ï¼Œå½“å® ç‰©=0.9ï¼‰ï¼›ä¹‹åæˆ‘ä»¬çš„åŠ¨ä½œactionç»“åˆç°æœ‰çš„stateä¼šå½±å“ä¸‹ä¸€æ­¥çš„next-state</li><li>(ç¬¬ä¸‰å±‚ï¼‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">s_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>å¾—åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>o</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">o_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼Œä¹‹åæ ¹æ®ç­–ç•¥å¾—åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>t</mi></msub><mo>=</mo><msub><mi mathvariant="normal">Î </mi><mi>Î¸</mi></msub><mo>(</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>o</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">a_t=\Pi_\theta(a_t|o_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î </span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>,å†å½±å“ä¸‹ä¸€æ­¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>P</mi><mo>(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">s_{t+1}=P(s_{t+1}|s_t,a_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼›state â€” observation â€” action â€” next_stateâ€¦</li></ul><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬ä¼šæœ‰å‡ ä¸ªç–‘é—®ï¼š</p><ol><li>æ™ºèƒ½ä½“å¯¹ç¯å¢ƒæ˜¯å¦æ˜¯å®Œå…¨è§‚æµ‹ï¼ˆfully observeï¼‰ï¼Œè¿™ç›´æ¥ä¼šå½±å“æˆ‘ä»¬å­¦ä¹ çš„ç­–ç•¥ï¼Œé€šå¸¸åˆ†ä¸º\pi_\theta(a_t|s_t)æˆ–è€…\pi_\theta(o_t|s_t) ï¼Œç»å¸¸ä¼šå‡ºé”™</li><li>ç”±å›¾å¯ä»¥çœ‹å‡ºçŠ¶æ€è½¬ç§»ï¼ˆstate transitï¼‰æ˜¯å…·æœ‰é©¬å°”å¯å¤«æ€§è´¨ï¼ˆMarkov propertyï¼‰ï¼Œä½†æ˜¯observationä¸ä¸€å®šã€actionä¹Ÿä¸ä¸€å®šã€policyä¹Ÿä¸ä¸€å®š</li><li>æˆ‘ä»¬çš„objectiveè¿˜ä¸ç¡®å®š</li></ol><p>åœ¨ä¸æ˜ç™½ç›®æ ‡æƒ…å†µä¸‹ï¼Œä¸å¦‚å»çœ‹ä¸€ç§ç®€å•çš„æ–¹å¼æ˜¯å¦‚ä½•å­¦ä¹ çš„</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7getc5ancj314w0nqn0j.jpg" alt="image-20221024152834540" /></p><p>PSï¼šå¼ºåŒ–å­¦ä¹ çš„è®°å·é€šå¸¸è®¤ä¸ºæ˜¯ç ”ç©¶è¿ç­¹æˆ–åŠ¨æ€è§„åˆ’ï¼ˆDynamic programmingï¼‰çš„Richard Bellmanå’Œç ”ç©¶è‡ªåŠ¨æ§åˆ¶çš„Lev Pontryaginä¸åŒçš„å‘å±•ã€‚</p><h2 id="0x02-imitation-learning"><a class="markdownIt-Anchor" href="#0x02-imitation-learning"></a> <strong>0x02 Imitation Learning</strong></h2><p>åœ¨Lecture01ä¸­è™½ç„¶å¯¹æ¯”äº†å¼ºåŒ–å­¦ä¹ ï¼ˆreinforcement learningï¼‰ä¸ç›‘ç£å­¦ä¹ ï¼ˆsupervised learningï¼‰ä¹‹é—´çš„å·®åˆ«ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾æ—§ä¼šå‘ç°ä¸¤è€…ä¹‹é—´ç›¸ä¼¼çš„åœ°æ–¹</p><p><strong>ç»™å‡ºä¸€ä¸ªstateæˆ–è€…observationï¼Œæ¥è¾“å‡ºä¸€ä¸ªaction</strong></p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥å‡è®¾å­˜åœ¨ä¸€ä¸ªä¸“å®¶æ™ºèƒ½ä½“ï¼Œå…¶ç­–ç•¥å¯ä»¥çœ‹æˆæœ€ä¼˜ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¨¡ä»¿è¿™ä¸ªä¸“å®¶åœ¨ç¯å¢ƒä¸­äº¤äº’çŠ¶æ€åŠ¨ä½œï¼ˆstateï¼Œactionï¼‰æ•°æ®æ¥è®­ç»ƒä¸€ä¸ªpolicyï¼Œè€Œä¸éœ€è¦ç¯å¢ƒæä¾›çš„rewardï¼Œè¿™æ ·ä¾¿æ˜¯imitation learningç ”ç©¶çš„é—®é¢˜ï¼Œä¸éœ€è¦rewardä¿¡å·å˜å¯ä»¥è¾¾åˆ°ä¸€ä¸ªä¸“å®¶ç­–ç•¥ï¼Œå¸¸ç”¨çš„æ–¹æ³•åˆ†ä¸º</p><ol><li>Behaviour Cloning</li><li>Inverse RL</li><li>Generative Adversarial Imitation Learningï¼ŒGAIL</li></ol><h3 id="21-behaviour-cloning"><a class="markdownIt-Anchor" href="#21-behaviour-cloning"></a> 2.1 Behaviour cloning</h3><p>è¾“å…¥ï¼ˆs_tï¼Œa_tï¼‰ä¸­çš„stateä½œä¸ºæ ·æœ¬è¾“å…¥ï¼Œactionä½œä¸ºæ ‡ç­¾ï¼Œç›®æ ‡ä¸º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Î¸</mi><mo>âˆ—</mo></msup><mo>=</mo><mi>a</mi><mi>r</mi><mi>g</mi><mi>m</mi><mi>i</mi><msub><mi>n</mi><mi>Î¸</mi></msub><msub><mi>E</mi><mrow><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>âˆ’</mo><mi>Ï„</mi></mrow></msub><mo>[</mo><mi>L</mi><mo>(</mo><msub><mi>Ï€</mi><mi>Î¸</mi></msub><mo>(</mo><mi>s</mi><mo>)</mo><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\theta^*=argmin_\theta E_{(s,a)- \tau}[L(\pi_\theta(s),a)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.1052em;vertical-align:-0.3551999999999999em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord">âˆ—</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathit">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p><strong>Does it ok? â€” No</strong></p><p>åœ¨æ•°æ®é‡è¾ƒå°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªèƒ½å¾—åˆ°å°‘é‡çš„ä¸“å®¶æ•°æ®ä½œä¸ºè®­ç»ƒï¼Œå› æ­¤åªæœ‰åœ¨æ•°æ®é›†çš„åˆ†å¸ƒä¸‹é¢„æµ‹å‡†ç¡®ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬ä¸æ–­ç»å†state- observation- action- stateçš„å¾ªç¯ï¼Œå¹¶ä¸æ˜¯ç›‘ç£å­¦ä¹ çš„ä¸€æ¬¡ç»ˆæ­¢ï¼Œå› æ­¤æˆ‘ä»¬çš„æ¯æ¬¡åå·®éƒ½ä¼šç´¯ç§¯ï¼Œäº§ç”Ÿå¤åˆç‰©å·®ï¼ˆcompounding errorï¼‰çš„é—®é¢˜ï¼Œå¯¼è‡´å·®è·æ¥è¶Šæ¥å¤§è€Œå¤±è´¥ã€‚</p><p><img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/74e6a340-4a13-4510-9346-e8245997d62b/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221024%2Fus-west-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20221024T072857Z&amp;X-Amz-Expires=86400&amp;X-Amz-Signature=d2b5cfffb43cede993ee20eef195515f58c6275241b3572a7a27a2b506cf5e5f&amp;X-Amz-SignedHeaders=host&amp;response-content-disposition=filename%20%3D%22Untitled.png%22&amp;x-id=GetObject" alt="img" /></p><p><strong>Does it okï¼Ÿyesï¼Œbut more data</strong></p><p>ä½†æ˜¯åœ¨å…·æœ‰å¾ˆå¤šæ•°æ®çš„æƒ…å†µä¸‹æ˜¯å¯ä»¥å®ç°çš„ï¼Œæ¯”å¦‚****<a href="https://arxiv.org/abs/1604.07316">End to End Learning for Self-Driving Cars</a>æ–‡ç« ä¸­æ”¶é›†äº†è¶³å¤Ÿå¤šçš„æ•°æ®æ¥å®ç°è¿è¡Œçš„ç¨³å®šæ€§**</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7geu6kqg3j31360n0ad3.jpg" alt="image-20221024152923468" /></p><p><strong>How we make it more offenï¼Ÿ</strong></p><p>æˆ‘ä»¬åˆ†æä¹‹é—´ä¹‹å‰ä¸åŒ trajectoryäº§ç”Ÿåå·®çš„åŸå› æ˜¯ç”±äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi></mrow></msub><mo>(</mo><msub><mi>o</mi><mi>t</mi></msub><mo>)</mo><mo>!</mo><mo>=</mo><msub><mi>p</mi><mrow><msub><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow></msub></mrow></msub><mo>(</mo><msub><mi>o</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">p_{data}(o_t)!=p_{\pi_{\theta}}(o_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.00586em;vertical-align:-0.25586em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">d</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">a</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">!</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">p</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>,å› æ­¤æˆ‘ä»¬å¸Œæœ›ç”¨æŸç§æ–¹å¼æ¥ä¿è¯ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ DAggerï¼ˆDataset Aggregationï¼‰ï¼š</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7geuhk3ruj30uq098q3z.jpg" alt="image-20221024152938796" /></p><p>ä½†æ˜¯ç¬¬ä¸€ç‚¹ï¼šäººå·¥æ ‡è®°æœ¬èº«å°±ä¸å¯é ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ç›¸åŒçš„åœºæ™¯ä¸‹ä¹Ÿä¼šå‡ºç°ä¸åŒçš„è¡Œä¸ºï¼ŒåŒæ—¶æˆ‘ä»¬çš„åŠ¨ä½œä¼šå’Œä¸€å®šçš„è®°å¿†æœ‰å…³ï¼›ç¬¬äºŒç‚¹æˆ‘ä»¬åœ¨å¤æ‚åœºæ™¯ä¸­å¾ˆéš¾å‡†ç¡®ç»™å‡ºæ–°çš„stateçš„actionï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šæˆ‘ä»¬ä¾æ—§éœ€è¦å­¦ä¹ æœºå™¨ï¼Œæˆ‘ä»¬éœ€è¦åºåˆ—å­¦ä¹ çš„æ¦‚å¿µ</p><p>å½“ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CNN+RNNçš„ç‰¹ç‚¹ï¼Œä»–ä»¬ä¾æ—§åªæ˜¯å¤æ‚çš„æ¨¡ä»¿å­¦ä¹ ï¼Œå¹¶æ²¡æœ‰è§£å†³åˆ†å¸ƒä¸åŒ¹é…çš„é—®é¢˜ã€‚æ€»æ˜¯æˆ‘ä»¬ç”¨DAggeræ¥è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œä¾æ—§åªæ˜¯åœ¨ç‰¹å®šåœºæ™¯ä¸‹å…·æœ‰å¯èƒ½æ€§ã€‚</p><h2 id="0x03-a-little-bit-of-theory-for-imitation-learning"><a class="markdownIt-Anchor" href="#0x03-a-little-bit-of-theory-for-imitation-learning"></a> <strong>0x03 A little bit of theory</strong> for imitation learning</h2><p><strong>å¯ä»¥ä¸çœ‹ï¼Œå› ä¸ºçœ‹ä¸æ‡‚ï¼</strong></p><p>ç»“åˆä¹‹å‰åŸºæœ¬æ¦‚å¿µé‡Œçš„MRPï¼ˆMarkov reward processï¼‰æˆ‘ä»¬å¯ä»¥ç†è§£rewardï¼Œå› æ­¤åœ¨ä¸€æ®µè½¨è¿¹ä¸­æˆ‘ä»¬å¸Œæœ›,é¦–å…ˆæˆ‘ä»¬å®šä¹‰cost</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><msub><mi>E</mi><mrow><mi>s</mi><mn>1</mn><mo>âˆ’</mo><mi>t</mi><mo separator="true">,</mo><mi>a</mi><mn>1</mn><mo>âˆ’</mo><mi>t</mi></mrow></msub><mo>[</mo><mi mathvariant="normal">Î£</mi><mi>c</mi><mo>(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">min E_{s1-t,a1-t}[\Sigma c(s_t,a_t)] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">s</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord mathit">t</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathrm">Î£</span><span class="mord mathit">c</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>åŒæ—¶coståé¢ç­‰äºå¥–åŠ±ï¼Œä¹Ÿå°±æ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mo>âˆ’</mo><mi>c</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">r(s,a)=-c(s,a) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord">âˆ’</span><span class="mord mathit">c</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span></span></p><p>æˆ‘ä»¬å°†çœŸå®çš„ç­–ç•¥è¡¨ç¤ºä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow><mo>âˆ—</mo></msubsup><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\pi^*_{\theta}(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.008804em;vertical-align:-0.2588039999999999em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.2588039999999999em;margin-left:-0.03588em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord">âˆ—</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span>ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å¥–åŠ±å‡½æ•°åº”è¯¥æ˜¯</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>p</mi><mo>(</mo><mi>a</mi><mo>=</mo><msubsup><mi>Ï€</mi><mrow><mi>Î¸</mi></mrow><mo>âˆ—</mo></msubsup><mo>(</mo><mi>s</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">r(s,a)=log p(a=\pi^*_{\theta}(s))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.008804em;vertical-align:-0.2588039999999999em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="vlist"><span style="top:0.2588039999999999em;margin-left:-0.03588em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord">âˆ—</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>y</p><p>å› æ­¤åœ¨é‡‡æ ·é”™è¯¯ç‡ä½äºä¸€å®šç¨‹åº¦ä¹‹ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7geurlea5j31400maq68.jpg" alt="image-20221024152956985" /></p><p>æ”¹è¿›ä¹‹åæˆ‘ä»¬æœ‰éœ€è¦å…¶ä»–çš„æ–¹å¼æ¥å­¦ä¹ ï¼Œè¿™ç§ä¸»è¦æ˜¯ç”Ÿæˆæ¨¡å‹äº†ï½</p><h3 id="31-ç”Ÿæˆå¯¹æŠ—æ¨¡å‹å­¦ä¹ generative-adverbial-imitation-learning"><a class="markdownIt-Anchor" href="#31-ç”Ÿæˆå¯¹æŠ—æ¨¡å‹å­¦ä¹ generative-adverbial-imitation-learning"></a> 3.1 ç”Ÿæˆå¯¹æŠ—æ¨¡å‹å­¦ä¹ ï¼ˆgenerative adverbial imitation learningï¼‰</h3><p>æ‘˜è‡ª<a href="https://hrl.boyuai.com/chapter/3/%E6%A8%A1%E4%BB%BF%E5%AD%A6%E4%B9%A0">åŠ¨æ‰‹å­¦å¼ºåŒ–å­¦ä¹ </a></p><p>ï¼ˆgenerative adversarial imitation learningï¼ŒGAILï¼‰æ˜¯ 2016 å¹´ç”±æ–¯å¦ç¦å¤§å­¦ç ”ç©¶å›¢é˜Ÿæå‡ºçš„åŸºäºç”Ÿæˆå¼å¯¹æŠ—ç½‘ç»œçš„æ¨¡ä»¿å­¦ä¹ ï¼Œå®ƒè¯ é‡Šäº†ç”Ÿæˆå¼å¯¹æŠ—ç½‘ç»œçš„æœ¬è´¨å…¶å®å°±æ˜¯æ¨¡ä»¿å­¦ä¹ ã€‚GAIL å®è´¨ä¸Šæ˜¯æ¨¡ä»¿äº†ä¸“å®¶ç­–ç•¥çš„å ç”¨åº¦é‡å³å°½é‡ä½¿å¾—ç­–ç•¥åœ¨ç¯å¢ƒä¸­çš„æ‰€æœ‰çŠ¶æ€åŠ¨ä½œå¯¹çš„å ç”¨åº¦é‡å’Œä¸“å®¶ç­–ç•¥çš„å ç”¨åº¦é‡ä¸€è‡´ã€‚ä¸ºäº†è¾¾æˆè¿™ä¸ªç›®æ ‡ï¼Œç­–ç•¥éœ€è¦å’Œç¯å¢ƒè¿›è¡Œäº¤äº’ï¼Œæ”¶é›†ä¸‹ä¸€ä¸ªçŠ¶æ€çš„ä¿¡æ¯å¹¶è¿›ä¸€æ­¥åšå‡ºåŠ¨ä½œã€‚è¿™ä¸€ç‚¹å’Œ BC ä¸åŒï¼ŒBC å®Œå…¨ä¸éœ€è¦å’Œç¯å¢ƒäº¤äº’ã€‚GAIL ç®—æ³•ä¸­æœ‰ä¸€ä¸ªåˆ¤åˆ«å™¨å’Œä¸€ä¸ªç­–ç•¥ï¼Œç­–ç•¥å°±ç›¸å½“äºæ˜¯ç”Ÿæˆå¼å¯¹æŠ—ç½‘ç»œä¸­çš„<strong>ç”Ÿæˆå™¨</strong>ï¼ˆgeneratorï¼‰ï¼Œç»™å®šä¸€ä¸ªçŠ¶æ€ï¼Œç­–ç•¥ä¼šè¾“å‡ºè¿™ä¸ªçŠ¶æ€ä¸‹åº”è¯¥é‡‡å–çš„åŠ¨ä½œï¼Œè€Œ<strong>åˆ¤åˆ«å™¨</strong>ï¼ˆdiscriminatorï¼‰å°†çŠ¶æ€åŠ¨ä½œå¯¹ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºä¸€ä¸ª 0 åˆ° 1 ä¹‹é—´çš„å®æ•°ï¼Œè¡¨ç¤ºåˆ¤åˆ«å™¨è®¤ä¸ºè¯¥çŠ¶æ€åŠ¨ä½œå¯¹æ˜¯æ¥è‡ªæ™ºèƒ½ä½“ç­–ç•¥è€Œéä¸“å®¶çš„æ¦‚ç‡ã€‚åˆ¤åˆ«å™¨çš„ç›®æ ‡æ˜¯å°½é‡å°†ä¸“å®¶æ•°æ®çš„è¾“å‡ºé è¿‘ 0ï¼Œå°†æ¨¡ä»¿è€…ç­–ç•¥çš„è¾“å‡ºé è¿‘ 1ï¼Œè¿™æ ·å°±å¯ä»¥å°†ä¸¤ç»„æ•°æ®åˆ†è¾¨å¼€æ¥ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7gev0mzw6j30ke0h4aar.jpg" alt="image-20221024153011985" /></p><h2 id="0x04-æ€»ç»“"><a class="markdownIt-Anchor" href="#0x04-æ€»ç»“"></a> <strong>0x04 æ€»ç»“</strong></h2><p>Lecture02ä¸»è¦è¿˜æ˜¯åˆ©ç”¨imitation learningä»‹ç»äº†</p><ol><li>ç›‘ç£å­¦ä¹ ç”¨äºå¼ºåŒ–å­¦ä¹ çš„å±€é™æ€§</li><li>å¼ºåŒ–å­¦ä¹ çš„notation</li></ol><p>ä¸‹ä¸€ç« æ˜¯åŠå…¶Fancyçš„å¼ºåŒ–å­¦ä¹ æ–¹æ³•çš„æ€»ç»“</p>]]></content>
    
    
    <categories>
      
      <category>CS285</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 05_å¾ªç¯ç¥ç»ç½‘ç»œRNNåŠå˜ç§</title>
    <link href="/posts/2e4e1168.html"/>
    <url>/posts/2e4e1168.html</url>
    
    <content type="html"><![CDATA[<p>æ‰¿æ¥ä¸Šä¸€ä¼šå¯¹Attentionä¸­seq2seqçš„æ¨¡å‹çš„å›°æƒ‘ï¼Œè¿™é‡Œä»RNNåˆ°ä»‹ç»åˆ°æ›´ä¼ ç»Ÿçš„Seq2Seqæ¨¡å‹ã€‚åŒæ—¶ç»“åˆæœ€è¿‘æ¥è§¦çš„èŠ±ä¹¦æ¥åˆ©ç”¨æ›´æœ‰åˆ©çš„å·¥å…·è§£é‡ŠRNNä¸­çš„æ¢¯åº¦ã€‚å¹¶ç»™å‡ºåºåˆ—å­¦ä¹ ä¸­å¯¹äºgradientæˆ–è€…hidden stateè½¬å˜çš„è¿‡ç¨‹ï¼Œåœ¨é’ˆå¯¹hidden stateä¸­çš„è½¬å˜ä¸­å¼•ç”³å‡ºGRUã€LSTMä¹‹ç±»çš„å˜ç§ï¼Œå¹¶ç»“åˆD@Lç»™å‡ºä»£ç çš„å®ç°ã€‚</p><span id="more"></span><h2 id="0x01-åºåˆ—å­¦ä¹ ä¸rnn"><a class="markdownIt-Anchor" href="#0x01-åºåˆ—å­¦ä¹ ä¸rnn"></a> 0x01 åºåˆ—å­¦ä¹ ä¸RNN</h2><h3 id="11-åºåˆ—å­¦ä¹ seq2seq"><a class="markdownIt-Anchor" href="#11-åºåˆ—å­¦ä¹ seq2seq"></a> 1.1 åºåˆ—å­¦ä¹ Seq2Seq</h3><p>è¾“å…¥ä¸è¾“å‡ºå‡ä¸ºåºåˆ—æ•°æ®çš„æ¨¡å‹å«åšSeq2Seqï¼Œæ³¨æ„è¿™é‡Œä¸åœ¨æŒ‰ç…§ä¼ ç»Ÿçš„ç›‘ç£æˆ–è€…éç›‘ç£çš„æ–¹å¼æ¥é™å®šæ¨¡å‹çš„ç±»å‹ã€‚å¸¸è§åºåˆ—æ¨¡å‹çš„åº”ç”¨åŒ…æ‹¬ï¼šè¯­éŸ³è¯†åˆ«Speech recognitionã€éŸ³ä¹ç”ŸæˆMusic generationã€æƒ…æ„Ÿåˆ†æ Sentiment classificationã€DNAåºåˆ—åˆ†æDNA sequence analysisã€æœºå™¨ç¿»è¯‘Machine translationã€è§†é¢‘è¡Œä¸ºè¯†åˆ«Video activity recognitionã€å‘½åå®ä½“è¯†åˆ«Name entity recognitionã€‚</p><p>åœ¨Seq2Seqè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¾ˆéš¾åƒMLPæˆ–è€…CNNå¾—åˆ°ä¸€ä¸ªæ˜ç¡®çš„ featureï¼Œlabelï¼›å¹¶ä¸”åºåˆ—æ•°æ®å¤§å¤šæ˜¯æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ¥è¿›è¡Œçš„ï¼Œæ¯”å¦‚æ–‡æœ¬åºåˆ—ã€è§†é¢‘ä¿¡å·ã€ç½‘ç«™æµè§ˆè¡Œä¸ºç­‰ç­‰ï¼Œå¹¶ä¸æ»¡è¶³ä¹‹å‰çš„ç‹¬ç«‹åŒåˆ†å¸ƒçš„å‡è®¾ã€‚</p><p>ä¸ºä»€ä¹ˆRNNç±»ä¼¼çš„ç½‘ç»œåœ¨Seqä¸­ä¼šå–å¾—å¥½çš„æ•ˆæœï¼Ÿä¸»è¦æ˜¯è§£å†³20ä¸–çºª80å¹´ä»£æœºå™¨å­¦ä¹ å’Œç»Ÿè®¡æ¨¡å‹çš„æ€æƒ³çš„ä¼˜ç‚¹ï¼šåœ¨æ¨¡å‹çš„ä¸åŒéƒ¨åˆ†å…±äº«å‚æ•°ã€‚<strong>å‚æ•°å…±äº«</strong>ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæ‹“å±•åˆ°ä¸åŒå½¢å¼çš„æ ·æœ¬å¹¶è¿›è¡Œæ³›åŒ–ã€‚speciallyï¼šå‡å¦‚åœ¨seqçš„æ¯ä¸€ä¸ªæ—¶é—´ç‚¹éƒ½å…·æœ‰ä¸€ä¸ªå•ç‹¬çš„å‚æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½æ³›åŒ–æˆ‘ä»¬æ²¡æœ‰è§è¿‡çš„ç±»å‹ï¼Œä¹Ÿä¸èƒ½åœ¨æ—¶é—´ä¸Šå…±äº«ä¸åŒåºåˆ—é•¿åº¦å’Œä¸åŒä½ç½®çš„ç»Ÿè®¡å¼ºåº¦ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿä¸èƒ½ç†è§£ä¸åŒé¡ºåºseqçš„å«ä¹‰ï¼ˆæ¯”å¦‚In 2009ï¼ŒI went to Nepalå’ŒI went to Nepal in 2009ä¹‹é—´çš„åŒºåˆ«ï¼‰</p><p>Shortlyï¼šRNNçš„ä¼˜åŠ¿ä¸»è¦æ˜¯</p><ol><li>è·¨æ—¶é—´æƒé‡å…±äº«</li><li>æ—¶é—´å¹³ç§»ä¸å¯¹ç§°</li><li>åŒä¸€æ¶æ„é€‚åº”ä¸åŒé•¿åº¦</li></ol><h3 id="12-rnnç»“æ„å‰å‘ä¼ æ’­-forward-propagation"><a class="markdownIt-Anchor" href="#12-rnnç»“æ„å‰å‘ä¼ æ’­-forward-propagation"></a> 1.2 RNNç»“æ„å‰å‘ä¼ æ’­ Forward Propagation</h3><p>è¿™é‡Œå…ˆä¸ç®¡RNNå†…éƒ¨çš„å…·ä½“ç»“æ„çš„åŸå› ï¼Œåªè¦çŸ¥é“RNNåŒ…æ‹¬æ—¶é—´æ­¥çš„inputå’Œoutputä»¥åŠhidden stateå°±å¯ä»¥ï¼ŒåŸå› åœ¨åé¢ä¼šè¯´æ˜ã€‚è®¡ç®—å›¾æ˜¯å½¢å¼åŒ–ä¸€ç»„è®¡ç®—ç»“æ„çš„æ–¹å¼ï¼Œå¦‚æœè®¾è®¡å°†è¾“å…¥å’Œå‚æ•°æ˜ å°„åˆ°è¾“å‡ºå’ŒæŸå¤±çš„è®¡ç®—ã€‚</p><p>å…ˆå‡è®¾æ•°æ®é›†ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>=</mo><mo>(</mo><msup><mi>x</mi><mn>1</mn></msup><mo separator="true">,</mo><msup><mi>x</mi><mn>2</mn></msup><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msup><mi>x</mi><mi>t</mi></msup><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>)</mo><msup><mrow><mi mathvariant="double-struck">R</mi></mrow><mrow><mi>n</mi><mo>Ã—</mo><mi>d</mi></mrow></msup></mrow><annotation encoding="application/x-tex">X=(x^1,x^2,..,x^t,...)\mathbb{R}^{n \times d}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.849108em;"></span><span class="strut bottom" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mrel">=</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mclose">)</span><span class=""><span class="mord textstyle uncramped"><span class="mord mathbb">R</span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mbin">Ã—</span><span class="mord mathit">d</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>é€šå¸¸çš„è®­ç»ƒè¿‡ç¨‹æ˜¯å°†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>H</mi><mi>t</mi></msup><mo>âˆˆ</mo><mrow><msup><mi mathvariant="double-struck">R</mi><mrow><mn mathvariant="normal">1</mn><mo>Ã—</mo><mi>h</mi></mrow></msup></mrow></mrow><annotation encoding="application/x-tex">H^t\in \mathbb{R^{1 \times h}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.849108em;"></span><span class="strut bottom" style="height:0.888208em;vertical-align:-0.0391em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆˆ</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathbb">R</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">Ã—</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span>ä½œä¸ºhidden stateæ¥è¿›è¡Œåˆ†æï¼Œå®ƒæ˜¯æ ¹æ®ä¸‹å¼å­è¿›è¡Œæ›´æ–°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>H</mi><mi>t</mi></msup><mo>=</mo><mi>f</mi><mo>(</mo><msup><mi>H</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo separator="true">,</mo><msup><mi>x</mi><mi>t</mi></msup><mo separator="true">;</mo><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">H^t=f(H^{t-1},x^t;\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.864108em;"></span><span class="strut bottom" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">;</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></p><p>å¦‚æœé‡‡ç”¨ç¥ç»ç½‘ç»œï¼Œæ ¼å¼é€šå¸¸æ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>H</mi><mi>t</mi></msup><mo>=</mo><mi>Ï•</mi><mo>(</mo><msup><mi>x</mi><mrow><mi>t</mi></mrow></msup><msub><mi>W</mi><mrow><mi>x</mi><mi>h</mi></mrow></msub><mo>+</mo><msup><mi>H</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><msub><mi>W</mi><mrow><mi>h</mi><mi>h</mi></mrow></msub><mo>+</mo><msub><mi>b</mi><mi>h</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">H^t=\phi(x^{t}W_{xh}+H^{t-1}W_{hh}+b_h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.864108em;"></span><span class="strut bottom" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">Ï•</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">x</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">h</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å…¶ä¸­å„é¡¹çš„åˆ†åˆ«ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>x</mi><mi>h</mi></mrow></msub><mo>âˆˆ</mo><msup><mrow><mi mathvariant="double-struck">R</mi></mrow><mrow><mi>d</mi><mo>Ã—</mo><mi>h</mi></mrow></msup><mo separator="true">,</mo><msub><mi>W</mi><mrow><mi>h</mi><mi>h</mi></mrow></msub><mo>âˆˆ</mo><msup><mrow><mi mathvariant="double-struck">R</mi></mrow><mrow><mi>h</mi><mo>Ã—</mo><mi>h</mi></mrow></msup><mo separator="true">,</mo><msub><mi>b</mi><mi>h</mi></msub><mo>âˆˆ</mo><msup><mrow><mi mathvariant="double-struck">R</mi></mrow><mrow><mn>1</mn><mo>Ã—</mo><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">W_{xh}\in \mathbb{R}^{d\times h},W_{hh}\in\mathbb{R}^{h\times h},b_h\in\mathbb{R}^{1\times h}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.849108em;"></span><span class="strut bottom" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">x</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆˆ</span><span class=""><span class="mord textstyle uncramped"><span class="mord mathbb">R</span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">d</span><span class="mbin">Ã—</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆˆ</span><span class=""><span class="mord textstyle uncramped"><span class="mord mathbb">R</span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">h</span><span class="mbin">Ã—</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">h</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆˆ</span><span class=""><span class="mord textstyle uncramped"><span class="mord mathbb">R</span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">Ã—</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>åœ¨å¾—åˆ°hidden stateæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥çŠ¶æ€è½¬æ¢ï¼Œä¹Ÿå¯ä»¥è¾“å‡ºå½“å‰çš„å€¼</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>O</mi><mi>t</mi></msup><mo>=</mo><mi>g</mi><mo>(</mo><msup><mi>H</mi><mi>t</mi></msup><mo separator="true">;</mo><msub><mi>Î¸</mi><mi>o</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">O^t=g(H^t;\theta_o)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.843556em;"></span><span class="strut bottom" style="height:1.093556em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">;</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>O</mi><mi>t</mi></msup><mo>=</mo><mi>t</mi><mi>a</mi><mi>n</mi><mi>h</mi><mo>(</mo><msup><mi>H</mi><mi>t</mi></msup><msub><mi>W</mi><mrow><mi>o</mi><mi>h</mi></mrow></msub><mo>+</mo><msub><mi>b</mi><mi>o</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">O^t=tanh(H^tW_{oh}+b_o)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.843556em;"></span><span class="strut bottom" style="height:1.093556em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">o</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å…¶ä¸­å„é¡¹çš„å½¢çŠ¶ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>o</mi><mi>h</mi></mrow></msub><mo>âˆˆ</mo><msup><mrow><mi mathvariant="double-struck">R</mi></mrow><mrow><mi>h</mi><mo>Ã—</mo><mi>o</mi></mrow></msup><mo separator="true">,</mo><msub><mi>b</mi><mi>o</mi></msub><mo>âˆˆ</mo><msup><mrow><mi mathvariant="double-struck">R</mi></mrow><mrow><mn>1</mn><mo>Ã—</mo><mi>o</mi></mrow></msup></mrow><annotation encoding="application/x-tex">W_{oh}\in\mathbb{R}^{h\times o},b_o\in\mathbb{R}^{1\times o}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.849108em;"></span><span class="strut bottom" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">o</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆˆ</span><span class=""><span class="mord textstyle uncramped"><span class="mord mathbb">R</span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">h</span><span class="mbin">Ã—</span><span class="mord mathit">o</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆˆ</span><span class=""><span class="mord textstyle uncramped"><span class="mord mathbb">R</span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">Ã—</span><span class="mord mathit">o</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>å¾—åˆ°æ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºä¹‹åå°±å¯ä»¥è®¡ç®—æ¨¡å‹çš„æŸå¤±</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>=</mo><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>(</mo><msup><mi>o</mi><mi>t</mi></msup><mo separator="true">,</mo><msup><mi>y</mi><mi>t</mi></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">L=loss(o^t,y^t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.843556em;"></span><span class="strut bottom" style="height:1.093556em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">L</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å¾—åˆ°</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ajy6gd75j316o0u0n6u.jpg" alt="image-20221019135246524" /></p><h3 id="13-åå‘ä¼ æ’­çš„æ¢¯åº¦ä¸‹é™-back-propagation"><a class="markdownIt-Anchor" href="#13-åå‘ä¼ æ’­çš„æ¢¯åº¦ä¸‹é™-back-propagation"></a> 1.3 åå‘ä¼ æ’­çš„æ¢¯åº¦ä¸‹é™ Back Propagation</h3><p>åœ¨ä¹‹å‰ä¸­æˆ‘ä»¬åŒ…æ‹¬è‡³å°‘äº”ä¸ªå‚æ•°ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><msub><mi>W</mi><mrow><mi>x</mi><mi>h</mi></mrow></msub><mo separator="true">,</mo><msub><mi>W</mi><mrow><mi>h</mi><mi>h</mi></mrow></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>h</mi></msub><mo separator="true">,</mo><msub><mi>W</mi><mrow><mi>h</mi><mi>o</mi></mrow></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>o</mi></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">[W_{xh},W_{hh},b_h,W_{ho},b_o]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">x</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">h</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit">o</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">o</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span>,é€šè¿‡ä¸Šå¤„æ›´æ–°çš„å¼å­æˆ‘ä»¬è®¡ç®—ä¸åŒçš„æ¢¯åº¦,æ¯”å¦‚é’ˆå¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>W</mi><mrow><mi>h</mi><mi>h</mi></mrow></msub></mrow><annotation encoding="application/x-tex">W_{hh}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p>\begin{split}\begin{aligned}\frac{\partial L}{\partial w_{hh}}  & = \frac{1}{T}\sum_{t=1}^T \frac{\partial l(y_t, o_t)}{\partial w_{hh}}  \\& = \frac{1}{T}\sum_{t=1}^T \frac{\partial l(y_t, o_t)}{\partial o_t} \frac{\partial g(h_t, \theta_o)}{\partial h_t}  \frac{\partial h_t}{\partial w_{hh}}.\end{aligned}\end{split}<p>æ³¨æ„è¿™é‡Œçš„ç¬¬ä¸€é¡¹æˆ‘ä»¬æ˜¯çŸ¥é“çš„ï¼Œç¬¬äºŒé¡¹æˆ‘ä»¬ä¹Ÿæ˜¯çŸ¥é“çš„ï¼Œä½†æ˜¯ç¬¬ä¸‰é¡¹å®ƒæ˜¯ä¼šä¸€ç›´Recurrentè®¡ç®—ä¸‹å»çš„</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>h</mi><mi>t</mi></msub></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>w</mi><mrow><mi>h</mi><mi>h</mi></mrow></msub></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>f</mi><mo>(</mo><msub><mi>x</mi><mrow><mi>t</mi></mrow></msub><mo separator="true">,</mo><msub><mi>h</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>Î¸</mi><mi>h</mi></msub><mo>)</mo></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>Î¸</mi><mi>h</mi></msub></mrow></mfrac><mo>+</mo><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>f</mi><mo>(</mo><msub><mi>x</mi><mrow><mi>t</mi></mrow></msub><mo separator="true">,</mo><msub><mi>h</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>Î¸</mi><mi>h</mi></msub><mo>)</mo></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>h</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow></mfrac><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>h</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>w</mi><mrow><mi>h</mi><mi>h</mi></mrow></msub></mrow></mfrac><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">\frac{\partial h_t}{\partial w_{hh}}= \frac{\partial f(x_{t},h_{t-1},\theta_h)}{\partial \theta_h} +\frac{\partial f(x_{t},h_{t-1},\theta_h)}{\partial h_{t-1}} \frac{\partial h_{t-1}}{\partial w_{hh}}.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.321331em;vertical-align:-0.894331em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02691em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">h</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">h</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mbin">+</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.6859999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">h</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02691em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord mathrm">.</span></span></span></span></span></p><p>è¿™æ ·æ¢¯åº¦å…¶å®æ˜¯ä¼šéšç€æ—¶é—´tä¸æ–­æ‹‰é•¿ï¼Œè¿™é‡Œé€šå¸¸ç§°ä¸º<strong>é•¿æœŸä¾èµ–</strong>çš„é—®é¢˜è¿™æ ·æˆ‘ä»¬å¯èƒ½å‡ºç°æ¢¯åº¦æ¶ˆå¤±ã€æˆ–è€…æ¢¯åº¦çˆ†ç‚¸çš„æƒ…å†µã€‚å¸¸è§çš„æ“ä½œæœ‰ä¸‰ç§</p><ol><li>å®Œå…¨è®¡ç®—ç›´åˆ°æ”¶æ•›</li><li>é‡‡ç”¨Næ­¥é©¬å°”å¯å¤«æ¨¡å‹ï¼Œæ¥æˆªæ–­æ—¶é—´æ­¥ï¼Œåˆ°è¾¾æ—¶é—´æ­¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï„</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.1132em;">Ï„</span></span></span></span></li><li>é‡‡ç”¨éšæœºæˆªæ–­çš„æ€æƒ³</li></ol><p>è¿˜æœ‰é’ˆå¯¹æ¢¯åº¦çš„ä¸€äº›æ“ä½œï¼Œå¸¸è§çš„æœ‰<strong>æˆªæ–­æ¢¯åº¦</strong>å’Œ<strong>å¼•å¯¼ä¿¡æ¯æµçš„æ­£åˆ™åŒ–</strong>ï¼Œ</p><ul><li>é’ˆå¯¹æ¢¯åº¦çˆ†ç‚¸ï¼Œæˆªæ–­æ¢¯åº¦ä¹Ÿå°±æ˜¯åœ¨å‚æ•°æ›´æ–°ä¹‹å‰æˆªæ–­æ¢¯åº¦çš„èŒƒæ•°ï¼Œåœ¨æ—¶é—´çš„è¿‡ç¨‹ä¸­è¢«è¯æ˜æ˜¯æœ‰ç”¨çš„ã€‚</li><li>é’ˆå¯¹æ¢¯åº¦æ¶ˆå¤±ï¼Œå¼•å¯¼ä¿¡æ¯æµçš„æ­£åˆ™åŒ–ï¼Œä¸€ç§æ˜¯åŠ å…¥é—¨æ§å•å…ƒï¼ˆå¦‚LSTMã€GRUï¼‰ï¼Œä¹Ÿå¯ä»¥è§£å†³æ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜ï¼›ä¸€ç§æ˜¯æ­£åˆ™åŒ–é¡¹ï¼Œåè€…è¢«è¯æ˜ä¸æœ‰æ•ˆ</li></ul><h3 id="14-è¿›ä¸€æ­¥-é«˜çº§ä¸€ç‚¹çš„rnn"><a class="markdownIt-Anchor" href="#14-è¿›ä¸€æ­¥-é«˜çº§ä¸€ç‚¹çš„rnn"></a> 1.4 è¿›ä¸€æ­¥ã€‚é«˜çº§ä¸€ç‚¹çš„RNN</h3><p>åœ¨å•å‘RNNçš„åŸºç¡€ä¸Šï¼Œå¯ä»¥è‡ªç„¶è€Œç„¶çš„è”æƒ³åˆ°</p><ol><li>åŒå‘RNN</li><li>æ·±åº¦RNN</li><li>é€’å½’ç¥ç»ç½‘ç»œï¼Œä¸€ä¸ªæ½œåœ¨çš„ideaæ˜¯ç ”ç©¶æ¨è®º</li><li>å¢åŠ é—¨æ§å•å…ƒçš„ä¸åŒå˜ç§GRUã€LSTM</li><li>åŸºäºencoder- decoderçš„seq2seqæ¡†æ¶</li><li>å›å£°çŠ¶æ€ç½‘ç»œï¼ˆecho state networkï¼‰ï¼Œæµä½“çŠ¶æ€æœºï¼ˆliquid state machinesï¼‰</li></ol><h3 id="15-å›è¿‡å¤´è§£é‡Šrnn"><a class="markdownIt-Anchor" href="#15-å›è¿‡å¤´è§£é‡Šrnn"></a> 1.5 å›è¿‡å¤´è§£é‡ŠRNN</h3><p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥å›é¡¾æˆ‘ä»¬åœ¨æ—¶é—´åºåˆ—é¢„æµ‹ä¸­å¸¸ç”¨çš„ä¸€äº›æ–¹æ³•ï¼šè‡ªå›å½’æ¨¡å‹ã€éšå˜é‡è‡ªå›å½’æ¨¡å‹ã€é©¬å°”å¯å¤«æ¨¡å‹ã€å› æœå…³ç³»æ¨¡å‹ç­‰ç­‰ï¼Œå¸¸ç”¨çš„æ˜¯</p><ul><li><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub><mo>=</mo><mi>P</mi><mo>(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">x_t=P(x_t|x_{t-1},...,x_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p></li></ul><p>å› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥å¸Œæœ›å¾—åˆ°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo>)</mo><mo>=</mo><mi>p</mi><mo>(</mo><msub><mi>x</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>x</mi><mi>t</mi></msub><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><msub><mi>h</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">P(x_t|x_{t-1},...,x_1)=p(x_t|x_t-1,h_{t-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>ä¹Ÿå°±æ˜¯å‡å¦‚ä¸€ä¸ªhidden stateæ¥ä½œä¸ºå¯¹ä¹‹å‰åºåˆ—æ€»ç»“ï¼Œå°†å…¶é€å…¥çŠ¶æ€è½¬å˜ä¸­ã€‚</p><h2 id="0x02-å˜ç§ä¸æ€è€ƒgru-lstm"><a class="markdownIt-Anchor" href="#0x02-å˜ç§ä¸æ€è€ƒgru-lstm"></a> 0x02 å˜ç§ä¸æ€è€ƒGRUã€LSTM</h2><p>æˆ‘ä»¬ä¹‹å‰åˆ†æäº†é•¿æœŸä¾èµ–å¯¹äºæ¢¯åº¦æ¶ˆå¤±æˆ–è€…æ¢¯åº¦çˆ†ç‚¸çš„å½±å“ï¼Œä»å®é™…æ•ˆæœæ¥çœ‹å®ƒçš„å½±å“æ˜¯ï¼š</p><ol><li>æ—©æœŸçš„é¢„æµ‹å€¼å¯¹é¢„æµ‹æ‰€æœ‰æœªæ¥é¢„æµ‹å€¼å…·æœ‰éå¸¸é‡è¦çš„æ„ä¹‰</li><li>ä¸€äº›è¯å…ƒæ²¡æœ‰ç›¸å…³çš„è§‚æµ‹å€¼ï¼Œæ¯”å¦‚å¯¹ç½‘é¡µå†…å®¹è¿›è¡Œæƒ…æ„Ÿåˆ†æå¯èƒ½æœ‰ä¸€äº›è¾…åŠ©HTMLä»£ç ä¸ç½‘é¡µä¼ è¾¾çš„æƒ…ç»ªæ— å…³</li><li>åºåˆ—ä¹‹é—´çš„ä¸åŒéƒ¨åˆ†ä¹‹é—´å­˜åœ¨é€»è¾‘ä¸­æ–­</li></ol><p>åœ¨è¿‡å»é‡‡å–è¿‡å¾ˆå¤šæ–¹æ³•æ¥è¿›è¡Œæ”¹è¿›ï¼Œç›®å‰ä¸»æµçš„æ˜¯ä½¿ç”¨é—¨æ§çš„æ–¹å¼æ¥ç¡®å®šä»€ä¹ˆæ—¶å€™æ›´æ–°hidden stateã€ä»€ä¹ˆæ—¶å€™é‡ç½®resetã€‚</p><p><a href="https://www.google.com.hk/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjmi4L93uv6AhVHed4KHVDfBIEQFnoECAwQAQ&amp;url=http%3A%2F%2Fwww.bioinf.jku.at%2Fpublications%2Folder%2F2604.pdf&amp;usg=AOvVaw3mXlGPo2DVtYp8Vue3sl4y">LSTM</a></p><h3 id="21-gate"><a class="markdownIt-Anchor" href="#21-gate"></a> 2.1 Gate</h3><p>è®¾è®¡ä¸ºï¼ˆ0ï¼Œ1ï¼‰åŒºé—´å†…çš„å‘é‡ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥è¿›è¡Œå‡¸ç»„åˆï¼šreset-gateå…è®¸æˆ‘ä»¬æ§åˆ¶å¯èƒ½è¿˜æƒ³è®°ä½çš„è¿‡å»çŠ¶æ€çš„æ•°é‡ï¼Œæ›´æ–°ä»¬èƒ½è®²å…è®¸æˆ‘ä»¬æ§åˆ¶æ–°çŠ¶æ€ä¸­æœ‰å¤šå°‘æ˜¯æ—§çŠ¶æ€çš„å‰¯æœ¬</p><p>å…·ä½“çš„è®¡ç®—è¿‡ç¨‹å¦‚å›¾ï¼š</p><ul><li><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>R</mi><mi>t</mi></msub><mo>=</mo><mi>Ïƒ</mi><mo>(</mo><msub><mi>X</mi><mi>t</mi></msub><msub><mi>W</mi><mrow><mi>x</mi><mi>r</mi></mrow></msub><mo>+</mo><msub><mi>H</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><msub><mi>W</mi><mrow><mi>h</mi><mi>r</mi></mrow></msub><mo>+</mo><msub><mi>b</mi><mi>r</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">R_t=\sigma (X_tW_{xr}+H_{t-1}W_{hr}+b_r)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">x</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.08125em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p></li><li><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Z</mi><mi>t</mi></msub><mo>=</mo><mi>Ïƒ</mi><mo>(</mo><msub><mi>X</mi><mi>t</mi></msub><msub><mi>W</mi><mrow><mi>x</mi><mi>z</mi></mrow></msub><mo>+</mo><msub><mi>H</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><msub><mi>W</mi><mrow><mi>h</mi><mi>z</mi></mrow></msub><mo>+</mo><msub><mi>b</mi><mi>z</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">Z_t=\sigma (X_tW_{xz}+H_{t-1}W_{hz}+b_z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">x</span><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.08125em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.04398em;">z</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>æ³¨æ„åœ¨æ±‚å’Œè¿‡ç¨‹ä¼šè§¦å‘ å¹¿æ’­æœºåˆ¶,ä½¿ç”¨sigmoidå‡½æ•°å°†å…¶è½¬æ¢åˆ°0ï¼Œ1åŒºé—´ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šæ›´æ–° å€™é€‰éšè—çŠ¶æ€</p></li><li><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mi>H</mi><mo>Â¯</mo></mover><mi>t</mi></msub><mo>=</mo><mi>t</mi><mi>a</mi><mi>n</mi><mi>h</mi><mo>(</mo><msub><mi>X</mi><mi>t</mi></msub><msub><mi>W</mi><mrow><mi>x</mi><mi>h</mi></mrow></msub><mo>+</mo><mo>(</mo><msub><mi>R</mi><mi>t</mi></msub><mo>âŠ—</mo><msub><mi>H</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><msub><mi>W</mi><mrow><mi>h</mi><mi>h</mi></mrow></msub><mo>+</mo><msub><mi>b</mi><mi>h</mi></msub><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">\bar H_t=tanh(X_tW_{xh}+(R_t \otimes H_{t-1}W_{hh}+b_h))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8201099999999999em;"></span><span class="strut bottom" style="height:1.07011em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.08125em;">H</span></span><span style="top:-0.25233em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>Â¯</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.08125em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">x</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âŠ—</span><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.08125em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.13889em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">h</span><span class="mord mathit">h</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">h</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p></li></ul><p>ä½¿ç”¨tanhéçº¿æ€§æ¿€æ´»å‡½æ•°æ¥ä¿è¯hidden stateä¸­çš„å€¼æ˜¯ä¿æŒåœ¨åŒºé—´-1ï¼Œ1ä¹‹é—´çš„ï¼›Hadamarå…ƒç´ è¡¨ç¤ºæŒ‰ç…§å…ƒç´ è¿›è¡Œä¹˜ç§¯æˆ‘ä»¬ç»“åˆæ›´æ–°é—¨æ¥å¯¹å€™é€‰éšè—çŠ¶æ€è¿›è¡Œè¿›ä¸€æ­¥çš„ä¿®æ­£ï¼Œå¾—åˆ°æœ€ç»ˆhidden stateçš„å–å€¼</p><ul><li><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mi>t</mi></msub><mo>=</mo><msub><mi>Z</mi><mi>t</mi></msub><mo>âŠ—</mo><msub><mi>H</mi><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>+</mo><mo>(</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>Z</mi><mi>t</mi></msub><mo>)</mo><mo>âˆ—</mo><msub><mover accent="true"><mi>H</mi><mo>Â¯</mo></mover><mrow><mi>t</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">H_t=Z_t \otimes H_{t-1}+(1-Z_t)*\bar H_{t-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8201099999999999em;"></span><span class="strut bottom" style="height:1.07011em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.08125em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âŠ—</span><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.08125em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ—</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.08125em;">H</span></span><span style="top:-0.25233em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>Â¯</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.08125em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p></li></ul><p>ç”±æ­¤å¾—åˆ°é—¨æ§å¾ªç¯å•å…ƒå…·æœ‰ä¸¤ä¸ªæ˜¾è‘—çš„ç‰¹å¾</p><ul><li>resetæœ‰åŠ©äºæ•è·åºåˆ—ä¸­çš„çŸ­æœŸä¾èµ–å…³ç³»</li><li>updateræœ‰åŠ©äºæ•è·åºåˆ—ä¸­çš„é•¿æœŸä¾èµ–å…³ç³»</li></ul><h3 id="22-gru"><a class="markdownIt-Anchor" href="#22-gru"></a> 2.2 GRU</h3><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7amii4vvxj311a0oq75l.jpg" alt="image-20221019152134663" /></p><h3 id="23-lstm"><a class="markdownIt-Anchor" href="#23-lstm"></a> 2.3 LSTM</h3><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7amhtys6bj30xq0u0q8c.jpg" alt="image-20221019152055705" /></p><h3 id="24-drnn"><a class="markdownIt-Anchor" href="#24-drnn"></a> 2.4 DRNN</h3><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7amj3nijmj30pi0mcaba.jpg" alt="image-20221019152209098" /></p><h3 id="25-brnn"><a class="markdownIt-Anchor" href="#25-brnn"></a> 2.5 BRNN</h3><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7amjcxg6xj30pw0gsmyc.jpg" alt="image-20221019152224395" /></p><h2 id="0x03-é€»è¾‘è¿‡ç¨‹åˆ†æ"><a class="markdownIt-Anchor" href="#0x03-é€»è¾‘è¿‡ç¨‹åˆ†æ"></a> 0x03 é€»è¾‘è¿‡ç¨‹åˆ†æ</h2><h3 id="31-åºåˆ—æ•°æ®è¯»å–exampleæ–‡æœ¬æ•°æ®-token-vocab"><a class="markdownIt-Anchor" href="#31-åºåˆ—æ•°æ®è¯»å–exampleæ–‡æœ¬æ•°æ®-token-vocab"></a> 3.1 åºåˆ—æ•°æ®è¯»å–ï¼ˆexampleï¼šæ–‡æœ¬æ•°æ®ï¼‰-token-vocab</h3><p>é¦–å…ˆæ–‡æœ¬æ•°æ®é›†ä»æ–‡æœ¬è¯»å–å‡ºæ¥æ˜¯è¿™æ ·å­çš„</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7amtdmdsfj31ss0hkk0l.jpg" alt="æ–‡æœ¬æ•°æ®é›†time machine" /></p><p>æˆ‘ä»¬æ€»çš„ideaæ˜¯å¸Œæœ›å°†ä¸Šè¿°ä¸è§„åˆ™çš„æ–‡æœ¬ï¼Œè½¬æ¢ä¸ºå¯ä»¥ç”¨å‘é‡è¡¨ç¤ºçš„æ•°å­—ï¼Œä¸”ä¸ºåºåˆ—æ•°æ®ã€‚Obviouslyï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªè¯å…¸vocabæ¥å°†è¿™äº›è¯è¯­è½¬æ¢ç§°ä¸ºæ•°å­—ã€‚é‚£ä¹ˆè¿™ä¸ªè¯å…¸çš„é¡ºåºæ€ä¹ˆç¡®å®šï¼Ÿé€šå¸¸æ˜¯æ ¹æ®è¯çš„å‡ºç°é¢‘ç‡æ¥å®ç°çš„ã€‚åŒæ—¶å¯¹äºå‡ºç°é¢‘ç‡è¿‡å°‘çš„è¯å¯ä»¥ç”¨<unk>æˆ–è€…å…¶ä»–æ¥è¡¨ç¤ºã€‚åŠ å…¥æˆ‘ä»¬ä½¿ç”¨æ¯ä¸ªå•è¯æ¥è¡¨ç¤ºï¼Œå¾—åˆ°çš„vocabå°±æ˜¯</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7amyzuha1j30sa0hmgou.jpg" alt="vocab-word" /></p><p>é™¤äº†å•è¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å•ä¸ªå­—ç¬¦charæ¥åˆ†å‰²æ•°æ®é›†</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7an0pl9x1j316403mq35.jpg" alt="vocab-word" /></p><h3 id="32-æ•°æ®é¢„å¤„ç†-input-batchsizenum_stepsdataloader"><a class="markdownIt-Anchor" href="#32-æ•°æ®é¢„å¤„ç†-input-batchsizenum_stepsdataloader"></a> 3.2 æ•°æ®é¢„å¤„ç†-inputï¼š batchsizeï¼Œnum_stepsâ€“dataloader</h3><p>åœ¨è¿™ä¸ªåŸºç¡€ä¸Šæˆ‘ä»¬å°±å¯ä»¥ç”Ÿæˆæˆ‘ä»¬çš„dataloaderï¼Œå› ä¸ºseqåºåˆ—å¤©ç„¶å°±æœ‰é¡ºåºæ€§ï¼Œè€Œä¸ºäº†æé«˜æ³›åŒ–æ€§æˆ‘ä»¬å¸Œæœ›ä»–ä»¬å¯ä»¥å­¦ä¹ åˆ°é¡ºåºæ€§ï¼Œä½†æ˜¯å­¦ä¹ çš„åˆä¸å¤ªå¤šï¼Œå› æ­¤ä¼šæœ‰ä¸¤ç§é‡‡æ ·æ–¹å¼æ¥åšï¼š</p><ol><li>éšæœºé‡‡æ ·</li><li>é¡ºåºåˆ†åŒº</li></ol><p>æ‰¹é‡çš„å¤§å°ç”±batchsizeæ¥ç¡®å®šï¼ŒåŒæ—¶å•æ¬¡è®­ç»ƒçš„é¡ºåºåŒ…æ‹¬num_stepsä¸ªå•è¯ï¼Œå› æ­¤ç»è¿‡è¿™æ ·æˆ‘ä»¬é‡‡å–é€å…¥ç½‘ç»œè®­ç»ƒçš„å•ä¸ªbatchçš„å½¢çŠ¶ä¸º</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mo>=</mo><mrow><msub><mi>X</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>i</mi></msub></mrow><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mrow><msup><mi>X</mi><mn>1</mn></msup><mo separator="true">,</mo><msup><mi>X</mi><mn>2</mn></msup><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msup><mi>X</mi><mrow><mi>b</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi></mrow></msup></mrow><mo separator="true">;</mo><msub><mi>X</mi><mi>i</mi></msub><mo>âˆˆ</mo><msup><mrow><mi mathvariant="double-struck">R</mi></mrow><mrow><mi>n</mi><mi>u</mi><mi>m</mi><mi mathvariant="normal">_</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>s</mi><mo separator="true">,</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>(</mo><mi>v</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>b</mi><mo>)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">batch={X_i,y_i},i={X^1,X^2,..,X^{batchsize}};X_i\in\mathbb{R}^{num\_steps,len(vocab)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.0824399999999998em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">c</span><span class="mord mathit">h</span><span class="mrel">=</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span><span class="mpunct">,</span><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">b</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">c</span><span class="mord mathit">h</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mord mathit">e</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span><span class="mpunct">;</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆˆ</span><span class=""><span class="mord textstyle uncramped"><span class="mord mathbb">R</span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathrm" style="margin-right:0.02778em;">_</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">p</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">o</span><span class="mord mathit">c</span><span class="mord mathit">a</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>æ€»ä½“çš„shapeå°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>b</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo separator="true">,</mo><mi>n</mi><mi>u</mi><mi>m</mi><mi mathvariant="normal">_</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>s</mi><mo separator="true">,</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>(</mo><mi>v</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>b</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">(batchsize,num\_steps,len(vocab))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.06em;vertical-align:-0.31em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">b</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">c</span><span class="mord mathit">h</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mord mathit">e</span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathrm" style="margin-right:0.02778em;">_</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">p</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">o</span><span class="mord mathit">c</span><span class="mord mathit">a</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p><p>è¿™é‡Œæœ‰ä¸ªæ“ä½œæ˜¯ä¸ºäº†åé¢å°æ‰¹é‡çŸ©é˜µè¿ç®—ï¼Œä¼šåšä¸€ä¸ªreshapeï¼Œå˜æˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>n</mi><mi>u</mi><mi>m</mi><mi mathvariant="normal">_</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mi>s</mi><mo separator="true">,</mo><mi>b</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>s</mi><mi>i</mi><mi>z</mi><mi>e</mi><mo separator="true">,</mo><mi>l</mi><mi>e</mi><mi>n</mi><mo>(</mo><mi>v</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>b</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">(num\_steps,batchsize,len(vocab))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.06em;vertical-align:-0.31em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathit">u</span><span class="mord mathit">m</span><span class="mord mathrm" style="margin-right:0.02778em;">_</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">p</span><span class="mord mathit">s</span><span class="mpunct">,</span><span class="mord mathit">b</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathit">c</span><span class="mord mathit">h</span><span class="mord mathit">s</span><span class="mord mathit">i</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mord mathit">e</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathit">o</span><span class="mord mathit">c</span><span class="mord mathit">a</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>;å¯ä»¥è‡ªè¡Œè®¡ç®—æ¢¯åº¦å˜æ¢çš„æ–¹å¼ä½“ä¼š</p><h3 id="33-æ¨¡å‹ä¸»å¹²-model-loss-optim"><a class="markdownIt-Anchor" href="#33-æ¨¡å‹ä¸»å¹²-model-loss-optim"></a> 3.3 æ¨¡å‹ä¸»å¹²-model-loss-optim</h3><p>åˆå§‹åŒ–å‚æ•°</p><p>é€‰æ‹©é€‚åˆçš„loss</p><p>å®šä¹‰RNN model</p><h3 id="34-è®­ç»ƒä¸å¯è§†åŒ–-train-predict-ppl"><a class="markdownIt-Anchor" href="#34-è®­ç»ƒä¸å¯è§†åŒ–-train-predict-ppl"></a> 3.4 è®­ç»ƒä¸å¯è§†åŒ–- train- predict-ppl</h3><p>trainä¹Ÿå°±æ˜¯è®¾ç½®learning rateå’Œepochè®­ç»ƒå°±å¥½äº†</p><h2 id="0x04-ä»£ç å®ç°123"><a class="markdownIt-Anchor" href="#0x04-ä»£ç å®ç°123"></a> 0x04 ä»£ç å®ç°1ï¼Œ2ï¼Œ3</h2><p>è¿™é‡Œå®Œå…¨å‚è€ƒææ²å¤§å¤§çš„ä»£ç ï¼Œç„¶åå°†å…¶ä¸­çš„d2lçš„éƒ¨åˆ†å®Œå…¨å‰”é™¤å¾—åˆ°å¦‚ä¸‹çš„ä»£ç </p><h3 id="41-æ•°æ®é›†è¯»å–è®¾ç½®"><a class="markdownIt-Anchor" href="#41-æ•°æ®é›†è¯»å–è®¾ç½®"></a> 4.1 æ•°æ®é›†è¯»å–è®¾ç½®</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> math<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> torch.nn <span class="hljs-keyword">import</span> functional <span class="hljs-keyword">as</span> F<br><span class="hljs-comment">## ææ²ä¸­d2læœåŠ¡å™¨ä¸­å­˜å‚¨çš„æ•°æ®</span><br>DATA_HUB = <span class="hljs-built_in">dict</span>()<br>DATA_URL = <span class="hljs-string">&#x27;http://d2l-data.s3-accelerate.amazonaws.com/&#x27;</span><br>dataset=<span class="hljs-string">&#x27;time_machine&#x27;</span><br>dataset_sha256=<span class="hljs-string">&#x27;090b5e7e70c295757f55df93cb0a180b9691891a&#x27;</span><br>DATA_HUB[dataset]=(DATA_URL+<span class="hljs-string">&#x27;timemachine.txt&#x27;</span>,dataset_sha256)<br><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> hashlib<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> re<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download</span>(<span class="hljs-params">name, cache_dir=os.path.join(<span class="hljs-params"><span class="hljs-string">&#x27;..&#x27;</span>, <span class="hljs-string">&#x27;data&#x27;</span></span>)</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;ä¸‹è½½ä¸€ä¸ªDATA_HUBä¸­çš„æ–‡ä»¶ è¿”å›æœ¬åœ°æ–‡ä»¶å&quot;&quot;&quot;</span><br>    url, sha1_hash = DATA_HUB[name]<br>    os.makedirs(cache_dir, exist_ok=<span class="hljs-literal">True</span>)<br>    fname = os.path.join(cache_dir, url.split(<span class="hljs-string">&#x27;/&#x27;</span>)[-<span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">if</span> os.path.exists(fname):<br>        sha1 = hashlib.sha1()<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(fname, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>                data = f.read(<span class="hljs-number">1048576</span>)<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> data:<br>                    <span class="hljs-keyword">break</span><br>                sha1.update(data)<br>        <span class="hljs-keyword">if</span> sha1.hexdigest() == sha1_hash:<br>            <span class="hljs-keyword">return</span> fname  <span class="hljs-comment"># å‘½ä¸­ç¼“å­˜</span><br>    r = requests.get(url, stream=<span class="hljs-literal">True</span>, verify=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(fname, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>        f.write(r.content)<br>    <span class="hljs-keyword">return</span> fname<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">read_time_machine</span>():  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;å°†æ—¶é—´æœºå™¨æ•°æ®é›†åŠ è½½åˆ°æ–‡æœ¬è¡Œçš„åˆ—è¡¨ä¸­&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(download(<span class="hljs-string">&#x27;time_machine&#x27;</span>), <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>        lines = f.readlines()<br>    <span class="hljs-keyword">return</span> [re.sub(<span class="hljs-string">&#x27;[^A-Za-z]+&#x27;</span>, <span class="hljs-string">&#x27; &#x27;</span>, line).strip().lower() <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">tokenize</span>(<span class="hljs-params">lines, token=<span class="hljs-string">&#x27;char&#x27;</span></span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;å°†æ–‡æœ¬è¡Œæ‹†åˆ†ä¸ºå•è¯æˆ–å­—ç¬¦&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> token == <span class="hljs-string">&#x27;word&#x27;</span>:<br>        <span class="hljs-keyword">return</span> [line.split(<span class="hljs-string">&#x27; &#x27;</span>) <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines]<br>    <span class="hljs-keyword">elif</span> token == <span class="hljs-string">&#x27;char&#x27;</span>:<br>        <span class="hljs-keyword">return</span> [<span class="hljs-built_in">list</span>(line) <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines]<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;é”™è¯¯ï¼šæœªçŸ¥ä»¤ç‰Œç±»å‹ï¼š&#x27;</span>+token)<br><br><span class="hljs-keyword">import</span> collections  <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vocab</span>:  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;æ–‡æœ¬è¯è¡¨&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, tokens=<span class="hljs-literal">None</span>, min_freq=<span class="hljs-number">0</span>, reserved_tokens=<span class="hljs-literal">None</span></span>):<br>        <span class="hljs-keyword">if</span> tokens <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            tokens = []<br>        <span class="hljs-keyword">if</span> reserved_tokens <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            reserved_tokens = []<br>        <span class="hljs-comment"># æŒ‰å‡ºç°é¢‘ç‡æ’åº</span><br>        counter = count_corpus(tokens)<br>        self._token_freqs = <span class="hljs-built_in">sorted</span>(counter.items(), key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>],<br>                                   reverse=<span class="hljs-literal">True</span>)<br>        <span class="hljs-comment"># æœªçŸ¥è¯å…ƒçš„ç´¢å¼•ä¸º0</span><br>        self.idx_to_token = [<span class="hljs-string">&#x27;&lt;unk&gt;&#x27;</span>] + reserved_tokens<br>        self.token_to_idx = &#123;token: idx<br>                             <span class="hljs-keyword">for</span> idx, token <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(self.idx_to_token)&#125;<br>        <span class="hljs-keyword">for</span> token, freq <span class="hljs-keyword">in</span> self._token_freqs:<br>            <span class="hljs-keyword">if</span> freq &lt; min_freq:<br>                <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">if</span> token <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.token_to_idx:<br>                self.idx_to_token.append(token)<br>                self.token_to_idx[token] = <span class="hljs-built_in">len</span>(self.idx_to_token) - <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.idx_to_token)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, tokens</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(tokens, (<span class="hljs-built_in">list</span>, <span class="hljs-built_in">tuple</span>)):<br>            <span class="hljs-keyword">return</span> self.token_to_idx.get(tokens, self.unk)<br>        <span class="hljs-keyword">return</span> [self.__getitem__(token) <span class="hljs-keyword">for</span> token <span class="hljs-keyword">in</span> tokens]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">to_tokens</span>(<span class="hljs-params">self, indices</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(indices, (<span class="hljs-built_in">list</span>, <span class="hljs-built_in">tuple</span>)):<br>            <span class="hljs-keyword">return</span> self.idx_to_token[indices]<br>        <span class="hljs-keyword">return</span> [self.idx_to_token[index] <span class="hljs-keyword">for</span> index <span class="hljs-keyword">in</span> indices]<br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">unk</span>(<span class="hljs-params">self</span>):  <span class="hljs-comment"># æœªçŸ¥è¯å…ƒçš„ç´¢å¼•ä¸º0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">token_freqs</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self._token_freqs<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">count_corpus</span>(<span class="hljs-params">tokens</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;ç»Ÿè®¡è¯å…ƒçš„é¢‘ç‡&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># è¿™é‡Œçš„tokensæ˜¯1Dåˆ—è¡¨æˆ–2Dåˆ—è¡¨</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(tokens) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">isinstance</span>(tokens[<span class="hljs-number">0</span>], <span class="hljs-built_in">list</span>):<br>        <span class="hljs-comment"># å°†è¯å…ƒåˆ—è¡¨å±•å¹³æˆä¸€ä¸ªåˆ—è¡¨</span><br>        tokens = [token <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> tokens <span class="hljs-keyword">for</span> token <span class="hljs-keyword">in</span> line]<br>    <span class="hljs-keyword">return</span> collections.Counter(tokens)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_corpus_time_machine</span>(<span class="hljs-params">max_tokens=-<span class="hljs-number">1</span></span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;è¿”å›æ—¶å…‰æœºå™¨æ•°æ®é›†çš„è¯å…ƒç´¢å¼•åˆ—è¡¨å’Œè¯è¡¨&quot;&quot;&quot;</span><br>    lines = read_time_machine()<br>    tokens = tokenize(lines, <span class="hljs-string">&#x27;char&#x27;</span>)<br>    vocab = Vocab(tokens)<br>    <span class="hljs-built_in">print</span>(vocab.idx_to_token)<br>    <span class="hljs-comment"># å› ä¸ºæ—¶å…‰æœºå™¨æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ–‡æœ¬è¡Œä¸ä¸€å®šæ˜¯ä¸€ä¸ªå¥å­æˆ–ä¸€ä¸ªæ®µè½ï¼Œ</span><br>    <span class="hljs-comment"># æ‰€ä»¥å°†æ‰€æœ‰æ–‡æœ¬è¡Œå±•å¹³åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­</span><br>    corpus = [vocab[token] <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> tokens <span class="hljs-keyword">for</span> token <span class="hljs-keyword">in</span> line]<br>    <span class="hljs-keyword">if</span> max_tokens &gt; <span class="hljs-number">0</span>:<br>        corpus = corpus[:max_tokens]<br>    <span class="hljs-keyword">return</span> corpus, vocab<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">seq_data_iter_random</span>(<span class="hljs-params">corpus, batch_size, num_steps</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;ä½¿ç”¨éšæœºæŠ½æ ·ç”Ÿæˆä¸€ä¸ªå°æ‰¹é‡å­åºåˆ—&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># ä»éšæœºåç§»é‡å¼€å§‹å¯¹åºåˆ—è¿›è¡Œåˆ†åŒºï¼ŒéšæœºèŒƒå›´åŒ…æ‹¬num_steps-1</span><br>    corpus = corpus[random.randint(<span class="hljs-number">0</span>, num_steps - <span class="hljs-number">1</span>):]<br>    <span class="hljs-comment"># å‡å»1ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦è€ƒè™‘æ ‡ç­¾</span><br>    num_subseqs = (<span class="hljs-built_in">len</span>(corpus) - <span class="hljs-number">1</span>) // num_steps<br>    <span class="hljs-comment"># é•¿åº¦ä¸ºnum_stepsçš„å­åºåˆ—çš„èµ·å§‹ç´¢å¼•</span><br>    initial_indices = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, num_subseqs * num_steps, num_steps))<br>    <span class="hljs-comment"># åœ¨éšæœºæŠ½æ ·çš„è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œ</span><br>    <span class="hljs-comment"># æ¥è‡ªä¸¤ä¸ªç›¸é‚»çš„ã€éšæœºçš„ã€å°æ‰¹é‡ä¸­çš„å­åºåˆ—ä¸ä¸€å®šåœ¨åŸå§‹åºåˆ—ä¸Šç›¸é‚»</span><br>    random.shuffle(initial_indices)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">data</span>(<span class="hljs-params">pos</span>):<br>        <span class="hljs-comment"># è¿”å›ä»posä½ç½®å¼€å§‹çš„é•¿åº¦ä¸ºnum_stepsçš„åºåˆ—</span><br>        <span class="hljs-keyword">return</span> corpus[pos: pos + num_steps]<br><br>    num_batches = num_subseqs // batch_size<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, batch_size * num_batches, batch_size):<br>        <span class="hljs-comment"># åœ¨è¿™é‡Œï¼Œinitial_indicesåŒ…å«å­åºåˆ—çš„éšæœºèµ·å§‹ç´¢å¼•</span><br>        initial_indices_per_batch = initial_indices[i: i + batch_size]<br>        X = [data(j) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> initial_indices_per_batch]<br>        Y = [data(j + <span class="hljs-number">1</span>) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> initial_indices_per_batch]<br>        <span class="hljs-keyword">yield</span> torch.tensor(X), torch.tensor(Y)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">seq_data_iter_sequential</span>(<span class="hljs-params">corpus, batch_size, num_steps</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;ä½¿ç”¨é¡ºåºåˆ†åŒºç”Ÿæˆä¸€ä¸ªå°æ‰¹é‡å­åºåˆ—&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># ä»éšæœºåç§»é‡å¼€å§‹åˆ’åˆ†åºåˆ—</span><br>    offset = random.randint(<span class="hljs-number">0</span>, num_steps)<br>    num_tokens = ((<span class="hljs-built_in">len</span>(corpus) - offset - <span class="hljs-number">1</span>) // batch_size) * batch_size<br>    Xs = torch.tensor(corpus[offset: offset + num_tokens])<br>    Ys = torch.tensor(corpus[offset + <span class="hljs-number">1</span>: offset + <span class="hljs-number">1</span> + num_tokens])<br>    Xs, Ys = Xs.reshape(batch_size, -<span class="hljs-number">1</span>), Ys.reshape(batch_size, -<span class="hljs-number">1</span>)<br>    num_batches = Xs.shape[<span class="hljs-number">1</span>] // num_steps<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, num_steps * num_batches, num_steps):<br>        X = Xs[:, i: i + num_steps]<br>        Y = Ys[:, i: i + num_steps]<br>        <span class="hljs-keyword">yield</span> X, Y<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SeqDataLoader</span>:  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;åŠ è½½åºåˆ—æ•°æ®çš„è¿­ä»£å™¨&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, batch_size, num_steps, use_random_iter, max_tokens</span>):<br>        <span class="hljs-keyword">if</span> use_random_iter:<br>            self.data_iter_fn = seq_data_iter_random<br>        <span class="hljs-keyword">else</span>:<br>            self.data_iter_fn = seq_data_iter_sequential<br>        self.corpus, self.vocab = load_corpus_time_machine(max_tokens)<br>        self.batch_size, self.num_steps = batch_size, num_steps<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.data_iter_fn(self.corpus, self.batch_size, self.num_steps)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data_time_machine</span>(<span class="hljs-params">batch_size, num_steps,  <span class="hljs-comment">#@save</span></span><br><span class="hljs-params">                           use_random_iter=<span class="hljs-literal">False</span>, max_tokens=<span class="hljs-number">10000</span></span>):<br>    <span class="hljs-string">&quot;&quot;&quot;è¿”å›æ—¶å…‰æœºå™¨æ•°æ®é›†çš„è¿­ä»£å™¨å’Œè¯è¡¨&quot;&quot;&quot;</span><br>    data_iter = SeqDataLoader(<br>        batch_size, num_steps, use_random_iter, max_tokens)<br>    <span class="hljs-keyword">return</span> data_iter, data_iter.vocab<br></code></pre></td></tr></table></figure><h3 id="42-æ¨¡å‹æ­å»º"><a class="markdownIt-Anchor" href="#42-æ¨¡å‹æ­å»º"></a> 4.2 æ¨¡å‹æ­å»º</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">## define the RNN layer</span><br>num_hiddens=<span class="hljs-number">256</span><br>rnn_layer=nn.RNN(<span class="hljs-built_in">len</span>(vocab),num_hiddens)<br><br><span class="hljs-comment">## define the hidden state</span><br>state=torch.zeros((<span class="hljs-number">1</span>,batch_size,num_hiddens))<br><br><span class="hljs-comment">## define the RNN model</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RNNmodel</span>(nn.Module):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;Recurrent nerual netowrk model&#x27;&#x27;&#x27;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,rnn_layer,vocab_size,**kwargs</span>):<br>        <span class="hljs-built_in">super</span>(RNNmodel,self).__init__(**kwargs)<br>        self.rnn=rnn_layer<br>        self.vocab_size=vocab_size<br>        self.num_hiddens=self.rnn.hidden_size<br><br>        <span class="hljs-comment"># prepare for the GRU</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.rnn.bidirectional:<br>            self.num_directions=<span class="hljs-number">1</span><br>            self.linear=nn.Linear(self.num_hiddens,self.vocab_size)<br>        <span class="hljs-keyword">else</span>:<br>            self.num_directions=<span class="hljs-number">2</span><br>            self.linear=nn.Linear(self.num_hiddens*<span class="hljs-number">2</span>,self.vocab_size)<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self,inputs,state</span>):<br>        X=F.one_hot(inputs.T.long(),self.vocab_size)<br>        X=X.to(torch.float32)<br>        Y,state=self.rnn(X,state)<br><br>        <span class="hljs-comment"># è½¬æ¢yä¸ºnum_steps,batch_size,num_hiddens</span><br>        output=self.linear(Y.reshape((-<span class="hljs-number">1</span>,Y.shape[-<span class="hljs-number">1</span>])))<br>        <span class="hljs-keyword">return</span> output,state<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">begin_state</span>(<span class="hljs-params">self,device,batch_size=<span class="hljs-number">1</span></span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(self.rnn,nn.LSTM):<br>            <span class="hljs-keyword">return</span> torch.zeros(self.num_directions*self.rnn.num_layers,batch_size,self.num_hiddens,device=device)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># nn.LSTM is hidden state as dict</span><br>            <span class="hljs-keyword">return</span> (torch.zeros((<br>                self.num_directions*self.rnn.num_layers,<br>                batch_size,<br>                self.num_hiddens),device=device),<br>                torch.zeros((self.num_directions*self.rnn.num_layers,<br>                batch_size,self.num_hiddens),<br>                device=device<br>            ))<br></code></pre></td></tr></table></figure><h3 id="43-é¢„æµ‹ä¸è®­ç»ƒ"><a class="markdownIt-Anchor" href="#43-é¢„æµ‹ä¸è®­ç»ƒ"></a> 4.3 é¢„æµ‹ä¸è®­ç»ƒ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">try_gpu</span>(<span class="hljs-params">i=<span class="hljs-number">0</span></span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›gpu(i)ï¼Œå¦åˆ™è¿”å›cpu()&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> torch.cuda.device_count() &gt;= i + <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> torch.device(<span class="hljs-string">f&#x27;cuda:<span class="hljs-subst">&#123;i&#125;</span>&#x27;</span>)<br>    <span class="hljs-keyword">return</span> torch.device(<span class="hljs-string">&#x27;cpu&#x27;</span>)<br>device=try_gpu()<br>net=RNNmodel(rnn_layer,vocab_size=<span class="hljs-built_in">len</span>(vocab))<br>net=net.to(device)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_ch8</span>(<span class="hljs-params">prefix, num_preds, net, vocab, device</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;åœ¨prefixåé¢ç”Ÿæˆæ–°å­—ç¬¦&quot;&quot;&quot;</span><br>    state = net.begin_state(batch_size=<span class="hljs-number">1</span>, device=device)<br>    outputs = [vocab[prefix[<span class="hljs-number">0</span>]]]<br><br>    get_input = <span class="hljs-keyword">lambda</span>: torch.tensor([outputs[-<span class="hljs-number">1</span>]], device=device).reshape((<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))<br><br>    <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> prefix[<span class="hljs-number">1</span>:]:  <span class="hljs-comment"># é¢„çƒ­æœŸ</span><br>        _, state = net(get_input(), state)<br>        outputs.append(vocab[y])<br><br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_preds):  <span class="hljs-comment"># é¢„æµ‹num_predsæ­¥</span><br>        y, state = net(get_input(), state)<br>        outputs.append(<span class="hljs-built_in">int</span>(y.argmax(dim=<span class="hljs-number">1</span>).reshape(<span class="hljs-number">1</span>)))<br>        <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>.join([vocab.idx_to_token[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> outputs])<br><br>predict_ch8(<span class="hljs-string">&#x27;time traveller&#x27;</span>,<span class="hljs-number">10</span>,net,vocab,device)<br></code></pre></td></tr></table></figure><p>ä¸‹é¢é€‰æ‹©ä¸€ä¸ªæ¨¡å‹å°±ok</p><ol><li><pre class="highlight"><code class=""># å®é™…è®­ç»ƒè¿‡ç¨‹# params settingfrom matplotlib.pyplot import isinteractive# model settingnet=RNNmodel(rnn_layer,vocab_size=len(vocab))net=net.to(device)<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><br><span class="hljs-number">2.</span> ```<br>   # ç¬¬äºŒç§GRU<br>   num_inputs=len(vocab)<br>   gru_layer=nn.<span class="hljs-constructor">GRU(<span class="hljs-params">num_inputs</span>,<span class="hljs-params">num_hiddens</span>)</span><br>   net=<span class="hljs-constructor">RNNmodel(<span class="hljs-params">gru_layer</span>,<span class="hljs-params">len</span>(<span class="hljs-params">vocab</span>)</span>)<br>   net=net.<span class="hljs-keyword">to</span>(device)<br></code></pre></td></tr></table></figure></code></pre></li><li><pre class="highlight"><code class=""># ç¬¬ä¸‰ç§LSTMnum_inputs=len(vocab)num_layers=2lstm_layer=nn.LSTM(num_inputs,num_hiddens,num_layers)net=RNNmodel(lstm_layer,len(vocab))net=net.to(device)<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><br>4. ```<br>   # ç¬¬å››ç§ Deep-LSTM<br>   <span class="hljs-attribute">num_inputs</span>=len(vocab)<br>   <span class="hljs-attribute">num_layers</span>=32<br>   <span class="hljs-attribute">lstm_layer</span>=nn.LSTM(num_inputs,num_hiddens,num_layers)<br>   <span class="hljs-attribute">net</span>=RNNmodel(lstm_layer,len(vocab))<br>   <span class="hljs-attribute">net</span>=net.to(device)<br></code></pre></td></tr></table></figure></code></pre></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs python">num_epochs, lr = <span class="hljs-number">5000</span>, <span class="hljs-number">0.5</span><br><span class="hljs-comment"># loss function</span><br>loss=nn.CrossEntropyLoss()<br><br><span class="hljs-comment"># optimer or updater</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sgd</span>(<span class="hljs-params">params, lr, batch_size</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;Minibatch stochastic gradient descent.</span><br><span class="hljs-string">    Defined in :numref:`sec_utils`&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> params:<br>            param -= lr * param.grad / batch_size<br>            param.grad.zero_()<br><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(net,nn.Module):<br>    <span class="hljs-comment"># what is for??</span><br>    updater=torch.optim.SGD(net.parameters(),lr)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;net is not as nnModule&#x27;</span>)<br>    updater=<span class="hljs-keyword">lambda</span> batch_size:sgd(net.params,lr,batch_size)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">grad_clipping</span>(<span class="hljs-params">net, theta</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;è£å‰ªæ¢¯åº¦&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(net, nn.Module):<br>        params = [p <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> net.parameters() <span class="hljs-keyword">if</span> p.requires_grad]<br>    <span class="hljs-keyword">else</span>:<br>        params = net.params<br>    norm = torch.sqrt(<span class="hljs-built_in">sum</span>(torch.<span class="hljs-built_in">sum</span>((p.grad ** <span class="hljs-number">2</span>)) <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> params))<br>    <span class="hljs-keyword">if</span> norm &gt; theta:<br>        <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> params:<br>            param.grad[:] *= theta / norm<br><br>predict=<span class="hljs-keyword">lambda</span> prefix:predict_ch8(prefix,<span class="hljs-number">50</span>,net,vocab,device)<br><br>use_random_iter=<span class="hljs-literal">False</span><br><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epoches):<br>    state=<span class="hljs-literal">None</span><br>    res=[]<br>    <span class="hljs-keyword">for</span> X,Y <span class="hljs-keyword">in</span> train_iter:<br>        <span class="hljs-keyword">if</span> state <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> use_random_iter:<br>            state=net.begin_state(batch_size=X.shape[<span class="hljs-number">0</span>],device=device)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(net,nn.Module) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(state,<span class="hljs-built_in">tuple</span>):<br>                state.detach_()<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> state:<br>                    s.detach_()<br>        <br>        y=Y.T.reshape(-<span class="hljs-number">1</span>)<br>        X,y=X.to(device),y.to(device)<br>        y_hat,state=net(X,state)<br>        l=loss(y_hat,y.long()).mean()<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(updater,torch.optim.Optimizer):<br>            <span class="hljs-comment"># judge is handSGD</span><br>            updater.zero_grad()<br>            l.backward()<br>            grad_clipping(net,<span class="hljs-number">1</span>)<br>            updater.step()<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># define in d2l.sgd</span><br>            l.backward()<br>            grad_clipping(net,<span class="hljs-number">1</span>)<br>            updater(batch_size=<span class="hljs-number">1</span>)<br>        res.append(l)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å›°æƒ‘åº¦&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">str</span>(res[-<span class="hljs-number">1</span>])))<br></code></pre></td></tr></table></figure><h3 id="45-ç»“æœ"><a class="markdownIt-Anchor" href="#45-ç»“æœ"></a> 4.5 ç»“æœ</h3><ol><li>è‚¯å®šéƒ½èƒ½è®­ç»ƒå‡ºæ¥</li></ol><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7anjshbv2j30vq0oewfb.jpg" alt="GRUç»“æœ" /></p><ol><li>ä½¿ç”¨wordçš„è®­ç»ƒæ—¶é—´ä¼šå¤§äºcharå¾ˆå¤š</li></ol><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7anktytexj322w0iq7bj.jpg" alt="wordçš„è®­ç»ƒè¿‡ç¨‹" /></p><p>ç»™ä»–ä¸€ä¸ªtime travellerï¼Œå¯ä»¥å¾—åˆ°è¿™ä¸ªï¼š</p><p>time traveller stooping to light a spill at the fire then he turned lighting his pipe to look at the psychologist s face the psychologist to show that he was not unhinged helped himself to a cigar and tried to light it uncut what is more i have a big machine nearly</p><p>-----</p><p>æ—¶é—´æ—…è¡Œè€…å¼¯è…°åœ¨ç«ä¸Šç‚¹ç‡ƒä¸€ä¸ªæº¢å‡ºç‰©ï¼Œç„¶åä»–è½¬åŠ¨ç‚¹äº®ä»–çš„çƒŸæ–—ï¼Œçœ‹ç€å¿ƒç†å­¦å®¶çš„è„¸ï¼Œå¿ƒç†å­¦å®¶è¡¨æ˜ä»–ä¸æ˜¯ä¸åˆæ—¶å®œåœ°å¸®åŠ©è‡ªå·±æŠ½é›ªèŒ„ï¼Œå¹¶è¯•å›¾ç‚¹ç‡ƒå®ƒæœªåˆ‡å‰²ï¼Œæ›´é‡è¦çš„æ˜¯æˆ‘æœ‰ä¸€ä¸ªå¤§æœºå™¨å‡ ä¹</p><ol><li>æ·±å±‚RNNä¸ä¸€å®šæœ‰æ•ˆ</li></ol><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h7ang0qtdej30w80ny0tu.jpg" alt="32å±‚LSTMçš„ç»“æœ" /></p><h2 id="0x05-discussionä¸ªäººè§è¯†"><a class="markdownIt-Anchor" href="#0x05-discussionä¸ªäººè§è¯†"></a> 0x05 Discussionï¼ˆä¸ªäººè§è¯†ï¼‰</h2><ol><li><p>MLPæˆ–è€…CNNæœ‰ç‚¹åƒé¡ºåºç»“æ„ï¼ŒRNNæœ‰ç‚¹åƒå¾ªç¯ç»“æ„ï¼ŒAttentionæœ‰ç‚¹åƒåˆ¤æ–­ç»“æ„</p></li><li><p>ä¸åŒç»“æ„å¸¦æ¥çš„æ˜¯ä¸åŒçš„æ„Ÿå—é‡ï¼ŒMLPçš„æ„Ÿå—é‡æ˜¯ä¸ªç‚¹ï¼ŒCNNçš„æ„Ÿå—é‡å¯èƒ½æ˜¯é•¿æ–¹å½¢ï¼ŒRNNçš„æ„Ÿå—é‡å¯èƒ½æ˜¯å¾ˆé•¿çš„åºåˆ—ï¼ŒAttentionåˆ™æ˜¯é€‰æ‹©æ„Ÿå—é‡</p></li><li><p>RNNå¾ˆåœŸ</p></li></ol><p><a href="https://cloud.tencent.com/developer/article/1664708">åºåˆ—æ¨¡å‹â€”â€”å´æ©è¾¾æ·±åº¦å­¦ä¹ è¯¾ç¨‹ç¬”è®°ï¼ˆäº”ï¼‰</a></p><p><a href="https://zh-v2.d2l.ai/chapter_natural-language-processing-pretraining/bert.html">åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </a></p><p><a href="https://www.deeplearningbook.org">Deep learningï¼Œlan Goodfellow.etal</a></p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>D2L</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 04_Attention</title>
    <link href="/posts/907ab853.html"/>
    <url>/posts/907ab853.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ¥å°±ä»¥Attentionä¸ºåŸºç¡€çš„Transformerç»“æ„å¾ˆæ„Ÿå…´è¶£ï¼Œæƒ³ç›´æ¥ä»CNNè·³åˆ°Attentionæ¥å­¦ä¹ ï¼Œä½†æ˜¯é€šè¿‡äº†è§£ä¸€äº›åŸºæœ¬çš„èƒŒæ™¯å‘ç°å¹¶ä¸ç°å®ï¼Œtransformerçš„æå‡ºæœ¬æ¥å°±æ˜¯åœ¨æœºå™¨ç¿»è¯‘çš„åŸºç¡€ä¸Šï¼Œæ‰€ä»¥å…ˆå¤©çš„åœ¨ä¸€äº›é—®é¢˜åœºæ™¯çš„è§£é‡Šä¸­å¹¶ä¸æ˜¯ä»¥å›å½’æ•°æ®ã€æˆ–è€…è¯´äºŒç»´å›¾åƒæ•°æ®ï¼Œè€Œæ˜¯åŸºäºåºåˆ—ï¼ˆseqï¼‰ç±»å‹çš„æ•°æ®è¿›è¡Œè§£é‡Šçš„ï¼Œæ‰€ä»¥éœ€è¦åœ¨äº†è§£è®¤æ¸…æ¥šseq2seqå­¦ä¹ ä¹‹åæ‰èƒ½å¯¹attentionæœ‰ä¸€äº›ç†è§£ã€‚è¿™æ¬¡åªæ˜¯å¯¹attentionä½œä¸ºç®€å•çš„äº†è§£ï¼Œå¹¶å¯¹æ·±åº¦å­¦ä¹ ä¸­ä¸€äº›åšå‡ºreviewï¼Œæ¥ä¿®æ­£è‡ªå·±ä¹‹å‰é”™è¯¯çš„çœ‹æ³•ä»¥åŠé‡å»ºæ–°çš„ä¸–ç•Œè§‚ã€‚</p><h2 id="0x01-ä»€ä¹ˆæ˜¯attentionæ–‡å­—ç‰ˆ"><a class="markdownIt-Anchor" href="#0x01-ä»€ä¹ˆæ˜¯attentionæ–‡å­—ç‰ˆ"></a> 0x01 ä»€ä¹ˆæ˜¯Attentionï¼ˆæ–‡å­—ç‰ˆï¼‰</h2><h3 id="11-ä»ç”Ÿç‰©å­¦ç„å­¦çš„è¯´èµ·æ³¨æ„åŠ›-attention"><a class="markdownIt-Anchor" href="#11-ä»ç”Ÿç‰©å­¦ç„å­¦çš„è¯´èµ·æ³¨æ„åŠ›-attention"></a> 1.1 ä»ç”Ÿç‰©å­¦ç„å­¦çš„è¯´èµ·æ³¨æ„åŠ› attention</h3><blockquote><p>â€‹ï¼ˆå¾ˆæœ‰æ„æ€çš„ä¸€æ®µï¼‰</p><p>æ³¨æ„åŠ›æ˜¯ç¨€ç¼ºçš„ï¼Œè€Œç¯å¢ƒä¸­å¹²æ‰°æ³¨æ„åŠ›çš„ä¿¡æ¯å¹¶ä¸å°‘ã€‚æ¯”å¦‚æˆ‘ä»¬çš„è§†è§‰ç¥ç»ç³»ç»Ÿå¤§çº¦æ”¶åˆ°10e8ä½çš„ä¿¡æ¯ï¼Œè¿œè¿œè¶…è¿‡äº†å¤§è„‘èƒ½å¤Ÿå®Œå…¨å¤„ç†çš„æ°´å¹³ï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯æˆ‘ä»¬çš„ç¥–å…ˆå·²ç»é€šè¿‡ç»éªŒè®¤è¯†åˆ°â€œå¹¶éæ„Ÿå®˜çš„æ‰€æœ‰è¾“å…¥éƒ½æ˜¯ä¸€æ ·çš„â€ï¼Œåœ¨æ•´ä¸ªäººç±»å†å²ä¸­ï¼Œè¿™ç§å°†æ³¨æ„åŠ›å¼•å‘æ„Ÿå…´è¶£çš„ä¸€éƒ¨åˆ†ä¿¡æ¯çš„èƒ½åŠ›ä½¿å¾—æˆ‘ä»¬çš„å¤§è„‘èƒ½å¤Ÿæ›´åŠ æ˜æ™ºåœ°åˆ†é…èµ„æºæ¥ç”Ÿå­˜ã€æˆé•¿å’Œç¤¾äº¤ï¼Œä¾‹å¦‚å‘ç°å¤©æ•Œã€æ‰¾å¯»é£Ÿç‰©æˆ–è€…ä¼´ä¾£</p></blockquote><p>ç”Ÿç‰©å­¦ä¸­å¸¸è§çš„åˆ©ç”¨åŒç»„ä»¶ï¼ˆtow- componentï¼‰æ¥è§£é‡Šæ³¨æ„åŠ›ï¼Œå°†æ³¨æ„åŠ›åˆ’åˆ†ä¸ºä¸¤ç±»ï¼š</p><ol><li>éè‡ªå‘ï¼šå•çº¯çš„æ ¹æ®è§‚å¯Ÿåˆ°çš„â€æ•°æ®â€œæ¥ç¡®å®šä½ æ‰€æ³¨æ„çš„çš„ä¸œè¥¿ï¼Œæ¯”å¦‚æ¡Œå­ä¸Šæœ‰è¯•å·ã€å¯ä¹ã€æ¸¸æˆæœºã€ä¸€ä¸ªé’¥åŒ™å’Œä¸€ä¸ªæ´»åŠ¨çš„å…¬é¸¡ï¼›ä½ å¯èƒ½æœ€å…ˆå…³æ³¨çš„é¸¡</li><li>è‡ªå‘æ€§ï¼šåœ¨è‡ªæˆ‘æ„è¯†çš„æ§åˆ¶ä¸‹æ¥é€‰æ‹©å…³æ³¨åˆé€‚çš„å…ƒç´ ï¼Œæ¯”å¦‚ä¸Šè¿°å¦‚æœä½ æ˜¯ä¸ºäº†å¯»æ‰¾ä¸€ä¸ªé’¥åŒ™è€Œæ¥ï¼Œé‚£ä¹ˆä½ å°±ä¼šå°†æ³¨æ„åŠ›ä¸“æ³¨åˆ°å¯¹åº”çš„å…ƒç´ ä¸­ã€‚</li></ol><h3 id="12-å®³æ­»äººçš„qquery-kkey-vvalue"><a class="markdownIt-Anchor" href="#12-å®³æ­»äººçš„qquery-kkey-vvalue"></a> 1.2 å®³æ­»äººçš„Qï¼ˆqueryï¼‰ã€Kï¼ˆkeyï¼‰ã€Vï¼ˆvalueï¼‰</h3><p>è¿™é‡Œçš„èµ·æºåˆ©ç”¨å¦å¤–ä¸€ç§Notationæ¥è¡¨è¿°ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p><p>queryï¼šè‡ªä¸»æ€§æç¤ºæˆä¸ºquery</p><p>keyï¼šè‡ªä¸»æ€§æç¤º</p><p>attention poolingï¼šæ³¨æ„åŠ›æ±‡èšï¼Œå°† é€‰æ‹©ï¼ˆoutputï¼‰å¼•å¯¼æ„Ÿå®˜è¾“å…¥</p><p>æ„Ÿå®˜è¾“å…¥ç§°ä¸ºvalueï¼Œæ¯ä¸€ä¸ªvalueéƒ½ä¸ä¸€ä¸ªkeyåŒ¹é…</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h73xrybs3ij30m60cuaak.jpg" alt="image-20221013203214511" /></p><h3 id="14-åˆ©ç”¨æ‰¾ä¹¦å°æ•…äº‹æ¥è§£é‡Šqkvæ¨¡å‹ä¸ªäººçŒœæƒ³"><a class="markdownIt-Anchor" href="#14-åˆ©ç”¨æ‰¾ä¹¦å°æ•…äº‹æ¥è§£é‡Šqkvæ¨¡å‹ä¸ªäººçŒœæƒ³"></a> 1.4 åˆ©ç”¨æ‰¾ä¹¦å°æ•…äº‹æ¥è§£é‡ŠQKVæ¨¡å‹ï¼ˆä¸ªäººçŒœæƒ³ï¼ï¼‰</h3><p>æˆ‘ä»¬å°†å›¾ä¹¦é¦†é‡Œé¢æ‰€æœ‰çš„ä¹¦ç§°ä¸ºKeyï¼Œæ¯ä¸ªä¹¦å¯èƒ½ä¼šå¯¹åº”ä¸åŒçš„valueï¼ˆçœ‹æˆ–è€…ä¸çœ‹ï¼‰ï¼›å½“æˆ‘ä»¬æœ‰è‡ªå·±çš„queryï¼ˆæƒ³çœ‹äº¤é€šæ–¹é¢çš„ä¹¦ï¼‰ï¼Œå°±ä¼šå°†queryå¯¹ä¸åŒçš„keyè¿›è¡Œattention poolingï¼Œè¿™æ ·outputå°±æ˜¯ä¸äº¤é€šç›¸å…³çš„ä¹¦æ‰ä¼šçœ‹ï¼Œä¸äº¤é€šä¸ç›¸å…³çš„ä¹¦ä¸çœ‹ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h73xxxjk82j30v50u0mzj.jpg" alt="image-20221013203802267" /></p><h3 id="15-ä»æœºå™¨å­¦ä¹ é‡Œçš„xiyii1næ¥çœ‹ä¸ªäººçŒœæƒ³"><a class="markdownIt-Anchor" href="#15-ä»æœºå™¨å­¦ä¹ é‡Œçš„xiyii1næ¥çœ‹ä¸ªäººçŒœæƒ³"></a> 1.5 ä»æœºå™¨å­¦ä¹ é‡Œçš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo separator="true">,</mo><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>}</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">\{x^{(i)},y^{(i)}\}i=1,...n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">}</span><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathit">n</span></span></span></span>æ¥çœ‹ï¼ˆä¸ªäººçŒœæƒ³ï¼ï¼‰</h3><p>å…¶ä¸­çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span>ç›¸å½“äºKeyï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span>ç›¸å½“äºValue</p><p>å½“æˆ‘ä»¬å¯¹ä¸€ä¸ªæ–°çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>é¢„æµ‹çš„æ—¶å€™ç›¸å½“äºæ˜¯å¯¹è¿™ä¸ªå‘å‡ºqueryï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p><ol><li>é¦–å…ˆæ ¹æ®<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>ä¸<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>=</mo><mrow><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup></mrow><mi>i</mi><mo>=</mo><mn>1</mn><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">X={x^{(i)}}i=1...n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mrel">=</span><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathit">n</span></span></span></span>è¿›è¡Œattention scoreçš„è®¡ç®—ï¼Œç„¶åå†å½’ä¸€åŒ–ï¼ˆæ¯”å¦‚softmaxï¼‰</li><li>ä¹‹åå†åˆ©ç”¨å½’ä¸€åŒ–çš„ç»“æœä½œä¸º æƒé‡ æ¥æ‹Ÿåˆå¾—åˆ°output</li></ol><p>è¿™é‡Œä¸çº¿æ€§å›å½’çš„åŒºåˆ«åœ¨äºæƒé‡çš„ç¡®å®šå’Œä½¿ç”¨ä¸Šï¼Œçº¿æ€§å›å½’çš„æƒé‡æ˜¯ä¸¥æ ¼æ¨å¯¼å¹¶ä½¿ç”¨åœ¨Xçš„ä¸åŒç‰¹å¾ä¸Šï¼Œè€Œattentionçš„æƒé‡æ˜¯é€šè¿‡å­¦ä¹ å¹¶ä½¿ç”¨åœ¨Xï¼ˆkeyï¼‰å¯¹åº”çš„yï¼ˆvalueï¼‰</p><p>åŒæ—¶è¿™é‡Œçš„attention valueçš„æƒé‡å¯ä»¥æ˜¯é€šè¿‡å­¦ä¹ ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡äººä¸ºå®šä¹‰æ¥å¾—åˆ°çš„ï¼Œå› ä¸ºæˆ‘ä»¬é‡‡ç”¨çš„vectorå½¢å¼çš„å­¦ä¹ ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨kernel functionæˆ–è€…çº¿æ€§ç©ºé—´ä¸€äº›è·ç¦»åº¦é‡æ¥ä½œä¸ºè®¡ç®—æ–¹å¼ï¼Œåœ¨åç»­è¿›åŒ–ç‰ˆçš„å‡çº§ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä¼šæœ‰å…¶ä»–scoreçš„åº¦é‡ï¼Œæ¯”å¦‚ä¹¦ä¸ä¹¦ä¹‹é—´æ˜¯å¥½åº¦é‡çš„ï¼Œä½†æ˜¯è¯´çš„è¯å’Œä¹¦ä¹‹é—´å¦‚ä½•åº¦é‡ï¼Ÿ</p><h2 id="0x02-å¯è§†åŒ–attention"><a class="markdownIt-Anchor" href="#0x02-å¯è§†åŒ–attention"></a> 0x02 å¯è§†åŒ–Attention</h2><p>æ¥ç€ä¸Šè¿°çš„1.5æˆ‘ä»¬å¯ä»¥çœ‹å‡ºã€ŠD2Lã€‹ä¹¦ä¸­ä»‹ç»Nadaraya- Watsonæ ¸å›å½’ï¼Œåªä¸è¿‡å…¶ä¸­çš„attention score çš„è®¡ç®—æ–¹å¼æ˜¯ç”¨<a href="https://en.wikipedia.org/wiki/Kernel_method">æ ¸æœºå™¨</a>ï¼›å¹¸è¿çš„æ˜¯æˆ‘ä»¬åœ¨<a href="https://blog.tjdata.site/2022/02/05/CS229-02--%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BASVM/">SVM</a>é‡Œé¢å·²ç»åˆæ­¥äº†è§£è¿‡ï¼Œå®ƒåªæ˜¯ä¸€ç§å°†ä½çº¬åº¦çš„å‘é‡è·ç¦»æŠ•å°„åˆ°é«˜çº¬åº¦ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥é‡‡ç”¨Gaussian Kernel</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi><mo>(</mo><mi>X</mi><mn>1</mn><mo separator="true">,</mo><mi>X</mi><mn>2</mn><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><msqrt><mo>(</mo></msqrt><mn>2</mn><mo>âˆ—</mo><mi>Ï€</mi><mo>)</mo></mrow></mfrac><mo>âˆ—</mo><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mfrac><mrow><mo>(</mo><mi>X</mi><mn>1</mn><mo>âˆ’</mo><mi>X</mi><mn>2</mn><msup><mo>)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn></mrow></mfrac><mo>)</mo></mrow><annotation encoding="application/x-tex">K(X1,X2)=\frac{1}{\sqrt(2*\pi)}*exp(-\frac{(X1-X2)^2}{2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.491108em;"></span><span class="strut bottom" style="height:2.621118em;vertical-align:-1.13001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">2</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.825005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="sqrt mord"><span class="sqrt-sign" style="top:-0.04500500000000007em;"><span class="style-wrap reset-textstyle textstyle uncramped"><span class="delimsizing size1">âˆš</span></span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="mopen">(</span></span><span style="top:-0.855005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">2</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mbin">âˆ—</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">2</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p><p>è¿™æ ·å–è¯„ä»·ä¹‹åå°±å¯ä»¥å¾—åˆ°æˆ‘ä»¬å¯¹äºæ–°çš„queryçš„xçš„é¢„æµ‹ä¸º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>y</mi><mo>Â¯</mo></mover><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mfrac><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mn>0</mn><mi mathvariant="normal">.</mi><mn>5</mn><mo>(</mo><mi>x</mi><mo>âˆ’</mo><msub><mi>x</mi><mi>i</mi></msub><msup><mo>)</mo><mn>2</mn></msup><mo>)</mo></mrow><mrow><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>j</mi><mo>=</mo><mi>n</mi></mrow></msubsup><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mn>0</mn><mi mathvariant="normal">.</mi><mn>5</mn><mo>(</mo><mi>x</mi><mo>âˆ’</mo><msub><mi>x</mi><mi>j</mi></msub><msup><mo>)</mo><mn>2</mn></msup><mo>)</mo></mrow></mfrac><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\bar y=\Sigma_{i=1}^n\frac{exp(-0.5(x-x_i)^2)}{\Sigma_{j=1}^{j=n} exp(-0.5(x-x_j)^2)}y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.491108em;"></span><span class="strut bottom" style="height:2.7366520000000003em;vertical-align:-1.245544em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>Â¯</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.832572em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.276864em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathrm">0</span><span class="mord mathrm">.</span><span class="mord mathrm">5</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathrm">0</span><span class="mord mathrm">.</span><span class="mord mathrm">5</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>è¿™é‡Œå–çš„å°±æ˜¯æŒ‰ç…§ä¸€ç§é«˜æ–¯è·ç¦»ï¼Œç¦»çš„è¶Šè¿‘è¶Šå¥½ï¼Œå¦‚æœæŒ‰ç…§è¿™ä¸ªæ–¹å¼å¾—åˆ°çš„attention scoreå¯ä»¥çœ‹å‡ºè¿‘å¤§è¿œå°çš„ç‰¹ç‚¹ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h73yjoqerej30sw0n2wg7.jpg" alt="image-20221013205856315" /></p><p>ä½†æ˜¯å¦å¤–ä¸€ç§æˆ‘ä»¬å¸Œæœ›å¯ä»¥å¯¹äºä¸åŒqueryå…·æœ‰ä¸åŒçš„é«˜æ–¯å‡½æ•°çš„å®½åº¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸Œæœ›æ–¹å·®ä¸ä¸€æ ·</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>y</mi><mo>Â¯</mo></mover><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mfrac><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mn>0</mn><mi mathvariant="normal">.</mi><mn>5</mn><mi>w</mi><mo>(</mo><mi>x</mi><mo>âˆ’</mo><msub><mi>x</mi><mi>i</mi></msub><msup><mo>)</mo><mn>2</mn></msup><mo>)</mo></mrow><mrow><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>j</mi><mo>=</mo><mi>n</mi></mrow></msubsup><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mn>0</mn><mi mathvariant="normal">.</mi><mn>5</mn><mi>w</mi><mo>(</mo><mi>x</mi><mo>âˆ’</mo><msub><mi>x</mi><mi>j</mi></msub><msup><mo>)</mo><mn>2</mn></msup><mo>)</mo></mrow></mfrac><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\bar y=\Sigma_{i=1}^n\frac{exp(-0.5w(x-x_i)^2)}{\Sigma_{j=1}^{j=n} exp(-0.5w(x-x_j)^2)}y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.491108em;"></span><span class="strut bottom" style="height:2.7366520000000003em;vertical-align:-1.245544em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>Â¯</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.832572em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.276864em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathrm">0</span><span class="mord mathrm">.</span><span class="mord mathrm">5</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathrm">0</span><span class="mord mathrm">.</span><span class="mord mathrm">5</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h73yl70phmj30sc0n4gmv.jpg" alt="image-20221013210023487" /></p><p>è¿™æ ·å¯¹äºä¸åŒçš„valueå°±ä¼šæœ‰ä¸åŒçš„æƒé‡ï¼ˆæ³¨æ„è¿™é‡Œçš„æƒé‡å€¼å¾—ä¸æ˜¯wï¼‰ï¼ŒæŒ‡çš„æ˜¯åˆ©ç”¨wè®¡ç®—å‡ºæ¥çš„attention score</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h73ym1xbhzj30tc0mk3zr.jpg" alt="image-20221013210112922" /></p><h2 id="0x03-å¯¹äºattentionçš„åˆè¯†"><a class="markdownIt-Anchor" href="#0x03-å¯¹äºattentionçš„åˆè¯†"></a> 0x03 å¯¹äºattentionçš„åˆè¯†</h2><p>æ‰€ä»¥attentionæ˜¯å•¥ï¼Œå¦‚æœåˆ©ç”¨QKVçš„è§’åº¦æ¥çœ‹æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æœä»ç®€å•çš„å›å½’é—®é¢˜è§’åº¦æ¥çœ‹å®ƒåªæ˜¯å¦å¤–ä¸€ç§è®¡ç®—æƒé‡æ–¹å¼çš„å‡½æ•°ã€‚</p><p>ä½†æ˜¯ï¼attentionçš„ä½œç”¨ä¸ä»…å±€é™äºå›å½’é—®é¢˜ï¼Œå®ƒä»seqé—®é¢˜ä¸­è€Œæ¥ï¼Œè§£å†³çš„å°±æ˜¯CNNæˆ–è€…RNNå¯¹äºè·ç¦»çš„æ•æ„Ÿæ€§ã€‚</p><p>å°±åƒCNNçš„æ„Ÿå—é‡ï¼Œå¯¹äºå•å±‚æ„Ÿå—é‡å¯èƒ½æ˜¯å›ºå®šå¥½çš„ï¼ˆä¸kernel sizeã€paddingã€stepæœ‰å…³ï¼‰ï¼Œä½†æ˜¯å¤šå±‚ç´¯ç§¯ä¸­æ„Ÿå—é‡æ˜¯å¯ä»¥é€æ¸æ‰©å¤§çš„ã€‚ä½†æ˜¯CNNé€‚ç”¨äºå›¾åƒçš„å¯èƒ½è§£é‡Šæ˜¯ä¸€ï¼Œå›¾åƒçš„ç»´åº¦æ˜¯å›ºå®šsizeçš„ï¼ˆåƒç´ æ— è®ºå¤šå¤§éƒ½æ˜¯æœ‰é™çš„ï¼‰</p><p>è€ŒRNNçš„æ„Ÿå—é‡ï¼Œå€Ÿé‰´è¢«äººçš„è¯´æ³•æ˜¯å–å†³äºè¯å…ƒæ¨¡å‹å’Œhidden layerï¼Œä½†æ˜¯ç”±äºhidden layerä¹Ÿæ˜¯å…·æœ‰é¡ºåºçš„ç‰¹å¾ï¼Œå®ƒçš„æ„Ÿå—é‡ä¹Ÿä¸ä¼šä¼ é€’çš„å¤ªè¿œã€‚</p><p>attentionåˆ©ç”¨attention socreå¯¹ä¸åŒçš„keyè¿›è¡Œç­›é€‰ï¼Œæ¥å¾—åˆ°ä¸€ä¸ªè¶³å¤Ÿè¿œä½†æ˜¯é‡ä¸å¤§çš„æ„Ÿå—é‡ã€‚é€‰æ‹©é‡è¦çš„æ•°æ®ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h73ytykgh8j30vy0fsq6j.jpg" alt="image-20221013210849152" /></p><p>åŒæ—¶åœ¨Attentionä¸­å…³äºattention scoreçš„è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œç”±äºæ²¡æœ‰æ¥è§¦è¿‡seq2seqæ¨¡å‹ï¼Œåœ¨åé¢çš„è®¡ç®—ä¸­å¯èƒ½éœ€è¦äº†è§£ä¹‹åæ‰èƒ½æœ‰æ›´è¿‘ä¸€æ­¥çš„è®¤è¯†ã€‚ç›®å‰çš„ç†è§£æ˜¯åˆ©ç”¨ä¸€ç§å¯å­¦ä¹ çš„æ–¹å¼æ¥å¾—åˆ°åˆç†çš„attention scoreçš„è®¡ç®—æ–¹å¼ã€‚</p><p>flagï¼š</p><p>çœ‹æ‡‚RNNã€GRUã€LSTM</p><p>æ˜ç™½seq2seqæ¡†æ¶ï¼Œencoder- decoderçš„æ¡†æ¶</p><h2 id="0x04-discussion"><a class="markdownIt-Anchor" href="#0x04-discussion"></a> 0x04 Discussion</h2><h3 id="41-ä¸€è‡´è®°å·çš„é‡è¦æ€§"><a class="markdownIt-Anchor" href="#41-ä¸€è‡´è®°å·çš„é‡è¦æ€§"></a> 4.1 ä¸€è‡´è®°å·çš„é‡è¦æ€§</h3><p>è¿˜æ˜¯å¾ˆå–œæ¬¢CS229çš„è®²ä¹‰ä¸­Notationä¸€è‡´æ€§çš„æ€è€ƒï¼Œè¿™æ ·å‰åçš„å…¬å¼æ¨å¯¼ä¼šå¾ˆæ¸…æ™°ï¼Œåœ¨è§£é‡Šé—®é¢˜ä¸­ä¼šæœ‰ä¸€è‡´æ€§</p><p>D2Lä¸­æ²ç¥è®²çš„çœŸçš„å¾ˆå¥½ï¼Œä½†æ˜¯åœ¨å†™ä½œä¸­ä¼¼ä¹è¿˜æ˜¯ç¼ºå°‘è¿™ç§åŸºæœ¬çš„ç´ å…»ã€‚è¿™æ ·çš„ç´ å…»å¯¹äºå¤§ä½¬æ˜¯é”¦ä¸Šæ·»èŠ±ï¼Œä½†æ˜¯å¯¹äºåˆå­¦è€…æ˜¯ä¿è¯ä¸å‡ºé”™çš„å›´æ ã€‚</p><h3 id="42-æ¨¡æ‹Ÿprintçš„é‡è¦æ€§"><a class="markdownIt-Anchor" href="#42-æ¨¡æ‹Ÿprintçš„é‡è¦æ€§"></a> 4.2 æ¨¡æ‹Ÿï¼ˆprintï¼‰çš„é‡è¦æ€§</h3><p>å¯¹äºä¸åŒçš„æŠ½è±¡é—®é¢˜ï¼Œåˆ©ç”¨å…·ä½“çš„ä¸œè¥¿æ‰“å°å‡ºæ¥ä¸€æ­¥ä¸€æ­¥å°±å¥½äº†ã€‚å°¤å…¶æ˜¯å‘é‡çš„æ¯ä¸€æ­¥çš„size</p><h3 id="43-mldlçš„ä¸€äº›æ€è€ƒ"><a class="markdownIt-Anchor" href="#43-mldlçš„ä¸€äº›æ€è€ƒ"></a> 4.3 ML&amp;DLçš„ä¸€äº›æ€è€ƒ</h3><p>å¯èƒ½æ˜¯æ²¿ç€D2Lä¹¦çš„ç¼˜æ•…ï¼Œå¯¹æ·±åº¦å­¦ä¹ çš„è®¤è¯†è¿‡ç¨‹æ˜¯ä»MLPåˆ°CNN/GCNåˆ°RNNåˆ°Transformerï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–çš„ï¼Œè¿™æ ·ç½‘ç»œç»“æœä¸€æ ·ä½†åˆä¼¼ä¹ä¸å¤ªä¸€æ ·ï¼Œä¸»è¦å¯¹ç‰¹å¾æå–æ–¹å¼ä¸Šã€‚</p><p>ä¸‹é¢è¿™å¼ å›¾å¯èƒ½å†…å®¹ä¸å¯¹æˆ–è€…ä¸å…¨ï¼Œä½†æ˜¯åˆ†ç±»çš„æ€è·¯ä»å­¦ä¹ çš„è§’åº¦è¿˜æ˜¯æœ‰ç›Šçš„</p><p><img src="https://tva1.sinaimg.cn/large/008vxvgGly1h73zdhgwuxj31fa0u0k56.jpg" alt="image-20221013212732442" /></p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>D2L</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¼ºåŒ–å­¦ä¹ 01_åŸºæœ¬æ¦‚å¿µ</title>
    <link href="/posts/3e3a5c92.html"/>
    <url>/posts/3e3a5c92.html</url>
    
    <content type="html"><![CDATA[<p>åˆå§‹å¼ºåŒ–å­¦ä¹ æœ€éš¾çš„åœ°æ–¹åœ¨äºæ™¦æ¶©çš„ä¸“ä¸šè¯æ±‡ä»¥åŠå¤æ‚çš„æ•°å­¦æ¨å¯¼ï¼›åŒæ—¶æ·±åº¦å¼ºåŒ–å­¦ä¹ å¹¶ä¸æ˜¯å¼ºåŒ–å­¦ä¹ çš„ç»ˆç‚¹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¾æ—§éœ€è¦humanåœ¨å…¶ä¸­æ‰®æ¼”çš„åœ°æ–¹ã€‚è¿™é‡Œæµ…è–„çœ‹<a href="https://datawhalechina.github.io/easy-rl/#/">è˜‘è‡ä¹¦æ¥äº†è§£</a>ã€‚ä¸»è¦ä½œä¸ºäº†è§£å¼ºåŒ–å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µï¼Œå¸Œæœ›ä»éšæœºè¿‡ç¨‹å‡ºå‘ï¼Œæ¥ç»™å‡ºå¼ºåŒ–å­¦ä¹ ä¸­æ™ºèƒ½ä½“agentä¸ç¯å¢ƒ envä¹‹é—´çš„åŸºæœ¬æ¦‚å¿µ</p><span id="more"></span><h2 id="0x01-éšæœºè¿‡ç¨‹çš„åŸºç¡€"><a class="markdownIt-Anchor" href="#0x01-éšæœºè¿‡ç¨‹çš„åŸºç¡€"></a> 0x01 éšæœºè¿‡ç¨‹çš„åŸºç¡€</h2><p>æ¦‚ç‡è®ºå’Œåº”ç”¨ç»Ÿè®¡æ˜¯ç ”ç©¶æ¦‚ç‡è®ºä¸­å¤šä¸ªéšæœºäº‹ä»¶æ‰€æ„æˆçš„å…·æœ‰ä¸€èˆ¬æ€§è§„å¾‹çš„å­¦ç§‘ï¼›è€Œéšæœºè¿‡ç¨‹åˆ™æ˜¯å¯¹è¿™ä¸ªè¿‡ç¨‹è¿›è¡Œæè¿°ã€‚</p><h3 id="11-é©¬å°”å¯å¤«è¿‡ç¨‹-mp-markov-process"><a class="markdownIt-Anchor" href="#11-é©¬å°”å¯å¤«è¿‡ç¨‹-mp-markov-process"></a> 1.1 é©¬å°”å¯å¤«è¿‡ç¨‹ MP- Markov process</h3><p>é©¬å°”å¯å¤«æ€§è´¨æŒ‡çš„æ˜¯ä¸€ä¸ªéšæœºè¿‡ç¨‹åœ¨ç»™å®šç°åœ¨çŠ¶æ€å’Œæ‰€æœ‰è¿‡å»çŠ¶æ€çš„æƒ…å†µä¸‹ï¼Œæœªæ¥åˆ†å¸ƒæ¦‚ç‡ä»…ä¾èµ–äºå½“å‰çš„çŠ¶æ€ï¼›ä¹Ÿå°±æ˜¯åœ¨çŸ¥é“å½“å‰çš„çŠ¶æ€ï¼Œå°†æ¥ä¸æœªæ¥æ˜¯ç‹¬ç«‹çš„</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><msub><mi>X</mi><mrow><mi>T</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>X</mi><mn>0</mn></msub><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>X</mi><mi>T</mi></msub><mo>=</mo><msub><mi>x</mi><mi>t</mi></msub><mo>)</mo><mo>=</mo><mi>P</mi><mo>(</mo><msub><mi>X</mi><mrow><mi>T</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>x</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>X</mi><mi>T</mi></msub><mo>=</mo><msub><mi>x</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">P(X_{T+1}=x_{t+1}|X_0=x_0,x_1=x_1,...,X_T=x_t)=P(X_{T+1}=x_{t+1}|X_T=x_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>å¦‚æœä¸€ä¸ªéšæœºè¿‡ç¨‹æ˜¯ç¦»æ•£çš„ï¼Œå¯ä»¥è¢«ç§°ä¸ºé©¬å°”å¯å¤«é“¾ï¼ˆMarkov chainï¼‰</p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬çœ‹åˆ°ä¸åŒçŠ¶æ€ä¹‹é—´çš„æ¦‚ç‡è½¬æ¢</p><h3 id="12-é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹-mrp-markov-reward-process"><a class="markdownIt-Anchor" href="#12-é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹-mrp-markov-reward-process"></a> 1.2 é©¬å°”å¯å¤«å¥–åŠ±è¿‡ç¨‹-MRP- Markov reward- process</h3><p>åœ¨ä¸Šè¿°é©¬å°”å¯å¤«é“¾çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼š</p><p>å¥–åŠ±- reward functionï¼šæ˜¯ä¸€ä¸ªæœŸæœ›ï¼Œè¡¨ç¤ºæˆ‘ä»¬åˆ°è¾¾æŸä¸ªè¿‡ç¨‹èƒ½å¤Ÿè·å¾—çš„æœ€å¤§çš„å¥–åŠ±ï¼Œé€šå¸¸ç”¨horizonè¡¨ç¤ºæœ‰ä¸ªå›åˆçš„é•¿åº¦ï¼Œé‚£ä¹ˆåœ¨å¥–åŠ±çš„åŸºç¡€ä¸Šæˆ‘ä»¬å¯ä»¥å¾—åˆ°éšæœºè¿‡ç¨‹åºåˆ—çš„å›æŠ¥</p><p>å›æŠ¥- return <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mi>t</mi></msub><mo>=</mo><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><mi>Î³</mi><mo>âˆ—</mo><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>2</mn></mrow></msub><mo>+</mo><msup><mi>Î³</mi><mn>2</mn></msup><mo>âˆ—</mo><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mn>3</mn></mrow></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">G_t=r_{t+1}+\gamma*r_{t+2}+\gamma^2*r_{t+3}+...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.0224389999999999em;vertical-align:-0.208331em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">+</span><span class="mord mathrm">3</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span></span></span></span></p><p>è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span></span></span></span>ä»£è¡¨æŠ˜æ‰£ç³»æ•°ï¼›è¿™ä¸ªä½ç½®æ˜¯è¡¨ç¤ºè¿™ä¸ªä¸€ç³»åˆ—çš„éšæœºè¿‡ç¨‹æ‰€å¸¦æ¥çš„å›æŠ¥ï¼Œä½†æ˜¯é€šå¸¸ä¸ºæ”¶æ•›ä¼šè§„å®š å›æŠ¥- returnçš„é•¿åº¦æ¥ï¼›åœ¨å›æŠ¥- returnçš„åŸºç¡€ä¸Šæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ¯ä¸ªçŠ¶æ€- stateçš„ä»·å€¼- valueï¼›ä¹Ÿå°±æ˜¯å›æŠ¥- returnçš„æœŸæœ›å°±æ˜¯ä»·å€¼</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>(</mo><msub><mi>S</mi><mi>T</mi></msub><mo>)</mo><mo>=</mo><mi>E</mi><mo>(</mo><msub><mi>G</mi><mi>T</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>S</mi><mi>T</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">V(S_T)=E(G_T|S_T=s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>è¿™é‡Œæœ‰å¾…è®¨è®ºï¼Œæ„Ÿè§‰å’Œé«˜ä¸­ç‰©ç†ä¸­çš„ä¸‡æœ‰å¼•åŠ›ä¸åŠ¿èƒ½å¾ˆç›¸ä¼¼</p><p>å…³äºä»·å€¼- valueçš„æ±‚è§£ä¼šæœ‰å¾ˆå¤šæ–¹æ³•</p><ol><li>åˆ©ç”¨å®šä¹‰ï¼Œéå†å¤šç§çŠ¶æ€å¾—åˆ°value</li><li>åˆ©ç”¨è’™ç‰¹å¡æ´›MCéšæœºé‡‡æ ·çš„æ–¹æ³•</li><li>åˆ©ç”¨Bellman equationå¾—åˆ°è§£æè§£</li><li>å…¶ä»–çš„æ–¹æ³•ï¼Œæ¯”å¦‚TD learningç­‰</li></ol><h3 id="125å…³äºmrpè´å°”æ›¼æ–¹ç¨‹æ±‚è§£"><a class="markdownIt-Anchor" href="#125å…³äºmrpè´å°”æ›¼æ–¹ç¨‹æ±‚è§£"></a> 1.25å…³äºMRPè´å°”æ›¼æ–¹ç¨‹æ±‚è§£</h3><p>å¤ªèœäº†ï¼Œæ‰€ä»¥ç”¨æ‰‹å†™ï¼Œè¿™æ ·æˆ‘ä»¬çœ‹å‡ºMRPé‡ç‚¹æ˜¯åœ¨çŸ¥é“è½¬ç§»æ¦‚ç‡På’Œå„çŠ¶æ€å¥–åŠ±rewardä»¥åŠæŠ˜æ‰£å› å­<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05556em;">Î³</span></span></span></span>çš„åŸºç¡€ä¸Šï¼Œæ±‚è§£å‡ºçŠ¶æ€çš„ä»·å€¼ï¼ˆç”¨ä¸åŒçš„æ–¹æ³•ï¼‰</p><p><img src="https://pica.zhimg.com/80/v2-a8e283e4093bbf799726b3d53a8e3986_1440w.png" alt="image-20220930163324332" /></p><p><img src="https://pica.zhimg.com/80/v2-2a7bb6b705e17efd979e214a92d425f7_1440w.png" alt="image-20220930163334308" /></p><p><img src="https://pic1.zhimg.com/80/v2-ff43b46c8d01f592a86c35f166ac2493_1440w.png" alt="image-20220930163352911" /></p><h3 id="13-é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹-mdp-markov-decision-process"><a class="markdownIt-Anchor" href="#13-é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹-mdp-markov-decision-process"></a> 1.3 é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹-MDP-Markov- decision- process</h3><p>MRPåœ¨MPä¸­å¢åŠ æ¥ â€œå¥–åŠ±rewardã€å›æŠ¥returnå’Œä»·å€¼valueâ€ï¼ŒMDPåˆ™æ˜¯ç»§ç»­åœ¨MRPçš„åŸºç¡€ä¸­å¢åŠ åŠ¨ä½œé¡¹ç›®action</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï€</mi><mo>(</mo><mi>a</mi><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo>)</mo><mo>=</mo><mi>P</mi><mo>(</mo><msub><mi>A</mi><mi>T</mi></msub><mo>=</mo><msub><mi>a</mi><mi>t</mi></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>S</mi><mi>T</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\pi(a|s)=P(A_T=a_t|S_T=s_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>è¿™é‡Œçš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï€</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span></span></span></span>ç§°ä¸ºæ˜¯ç­–ç•¥ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œä¸‹ä¸€ä¸ªçŠ¶æ€åº”è¯¥å–å†³äºå½“å‰çš„çŠ¶æ€å’ŒåŠ¨ä½œ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><msub><mi>S</mi><mrow><mi>T</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>S</mi><mi>T</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>T</mi></msub><mo>)</mo><mo>=</mo><mi>P</mi><mo>(</mo><msub><mi>S</mi><mrow><mi>T</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">âˆ£</mi><msub><mi>h</mi><mi>T</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>T</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">P(S_{T+1}|S_T,A_T)=P(S_{T+1}|h_T,a_T)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>åŒæ · å¥–åŠ±reward çš„å®šä¹‰ä¹Ÿä¼šæ›´åŠ å¤æ‚</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>(</mo><msub><mi>S</mi><mi>T</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo>)</mo><mo>=</mo><mi>E</mi><mo>(</mo><msub><mi>r</mi><mi>t</mi></msub><mo>[</mo><msub><mi>S</mi><mi>T</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><mi>a</mi><mo>]</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">R(S_T=s_t)=E(r_t[S_T=s_t,A_t=a])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">a</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></span></p><p>2022-09-30 è¿™éƒ¨åˆ†åé¢å°±ä¸å¤ªæ‡‚å•¦ï½ï½æœªå®Œå¾…ç»­</p><h3 id="14-ä¸¾ä¸ªä¾‹å­"><a class="markdownIt-Anchor" href="#14-ä¸¾ä¸ªä¾‹å­"></a> 1.4 ä¸¾ä¸ªä¾‹å­</h3><p>è®¡ç®—çŠ¶æ€</p><p>æ¯”å¦‚çŠ¶æ€ç©ºé—´åŒ…æ‹¬{wechatï¼›class1;class2;class3;sleep;pass;pub}</p><p>ä¹‹é—´çš„çŠ¶æ€æ¦‚ç‡ä¸º</p><p><img src="https://pica.zhimg.com/80/v2-b3c3404e0dd9231f2584b6ebedcd1eaf_1440w.png" alt="image-20220930164228814" /></p><p>ä¸åŒçŠ¶æ€çš„rewardæ˜¯</p><p><img src="https://pica.zhimg.com/80/v2-5a00345aa837a5d7641513eff8fae762_1440w.png" alt="image-20220930164245788" /></p><p>åˆ©ç”¨è´å°”æ›¼æ–¹ç¨‹å°±å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„valueç»“æœ</p><h3 id="15-mdpçš„æ ¸å¿ƒé—®é¢˜"><a class="markdownIt-Anchor" href="#15-mdpçš„æ ¸å¿ƒé—®é¢˜"></a> 1.5 MDPçš„æ ¸å¿ƒé—®é¢˜</h3><p>è™½ç„¶2022-09-30è¿˜æ²¡æœ‰ææ‡‚MDPçš„æ•°å­¦è¿‡ç¨‹ï¼Œä½†æ˜¯å¯ä»¥çœ‹å‡ºèµ·æ ¸å¿ƒçš„é—®é¢˜åŒ…æ‹¬</p><p>ã€é¢„æµ‹ã€‘ä¸ã€æ§åˆ¶ã€‘</p><p>é¢„æµ‹å°±æ˜¯ç»™å‡º stateã€actionã€Pã€Rä¸policyæ¥å¾—åˆ°æ¯ä¸ªçŠ¶æ€çš„value</p><p>æ§åˆ¶å°±æ˜¯ç»™å‡ºstateã€actionã€Pã€Ræ¥å¾—åˆ°valueä¸policy</p><p>åœ¨æ±‚è§£ä¸­å¸¸åˆ†ä¸º ç­–ç•¥è¿­ä»£policy- iterationä¸ä»·å€¼è¿­ä»£ value- iteration</p><p>ç»†èŠ‚åé¢åœ¨äº†è§£</p><h2 id="0x02-å¼ºåŒ–å­¦ä¹ æ¦‚è¿°"><a class="markdownIt-Anchor" href="#0x02-å¼ºåŒ–å­¦ä¹ æ¦‚è¿°"></a> 0x02 å¼ºåŒ–å­¦ä¹ æ¦‚è¿°</h2><p>æœ€ç»å…¸å°±æ˜¯è¿™æ ·çš„å›¾ï¼Œå¼ºåŒ–å­¦ä¹ çš„è¿‡ç¨‹å¯ä»¥çœ‹ä½œæ˜¯å®é™…åŒ–çš„MDPè¿‡ç¨‹ï¼›æˆ‘ä»¬å¯ä»¥çŸ¥é“æˆ‘ä»¬å°†é—®é¢˜åˆ†ä¸º æ™ºèƒ½ä½“agentä¸ç¯å¢ƒenvä¸¤éƒ¨åˆ†ï¼›çŠ¶æ€stateä¸å¥–åŠ±rewardç”±envç»™å‡ºï¼›agentä¼šæ ¹æ®çŠ¶æ€ä¸å¥–åŠ±æ¥å®ç°ä¸åŒçš„åŠ¨ä½œactionï¼ˆåŠ¨ä½œåºåˆ—ä¹Ÿå°±æ˜¯éœ€è¦å­¦ä¹ çš„ç­–ç•¥policyï¼‰ï¼Œå†å¾—åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ä»¥åŠå½“å‰çŠ¶æ€å¾—åˆ°çš„å¥–åŠ±</p><p><img src="https://pica.zhimg.com/80/v2-fc6cd1cf1a397b72cb6a791f328b352f_1440w.png" alt="image-20220930164808387" /></p><h2 id="0x03-å¼ºåŒ–å­¦ä¹ ä¸ç›‘ç£å­¦ä¹ "><a class="markdownIt-Anchor" href="#0x03-å¼ºåŒ–å­¦ä¹ ä¸ç›‘ç£å­¦ä¹ "></a> 0x03 å¼ºåŒ–å­¦ä¹ ä¸ç›‘ç£å­¦ä¹ </h2><h3 id="31-ç›‘ç£å­¦ä¹ "><a class="markdownIt-Anchor" href="#31-ç›‘ç£å­¦ä¹ "></a> 3.1 ç›‘ç£å­¦ä¹ </h3><ul><li>æˆ‘ä»¬é¦–å…ˆå‡è®¾æˆ‘ä»¬æœ‰å¤§é‡è¢«æ ‡æ³¨çš„æ•°æ®ï¼Œå‡è®¾ä¹‹é—´æ»¡è¶³åŒåˆ†å¸ƒï¼Œä¹‹é—´æ˜¯æ²¡æœ‰å…³è”çš„ã€‚åœ¨è¿™ä¸ªåŸºç¡€ä¸Šæˆ‘ä»¬è®­ç»ƒæˆ‘ä»¬çš„æ¨¡å‹ï¼ˆæ¯”å¦‚ä¸€ä¸ªåˆ†ç±»å™¨ï¼‰ï¼Œæˆ‘ä»¬å¯èƒ½é€šè¿‡å°†æ ‡ç­¾ä¿¡æ¯ä¼ é€’ç»™ç¥ç»ç½‘ç»œï¼Œå½“ç¥ç»ç½‘ç»œåšå‡ºé”™è¯¯çš„é¢„æµ‹çš„æ—¶å€™æˆ‘ä»¬ä¼šç»™ä»–ä¸€ä¸ªé”™è¯¯çš„åé¦ˆï¼Œæˆ‘ä»¬åˆ©ç”¨è¿™ä¸ªé”™è¯¯å†™å‡ºä¸€ä¸ª æŸå¤±å‡½æ•° loss- functionï¼Œé€šè¿‡ åå‘ä¼ æ’­ back propagateæ¥è®­ç»ƒ</li><li>å‡è®¾1:è¾“å‡ºçš„æ•°æ®åº”è¯¥æ˜¯æ²¡æœ‰å…³è”çš„</li><li>å‡è®¾2:æˆ‘ä»¬éœ€è¦å‘Šè¯‰å­¦ä¹ æ­£ç¡®çš„æ ‡ç­¾æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·å®ƒå¯ä»¥é€šè¿‡æ­£ç¡®çš„æ ‡ç­¾æ¥ä¿®æ­£è‡ªå·±çš„é¢„æµ‹</li></ul><h3 id="32-å¼ºåŒ–å­¦ä¹ "><a class="markdownIt-Anchor" href="#32-å¼ºåŒ–å­¦ä¹ "></a> 3.2 å¼ºåŒ–å­¦ä¹ </h3><ul><li>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œç›‘ç£å­¦ä¹ çš„ä¸Šè¿°çš„ä¸¤ä¸ªå‡è®¾éƒ½ä¸æ»¡è¶³</li><li>æ¯ä¸ªframeä¹‹é—´å…·æœ‰éå¸¸å¼ºçš„è¿ç»­æ€§ï¼ŒåŒæ—¶æ²¡æœ‰iid</li><li>å¼ºåŒ–å­¦ä¹ ä¸­å¾—åˆ°çš„è®­ç»ƒæ•°æ®æ˜¯ä¸€ä¸ªç©æ¸¸æˆçš„åºåˆ—ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªåºåˆ—æ”¾è¿›ç½‘ç»œã€å¸Œæœ›ç½‘ç»œè¾“å‡ºä¸€äº›åŠ¨ä½œï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­æˆ‘ä»¬å¹¶æ²¡æœ‰æ ‡ç­¾æ¥è¯´æ˜ç°åœ¨è¿™ä¸ªåŠ¨ä½œæ˜¯æ­£ç¡®çš„è¿˜æ˜¯ié”™è¯¯çš„ï¼Œå¿…é¡»ç­‰åˆ°æ¸¸æˆç»“æŸæ‰èƒ½çŸ¥é“ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬é¢ä¸´ [[å»¶è¿Ÿå¥–åŠ±delayed- reward]] çš„é—®é¢˜</li></ul><h3 id="33-åŒºåˆ«æ€»ç»“"><a class="markdownIt-Anchor" href="#33-åŒºåˆ«æ€»ç»“"></a> 3.3 åŒºåˆ«æ€»ç»“</h3><ul><li>ç¬¬ä¸€ç‚¹ï¼Œå¼ºåŒ–å­¦ä¹ è¾“å…¥çš„æ ·æœ¬æ˜¯åºåˆ—æ•°æ®ï¼Œä¸æ˜¯iid</li><li>ç¬¬äºŒç‚¹ï¼Œå­¦ä¹ å™¨å¹¶æ²¡æœ‰å‘Šè¯‰æˆ‘ä»¬æ¯ä¸€æ­¥æ­£ç¡®çš„åŠ¨ä½œåº”è¯¥æ˜¯ä»€ä¹ˆï¼Œå­¦ä¹ å™¨éœ€è¦è‡ªå·±å»å‘ç°é‚£ç»†å¾®åŠ¨ä½œå¯ä»¥å¸¦æ¥æœ€å¤šçš„å¥–åŠ±</li><li>ç¬¬ä¸‰ç‚¹ï¼Œæ™ºèƒ½ä½“è·å¾—è‡ªå·±èƒ½åŠ›çš„è¿‡ç¨‹å°±æ˜¯ [[ä¸æ–­è¯•é”™æ¢ç´¢trial-and-error- exploration]]çš„è¿‡ç¨‹ï¼Œ æ¢ç´¢exploration å’Œ åˆ©ç”¨exploitation</li><li>ç¬¬å››ç‚¹ï¼Œåœ¨å¼ºåŒ–å­¦ä¹ è¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰éå¸¸å¼ºçš„ ç›‘ç£è€…supervisor ï¼Œåªæœ‰ [[å¥–åŠ±ä¿¡å·reward- signal]]ï¼Œå¹¶ä¸”å…·æœ‰ [[å»¶è¿Ÿå¥–åŠ±delayed- reward]] çš„æƒ…å†µ</li></ul><h2 id="0x04-åºåˆ—å†³ç­–"><a class="markdownIt-Anchor" href="#0x04-åºåˆ—å†³ç­–"></a> 0x04 åºåˆ—å†³ç­–</h2><h3 id="41-å¥–åŠ±-rewardçš„å®šä¹‰"><a class="markdownIt-Anchor" href="#41-å¥–åŠ±-rewardçš„å®šä¹‰"></a> 4.1 å¥–åŠ± rewardçš„å®šä¹‰</h3><p>æ˜¯ç¯å¢ƒç»™çš„ä¸€ç§ [[æ ‡é‡åé¦ˆä¿¡å·-scalar-feedback-signal]]ï¼Œè¿™ç§ä¿¡å·æ˜¾ç¤ºæ™ºèƒ½ä½“åœ¨æŸä¸€æ­¥æ‰å»æŸä¸ªç­–ç•¥çš„è¡¨ç°å¦‚ä½•</p><h3 id="42-åºåˆ—è¿‡ç¨‹æè¿°"><a class="markdownIt-Anchor" href="#42-åºåˆ—è¿‡ç¨‹æè¿°"></a> 4.2 åºåˆ—è¿‡ç¨‹æè¿°</h3><p>å¼ºåŒ–å­¦ä¹ ä¸­ä¸€ä¸ªé‡è¦çš„è¯¾é¢˜å°±æ˜¯è¿‘æœŸå¥–åŠ±å’Œè¿œæœŸå¥–åŠ±çš„æƒè¡¡ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•è®©æ™ºèƒ½ä½“å¯ä»¥è·å¾—æ›´å¤šçš„è¿œæœŸå¥–åŠ±</p><p>åœ¨ä¸ç¯å¢ƒçš„äº¤äº’è¿‡ç¨‹ä¸­ï¼Œ [[æ™ºèƒ½ä½“agent]] ä¼šè·å¾—å¾ˆå¤š [[è§‚æµ‹observation]] ï¼Œé’ˆå¯¹æ¯ä¸ª [[è§‚æµ‹observation]] ï¼Œ [[æ™ºèƒ½ä½“agent]]ä¼šé‡‡å–ä¸€ä¸ª [[åŠ¨ä½œaction]]ï¼Œç„¶åè·å¾— [[å¥–åŠ±reward]]ï¼Œæ‰€ä»¥è¿™æ ·çš„åºåˆ—æ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mi>t</mi></msub><mo>=</mo><msub><mi>o</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>r</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>o</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>r</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">H_t=o_1,a_1,r_1,...,o_t,a_t,r_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.08125em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>[[æ™ºèƒ½ä½“agent]]åœ¨é‡‡å–å½“å‰åŠ¨ä½œçš„æ—¶å€™ä¼šä¾èµ–ä¹‹å‰å¾—åˆ°çš„å†å²ï¼Œå› æ­¤å¯ä»¥å°†æ•´ä¸ªå­¦ä¹ çš„[[çŠ¶æ€state]]çœ‹ä½œæ˜¯è¿™ä¸ªå†å²çš„å‡½æ•°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub><mo>=</mo><mi>f</mi><mo>(</mo><msub><mi>H</mi><mi>t</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">s_t=f(H_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">s</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.08125em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><h3 id="43-è§‚æµ‹-observation-ä¸-çŠ¶æ€stateåŒºåˆ«"><a class="markdownIt-Anchor" href="#43-è§‚æµ‹-observation-ä¸-çŠ¶æ€stateåŒºåˆ«"></a> 4.3 è§‚æµ‹ observation ä¸ çŠ¶æ€stateåŒºåˆ«</h3><p><img src="https://pica.zhimg.com/80/v2-8e7ac501e53cfff71e32f8caef5da84a_1440w.png" alt="image-20220930165746802" /></p><h3 id="44-åŠ¨ä½œaction"><a class="markdownIt-Anchor" href="#44-åŠ¨ä½œaction"></a> 4.4 åŠ¨ä½œaction</h3><p>åˆ†ä¸ºç¦»æ•£ä¸è¿ç»­</p><h3 id="45-æ™ºèƒ½ä½“åˆ†ç±»"><a class="markdownIt-Anchor" href="#45-æ™ºèƒ½ä½“åˆ†ç±»"></a> 4.5 æ™ºèƒ½ä½“åˆ†ç±»</h3><p>ç¬¬ä¸€ç§åˆ†ç±»ï¼š</p><ol><li>åŸºäºpolicyåˆ’åˆ†ï¼›éšæœºä¸ç¡®å®š</li><li>åŸºäºvalue- functionï¼›valueæˆ–Qå‡½æ•°</li><li>æ¨¡å‹modelï¼›æ¨¡å‹å†³å®šä¸‹ä¸€æ­¥çš„çŠ¶æ€ï¼ŒçŠ¶æ€å–å†³äºå½“å‰çš„çŠ¶æ€ä»¥åŠå½“å‰é‡‡å–çš„åŠ¨ä½œï¼Œç”± [[çŠ¶æ€è½¬ç§»æ¦‚ç‡]]å’Œ [[å¥–åŠ±å‡½æ•°]]ç»„æˆ</li></ol><p><img src="https://picx.zhimg.com/80/v2-1ce7e41f2f475a4f754d5ac1496e917a_1440w.png" alt="image-20220930170200097" /></p><p>ç¬¬äºŒç§åˆ†ç±»ï¼š</p><ol><li>åŸºäºä»·å€¼çš„æ™ºèƒ½ä½“</li><li>åŸºäºç­–ç•¥çš„æ™ºèƒ½ä½“</li><li>æ¼”å‘˜è¯„è®ºå‘˜æ™ºèƒ½ä½“</li></ol><p><img src="https://picx.zhimg.com/80/v2-29b80bae0bdeb4686b984a55a27b73f4_1440w.png" alt="image-20220930171222116" /></p>]]></content>
    
    
    <categories>
      
      <category>è˜‘è‡ä¹¦</category>
      
    </categories>
    
    
    <tags>
      
      <tag>RL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 03_ç»å…¸å·ç§¯ç¥ç»ç½‘ç»œå®ç°</title>
    <link href="/posts/d43999e4.html"/>
    <url>/posts/d43999e4.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨åˆç­‰å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºä»å¹³ç§»ä¸å˜å’Œç¼©æ”¾ä¸å˜æ€§è´¨è€Œå¾—åˆ°çš„å·ç§¯æ€§è´¨çš„åŸºç¡€ä¸Šï¼Œåœ¨ä¸Šä¸ªä¸–çºªè¯ç”Ÿçš„LeNetæˆåŠŸå®ç°ä¸ä¹‹å‰ä¸åŒçš„è·¯å¾„ï¼Œåœ¨GPUè¯ç”Ÿä¹‹åï¼Œæ–°çš„ç½‘ç»œAlexNetã€VGGã€NiNã€GoogLeNetã€Residual Netã€DenseNeté€æ¸å‘å±•ã€‚å·ç§¯ç¥ç»ç½‘ç»œä»å˜æ·±å˜å¤šï¼Œé€æ¸åˆ°å˜æˆå—ä»¥åŠä¸€äº›trickçš„å¢åŠ ã€‚</p><span id="more"></span><h2 id="0x01-introduction"><a class="markdownIt-Anchor" href="#0x01-introduction"></a> 0x01 introduction</h2><h3 id="11-pytorch"><a class="markdownIt-Anchor" href="#11-pytorch"></a> 1.1 PyTorch</h3><p>ä¹‹å‰åœ¨è®²åº§ä¸­å¬åˆ°æ·±åº¦å­¦ä¹ æ¡†æ¶æ˜¯æ·±åº¦å­¦ä¹ æ—¶ä»£çš„æ“ä½œç³»ç»Ÿï¼Œæ€ä¹ˆè¯´è¿™ä¸ªæ¯”å–»æœ‰ç‚¹ç²—æ—·ä½†æ˜¯åˆä¸å¤±æ­£ç¡®æ€§ã€‚ä¸ªäººæ„Ÿè§‰åœ¨è®¡ç®—æœºæ—¶ä»£äººä»¬åä½œçš„èƒ½åŠ›è¾¾åˆ°ç©ºå‰çš„åœ°æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥ä¸Šåƒäººå…±åŒå¼€å‘appï¼Œè¿™ç§å’Œå»ºé€ æˆ¿å±‹ä¼¼çš„è¿‡ç¨‹å……åˆ†ä½“ç°äº†è½¯ä»¶å·¥ç¨‹çš„é­…åŠ›ã€‚ä¸åœŸå»ºä¸­è§„åˆ’ã€è®¾è®¡ã€å»ºé€ ã€ éªŒæ”¶ç­‰æµç¨‹ç›¸ä¼¼ï¼Œä¸ªäººéªŒè¯è®¡ç®—æœºæˆå°±çš„ç»“æœæ˜¯å»ºç«‹åœ¨ä¸€å±‚ä¸€å±‚çš„æŠ½è±¡çš„åŸºç¡€ä¸Šçš„ã€‚</p><p>ä»ç¡¬ä»¶çš„è§’åº¦ï¼Œç°åœ¨å¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½éœ€è¦å…³å¿ƒèŠ¯ç‰‡ä¸Šçš„ä¸‰æç®¡ï¼Œä¹Ÿä¸éœ€è¦å…³å¿ƒåŠ æ³•å™¨çš„æ„æˆã€‚ä»ä¹‹å‰æ‰‹å·¥ç„Šæœºï¼Œåˆ°èŠ¯ç‰‡çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œåˆ°æ›´é«˜çº§çš„æŠ½è±¡å·¥è‰ºå’Œå»ºé€ å·¥è‰ºçš„è¯ç”Ÿï¼Œäººä»¬è®¾è®¡æ›´é«˜æ°´å¹³çš„èŠ¯ç‰‡äº§ç”Ÿäº†å¯èƒ½ã€‚æ­£æ˜¯æœ‰è¿™äº›æŠ½è±¡æˆ‘ä»¬æ‰èƒ½å¾€å‰èµ°ã€‚</p><p>ä»æ·±åº¦å­¦ä¹ æ¡†æ¶çš„è§’åº¦ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä»é›¶å®ç°æŸä¸ªç½‘ç»œåœ¨å­¦ä¹ è¿‡ç¨‹æ˜¯æœ‰æ„æ€çš„ï¼Œä½†æ˜¯ä»æ±‡ç¼–è¯­è¨€åŒ…è£…æˆé«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œå†åŒ…è£…æˆä¸€ä¸ªä¸€ä¸ªpackageè€Œå½¢æˆæ¡†æ¶ï¼Œåœ¨å‰äººæŠ½è±¡å¥½çš„åŸºç¡€ä¸Šï¼Œåœ¨æ·±åº¦å­¦ä¹ æ¡†æ¶æ­å»ºçš„åŸºç¡€ä¸Šï¼Œåœ¨ä½¿ç”¨è€…çš„è§’åº¦æ›´åº”è¯¥é‡è§†å¦‚ä½•é«˜æ•ˆçš„ä½¿ç”¨ã€‚</p><p>åŸºäºtorchæ„å»ºçš„PyTorchä¾¿æ˜¯æŠ½è±¡å¥½æ·±åº¦å­¦ä¹ çš„æ¡†æ¶ã€‚</p><p>è¿™é‡Œå¹¶æ²¡æœ‰å‚ç…§ <a href="https://pytorch.org/">PyTorchå®˜ç½‘</a></p><p>è€Œæ˜¯æ‰¾åˆ°ä¸€ä¸ªå¼€æºçš„ <a href="https://handbook.pytorch.wiki/index.html">PyTorchä¸­æ–‡æ‰‹å†Œ</a> æ¥äº†è§£è¿™ä¸ªæ·±åº¦å­¦ä¹ æ¡†æ¶</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">Torch <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> going anywhere. PyTorch <span class="hljs-keyword">and</span> Torch <span class="hljs-keyword">use</span> the same C libraries that contain <span class="hljs-keyword">all</span> the performance: TH, THC, THNN, THCUNN <span class="hljs-keyword">and</span> they will continue <span class="hljs-keyword">to</span> be <span class="hljs-keyword">shared</span>.<br>We still <span class="hljs-keyword">and</span> will have continued engineering <span class="hljs-keyword">on</span> Torch itself, <span class="hljs-keyword">and</span> we have no immediate plan <span class="hljs-keyword">to</span> remove that.<br>PyTorch <span class="hljs-keyword">is</span> an <span class="hljs-keyword">open</span> source machine learning <span class="hljs-keyword">library</span> <span class="hljs-keyword">for</span> Python, based <span class="hljs-keyword">on</span> Torch, used <span class="hljs-keyword">for</span> applications such as <span class="hljs-built_in">natural</span> language processing. It <span class="hljs-keyword">is</span> primarily developed by Facebook<span class="hljs-symbol">&#x27;s</span> artificial-intelligence research <span class="hljs-keyword">group</span>, <span class="hljs-keyword">and</span> Uber<span class="hljs-symbol">&#x27;s</span> <span class="hljs-string">&quot;Pyro&quot;</span> software <span class="hljs-keyword">for</span> probabilistic programming <span class="hljs-keyword">is</span> built <span class="hljs-keyword">on</span> it.<br>PyTorch <span class="hljs-keyword">is</span> a Python <span class="hljs-keyword">package</span> that provides two high-level features:<br><br>    Tensor computation (like NumPy) <span class="hljs-keyword">with</span> <span class="hljs-keyword">strong</span> GPU acceleration<br><br>    Deep neural networks built <span class="hljs-keyword">on</span> a tape-based autograd system<br>You can reuse your favorite Python packages such as NumPy, SciPy <span class="hljs-keyword">and</span> Cython <span class="hljs-keyword">to</span> extend PyTorch <span class="hljs-keyword">when</span> needed.<br></code></pre></td></tr></table></figure><h3 id="12-gpu"><a class="markdownIt-Anchor" href="#12-gpu"></a> 1.2 GPU</h3><p>è¿™é‡Œå‚ç…§wikiæ‰€ç»™çš„è§£é‡Šï¼š<a href="https://zh.wikipedia.org/zh-sg/%E5%9C%96%E5%BD%A2%E8%99%95%E7%90%86%E5%99%A8">å›¾å½¢å¤„ç†å™¨GPUè§£é‡Š</a></p><p><strong>å›¾å½¢å¤„ç†å™¨</strong>ï¼ˆè‹±è¯­ï¼š<strong>G</strong>raphics <strong>P</strong>rocessing <strong>U</strong>nitï¼Œç¼©å†™ï¼š<strong>GPU</strong>ï¼›åˆç§°<strong>æ˜¾ç¤ºæ ¸å¿ƒ</strong>ã€<strong>æ˜¾å¡</strong>ã€<strong>è§†è§‰å¤„ç†å™¨</strong>ã€<strong>æ˜¾ç¤ºèŠ¯ç‰‡</strong>æˆ–<strong>ç»˜å›¾èŠ¯ç‰‡</strong>ï¼‰æ˜¯ä¸€ç§ä¸“é—¨åœ¨<a href="https://zh.wikipedia.org/wiki/%E5%80%8B%E4%BA%BA%E9%9B%BB%E8%85%A6">ä¸ªäººç”µè„‘</a>ã€<a href="https://zh.wikipedia.org/wiki/%E5%B7%A5%E4%BD%9C%E7%AB%99">å·¥ä½œç«™</a>ã€<a href="https://zh.wikipedia.org/wiki/%E9%81%8A%E6%88%B2%E6%A9%9F">æ¸¸æˆæœº</a>å’Œä¸€äº›<a href="https://zh.wikipedia.org/wiki/%E8%A1%8C%E5%8B%95%E8%A3%9D%E7%BD%AE">ç§»åŠ¨è®¾å¤‡</a>ï¼ˆå¦‚<a href="https://zh.wikipedia.org/wiki/%E5%B9%B3%E6%9D%BF%E9%9B%BB%E8%85%A6">å¹³æ¿ç”µè„‘</a>ã€<a href="https://zh.wikipedia.org/wiki/%E6%99%BA%E6%85%A7%E5%9E%8B%E6%89%8B%E6%A9%9F">æ™ºèƒ½æ‰‹æœº</a>ç­‰ï¼‰ä¸Šæ‰§è¡Œç»˜å›¾è¿ç®—å·¥ä½œçš„<a href="https://zh.wikipedia.org/wiki/%E5%BE%AE%E8%99%95%E7%90%86%E5%99%A8">å¾®å¤„ç†å™¨</a>ã€‚</p><p>GPUä¸åŒäºä¼ ç»Ÿçš„CPUï¼Œå¦‚<a href="https://zh.wikipedia.org/wiki/Intel">Intel</a> <a href="https://zh.wikipedia.org/wiki/Intel_Core_i5">i5</a>æˆ–<a href="https://zh.wikipedia.org/wiki/Intel_Core_i7">i7</a>å¤„ç†å™¨ï¼Œå…¶<a href="https://zh.wikipedia.org/wiki/%E5%86%85%E6%A0%B8">å†…æ ¸</a>æ•°é‡è¾ƒå°‘ï¼Œä¸“ä¸ºé€šç”¨è®¡ç®—è€Œè®¾è®¡ã€‚ç›¸åï¼ŒGPUæ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å¤„ç†å™¨ï¼Œå…·æœ‰æ•°ç™¾æˆ–æ•°åƒä¸ªå†…æ ¸ï¼Œç»è¿‡ä¼˜åŒ–ï¼Œå¯å¹¶è¡Œè¿è¡Œå¤§é‡è®¡ç®—ã€‚è™½ç„¶GPUåœ¨æ¸¸æˆä¸­ä»¥<a href="https://zh.wikipedia.org/wiki/3D%E6%B8%B2%E6%9F%93">3Dæ¸²æŸ“</a>è€Œé—»åï¼Œä½†å®ƒä»¬å¯¹è¿è¡Œåˆ†æã€<a href="https://zh.wikipedia.org/wiki/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0">æ·±åº¦å­¦ä¹ </a>å’Œ<a href="https://zh.wikipedia.org/wiki/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0">æœºå™¨å­¦ä¹ </a>ç®—æ³•å°¤å…¶æœ‰ç”¨ã€‚GPUå…è®¸æŸäº›è®¡ç®—æ¯”ä¼ ç»ŸCPUä¸Šè¿è¡Œç›¸åŒçš„è®¡ç®—é€Ÿåº¦å¿«10å€è‡³100å€ã€‚</p><h3 id="13-æ•°æ®é›†è¾“å…¥å’Œç»“æœè®¡ç®—"><a class="markdownIt-Anchor" href="#13-æ•°æ®é›†è¾“å…¥å’Œç»“æœè®¡ç®—"></a> 1.3 æ•°æ®é›†è¾“å…¥å’Œç»“æœè®¡ç®—</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è¯»å–fashionæ•°æ®é›†</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_fashion_mnist</span>(<span class="hljs-params">batchsize,resize=<span class="hljs-literal">None</span></span>):<br>    <span class="hljs-comment"># resizeç›¸å½“äºåŸºæœ¬çš„å¡«å……æ¨¡å—</span><br>    <span class="hljs-keyword">import</span> torch<br>    <span class="hljs-keyword">from</span> torch.utils <span class="hljs-keyword">import</span> data<br>    <span class="hljs-keyword">import</span> torchvision<br>    <span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> transforms<br><br>    <span class="hljs-keyword">if</span> resize:<br>        trans=[transforms.ToTensor()]<br>        trans.insert(<span class="hljs-number">0</span>, transforms.Resize(resize))<br>        trans = transforms.Compose(trans)<br>    <span class="hljs-keyword">else</span>:<br>        trans=transforms.ToTensor()<br>    train_mnist=torchvision.datasets.FashionMNIST(root=<span class="hljs-string">&#x27;../data/FashionMNIST&#x27;</span>,train=<span class="hljs-literal">True</span>,transform=trans,download=<span class="hljs-literal">True</span>)<br>    test_mnist=torchvision.datasets.FashionMNIST(root=<span class="hljs-string">&#x27;../data/FashionMNIST&#x27;</span>,train=<span class="hljs-literal">False</span>,transform=trans,download=<span class="hljs-literal">True</span>)<br>    train_iter=data.DataLoader(train_mnist,batch_size=batchsize,shuffle=<span class="hljs-literal">True</span>,num_workers=<span class="hljs-number">4</span>)<br>    test_iter=data.DataLoader(test_mnist,batch_size=batchsize,shuffle=<span class="hljs-literal">True</span>,num_workers=<span class="hljs-number">4</span>)<br>    <span class="hljs-keyword">return</span> train_iter,test_iter<br>    <br>batchsize=<span class="hljs-number">256</span><br>train_iter,test_iter=load_fashion_mnist(batchsize,<span class="hljs-number">224</span>)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">accuracy</span>(<span class="hljs-params">y_hat,y</span>):<br>    <span class="hljs-comment"># æ•°æ­£ç¡®çš„æ•°é‡</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(y_hat.shape)&gt;<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y_hat.shape[<span class="hljs-number">1</span>]&gt;<span class="hljs-number">1</span>:<br>        y_hat=y_hat.argmax(axis=<span class="hljs-number">1</span>)<br>    cmp=y_hat.<span class="hljs-built_in">type</span>(y.dtype)==y<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">float</span>(cmp.<span class="hljs-built_in">type</span>(y.dtype).<span class="hljs-built_in">sum</span>())<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">gpu_acc</span>(<span class="hljs-params">model,data_iter,device=<span class="hljs-literal">None</span></span>):<br>    acc=<span class="hljs-number">0</span><br>    num=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(net,nn.Module):<br>        net.<span class="hljs-built_in">eval</span>()<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> device:<br>            device=<span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(net.parameters())).device<br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> X,y <span class="hljs-keyword">in</span> data_iter:<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(X,<span class="hljs-built_in">list</span>):<br>                <span class="hljs-comment"># è¿™é‡Œçš„ifä»…ä»…æ˜¯ä¸ºä¹‹åbertå¾®è°ƒæ‰€éœ€çš„</span><br>                X=[x.to(device) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> X]<br>            <span class="hljs-keyword">else</span>:<br>                X=X.to(device)<br>            y=y.to(device)<br>            acc+=accuracy(net(X),y)<br>            num+=y.numel()<br>    <span class="hljs-keyword">return</span> acc/num<br><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">trainer</span>(<span class="hljs-params">net,train_iter,test_iter,num_epoches,lr,device</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;ç”¨GPUè®­ç»ƒæ¨¡å‹&#x27;&#x27;&#x27;</span><br>    <span class="hljs-comment">#åˆå§‹åŒ–å‚æ•°</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">init_weights</span>(<span class="hljs-params">m</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(m)==nn.Linear <span class="hljs-keyword">or</span> <span class="hljs-built_in">type</span>(m)==nn.Conv2d:<br>            nn.init.xavier_uniform_(m.weight)<br>            <span class="hljs-comment">#nn.init.normal_(m.weight,std=0.01)</span><br>    net.apply(init_weights)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;training on&#x27;</span>,device)<br>    <span class="hljs-comment"># print(torch.cuda.get_device_name(0))</span><br>    net.to(device)<br>    optimizer=torch.optim.SGD(net.parameters(),lr=lr)<br>    loss=nn.CrossEntropyLoss()<br><br>    train_acc=[]<br>    test_acc=[]<br>    loss_epoches=[]<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epoches):<br>        temp_train_acc=<span class="hljs-number">0</span><br>        loss_epoch=<span class="hljs-number">0</span><br>        num=<span class="hljs-number">0</span><br>        net.train()<br>        <span class="hljs-keyword">for</span> i,(X,y) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_iter):<br>            optimizer.zero_grad()<br>            X,y=X.to(device),y.to(device)<br>            <span class="hljs-keyword">with</span> torch.no_grad():<br>                temp_train_acc+=accuracy(net(X),y)<br>            y_hat=net(X)<br>            l=loss(y_hat,y)<br>            l.backward()<br>            optimizer.step()<br>            loss_epoch+=l*X.shape[<span class="hljs-number">0</span>]<br>            num+=y.numel()<br>        train_acc.append(<span class="hljs-built_in">float</span>(temp_train_acc/num))<br>        test_acc.append(gpu_acc(net,test_iter))<br>        loss_epoches.append(<span class="hljs-built_in">float</span>(loss_epoch)/num)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;æœ¬è½®&#123;&#125;è®­ç»ƒçš„ç»“æœï¼Œtestâ€”acc:&#123;&#125;,train-acc:&#123;&#125;,train-loss:&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">str</span>(epoch+<span class="hljs-number">1</span>),<span class="hljs-built_in">str</span>(test_acc[-<span class="hljs-number">1</span>]),<span class="hljs-built_in">str</span>(train_acc[-<span class="hljs-number">1</span>]),<span class="hljs-built_in">str</span>(loss_epoches[-<span class="hljs-number">1</span>])))<br>    <span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>    plt.plot(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+num_epoches)),test_acc,label=<span class="hljs-string">&#x27;test_acc&#x27;</span>)<br>    plt.plot(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+num_epoches)),train_acc,label=<span class="hljs-string">&#x27;train_acc&#x27;</span>)<br>    plt.plot(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+num_epoches)),loss_epoches,label=<span class="hljs-string">&#x27;loss&#x27;</span>)<br>    plt.legend()<br>    plt.show()<br>    <br>        <br>lr,num_epoches=<span class="hljs-number">0.2</span>,<span class="hljs-number">20</span><br><br><br>device = torch.device(<span class="hljs-string">&quot;cuda:0&quot;</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;cpu&quot;</span>)<br>trainer(net,train_iter,test_iter,num_epoches,lr,device)<br></code></pre></td></tr></table></figure><h2 id="0x02-ç»å…¸çš„cnn"><a class="markdownIt-Anchor" href="#0x02-ç»å…¸çš„cnn"></a> 0x02 ç»å…¸çš„CNN</h2><h3 id="21-alexnet"><a class="markdownIt-Anchor" href="#21-alexnet"></a> 2.1 AlexNet</h3><p>ä¹‹å‰çš„é˜…è¯»ç¬”è®°<a href="https://blog.tjdata.site/2022/08/27/paper02-2012-imagenet-classification-with-deep-convolutional-neural-networks/">paper02-2012-imagenet-classification-with-deep-convolutional-neural-networks</a></p><p>ä¸»è¦çš„è´¡çŒ®ï¼Œä»¥åŠåé¢æ²¡æœ‰ç”¨çš„åœ°æ–¹</p><ol><li>å¼•å…¥äº†ReLuæ¿€æ´»å‡½æ•°ï¼Œè®©è®­ç»ƒçš„æ›´å¿«</li><li>åˆ©ç”¨åŒGPUè®­ç»ƒï¼Œæ³¨æ„è¿™é‡Œå¯¹ç½‘ç»œç»“æ„è¿›è¡Œåˆ’åˆ†ï¼ˆå¯¹ç½‘ç»œä¸åŒå±‚è¿›è¡Œåˆ‡å‰²è€Œä¸æ˜¯åˆ‡å‰²æˆä¸¤ç§å°çš„éƒ¨åˆ†ï¼‰ï¼Œå·¥ç¨‹èƒ½åŠ›å¤ªå¼ºäº†</li><li>ï¼ˆæ²¡æœ‰ç”¨ï¼‰ä¸€ç§local response normalizationï¼Œä½†æ˜¯ç¡®å®éœ€è¦åœ¨è¿™ä¸ªæ–¹é¢åštrickï¼Œåœ¨åé¢çš„resNetä¸­å¯ä»¥çœ‹åˆ°</li><li>ï¼ˆæ²¡æœ‰ç”¨ï¼‰æ–°çš„overlapping poolingï¼Œä¸€ç§æ–°çš„æ± åŒ–æ–¹æ³•ï¼Œè¿™ä¸ªä¸åŒGPUæœ‰å…³</li><li>ï¼ˆæœ‰ç”¨ï¼Œä½†æ˜¯è§£é‡Šä¸å¯¹ï¼‰å°†dropoutå¼•å…¥è®­ç»ƒè¿‡ç¨‹ï¼Œå°è¯•è§£é‡Šä¸ºensemble learningï¼Œä½†ç°åœ¨æ›´åå‘äºregularization</li><li>æ•°æ®å¢å¼ºï¼Œæ‰æœ‰éšæœºæŠ½æ ·æ•°æ®çš„æ–¹å¼ï¼Œå°†256æå–å¾—åˆ°224æ¥æ‰©å……æ•°æ®é›†</li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6gmxhdh2sj20t60gmtb7.jpg" alt="image-20220923164858838" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch <br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-comment">#AlexNet</span><br>net = nn.Sequential(<br>    <span class="hljs-comment"># è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª11*11çš„æ›´å¤§çª—å£æ¥æ•æ‰å¯¹è±¡ã€‚</span><br>    <span class="hljs-comment"># åŒæ—¶ï¼Œæ­¥å¹…ä¸º4ï¼Œä»¥å‡å°‘è¾“å‡ºçš„é«˜åº¦å’Œå®½åº¦ã€‚</span><br>    <span class="hljs-comment"># å¦å¤–ï¼Œè¾“å‡ºé€šé“çš„æ•°ç›®è¿œå¤§äºLeNet</span><br>    nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">96</span>, kernel_size=<span class="hljs-number">11</span>, stride=<span class="hljs-number">4</span>, padding=<span class="hljs-number">1</span>), nn.ReLU(),<br>    nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">2</span>),<br>    <span class="hljs-comment"># å‡å°å·ç§¯çª—å£ï¼Œä½¿ç”¨å¡«å……ä¸º2æ¥ä½¿å¾—è¾“å…¥ä¸è¾“å‡ºçš„é«˜å’Œå®½ä¸€è‡´ï¼Œä¸”å¢å¤§è¾“å‡ºé€šé“æ•°</span><br>    nn.Conv2d(<span class="hljs-number">96</span>, <span class="hljs-number">256</span>, kernel_size=<span class="hljs-number">5</span>, padding=<span class="hljs-number">2</span>), nn.ReLU(),<br>    nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">2</span>),<br>    <span class="hljs-comment"># ä½¿ç”¨ä¸‰ä¸ªè¿ç»­çš„å·ç§¯å±‚å’Œè¾ƒå°çš„å·ç§¯çª—å£ã€‚</span><br>    <span class="hljs-comment"># é™¤äº†æœ€åçš„å·ç§¯å±‚ï¼Œè¾“å‡ºé€šé“çš„æ•°é‡è¿›ä¸€æ­¥å¢åŠ ã€‚</span><br>    <span class="hljs-comment"># åœ¨å‰ä¸¤ä¸ªå·ç§¯å±‚ä¹‹åï¼Œæ±‡èšå±‚ä¸ç”¨äºå‡å°‘è¾“å…¥çš„é«˜åº¦å’Œå®½åº¦</span><br>    nn.Conv2d(<span class="hljs-number">256</span>, <span class="hljs-number">384</span>, kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>), nn.ReLU(),<br>    nn.Conv2d(<span class="hljs-number">384</span>, <span class="hljs-number">384</span>, kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>), nn.ReLU(),<br>    nn.Conv2d(<span class="hljs-number">384</span>, <span class="hljs-number">256</span>, kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>), nn.ReLU(),<br>    nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">2</span>),<br>    nn.Flatten(),<br>    <span class="hljs-comment"># è¿™é‡Œï¼Œå…¨è¿æ¥å±‚çš„è¾“å‡ºæ•°é‡æ˜¯LeNetä¸­çš„å¥½å‡ å€ã€‚ä½¿ç”¨dropoutå±‚æ¥å‡è½»è¿‡æ‹Ÿåˆ</span><br>    nn.Linear(<span class="hljs-number">6400</span>, <span class="hljs-number">4096</span>), nn.ReLU(),<br>    nn.Dropout(p=<span class="hljs-number">0.5</span>),<br>    nn.Linear(<span class="hljs-number">4096</span>, <span class="hljs-number">4096</span>), nn.ReLU(),<br>    nn.Dropout(p=<span class="hljs-number">0.5</span>),<br>    <span class="hljs-comment"># æœ€åæ˜¯è¾“å‡ºå±‚ã€‚ç”±äºè¿™é‡Œä½¿ç”¨Fashion-MNISTï¼Œæ‰€ä»¥ç”¨ç±»åˆ«æ•°ä¸º10ï¼Œè€Œéè®ºæ–‡ä¸­çš„1000</span><br>    nn.Linear(<span class="hljs-number">4096</span>, <span class="hljs-number">10</span>))<br></code></pre></td></tr></table></figure><h3 id="22-vgg"><a class="markdownIt-Anchor" href="#22-vgg"></a> 2.2 VGG</h3><p><a href="https://arxiv.org/pdf/1409.1556.pdf">VERY DEEP CONVOLUTIONAL NETWORKS FOR LARGE-SCALE IMAGE RECOGNITION</a></p><p>AlexNetè¯æ˜ #å·ç§¯ç¥ç»ç½‘ç»œ CNN convolutional- neural-network çš„æ·±åº¦æ˜¯æœ‰æ•ˆçš„ï¼Œä½†å¹¶æ²¡æœ‰ç»™å‡ºæ¨¡ç‰ˆæ¥è¿›è¡Œåˆ›å»ºç½‘ç»œã€‚è¿™é‡Œä¸€ä¸ªç›´è§‰çš„æƒ³æ³•</p><p>ä¸èŠ¯ç‰‡è®¾è®¡ä¸­å·¥ç¨‹å¸ˆä»æ”¾ç½®æ™¶ä½“ç®¡åˆ°é€»è¾‘å…ƒä»¶å†åˆ°é€»è¾‘å—çš„è¿‡ç¨‹ç±»ä¼¼ï¼Œç¥ç»ç½‘ç»œæ¶æ„è®¾è®¡ä¹Ÿé€æ¸å˜æˆæ›´åŠ æŠ½è±¡ï¼Œç ”ç©¶äººå‘˜å¼€å§‹ä»å•ä¸ªç¥ç»å…ƒçš„è§’åº¦æ€è€ƒé—®é¢˜ï¼Œå‘å±•åˆ°æ•´ä¸ªå±‚ï¼Œè½¬å‘å¯ä»¥å¤ç”¨å±‚çš„å—çš„æ¨¡å¼ #memo</p><p>ä½¿ç”¨ #å¾ªç¯loop å’Œ å­å‡½æ•° æ¥å®ç° #VGG</p><p>ä¸»è¦åšå‡ºçš„è´¡çŒ®</p><ol><li>åˆ©ç”¨å¤ç”¨çš„æ€è·¯æ„å»ºå·ç§¯å—</li><li>ä½œè€…å°è¯•å„ç§æ¶æ„ï¼Œæœ€ç»ˆå‘ç°æ·±ä¸”çª„çš„ç½‘ç»œæ•ˆæœæ˜¯è¾ƒå¥½çš„</li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6gn1hnzssj20ng0kmgnu.jpg" alt="image-20220923165253079" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch <br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">vgg_block</span>(<span class="hljs-params">num_convs, in_channels, out_channels</span>):<br>    layers = []<br>    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_convs):<br>        layers.append(nn.Conv2d(in_channels, out_channels,<br>                                kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>))<br>        layers.append(nn.ReLU())<br>        in_channels = out_channels<br>    layers.append(nn.MaxPool2d(kernel_size=<span class="hljs-number">2</span>,stride=<span class="hljs-number">2</span>))<br>    <span class="hljs-keyword">return</span> nn.Sequential(*layers)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">vgg</span>(<span class="hljs-params">conv_arch</span>):<br>    conv_blks = []<br>    in_channels = <span class="hljs-number">1</span><br>    <span class="hljs-comment"># å·ç§¯å±‚éƒ¨åˆ†</span><br>    <span class="hljs-keyword">for</span> (num_convs, out_channels) <span class="hljs-keyword">in</span> conv_arch:<br>        conv_blks.append(vgg_block(num_convs, in_channels, out_channels))<br>        in_channels = out_channels<br><br>    <span class="hljs-keyword">return</span> nn.Sequential(<br>        *conv_blks, nn.Flatten(),<br>        <span class="hljs-comment"># å…¨è¿æ¥å±‚éƒ¨åˆ†</span><br>        nn.Linear(out_channels * <span class="hljs-number">7</span> * <span class="hljs-number">7</span>, <span class="hljs-number">4096</span>), nn.ReLU(), nn.Dropout(<span class="hljs-number">0.5</span>),<br>        nn.Linear(<span class="hljs-number">4096</span>, <span class="hljs-number">4096</span>), nn.ReLU(), nn.Dropout(<span class="hljs-number">0.5</span>),<br>        nn.Linear(<span class="hljs-number">4096</span>, <span class="hljs-number">10</span>))<br><br>conv_arch = ((<span class="hljs-number">1</span>, <span class="hljs-number">64</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">128</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">256</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">512</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">512</span>))<br>ratio = <span class="hljs-number">4</span><br>small_conv_arch = [(pair[<span class="hljs-number">0</span>], pair[<span class="hljs-number">1</span>] // ratio) <span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> conv_arch]<br>net = vgg(small_conv_arch)<br></code></pre></td></tr></table></figure><h3 id="23-nin"><a class="markdownIt-Anchor" href="#23-nin"></a> 2.3 NiN</h3><p><a href="https://arxiv.org/pdf/1312.4400.pdf">Network in network</a></p><p>AlexNetæå‡ºä½¿ç”¨æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œï¼ŒVGGç»™å‡ºå¦‚ä½•å¤ç”¨çš„æ„å»ºå·ç§¯ç¥ç»ç½‘ç»œï¼ŒVGGåˆ™æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šåˆ©ç”¨MLPå¯¹å¤šé€šé“è¾“å…¥å’Œå¤šé€šé“è¾“å‡ºè¿›è¡Œæ“ä½œï¼Œå–ä»£ä¹‹å‰ç®€å•çš„åŠ æƒæ–¹å¼ï¼ŒNiNåˆ©ç”¨è¿™æ¥å¯¹ç½‘ç»œçš„æ‰©å¤§å’Œæ·±åº¦ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6gn6t6xxmj20xl0u0dj3.jpg" alt="image-20220923165759261" /></p><h3 id="24-googlenet"><a class="markdownIt-Anchor" href="#24-googlenet"></a> 2.4 GoogLeNet</h3><p><a href="https://arxiv.org/pdf/1409.4842.pdf">Going deeper with convolutions</a></p><p>GoogLeNetå€Ÿç”¨NiNçš„æ€æƒ³ï¼Œåœ¨å®ƒçš„åŸºç¡€ä¸Šè®¾ç½®æ¥inceptionå—ï¼Œç”¨æ¥å®ç°å¤šä¸ªå·ç§¯æ ¸å¯¹å›¾å½¢ç‰¹å¾çš„æå–</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6gn7umg3uj212e0da3zz.jpg" alt="image-20220923165859815" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç½‘ç»œ3.5 GoogLeNet</span><br><br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> torch.nn <span class="hljs-keyword">import</span> functional <span class="hljs-keyword">as</span> F<br><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Inception</span>(nn.Module):<br>    <span class="hljs-comment"># c1--c4æ˜¯æ¯æ¡è·¯å¾„çš„è¾“å‡ºé€šé“æ•°</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, in_channels, c1, c2, c3, c4, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(Inception, self).__init__(**kwargs)<br>        <span class="hljs-comment"># çº¿è·¯1ï¼Œå•1x1å·ç§¯å±‚</span><br>        self.p1_1 = nn.Conv2d(in_channels, c1, kernel_size=<span class="hljs-number">1</span>)<br>        <span class="hljs-comment"># çº¿è·¯2ï¼Œ1x1å·ç§¯å±‚åæ¥3x3å·ç§¯å±‚</span><br>        self.p2_1 = nn.Conv2d(in_channels, c2[<span class="hljs-number">0</span>], kernel_size=<span class="hljs-number">1</span>)<br>        self.p2_2 = nn.Conv2d(c2[<span class="hljs-number">0</span>], c2[<span class="hljs-number">1</span>], kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>)<br>        <span class="hljs-comment"># çº¿è·¯3ï¼Œ1x1å·ç§¯å±‚åæ¥5x5å·ç§¯å±‚</span><br>        self.p3_1 = nn.Conv2d(in_channels, c3[<span class="hljs-number">0</span>], kernel_size=<span class="hljs-number">1</span>)<br>        self.p3_2 = nn.Conv2d(c3[<span class="hljs-number">0</span>], c3[<span class="hljs-number">1</span>], kernel_size=<span class="hljs-number">5</span>, padding=<span class="hljs-number">2</span>)<br>        <span class="hljs-comment"># çº¿è·¯4ï¼Œ3x3æœ€å¤§æ±‡èšå±‚åæ¥1x1å·ç§¯å±‚</span><br>        self.p4_1 = nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">1</span>)<br>        self.p4_2 = nn.Conv2d(in_channels, c4, kernel_size=<span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        p1 = F.relu(self.p1_1(x))<br>        p2 = F.relu(self.p2_2(F.relu(self.p2_1(x))))<br>        p3 = F.relu(self.p3_2(F.relu(self.p3_1(x))))<br>        p4 = F.relu(self.p4_2(self.p4_1(x)))<br>        <span class="hljs-comment"># åœ¨é€šé“ç»´åº¦ä¸Šè¿ç»“è¾“å‡º</span><br>        <span class="hljs-keyword">return</span> torch.cat((p1, p2, p3, p4), dim=<span class="hljs-number">1</span>)<br><br>b1 = nn.Sequential(nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">64</span>, kernel_size=<span class="hljs-number">7</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">3</span>),<br>                   nn.ReLU(),<br>                   nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">1</span>))<br><br>b2 = nn.Sequential(nn.Conv2d(<span class="hljs-number">64</span>, <span class="hljs-number">64</span>, kernel_size=<span class="hljs-number">1</span>),<br>                   nn.ReLU(),<br>                   nn.Conv2d(<span class="hljs-number">64</span>, <span class="hljs-number">192</span>, kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>),<br>                   nn.ReLU(),<br>                   nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">1</span>))<br>b3 = nn.Sequential(Inception(<span class="hljs-number">192</span>, <span class="hljs-number">64</span>, (<span class="hljs-number">96</span>, <span class="hljs-number">128</span>), (<span class="hljs-number">16</span>, <span class="hljs-number">32</span>), <span class="hljs-number">32</span>),<br>                   Inception(<span class="hljs-number">256</span>, <span class="hljs-number">128</span>, (<span class="hljs-number">128</span>, <span class="hljs-number">192</span>), (<span class="hljs-number">32</span>, <span class="hljs-number">96</span>), <span class="hljs-number">64</span>),<br>                   nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">1</span>))<br>b4 = nn.Sequential(Inception(<span class="hljs-number">480</span>, <span class="hljs-number">192</span>, (<span class="hljs-number">96</span>, <span class="hljs-number">208</span>), (<span class="hljs-number">16</span>, <span class="hljs-number">48</span>), <span class="hljs-number">64</span>),<br>                   Inception(<span class="hljs-number">512</span>, <span class="hljs-number">160</span>, (<span class="hljs-number">112</span>, <span class="hljs-number">224</span>), (<span class="hljs-number">24</span>, <span class="hljs-number">64</span>), <span class="hljs-number">64</span>),<br>                   Inception(<span class="hljs-number">512</span>, <span class="hljs-number">128</span>, (<span class="hljs-number">128</span>, <span class="hljs-number">256</span>), (<span class="hljs-number">24</span>, <span class="hljs-number">64</span>), <span class="hljs-number">64</span>),<br>                   Inception(<span class="hljs-number">512</span>, <span class="hljs-number">112</span>, (<span class="hljs-number">144</span>, <span class="hljs-number">288</span>), (<span class="hljs-number">32</span>, <span class="hljs-number">64</span>), <span class="hljs-number">64</span>),<br>                   Inception(<span class="hljs-number">528</span>, <span class="hljs-number">256</span>, (<span class="hljs-number">160</span>, <span class="hljs-number">320</span>), (<span class="hljs-number">32</span>, <span class="hljs-number">128</span>), <span class="hljs-number">128</span>),<br>                   nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">1</span>))<br>b5 = nn.Sequential(Inception(<span class="hljs-number">832</span>, <span class="hljs-number">256</span>, (<span class="hljs-number">160</span>, <span class="hljs-number">320</span>), (<span class="hljs-number">32</span>, <span class="hljs-number">128</span>), <span class="hljs-number">128</span>),<br>                   Inception(<span class="hljs-number">832</span>, <span class="hljs-number">384</span>, (<span class="hljs-number">192</span>, <span class="hljs-number">384</span>), (<span class="hljs-number">48</span>, <span class="hljs-number">128</span>), <span class="hljs-number">128</span>),<br>                   nn.AdaptiveAvgPool2d((<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)),<br>                   nn.Flatten())<br><br>net = nn.Sequential(b1, b2, b3, b4, b5, nn.Linear(<span class="hljs-number">1024</span>, <span class="hljs-number">10</span>))<br></code></pre></td></tr></table></figure><h3 id="25-resnet"><a class="markdownIt-Anchor" href="#25-resnet"></a> 2.5 ResNet</h3><p><a href="https://arxiv.org/abs/1512.03385">Deep Residual Learning for Image Recognition</a></p><p>åœ¨ä¹‹å‰ä»‹ç»æ›´æ·±ã€æ›´å¹¿çš„åŸºç¡€ä¸Šï¼Œresnetæ›´å¤šçš„æ˜¯è§£é‡Šå¦‚ä½•æé«˜ç¥ç»ç½‘ç»œçš„æ€§èƒ½</p><p>éƒ¨åˆ†çš„æ•°å­¦åŸºç¡€ï¼Œä»å­¦ä¹ ç†è®ºçš„è§’åº¦å‡ºå‘ï¼Œå¦‚æœæ¨¡å‹çš„å¤æ‚ç¨‹åº¦é€æ¸å¢åŠ ï¼Œè¿™æ ·å¯»æ‰¾ä¹‹å‰çš„å‡½æ•°é›†åˆçš„èŒƒå›´æ˜¯æ¯”è¾ƒå¤§ï¼Œè¿™æ ·å¯»æ‰¾åˆ°ä¹‹åçš„ç»“æœæ˜¯éå¸¸å›°éš¾çš„ï¼Œå› æ­¤å¯ä»¥å°è¯•å°†æ’ç­‰æ˜ å°„è½¬æ¢æˆä¸ºåŒ…å«æ•°é‡æœ¬èº«å’Œæ®‹å·®ä¹‹é—´çš„å…³ç³»</p><p>å€Ÿé‰´GBDTä¸­æ¢¯åº¦æå‡çš„æ€æƒ³ï¼Œæ®‹å·®é—®é¢˜åœ¨ç°å®ä¸­å¾€å¾€æ›´åŠ å®¹æ˜“ä¼˜åŒ–ï¼ŒåŒæ—¶åœ¨æ¨¡å‹ä¸ºç†æƒ³å‚æ•°æ›´å®¹æ˜“æ•æ‰æ’ç­‰æ˜ å°„çš„ç»†å¾®æ³¢åŠ¨ï¼Œï¼›åœ¨å®é™…è®­ç»ƒä¸­ï¼Œæ®‹å·®å—ä¸­è¾“å…¥å¯ä»¥é€šè¿‡è·¨å±‚æ•°æ®çº¿è·¯æ›´å¿«çš„å‘å‰ä¼ æ’­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> torch.nn <span class="hljs-keyword">import</span> functional <span class="hljs-keyword">as</span> F<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Residual</span>(nn.Module):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, input_channels, num_channels,</span><br><span class="hljs-params">                 use_1x1conv=<span class="hljs-literal">False</span>, strides=<span class="hljs-number">1</span></span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br>        self.conv1 = nn.Conv2d(input_channels, num_channels,<br>                               kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>, stride=strides)<br>        self.conv2 = nn.Conv2d(num_channels, num_channels,<br>                               kernel_size=<span class="hljs-number">3</span>, padding=<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> use_1x1conv:<br>            self.conv3 = nn.Conv2d(input_channels, num_channels,<br>                                   kernel_size=<span class="hljs-number">1</span>, stride=strides)<br>        <span class="hljs-keyword">else</span>:<br>            self.conv3 = <span class="hljs-literal">None</span><br>        self.bn1 = nn.BatchNorm2d(num_channels)<br>        self.bn2 = nn.BatchNorm2d(num_channels)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, X</span>):<br>        Y = F.relu(self.bn1(self.conv1(X)))<br>        Y = self.bn2(self.conv2(Y))<br>        <span class="hljs-keyword">if</span> self.conv3:<br>            X = self.conv3(X)<br>        Y += X<br>        <span class="hljs-keyword">return</span> F.relu(Y)<br>b1 = nn.Sequential(nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">64</span>, kernel_size=<span class="hljs-number">7</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">3</span>),<br>                   nn.BatchNorm2d(<span class="hljs-number">64</span>), nn.ReLU(),<br>                   nn.MaxPool2d(kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">2</span>, padding=<span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">resnet_block</span>(<span class="hljs-params">input_channels, num_channels, num_residuals,</span><br><span class="hljs-params">                 first_block=<span class="hljs-literal">False</span></span>):<br>    blk = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_residuals):<br>        <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> first_block:<br>            blk.append(Residual(input_channels, num_channels,<br>                                use_1x1conv=<span class="hljs-literal">True</span>, strides=<span class="hljs-number">2</span>))<br>        <span class="hljs-keyword">else</span>:<br>            blk.append(Residual(num_channels, num_channels))<br>    <span class="hljs-keyword">return</span> blk<br>b2 = nn.Sequential(*resnet_block(<span class="hljs-number">64</span>, <span class="hljs-number">64</span>, <span class="hljs-number">2</span>, first_block=<span class="hljs-literal">True</span>))<br>b3 = nn.Sequential(*resnet_block(<span class="hljs-number">64</span>, <span class="hljs-number">128</span>, <span class="hljs-number">2</span>))<br>b4 = nn.Sequential(*resnet_block(<span class="hljs-number">128</span>, <span class="hljs-number">256</span>, <span class="hljs-number">2</span>))<br>b5 = nn.Sequential(*resnet_block(<span class="hljs-number">256</span>, <span class="hljs-number">512</span>, <span class="hljs-number">2</span>))<br>net = nn.Sequential(b1, b2, b3, b4, b5,<br>                    nn.AdaptiveAvgPool2d((<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)),<br>                    nn.Flatten(), nn.Linear(<span class="hljs-number">512</span>, <span class="hljs-number">10</span>))<br></code></pre></td></tr></table></figure><h3 id="26-densenet"><a class="markdownIt-Anchor" href="#26-densenet"></a> 2.6 DenseNet</h3><p><a href="https://arxiv.org/pdf/1608.06993.pdf">Densely Connected Convolutional Networks</a></p><p>ï½è¿˜æ²¡çœ‹ä¸é‡è¦æ</p><h2 id="0x03-result"><a class="markdownIt-Anchor" href="#0x03-result"></a> 0x03 Result</h2><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h6goeu8sttj21430u0761.jpg" alt="AlexNet" /></p><h2 id="0x04-discussion"><a class="markdownIt-Anchor" href="#0x04-discussion"></a> 0x04 Discussion</h2><p>å·ç§¯ç¥ç»ç½‘ç»œæå–ç‰¹å¾çš„åŸºæœ¬åœ¨äºç‰¹å¾çš„å¹³ç§»ä¸å˜å’Œç¼©æ”¾ä¸å˜ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šåˆ©ç”¨äº’ç›¸å…³æ“ä½œï¼ˆé”™è¯¯çš„è¢«ç§°ä¸ºå·ç§¯ï¼‰åœ¨æå–ç‰¹å¾ã€‚åŒæ—¶åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å›´ç»•äº†å¦‚ä½•æ„å»ºæ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œï¼Œä¸»æµçš„blakcboneç»™å‡ºè‡ªå·±è‡ªå·±çš„å‘å±•å†å²ï¼š</p><ol><li>lenetæœ€æ—©ç»™å‡ºå·ç§¯ç¥ç»ç½‘ç»œçš„é›å½¢</li><li>alexnetä»è®­ç»ƒç¡¬ä»¶ã€è®­ç»ƒç½‘ç»œã€è®­ç»ƒæ•°æ®ã€æ•°æ®é¢„å¤„ç†ã€è®­ç»ƒè¿‡ç¨‹å¤šä¸ªæ–¹é¢ç»™å‡ºäº†è‡ªå·±çš„trickï¼Œä¸ºåé¢æ‰“ä¸‹åŸºç¡€</li><li>vggå›´ç»•å¦‚ä½•æ„å»ºæ›´æ·±çš„ç½‘ç»œï¼Œå¼•å…¥å¤ç”¨</li><li>ninæå‡ºä¸€ä¸ªtrickæ¥æ„å»ºæ›´å¹¿çš„ç½‘ç»œ</li><li>Googlenetåœ¨ninçš„åŸºç¡€ä¸Šï¼Œå—å¯å‘é‡‡ç”¨å¤šä¸ªå·ç§¯æ ¸æå–ç‰¹å¾</li><li>åœ¨å‰äººæ„å»ºå¥½å®Œæ•´çš„ç½‘ç»œçš„åŸºç¡€ä¸Šï¼Œresnetç»™å‡ºå¦‚ä½•ä¿æŒç½‘ç»œç¨³å®šæ€§çš„æ–¹æ³•</li><li>densenetè¿˜æ²¡æœ‰äº†è§£</li></ol><p>è¿™ä¸ªè¿‡ç¨‹éå¸¸çš„æœ‰æ„æ€ï¼Œå¯ä»¥çœ‹åˆ°åˆ«äººæ˜¯å¦‚ä½•å‰è¿›çš„ã€‚è¿™äº›éƒ½å½’åŠŸææ²è€å¸ˆçš„æ€»ç»“ï¼</p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>D2L</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 02_åˆç­‰å·ç§¯ç¥ç»LeNetå®ç°</title>
    <link href="/posts/c3baf47e.html"/>
    <url>/posts/c3baf47e.html</url>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»ä¸€ä¸ªåŸºæœ¬çš„æœºå™¨å­¦ä¹ æ¨¡å‹çº¿æ€§å›å½’å®ç°çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œå°†å…¶æ­¥éª¤åˆ†ä¸ºå…«ä¸ªéƒ¨åˆ†ã€‚ä¹‹åD2Lä¸­ä»‹ç»äº†soft Maxã€MLPç­‰ç®€å•çš„æ¨¡å‹ã€‚è¿™é‡Œè¿ˆå‘æ·±åº¦å­¦ä¹ ï¼Œåˆ©ç”¨ç®€å•çš„å·ç§¯ç¥ç»ç½‘ç»œæ¥ä»‹ç»æ·±åº¦å­¦ä¹ APIçš„ä½¿ç”¨è¿‡ç¨‹ï¼Œä»é›¶å¼€å§‹æ­å»ºæ¨¡å‹ï¼Œå°†å…¶åˆ†ä¸ºæ•°æ®é›†é¢„å¤„ç†ã€æ„å»ºæ¨¡å‹å’Œè®­ç»ƒåŠè¯„ä¼°ä¸‰ä¸ªæ­¥éª¤ã€‚</p><span id="more"></span><h2 id="0x01-introduction-of-cnn"><a class="markdownIt-Anchor" href="#0x01-introduction-of-cnn"></a> 0x01 Introduction of CNN</h2><h3 id="11-å·ç§¯çš„ç”±æ¥"><a class="markdownIt-Anchor" href="#11-å·ç§¯çš„ç”±æ¥"></a> 1.1 å·ç§¯çš„ç”±æ¥</h3><p>æˆ‘ä»¬å¯ä»¥å°†MNISTæ•°æ®é›†ä¸­çš„è¾“å…¥å˜é‡ï¼ˆ28ï¼Œ28ï¼‰çš„äºŒç»´å¼ é‡ç»™å±•å¹³ï¼ˆflattenï¼‰æˆä¸º784çš„å‘é‡ï¼Œç„¶ååœ¨ä½¿ç”¨è¶³å¤Ÿæ·±çš„MLPæ¥è¿›è¡Œè®­ç»ƒï¼Œä½†æ˜¯è¿™æ ·é€ æˆæœ€ç›´è§‚çš„ç»“æœå°±æ˜¯æ¨¡å‹çš„å‚æ•°ä¼šç›´çº¿ä¸Šå‡ï¼Œå› ä¸ºæˆ‘çš„è¾“å…¥è¶³å¤Ÿå¤šï¼ŒåŒæ—¶ä¸ºå¸Œæœ›æ¨¡å‹ç»“æœå¥½çš„æƒ…å†µéœ€è¦ä¹Ÿéœ€è¦è¶³å¤Ÿæ·±ï¼Œè¿™æ ·é€ æˆè®­ç»ƒè¿‡ç¨‹çš„è®¡ç®—å¼€é”€æ˜¯å·¨å¤§çš„ã€‚ï¼ˆè¿™æ˜¯å¾ˆç›´è§‚çš„ï¼Œä½†æ˜¯ç†è®ºä¸Šè¿™æ ·è®­ç»ƒå‡ºæ¥çš„ç½‘ç»œä¼šéå¸¸å¥½ã€‚å¯èƒ½æ˜¯è¿™æ ·ï¼Ÿï¼‰</p><p>ä¸ºäº†å¼¥è¡¥ç®—åŠ›çš„ä¸è¶³ï¼Œéœ€è¦å¯»æ‰¾æ–°çš„æ–¹å¼ï¼Ÿåˆ†æå›¾åƒè¯†åˆ«ä¸­ç›®æ ‡æˆ‘ä»¬ä¼šçœ‹å‡ºå…·æœ‰ä¸¤ä¸ªåŸºæœ¬ç‰¹æ€§ï¼š</p><ol><li>å¹³ç§»ä¸å˜æ€§translating- invarianceï¼Œä¸ç®¡æ£€æµ‹å¯¹è±¡å‡ºç°åœ¨å›¾åƒçš„å“ªä¸ªä½ç½®ï¼Œç¥ç»ç½‘ç»œçš„å‰é¢å‡ å±‚åº”è¯¥å¯¹ç›¸åŒçš„å›¾åƒåŒºåŸŸå…·æœ‰ç›¸ä¼¼çš„ååº”</li><li>å±€éƒ¨æ€§localityï¼Œç¥ç»ç½‘ç»œå‰å‡ å±‚åº”è¯¥åªæ¢ç´¢è¾“å…¥å›¾åƒä¸­çš„å±€éƒ¨åŒºåŸŸï¼Œè€Œä¸æ˜¯è¿‡åº¦åœ¨æ„æ•´ä¸ªå›¾åƒå…¶ä»–åŒºåŸŸçš„å…³ç³»</li></ol><p>åŒæ—¶åœ¨ä¿¡å·å¤„ç†ä¸­æˆ‘ä»¬ä¹Ÿæœ‰ä¼šæ»¤æ³¢å™¨çš„æ¦‚å¿µï¼Œå…¶åŸºæœ¬æ€æƒ³æ˜¯åˆ©ç”¨åƒç´ ä¹‹é—´å˜åŒ–çš„è¶‹åŠ¿æ¥è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ä¸­å€¼æ»¤æ³¢å¯ä»¥é™å™ªã€åˆ©ç”¨å·®åˆ†å¯ä»¥è¯†åˆ«å›¾åƒè½®å»“</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h68s07nrauj20vv0u0jwe.jpg" alt="image-20220916214004258" /></p><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå·ç§¯çš„æ“ä½œæ˜¯æœ‰æ•ˆçš„ï¼ŒåŒæ—¶ä½¿ç”¨ï¼ˆ3ï¼Œ3ï¼‰çš„filteræ¥å¯¹ï¼ˆ28ï¼Œ28ï¼‰çš„å›¾åƒå¤„ç†æœ€ç»ˆå¾—åˆ°ï¼ˆ26ï¼Œ26ï¼‰çš„å›¾åƒï¼Œæ‰§è¡Œçš„æ“ä½œæ¬¡æ•°ä»…ä¸º26*26.ä¼šè®©å‚æ•°æ•°é‡ä¸‹é™</p><h3 id="12-å·ç§¯çš„å®ç°äº’ç›¸å…³è¿ç®—-å¡«å……padding-æ­¥é•¿stride-å¤šé€šé“"><a class="markdownIt-Anchor" href="#12-å·ç§¯çš„å®ç°äº’ç›¸å…³è¿ç®—-å¡«å……padding-æ­¥é•¿stride-å¤šé€šé“"></a> 1.2 å·ç§¯çš„å®ç°ï¼ˆäº’ç›¸å…³è¿ç®—ã€å¡«å……paddingã€æ­¥é•¿strideã€å¤šé€šé“ï¼‰</h3><p>å…·ä½“å…¬å¼å°±ä¸å†è¿™é‡Œå±•å¼€ï¼Œddddã€‚</p><p>ç»è¿‡ä¸‹åˆ—çš„äºŒç»´å·ç§¯æ“ä½œä¼šå°†ï¼ˆnï¼Œmï¼‰ç»è¿‡ï¼ˆkï¼Œkï¼‰è½¬æ¢ä¸ºå¤§å°ï¼ˆn+1-kï¼Œm+1-kï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Conv2D</span>(nn.module):<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,kernel_size</span>):<br>    <span class="hljs-built_in">super</span>().__init__()<br>    self.weight=nn.Parameter(torch.rand(kernel_size))<br>    self.bias=nn.Parameter(torch.zeros(<span class="hljs-number">1</span>))<br>  <br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self,x</span>):<br>    <span class="hljs-keyword">return</span> corr2d(x,self.weight)+self.bias<br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">corr2d</span>(<span class="hljs-params">X,k</span>):<br>    â€˜â€™â€˜è®¡ç®—äºŒç»´äº’ç›¸å…³è¿ç®—```<br>    h,w=k.shape<br>    Y=torch.zeros((X.shape[<span class="hljs-number">0</span>]-h+<span class="hljs-number">1</span>,X.shape[<span class="hljs-number">1</span>]-w+<span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Y.shape[<span class="hljs-number">0</span>]):<br>      <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Y.shape[<span class="hljs-number">1</span>]):<br>        Y[i,j]=(X[i:i+h,j:j+w]*K).<span class="hljs-built_in">sum</span>()<br>    <span class="hljs-keyword">return</span> Y<br></code></pre></td></tr></table></figure><p>ç›´æ¥è¿›è¡Œå·ç§¯æ“ä½œå¯ä»¥çœ‹å‡ºå‘é‡æ˜¯ä¼šå˜åŒ–çš„ï¼Œæˆ‘ä»¬è¿˜ä¼šæœ‰ä¸¤ç§æ“ä½œï¼šå¡«å……paddingå’Œæ­¥é•¿strideã€‚</p><p>é’ˆå¯¹äºŒç»´çš„å›¾åƒè¾¹ç¼˜ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è®¾ç½®å¡«å……paddingæ¥ä¿ç•™å‘¨è¾¹ä¿¡æ¯ï¼Œé€šå¸¸æ˜¯å¡«å……0</p><p>ï¼ˆn,m)ç»è¿‡ï¼ˆkï¼Œkï¼‰åï¼Œå¡«å……pï¼Œå¾—åˆ°çš„ç»“æœä¸ºï¼ˆn+p+1-kï¼Œm+p+1-kï¼‰</p><p>é’ˆå¯¹æ¸…æ™°åº¦ä¸å¤Ÿçš„ç…§ç‰‡ï¼Œæˆ‘ä»¬å¯èƒ½è®¤ä¸ºå…¶ä¸­éƒ¨åˆ†åƒç´ å†—ä½™ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨æ­¥å¹…strideæ¥é™ä½é‡‡æ ·</p><p>ï¼ˆnï¼Œmï¼‰ç»è¿‡ï¼ˆkï¼Œkï¼‰åŠ ä¸Špä¹‹åsçš„è¾“å‡ºæ˜¯ï¼ˆï¼ˆn+p-k+sï¼‰//sï¼Œï¼ˆm+p-k+sï¼‰//s ï¼‰ï¼ˆå‘ä¸‹å–æ•´ï¼‰</p><ul><li><p>åœ¨äºŒç»´åŸºç¡€ä¸Šï¼Œç†è§£å¤šé€šé“å·ç§¯ï¼Œé¦–å…ˆæ˜¯å¤šé€šé“è¾“å‡ºä¸€ä¸ªçš„æƒ…å†µï¼Œå°±æ˜¯è®¾è®¡ä¸‰ä¸ªå·ç§¯æ ¸ç„¶åç›¸åŠ </p></li><li><p>ç„¶åå¤šé€šé“è¾“å…¥å¯¹åº”å¤šé€šé“è¾“å‡ºï¼Œå°±æ˜¯è®¾è®¡output*inputä¸ªå·ç§¯æ ¸ï¼Œç„¶åoutputçš„å·ç§¯æ ¸ç›¸åŠ å³å¯</p></li></ul><h3 id="13-cnnä¸æ·±åº¦ä¹‹é—´çš„å…³ç³»æ„Ÿå—é‡-receptive-field-æ±‡èšå±‚pooling"><a class="markdownIt-Anchor" href="#13-cnnä¸æ·±åº¦ä¹‹é—´çš„å…³ç³»æ„Ÿå—é‡-receptive-field-æ±‡èšå±‚pooling"></a> 1.3 CNNä¸æ·±åº¦ä¹‹é—´çš„å…³ç³»ï¼ˆæ„Ÿå—é‡ receptive- fieldã€æ±‡èšå±‚poolingï¼‰</h3><p>CNNä¸­æ„Ÿå—é‡çš„é—®é¢˜ï¼Œå¯¹äºä¸€ä¸ªï¼ˆ3ï¼Œ3ï¼‰æ‰€æ„Ÿå—çš„æ˜¯ä¸€ä¸ªï¼ˆ3ï¼Œ3ï¼‰çš„åŒºåŸŸï¼Œä½†æ˜¯å¦‚æœå†æœ‰ä¸€ä¸ªï¼ˆ3ï¼Œ3ï¼‰ä»–æ‰€æ„Ÿå—çš„å°±æ˜¯ï¼ˆ5ï¼Œ5ï¼‰çš„åŒºåŸŸã€‚å› æ­¤éšç€å·ç§¯å±‚æ•°çš„å¢åŠ ï¼Œå·ç§¯ç¥ç»è€ƒè™‘åˆ°çš„å€¼æ˜¯è¶Šæ¥è¶Šå¤§çš„ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h68shdk7wxj212i0nwwh2.jpg" alt="image-20220916215637261" /></p><p>è¿™é‡Œä¹Ÿä¼šå­˜åœ¨ä¸€ä¸ªtrade-offï¼Œæˆ‘ä»¬å¸Œæœ›å·ç§¯çš„ç»“æœæ„Ÿå—é‡ä¸ä¼šå¤ªå°ï¼Œè¿™æ ·æˆ‘å¯ä»¥å¾—åˆ°ä¸€äº›çº¹ç†ä¿¡æ¯ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›æ„Ÿå—é‡å¤ªå¤§ï¼Œä¸ç„¶æ‰€è®­ç»ƒå‡ºæ¥çš„CNNä¼šå¯¹è¾“å…¥æ•æ„Ÿï¼Œå› æ­¤åœ¨å¸¸è§çš„æ“ä½œä¸­æˆ‘ä»¬ä¼šä½¿ç”¨æ±‡èšå±‚æ¥å¯¹å·ç§¯ç»“æœè¿›è¡Œå¹³æ»‘æˆ–è€…é‡æ–°é‡‡æ ·ã€‚</p><h2 id="0x02-program-structure-analysis-with-pytorch-api"><a class="markdownIt-Anchor" href="#0x02-program-structure-analysis-with-pytorch-api"></a> 0x02 Program structure analysis with PyTorch API</h2><h3 id="21-ä»£ç æ•´ä½“æ¡†æ¶åˆ†æå°½å¯èƒ½è§£è€¦"><a class="markdownIt-Anchor" href="#21-ä»£ç æ•´ä½“æ¡†æ¶åˆ†æå°½å¯èƒ½è§£è€¦"></a> 2.1 ä»£ç æ•´ä½“æ¡†æ¶åˆ†æï¼ˆå°½å¯èƒ½è§£è€¦ï¼‰</h3><p>é¦–å…ˆç¥ç»ç½‘ç»œçš„è®­ç»ƒå¿…ç„¶æ˜¯éœ€è¦å¤šä¸ªepochçš„ï¼ŒåŒæ—¶åœ¨æ¯è½®epochä¸­ç”±äºç‰©ç†ç©ºé—´çš„é™åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®batchsizeæ¥åˆ†æ‰¹çš„å°†æ•°æ®é€å…¥ç½‘ç»œï¼Œå½“æ‰€æœ‰çš„batchèµ°å®Œè¯´æ˜æˆ‘ä»¬å®Œæˆä¸€ä¸ªepochï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦è®°å½•è®­ç»ƒæŸå¤±ï¼ˆtrain-lossï¼‰ï¼Œè®­ç»ƒç²¾åº¦ï¼ˆtrain-accï¼‰å’ŒéªŒè¯ç²¾åº¦ï¼ˆvalid- accï¼‰ã€‚æ‰€ä»¥æ­¥éª¤åˆ†ä¸ºï¼š</p><ul><li>ç¬¬ä¸€éƒ¨åˆ†<br />è¾“å…¥ï¼šåŸå§‹æ•°æ®é›†ï¼Œbatchsize<br />è¾“å‡ºï¼šè®­ç»ƒæ•°æ®é›†ï¼ˆå¯è¿­ä»£å½¢å¼ï¼‰ã€éªŒè¯æ•°æ®é›†ï¼ˆå¯è¿­ä»£å½¢å¼ï¼‰</li><li>ç¬¬äºŒéƒ¨åˆ†<br />è¾“å…¥ï¼šç½‘ç»œç»“æ„ã€å­¦ä¹ ç‡lr<br />è¾“å‡ºï¼šç½‘ç»œç»“æ„netã€æŸå¤±å‡½æ•°lossã€ä¼˜åŒ–ç®—æ³•trainer</li><li>ç¬¬ä¸‰éƒ¨åˆ†<br />è¾“å…¥ï¼šepochæ•°é‡num- epochesï¼Œè®­ç»ƒæ•°æ®é›†ã€éªŒè¯æ•°æ®é›†ã€netã€lossã€trainerç­‰<br />è¾“å‡ºï¼šè®­ç»ƒå¥½çš„ç½‘ç»œï¼Œè¯„ä¼°æŒ‡æ ‡</li></ul><h3 id="22-pytorché«˜æ•ˆapi"><a class="markdownIt-Anchor" href="#22-pytorché«˜æ•ˆapi"></a> 2.2 PyTorché«˜æ•ˆAPI</h3><p>è¿™ä¸ªçœ‹å®˜ç½‘ï¼Œæˆ–è€…çœ‹åˆ«äººçš„ä»£ç å¤šæ‚Ÿå°±è¡Œ</p><ul><li><p><a href="https://pytorch.org/tutorials/beginner/basics/data_tutorial.html#">åŠ è½½æ•°æ®é›†</a><br />dataset<br />dataloader</p></li><li><p><a href="https://pytorch.org/tutorials/beginner/basics/buildmodel_tutorial.html">å®šä¹‰ç½‘ç»œ</a><br />torch.nn.module<br />Torch.nn.sequential</p></li><li><p><a href="https://pytorch.org/tutorials/recipes/recipes/what_is_state_dict.html">è®¿é—®ä¸åˆå§‹åŒ–å‚æ•°</a><br />net.apply()</p><p>def <em>init_weigths</em>(self)</p></li></ul><h2 id="0x03-code-of-lenet"><a class="markdownIt-Anchor" href="#0x03-code-of-lenet"></a> 0x03 Code of LeNet</h2><h3 id="30-lenetç®€ä»‹"><a class="markdownIt-Anchor" href="#30-lenetç®€ä»‹"></a> 3.0 <a href="http://vision.stanford.edu/cs598_spring07/papers/Lecun98.pdf">LeNetç®€ä»‹</a></h3><p>LeNetæ˜¯æœ€æ—©å‘å¸ƒçš„å·ç§¯ç¥ç»ç½‘ç»œï¼Œèµ·æºäº89å¹´ï¼Œåœ¨å½“æ—¶è¿˜æ²¡æœ‰å¼ºç®—åŠ›çš„æ—¶ä»£ï¼Œè¢«å¹¿æ³›åº”ç”¨äºATMæœºå™¨ä¸­ï¼Œå¸®åŠ©å¤„ç†æ”¯ç¥¨ä¸­çš„æ•°å­—</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h68t728nuaj211w0ciq4r.jpg" alt="image-20220916222118334" /></p><p>è¿™é‡Œå› ä¸ºFashion-MNISTæ˜¯ï¼ˆ28ï¼Œ28ï¼‰çš„æ•°æ®é›†ï¼Œå› æ­¤åœ¨è¿™ä¸ªåŸºç¡€ä¸Šç¨å¾®æ›´æ”¹ä¸€ä¸‹</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h68t9c7iw3j214k0i4gng.jpg" alt="image-20220916222329819" /></p><p>å„å±‚å‚æ•°è®¾ç½®ï¼š</p><p>è¾“å…¥ï¼šï¼ˆ28ï¼Œ28ï¼‰<br />ç¬¬ä¸€å±‚ï¼šï¼ˆ5ï¼Œ5ï¼‰å·ç§¯ï¼Œè¾“å‡º6é€šé“ï¼Œå¡«å……=2 -&gt;è¾“å‡ºï¼ˆ6ï¼Œ28ï¼Œ28ï¼‰<br />ç¬¬äºŒå±‚ï¼šï¼ˆ2ï¼Œ2ï¼‰æ± åŒ–ï¼Œæ­¥é•¿=2 -&gt; è¾“å‡ºï¼ˆ6ï¼Œ14ï¼Œ14ï¼‰<br />ç¬¬ä¸‰å±‚ï¼šï¼ˆ5ï¼Œ5ï¼‰å·ç§¯ï¼Œè¾“å‡º16é€šé“ï¼Œ-&gt;è¾“å‡ºï¼ˆ16ï¼Œ10ï¼Œ10ï¼‰<br />ç¬¬å››å±‚ï¼šï¼ˆ2ï¼Œ2ï¼‰æ± åŒ–ï¼Œæ­¥é•¿=2 -&gt;è¾“å‡ºï¼ˆ16ï¼Œ5ï¼Œ5ï¼‰<br />ä¹‹åå±•å¹³</p><h3 id="31-æ•°æ®é›†è·å–"><a class="markdownIt-Anchor" href="#31-æ•°æ®é›†è·å–"></a> 3.1 æ•°æ®é›†è·å–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è¯»å–fashionæ•°æ®é›†</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_fashion_mnist</span>(<span class="hljs-params">batchsize</span>):<br>    <span class="hljs-keyword">import</span> torch<br>    <span class="hljs-keyword">from</span> torch.utils <span class="hljs-keyword">import</span> data<br>    <span class="hljs-keyword">import</span> torchvision<br>    <span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> transforms<br><br>    trans=transforms.ToTensor()<br>    train_mnist=torchvision.datasets.FashionMNIST(root=<span class="hljs-string">&#x27;../data/FashionMNIST&#x27;</span>,train=<span class="hljs-literal">True</span>,transform=trans,download=<span class="hljs-literal">True</span>)<br>    test_mnist=torchvision.datasets.FashionMNIST(root=<span class="hljs-string">&#x27;../data/FashionMNIST&#x27;</span>,train=<span class="hljs-literal">False</span>,transform=trans,download=<span class="hljs-literal">True</span>)<br>    train_iter=data.DataLoader(train_mnist,batch_size=batchsize,shuffle=<span class="hljs-literal">True</span>,num_workers=<span class="hljs-number">4</span>)<br>    test_iter=data.DataLoader(test_mnist,batch_size=batchsize,shuffle=<span class="hljs-literal">True</span>,num_workers=<span class="hljs-number">4</span>)<br>    <span class="hljs-keyword">return</span> train_iter,test_iter<br>    <br>batchsize=<span class="hljs-number">256</span><br>train_iter,test_iter=load_fashion_mnist(batchsize)<br></code></pre></td></tr></table></figure><h3 id="32-æ¨¡å‹å®šä¹‰"><a class="markdownIt-Anchor" href="#32-æ¨¡å‹å®šä¹‰"></a> 3.2 æ¨¡å‹å®šä¹‰</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch <br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br>net=nn.Sequential(<br>    nn.Conv2d(<span class="hljs-number">1</span>,<span class="hljs-number">6</span>,kernel_size=<span class="hljs-number">5</span>,padding=<span class="hljs-number">2</span>),nn.Sigmoid(),<br>    nn.AvgPool2d(kernel_size=<span class="hljs-number">2</span>,stride=<span class="hljs-number">2</span>),<br>    nn.Conv2d(<span class="hljs-number">6</span>,<span class="hljs-number">16</span>,kernel_size=<span class="hljs-number">5</span>),nn.Sigmoid(),<br>    nn.AvgPool2d(kernel_size=<span class="hljs-number">2</span>,stride=<span class="hljs-number">2</span>),<br>    nn.Flatten(),<br>    nn.Linear(<span class="hljs-number">16</span>*<span class="hljs-number">5</span>*<span class="hljs-number">5</span>,<span class="hljs-number">120</span>),nn.ReLU(),<br>    nn.Linear(<span class="hljs-number">120</span>,<span class="hljs-number">84</span>),nn.ReLU(),<br>    nn.Linear(<span class="hljs-number">84</span>,<span class="hljs-number">10</span>)<br>)<br></code></pre></td></tr></table></figure><h3 id="33-è®­ç»ƒè¿‡ç¨‹"><a class="markdownIt-Anchor" href="#33-è®­ç»ƒè¿‡ç¨‹"></a> 3.3 è®­ç»ƒè¿‡ç¨‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">accuracy</span>(<span class="hljs-params">y_hat,y</span>):<br>    <span class="hljs-comment"># æ•°æ­£ç¡®çš„æ•°é‡</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(y_hat.shape)&gt;<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y_hat.shape[<span class="hljs-number">1</span>]&gt;<span class="hljs-number">1</span>:<br>        y_hat=y_hat.argmax(axis=<span class="hljs-number">1</span>)<br>    cmp=y_hat.<span class="hljs-built_in">type</span>(y.dtype)==y<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">float</span>(cmp.<span class="hljs-built_in">type</span>(y.dtype).<span class="hljs-built_in">sum</span>())<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">gpu_acc</span>(<span class="hljs-params">model,data_iter,device=<span class="hljs-literal">None</span></span>):<br>    acc=<span class="hljs-number">0</span><br>    num=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(net,nn.Module):<br>        net.<span class="hljs-built_in">eval</span>()<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> device:<br>            device=<span class="hljs-built_in">next</span>(<span class="hljs-built_in">iter</span>(net.parameters())).device<br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> X,y <span class="hljs-keyword">in</span> data_iter:<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(X,<span class="hljs-built_in">list</span>):<br>                <span class="hljs-comment"># è¿™é‡Œçš„ifä»…ä»…æ˜¯ä¸ºä¹‹åbertå¾®è°ƒæ‰€éœ€çš„</span><br>                X=[x.to(device) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> X]<br>            <span class="hljs-keyword">else</span>:<br>                X=X.to(device)<br>            y=y.to(device)<br>            acc+=accuracy(net(X),y)<br>            num+=y.numel()<br>    <span class="hljs-keyword">return</span> acc/num<br><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">trainer</span>(<span class="hljs-params">net,train_iter,test_iter,num_epoches,lr,device</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;ç”¨GPUè®­ç»ƒæ¨¡å‹&#x27;&#x27;&#x27;</span><br>    <span class="hljs-comment">#åˆå§‹åŒ–å‚æ•°</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">init_weights</span>(<span class="hljs-params">m</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(m)==nn.Linear <span class="hljs-keyword">or</span> <span class="hljs-built_in">type</span>(m)==nn.Conv2d:<br>            nn.init.xavier_uniform_(m.weight)<br>            <span class="hljs-comment">#nn.init.normal_(m.weight,std=0.01)</span><br>    net.apply(init_weights)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;training on&#x27;</span>,device)<br>    <span class="hljs-built_in">print</span>(torch.cuda.get_device_name(<span class="hljs-number">0</span>))<br>    net.to(device)<br>    optimizer=torch.optim.SGD(net.parameters(),lr=lr)<br>    loss=nn.CrossEntropyLoss()<br><br>    train_acc=[]<br>    test_acc=[]<br>    loss_epoches=[]<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epoches):<br>        temp_train_acc=<span class="hljs-number">0</span><br>        loss_epoch=<span class="hljs-number">0</span><br>        num=<span class="hljs-number">0</span><br>        net.train()<br>        <span class="hljs-keyword">for</span> i,(X,y) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_iter):<br>            optimizer.zero_grad()<br>            X,y=X.to(device),y.to(device)<br>            <span class="hljs-keyword">with</span> torch.no_grad():<br>                temp_train_acc+=accuracy(net(X),y)<br>            y_hat=net(X)<br>            l=loss(y_hat,y)<br>            l.backward()<br>            optimizer.step()<br>            loss_epoch+=l*X.shape[<span class="hljs-number">0</span>]<br>            num+=y.numel()<br>        train_acc.append(<span class="hljs-built_in">float</span>(temp_train_acc/num))<br>        test_acc.append(gpu_acc(net,test_iter))<br>        loss_epoches.append(<span class="hljs-built_in">float</span>(loss_epoch)/num)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;æœ¬è½®&#123;&#125;è®­ç»ƒçš„ç»“æœï¼Œtestâ€”acc:&#123;&#125;,train-acc:&#123;&#125;,train-loss:&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">str</span>(epoch+<span class="hljs-number">1</span>),<span class="hljs-built_in">str</span>(test_acc[-<span class="hljs-number">1</span>]),<span class="hljs-built_in">str</span>(train_acc[-<span class="hljs-number">1</span>]),<span class="hljs-built_in">str</span>(loss_epoches[-<span class="hljs-number">1</span>])))<br>    <span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br>    plt.plot(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+num_epoches)),test_acc,label=<span class="hljs-string">&#x27;test_acc&#x27;</span>)<br>    plt.plot(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+num_epoches)),train_acc,label=<span class="hljs-string">&#x27;train_acc&#x27;</span>)<br>    plt.plot(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>+num_epoches)),loss_epoches,label=<span class="hljs-string">&#x27;loss&#x27;</span>)<br>    plt.legend()<br>    plt.show()<br>    <br>        <br>lr,num_epoches=<span class="hljs-number">0.2</span>,<span class="hljs-number">20</span><br><br><br>device = torch.device(<span class="hljs-string">&quot;cuda:0&quot;</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;cpu&quot;</span>)<br>trainer(net,train_iter,test_iter,num_epoches,lr,device)<br></code></pre></td></tr></table></figure><h3 id="34-è®­ç»ƒç»“æœ"><a class="markdownIt-Anchor" href="#34-è®­ç»ƒç»“æœ"></a> 3.4 è®­ç»ƒç»“æœ</h3><p>ï¼ˆç§€ä¸€ä¸‹3090ï½ï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h68tekxc64j21540rigut.jpg" alt="image-20220916222831979" /></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h68teqwf2cj20vo0nuaba.jpg" alt="image-20220916222841744" /></p><p>CS229ä¸­å…³äºæ¨¡å‹é€‰æ‹©ä¸­çš„bias- variance trade offåœ¨è¿™é‡Œä¾æ—§é€‚ç”¨</p><h2 id="0x04-discussion-and-conclusion"><a class="markdownIt-Anchor" href="#0x04-discussion-and-conclusion"></a> 0x04 Discussion and conclusion</h2><h3 id="41-moduleå’Œsequentialä¹‹é—´çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#41-moduleå’Œsequentialä¹‹é—´çš„åŒºåˆ«"></a> 4.1 moduleå’Œsequentialä¹‹é—´çš„åŒºåˆ«ï¼Ÿ</h3><p><a href="https://stackoverflow.com/questions/68606661/what-is-difference-between-nn-module-and-nn-sequential">What is difference between nn.Module and nn.Sequential</a></p><p>ä½¿ç”¨moduleå®šä¹‰æ¨¡å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–def forwardï¼Œå¯¹äºå·ç§¯ç¥ç»ç½‘ç»œè¿™ç§æŒ‰ç…§é¡ºåºçš„ç»“æ„å¹¶ä¸éœ€è¦å…³å¿ƒï¼Œæ‰€ä»¥å‰å‘ä¼ æ’­æ˜¯æŒ‰ç…§sequentialè¿›è¡Œçš„ï¼Œä½†æ˜¯åœ¨åé¢çš„å­¦ä¹ ä¸­æ›´ç°ä»£åŒ–çš„CNNæˆ–è€…RNNç­‰ä¼šè¿›è¡Œè¾“å‡ºçš„è¿ç§»ï¼Œè¿™ä¸ªæ—¶å€™ä½¿ç”¨moduleä¼šæ›´å¥½</p><h3 id="42-å½’ä¸€åŒ–-normalizationå’Œæ ‡å‡†åŒ–standardizationä¹‹é—´çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#42-å½’ä¸€åŒ–-normalizationå’Œæ ‡å‡†åŒ–standardizationä¹‹é—´çš„åŒºåˆ«"></a> 4.2 å½’ä¸€åŒ– normalizationå’Œæ ‡å‡†åŒ–standardizationä¹‹é—´çš„åŒºåˆ«ï¼Ÿ</h3><p>ä¸å¤ªæ‡‚ï¼Œå…ˆç•™ç€</p><p><a href="https://blog.csdn.net/qq_35290785/article/details/89322289">å¯ä»¥å‚è€ƒè¿™ä¸ª</a></p><p>è¿˜æœ‰<a href="https://www.analyticsvidhya.com/blog/2020/04/feature-scaling-machine-learning-normalization-standardization/">è¿™ä¸ª</a></p><h3 id="43-å¦‚ä½•å†™å‡ºè§„èŒƒçš„ä»£ç "><a class="markdownIt-Anchor" href="#43-å¦‚ä½•å†™å‡ºè§„èŒƒçš„ä»£ç "></a> 4.3 å¦‚ä½•å†™å‡ºè§„èŒƒçš„ä»£ç ï¼Ÿ</h3><p>å¤šçœ‹åˆ«äººçš„ä»£ç </p><p>çœ‹å®Œè‡ªå·±æ•²å‡ºæ¥</p><h3 id="44-ä¸ºä»€ä¹ˆlossä¼šå¤§äº1"><a class="markdownIt-Anchor" href="#44-ä¸ºä»€ä¹ˆlossä¼šå¤§äº1"></a> 4.4 ä¸ºä»€ä¹ˆlossä¼šå¤§äº1</h3><p>è™½ç„¶è¯´çœ‹lossåªéœ€è¦ä¸‹é™å°±å¥½äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å¤ªæ˜ç™½ä¸ºä»€ä¹ˆåœ¨meanä¹‹åè¿˜æ˜¯å¤§äº1</p><p>åœ¨æ‰‹æ•²å‡ºæ¥ä¸Šé¢çš„ä»£ç èƒ½å¤Ÿæ¸…æ™°çš„æ„Ÿå—åˆ°ï¼Œå·¥ç¨‹å¯¹äºè½¯ä»¶æ„å»ºçš„é‡è¦æ€§ï¼Œå¯èƒ½éœ€è¦å…ˆåšè§„åˆ’ï¼Ÿäº†è§£å¥½APIæ‰èƒ½ç”¨åˆ«äººçš„æŠ½è±¡å¥½çš„å·¥å…·å®ç°æ›´å¤šçš„åŠŸèƒ½ã€‚è™½ç„¶è¿™æ˜¯ä¸€ä¸ªç®€å•çš„wheelï¼Œä½†æ˜¯åœ¨åˆå§‹è§£çš„åŸºç¡€ä¸Šå¯ä»¥å†æ¬¡ä¼˜åŒ–</p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>D2L</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 01_çº¿æ€§å›å½’å®ç°</title>
    <link href="/posts/35609ff6.html"/>
    <url>/posts/35609ff6.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨CS229ä¸­ä¸»è¦å…³æ³¨çš„æ˜¯ä¸€äº›ä¼ ç»Ÿæœºå™¨å­¦ä¹ çš„æ¨¡å‹ï¼ŒåŒ…æ‹¬å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGLMï¼‰åŒ…å«çš„Logistic Regressionã€Softmax Regressionï¼Œç”Ÿæˆæ¨¡å‹çš„é«˜æ–¯åˆ¤åˆ«å¼ã€Decision Treeã€Support Vector Machineã€æµ…å±‚ç¥ç»ç½‘ç»œï¼›ä¾§é‡äºå¯¹äºç†è®ºçš„ä»‹ç»ã€‚ææ²è¯¾ç¨‹ä¸­å¯¹äºå®é™…æ“ä½œçš„ä»£ç å®ç°è¿‡ç¨‹ç»™å‡ºäº†è¯¦ç»†çš„ä»‹ç»ï¼Œæ˜¯éå¸¸æœ‰æ„æ€çš„ã€‚å…¶å®æ•´ä¸ªå­¦ä¹ è¿‡ç¨‹çš„æ¡†æ¶æ— è®ºæ˜¯ç®€å•çš„é€»è¾‘å›å½’è¿˜æ˜¯å¤æ‚çš„YOLOä¹‹ç±»çš„ä»£ç æ¡†æ¶å…¶å®éƒ½å·²ç»ç»™å¥½äº†ï¼Œå¦‚ä½•é«˜æ•ˆçš„åˆ©ç”¨æ¡†æ¶æ‰€æä¾›çš„æŠ½è±¡å¥½çš„APIæ¥å®ç°å¤æ‚çš„åŠŸèƒ½æ˜¯å€¼å¾—æ€è€ƒçš„ã€‚</p><span id="more"></span><h2 id="0x00-environment-buildwith-conda"><a class="markdownIt-Anchor" href="#0x00-environment-buildwith-conda"></a> 0x00 Environment buildï¼ˆwith condaï¼‰</h2><p><a href="https://www.bilibili.com/video/BV1LT411F77M?spm_id_from=333.337.search-card.all.click&amp;vd_source=a43f0eddfeb89c08a00be8485e811ab0">ç¯å¢ƒå®‰è£…ï¼Œæ€§èƒ½æµ‹è¯•ä¸æ¨ªå‘å¯¹æ¯”</a>ä¸­ç»™å‡ºPytorchå®‰è£…çš„ä¸‰ç§æ–¹å¼ï¼š1. ç›´æ¥å®‰è£…ã€2. condaç¯å¢ƒã€3. Dockerå®‰è£…ã€‚åé¢æœ‰æ—¶é—´å¯ä»¥å€Ÿé‰´ä¸€ä¸‹æ€è·¯æ¥ä½¿ç”¨Dockerç®¡ç†ç¯å¢ƒè€Œä¸æ˜¯Condaã€‚æœ¬æ¬¡è¿˜æ˜¯åˆ©ç”¨condaæ¥ç®¡ç†ç¯å¢ƒ</p><blockquote><p>psï¼šå…³äºcondaä¸dockerç®¡ç†ç¯å¢ƒä¹‹é—´çš„å·®å¼‚ â€“ ä¸ªäººçœ‹æ³•<br />å¦‚æœæœ‰æ›´å¥½çš„å›ç­”å¸Œæœ›å¯ä»¥å‘é€åˆ° <a href="mailto:chenxia31@outlook.com">chenxia31@outlook.com</a> äº¤æµï¼</p><p>ä½œä¸ºä¸€ä¸ªè®¡ç®—æœºå°ç™½ï¼Œåœ¨æœ€åˆæ¥è§¦Pythonçš„æ—¶å€™çŸ¥é“ä¸€ä¸ªç”µè„‘ä¸­ä¼šå­˜åœ¨ä¸åŒç‰ˆæœ¬çš„pythonï¼Œè¿™ä¸ªéœ€è¦æˆ‘ä»¬æ¥è¿›è¡Œä¸åŒç¯å¢ƒçš„éš”ç¦»ï¼Œå¸¸è§çš„æœ‰pythonçš„envsã€æˆ–è€…condaç®¡ç†å·¥å…·ã€‚è¿™æ ·ä¸åŒçš„pythonç¯å¢ƒå¯ä»¥ä½¿ç”¨ä¸åŒçš„packageã€‚</p><p>ä½†æ˜¯dockerå¯ä»¥è¯´æ˜¯ä¸€ä¸ªæ›´é«˜levelçš„å·¥å…·ï¼Œå®é™…ä¸Šä»–æ˜¯ä¸€ä¸ªå¼±åŒ–çš„è™šæ‹Ÿæœºï¼Œå¹¶ä¸æ˜¯ä»ç¡¬ä»¶å±‚é¢æ¥è™šæ‹Ÿä¸€æ•´å¥—å†¯è¯ºä¾æ›¼ä½“ç³»ï¼Œè€Œæ˜¯åˆ©ç”¨éƒ¨åˆ†ç¡¬ä»¶å’Œè½¯ä»¶è°ƒåº¦çš„æ–¹å¼æ¥é™ä½è™šæ‹Ÿæœºæ‰€éœ€è¦çš„ç¡¬ä»¶èµ„æºè€Œå®ç°è™šæ‹Ÿæœºçš„æ“ä½œç³»ç»Ÿå’Œä¸»æœºæ“ä½œç³»ç»Ÿä¹‹é—´éš”ç¦»çš„ç›®çš„ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¯ä»¥å®ç°æŸç§æ„ä¹‰ä¸Šçš„ç¡¬ä»¶æ–¹å¼çš„ç¯å¢ƒéš”ç¦»ã€‚</p><p>ä¸¤è€…å¯ä»¥è¯´æ˜¯é£é©¬ç‰›ï¼Œä½†æ˜¯åœ¨ç®¡ç†pythonç¯å¢ƒä¸­å´åˆæœ‰ç€å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œéƒ½èƒ½èµ·åˆ°ç¯å¢ƒéš”ç¦»çš„ä½œç”¨ï¼Œä½†æ˜¯å®ç°çš„è¿‡ç¨‹æ˜¯ä¸ä¸€æ ·çš„ï¼š</p><ol><li>condaæ˜¯pythonçš„packageçš„ç®¡ç†è€…ï¼Œå®ƒä¸ºä¸åŒçš„pythonæä¾›ä¸åŒçš„packageçš„è·¯å¾„ã€‚è¿™ä¹Ÿå°±æ˜¯conda installçš„packageå€¼éœ€è¦è£…ä¸€ä»½å°±å¯ä»¥ä¸ºæ‰€æœ‰ç¯å¢ƒä½¿ç”¨ï¼ˆå¦‚æœç‰ˆæœ¬ä¸€è‡´çš„è¯ï¼‰</li><li>dockeræ˜¯æ“ä½œç³»ç»Ÿå±‚é¢çš„ç¡¬ä»¶ç®¡ç†è€…ï¼Œå®ƒä¸ºä¸åŒçš„è™šæ‹Ÿæœºæä¾›ç¡¬ä»¶å’Œè½¯ä»¶èµ„æº</li></ol></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ–°å»ºcondaç¯å¢ƒ</span><br>conda create -n <span class="hljs-string">&#x27;datastudy&#x27;</span> python=<span class="hljs-number">3.9</span><br><br><span class="hljs-comment"># è®¾ç½®ä¸€ä¸‹pipé•œåƒ</span><br><span class="hljs-comment"># æ¸…åé•œåƒæºhttps://mirrors.tuna.tsinghua.edu.cn/help/pypi/</span><br>python -m pip install --upgrade pip<br>pip config <span class="hljs-built_in">set</span> <span class="hljs-keyword">global</span>.index-url https://pypi.tuna.tsinghua.edu.cn/simple<br><br><span class="hljs-comment"># å®‰è£…pytorchï¼Œhttps://pytorch.org/get-started/locally/</span><br><span class="hljs-comment"># é»˜è®¤é…ç½®å¥½CUDA</span><br><span class="hljs-comment"># psï¼šä¸­æ–‡æ•™ç¨‹å¾ˆå¤šå®‰è£…pytorchå¥½å¤æ‚ï¼Œå…¶å®å¾ˆå¤šä¸œè¥¿å®˜ç½‘éƒ½ç»™å¥½äº†</span><br>conda install pytorch torchvision torchaudio cudatoolkit=<span class="hljs-number">11.6</span> -c pytorch -c conda-forge<br><br><span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æˆåŠŸï¼Œ</span><br><span class="hljs-keyword">import</span> torch<br><span class="hljs-built_in">print</span>(torch.__version__)<br><span class="hljs-built_in">print</span>(torch.cuda.get_device_name(<span class="hljs-number">0</span>))<br><br><span class="hljs-comment"># æ£€æŸ¥ä»£ç æ˜¯å¦èƒ½è·‘ï¼Œå‚è€ƒé“¾æ¥å¦‚ä¸‹</span><br><span class="hljs-comment"># Summary: ä½¿ç”¨PyTorchç©è½¬MNIST </span><br><span class="hljs-comment"># Author:  Amusi</span><br><span class="hljs-comment"># Date:    2018-12-20 </span><br><span class="hljs-comment"># github:  https://github.com/amusi/PyTorch-From-Zero-To-One</span><br><span class="hljs-comment"># Reference: https://blog.csdn.net/victoriaw/article/details/72354307</span><br> <br><span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> print_function<br><span class="hljs-keyword">import</span> argparse<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> torch.nn.functional <span class="hljs-keyword">as</span> F<br><span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim<br><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> datasets, transforms<br><span class="hljs-keyword">from</span> torch.autograd <span class="hljs-keyword">import</span> Variable<br> <br><span class="hljs-comment"># Training settings</span><br>parser = argparse.ArgumentParser(description=<span class="hljs-string">&#x27;PyTorch MNIST Example&#x27;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;--batch-size&#x27;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">int</span>, default=<span class="hljs-number">64</span>, metavar=<span class="hljs-string">&#x27;N&#x27;</span>,<br>                    <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;input batch size for training (default: 64)&#x27;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;--test-batch-size&#x27;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">int</span>, default=<span class="hljs-number">1000</span>, metavar=<span class="hljs-string">&#x27;N&#x27;</span>,<br>                    <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;input batch size for testing (default: 1000)&#x27;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;--epochs&#x27;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">int</span>, default=<span class="hljs-number">10</span>, metavar=<span class="hljs-string">&#x27;N&#x27;</span>,<br>                    <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;number of epochs to train (default: 10)&#x27;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;--lr&#x27;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">float</span>, default=<span class="hljs-number">0.01</span>, metavar=<span class="hljs-string">&#x27;LR&#x27;</span>,<br>                    <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;learning rate (default: 0.01)&#x27;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;--momentum&#x27;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">float</span>, default=<span class="hljs-number">0.5</span>, metavar=<span class="hljs-string">&#x27;M&#x27;</span>,<br>                    <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;SGD momentum (default: 0.5)&#x27;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;--no-cuda&#x27;</span>, action=<span class="hljs-string">&#x27;store_true&#x27;</span>, default=<span class="hljs-literal">False</span>,<br>                    <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;disables CUDA training&#x27;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;--seed&#x27;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">int</span>, default=<span class="hljs-number">1</span>, metavar=<span class="hljs-string">&#x27;S&#x27;</span>,<br>                    <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;random seed (default: 1)&#x27;</span>)<br>parser.add_argument(<span class="hljs-string">&#x27;--log-interval&#x27;</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">int</span>, default=<span class="hljs-number">10</span>, metavar=<span class="hljs-string">&#x27;N&#x27;</span>,<br>                    <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;how many batches to wait before logging training status&#x27;</span>)<br>args = parser.parse_args()<br>args.cuda = <span class="hljs-keyword">not</span> args.no_cuda <span class="hljs-keyword">and</span> torch.cuda.is_available()<br> <br>torch.manual_seed(args.seed) <span class="hljs-comment">#ä¸ºCPUè®¾ç½®ç§å­ç”¨äºç”Ÿæˆéšæœºæ•°ï¼Œä»¥ä½¿å¾—ç»“æœæ˜¯ç¡®å®šçš„</span><br><span class="hljs-keyword">if</span> args.cuda:<br>    torch.cuda.manual_seed(args.seed)<span class="hljs-comment">#ä¸ºå½“å‰GPUè®¾ç½®éšæœºç§å­ï¼›å¦‚æœä½¿ç”¨å¤šä¸ªGPUï¼Œåº”è¯¥ä½¿ç”¨torch.cuda.manual_seed_all()ä¸ºæ‰€æœ‰çš„GPUè®¾ç½®ç§å­ã€‚</span><br> <br> <br>kwargs = &#123;<span class="hljs-string">&#x27;num_workers&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;pin_memory&#x27;</span>: <span class="hljs-literal">True</span>&#125; <span class="hljs-keyword">if</span> args.cuda <span class="hljs-keyword">else</span> &#123;&#125;<br><span class="hljs-string">&quot;&quot;&quot;åŠ è½½æ•°æ®ã€‚ç»„åˆæ•°æ®é›†å’Œé‡‡æ ·å™¨ï¼Œæä¾›æ•°æ®ä¸Šçš„å•æˆ–å¤šè¿›ç¨‹è¿­ä»£å™¨</span><br><span class="hljs-string">å‚æ•°ï¼š</span><br><span class="hljs-string">datasetï¼šDatasetç±»å‹ï¼Œä»å…¶ä¸­åŠ è½½æ•°æ®</span><br><span class="hljs-string">batch_sizeï¼šintï¼Œå¯é€‰ã€‚æ¯ä¸ªbatchåŠ è½½å¤šå°‘æ ·æœ¬</span><br><span class="hljs-string">shuffleï¼šboolï¼Œå¯é€‰ã€‚ä¸ºTrueæ—¶è¡¨ç¤ºæ¯ä¸ªepochéƒ½å¯¹æ•°æ®è¿›è¡Œæ´—ç‰Œ</span><br><span class="hljs-string">samplerï¼šSamplerï¼Œå¯é€‰ã€‚ä»æ•°æ®é›†ä¸­é‡‡æ ·æ ·æœ¬çš„æ–¹æ³•ã€‚</span><br><span class="hljs-string">num_workersï¼šintï¼Œå¯é€‰ã€‚åŠ è½½æ•°æ®æ—¶ä½¿ç”¨å¤šå°‘å­è¿›ç¨‹ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºåœ¨ä¸»è¿›ç¨‹ä¸­åŠ è½½æ•°æ®ã€‚</span><br><span class="hljs-string">collate_fnï¼šcallableï¼Œå¯é€‰ã€‚</span><br><span class="hljs-string">pin_memoryï¼šboolï¼Œå¯é€‰</span><br><span class="hljs-string">drop_lastï¼šboolï¼Œå¯é€‰ã€‚Trueè¡¨ç¤ºå¦‚æœæœ€åå‰©ä¸‹ä¸å®Œå…¨çš„batch,ä¸¢å¼ƒã€‚Falseè¡¨ç¤ºä¸ä¸¢å¼ƒã€‚</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>train_loader = torch.utils.data.DataLoader(<br>    datasets.MNIST(<span class="hljs-string">&#x27;../data&#x27;</span>, train=<span class="hljs-literal">True</span>, download=<span class="hljs-literal">True</span>,<br>                   transform=transforms.Compose([<br>                       transforms.ToTensor(),<br>                       transforms.Normalize((<span class="hljs-number">0.1307</span>,), (<span class="hljs-number">0.3081</span>,))<br>                   ])),<br>    batch_size=args.batch_size, shuffle=<span class="hljs-literal">True</span>, **kwargs)<br>test_loader = torch.utils.data.DataLoader(<br>    datasets.MNIST(<span class="hljs-string">&#x27;../data&#x27;</span>, train=<span class="hljs-literal">False</span>, transform=transforms.Compose([<br>                       transforms.ToTensor(),<br>                       transforms.Normalize((<span class="hljs-number">0.1307</span>,), (<span class="hljs-number">0.3081</span>,))<br>                   ])),<br>    batch_size=args.batch_size, shuffle=<span class="hljs-literal">True</span>, **kwargs)<br> <br> <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Net</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(Net, self).__init__()<br>        self.conv1 = nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, kernel_size=<span class="hljs-number">5</span>)<span class="hljs-comment">#è¾“å…¥å’Œè¾“å‡ºé€šé“æ•°åˆ†åˆ«ä¸º1å’Œ10</span><br>        self.conv2 = nn.Conv2d(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, kernel_size=<span class="hljs-number">5</span>)<span class="hljs-comment">#è¾“å…¥å’Œè¾“å‡ºé€šé“æ•°åˆ†åˆ«ä¸º10å’Œ20</span><br>        self.conv2_drop = nn.Dropout2d()<span class="hljs-comment">#éšæœºé€‰æ‹©è¾“å…¥çš„ä¿¡é“ï¼Œå°†å…¶è®¾ä¸º0</span><br>        self.fc1 = nn.Linear(<span class="hljs-number">320</span>, <span class="hljs-number">50</span>)<span class="hljs-comment">#è¾“å…¥çš„å‘é‡å¤§å°å’Œè¾“å‡ºçš„å¤§å°åˆ†åˆ«ä¸º320å’Œ50</span><br>        self.fc2 = nn.Linear(<span class="hljs-number">50</span>, <span class="hljs-number">10</span>)<br> <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        x = F.relu(F.max_pool2d(self.conv1(x), <span class="hljs-number">2</span>))<span class="hljs-comment">#conv-&gt;max_pool-&gt;relu</span><br>        x = F.relu(F.max_pool2d(self.conv2_drop(self.conv2(x)), <span class="hljs-number">2</span>))<span class="hljs-comment">#conv-&gt;dropout-&gt;max_pool-&gt;relu</span><br>        x = x.view(-<span class="hljs-number">1</span>, <span class="hljs-number">320</span>)<br>        x = F.relu(self.fc1(x))<span class="hljs-comment">#fc-&gt;relu</span><br>        x = F.dropout(x, training=self.training)<span class="hljs-comment">#dropout</span><br>        x = self.fc2(x)<br>        <span class="hljs-keyword">return</span> F.log_softmax(x)<br> <br>model = Net()<br><span class="hljs-keyword">if</span> args.cuda:<br>    model.cuda()<span class="hljs-comment">#å°†æ‰€æœ‰çš„æ¨¡å‹å‚æ•°ç§»åŠ¨åˆ°GPUä¸Š</span><br> <br>optimizer = optim.SGD(model.parameters(), lr=args.lr, momentum=args.momentum)<br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">train</span>(<span class="hljs-params">epoch</span>):<br>    model.train()<span class="hljs-comment">#æŠŠmoduleè®¾æˆtrainingæ¨¡å¼ï¼Œå¯¹Dropoutå’ŒBatchNormæœ‰å½±å“</span><br>    <span class="hljs-keyword">for</span> batch_idx, (data, target) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_loader):<br>        <span class="hljs-keyword">if</span> args.cuda:<br>            data, target = data.cuda(), target.cuda()<br>        data, target = Variable(data), Variable(target)<span class="hljs-comment">#Variableç±»å¯¹Tensorå¯¹è±¡è¿›è¡Œå°è£…ï¼Œä¼šä¿å­˜è¯¥å¼ é‡å¯¹åº”çš„æ¢¯åº¦ï¼Œä»¥åŠå¯¹ç”Ÿæˆè¯¥å¼ é‡çš„å‡½æ•°grad_fnçš„ä¸€ä¸ªå¼•ç”¨ã€‚å¦‚æœè¯¥å¼ é‡æ˜¯ç”¨æˆ·åˆ›å»ºçš„ï¼Œgrad_fnæ˜¯Noneï¼Œç§°è¿™æ ·çš„Variableä¸ºå¶å­Variableã€‚</span><br>        optimizer.zero_grad()<br>        output = model(data)<br>        loss = F.nll_loss(output, target)<span class="hljs-comment">#è´Ÿlogä¼¼ç„¶æŸå¤±</span><br>        loss.backward()<br>        optimizer.step()<br>        <span class="hljs-keyword">if</span> batch_idx % args.log_interval == <span class="hljs-number">0</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Train Epoch: &#123;&#125; [&#123;&#125;/&#123;&#125; (&#123;:.0f&#125;%)]\tLoss: &#123;:.6f&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>                epoch, batch_idx * <span class="hljs-built_in">len</span>(data), <span class="hljs-built_in">len</span>(train_loader.dataset),<br>                <span class="hljs-number">100.</span> * batch_idx / <span class="hljs-built_in">len</span>(train_loader), loss.item()))<br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">epoch</span>):<br>    model.<span class="hljs-built_in">eval</span>()<span class="hljs-comment">#æŠŠmoduleè®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼ï¼Œåªå¯¹Dropoutå’ŒBatchNormæ¨¡å—æœ‰å½±å“</span><br>    test_loss = <span class="hljs-number">0</span><br>    correct = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> data, target <span class="hljs-keyword">in</span> test_loader:<br>        <span class="hljs-keyword">if</span> args.cuda:<br>            data, target = data.cuda(), target.cuda()<br>        data, target = Variable(data, volatile=<span class="hljs-literal">True</span>), Variable(target)<br>        output = model(data)<br>        test_loss += F.nll_loss(output, target).item()<span class="hljs-comment">#Variable.data</span><br>        pred = output.data.<span class="hljs-built_in">max</span>(<span class="hljs-number">1</span>)[<span class="hljs-number">1</span>] <span class="hljs-comment"># get the index of the max log-probability</span><br>        correct += pred.eq(target.data).cpu().<span class="hljs-built_in">sum</span>()<br> <br>    test_loss = test_loss<br>    test_loss /= <span class="hljs-built_in">len</span>(test_loader) <span class="hljs-comment"># loss function already averages over batch size</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\nTest set: Average loss: &#123;:.4f&#125;, Accuracy: &#123;&#125;/&#123;&#125; (&#123;:.0f&#125;%)\n&#x27;</span>.<span class="hljs-built_in">format</span>(<br>        test_loss, correct, <span class="hljs-built_in">len</span>(test_loader.dataset),<br>        <span class="hljs-number">100.</span> * correct / <span class="hljs-built_in">len</span>(test_loader.dataset)))<br> <br> <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, args.epochs + <span class="hljs-number">1</span>):<br>        train(epoch)<br>        test(epoch)<br></code></pre></td></tr></table></figure><p>åˆ«äººæ€»ç»“çš„ <a href="https://handbook.pytorch.wiki/index.html">Pytorch handbook</a>ï¼Œçœ‹ä¸Šå»è¿˜ä¸é”™</p><h2 id="0x01-review-of-linear-regression"><a class="markdownIt-Anchor" href="#0x01-review-of-linear-regression"></a> 0x01 Review of linear regression</h2><p>çº¿æ€§å›å½’æ˜¯éå¸¸ç»å…¸çš„æ¨¡å‹ï¼Œå…¶æ±‚è§£æ–¹æ³•å¹¶ä¸æ˜¯åªæœ‰æ¢¯åº¦ä¸‹é™ä¸€ç§ï¼Œ<a href="https://blog.tjdata.site/2022/01/29/CS229-01--%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/">CS229-01â€“çº¿æ€§æ¨¡å‹</a>ä¹‹å‰çš„blogä¸­ç»™å‡ºäº†ç›¸å…³çš„ä»‹ç»ï¼Œè¿™é‡Œå†é‡æ–°å¤è¿°ä¸€ä¸‹å’Œå…³äºè‡ªå·±åœ¨å…¶ä¸­æ–°çš„æ€è€ƒ</p><h3 id="11-è®°å·å’Œå¼•è¨€"><a class="markdownIt-Anchor" href="#11-è®°å·å’Œå¼•è¨€"></a> 1.1 è®°å·å’Œå¼•è¨€</h3><p>å‡è®¾æ¯ä¸ª<strong>sample</strong>åŒ…å«<strong>featureï¼ˆn<em>1ï¼‰<strong>å’Œ</strong>labelï¼ˆ1</em>1ï¼‰</strong>ï¼Œä¹Ÿå°±æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mo>(</mo><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo separator="true">,</mo><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>)</mo><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mn>0</mn><mo>:</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>:</mo><mi>m</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">[(x^{(i)},y^{(i)}),i=0:...:m]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">[</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mrel">:</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mrel">:</span><span class="mord mathit">m</span><span class="mclose">]</span></span></span></span>,åœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¸Œæœ›æ„å»ºä¸€ä¸ª<strong>model</strong>ï¼ˆæˆ–è€…è¯´ä¸€ç§<strong>function</strong>ï¼‰æ¥ä½œä¸ºfeatureå’Œlabelä¹‹é—´çš„<strong>æ˜ å°„</strong>å…³ç³»ï¼Œè¿™æ ·åœ¨ä¸€ä¸ªæ–°çš„featureåˆ°æ¥çš„æ—¶å€™ï¼Œå¯ä»¥åšå‡ºäº†é¢„æµ‹ã€‚è¿™ä¸ª<strong>model</strong>å…¶å®å°±æ˜¯å®ä¾‹åŒ–çš„<strong>hypothesis</strong>ï¼Œå®ä¾‹åŒ–çš„è¿‡ç¨‹ä¾¿æ˜¯<strong>optimization</strong>ç¡®å®šæ¨¡å‹<strong>parameters</strong>çš„è¿‡ç¨‹ï¼Œå…¶ä¸­åŒ…æ‹¬<strong>loss function</strong>ä¸<strong>optim method</strong></p><h3 id="12-æ¨¡å‹å®ç°çš„è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#12-æ¨¡å‹å®ç°çš„è¿‡ç¨‹"></a> 1.2 æ¨¡å‹å®ç°çš„è¿‡ç¨‹</h3><p>å¯¹äºçº¿æ€§å›å½’ï¼Œæ‰€åšå‡ºçš„<strong>hypothesis</strong>è‡ªç„¶æ˜¯çº¿æ€§çš„ï¼Œè¿™ä¹Ÿæ˜¯å®ƒå±äºå¹¿ä¹‰çº¿æ€§æ¨¡å‹çš„åŸå› </p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msup><mi>w</mi><mi>T</mi></msup><mo>âˆ—</mo><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">h(x)=w^T*x+b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathit">x</span><span class="mbin">+</span><span class="mord mathit">b</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mo>:</mo><mi>n</mi><mo>âˆ—</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">w:n*1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mrel">:</span><span class="mord mathit">n</span><span class="mbin">âˆ—</span><span class="mord mathrm">1</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mo>:</mo><mn>1</mn><mo>âˆ—</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">b:1*1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">b</span><span class="mrel">:</span><span class="mord mathrm">1</span><span class="mbin">âˆ—</span><span class="mord mathrm">1</span></span></span></span></span></p><p>å¯¹äºä¼˜åŒ–è¿‡ç¨‹ï¼Œç¬¬ä¸€æ­¥æ˜¯ç¡®å®šæŸå¤±å‡½æ•°ï¼Œç¬¬äºŒæ­¥æ˜¯åˆ©ç”¨æŸå¤±å‡½æ•°æ¥æ‰¾åˆ°å¯¹åº”çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mo separator="true">,</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">w,b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mord mathit">b</span></span></span></span>å‚æ•°å€¼ä½¿å¾—æœ€å°</p><p>æŸå¤±å‡½æ•°æ˜¯ç”¨æ¥æè¿°é¢„æµ‹å€¼å’Œå®é™…å€¼ä¹‹é—´çš„å·®åˆ«ï¼Œé€šå¸¸æ¨¡å‹è¶Šå¥½æŸå¤±å‡½æ•°éœ€è¦æœ€å°ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯æ¬§æ°è·ç¦»ä½œä¸ºæŸå¤±å‡½æ•°ï¼Œå…·ä½“åŸå› åœ¨1.3ä¸­è§£é‡Š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>r</mi><mi>g</mi><mi>m</mi><mi>i</mi><msub><mi>n</mi><mrow><mi>w</mi><mo separator="true">,</mo><mi>b</mi></mrow></msub><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>i</mi><mo>=</mo><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mo>(</mo><mi>h</mi><mo>(</mo><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>)</mo><mo>âˆ’</mo><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><msup><mo>)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">argmin_{w,b}\frac{1}{2}\Sigma_{i=0}^{i=m-1}(h(x^{(i)})-y^{(i)})^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mord mathit">b</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.266995em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>ä¹‹åä¾¿æ˜¯æ±‚è§£è¿™ä¸ªä¼˜åŒ–é—®é¢˜çš„æ–¹å¼ï¼Œå¯¹äºçº¿æ€§å›å½’æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åˆ©ç”¨çŸ©é˜µçš„normal equationæ–¹æ³•å¾—åˆ°<strong>è§£æè§£</strong>ï¼›äºŒæ˜¯åˆ©ç”¨æ·±åº¦å­¦ä¹ ä¸­å¸¸ç”¨çš„<strong>æ¢¯åº¦ä¸‹é™ï¼ˆgradient descentï¼‰<strong>çš„</strong>å¯å‘å¼</strong>æ–¹æ³•æ¥å¾—åˆ°è¿‘ä¼¼è§£ï¼ˆpsï¼šå’Œåšæ—¶åˆ»è¡¨ä¸€æ ·ï¼‰</p><ul><li>normal equationï¼Œåˆ©ç”¨å¯¼æ•°ä¸º0çš„æå€¼ç‚¹å¾—åˆ°å–å€¼ï¼Œæ¨å¯¼è¿‡ç¨‹ç•¥</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h62er2bz0ej20li0ay0te.jpg" alt="image-20220911092806762" /></p><ul><li>gradient descentï¼Œåˆ©ç”¨å¯¼æ•°ä¸‹é™çš„æ–¹å¼æ¥æ¢ç´¢çš„æ¥è¿‘æå€¼ç‚¹</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mo>=</mo><mi>w</mi><mo>âˆ’</mo><mi>l</mi><mi>r</mi><mo>âˆ—</mo><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>w</mi></mrow></mfrac><mi>L</mi><mo>(</mo><mi>w</mi><mo separator="true">,</mo><mi>b</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">w=w-lr*\frac{\partial}{\partial w}L(w,b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.37144em;"></span><span class="strut bottom" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mbin">âˆ—</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord mathit">L</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mo>=</mo><mi>w</mi><mo>âˆ’</mo><mi>l</mi><mi>r</mi><mo>âˆ—</mo><mo>(</mo><mi>h</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>âˆ’</mo><mi>y</mi><mo>)</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">w=w-lr*(h(x)-y)x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mbin">âˆ—</span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord mathit">x</span></span></span></span></span></p><p>çº¿æ€§æ¨¡å‹çš„æ¢¯åº¦æ¯”è¾ƒå¥½æ±‚è§£</p><h3 id="13-æ¨¡å‹è§£é‡Š"><a class="markdownIt-Anchor" href="#13-æ¨¡å‹è§£é‡Š"></a> 1.3 æ¨¡å‹è§£é‡Š</h3><p>æœºå™¨å­¦ä¹ æœ€æ–¹ä¾¿çš„å°±æ˜¯å¯è§£é‡Šæ€§ã€‚é¦–å…ˆæˆ‘ä»¬çš„å‡è®¾ä¸­è®¤ä¸ºfeatureså’Œlabelsä¹‹é—´æ˜¯å…³äºçº¿æ€§åˆ†å¸ƒï¼Œä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹æ€»ä¼šæœ‰å„ç§å„æ ·çš„å› ç´ ä¹Ÿå°±æ˜¯é«˜æ–¯åˆ†å¸ƒçš„å‡è®¾ï¼Œæ‰€ä»¥å¦‚æœæœ‰<strong>Ground- truth</strong>çš„è¯ï¼Œé‚£å¿…ç„¶æ˜¯ï¼Œä¸»ä¹‰å—·å¯¹äºä¸åŒ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msup><mi>w</mi><mi>T</mi></msup><mo>âˆ—</mo><mi>x</mi><mo>+</mo><mi>b</mi><mo>+</mo><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">h(x)=w^T*x+b+\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathit">x</span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mbin">+</span><span class="mord mathit">Ïµ</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>Ïµ</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><msqrt><mo>(</mo></msqrt><mn>2</mn><mo>âˆ—</mo><mi mathvariant="normal">Î </mi><mo>)</mo><mo>âˆ—</mo><mi>Ïƒ</mi></mrow></mfrac><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mfrac><mrow><mo>(</mo><msup><mi>Ïµ</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><msup><mo>)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac><mo>)</mo></mrow><annotation encoding="application/x-tex">p(\epsilon)=\frac{1}{\sqrt(2*\Pi)*\sigma}exp(-\frac{(\epsilon^{(i)})^2}{2\sigma^2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.565em;"></span><span class="strut bottom" style="height:2.69501em;vertical-align:-1.13001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">Ïµ</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.825005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="sqrt mord"><span class="sqrt-sign" style="top:-0.04500500000000007em;"><span class="style-wrap reset-textstyle textstyle uncramped"><span class="delimsizing size1">âˆš</span></span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="mopen">(</span></span><span style="top:-0.855005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">2</span><span class="mbin">âˆ—</span><span class="mord mathrm">Î </span><span class="mclose">)</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">Ïµ</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>æœ€å¤§ä¼¼ç„¶æ³•ï¼ˆmaximum likelihoodï¼‰</strong> çš„æ–¹å¼æ¥æ¨å¯¼æˆ‘ä»¬æƒ³è¦ä»€ä¹ˆï¼ŸæŠ›å¼ƒä¼ ç»Ÿè·ç¦»çš„æ¦‚ç‡ï¼Œæˆ‘ä»¬ç”¨æ¦‚ç‡çš„æ–¹å¼æ¥è¡¨ç¤º.ï¼ˆæˆ‘ä»¬çš„ç›®çš„éƒ½æ˜¯é¢„æµ‹å€¼å’ŒçœŸå®å€¼ç›¸æ¥è¿‘ï¼Œå¯ä»¥ç”¨è·ç¦»ã€ä¹Ÿå¯ä»¥ç”¨åˆ†å¸ƒæ¦‚ç‡ï¼‰</p><p>ç”±ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºé¢„æµ‹å€¼çš„æ¦‚ç‡å€¼ï¼ˆä¸æ˜¯æ¦‚ç‡åˆ†å¸ƒï¼ï¼ï¼‰</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><msup><mover accent="true"><mi>y</mi><mo>^</mo></mover><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>)</mo><mo>=</mo><mi>p</mi><mo>(</mo><mi>h</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><msqrt><mo>(</mo></msqrt><mn>2</mn><mo>âˆ—</mo><mi mathvariant="normal">Î </mi><mo>)</mo><mo>âˆ—</mo><mi>Ïƒ</mi></mrow></mfrac><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mfrac><mrow><mo>(</mo><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>âˆ’</mo><mi>h</mi><mo>(</mo><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac><mo>)</mo></mrow><annotation encoding="application/x-tex">p(\hat y^{(i)})=p(h(x))=\frac{1}{\sqrt(2*\Pi)*\sigma}exp(-\frac{(y^{(i)}-h(x^{(i)}))^2}{2\sigma^2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.565em;"></span><span class="strut bottom" style="height:2.69501em;vertical-align:-1.13001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.825005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="sqrt mord"><span class="sqrt-sign" style="top:-0.04500500000000007em;"><span class="style-wrap reset-textstyle textstyle uncramped"><span class="delimsizing size1">âˆš</span></span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="mopen">(</span></span><span style="top:-0.855005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">2</span><span class="mbin">âˆ—</span><span class="mord mathrm">Î </span><span class="mclose">)</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p><p>æˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„æ•°æ®é›†ä¸­çš„æ¦‚ç‡éƒ½å°½å¯èƒ½çš„å¤§ï¼Œæ‰€ä»¥</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>r</mi><mi>g</mi><mi>m</mi><mi>a</mi><mi>x</mi><msubsup><mo>âˆ</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>i</mi><mo>=</mo><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msubsup><mi>p</mi><mo>(</mo><msup><mover accent="true"><mi>y</mi><mo>^</mo></mover><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">argmax \prod_{i=0}^{i=m-1} p(\hat y^{(i)})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.8116690000000004em;"></span><span class="strut bottom" style="height:3.0893380000000006em;vertical-align:-1.277669em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span><span style="top:-0.000005000000000143778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span><span class="op-symbol large-op mop">âˆ</span></span></span><span style="top:-1.2500050000000003em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>è¿™ä¸ªæ—¶å€™å°±å¯ä»¥æ±‚å¯¼å¾—åˆ°ç­‰ä»·äº1.2ä¸­æŸå¤±å‡½æ•°çš„å¼å­!</p><h3 id="14-å›é¡¾è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#14-å›é¡¾è¿‡ç¨‹"></a> 1.4 å›é¡¾è¿‡ç¨‹</h3><p>1.1 ç»™å‡ºä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšã€1.2 ç»™å‡ºç†è®ºæ¨å¯¼è¿‡ç¨‹ã€1.3ç»™å‡ºæ¨¡å‹çš„è§£é‡Šã€‚è¿™é‡Œä¸€ä¸ªå›°æƒ‘çš„ç‚¹åœ¨äºloss functionæ˜¯å…ˆæœ‰è¿˜æ˜¯å…ˆå¯ä»¥è¢«è§£é‡Šçš„ã€‚æˆ‘çš„ä¸ªäººç†è§£æ˜¯å®ƒå…ˆæœ‰æ¬§æ°è·ç¦»çš„æ–¹å¼ï¼Œåé¢éšç€å‘å±•æ‰é€æ¸åˆ©ç”¨æ¦‚ç‡æ–¹å¼è§£é‡Šï¼ŒåŒæ—¶è¿™ç§è§£é‡Šçš„èŒƒå¼æˆ‘ä»¬ä¹Ÿå¯ä»¥æ¨å¹¿ç»™å…¶ä»–æ¨¡å‹ã€‚</p><p>æ¯”å¦‚åœ¨é€»è¾‘å›å½’ä¸­ï¼Œå¹¶ä¸æ˜¯ç»™å‡ºå‡è®¾å°±ç»™å‡ºæŸå¤±å‡½æ•°ï¼Œè€Œæ˜¯åˆ©ç”¨æ¦‚ç‡æ–¹å¼æ¥**æ¨å¯¼ï¼ˆï¼ï¼ï¼‰**å¾—åˆ°æŸå¤±å‡½æ•°ï¼Œè¿™é‡Œå¸¸ç”¨çš„æ–¹å¼æ˜¯MLPå’ŒMAEæˆ–è€…å…¶ä»–çš„æ–¹å¼ï¼Œåœ¨é€‰æ‹©åˆé€‚çš„ä¼˜åŒ–ç®—æ³•æ¥å¯»æ‰¾å‚æ•°</p><p>ä¸åŒäºæœºå™¨å­¦ä¹ ç›®çš„æ˜¯å¾—åˆ°ä¸€ä¸ªæœ‰æ•ˆçš„æ¨¡å‹ï¼Œä¼ ç»Ÿçš„ç»Ÿè®¡åˆ†æä¼šç»™å‡ºå‚æ•°ä¼°è®¡çš„ä¼˜åŠ£ä»¥åŠæ£€éªŒæ˜¯å¦åˆç†ï¼Œå¹¶å°±å¾—åˆ°çš„å‚æ•°ç»™å‡ºè‡ªå˜é‡å’Œå› å˜é‡ä¹‹é—´çš„å…³ç³»ã€‚</p><h2 id="0x02-manual-implementation-processeight-step"><a class="markdownIt-Anchor" href="#0x02-manual-implementation-processeight-step"></a> 0x02  Manual implementation processï¼ˆeight stepï¼‰</h2><p>æ¥ä¸‹æ¥å°±æ˜¯åˆ©ç”¨ä»£ç å®ç°ä¸Šè¿°åŠŸèƒ½ï¼Œè¿™é‡Œå‚è€ƒ<a href="https://zh-v2.d2l.ai/chapter_linear-networks/index.html">ææ²è€å¸ˆçš„d2l</a>ï¼Œåœ¨æœ€å¼€å§‹è½¯ä»¶æ¨¡å—çš„è®¾è®¡ä¸­å°±å·²ç»ç»™å‡ºæ¥ä»£ç çš„æ¡†æ¶ã€‚</p><h3 id="21-ç”Ÿæˆæ•°æ®é›†è¯»å–æ•°æ®é›†"><a class="markdownIt-Anchor" href="#21-ç”Ÿæˆæ•°æ®é›†è¯»å–æ•°æ®é›†"></a> 2.1 ç”Ÿæˆæ•°æ®é›†/è¯»å–æ•°æ®é›†</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼Œç”ŸæˆåŒ…å«éšæœºå™ªéŸ³çš„æ•°æ®</span><br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">synthetic_data</span>(<span class="hljs-params">w,b,num_examples</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;ç”ŸæˆåŒ…å«éšæœºå™ªéŸ³çš„çº¿æ€§å›å½’æ•°æ®&#x27;&#x27;&#x27;</span><br>    X=torch.normal(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,(num_examples,<span class="hljs-built_in">len</span>(w)))<br>    y=torch.matmul(X,w)+b<br>    y+=torch.normal(<span class="hljs-number">0</span>,<span class="hljs-number">0.01</span>,y.shape)<br>    <span class="hljs-keyword">return</span> X,y.reshape(-<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)<br><br>true_w=torch.tensor([<span class="hljs-number">2</span>,-<span class="hljs-number">3.4</span>])<br>true_b=<span class="hljs-number">4.2</span><br>features,labels=synthetic_data(true_w,true_b,<span class="hljs-number">1000</span>)<br></code></pre></td></tr></table></figure><h3 id="22-æ•°æ®è§‚å¯Ÿä¸é¢„å¤„ç†æš‚æ— "><a class="markdownIt-Anchor" href="#22-æ•°æ®è§‚å¯Ÿä¸é¢„å¤„ç†æš‚æ— "></a> 2.2 æ•°æ®è§‚å¯Ÿä¸é¢„å¤„ç†ï¼ˆæš‚æ— ï¼‰</h3><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs maxima"># ç¬¬äºŒæ­¥ï¼Œç®€å•çš„è§‚å¯Ÿ<span class="hljs-built_in">feature</span>ä¸<span class="hljs-built_in">labels</span>ä¹‹é—´çš„å…³ç³»<br># æœ¬æ–‡ä¸­æœ‰<span class="hljs-built_in">feature</span>ä¸ºï¼ˆ<span class="hljs-number">1000</span>ï¼Œ<span class="hljs-number">2</span>ï¼‰ï¼Œå› æ­¤å¯ä»¥çœ‹ç¬¬äºŒä¸ªç‰¹å¾å’Œ<span class="hljs-built_in">labels</span>ä¹‹é—´çš„å…³ç³»<br>import matplotlib.pyplot as plt<br>plt.scatter(<span class="hljs-built_in">features</span>[:,<span class="hljs-number">1</span>],<span class="hljs-built_in">labels</span>)<br></code></pre></td></tr></table></figure><h3 id="23-æ•°æ®è¿­ä»£å™¨dataloader"><a class="markdownIt-Anchor" href="#23-æ•°æ®è¿­ä»£å™¨dataloader"></a> 2.3 æ•°æ®è¿­ä»£å™¨ï¼ˆDataloaderï¼‰</h3><p>è¿™é‡Œé‡‡ç”¨çš„å°æ‰¹é‡ï¼ˆbatchï¼‰çš„æ¢¯åº¦ä¸‹é™ï¼›åœ¨æ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹ä¸­æœ€ç›´æ¥çš„æ˜¯è®¡ç®—æ‰€æœ‰æ•°æ®é›†çš„æ¢¯åº¦è¿›è¡Œæ›´æ–°ï¼Œè¿™æ ·å¯¹äºmemoryçš„å‹åŠ›æ¯”è¾ƒå¤§ï¼Œå› æ­¤å¯ä»¥ä¸€ä¸ªepochè¿›è¡Œåˆ’åˆ†ï¼Œåˆ’åˆ†ä¸åŒçš„batch_sizeï¼Œå†åˆ©ç”¨batchè¿›è¡Œå‚æ•°æ›´æ–°ã€‚</p><p>ä½†æ˜¯è¿™æ ·çš„ç–‘é—®åœ¨äºbatchèƒ½ä»£è¡¨æ•´ä¸ªè®­ç»ƒé›†è¿›è¡Œæ›´æ–°å—ï¼Ÿæ‰€ä»¥è¿™æ ·å­å°±éœ€è¦è®­ç»ƒå¾ˆå¤šæ¬¡ï¼Œåœ¨æŸç§ç‰¹æ®Šæƒ…å†µä¸‹ä¼šéœ‡è¡å¤šæ¬¡ï¼Œæ‰€æœ‰ä¹Ÿä¼šæœ‰æ›´å¤šçš„ä¼˜åŒ–ç®—æ³•ï¼Œæ¥æ·»åŠ å™ªéŸ³æˆ–è€…åŠ¨é‡ï¼Œæå‡ä¼˜åŒ–ç®—æ³•çš„å¥å£®æ€§ã€‚</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs maxima"># ç¬¬ä¸‰éƒ¨ï¼Œå¯¹æ•°æ®é›†è¿›è¡Œè¿­ä»£å¤„ç†ï¼Œè¿™æ ·å¯ä»¥ä¿è¯åœ¨éšæœºæ¢¯åº¦ä¸‹é™è¿‡ç¨‹ä¸­ä¼šæ…¢æ…¢è½¬æ¢è¿›å»<br>def data_iter(batch_size,<span class="hljs-built_in">features</span>,<span class="hljs-built_in">labels</span>):<br>    num_examples=len(<span class="hljs-built_in">features</span>)<br>    <span class="hljs-built_in">indices</span>=list(<span class="hljs-built_in">range</span>(num_examples))<br>    <span class="hljs-built_in">random</span>.shuffle(<span class="hljs-built_in">indices</span>)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,num_examples,batch_size):<br>        batch_indices=torch.tensor(<span class="hljs-built_in">indices</span>[i:<span class="hljs-built_in">min</span>(i+batch_size,num_examples)])<br>        yield  <span class="hljs-built_in">features</span>[batch_indices],<span class="hljs-built_in">labels</span>[batch_indices]<br># yieldçš„ä½œç”¨è¿™é‡Œçš„è¿­ä»£çš„ç»“æœæ˜¯é€æ­¥å‘å‡ºæ¥çš„<br>batch_size=<span class="hljs-number">10</span><br><span class="hljs-keyword">for</span> X,y <span class="hljs-keyword">in</span> data_iter(batch_size,<span class="hljs-built_in">features</span>,<span class="hljs-built_in">labels</span>):<br>    <span class="hljs-built_in">print</span>(X,&#x27;\n&#x27;,y)<br>    <span class="hljs-built_in">break</span><br></code></pre></td></tr></table></figure><h3 id="24-åˆå§‹åŒ–å‚æ•°"><a class="markdownIt-Anchor" href="#24-åˆå§‹åŒ–å‚æ•°"></a> 2.4 åˆå§‹åŒ–å‚æ•°</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment"># ç¬¬å››æ­¥ï¼Œåˆå§‹åŒ–å‚æ•°</span><br><span class="hljs-attribute">w</span>=torch.normal(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>.<span class="hljs-number">01</span>,size=(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),requires_grad=True)<br><span class="hljs-attribute">b</span>=torch.zeros(<span class="hljs-number">1</span>,requires_grad=True)<br></code></pre></td></tr></table></figure><h3 id="25-å®šä¹‰æ¨¡å‹net"><a class="markdownIt-Anchor" href="#25-å®šä¹‰æ¨¡å‹net"></a> 2.5 å®šä¹‰æ¨¡å‹ï¼ˆnetï¼‰</h3><p>å…¶å®è¿™é‡Œnetçš„è¾“å…¥å‚æ•°åº”è¯¥æ˜¯Xå’Œparamï¼Œå› ä¸ºåœ¨åç»­çš„æ¨¡å‹ä¸­è‚¯å®šä¼šæœ‰å‚æ•°å’Œè®­ç»ƒæ ·æœ¬çš„è¾“å…¥ï¼Œä½†æ˜¯è®¡ç®—æ–¹å¼å’Œlinregå¹¶ä¸æ˜¯ç›¸ä¼¼ï¼Œå¦‚æœè¾“å…¥å‚æ•°è§„å®šå¥½ä¸ºwå’Œbï¼Œåœ¨åç»­æ›´æ”¹ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç¬¬äº”æ­¥ï¼Œå®šä¹‰æ¨¡å‹</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">linreg</span>(<span class="hljs-params">X,w,b</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;linear regression&#x27;&#x27;&#x27;</span><br>    <span class="hljs-comment"># X M*n</span><br>    <span class="hljs-comment"># w n*1</span><br>    <span class="hljs-keyword">return</span> torch.matmul(X,w)+b<br></code></pre></td></tr></table></figure><h3 id="26-å®šä¹‰æŸå¤±å‡½æ•°loss"><a class="markdownIt-Anchor" href="#26-å®šä¹‰æŸå¤±å‡½æ•°loss"></a> 2.6 å®šä¹‰æŸå¤±å‡½æ•°ï¼ˆlossï¼‰</h3><p>æŸå¤±å‡½æ•°è¡¨å¾çš„æ˜¯é¢„æµ‹å€¼å’ŒçœŸå®å€¼ä¹‹é—´çš„å·®è·ï¼Œå› æ­¤å‡½æ•°çš„è¾“å…¥åº”è¯¥ä¸ºé¢„æµ‹å€¼ä¸çœŸå€¼ï¼Œè¿™æ ·å°±å¯ä»¥è¢«å¤ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ç¬¬å…­æ­¥ï¼Œå®šä¹‰æŸå¤±å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">squared_loss</span>(<span class="hljs-params">y_hat,y</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;å‡æ–¹è¯¯å·®&#x27;&#x27;&#x27;</span><br>    <span class="hljs-keyword">return</span> (y_hat-y.reshape(y_hat.shape))**<span class="hljs-number">2</span>/<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="27-å®šä¹‰ä¼˜åŒ–ç®—æ³•optim"><a class="markdownIt-Anchor" href="#27-å®šä¹‰ä¼˜åŒ–ç®—æ³•optim"></a> 2.7 å®šä¹‰ä¼˜åŒ–ç®—æ³•ï¼ˆoptimï¼‰</h3><p>è¿™é‡Œè¿˜æ˜¯ä½¿ç”¨ç»™å¥½çš„APIå®ç°ï¼ŒåŒæ—¶åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦è®¾ç½®çš„é™¤äº†æ‰¹é‡æ¢¯åº¦ä¸‹é™çš„batch-sizeä¹‹å¤–ï¼Œè¿˜éœ€è¦ç¡®å®šå­¦ä¹ ç‡ã€‚è¿™ä¸ªåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æ˜¯éœ€è¦è®¾ç½®çš„</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver"><span class="hljs-comment"># ç¬¬ä¸ƒæ­¥ï¼Œå®šä¹‰ä¼˜åŒ–ç®—æ³•</span><br>def sgd(<span class="hljs-built_in">params</span>,lr,batch_size):<br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> <span class="hljs-built_in">param</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">params</span>:<br>            <span class="hljs-built_in">param</span>-=lr*<span class="hljs-built_in">param</span>.grad/batch_size<br>            <span class="hljs-built_in">param</span>.grad.zero_()<br></code></pre></td></tr></table></figure><h3 id="28-å®Œæ•´çš„è®­ç»ƒè¿‡ç¨‹"><a class="markdownIt-Anchor" href="#28-å®Œæ•´çš„è®­ç»ƒè¿‡ç¨‹"></a> 2.8 å®Œæ•´çš„è®­ç»ƒè¿‡ç¨‹</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment"># ç¬¬å…«æ­¥ï¼Œå®Œæ•´çš„è®­ç»ƒè¿‡ç¨‹</span><br><span class="hljs-attribute">lr</span>=0.03<br><span class="hljs-attribute">num_epoch</span>=3<br><span class="hljs-attribute">net</span>=linreg<br><span class="hljs-attribute">loss</span>=squared_loss<br><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> range(num_epoch):<br>    <span class="hljs-keyword">for</span> X,y <span class="hljs-keyword">in</span> data_iter(batch_size,features,labels):<br>        <span class="hljs-attribute">l</span>=loss(net(X,w,b),y)<br>        l.sum().backward()<br>        sgd([w,b],lr,batch_size)<br>    with torch.no_grad():<br>        <span class="hljs-attribute">train_l</span>=loss(net(features,w,b),labels)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;epoch&#123;&#125;,loss&#123;&#125;&#x27;</span>.format(str(epoch+1),str(float(train_l.mean()))))<br></code></pre></td></tr></table></figure><h2 id="0x03-automatic-implementation-process-pytorch"><a class="markdownIt-Anchor" href="#0x03-automatic-implementation-process-pytorch"></a> 0x03 Automatic implementation process ï¼ˆPytorchï¼‰</h2><p>å›é¡¾ä¸Šè¿°çš„è¿‡ç¨‹ï¼Œä¸ºäº†2.8æœ€åçš„è®­ç»ƒè¿‡ç¨‹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç”Ÿæˆæ•°æ®é›†å’Œè¯»å–æ•°æ®é›†ï¼›ä¹‹åæˆ‘ä»¬å†™æ¥ä¸€ä¸ªdataloaderæ¥å°†æ•°æ®é›†è½¬æ¢ä¸ºå¯è¿­ä»£ï¼ˆiterableï¼‰çš„å¯¹è±¡æ¥æ–¹ä¾¿åç»­çš„æ¢¯åº¦ä¸‹é™ï¼Œdataloaderä¸­æˆ‘ä»¬éœ€è¦è®¾ç½®æ•°æ®é›†ã€batch-sizeã€æ˜¯å¦å¯ä»¥è¢«æ‰“ä¹±ï¼›åé¢å®šä¹‰æ¨¡å‹ã€æŸå¤±å‡½æ•°å’Œä¼˜åŒ–ç®—æ³•ï¼Œæ¨¡å‹æ˜¯éœ€è¦æ ¹æ®paramå’Œxæ¥å¾—åˆ°é¢„æµ‹å€¼ã€æŸå¤±å‡½æ•°éœ€è¦æ ¹æ®é¢„æµ‹å€¼å’ŒçœŸå®å€¼å¾—åˆ°ç»“æœã€ä¼˜åŒ–ç®—æ³•éœ€è¦æ ¹æ®å­¦ä¹ ç‡ã€batch sizeæ¥è¿›è¡Œå‚æ•°æ›´æ–°</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import numpy as np<br>import torch<br><span class="hljs-keyword">from</span> torch.utils import data<br><span class="hljs-comment"># ç¬¬ä¸€æ­¥ç”Ÿæˆæ•°æ®é›†</span><br><span class="hljs-attribute">true_w</span>=torch.tensor([2,-3.4])<br><span class="hljs-attribute">true_b</span>=4.2<br>features,<span class="hljs-attribute">labels</span>=synthetic_data(true_w,true_b,1000)<br><br><span class="hljs-comment"># ç¬¬äºŒæ­¥è¯»å–æ•°æ®é›†</span><br>def load_array(data_arrays,batch_size,<span class="hljs-attribute">is_train</span>=<span class="hljs-literal">True</span>):<br>    <span class="hljs-attribute">dataset</span>=data.TensorDataset(*data_arrays)<br>    return data.DataLoader(dataset,batch_size,<span class="hljs-attribute">shuffle</span>=is_train)<br><br><span class="hljs-attribute">batch_size</span>=10<br><span class="hljs-attribute">data_iter</span>=load_array((features,labels),batch_size)<br><span class="hljs-comment"># è¿™é‡Œdata_iterçš„æ–¹å¼ä¸ä¹‹å‰çš„æ–¹å¼ç›¸ä¼¼</span><br><span class="hljs-comment"># ç¬¬ä¸‰æ­¥ï¼Œå¯è§†åŒ–æ è¿‡</span><br><span class="hljs-comment"># ç¬¬å››æ­¥ï¼Œå®šä¹‰æ¨¡å‹</span><br><span class="hljs-keyword">from</span> torch import nn<br><span class="hljs-attribute">net</span>=nn.Sequential(nn.Linear(2,1))<br>net[0].weight.data.normal_(0,0.01)<br>net[0].bias.data.fill_(0)<br><br><span class="hljs-attribute">loss</span>=nn.MSELoss()<br><span class="hljs-attribute">trainer</span>=torch.optim.SGD(net.parameters(),lr=0.03)<br><br><span class="hljs-attribute">num_epoch</span>=3<br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> range(num_epoch):<br>    <span class="hljs-keyword">for</span> X,y <span class="hljs-keyword">in</span> data_iter:<br>        <span class="hljs-attribute">l</span>=loss(net(X),y)<br>        trainer.zero_grad()<br>        l.backward()<br>        trainer.<span class="hljs-keyword">step</span>()<br>    <span class="hljs-attribute">l</span>=loss(net(features),labels)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;epoch&#123;&#125; loss is &#123;&#125;&#x27;</span>.format(str(epoch+1),str(float(l))))<br></code></pre></td></tr></table></figure><h2 id="0x04-discussion"><a class="markdownIt-Anchor" href="#0x04-discussion"></a> 0x04 Discussion</h2><p>åœ¨äº†è§£æ•´ä¸ªä»£ç å®ç°è¿‡ç¨‹ä¹‹åï¼Œæ‰èƒ½æ›´å¥½çš„äº†è§£åˆ°åç»­çš„é€»è¾‘å›å½’ã€å›¾åƒæ·±åº¦å­¦ä¹ ç­‰ä»£ç å®ç°çš„æ–¹å¼ï¼Œä»¥åŠå¦‚ä½•å­¦ä¹ pytorchçš„ç»“æ„</p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>D2L</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Reviewï¼šWebPage_Requestçš„å®Œæ•´è¿‡ç¨‹</title>
    <link href="/posts/cb0af509.html"/>
    <url>/posts/cb0af509.html</url>
    
    <content type="html"><![CDATA[<p>æ‘˜è¦</p><span id="more"></span><p>åº”ç”¨å±‚åè®®<br /><a href="https://blog.tjdata.site/2022/06/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-02-Chapter02%20%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE/">è®¡ç®—æœºç½‘ç»œå­¦ä¹ ç¬”è®° â€“ åº”ç”¨å±‚åè®®</a><br />ä¸‡ç»´ç½‘ HTTP Proxy<br />ç”µå­æ¸¸æˆ SMTP POP3IMAP<br />å±€åŸŸç½‘IPåœ°å€åˆ†é… DHCP<br />åŸŸåè§£æ DNS<br />ç½‘ç»œä¸‹è½½ P2P<br />æµåª’ä½“ CDN<br />è¿è¾“å±‚åè®®<br /><a href="https://blog.tjdata.site/2022/06/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-03-Chapter03%20%E8%BF%90%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE/">è®¡ç®—æœºç½‘ç»œå­¦ä¹ ç¬”è®° â€“ è¿è¾“å±‚åè®®</a><br />UDP<br />TCP<br />ç½‘ç»œå±‚åè®®<br /><a href="https://blog.tjdata.site/2022/06/28/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-04-Chapter04%20%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8D%8F%E8%AE%AE/">è®¡ç®—æœºç½‘ç»œå­¦ä¹ ç¬”è®° â€“ ç½‘ç»œå±‚åè®®</a><br />IPåè®® - æ•°æ®å±‚é¢<br />IPåè®® - æ§åˆ¶å±‚é¢<br />é“¾è·¯å±‚åè®®<br />æ¯”è¾ƒåä½å±‚ï¼Œä¸é‡è§†<br />ä»¥å¤ªç½‘<br />ç‰©ç†å±‚åè®®<br />å®Œå…¨åº•å±‚ï¼Œä¸é‡è§†<br />IEEE802.11</p><h2 id="0x02-å®Œæ•´çš„ä½¿ç”¨è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#0x02-å®Œæ•´çš„ä½¿ç”¨è¿‡ç¨‹"></a> 0x02 å®Œæ•´çš„ä½¿ç”¨è¿‡ç¨‹</h2><p>é—®é¢˜æè¿°ï¼šåœ¨å­¦æ ¡ï¼Œå­¦ç”Ÿæ˜¯å¦‚ä½•é€šè¿‡æ ¡å›­ç½‘é“¾æ¥åˆ°ç½‘ç»œï¼Œç„¶åä¸‹è½½www.baidu.comçš„ä¸»é¡µé¢çš„<br />æ¶‰åŠåˆ°çš„åè®®ï¼šåº”ç”¨å±‚çš„DHCPã€DNSã€HTTPï¼›è¿è¾“å±‚çš„UDPï¼›ç½‘ç»œå±‚çš„IPï¼›é“¾è·¯å±‚çš„ä»¥å¤ªç½‘</p><h3 id="21"><a class="markdownIt-Anchor" href="#21"></a> 2.1</h3><ul><li>Userå¯åŠ¨å®ƒçš„PCï¼Œå¯ä»¥ä½¿ç”¨ä¸€æ ¹ä»¥å¤ªç½‘ç”µç¼†æˆ–è€…WI-FIä¸å­¦æ ¡çš„ä»¥å¤ªç½‘äº¤æ¢æœºè¿æ¥ï¼Œå­¦æ ¡çš„äº¤æ¢æœºä¹Ÿå’Œå­¦æ ¡çš„Routerè¿æ¥ã€‚<br />å­¦æ ¡çš„Routerä¸æœ¬åœ°çš„ISPï¼ˆå¯èƒ½æ˜¯ä¸­å›½ç§»åŠ¨ä¹Ÿæœ‰å¯èƒ½æ˜¯å…¶ä»–çš„ä»€ä¹ˆä¸œè¥¿ï¼Œ<a href="http://xn--comcast-f43ko11bdhat6ae75mnf7b.net">åŸæ–‡ä¸­çš„å†å²comcast.net</a>)è¿æ¥ï¼Œå› æ­¤æä¾›DNSæœåŠ¡ï¼Œä¹Ÿå°±æ˜¯è¯´DNSæœåŠ¡å™¨æ˜¯åœ¨ISPçš„ç½‘ç»œä¸­</li><li>Userä¸ºäº†è¿æ¥ç½‘ç»œï¼Œé¦–å…ˆéœ€è¦é€šè¿‡DHCPæ¥è·å¾—è‡ªå·±çš„IPåœ°å€ï¼Œå› æ­¤å®ƒé€šè¿‡DHCPè¯·æ±‚æŠ¥æ–‡æ¥è·å¾—è‡ªå·±çš„IPåœ°å€<ul><li>è¯·æ±‚æŠ¥æ–‡æ”¾åˆ°ç›®çš„ç«¯å£67å’Œè¯·æ±‚ç«¯å£68çš„UDPæŠ¥æ–‡æ®µï¼Œæ”¾åˆ°å¹¿æ’­IPï¼ˆ255.255.255.255ï¼‰å’ŒæºIPåœ°å€ï¼ˆ0.0.0.0ï¼‰çš„IPæ•°æ®æŠ¥ä¸­<br />åŒ…å«IPæ•°æ®æŠ¥é˜²æ­¢é“ä»¥å¤ªç½‘å¸§ä¸­ï¼Œç›®çš„MACåœ°å€ï¼ˆFF.FF.FF.FF.FF.FFï¼‰ï¼ŒæºMacåœ°å€å°±æ˜¯Userçš„PCçš„Macåœ°å€ï¼Œæ¯”å¦‚è¯´æ˜¯3c:a6:f6:05:15:2c</li><li>Routeræ¥å—åˆ°å¯¹åº”çš„Macåœ°å€åï¼Œä»ä»¥å¤ªç½‘Frameä¸­æŠ½å–å‡ºIPæ•°æ®æŠ¥ï¼Œç„¶åè·å¾—UDPæŠ¥æ–‡æ®µï¼Œç”±æ­¤å¾—åˆ°äº†DHCPçš„è¯·æ±‚æŠ¥æ–‡<br />å‡è®¾Routerä¸­å¤„ç† DHCPè¯·æ±‚æŠ¥æ–‡çš„æ–¹å¼æ˜¯ä½¿ç”¨CIDRï¼Œ68.85.2.0/24åˆ†é…IPåœ°å€ï¼Œå› æ­¤åˆ†é…68.85.2.101ç»™PCã€ç½‘å…³åœ°å€68.85.2.1å’Œå­ç½‘æ©ç 68.85.2.0/24çš„DHCPACKæŠ¥æ–‡å’ŒDNSçš„åœ°å€ï¼Œæ”¾åˆ°UDPæŠ¥æ–‡æ®µã€IPæ•°æ®æŠ¥ã€ä»¥å¤ªç½‘æ•°æ®å¸§ï¼Œå‘é€å›å‘å‡ºè¯·æ±‚çš„PCçš„macåœ°å€</li><li>âš ï¸è¿”å›çš„æ—¶å€™macåœ°å€å¹¶ä¸æ˜¯å¹¿æ’­çš„ï¼Œåœ¨DHCPçš„ACKåˆ°è¾¾PCçš„æ—¶å€™ï¼Œå¼€å§‹å¾—åˆ°è‡ªå·±çš„IPåœ°å€å’ŒDNSçš„IPåœ°å€ï¼Œå¯ä»¥å¼€å§‹ä¸Šç½‘äº†ï¼</li></ul></li><li>å½“Useré”®å…¥www.google.comä¹‹åï¼Œwebæµè§ˆå™¨ç”Ÿæˆä¸€ä¸ªTCP socketå¼€å§‹å‘é€HTTP requestï¼Œè¿™é‡Œéœ€è¦å¾—åˆ°www.google.comçš„IPåœ°å€<ul><li>ä¸ºäº†å¾—åˆ°www.google.comçš„IPåœ°å€ï¼Œéœ€è¦ç»å†DNSæŸ¥è¯¢æŠ¥æ–‡ï¼Œè¿™ä¸ªæŠ¥æ–‡éœ€è¦æœ‰DNSæœåŠ¡å™¨çš„åœ°å€ï¼ˆæ¯”å¦‚68.87.71.226ï¼‰ä»¥åŠæºIPåœ°å€ï¼ˆ68.85.2.101ï¼‰ï¼Œä»¥åŠå­—ç¬¦ä¸²ï¼ˆâ€˜<a href="http://www.google.com">www.google.com</a>â€™)</li><li>ä¸ºäº†å¾—åˆ°å­¦æ ¡ç½‘ç»œçš„ç½‘å…³è·¯ç”±å™¨ï¼Œéœ€è¦é€šè¿‡ARPå¾—åˆ°ç½‘å…³è·¯ç”±å™¨çš„Macåœ°å€</li><li>å¾—åˆ°ç½‘å…³è·¯ç”±å™¨çš„åœ°å€ä¹‹åï¼ŒPCå‘å‡ºçš„Frameä¸­çš„IPæ•°æ®æŠ¥çš„ç›®çš„IPåœ°å€ä¸ºDNSã€æºIPåœ°å€ä¸ºPCåœ°å€ã€å¸§çš„ç›®çš„åœ°å€æ˜¯ç½‘å…³è·¯ç”±å™¨çš„åœ°å€</li><li>ç½‘å…³è·¯ç”±å™¨æ¥å—åˆ°Frameç—…æŠ½å–åŒ…å«DNSæŸ¥è¯¢çš„IPæ•°æ®æŠ¥ï¼Œè§£æåœ¨é‡æ–°åŸåˆ™è·¯ç”±å™¨ï¼Œå†å°†IPæ•°æ®æŠ¥æ”¾ç½®åˆ°é“¾è·¯å±‚Frameä¸­å›½å‘é€<br />åˆ°è¾¾ä¹‹åï¼Œé‡æ–°è¿”å›ç»™PC</li></ul></li><li>å¾—åˆ°www.google.comçš„IPåœ°å€ä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œäº¤äº’äº†ï¼Œéœ€è¦TCPè¿æ¥å’ŒHTTPåè®®</li></ul>]]></content>
    
    
    <categories>
      
      <category>CS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Review</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>paper02-2012-imagenet-classification-with-deep-convolutional-neural-networks</title>
    <link href="/posts/d4d56670.html"/>
    <url>/posts/d4d56670.html</url>
    
    <content type="html"><![CDATA[<p>LeNetå’ŒAlexNetæ˜¯ä»ä¼ ç»Ÿæ‰‹å·¥ç‰¹å¾æå–SIFIã€HOGç­‰å‘æ·±åº¦å·ç§¯ç¥ç»ç½‘ç»œè½¬å˜çš„è¿‡æ¸¡æœŸã€‚</p><span id="more"></span><p><a href="https://proceedings.neurips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf">NIPS-2012-imagenet-classification-with-deep-convolutional-neural-networks-Paper.pdf</a></p><h1 id="0x01-abstract"><a class="markdownIt-Anchor" href="#0x01-abstract"></a> 0x01 Abstract</h1><p>è®­ç»ƒä¸€ä¸ªdeep convolutional nerual networkæ¥åŒºåˆ†ImageNetçš„LSVRC-2010æ¯”èµ›ä¸­çš„120ä¸‡å¼  high-resolutionåˆ°1000ä¸ªä¸åŒçš„class<br />ï¼ˆç½‘ç»œæ•ˆæœï¼‰åœ¨æˆ‘ä»¬çš„testä¸­ï¼Œæˆ‘ä»¬é”™è¯¯ç‡ä»37.5%åˆ°17%çš„æå‡ï¼Œæ˜¾è‘—çš„å¥½äºç°æœ‰çš„SOTA<br />ï¼ˆç½‘ç»œç»“æ„ï¼‰è¯¥neural networkåŒ…æ‹¬600ä¸‡å‚æ•°å’Œ65ä¸‡å‚æ•°ï¼ŒåŒ…æ‹¬5ä¸ªconvolutional layersï¼Œé¡ºåºæ˜¯1ä¸ªmax-pooling layersã€3ä¸ªfullyconnected layersã€ä»¥åŠæœ€ç»ˆçš„1000ä¸ªsoftmax<br />ï¼ˆè®­ç»ƒè¿‡ç¨‹ï¼‰æˆ‘ä»¬ä½¿ç”¨ non-saturatingç¥ç»å…ƒå’Œé«˜æ•ˆçš„GPUå·ç§¯å®ç°ï¼ŒåŒæ—¶ä¸ºäº†å‡å°‘overfittingï¼Œæˆ‘ä»¬ä½¿ç”¨æœ€è¿‘ä¸€ç§æ–°çš„regularizationæ–¹æ³•dropout</p><h1 id="1-introduction"><a class="markdownIt-Anchor" href="#1-introduction"></a> 1 Introduction</h1><p>åœ¨object recognitionä¸­çš„å…³é”®æ–¹æ³•æ˜¯é‡‡ç”¨ä¸€äº› <strong>machine learning</strong> çš„æ–¹æ³•ï¼›ç”±æ­¤æˆ‘ä»¬æ”¶é›†æ›´å¤šçš„<strong>dataset</strong>ã€ç ”ç©¶æ›´å¼ºçš„<strong>models</strong>ã€ä»¥åŠä½¿ç”¨æ›´å¥½çš„è®­ç»ƒ<strong>techniques</strong>æ¥é˜²æ­¢ overfittingã€‚çš„å´åœ¨ä¸€äº›å¤§é‡æ•°æ®é›†çš„åŠ æŒä¸‹ï¼Œä¸€äº›ç®€å•çš„è¯†åˆ«ä»»åŠ¡å¯ä»¥éå¸¸è½»æ¾çš„è§£å†³ã€‚æ¯”å¦‚åœ¨MNISTæ•°æ®é›†ä¸­é”™è¯¯å·²ç»å’Œäººç›¸å½“ï¼ŒåŒæ—¶æ•°æ®é›†å°çš„æƒ…å†µä¹Ÿè¢«è®¤è¯†åˆ°ç¼ºç‚¹ï¼Œå› æ­¤æ–°çš„æ›´å¤§çš„æ•°æ®é›†LabelMeå’ŒImageNetè¢«å¼€å‘å‡ºæ¥</p><p>ä¸ºäº†ä»æ•°ç™¾ä¸‡çš„å›¾ç‰‡ä¸­å­¦ä¹ æ•°åƒæ•°æ®é›†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„æ¨¡å‹ã€‚ä»ä¸€äº›è®ºæ–‡ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° deep convolutional nerual networkåœ¨è®­ç»ƒä¸­æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯æˆ‘ä»¬çš„æ•°æ®é›†æ˜¯å¦‚æ­¤ä¹‹å¤§ä»¥è‡³äºå…¶ä¸­çš„prior knowledgeå¹¶ä¸èƒ½è¢«äººä¸ºè·å¾—ï¼Œè€Œæ˜¯éœ€è¦ä»æ•°æ®é›†ä¸­å¾—åˆ°ã€ owever, the immense complexity of the object recognition task means that this problem cannot be specified even by a dataset as large as ImageNet, so our model should also have lots of prior knowledge to compensate for all the data we donâ€™t havã€‘ï¼›åŒæ—¶CNNçš„å¤æ‚åº¦å¯ä»¥ç”±æ·±åº¦å’Œå¹¿åº¦å†³å®šï¼ŒåŒæ—¶å…¶å·ç§¯å¤©ç„¶çš„å…·æœ‰å¼ºæœ‰åŠ›çš„å›¾ç‰‡å…ˆéªŒçŸ¥è¯†ã€åŒæ—¶å› ä¸ºå·ç§¯å±‚å­˜åœ¨å…¶æ¯”feedforward neural networkçš„å‚æ•°è¦å°ä½†æ˜¯æ€§èƒ½å¹¶æ²¡æœ‰æ˜æ˜¾çš„ä¸‹é™</p><p>å°½ç®¡CNNçš„æœ‰æ•ˆï¼Œä¾æ—§å¾ˆéš¾åœ¨é«˜åˆ†è¾¨ç‡çš„å›¾åƒä¸­è¿›è¡Œè®­ç»ƒï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯ç°æœ‰çš„GPUå¯ä»¥é«˜åº¦æœ‰æ•ˆ2Dçš„å·ç§¯æ“ä½œæ¥å®ç°å¤§èŒƒå›´çš„è®­ç»ƒã€‚åœ¨æœ¬æ–‡ä¸­é‡‡ç”¨ä¸¤å—GTX580 3GBï¼Œè®­ç»ƒæ—¶é—´ä¸º5ï½6å¤©</p><p>æœ¬æ–‡çš„è´¡çŒ®<br />The specific contributions of this paper are as follows: we trained one of the largest convolutional neural networks to date on the subsets of ImageNet used in the ILSVRC-2010 and ILSVRC-2012 competitions [2] and achieved by far the best results ever reported on these datasets. We wrote a highly-optimized GPU implementation of 2D convolution and all the other operations inherent in training convolutional neural networks, which we make available publicly1. Our network contains a number of new and unusual features which improve its performance and reduce its training time, which are detailed in Section 3. The size of our network made overfitting a significant problem, even with 1.2 million labeled training examples, so we used several effective techniques for preventing overfitting, which are described in Section 4. Our final network contains five convolutional and three fully-connected layers, and this depth seems to be important: we found that removing any convolutional layer (each of which contains no more than 1% of the modelâ€™s parameters) resulted in inferior performance.</p><h1 id="0x02-dataset"><a class="markdownIt-Anchor" href="#0x02-dataset"></a> 0x02 DataSet</h1><p>ImageNet</p><p>ILSVRCï¼Œå…¶ä¸­å¸¸è§çš„æŒ‡æ ‡ä¸ºtop1å’Œtop5</p><pre><code class="hljs">å…¶ä¸­å‰ 5 ä¸ªé”™è¯¯ç‡æ˜¯æµ‹è¯•å›¾åƒä¸­æ­£ç¡®æ ‡ç­¾ä¸åœ¨æ¨¡å‹è®¤ä¸ºæœ€å¯èƒ½çš„äº”ä¸ªæ ‡ç­¾ä¸­çš„éƒ¨åˆ†</code></pre><p>é‡é‡‡æ ·256*256ï¼Œå¯¹äºéé•¿æ–¹å½¢çš„æ•°æ®scaleåˆ°ç›¸åŒçš„åƒç´ ã€‚æˆ‘ä»¬å¹¶æ²¡æœ‰åšå…¶ä»–ä¸å¤„ç†</p><pre><code class="hljs">4.1 Data Augmentation</code></pre><h1 id="0x03-architecture"><a class="markdownIt-Anchor" href="#0x03-architecture"></a> 0x03 Architecture</h1><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5l692hi8nj20fi07smy7.jpg" alt="image_1661565390730_0" /></p><h2 id="31-relu-nonlinearity"><a class="markdownIt-Anchor" href="#31-relu-nonlinearity"></a> 3.1 ReLU  Nonlinearity</h2><pre><code class="hljs">å¸¸è§çš„æ¿€æ´»å‡½æ•°f(x)=tanh(x)æˆ–è€…\[f(x)=(1+e^&#123;-x&#125;)^-1\]å±äºsaturatingéçº¿æ€§ç¥ç»å…ƒè€ŒReLUå‡½æ•°\[f(x)=max(0,x)\]å±äº non-saturatingéçº¿æ€§ç¥ç»å…ƒåè€…é€Ÿåº¦è¦æ˜¾è‘—å¿«äºå‰è€…,è¿™ä¸ªå¯¹äºå¤§è®­ç»ƒé›†çš„è®­ç»ƒæ˜¯éå¸¸æœ‰æ•ˆçš„åŒæ ·æˆ‘ä»¬å¹¶ä¸æ˜¯ç¬¬ä¸€ä¸ªå»è€ƒè™‘æ›¿æ¢æ¿€æ´»å‡½æ•°ï¼Œæ¯”å¦‚ æœ‰äººå°è¯•ä½¿ç”¨\[f(x)=|tanh(x)|\]</code></pre><h2 id="32-training-on-multiple-gpus"><a class="markdownIt-Anchor" href="#32-training-on-multiple-gpus"></a> 3.2 Training on Multiple GPUs</h2><pre><code class="hljs">å¦‚ä½•ä½¿ç”¨ä¸åŒçš„GPUè¿›è¡Œè®­ç»ƒGPUå­˜åœ¨çš„é—®é¢˜æ˜¯3GBçš„æ˜¾å­˜å¹¶ä¸å¤Ÿå®Œæ•´æ•°æ®çš„ç½‘ç»œåœ¨å…¶ä¸­è®­ç»ƒï¼ˆåªèƒ½åŒ…å«12ä¸‡å‚æ•°ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å°†ç½‘ç»œåˆ’åˆ†åœ¨ä¸¤ä¸ªGPUä¸­è®­ç»ƒï¼Œæ•´ä¸ªè¿‡ç¨‹åªæœ‰æ•ˆ</code></pre><h2 id="33-local-response-normalization-card"><a class="markdownIt-Anchor" href="#33-local-response-normalization-card"></a> 3.3 Local Response Normalization card</h2><p>ReLUä¸­å¹¶ä¸éœ€è¦è¾“å…¥ normalizationæ¥æ–¹å¼ç¥ç»å…ƒ saturatingï¼Œåªéœ€è¦å‘ç”Ÿæ­£æ ·æœ¬åˆ™ä¼šäº§ç”Ÿè®­ç»ƒç»“æœï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å‘ç°ä¸‹é¢çš„ normalizationå¯¹äºæ³›åŒ–æ€§èƒ½æ˜¯æœ‰æ•ˆ<br />$$b_{x,y}<sup>i=\frac{a_{x,y}</sup>i}{(k+a\Sigma_{j=max(0,i-n)/2}<sup>{min(N-1,i+n/2)}(a_{x,y}</sup>j)<sup>2)</sup>{\beta}}$$<br />kã€nã€[\alpha]ã€[\beta]éƒ½æ˜¯è¶…å‚æ•°ï¼Œå–å€¼åˆ†åˆ«ä¸º2ã€5ã€1e-4ã€0.75ï¼Œè¿™æ˜¯ç”±è®­ç»ƒé›†è¡¨ç°æ¥ç¡®å®šçš„</p><h2 id="34-overlapping-poolingcard"><a class="markdownIt-Anchor" href="#34-overlapping-poolingcard"></a> 3.4 Overlapping Poolingcard</h2><pre><code class="hljs">ä¸€èˆ¬æ¥è¯´ä¸¤ä¸ªpoolingæ˜¯ä¸é‡å çš„ï¼Œä½†æ˜¯è¿™é‡Œé‡‡ç”¨äº†ä¸€ç§å¯¹ä¼ ç»Ÿçš„poolingæ”¹è¿›çš„æ–¹å¼ï¼Œæ•ˆæœå¾ˆå¥½</code></pre><h2 id="35-overall-architecture"><a class="markdownIt-Anchor" href="#35-overall-architecture"></a> 3.5 Overall Architecture</h2><p>å®Œæ•´çš„ç½‘ç»œç»“æ„å¦‚å›¾æ‰€ç¤ºï¼Œå€Ÿç”¨(åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ -ç°ä»£å·ç§¯ç¥ç»ç½‘ç»œ-AlexNet)[<a href="https://zh.d2l.ai/chapter_convolutional-modern/alexnet.html#id11">https://zh.d2l.ai/chapter_convolutional-modern/alexnet.html#id11</a>]</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5l69soa4aj20be0f4jsh.jpg" alt="image_1661567510569_0" /></p><pre><code class="hljs"><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs routeros">AlexNet(<br>  (features): Sequential(<br>    (0): Conv2d(3, 64, kernel_size=(11, 11), stride=(4, 4), padding=(2, 2))<br>    (1): ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>)<br>    (2): MaxPool2d(<span class="hljs-attribute">kernel_size</span>=3, <span class="hljs-attribute">stride</span>=2, <span class="hljs-attribute">padding</span>=0, <span class="hljs-attribute">dilation</span>=1, <span class="hljs-attribute">ceil_mode</span>=<span class="hljs-literal">False</span>)<br>    (3): Conv2d(64, 192, kernel_size=(5, 5), stride=(1, 1), padding=(2, 2))<br>    (4): ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>)<br>    (5): MaxPool2d(<span class="hljs-attribute">kernel_size</span>=3, <span class="hljs-attribute">stride</span>=2, <span class="hljs-attribute">padding</span>=0, <span class="hljs-attribute">dilation</span>=1, <span class="hljs-attribute">ceil_mode</span>=<span class="hljs-literal">False</span>)<br>    (6): Conv2d(192, 384, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))<br>    (7): ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>)<br>    (8): Conv2d(384, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))<br>    (9): ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>)<br>    (10): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))<br>    (11): ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>)<br>    (12): MaxPool2d(<span class="hljs-attribute">kernel_size</span>=3, <span class="hljs-attribute">stride</span>=2, <span class="hljs-attribute">padding</span>=0, <span class="hljs-attribute">dilation</span>=1, <span class="hljs-attribute">ceil_mode</span>=<span class="hljs-literal">False</span>)<br>  )<br>  (avgpool): AdaptiveAvgPool2d(output_size=(6, 6))<br>  (classifier): Sequential(<br>    (0): Dropout(<span class="hljs-attribute">p</span>=0.5, <span class="hljs-attribute">inplace</span>=<span class="hljs-literal">False</span>)<br>    (1): Linear(<span class="hljs-attribute">in_features</span>=9216, <span class="hljs-attribute">out_features</span>=4096, <span class="hljs-attribute">bias</span>=<span class="hljs-literal">True</span>)<br>    (2): ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>)<br>    (3): Dropout(<span class="hljs-attribute">p</span>=0.5, <span class="hljs-attribute">inplace</span>=<span class="hljs-literal">False</span>)<br>    (4): Linear(<span class="hljs-attribute">in_features</span>=4096, <span class="hljs-attribute">out_features</span>=4096, <span class="hljs-attribute">bias</span>=<span class="hljs-literal">True</span>)<br>    (5): ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>)<br>    (6): Linear(<span class="hljs-attribute">in_features</span>=4096, <span class="hljs-attribute">out_features</span>=1000, <span class="hljs-attribute">bias</span>=<span class="hljs-literal">True</span>)<br>  )<br>)<br></code></pre></td></tr></table></figure></code></pre>  <figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs routeros">class AlexNet(nn.Module):<br>    def __init__(self, <span class="hljs-attribute">num_classes</span>=1000, <span class="hljs-attribute">init_weights</span>=<span class="hljs-literal">False</span>):<br>        super(AlexNet, self).__init__()<br>        self.features = nn.Sequential(<br>            nn.Conv2d(3, 64, <span class="hljs-attribute">kernel_size</span>=11, <span class="hljs-attribute">stride</span>=4, <span class="hljs-attribute">padding</span>=2),<br>            nn.ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>),<br>            nn.MaxPool2d(<span class="hljs-attribute">kernel_size</span>=3, <span class="hljs-attribute">stride</span>=2),<br>            nn.Conv2d(64, 192, <span class="hljs-attribute">kernel_size</span>=5, <span class="hljs-attribute">padding</span>=2),<br>            nn.ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>),<br>            nn.MaxPool2d(<span class="hljs-attribute">kernel_size</span>=3, <span class="hljs-attribute">stride</span>=2),<br>            nn.Conv2d(192, 384, <span class="hljs-attribute">kernel_size</span>=3, <span class="hljs-attribute">padding</span>=1),<br>            nn.ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>),<br>            nn.Conv2d(384, 256, <span class="hljs-attribute">kernel_size</span>=3, <span class="hljs-attribute">padding</span>=1),<br>            nn.ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>),<br>            nn.Conv2d(256, 256, <span class="hljs-attribute">kernel_size</span>=3, <span class="hljs-attribute">padding</span>=1),<br>            nn.ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>),<br>            nn.MaxPool2d(<span class="hljs-attribute">kernel_size</span>=3, <span class="hljs-attribute">stride</span>=2),<br>        )<br>        self.avgpool = nn.AdaptiveAvgPool2d((6, 6))<br>        self.classifier = nn.Sequential(<br>            nn.Dropout(),<br>            nn.Linear(256 * 6 * 6, 4096),<br>            nn.ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>),<br>            nn.Dropout(),<br>            nn.Linear(4096, 4096),<br>            nn.ReLU(<span class="hljs-attribute">inplace</span>=<span class="hljs-literal">True</span>),<br>            nn.Linear(4096, num_classes),<br>        )<br>        <span class="hljs-keyword">if</span> init_weights:<br>            self._initialize_weights()<br><br>    def forward(self, x):<br>        x = self.features(x)<br>        x = torch.flatten(x, <span class="hljs-attribute">start_dim</span>=1)<br>        x = self.classifier(x)<br>        return x<br><br>    def _initialize_weights(self):<br>        <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> self.modules():<br>            <span class="hljs-keyword">if</span> isinstance(m, nn.Conv2d):<br>                nn.init.kaiming_normal_(m.weight, <span class="hljs-attribute">mode</span>=<span class="hljs-string">&#x27;fan_out&#x27;</span>, <span class="hljs-attribute">nonlinearity</span>=<span class="hljs-string">&#x27;relu&#x27;</span>)<br>                <span class="hljs-keyword">if</span> m.bias is <span class="hljs-keyword">not</span> None:<br>                    nn.init.constant_(m.bias, 0)<br>            elif isinstance(m, nn.Linear):<br>                nn.init.normal_(m.weight, 0, 0.01)<br>                nn.init.constant_(m.bias, 0)<br></code></pre></td></tr></table></figure><p>ç‰¹ç‚¹</p><pre><code class="hljs">å› ä¸ºåœ¨ä¸¤å—GPUä¸Šè¿è¡Œï¼Œå› æ­¤ç½‘ç»œç»“æ„è¢«ä¸€åˆ†ä¸ºäºŒäº”å±‚ convolutional layersåŠ ä¸Šä¸‰å±‚ fullyconnected layers2ï¼Œ4ï¼Œ5å±‚ä»…ä¸è‡ªå·±ä¹‹å‰çš„æ ¸æœ‰å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ä»…ä¸è‡ªå·±è¿™ä¸ªGPUå‰ä¸€å±‚è®­ç»ƒçš„è¾“å‡ºæœ‰å…³ï¼Œç¬¬ä¸‰å±‚ä¸å‰ä¸€å±‚çš„ä¸¤ä¸ªGPUæœ‰å…³ï¼Œåœ¨é€šé“ä¸Šåšäº†ä¸€å±‚èåˆLocal Response Normalizationè¿ç”¨åœ¨ç¬¬ä¸€å±‚å’Œç¬¬äºŒå±‚æ¯ä¸€å±‚éƒ½ä½¿ç”¨äº† ReLu</code></pre><h1 id="0x04-reducing-overfitting"><a class="markdownIt-Anchor" href="#0x04-reducing-overfitting"></a> 0x04 Reducing overfitting</h1><h2 id="41-data-augmentation"><a class="markdownIt-Anchor" href="#41-data-augmentation"></a> 4.1 Data Augmentation</h2><pre><code class="hljs">è¿™é‡Œçš„è¾“å…¥æ˜¯256*256ï¼Œä½†æ˜¯ç½‘ç»œçš„è¾“å…¥æ˜¯224*224ï¼Œå› ä¸ºä¸ºäº†æ‰©å……æ•°æ®é›†çš„å¤§å°ï¼Œåœ¨ä¹‹åçš„è®­ç»ƒè¿‡ç¨‹ä¸­å¯ä»¥éšæœºé€‰æ‹©ï¼Œè¿™æ ·å¯ä»¥å¾—åˆ°2^11=2048å€çš„æ‰©å……å¦å¤–ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨PCAå¯¹RGBè¿›è¡Œä¿®æ­£ï¼Œæ˜¯çš„æ•°æ®çš„æ•°é‡å¾—åˆ°å¢å¤šï¼Œæœ€ç»ˆçš„æ•ˆæœä¹Ÿæ˜¯æˆåŠŸçš„</code></pre><h2 id="42-dropout"><a class="markdownIt-Anchor" href="#42-dropout"></a> 4.2 dropout</h2><pre><code class="hljs">0.5çš„æ¦‚ç‡å°†ä¸€äº›ç¥ç»å…ƒçš„è¾“å‡ºè®¾ç½®ä¸º0ï¼Œå¯ä»¥æœ‰æ•ˆçš„é™ä½è¿‡æ‹Ÿåˆ</code></pre><h1 id="0x05-details-of-learning"><a class="markdownIt-Anchor" href="#0x05-details-of-learning"></a> 0x05 Details of learning</h1><p>SGDï¼Œéšæœºæ¢¯åº¦ä¸‹é™ï¼Œå¢åŠ åŠ¨é‡çš„é€‰é¡¹<br />åˆå§‹åŒ–å‚æ•°ï¼Œä½¿ç”¨å‡å€¼ä¸º0ã€æ–¹å·®ä¸º0.01çš„é«˜æ–¯éšæœºå˜é‡åˆå§‹åŒ–æƒé‡å‚æ•°<br />LearningRateè®¾ç½®ä¸º0.01</p><h1 id="0x06-results"><a class="markdownIt-Anchor" href="#0x06-results"></a> 0x06 Results</h1><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5l6a0jeaoj208v04mjrj.jpg" alt="image_1661568191988_0" /></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5l6a3r2nmj20bn0670ta.jpg" alt="image_1661568198286_0" /></p><h1 id="0x07-å‚è€ƒåˆ«äººçš„å¤ç°"><a class="markdownIt-Anchor" href="#0x07-å‚è€ƒåˆ«äººçš„å¤ç°"></a> 0x07 å‚è€ƒåˆ«äººçš„å¤ç°</h1><p>to be continued ~~</p>]]></content>
    
    
    <categories>
      
      <category>CNN</category>
      
    </categories>
    
    
    <tags>
      
      <tag>paper_reading</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½œä¸šè®°å½•</title>
    <link href="/posts/eac26b.html"/>
    <url>/posts/eac26b.html</url>
    
    <content type="html"><![CDATA[<p>ä½œä¸šè®°å½•</p><span id="more"></span><h2 id="å¼•è¨€"><a class="markdownIt-Anchor" href="#å¼•è¨€"></a> å¼•è¨€</h2><p>é¡¹ç›®æ¥æºæ˜¯ç™¾åº¦é£æ¡¨çš„ã€é£æ¡¨é¢†èˆªå›¢AIè¾¾äººå…»æˆè¥ã€‘çš„å¤§ä½œä¸šï¼Œç®—æ˜¯å°ç™½çš„å¥‡æ–‡å…±èµäº†ã€‚ç¬¬ä¸€æ¬¡æ¥è§¦ç™¾åº¦çš„paddleæ¡†æ¶ï¼Œæœ¬æ¥æ˜¯ä¸­æ–‡çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ç»“æœä¸­æ–‡è®ºå›æ´»è·ƒåº¦ä¸å¤Ÿã€å®˜æ–¹æ–‡æ¡£çš„è¡¨æ„å¹¶ä¸æ¸…æ¥šã€‚è€Œä¸”æ„Ÿè§‰APIçš„è®¾è®¡ä¸æ˜¯å¾ˆåˆç†ã€‚ä¼¼ä¹æ²¡æœ‰å¤ªé‡è§†è®¾è®¡åŸåˆ™å¯¼è‡´æœ‰çš„åœ°æ–¹APIè¿‡äºç®€å•ï¼ˆä½†ä¹Ÿå¾ˆéš¾å®šåˆ¶åŒ–ï¼‰ã€‚</p><p><a href="https://aistudio.baidu.com/aistudio/projectdetail/4365943">æœ¬å®è·µæ—¨åœ¨é€šè¿‡ä¸€ä¸ªç¾é£Ÿåˆ†ç±»çš„æ¡ˆåˆ—ï¼Œè®©å¤§å®¶ç†è§£å’ŒæŒæ¡å¦‚ä½•ä½¿ç”¨é£æ¡¨2.0æ­å»ºä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œã€‚<br />ç‰¹åˆ«æç¤ºï¼šæœ¬å®è·µæ‰€ç”¨æ•°æ®é›†å‡æ¥è‡ªäº’è”ç½‘ï¼Œè¯·å‹¿ç”¨äºå•†åŠ¡ç”¨é€”ã€‚</a></p><p>è§£å‹æ–‡ä»¶ï¼Œä½¿ç”¨train.csvè®­ç»ƒï¼Œæµ‹è¯•ä½¿ç”¨val.csvã€‚æœ€åä»¥åœ¨valä¸Šçš„å‡†ç¡®ç‡ä½œä¸ºæœ€ç»ˆåˆ†æ•°ã€‚</p><h2 id="0x01-æ•°æ®é¢„å¤„ç†"><a class="markdownIt-Anchor" href="#0x01-æ•°æ®é¢„å¤„ç†"></a> 0x01 æ•°æ®é¢„å¤„ç†</h2><p>æ€è€ƒå¹¶åŠ¨æ‰‹è¿›è¡Œè°ƒä¼˜ï¼Œä»¥åœ¨éªŒè¯é›†ä¸Šçš„å‡†ç¡®ç‡ä¸ºè¯„ä»·æŒ‡æ ‡ï¼ŒéªŒè¯é›†ä¸Šå‡†ç¡®ç‡è¶Šé«˜ï¼Œå¾—åˆ†è¶Šé«˜ï¼æ¨¡å‹å¤§å®¶å¯ä»¥æ›´æ¢ï¼Œè°ƒå‚æŠ€å·§ä»»é€‰ï¼Œä»£ç éœ€è¦å¤§å®¶è‡ªå·±è°ƒé€šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">!unzip -oq /home/aistudio/data/data120156/lemon_homework.<span class="hljs-built_in">zip</span><br>!unzip -oq /home/aistudio/lemon_homework/lemon_lesson.<span class="hljs-built_in">zip</span><br>!unzip -oq /home/aistudio/lemon_lesson/test_images.<span class="hljs-built_in">zip</span><br>!unzip -oq /home/aistudio/lemon_lesson/train_images.<span class="hljs-built_in">zip</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¯¼å…¥æ‰€éœ€è¦çš„åº“</span><br><span class="hljs-keyword">from</span> sklearn.utils <span class="hljs-keyword">import</span> shuffle<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br><br><span class="hljs-keyword">import</span> paddle<br><span class="hljs-keyword">import</span> paddle.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">from</span> paddle.io <span class="hljs-keyword">import</span> Dataset<br><span class="hljs-keyword">import</span> paddle.vision.transforms <span class="hljs-keyword">as</span> T<br><span class="hljs-keyword">import</span> paddle.nn.functional <span class="hljs-keyword">as</span> F<br><span class="hljs-keyword">from</span> paddle.metric <span class="hljs-keyword">import</span> Accuracy<br><br><span class="hljs-keyword">import</span> warnings<br>warnings.filterwarnings(<span class="hljs-string">&quot;ignore&quot;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">df=pd.read_csv(<span class="hljs-string">&#x27;lemon_lesson/train_images.csv&#x27;</span>)<br>d=df[<span class="hljs-string">&#x27;class_num&#x27;</span>].hist().get_figure()<br><span class="hljs-comment"># å›¾åƒåˆ†ç±»ç«èµ›å¸¸è§éš¾ç‚¹</span><br><span class="hljs-comment"># ç±»åˆ«ä¸å‡è¡¡</span><br><span class="hljs-comment"># one-shotå’Œfew-shotåˆ†ç±»</span><br><span class="hljs-comment"># ç»†ç²’åº¦åˆ†ç±»</span><br></code></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5dg797gp1j20ai070dg1.jpg" alt="png" /></p><p>å›¾åƒæ ‡å‡†åŒ–ä¸å½’ä¸€åŒ–ï¼Œæœ€å¸¸è§çš„å›¾åƒé¢„å¤„ç†æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å›¾æ ‡æ ‡å‡†åŒ–å¤„ç†ï¼Œå°†æ•°æ®æŒ‰ç…§æ¯”ä¾‹ç¼©æ”¾ï¼Œä½¿ä¹‹è½å…¥ä¸€ä¸ªç‰¹å®šçš„åŒºé—´ä¸­ï¼Œå°†æ•°æ®é€šè¿‡å»å‡å€¼ï¼Œå®ç°ä¸­å¿ƒåŒ–ã€‚ç¬¬äºŒç§æ˜¯æ•°æ®å½’ä¸€åŒ–ï¼Œå°†æ•°æ®ç»Ÿä¸€æ˜ å°„åˆ°0-1åŒºé—´ä¸­<br />å®ƒçš„ä½œç”¨</p><ol><li>æœ‰åˆ©äºåˆå§‹åŒ–çš„è¿›è¡Œ</li><li>é¿å…ç»™æ¢¯åº¦æ•°å€¼æ›´æ–°å¸¦æ¥æ•°å€¼é—®é¢˜</li><li>æœ‰åˆ©äºå­¦ä¹ ç‡æ•°å€¼çš„è°ƒæ•´</li><li>åŠ å¿«å¯»æ‰¾æœ€ä¼˜è§£é€Ÿåº¦</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å®šä¹‰æ•°æ®é¢„å¤„ç†</span><br><br>data_transforms = T.Compose([<br>    T.Resize(size=(<span class="hljs-number">224</span>, <span class="hljs-number">224</span>)),<br>    T.RandomHorizontalFlip(<span class="hljs-number">1</span>),<br>    T.RandomVerticalFlip(<span class="hljs-number">1</span>),<br>    T.Transpose(),    <span class="hljs-comment"># HWC -&gt; CHW</span><br>    T.Normalize(<br>        mean=[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],        <span class="hljs-comment"># å½’ä¸€åŒ–</span><br>        std=[<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>],<br>        to_rgb=<span class="hljs-literal">True</span>)    <br>])<br></code></pre></td></tr></table></figure><h2 id="0x02-æ•°æ®é›†åˆ†å‰²å’Œloaderå»ºç«‹"><a class="markdownIt-Anchor" href="#0x02-æ•°æ®é›†åˆ†å‰²å’Œloaderå»ºç«‹"></a> 0x02 æ•°æ®é›†åˆ†å‰²å’Œloaderå»ºç«‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">## æ•°æ®é›†åˆ’åˆ†</span><br><br>train_images = pd.read_csv(<span class="hljs-string">&#x27;lemon_lesson/train_images.csv&#x27;</span>, usecols=[<span class="hljs-string">&#x27;id&#x27;</span>,<span class="hljs-string">&#x27;class_num&#x27;</span>])<br><br><span class="hljs-comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæ ¡éªŒé›†</span><br>all_size = <span class="hljs-built_in">len</span>(train_images)<br><span class="hljs-built_in">print</span>(all_size)<br>train_size = <span class="hljs-built_in">int</span>(all_size * <span class="hljs-number">0.8</span>)<br>train_image_path_list = train_images[:train_size]<br>val_image_path_list = train_images[train_size:]<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(train_image_path_list))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(val_image_path_list))<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ„å»ºDataset</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDataset</span>(paddle.io.Dataset):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    æ­¥éª¤ä¸€ï¼šç»§æ‰¿paddle.io.Datasetç±»</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, train_list, val_list, mode=<span class="hljs-string">&#x27;train&#x27;</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ­¥éª¤äºŒï¼šå®ç°æ„é€ å‡½æ•°ï¼Œå®šä¹‰æ•°æ®è¯»å–æ–¹å¼</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-built_in">super</span>(MyDataset, self).__init__()<br>        self.data = []<br>        <span class="hljs-comment"># å€ŸåŠ©pandasè¯»å–csvæ–‡ä»¶</span><br>        self.train_images = train_list<br>        self.test_images = val_list<br>        <span class="hljs-keyword">if</span> mode == <span class="hljs-string">&#x27;train&#x27;</span>:<br>            <span class="hljs-comment"># è¯»train_images.csvä¸­çš„æ•°æ®</span><br>            <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> self.train_images.itertuples():<br>                self.data.append([<span class="hljs-string">&#x27;train_images/&#x27;</span>+<span class="hljs-built_in">getattr</span>(row, <span class="hljs-string">&#x27;id&#x27;</span>), <span class="hljs-built_in">getattr</span>(row, <span class="hljs-string">&#x27;class_num&#x27;</span>)])<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># è¯»test_images.csvä¸­çš„æ•°æ®</span><br>            <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> self.test_images.itertuples():<br>                self.data.append([<span class="hljs-string">&#x27;train_images/&#x27;</span>+<span class="hljs-built_in">getattr</span>(row, <span class="hljs-string">&#x27;id&#x27;</span>), <span class="hljs-built_in">getattr</span>(row, <span class="hljs-string">&#x27;class_num&#x27;</span>)])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_img</span>(<span class="hljs-params">self, image_path</span>):<br>        <span class="hljs-comment"># å®é™…ä½¿ç”¨æ—¶ä½¿ç”¨Pillowç›¸å…³åº“è¿›è¡Œå›¾ç‰‡è¯»å–å³å¯ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¹æ•°æ®å…ˆåšä¸ªæ¨¡æ‹Ÿ</span><br>        image = Image.<span class="hljs-built_in">open</span>(image_path).convert(<span class="hljs-string">&#x27;RGB&#x27;</span>)<br><br>        <span class="hljs-keyword">return</span> image<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, index</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ­¥éª¤ä¸‰ï¼šå®ç°__getitem__æ–¹æ³•ï¼Œå®šä¹‰æŒ‡å®šindexæ—¶å¦‚ä½•è·å–æ•°æ®ï¼Œå¹¶è¿”å›å•æ¡æ•°æ®ï¼ˆè®­ç»ƒæ•°æ®ï¼Œå¯¹åº”çš„æ ‡ç­¾ï¼‰</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        image = self.load_img(self.data[index][<span class="hljs-number">0</span>])<br>        label = self.data[index][<span class="hljs-number">1</span>]<br><br>        <span class="hljs-keyword">return</span> data_transforms(image), np.array(label, dtype=<span class="hljs-string">&#x27;int64&#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        æ­¥éª¤å››ï¼šå®ç°__len__æ–¹æ³•ï¼Œè¿”å›æ•°æ®é›†æ€»æ•°ç›®</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.data)<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å®šä¹‰æ•°æ®loader</span><br><span class="hljs-comment">#train_loader</span><br>train_dataset = MyDataset(train_list=train_image_path_list, val_list=val_image_path_list, mode=<span class="hljs-string">&#x27;train&#x27;</span>)<br>train_loader = paddle.io.DataLoader(train_dataset, places=paddle.CPUPlace(), batch_size=<span class="hljs-number">128</span>, shuffle=<span class="hljs-literal">True</span>, num_workers=<span class="hljs-number">0</span>)<br><br><span class="hljs-comment">#val_loader</span><br>val_dataset =MyDataset(train_list=train_image_path_list, val_list=val_image_path_list, mode=<span class="hljs-string">&#x27;test&#x27;</span>)<br>val_loader = paddle.io.DataLoader(val_dataset, places=paddle.CPUPlace(), batch_size=<span class="hljs-number">128</span>, shuffle=<span class="hljs-literal">True</span>, num_workers=<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;=============train dataset=============&#x27;</span>)<br><span class="hljs-keyword">for</span> image, label <span class="hljs-keyword">in</span> train_dataset:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;image shape: &#123;&#125;, label: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(image.shape, label))<br>    <span class="hljs-keyword">break</span><br><br><span class="hljs-keyword">for</span> batch_id, data <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(train_loader()):<br>    x_data = data[<span class="hljs-number">0</span>]<br>    y_data = data[<span class="hljs-number">1</span>]<br>    <span class="hljs-built_in">print</span>(x_data)<br>    <span class="hljs-built_in">print</span>(y_data)<br>    <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><pre><code class="hljs">=============train dataset=============image shape: (3, 224, 224), label: 0Tensor(shape=[128, 3, 224, 224], dtype=float32, place=CPUPlace, stop_gradient=True,       [[[[0.10980392, 0.10196079, 0.10588235, ..., 0.10588235, 0.11372549, 0.14117648],          [0.11372549, 0.10980392, 0.10196079, ..., 0.11372549, 0.14509805, 0.16470589],          [0.14901961, 0.11764706, 0.10196079, ..., 0.15686275, 0.23137255, 0.25098041],          ...,        ...,          [0.50980395, 0.50980395, 0.50980395, ..., 0.73333335, 0.74117649, 0.73725492],          [0.50588238, 0.50588238, 0.50588238, ..., 0.72941178, 0.73725492, 0.73725492],          [0.50196081, 0.50196081, 0.50196081, ..., 0.72156864, 0.73333335, 0.73333335]]]])Tensor(shape=[128], dtype=int64, place=CPUPlace, stop_gradient=True,       [0, 0, 2, 2, 1, 2, 2, 1, 0, 0, 0, 1, 0, 0, 3, 2, 0, 0, 0, 0, 1, 1, 0, 2, 2, 2, 3, 2, 0, 1, 2, 0, 0, 0, 1, 2, 1, 0, 0, 1, 0, 1, 2, 0, 1, 1, 0, 0, 3, 0, 2, 0, 3, 3, 2, 2, 1, 3, 3, 2, 1, 0, 0, 1, 0, 1, 0, 2, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 0, 3, 0, 0, 2, 0, 0, 3, 0, 3, 3, 1, 2, 3, 0, 0, 0, 1, 0, 2, 0, 1, 2, 3, 3, 3, 2, 0, 0, 0, 1, 2, 0, 2, 3, 0, 0, 0, 0, 2, 0, 1, 0, 1, 3, 0, 1, 1, 0, 0])</code></pre><h2 id="0x03-æ¨¡å‹é€‰æ‹©å”¯ä¸€æ”¶è·æ˜¯ç‰¹å¾å›¾è®¡ç®—"><a class="markdownIt-Anchor" href="#0x03-æ¨¡å‹é€‰æ‹©å”¯ä¸€æ”¶è·æ˜¯ç‰¹å¾å›¾è®¡ç®—"></a> 0x03 æ¨¡å‹é€‰æ‹©ï¼ˆå”¯ä¸€æ”¶è·æ˜¯ç‰¹å¾å›¾è®¡ç®—ï¼‰</h2><p>é¦–å…ˆè‚¯å®šæ˜¯é€‰æ‹©è‡ªå·±çš„baselineå•¦ï¼Œè¿™ä¸ªçœ‹ä¸Šå»æ˜¯VGGï¼Ÿæ„Ÿè§‰æŒºåœŸçš„</p><p>ç†æƒ³æƒ…å†µä¸­ï¼Œæ¨¡å‹è¶Šå¤§æ‹Ÿåˆèƒ½åŠ›è¶Šå¼ºã€‚å›¾åƒå°ºå¯¸è¶Šå¤§ï¼Œä¿ç•™çš„ä¿¡æ¯ä¹Ÿè¶Šå¤šï¼Œåœ¨å®é™…æƒ…å†µä¸­æ¨¡å‹è¶Šå¤æ‚è®­ç»ƒ<br />æ—¶é—´è¶Šé•¿ï¼Œå›¾åƒè¶Šé•¿å°ºå¯¸è¶Šå¤§è®­ç»ƒæ—¶é—´ä¹Ÿè¶Šé•¿</p><p>æ¯”èµ›å¼€å§‹æœ‰é™ä½¿ç”¨æœ€ç®€å•çš„resnetï¼Œå¿«é€Ÿè·‘å®Œæ•´ä¸ªè®­ç»ƒå’Œé¢„æµ‹æµç¨‹ï¼Œåˆ†ç±»æ¨¡å‹çš„é€‰æ‹©éœ€è¦æ ¹æ®ä»»åŠ¡å¤æ‚åº¦æ¥<br />è¿›è¡Œé€‰æ‹©ï¼Œå¹¶ä¸æ˜¯ç²¾åº¦è¶Šé«˜çš„æ¨¡å‹æœˆé€‚åˆå‚åŠ æ¯”èµ›</p><p>åœ¨å®é™…çš„æ¯”èµ›ä¸­å¯ä»¥é€æ­¥å¢åŠ å°ºå¯¸ï¼Œåœ¨64-64çš„å°ºå¯¸ä¸‹è®©æ¨¡å‹æ”¶æ•›ï¼Œè¿›è€Œå°†æ¨¡å‹æ”¾åˆ°128-128çš„å°ºå¯¸çˆ±è®­ç»ƒ</p><p>åœ¨é€‰æ‹©çš„è¿‡ç¨‹ä¸­baselineåº”è¯¥éµå¾ªå‡ ç‚¹åŸåˆ™</p><ol><li>å¤æ‚åº¦åœ°ï¼Œä»£ç ç»“æ„ç®€å•</li><li>lossæ”¶æ•›æ­£ç¡®ï¼Œmetricå‡ºç°æå‡</li><li>è¿­ä»£å¿«é€Ÿï¼Œæ²¡æœ‰å¾ˆfancyçš„æ¨¡å‹ç»“æ„ã€loss functionæˆ–è€…å›¾åƒé¢„å¤„ç†æ–¹æ³•ä¹‹ç±»çš„</li><li>éœ€è¦ç¼–å†™æ­£ç¡®å¹¶ç®€å•çš„æµ‹è¯•è„šæœ¬ï¼Œèƒ½å¤Ÿæäº¤submissionä¹‹åè·å¾—æ­£ç¡®çš„åˆ†æ•°</li></ol><p>åœ¨ç½‘ç»œæ¨¡å‹ä¸­è¾“å…¥è¾“å‡ºæ ¹æ®å·ç§¯æ¥å°±è¡Œï¼Œå¦‚æœæ¶‰åŠåˆ°è°ƒå‚å°±éœ€è¦ä¸€äº›ç¥å­¦æ¦‚å¿µï¼Œæ¯”å¦‚ä¹‹å‰è¢«å¿½æ‚ æƒ¨çš„æ„Ÿå—é‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Sequentialå½¢å¼ç»„ç½‘</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNet</span>(paddle.nn.Layer):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, num_classes=<span class="hljs-number">4</span></span>):<br>        <span class="hljs-built_in">super</span>(MyNet, self).__init__()<br>        self.conv1 = paddle.nn.Conv2D(in_channels=<span class="hljs-number">3</span>, out_channels=<span class="hljs-number">64</span>, kernel_size=(<span class="hljs-number">7</span>, <span class="hljs-number">7</span>), stride=<span class="hljs-number">2</span>, padding = <span class="hljs-number">3</span>)<br>        self.pool1 = paddle.nn.MaxPool2D(kernel_size=<span class="hljs-number">2</span>, stride=<span class="hljs-number">2</span>)<br><br>        self.conv2 = paddle.nn.Conv2D(in_channels=<span class="hljs-number">64</span>, out_channels=<span class="hljs-number">64</span>, kernel_size=(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),  stride=<span class="hljs-number">1</span>, padding = <span class="hljs-number">1</span>)<br>        self.conv3 = paddle.nn.Conv2D(in_channels=<span class="hljs-number">64</span>, out_channels=<span class="hljs-number">128</span>, kernel_size=(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),  stride=<span class="hljs-number">2</span>, padding = <span class="hljs-number">1</span>)<br>        self.conv4 = paddle.nn.Conv2D(in_channels=<span class="hljs-number">128</span>, out_channels=<span class="hljs-number">256</span>, kernel_size=(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),  stride=<span class="hljs-number">2</span>, padding = <span class="hljs-number">1</span>)<br>        self.conv5 = paddle.nn.Conv2D(in_channels=<span class="hljs-number">256</span>, out_channels=<span class="hljs-number">512</span>, kernel_size=(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),  stride=<span class="hljs-number">2</span>, padding = <span class="hljs-number">1</span>)<br>        <span class="hljs-comment"># # self.pool2 = paddle.nn.MaxPool2D(kernel_size=2, stride=2)</span><br><br>        <span class="hljs-comment"># self.conv3 = paddle.nn.Conv2D(in_channels=448, out_channels=448, kernel_size=(3,3), stride=2, padding = 0)</span><br><br>        <span class="hljs-comment"># self.conv4 = paddle.nn.Conv2D(in_channels=448, out_channels=448, kernel_size=(3,3), stride=2, padding = 1)</span><br><br>        self.flatten = paddle.nn.Flatten()<br>        self.linear1 = paddle.nn.Linear(in_features=<span class="hljs-number">25088</span>, out_features=<span class="hljs-number">64</span>)<br>        self.linear2 = paddle.nn.Linear(in_features=<span class="hljs-number">64</span>, out_features=num_classes)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        x = self.conv1(x)<br>        x = F.relu(x)<br>        x = self.pool1(x)<br>        <span class="hljs-built_in">print</span>(x.shape)<br>        x = self.conv2(x)<br>        x = F.relu(x)<br><br>        x = self.conv3(x)<br>        x = F.relu(x)<br>        <span class="hljs-comment"># # print(x.shape)</span><br>        x = self.conv4(x)<br>        x = F.relu(x)<br>        x = self.conv5(x)<br>        x = F.relu(x)<br>        <span class="hljs-comment"># x = self.conv4(x)</span><br>        <span class="hljs-comment"># x = F.relu(x)</span><br>        <span class="hljs-comment"># # print(x.shape)</span><br><br>        x = self.flatten(x)<br>        x = self.linear1(x)<br>        x = F.relu(x)<br>        x = self.linear2(x)<br>        <span class="hljs-keyword">return</span> x<br><br>model = paddle.Model(MyNet())<br>model.summary((<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">224</span>, <span class="hljs-number">224</span>))<br></code></pre></td></tr></table></figure><pre><code class="hljs">[1, 64, 56, 56]--------------------------------------------------------------------------- Layer (type)       Input Shape          Output Shape         Param #    ===========================================================================   Conv2D-21     [[1, 3, 224, 224]]   [1, 64, 112, 112]        9,472       MaxPool2D-5   [[1, 64, 112, 112]]    [1, 64, 56, 56]           0          Conv2D-22     [[1, 64, 56, 56]]     [1, 64, 56, 56]        36,928        Conv2D-23     [[1, 64, 56, 56]]     [1, 128, 28, 28]       73,856        Conv2D-24     [[1, 128, 28, 28]]    [1, 256, 14, 14]       295,168       Conv2D-25     [[1, 256, 14, 14]]     [1, 512, 7, 7]       1,180,160     Flatten-59      [[1, 512, 7, 7]]        [1, 25088]             0          Linear-7         [[1, 25088]]           [1, 64]           1,605,696      Linear-8          [[1, 64]]              [1, 4]              260      ===========================================================================Total params: 3,201,540Trainable params: 3,201,540Non-trainable params: 0---------------------------------------------------------------------------Input size (MB): 0.57Forward/backward pass size (MB): 10.72Params size (MB): 12.21Estimated Total Size (MB): 23.51---------------------------------------------------------------------------&#123;'total_params': 3201540, 'trainable_params': 3201540&#125;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ³¨æ„è¿‡ç¨‹ä¸­ç‰¹å¾å›¾çš„è®¡ç®—</span><br><span class="hljs-comment"># å®šä¹‰ä¼˜åŒ–å™¨</span><br>optim = paddle.optimizer.Adam(learning_rate=<span class="hljs-number">0.001</span>, parameters=model.parameters())<br>model.prepare(<br>    optim,<br>    paddle.nn.CrossEntropyLoss(),<br>    Accuracy()<br>    )<br><br><span class="hljs-keyword">from</span> visualdl <span class="hljs-keyword">import</span> LogReader, LogWriter<br><br>args=&#123;<br>    <span class="hljs-string">&#x27;logdir&#x27;</span>:<span class="hljs-string">&#x27;./vdl&#x27;</span>,<br>    <span class="hljs-string">&#x27;file_name&#x27;</span>:<span class="hljs-string">&#x27;vdlrecords.model.log&#x27;</span>,<br>    <span class="hljs-string">&#x27;iters&#x27;</span>:<span class="hljs-number">0</span>,<br>&#125;<br><br><span class="hljs-comment"># é…ç½®visualdl</span><br>write = LogWriter(logdir=args[<span class="hljs-string">&#x27;logdir&#x27;</span>], file_name=args[<span class="hljs-string">&#x27;file_name&#x27;</span>])<br><span class="hljs-comment">#iters åˆå§‹åŒ–ä¸º0</span><br>iters = args[<span class="hljs-string">&#x27;iters&#x27;</span>] <br><br><span class="hljs-comment">#è‡ªå®šä¹‰Callback</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Callbk</span>(paddle.callbacks.Callback):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, write, iters=<span class="hljs-number">0</span></span>):<br>        self.write = write<br>        self.iters = iters<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_train_batch_end</span>(<span class="hljs-params">self, step, logs</span>):<br><br>        self.iters += <span class="hljs-number">1</span><br><br>        <span class="hljs-comment">#è®°å½•loss</span><br>        self.write.add_scalar(tag=<span class="hljs-string">&quot;loss&quot;</span>,step=self.iters,value=logs[<span class="hljs-string">&#x27;loss&#x27;</span>][<span class="hljs-number">0</span>])<br>        <span class="hljs-comment">#è®°å½• accuracy</span><br>        self.write.add_scalar(tag=<span class="hljs-string">&quot;acc&quot;</span>,step=self.iters,value=logs[<span class="hljs-string">&#x27;acc&#x27;</span>])<br></code></pre></td></tr></table></figure><pre><code class="hljs">`./vdl/vdlrecords.model.log` is exists, VisualDL will add logs to it.</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æ¨¡å‹è®­ç»ƒä¸è¯„ä¼°</span><br>model.fit(train_loader,<br>        val_loader,<br>        log_freq=<span class="hljs-number">1</span>,<br>        epochs=<span class="hljs-number">15</span>,<br>        callbacks=Callbk(write=write, iters=iters),<br>        verbose=<span class="hljs-number">1</span>, <br>        )<br><br></code></pre></td></tr></table></figure><pre><code class="hljs">The loss value printed in the log is the current step, and the metric is the average value of previous step.Epoch 1/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 1.4849 - acc: 0.2266 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 6.7525 - acc: 0.2930 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 1.8031 - acc: 0.2708 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 1.3808 - acc: 0.2480 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 1.2969 - acc: 0.2750 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 1.2021 - acc: 0.3164 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 1.1513 - acc: 0.3360 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 1.0067 - acc: 0.6797 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 1.0514 - acc: 0.6606 - 1s/step          Eval samples: 221Epoch 2/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.9772 - acc: 0.7734 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.8334 - acc: 0.7734 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.6969 - acc: 0.7604 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 2.3449 - acc: 0.6484 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 1.3612 - acc: 0.6516 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 1.5054 - acc: 0.6380 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 1.1878 - acc: 0.6436 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.9094 - acc: 0.7266 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.8898 - acc: 0.7195 - 1s/step          Eval samples: 221Epoch 3/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.9101 - acc: 0.6641 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.8710 - acc: 0.6836 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.8483 - acc: 0.6875 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.8448 - acc: 0.7031 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.8475 - acc: 0.7063 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.7537 - acc: 0.7122 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.6307 - acc: 0.7185 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.6840 - acc: 0.7891 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.6577 - acc: 0.7783 - 1s/step          Eval samples: 221Epoch 4/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.7030 - acc: 0.7344 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.4887 - acc: 0.8203 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.5533 - acc: 0.8333 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.4893 - acc: 0.8438 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.5349 - acc: 0.8375 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.3818 - acc: 0.8411 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.2702 - acc: 0.8490 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.5461 - acc: 0.8125 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.3558 - acc: 0.8416 - 1s/step          Eval samples: 221Epoch 5/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.4032 - acc: 0.8281 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.2782 - acc: 0.8828 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.2537 - acc: 0.8932 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.3106 - acc: 0.9004 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.3652 - acc: 0.8953 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.2224 - acc: 0.8984 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.3256 - acc: 0.8990 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.3408 - acc: 0.8438 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.3114 - acc: 0.8326 - 1s/step          Eval samples: 221Epoch 6/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.2124 - acc: 0.9062 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.1708 - acc: 0.9258 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.2870 - acc: 0.9167 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.1881 - acc: 0.9180 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.3036 - acc: 0.9156 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.3152 - acc: 0.9089 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.1624 - acc: 0.9092 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.3151 - acc: 0.9141 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.3244 - acc: 0.9050 - 1s/step          Eval samples: 221Epoch 7/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.4050 - acc: 0.8750 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.1410 - acc: 0.9023 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.2465 - acc: 0.9089 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.2190 - acc: 0.9121 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.1823 - acc: 0.9109 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.2198 - acc: 0.9102 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.2194 - acc: 0.9115 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.2905 - acc: 0.8672 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.2588 - acc: 0.8733 - 1s/step          Eval samples: 221Epoch 8/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.1634 - acc: 0.9062 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.1506 - acc: 0.9219 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.1242 - acc: 0.9297 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.3063 - acc: 0.9199 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.1786 - acc: 0.9219 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.1867 - acc: 0.9232 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.1735 - acc: 0.9262 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.2529 - acc: 0.8750 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.2749 - acc: 0.8688 - 1s/step          Eval samples: 221Epoch 9/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.1865 - acc: 0.9141 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.2470 - acc: 0.9023 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.0620 - acc: 0.9297 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.1055 - acc: 0.9375 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.2145 - acc: 0.9344 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.0945 - acc: 0.9388 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.1622 - acc: 0.9387 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.2351 - acc: 0.8906 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.2440 - acc: 0.9005 - 1s/step          Eval samples: 221Epoch 10/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.1562 - acc: 0.9375 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.1392 - acc: 0.9531 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.1352 - acc: 0.9479 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.0883 - acc: 0.9551 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.1463 - acc: 0.9531 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.1493 - acc: 0.9505 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.1267 - acc: 0.9523 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.2258 - acc: 0.9062 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.1954 - acc: 0.9186 - 1s/step          Eval samples: 221Epoch 11/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.1226 - acc: 0.9531 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.1305 - acc: 0.9453 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.1340 - acc: 0.9453 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.0711 - acc: 0.9551 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.0544 - acc: 0.9609 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.1100 - acc: 0.9596 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.1838 - acc: 0.9569 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.1604 - acc: 0.9531 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.2993 - acc: 0.9367 - 1s/step          Eval samples: 221Epoch 12/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.1236 - acc: 0.9453 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.0547 - acc: 0.9688 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.2062 - acc: 0.9505 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.1316 - acc: 0.9492 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.0759 - acc: 0.9563 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.0801 - acc: 0.9609 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.2175 - acc: 0.9580 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.2175 - acc: 0.9219 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.1687 - acc: 0.9367 - 1s/step          Eval samples: 221Epoch 13/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.1188 - acc: 0.9531 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.0690 - acc: 0.9609 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.1382 - acc: 0.9557 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.1006 - acc: 0.9551 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.0434 - acc: 0.9625 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.0742 - acc: 0.9635 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.1249 - acc: 0.9637 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.1632 - acc: 0.9453 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.2240 - acc: 0.9412 - 1s/step          Eval samples: 221Epoch 14/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.0547 - acc: 0.9766 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.0427 - acc: 0.9844 - ETA: 6s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.0513 - acc: 0.9818 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.0545 - acc: 0.9824 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.0608 - acc: 0.9812 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.0513 - acc: 0.9831 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.0402 - acc: 0.9852 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.1093 - acc: 0.9531 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.2143 - acc: 0.9548 - 1s/step          Eval samples: 221Epoch 15/15[128, 64, 56, 56]step 1/7 [===&gt;..........................] - loss: 0.0608 - acc: 0.9766 - ETA: 7s - 1s/step[128, 64, 56, 56]step 2/7 [=======&gt;......................] - loss: 0.0476 - acc: 0.9805 - ETA: 5s - 1s/step[128, 64, 56, 56]step 3/7 [===========&gt;..................] - loss: 0.0400 - acc: 0.9844 - ETA: 4s - 1s/step[128, 64, 56, 56]step 4/7 [================&gt;.............] - loss: 0.0271 - acc: 0.9863 - ETA: 3s - 1s/step[128, 64, 56, 56]step 5/7 [====================&gt;.........] - loss: 0.0198 - acc: 0.9891 - ETA: 2s - 1s/step[128, 64, 56, 56]step 6/7 [========================&gt;.....] - loss: 0.0367 - acc: 0.9896 - ETA: 1s - 1s/step[113, 64, 56, 56]step 7/7 [==============================] - loss: 0.0152 - acc: 0.9909 - 1s/step          Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.1904 - acc: 0.9609 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.2047 - acc: 0.9502 - 1s/step          Eval samples: 221</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">result = model.evaluate(val_loader,batch_size=<span class="hljs-number">32</span>,log_freq=<span class="hljs-number">1</span>, verbose=<span class="hljs-number">1</span>, num_workers=<span class="hljs-number">0</span>, callbacks=<span class="hljs-literal">None</span>)<br><span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure><pre><code class="hljs">Eval begin...The loss value printed in the log is the current batch, and the metric is the average value of previous step.[128, 64, 56, 56]step 1/2 [==============&gt;...............] - loss: 0.0984 - acc: 0.9688 - ETA: 1s - 1s/step[93, 64, 56, 56]step 2/2 [==============================] - loss: 0.3313 - acc: 0.9502 - 1s/step          Eval samples: 221&#123;'loss': [0.33130556], 'acc': 0.9502262443438914&#125;</code></pre><h2 id="0x04-one-more-thing"><a class="markdownIt-Anchor" href="#0x04-one-more-thing"></a> 0x04 one more thing</h2><p>GitHubçš„å­¦ç”Ÿç¤¼åŒ…é‡Œé¢æœ‰å¥½å¤šå¥½ä¸œè¥¿ï¼Œdigital oceanæœ‰100åˆ€çš„é¢åº¦ï¼Œç»‘å®šPayPalå°±å¯ä»¥ä½¿ç”¨å•¦ã€‚å›½å¤–çš„æœåŠ¡å™¨è¿˜æ˜¯æœ‰ä¸€äº›å°ä½œç”¨çš„</p>]]></content>
    
    
    <categories>
      
      <category>homework</category>
      
    </categories>
    
    
    <tags>
      
      <tag>nothing</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Reading01-GUIçš„å†å²ä»¥åŠmacOSçª—å£</title>
    <link href="/posts/ed74d391.html"/>
    <url>/posts/ed74d391.html</url>
    
    <content type="html"><![CDATA[<p>æœ¬æ¬¡ä¸»è¦æƒ³æ€»ç»“ä¸€äº›ç›®å‰ä½¿ç”¨çš„GUIç•Œé¢ï¼Œä»¥åŠmacOSç•Œé¢ä¸­çš„çª—å£å’Œåº”ç”¨ç¨‹åºçš„æ¦‚å¿µã€‚é¦–å…ˆå¯¹äºä¸€ä¸ªæ–°çš„ä¸œè¥¿äº†è§£ä¹‹å‰æ˜¯é‡‡ç”¨æµè§ˆå¼•æ“ï¼Œä»ç™¾åº¦åˆ°Googleï¼Œæˆ–è€…æ–°ç”Ÿä»£çš„duckduckgoç­‰ç­‰ï¼›ä½†æ˜¯å› ä¸ºäº’è”ç½‘çš„åƒåœ¾å¤ªå¤šï¼Œè‡ªå·±å»å¯»æ‰¾çš„è¿‡ç¨‹ä¹Ÿæ˜¯æŒ‘æŒ‘æ‹£æ‹£çš„è¿‡ç¨‹ï¼Œç›´åˆ°å‘ç°wiki ç™¾ç§‘ã€‚</p><span id="more"></span><h2 id="0x01-å¼•è¨€ä»vscodeå¼•èµ·çš„macosåº”ç”¨å’Œçª—å£çš„ç–‘æƒ‘"><a class="markdownIt-Anchor" href="#0x01-å¼•è¨€ä»vscodeå¼•èµ·çš„macosåº”ç”¨å’Œçª—å£çš„ç–‘æƒ‘"></a> 0x01 å¼•è¨€ï¼šä»Vscodeå¼•èµ·çš„macOSåº”ç”¨å’Œçª—å£çš„ç–‘æƒ‘</h2><p>macOSçš„æ–‡æ¡£ï¼ˆDocumentï¼‰ã€çª—å£ï¼ˆwindowï¼‰å’Œåº”ç”¨ç¨‹åºï¼ˆapplicationï¼‰çš„å…³ç³»ä¹‹å‰ä¸€ç›´åˆ†ä¸æ¸…æ¥šï¼Œä½¿ç”¨çš„æ—¶å€™èƒ½æ„Ÿå—åˆ°å’Œwindowä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œä½†æ˜¯ä¸€ç›´ä¸çŸ¥é“åŒºåˆ«åœ¨å“ªé‡Œã€‚ç›´åˆ°ä½¿ç”¨vs codeå¯¹äºé»˜è®¤æ‰“å¼€æ–‡ä»¶å¤¹çš„ç–‘æƒ‘ã€‚</p><p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œæˆ‘çš„vs codeæ¯æ¬¡æ‰“å¼€çš„æ—¶å€™éƒ½ä¸ä¼šæ˜¾ç¤ºä¸Šæ¬¡æ‰“å¼€çš„æ–‡ä»¶å¤¹ï¼Œåœ¨ç½‘ä¸Šæœç´¢è®¾ç½®çš„æ—¶å€™çœ‹åˆ°å¯ä»¥åœ¨</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">windows.restore = <span class="hljs-string">&#x27;one&#x27;</span> <span class="hljs-regexp">//</span> å¯ä»¥æ‰“å¼€ä¸Šæ¬¡å…³é—­çš„æ–‡ä»¶å¤¹<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯å¦‚æœæˆ‘ä½¿ç”¨å·¦ä¸Šè§’çš„çº¢ â€™xâ€˜å…³é—­ï¼Œè¿˜æ˜¯ä¼šé€€å‡ºæ–‡ä»¶å¤¹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å…³é—­vs codeï¼ˆå› ä¸ºæŒ‡ç¤ºç¯è¿˜æ˜¯å¼€ç€ï¼‰ï¼›å¦‚æœä½¿ç”¨dockå†…çš„vs codeâ€™é€€å‡ºâ€˜åˆ™å¯ä»¥å…³é—­vs codeå¹¶åœ¨ä¸‹æ¬¡æ‰“å¼€çš„æ—¶å€™æ­£å¸¸å‡ºç°æ–‡ä»¶å¤¹</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c2l1ovs8j207l0bet8y.jpg" alt="7151660891268_.pic" /></p><h2 id="0x02-guiçš„å‘å±•å†å²"><a class="markdownIt-Anchor" href="#0x02-guiçš„å‘å±•å†å²"></a> 0x02 GUIçš„å‘å±•å†å²</h2><p>æˆ‘ä»¬ä½¿ç”¨é¼ æ ‡ï¼ˆmouseï¼‰è¿›è¡Œäº¤äº’ï¼Œä½¿ç”¨å•å‡»ï¼ˆclickï¼‰å›¾æ ‡å¯åŠ¨ç¨‹åºï¼Œä½¿ç”¨å›¾å½¢æ§ä»¶ï¼ˆgraphical controlï¼‰æ“ä½œå±å¹•ä¸Šçš„å„ç§çª—å£ï¼ˆwindowï¼‰ï¼Œè¿™äº›éƒ½å’Œå›¾å½¢æ“ä½œæœ‰å…³ï¼Œ<a href="https://zh.wikipedia.org/wiki/%E5%9B%BE%E5%BD%A2%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2">è¿™é‡Œå‚ç…§wikiç™¾ç§‘â€“GUI</a></p><h4 id="21-æ²¡æœ‰è®¡ç®—æœºçš„æ—¶ä»£"><a class="markdownIt-Anchor" href="#21-æ²¡æœ‰è®¡ç®—æœºçš„æ—¶ä»£"></a> 2.1 æ²¡æœ‰è®¡ç®—æœºçš„æ—¶ä»£</h4><p>1930å¹´ï¼ŒVannevar Bushé¦–æ¬¡ç¼–å†™ä¸€ç§ç§°ä¸º Memexçš„è®¾å¤‡ï¼Œè®¾æƒ³åƒä¸€ä¸ªæ¡Œå­ï¼Œä¸Šé¢æœ‰ä¸¤ä¸ªè§¦æ‘¸å±å›¾å½¢æ˜¾ç¤ºå™¨ã€ä¸€ä¸ªé”®ç›˜å’Œä¸€ä¸ªæ‰«æä»ªï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨ä¸è¶…é“¾æ¥çš„å·¥ä½œæ–¹å¼æ¥è®¿é—®æ‰€æœ‰çš„äººç±»çŸ¥è¯†ã€‚æ³¨æ„è¿™ä¸ªæ—¶å€™å¹¶æ²¡æœ‰æ•°å­—è®¡ç®—æœºï¼Œæ‰€ä»¥è¿™ä¸ªæƒ³æ³•å¹¶æ²¡æœ‰å¾—åˆ°ä»»ä½•è®¨è®ºï¼Œ<a href="https://www.ruanyifeng.com/blog/2007/11/memex.html">ã€Šä¿¡æ¯æœºå™¨Memexã€‹â€“é˜®ä¸€å³°</a></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c2zd6ohtj20b407t74m.jpg" alt="bg2007112201" /></p><p>è¿™ç§æœºå™¨å†…éƒ¨ç”¨å¾®ç¼©èƒ¶å·ï¼ˆmicrofileï¼‰å­˜å‚¨ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨ç¿»æ‹ï¼Œå¯ä»¥ä¸æ–­å¾€é‡Œé¢æ·»åŠ æ–°çš„ä¿¡æ¯ï¼›æ¡Œé¢ä¸Šæœ‰é˜…è¯»å±ï¼Œç”¨æ¥æ”¾å¤§é˜…è¯»å¾®ç¼©èƒ¶å·ï¼›è¿˜æœ‰è®¸å¤šä¸ªæŒ‰é’®ï¼Œæ¯ä¸€ä¸ªæŒ‰é’®ä»£è¡¨ä¸€ä¸ªä¸»é¢˜ï¼Œåªè¦æŒ‰ä¸€ä¸‹ï¼Œç›¸åº”çš„å¾®ç¼©èƒ¶å·å°±ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚æ¯ä¸€ä¸ªèƒ¶å·å†…éƒ¨è¿˜è®°å½•ç€ç›¸å…³çš„å…¶ä»–èƒ¶å·çš„ç¼–å·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åˆ‡æ¢ï¼Œå½¢æˆåŒä¸»é¢˜é˜…è¯»</p><h4 id="22-douglas-englebart-è¯ç”ŸåˆæœŸ"><a class="markdownIt-Anchor" href="#22-douglas-englebart-è¯ç”ŸåˆæœŸ"></a> 2.2 Douglas Englebart â€“  è¯ç”ŸåˆæœŸ</h4><p>1968å¹´ï¼Œè¢«ç§°ä¸ºGUIä¹‹çˆ¶çš„Douglas Englebart ï¼ˆé“æ ¼æ‹‰æ–¯Â·æ©æ ¼å°”å·´ç‰¹ï¼‰åœ¨NACAï¼ˆNASAå‰èº«ï¼‰åœ¨æŸäº›å¼€è½¦ä¸Šç­çš„æ—¥å­EMOçš„æ—¶å€™çªç„¶æƒ³åˆ°ï¼Œä½œä¸ºä¸€åå·¥ç¨‹å¸ˆï¼Œä»–çœŸæ­£çš„ä½¿å‘½ä¸æ˜¯ä»äº‹å¯èƒ½åªä¼šè®©å°‘æ•°äººå—ç›Šçš„å°é¡¹ç›®ã€‚å› æ­¤å›é¡¾å¸ƒä»€çš„æ–‡ç« æ¥æ€è€ƒå¦‚ä½•å»ºé€ ä¸€å°å¯ä»¥å¢å¼ºäººç±»æ™ºåŠ›çš„æœºå™¨ï¼Œåœ¨æˆ˜äº‰æ—¶æœŸæ‹…ä»»é›·è¾¾æ“ä½œå‘˜ï¼Œä¸»è¦è®¾æƒ³å›´ç»•é˜´æå°„çº¿ç®¡æ„å»ºæ˜¾ç¤ºç³»ç»Ÿï¼›åœ¨1962å¹´åœ¨ä¸€ç¯‡<a href="http://www.invisiblerevolution.net/engelbart/full_62_paper_augm_hum_int.html">ã€ŠAUGMENTING HUMAN INTELLECT: A Conceptual Frameworkã€‹</a>æå‡ºè®¤ä¸ºæ•°å­—è®¡ç®—æœºå¯ä»¥æä¾›æœ€å¿«çš„æ–¹æ³•æ¥æé«˜ä¸€ä¸ªäººå¤„ç†å¤æ‚é—®é¢˜æƒ…å†µçš„èƒ½åŠ›ï¼Œè·å¾—ç†è§£ä»¥é€‚åº”ä»–çš„ç‰¹æ®Šéœ€æ±‚ï¼Œå¹¶å¾—åˆ°é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä»–ä¹Ÿè®¾æƒ³<strong>è®¡ç®—æœºä¸æ˜¯äººç±»æ™ºåŠ›çš„æ›¿ä»£å“ï¼Œè€Œæ˜¯å¢å¼ºæ™ºåŠ›çš„å·¥å…·</strong>ï¼Œæ¯”å¦‚å»ºç­‘å¸ˆä½¿ç”¨ä½¿ç”¨CADæ¥è®¾è®¡å»ºç­‘ç‰©ï¼Œè€Œä¸æ˜¯æœºå™¨è‡ªå·±è®¾è®¡å»ºç­‘ç‰©</p><p>è¿™ä¸ªæ—¶å€™æ—¶é—´ç‚¹è¿˜æ˜¯1962å¹´ï¼Œäººä»¬é‡‡ç”¨çš„è®¡ç®—æœºçš„ä½“ç§¯éå¸¸å·¨å¤§ï¼Œé€šå¸¸ç”¨æˆ·ä¼šä½¿ç”¨æ‰“å­”çº¸å¸¦å’Œä»–ä»¬è¿›è¡Œäº¤äº’ï¼Œç„¶åè®¡ç®—æœºåœ¨æ•°å°æ—¶æˆ–è€…æ•°å¤©ä¹‹åè¾“å‡ºç»“æœã€‚ä½†æ˜¯äººä»¬çš„æƒ³è±¡åŠ›å¹¶ä¸ä¼šæ‹˜æŸä¸æ—¶ä»£ï¼</p><p>å› ä¸ºè¿™æ˜¯ä¸€é¡¹å…¨æ–°çš„æŠ€æœ¯ï¼ŒEnglebartçš„æ¼”ç¤ºä½¿ç”¨ç”µè§†æ‘„åƒæœºå¯¹å‡†ä»–çš„è„¸ã€æ‰‹å’Œæ­£åœ¨è§‚çœ‹çš„å°æ˜¾ç¤ºå±ï¼Œç”¨æ¥ç»™äººä»¬å±•ç¤ºä¸€äº›å…¨æ–°çš„æ¦‚å¿µã€‚è¿™ä¸ªæ˜¾ç¤ºç³»ç»ŸåŸºäºçŸ¢é‡å›¾å½¢æŠ€æœ¯ï¼Œå¯ä»¥åœ¨åŒä¸€å±å¹•ä¸Šæ˜¾ç¤ºæ–‡æœ¬å’Œå®çº¿ï¼Œå—é™äºå†…å­˜å¤§å°ï¼Œå®ƒåªèƒ½æ˜¾ç¤ºå¤§å†™å­—æ¯ã€‚Englebarté‡‡ç”¨çš„äº¤äº’å·¥å…·åŒ…æ‹¬ï¼šä¸€ä¸ªæ ‡å‡†æ‰“å­—æœºé”®ç›˜ã€ä¸€ä¸ªäº”é”®â€œå’Œå¼¦é”®ç›˜â€ä»¥åŠä¸€ä¸ªé•¿æ–¹å½¢ä¸‰ä¸ªæŒ‰é’®çš„ç›’å­</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c30qsspqj208x06s3yo.jpg" alt="2-NLSdisplay"  /><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c3e1z0rzj20b405z3yq.jpg" alt="3-NLSmouse" /></p><blockquote><p>è¿™ä¸ªé•¿æ–¹å½¢çš„ç›’å­ã€ç”¨ç€é•¿ç”µçº¿è¿æ¥åˆ°è®¡ç®—æœºï¼Œå°±æ˜¯é¼ æ ‡ï¼ˆmouseï¼‰ï¼›æ²¡æœ‰äººçŸ¥é“è°å…ˆå«å®ƒé¼ æ ‡çš„ï¼Œä½†æ˜¯å®ƒåœ¨å½“æ—¶å‡ºç°ï¼Œå¹¶ä¸€ç›´ä¿ç•™åˆ°ç°åœ¨ï¼Œåœ¨æœºæ¢°ä¸Šï¼Œå®ƒä¸ç°ä»£é¼ æ ‡ç•¥æœ‰ä¸åŒï¼Œå› ä¸ºè¿æ¥åˆ°å†…éƒ¨ç”µä½å™¨çš„ä¸¤ä¸ªåœ†å½¢è½®å­ç›´æ¥åœ¨æ¡Œé¢ä¸Šæ»šåŠ¨ï¼Œè€Œä¸æ˜¯ç”±å•ä¸ªé¼ æ ‡çƒä¸æ»šè½®æ‘©æ“¦æ¥æ“çºµã€‚ç„¶è€Œï¼Œå¯¹äºæœ€ç»ˆç”¨æˆ·æ¥è¯´ï¼Œå®ƒçš„æ“ä½œå‡ ä¹ä¸ç°ä»£é¼ æ ‡ç›¸åŒã€‚å…¶ä»–è¾“å…¥è®¾å¤‡ä¹Ÿæ›¾å°è¯•è¿‡ï¼ˆå¦‚è§¦æ‘¸å±å’Œå…‰ç¬”ï¼‰ï¼Œä½†ç”¨æˆ·æµ‹è¯•å‘ç°é¼ æ ‡æ˜¯æ“ä½œå±å¹•å…‰æ ‡æœ€è‡ªç„¶çš„æ–¹å¼ã€‚ä»Šå¤©ä»ç„¶å¦‚æ­¤ã€‚</p><p>é¼ æ ‡çš„å‘æ˜çš„ä¼´ç”Ÿ â€“ æŒ‡é’ˆä¹Ÿå‡ºç°äº†ï¼Œåœ¨å½“æ—¶æ¼”ç¤ºçš„ç³»ç»Ÿä¸­æŒ‡é’ˆæ˜¯ä¸€ä¸ªç®­å¤´ï¼Œå¤§çº¦æ˜¯å•ä¸ªå­—ç¬¦çš„é«˜åº¦ï¼ŒæŒ‡å‘æ­£ä¸Šæ–¹ï¼ŒæŒ‡é’ˆåœ¨æœ€åˆè¢«ç§°ä¸ºâ€˜Bugâ€™ã€‚ä½†æ˜¯è¿™ä¸ªç§°å‘¼å¹¶æ²¡æœ‰ä¼ æ‰¿ä¸‹æ¥ï¼Œè€Œæ˜¯pointer</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c3e7lmaaj20ci08ht97.jpg" alt="4-NLSgui" /></p><p>åœ¨å½“æ—¶çš„æ¼”ç¤ºä¸­åŒ…æ‹¬ï¼šè¶…æ–‡æœ¬è¿æ¥ï¼ˆhypertext linkingï¼‰ã€å…¨å±æ–‡æ¡£ç¼–è¾‘ï¼ˆfull screen document editingï¼‰ã€ä¸Šä¸‹æ–‡æ“ä½œï¼ˆcontext- sensitive helpï¼‰ã€ç½‘ç»œæ–‡æ¡£ååŒï¼ˆnetworked document collaborationï¼‰ã€ç”µå­é‚®ä»¶ï¼ˆemailï¼‰ã€å³æ—¶æ¶ˆæ¯ï¼ˆinstant messageï¼‰ã€è§†é¢‘ä¼šè®®ï¼ˆvideo meetingï¼‰ï¼›ä½†æ˜¯ç”±äºè§†é¢‘ç³»ç»Ÿçš„æ˜¾ç¤ºå¾ˆéš¾åˆ†è¾¨å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p><p>å¯æƒœæ²¡æœ‰é’±æ¥å®ç°å•†ä¸šåŒ–</p><h4 id="23-parc-æ–½ä¹xerox-å¤å°æœºå…¬å¸çš„è‡ªæ•‘"><a class="markdownIt-Anchor" href="#23-parc-æ–½ä¹xerox-å¤å°æœºå…¬å¸çš„è‡ªæ•‘"></a> 2.3 PARC â€“ æ–½ä¹ï¼ˆXeroxï¼‰ å¤å°æœºå…¬å¸çš„è‡ªæ•‘</h4><p>å½“å¤å°æœºå‚å•†çœ‹åˆ°äº†computerå¸¦æ¥çš„ç”µå­æ–‡æ¡£è¿›è¡Œåä½œåˆ›ä½œçš„æ—¶å€™ï¼Œä¼šæ‹…å¿ƒè‡ªå·±çš„å…¬å¸ä¼šåœ¨æ— çº¸åŒ–çš„è¿›ç¨‹ä¸­ä¸å¯é¿å…çš„æ¶ˆäº¡ï¼Œè¿™ä¸ªæ—¶å€™ä»–ä»¬éœ€è¦åšçš„æ˜¯ç¡®ä¿è‡ªå·±æ§åˆ¶è¿™é¡¹æ–°çš„æŠ€æœ¯ï¼Œå› æ­¤åœ¨1970å¹´æˆç«‹äº†PARCï¼ˆå¸•æ´›é˜¿å°”æ‰˜ç ”ç©¶ä¸­å¿ƒï¼‰ï¼Œæ¥ä½¿ç”¨äº”å¹´çš„æ—¶é—´è‡ªç”±çš„åšæ„Ÿå…´è¶£çš„ä»»ä½•äº‹æƒ…</p><p>ç¬¬ä¸€ä»¶å‘æ˜æ˜¯æ¿€å…‰æ‰“å°æœºï¼Œæ˜¯å¤å°æœºä¸šåŠ¡çš„è‡ªç„¶è¡¥å……ï¼Œå› ä¸ºæ‰“å°éœ€è¦ä¸€ç§æ›´å›¾å½¢åŒ–çš„æ–¹å¼æ¥è®©è®¡ç®—æœºå¼€å§‹å‡†å¤‡æ–‡ä»¶ï¼Œå› ä¸ºå½“æ—¶æ²¡æœ‰è¿™æ ·çš„è®¡ç®—æœºï¼Œå®ƒä»¬æ–¹é¢æ¥è‡ªå·±çš„è®¡ç®—æœºç§°ä¸ºALTOï¼Œå®ƒçš„æ˜¾ç¤ºå±çš„ç•Œé¢ä¸º606*808ï¼Œæ¯ä¸ªåƒç´ éƒ½å¯ä»¥ç‹¬ç«‹æ‰“å¼€å’Œå…³é—­ï¼Œä½†æ˜¯åªèƒ½æ˜¾ç¤ºå›ºå®šçš„æ–‡æœ¬å­—ç¬¦ã€‚ä½†æ˜¯å…·æœ‰ä¸€ä¸ªé”®ç›˜å’Œæ›´åŠ ç°ä»£åŒ–çš„Englebarté¼ æ ‡ï¼Œè¿™ä¸ªé¼ æ ‡å…·æœ‰ä¸‰ä¸ªæŒ‰é’®ï¼Œæœ¬èº«ä¹Ÿå˜æˆäº†ä½å›¾å›¾åƒï¼Œå¹¶é¦–æ¬¡ä½¿ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„å¯¹è§’çº¿ç®­å¤´å½¢çŠ¶ï¼Œå¹¶å¯ä»¥æ ¹æ®æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡å˜æˆå…¶ä»–å½¢çŠ¶ã€‚Altoä¸Šè½¯ä»¶å¼€å§‹éå¸¸ç²—ç³™ï¼ŒåŒ…æ‹¬æ–‡ä»¶ç®¡ç†å™¨ï¼ˆNorton commanderï¼‰ã€å›¾å½¢æ–‡å­—å¤„ç†å™¨ï¼ˆBravoï¼ŒDOSçš„wordå‰èº«ï¼‰ã€ä½å›¾å›¾å½¢ç¼–è¾‘å™¨ï¼ˆç±»ä¼¼paintï¼‰ï¼›ä½†æ˜¯è¿™äº›ä¸åŒçš„åº”ç”¨ç¨‹åºéœ€è¦ä¸€ä¸ªä¸€è‡´çš„ç”¨æˆ·ç•Œé¢ï¼Œå› æ­¤å®ƒä»¬å‘æ˜äº†Smalltalkï¼Œç¬¬ä¸€ä¸ªç°ä»£GUI</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c62i0t4jg209d0ds74e.gif" alt="6-AltoFM" /></p><p>ç¬¬äºŒä»¶ï¼Œsmalltalkæ˜¯ä¸€ç§æ˜“äºä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€å’Œå¼€å‘ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ç®—å¾—ä¸Šæ˜¯ç¬¬ç¬¬ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œå…¶ä¸­ç¨‹åºä»£ç å’Œæ•°æ®å¯ä»¥å°è£…åˆ°ç§°ä¸ºå¯¹è±¡çš„å•å…ƒä¸­æ¥è¿›è¡Œå¤ç”¨è€Œä¸ç”¨äº†è§£å…¶ä¸­å®ç°ç»†èŠ‚ï¼Œåœ¨1974å¹´å…·æœ‰é›å½¢å¹¶ä¸ä¸æ–­å®Œå–„ï¼ŒSmalltalkæ˜¯ä¸€ä¸ªå›¾å½¢å¼€å‘ç¯å¢ƒï¼Œç±»ä¼¼äºwindowså’Œvisual studioä¹‹é—´çš„æ„Ÿè§‰ã€‚Smalltalk ä¸­çš„å„ä¸ªçª—å£éƒ½åŒ…å«åœ¨å›¾å½¢è¾¹æ¡†ä¸­ï¼Œå¹¶åœ¨å…¶ä¸‹æ–¹èƒŒæ™¯çš„ç°è‰²å›¾æ¡ˆä¸­æ˜¾å¾—æ ¼å¤–é†’ç›®ã€‚ä»–ä»¬æ¯ä¸ªäººåœ¨æ¯ä¸ªçª—å£çš„é¡¶è¡Œéƒ½æœ‰ä¸€ä¸ªæ ‡é¢˜æ ï¼Œå¯ç”¨äºè¯†åˆ«çª—å£å¹¶åœ¨å±å¹•ä¸Šç§»åŠ¨å®ƒã€‚ä¸ BeOS ç±»ä¼¼ï¼Œæ ‡é¢˜æ å¹¶æ²¡æœ‰å»¶ä¼¸åˆ°çª—å£çš„æ•´ä¸ªé•¿åº¦ï¼Œè€Œæ˜¯ä»å·¦ä¸Šè§’å¼€å§‹ï¼Œä»…å»¶ä¼¸åˆ°æ ‡é¢˜æœ¬èº«ã€‚çª—å£å¯ä»¥ä¸å±å¹•ä¸Šçš„å…¶ä»–çª—å£é‡å ï¼Œå¹¶ä¸”é€‰å®šçš„çª—å£ä¼šå°†è‡ªèº«ç§»åŠ¨åˆ°â€œå †æ ˆâ€çš„é¡¶éƒ¨ã€‚æ­¤æ—¶è¿˜å‘æ˜äº†â€œå›¾æ ‡â€çš„æ¦‚å¿µâ€”â€”ç¨‹åºæˆ–æ–‡æ¡£çš„å°å›¾æ ‡è¡¨ç¤ºï¼Œå¯ä»¥å•å‡»ä»¥è¿è¡Œæˆ–æ“ä½œå®ƒä»¬ã€‚å¼¹å‡ºèœå•ä¹Ÿæ˜¯åŒæ—¶å‘æ˜çš„â€”â€”ç”¨æˆ·å•å‡»é¼ æ ‡æŒ‰é’®ä¹‹ä¸€å¹¶åˆ†å±‚ï¼ŒåŸºäºæ‰‹å¤´ä»»åŠ¡çš„å›¾å½¢èœå•å°†å‡ºç°åœ¨é¼ æ ‡å…‰æ ‡çš„æœ€åä½ç½®ã€‚é¦–æ¬¡å‡ºç°çš„è¿˜æœ‰æ»šåŠ¨æ¡ã€å•é€‰æŒ‰é’®å’Œå¯¹è¯æ¡†ã€‚</p><p><img src="https://cdn.arstechnica.net/wp-content/uploads/archive/images/gui/7-AltoST.jpg" alt="7-AltoST" /></p><p>ç¬¬ä¸‰ä»¶ä¾¿æ˜¯Xerox star 8010æ–‡æ¡£ï¼ŒSmalltalkæ˜¯å¦‚æ­¤ä¼˜ç¾ï¼Œä½†æ˜¯æ–½ä¹å…¬å¸ç®¡ç†å±‚å¹¶æ²¡æœ‰å…è®¸å…¶ä½œä¸ºå•†ä¸šäº§å“æ¨é”€ï¼Œè€Œæ˜¯åœ¨1981å¹´æ¨å‡ºäº†ALTOç²¾ç®€ç‰ˆAltoï¼Œæœ€é‡è¦çš„æ˜¯å–æ¶ˆäº†é‡å çª—å£çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¯¹äºå…¬ä¼—æ¥è¯´å¤ªæ··ä¹±äº†ã€‚ä½†æ˜¯å¤ªæ™šäº†ï¼Œå› ä¸ºApple Computer.Incåœ¨1976å¹´åˆ›ç«‹.</p><p><img src="https://cdn.arstechnica.net/wp-content/uploads/archive/images/gui/8-Star.jpg" alt="8-Star" /></p><h4 id="24-applesteven-jobs-æ¨åŠ¨å•†ä¸šåŒ–çš„å…¸èŒƒä»lisaåˆ°macintosh"><a class="markdownIt-Anchor" href="#24-applesteven-jobs-æ¨åŠ¨å•†ä¸šåŒ–çš„å…¸èŒƒä»lisaåˆ°macintosh"></a> 2.4 Apple/Steven Jobs - - æ¨åŠ¨å•†ä¸šåŒ–çš„å…¸èŒƒï¼Œä»Lisaåˆ°Macintosh</h4><p>1976å¹´ï¼ŒSteve Jobså’ŒSteve Woznlakåœ¨è½¦åº“å†…åˆ›ç«‹ä¸€å®¶Apple Computerçš„å°å‹åˆ›ä¸šå…¬å¸ï¼Œåœ¨æ¨å‡ºé¥±å—æ¬¢è¿å…·æœ‰ä¼ ç»Ÿå‘½ä»¤è¡Œç•Œé¢çš„Apple IIï¼Œå› ä¸ºå…¶å¹´è½»çš„å±æ€§ï¼Œèµ„é‡‘å……è£•åŒæ—¶æ„¿æ„å†’é™©ï¼Œåœ¨ç»§æ‰¿è¯¸å¤šXerox PARCå·¥ç¨‹å¸ˆä¹‹åï¼ŒAppleçš„ä¸‹ä¸€ä»£è®¡ç®—æœºLisaï¼ˆLocal Integrated Software Architectureï¼‰ä¹Ÿå› æ­¤æ”¹å˜ï¼Œä»å•†ä¸šç”¨é€”çš„ä¼ ç»ŸåŸºäºæ–‡æœ¬çš„å‘½ä»¤è¡Œè®¡ç®—æœºç›´åˆ°è½¬å˜ä¸ºç¬¬ä¸€å°é‡‡ç”¨GUIå’Œé¼ æ ‡çš„ä¸ªäººç”µè„‘ã€‚Lisa ç•Œé¢çš„è®¸å¤šä¸åŒåŸå‹éƒ½åœ¨ Apple ]IIä¸Šè¿›è¡Œäº†æ¨¡æ‹Ÿï¼ŒåŒ…æ‹¬ä¸€ä¸ªåŸºäºä»»åŠ¡çš„ç•Œé¢è¢«ç§°ä¸ºâ€œäºŒåä¸ªé—®é¢˜â€ï¼Œå› ä¸ºå®ƒä¼¼ä¹éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½è®©è®¡ç®—æœºåšä»»ä½•äº‹æƒ…ï¼Œä»¥åŠä¸€ä¸ªç±»ä¼¼çš„å››åˆ—æ–‡ä»¶æµè§ˆå™¨ä¸ Smalltalk ä¸€èµ·å‡ºç°çš„ï¼Œåæ¥åœ¨ NeXTstep å’Œ Mac OSX ä¸­é‡æ–°å‡ºç°ã€‚Lisa å›¢é˜Ÿæœ€ç»ˆç¡®å®šäº†ä¸€ä¸ªåŸºäºå›¾æ ‡çš„ç•Œé¢ï¼Œå…¶ä¸­æ¯ä¸ªå›¾æ ‡éƒ½è¡¨ç¤ºä¸€ä¸ªæ–‡æ¡£æˆ–ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå¹¶å¼€å‘äº†ç¬¬ä¸€ä¸ªä¸‹æ‹‰èœå•æ ï¼Œæ‰€æœ‰èœå•éƒ½å‡ºç°åœ¨å±å¹•çš„æœ€é¡¶è¡Œã€‚</p><p>LISAä¸­åˆ›æ–°åŒ…æ‹¬ï¼Œé€‰å®šèœå•é¡¹æ—è¾¹æ˜¾ç¤ºå¤é€‰æ ‡è®°ã€é”®ç›˜å¿«æ·é”®ã€å›ºå®šé«˜åº¦çš„æ»šåŠ¨æ¡ã€åƒåœ¾æ¡¶ã€ç°æ˜¾çš„èœå•ã€‚ä½†æ˜¯ä¹Ÿå°†é¼ æ ‡ä»ä¸‰ä¸ªé”®ç®€åŒ–ç§°ä¸ºä¸€ä¸ªé”®ï¼Œæ‰€ä»¥å¼•å…¥åŒå‡»çš„æ¦‚å¿µã€‚åŒæ—¶ä¹Ÿæå‡ºå›¾æ ‡æ¥ä»£æ›¿æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨åˆ†å±‚ç›®å½•ç»“æ„æµè§ˆè¿™äº›æ–‡ä»¶</p><p><img src="https://cdn.arstechnica.net/wp-content/uploads/archive/images/gui/9-Lisamockup1.gif" alt="9-Lisamockup1" /></p><p>1983å¹´å‘å¸ƒçš„Lisaå› ä¸ºé«˜æ˜‚çš„å”®ä»·å¹¶æ²¡æœ‰æˆåŠŸï¼Œåœ¨1984å¹´ï¼ˆä¹Ÿæ˜¯IBMè¢«æ‰“å€’çš„ä¸€å¹´ï¼‰ï¼Œæ¨å‡ºäº†Macintoshé¡¹ç›®é…å¤‡9è‹±å¯¸ã€128KBã€æ²¡æœ‰å¤šä»»åŠ¡å¤„ç†ã€ä½æˆæœ¬çš„å›¾å½¢è®¡ç®—æœºï¼Œå¹¶æˆåŠŸå®ç°å•†ä¸šåŒ–ã€‚åœ¨1984å¹´åº•é”€é‡å¼€å§‹ä¸‹é™ã€ä»¥åŠå…¶ä»–é—®é¢˜ä¹”å¸ƒæ–¯åœ¨1985å¹´9æœˆ17æ—¥ç¦»å¼€è‹¹æœï¼Œå‰å¾€NeXT</p><blockquote><p>Macintoshçš„åç§°æ¥è‡ªäºï¼Œå…¬å¸å‘˜å·¥å–œæ¬¢çš„è‹¹æœå“ç§ï¼ˆçœŸçš„è‹¹æœï¼‰ä¸ºmcIntoshï¼Œä½†æ˜¯æœ‰ä¸€å®¶éŸ³å“å…¬å¸ä¸ºMcIntoshï¼Œå› æ­¤æ‹¼ä¸ºMacintosh</p></blockquote><p><img src="https://cdn.arstechnica.net/wp-content/uploads/archive/images/gui/11-Mac1.gif" alt="11-Mac1" /></p><p>1988 å¹´å‘å¸ƒäº† NeXTSTEPï¼Œè¿™æ˜¯å²è’‚å¤«Â·ä¹”å¸ƒæ–¯çš„ NeXT è®¡ç®—æœºçš„æ–° GUI å’Œæ“ä½œç³»ç»Ÿï¼Œè¿™æ˜¯ä»–åœ¨ 1985 å¹´ç¦»å¼€ Apple åçš„ç¬¬ä¸€ä¸ªé‡å¤§é¡¹ç›®ã€‚NeXTSTEP ä¸ºå…¶æ‰€æœ‰ GUI ç»„ä»¶å¼•å…¥äº†é”åˆ©çš„ 3D æ–œé¢å¤–è§‚ï¼Œæ˜¯ç¬¬ä¸€ä¸ªä½¿ç”¨â€œXâ€ç¬¦å·è¡¨ç¤ºå…³é—­çª—å£å°éƒ¨ä»¶ï¼Œå¹¶åœ¨å·¦ä¸Šè§’å¼•å…¥äº†å‚ç›´èœå•æ¡çš„æƒ³æ³•ï¼Œä¹Ÿå¯ä»¥åœ¨ä»»ä½•æ—¶å€™â€œæ’•æ‰â€ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥éšæ—¶ç¦»å¼€ç‰¹å®šèœå•ç‚¹åœ¨å±å¹•ä¸Šã€‚NeXTSTEP ä¹Ÿæœ‰ä¸€ä¸ªä½äºå±å¹•ä»»æ„ä¸€ä¾§çš„ Dockï¼ˆä½†é»˜è®¤ä½äºå³ä¾§ï¼‰ã€‚</p><p><img src="https://cdn.arstechnica.net/wp-content/uploads/archive/images/gui/21-next.gif" alt="21-next" /></p><h4 id="25-windows-æ›´åŠ å•†ä¸šåŒ–çš„guiæ¨å¹¿"><a class="markdownIt-Anchor" href="#25-windows-æ›´åŠ å•†ä¸šåŒ–çš„guiæ¨å¹¿"></a> 2.5 Windows - - æ›´åŠ å•†ä¸šåŒ–çš„GUIæ¨å¹¿</h4><p>1985å¹´çš„windows1.0ç‰ˆæœ¬ï¼Œæ¯”å°”ç›–èŒ¨æ¥æºäºVisiOnã€Dosçš„wordçš„äº¤å‰ï¼ŒåŒ…æ‹¬å½©è‰²ç•Œé¢ã€å…·æœ‰å¸¸è§çš„GUIç»„ä»¶æ»šåŠ¨æ¡ã€çª—å£æ§ä»¶å°éƒ¨ä»¶å’Œèœå•ï¼›ä½†æ˜¯ä¸æƒ³LIsaæˆ–è€…Macintoshä¸Šçš„å•ä¸ªèœå•æ ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½æœ‰è‡ªå·±çš„èœå•æ ï¼›åŒæ—¶é‡‡ç”¨å¹³é“ºçš„çª—å£è€Œä¸æ˜¯å¯ä»¥é‡å çš„çª—å£ï¼Œä½†æ˜¯åç»­ä¼šæ”¹è¿›</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c4x8iqzdg20hs09q747.gif" alt="14-win101" /></p><p>1987å¹´ï¼ŒWindows2.0ï¼Œé‡‡ç”¨ç°æœ‰çš„ä¼ ç»Ÿçš„é‡å æ–¹æ³•ï¼Œå¢åŠ äº†æœ€å¤§åŒ–å’Œæœ€å°åŒ–çª—å£ï¼Œä¹Ÿç”±æ­¤ä¸Appleå‘ç”Ÿä¸“åˆ©å†²çª</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c4yhvsy5g20hs0dcjrf.gif" alt="19-win2" /></p><p>1990çš„3.0ã€1992å¹´çš„3.1ç‰ˆæœ¬çš„å‘å¸ƒï¼Œä¸€è‡´åˆ°windows95çš„å·©å›ºå…¶åœ¨GUIæ“ä½œç³»ç»Ÿçš„é¢†å…ˆåœ°ä½</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c528sqh3g20m80gognt.gif" alt="25-win95" /></p><h4 id="26-others"><a class="markdownIt-Anchor" href="#26-others"></a> 2.6 others</h4><p>GUIç•Œé¢ä¹ŸåŒ…æ‹¬å…¶ä»–å‚å•†çš„åŠªåŠ›ï¼Œæ¯”å¦‚GEMã€Amiga Workbenchã€GEOSã€Acornç­‰ç­‰</p><h2 id="0x03-macä¸­çš„çª—å£-æ–‡æ¡£çš„æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#0x03-macä¸­çš„çª—å£-æ–‡æ¡£çš„æ¦‚å¿µ"></a> 0x03 Macä¸­çš„çª—å£ã€æ–‡æ¡£çš„æ¦‚å¿µ</h2><p><a href="https://www.zhihu.com/question/21143701/answer/2521552530">å‚è€ƒ</a></p><p>åœ¨GUIçš„è®¾è®¡ä¸­é¢å‘ç”¨æˆ·çš„æ¦‚å¿µæœ‰ä¸‰ä¸ªï¼šåº”ç”¨ã€çª—å£å’Œæ–‡æ¡£ã€‚åœ¨ä¸‰è€…ä¹‹é—´çš„å…³ç³»å¯ä»¥åˆ†ä¸ºMDIã€SDIå’ŒTDI</p><ul><li>MDIï¼ˆmultiple document interfaceï¼‰ï¼Œå¤šä»½æ–‡æ¡£åŒ…å«åœ¨çª—å£ä¸‹ï¼Œå¤šä¸ªçª—å£ä¿å­˜åœ¨åŒä¸€ä¸ªåº”ç”¨</li><li>SDIï¼ˆSingle Document interfaceï¼‰ï¼Œæ¯ä¸ªçª—å£éƒ½æ˜¯ç‹¬ç«‹çš„åº”ç”¨ï¼Œç”±OSè‡ªåŠ¨è°ƒåº¦ã€‚è¿™ä¹Ÿæ˜¯windowsçš„é¦–åˆ›ï¼Œå› æ­¤<strong>ä¸€ä¸ªçª—å£å°±æ˜¯ä¸€ä»½åº”ç”¨ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–‡æ¡£</strong></li><li>TDIï¼ˆTab document interfaceï¼‰æ¯”å¦‚chromeï¼Œæœ¯è¯­ä¸¤è€…çš„æ··åˆä½“</li></ul><p>æ¯ä¸ªåº”ç”¨å¯ä»¥æ‰“å¼€ä¸€ä¸ªæˆ–è€…å¤šä¸ªçª—å£ï¼Œæ¯ä¸ªçª—å£å¯ä»¥æ‰“å¼€ä¸€ä»½æˆ–è€…å¤šä»½æ–‡æ¡£ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c59t7mkwj21h70s7442.jpg" alt="image-20220819161527184" /></p><p>è¿™ä¸ªç®€å•çš„æ¦‚å¿µåœ¨åªæœ‰128KBçš„Macintoshä¸Šè¿™ä¸€å±‚æŠ½è±¡å¹¶ä¸å®¹æ˜“ï¼Œè¿™æ ·å¤šä¸ªçª—å£çš„å…±å­˜å¯èƒ½éœ€è¦å¤šä¸ªåº”ç”¨çš„åŒæ­¥ï¼Œå› ä¸ºå½“æ—¶çš„å†…å­˜åªèƒ½è·‘ä¸€ä¸ªå‰å°ç¨‹åºï¼Œå› æ­¤éœ€è¦ä¼ è¾¾ç»™ç”¨æˆ·</p><ol><li>ä¸€ä¸ªåº”ç”¨åœ¨é€»è¾‘ä¸Šåªèƒ½æ‰“å¼€ä¸€ä¸ªçª—å£</li><li>ç”¨æˆ·åº”å½“å°½å¯èƒ½çš„åœç•™åœ¨å•ä¸ªé¡µé¢</li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c5e9i6tmj20y80ps752.jpg" alt="img" /></p><p>æ‰€ä»¥Macç³»ç»Ÿçš„çº¢xå¯¹åº”çš„æ˜¯<strong>å…³é—­ç°æœ‰çš„çª—å£ï¼Œä»¥åŠå…¶æ‰“å¼€çš„æ–‡æ¡£ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰é€€å‡ºåº”ç”¨</strong>ï¼Œé€€å‡ºçš„è¯å¯ä»¥ç”¨docké‡Œé¢çš„é€€å‡ºæˆ–è€…ä½¿ç”¨â€œcommand+Qâ€</p><p>è€Œwindowsä»£è¡¨çš„æ“ä½œç³»ç»Ÿè®©åº”ç”¨å¯ä»¥å®ç°å¤šå¼€ï¼Œé€æ¸å¼±åŒ–äº†çª—å£çš„æ¦‚å¿µï¼Œæ¯ä»½æ–‡æ¡£å¯¹åº”æ¯ä¸ªappï¼Œå…³é—­æ–‡æ¡£ä¹Ÿå°±æ˜¯å…³é—­å¯¹åº”çš„app</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c5sb4zb6j219c0f4js6.jpg" alt="img" /></p><p>æ›´å¯¹åº”çš„ï¼Œåœ¨iosæˆ–è€…androidã€harmonyä¸­å·²ç»å®Œå…¨å¤±å»äº†æ–‡æ¡£çš„æ¦‚å¿µï¼Œåªå­˜åœ¨åº”ç”¨å’Œçª—å£ã€‚</p><h2 id="0x04-ä½¿ç”¨æ³¨æ„"><a class="markdownIt-Anchor" href="#0x04-ä½¿ç”¨æ³¨æ„"></a> 0x04 ä½¿ç”¨æ³¨æ„</h2><p>macOSä¸­çª—å£çš„æ¦‚å¿µç”±å†…å­˜å’Œç®—åŠ›é™åˆ¶è€Œè¯ç”Ÿï¼Œä¹Ÿå› ç°æœ‰GUIå‘å±•è€ŒèŒå£®ï¼Œåœ¨ä½¿ç”¨ä¸­æ³¨æ„åŒºåˆ†applicationå’Œwindowçš„åŒºåˆ«ï¼Œå…³é—­windowä½¿ç”¨çº¢â€˜xâ€™ã€é€€å‡ºåº”ç”¨ä½¿ç”¨â€˜command+Qâ€™ï¼›æˆ–è®¸è¿™å°±æ˜¯window- serverå†…å­˜ä¸ºä»€ä¹ˆè¿™ä¹ˆé«˜çš„åŸå› å§</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h5c5x47nh1j20pc01swef.jpg" alt="image-20220819163754181" /></p><p><a href="https://jamesfriend.com.au/pce-js/">1984å¹´Macintoshæ¨¡æ‹Ÿ</a></p><h4 id="å‚è€ƒé“¾æ¥"><a class="markdownIt-Anchor" href="#å‚è€ƒé“¾æ¥"></a> å‚è€ƒé“¾æ¥</h4><p>PARCï¼šPalo Alto Research Centerï¼Œå¸•æ´›é˜¿å°”æ‰˜ç ”ç©¶ä¸­å¿ƒ</p><p>Lisaï¼šï¼ˆLocal Integrated Software Architectureï¼‰ï¼Œä½†æ˜¯æ˜¾ç„¶æ˜¯Jobsçš„å¥³å„¿åå­—</p><p><a href="https://www.zhihu.com/question/21143701/answer/2521552530">https://www.zhihu.com/question/21143701/answer/2521552530</a></p><p><a href="https://arstechnica.com/features/2005/05/gui/">https://arstechnica.com/features/2005/05/gui/</a></p>]]></content>
    
    
    <categories>
      
      <category>interest</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Translation</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•08-ç®—æ³•åˆ·é¢˜-æšä¸¾ï½œé€’å½’ï½œåˆ†æ²»ï½œå›æº¯</title>
    <link href="/posts/551748b9.html"/>
    <url>/posts/551748b9.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨å‰é¢ç¨å¾®çš„å®Œæ•´äº†è§£çš„åŸºç¡€çš„çº¿æ€§è¡¨ç»“æ„ï¼ŒçŸ¥é“æ•°ç»„ã€é“¾è¡¨ã€é˜Ÿã€æ ˆã€å“ˆå¸Œè¡¨ã€å †ä¹‹åï¼›æœ¬æ¥æŒ‰ç…§æ•°æ®ç»“æ„è¦å­¦ä¹ é«˜çº§æ•°æ®ç»“æ„å­—ç¬¦ä¸²å’ŒäºŒå‰æ ‘ï¼Œä½†æ˜¯åœ¨å­¦ä¹ KMPçš„æ—¶å€™å¯¹ä¸€äº›ç®—æ³•ä¸­çš„åŸºæœ¬æ¦‚å¿µä¸æ¸…æ™°ï¼ŒåŒæ—¶éœ€è¦å¯¹å‰ä¸€é˜¶æ®µä¸­çš„æ’åºã€äºŒåˆ†ã€åŒæŒ‡é’ˆã€ä¼˜å…ˆé˜Ÿåˆ—ã€å•è°ƒæ ˆç­‰è¿›è¡Œæ€»ç»“ï¼Œæ‰€ä»¥å€Ÿæ­¤æœºä¼šäº†è§£ä¸€ä¸‹ç®—æ³•ã€‚ç®—æ³•ä¸­æœ€åŸºç¡€çš„å°±æ˜¯æšä¸¾æˆ–è€…è¯´è¿­ä»£ï¼Œä¹‹åä¾¿æ˜¯é€’å½’ä¸ºåŸºç¡€çš„åˆ†æ²»å’Œå›æº¯ç®—æ³•ã€‚</p><span id="more"></span><h1 id="0x01-æšä¸¾ç®—æ³•enumeration-algorithm"><a class="markdownIt-Anchor" href="#0x01-æšä¸¾ç®—æ³•enumeration-algorithm"></a> 0x01 æšä¸¾ç®—æ³•ï¼ˆEnumeration Algorithmï¼‰</h1><h2 id="11-æšä¸¾ç®—æ³•ç®€ä»‹"><a class="markdownIt-Anchor" href="#11-æšä¸¾ç®—æ³•ç®€ä»‹"></a> 1.1  æšä¸¾ç®—æ³•ç®€ä»‹</h2><p>ç©·ä¸¾ç®—æ³•ï¼ŒæŒ‡çš„æ˜¯æŒ‰ç…§é—®é¢˜çš„æœ¬èº«çš„æ€§è´¨ï¼Œæ¥åˆ—ä¸¾å‡ºæ‰€æœ‰è¯¥é—®é¢˜å¯èƒ½å­˜åœ¨çš„è§£ï¼Œå¹¶åœ¨é€ä¸€æšä¸¾çš„è¿‡ç¨‹ä¸­è®²å®ƒä»¬é€ä¸€å’Œç›®æ ‡çŠ¶æ€è¿›è¡Œæ¯”è¾ƒæ¥å¾—åˆ°æ»¡è¶³é—®é¢˜è¦æ±‚çš„è§£</p><p>æšä¸¾ç®—æ³•çš„æ ¸å¿ƒæ˜¯éœ€è¦åˆ—ä¸¾é—®é¢˜çš„æ‰€æœ‰çŠ¶æ€ï¼Œå¹¶ä¸ç›®æ ‡çŠ¶æ€è¿›è¡Œæ¯”è¾ƒã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼Œå®¹æ˜“ç¼–ç¨‹è°ƒè¯•ã€ç®—æ³•çš„æ­£ç¡®æ€§å®¹æ˜“è¯æ˜ï¼›å®ƒçš„ç¼ºç‚¹æ˜¯æ•ˆç‡æ¯”è¾ƒä½ï¼Œä¸é€‚åˆæ±‚è§£è§„æ¨¡è¾ƒå¤§çš„é—®é¢˜</p><h2 id="12-æšä¸¾ç®—æ³•çš„æ€è·¯"><a class="markdownIt-Anchor" href="#12-æšä¸¾ç®—æ³•çš„æ€è·¯"></a> 1.2 æšä¸¾ç®—æ³•çš„æ€è·¯</h2><ol><li>ç¡®å®šæšä¸¾å¯¹è±¡ã€ æšä¸¾èŒƒå›´å’Œåˆ¤æ–­æ¡ä»¶ï¼Œå¹¶åˆ¤æ–­æ¡ä»¶è®¾ç«‹çš„æ­£ç¡®æ€§</li><li>ä¸€ä¸€æšä¸¾å¯èƒ½çš„æƒ…å†µå¹¶éªŒè¯æ˜¯å¦æ˜¯é—®é¢˜çš„è§£</li><li>è€ƒè™‘æé«˜æšä¸¾ç®—æ³•çš„æ•ˆç‡</li></ol><h2 id="13-æšä¸¾ç®—æ³•çš„åº”ç”¨"><a class="markdownIt-Anchor" href="#13-æšä¸¾ç®—æ³•çš„åº”ç”¨"></a> 1.3  æšä¸¾ç®—æ³•çš„åº”ç”¨</h2><p><a href="https://leetcode.cn/problems/subsets/">LC78 å­é›†</a></p><p>å¦‚æœé›†åˆAçš„ä»»æ„ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯é›†åˆSçš„å…ƒç´ ï¼Œåˆ™é›†åˆAäº‹é›†åˆSçš„å­é›†ï¼Œæšä¸¾å­é›†çš„æ–¹æ³•å¾ˆå¤šï¼Œä¸€ç§ç®€å•æœ‰æ•ˆçš„æšä¸¾æ–¹æ³•æ˜¯äºŒè¿›åˆ¶æšä¸¾å­é›†ç®—æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">subsets</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:<br>        res=[]<br>        path=[]<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">backtracking</span>(<span class="hljs-params">nums,index</span>):<br>            res.append(path[:])<br>            <span class="hljs-keyword">if</span> index&gt;=<span class="hljs-built_in">len</span>(nums):<br>                <span class="hljs-keyword">return</span> <br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(index,<span class="hljs-built_in">len</span>(nums)):<br>                path.append(nums[i])<br>                backtracking(nums,i+<span class="hljs-number">1</span>)<br>                path.pop()<br>        backtracking(nums,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p>python çš„ä½è¿ç®—ç¬¦ï¼›</p><p>&amp; ï¼šandè¿ç®—ï¼Œå‚ä¸è¿ç®—çš„ä¸¤ä¸ªå€¼ç›¸åº”ä½ä¸º1ï¼Œåˆ™ç»“æœä¸º1</p><p>ï½œï¼šor è¿ç®—ï¼Œåªè¦å¯¹åº”çš„ä¸¤ä¸ªäºŒä½æœ‰ä¸€ä¸ªä¸º1ï¼Œç»“æœå°±ä¸º1</p><p>^:  XORè¿ç®—ï¼Œä¸¤ä¸ªå¯¹åº”çš„ç›¸å¼‚çš„æ—¶å€™ï¼Œç»“æœä¸º1</p><p>ï½ï¼šnotè¿ç®—ï¼Œ</p><p>&lt;&lt; å·¦ç§»è¿ç®—ç¬¦ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">subsets</span>(<span class="hljs-params">self, S: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:<br>        sub_sets=[]<br>        n=<span class="hljs-built_in">len</span>(S)<br>        <span class="hljs-comment"># 1&lt;&lt;n ç›¸å½“äº2^næ¬¡æ–¹ï¼Œrange(1&lt;&lt;n)ç›¸å½“äº0ï½2^n-1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>&lt;&lt;n):<br>            sub_set=[]<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                <span class="hljs-comment"># &amp;1 ç›¸å½“äºå–æœ€åä¸€ä½</span><br>                <span class="hljs-keyword">if</span> i&gt;&gt;j&amp;<span class="hljs-number">1</span>:<br>                    sub_set.append(S[j])<br>            sub_sets.append(sub_set)<br>        <span class="hljs-keyword">return</span> sub_sets<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/maximal-square/">LC221 æœ€å¤§æ­£æ–¹å½¢</a></p><p>éœ€è¦ç”¨åˆ°ä¸€äº›ç®€å•çš„DP</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maximalSquare</span>(<span class="hljs-params">self, matrix: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-comment"># æœ€å¤§é¢ç§¯çš„æ­£æ–¹å½¢</span><br>        <span class="hljs-comment"># ç§¯åˆ†å›¾çš„æ–¹å¼</span><br>        max_len=<span class="hljs-number">0</span>          <br>        m,n=<span class="hljs-built_in">len</span>(matrix),<span class="hljs-built_in">len</span>(matrix[<span class="hljs-number">0</span>])<br>        dp=[]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            sub_dp=[]<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                matrix[i][j]=<span class="hljs-built_in">int</span>(matrix[i][j])<br>                <span class="hljs-keyword">if</span> matrix[i][j]==<span class="hljs-number">1</span>:<br>                    max_len=<span class="hljs-number">1</span><br>                sub_dp.append(matrix[i][j])<br>            dp.append(sub_dp)<br><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,m):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n):<br>                <span class="hljs-keyword">if</span> matrix[i][j]==<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> dp[i-<span class="hljs-number">1</span>][j]&gt;=<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> dp[i][j-<span class="hljs-number">1</span>]&gt;=<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> dp[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>]&gt;=<span class="hljs-number">1</span>:<br>                    dp[i][j]=<span class="hljs-built_in">min</span>(dp[i-<span class="hljs-number">1</span>][j-<span class="hljs-number">1</span>],dp[i-<span class="hljs-number">1</span>][j],dp[i][j-<span class="hljs-number">1</span>])+<span class="hljs-number">1</span><br>                <span class="hljs-keyword">if</span> dp[i][j]&gt;max_len:<br>                    max_len=dp[i][j]<br>        <span class="hljs-keyword">return</span> max_len*max_len<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/count-primes/">LC204 è®¡ç®—è´¨æ•°</a></p><p>å’Œä»¥å‰åœ¨å­¦æ ¡å­¦ä¹ çš„å°±ç©å°±å®Œå…¨ä¸ä¸€æ ·ï¼Œæšä¸¾æœ€é‡è¦çš„ä¸æ˜¯è¦ç¡®å®šåˆ—ä¸¾çš„å¯¹è±¡ï¼Œè¿˜éœ€è¦ç¡®å®šå‰ªæçš„æ¡ä»¶ã€‚æ‰€ä»¥æœ¬é¢˜å¯ä»¥æœ‰ç­›å­çš„æ¦‚å¿µ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">countPrimes</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        is_prime = [<span class="hljs-literal">True</span>]*(n)<br>        ans = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>,n): <br>            <span class="hljs-keyword">if</span> is_prime[num]:<br>                ans+=<span class="hljs-number">1</span><br>                <span class="hljs-comment"># å³è¾¹ç•Œ:å› ä¸ºæ•°å­—æœ€å¤§æ˜¯n-1 æ‰€ä»¥åªéœ€è¦åˆ°(n-1)//num å³è¾¹æ˜¯å¼€åŒºé—´ æ‰€ä»¥+1</span><br>                <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,(n-<span class="hljs-number">1</span>)//num+<span class="hljs-number">1</span>):<br>                    is_prime[num*k]=<span class="hljs-literal">False</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h1 id="0x02-é€’å½’ç®—æ³•"><a class="markdownIt-Anchor" href="#0x02-é€’å½’ç®—æ³•"></a> 0x02 é€’å½’ç®—æ³•</h1><h2 id="21-é€’å½’ç®€ä»‹"><a class="markdownIt-Anchor" href="#21-é€’å½’ç®€ä»‹"></a> 2.1 é€’å½’ç®€ä»‹</h2><p>æ˜¯ä¸€ç§é€šè¿‡é‡å¤è®²åŸé—®é¢˜åˆ†è§£ä¸ºåŒç±»çš„å­é—®é¢˜è€Œè§£å†³çš„æ–¹æ³•ï¼Œåœ¨ç»å¤§æ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¯ä»¥é€šè¿‡åœ¨å‡½æ•°ä¸­å†æ¬¡è°ƒç”¨å‡½æ•°è‡ªèº«çš„æ–¹å¼æ¥å®ç°é€’å½’</p><p>ç®€å•çš„ä¾‹å­å°±æ˜¯é˜¶ä¹˜çš„è®¡ç®—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fact</span>(<span class="hljs-params">n</span>):<br><span class="hljs-keyword">if</span> n==<span class="hljs-number">0</span>:<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br><span class="hljs-keyword">return</span> n*fact(n-<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>é€’å½’å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>ï¼ˆé€’æ¨è¿‡ç¨‹ï¼‰å…ˆé€å±‚å‘ä¸‹è°ƒç”¨è‡ªèº«ï¼Œç›´åˆ°è¾¾åˆ°ç»“æŸæ¡ä»¶ï¼›æŒ‡çš„æ˜¯<strong>å°†åŸé—®é¢˜ä¸€å±‚ä¸€å±‚åˆ†è§£ä¸ºä¸åŸé—®é¢˜å½¢å¼ç›¸åŒã€è§„æ¨¡æ›´å°çš„å­—é—®é¢˜ï¼Œç›´åˆ°è¾¾åˆ°ç»“æŸæ¡ä»¶æ—¶åœæ­¢ï¼Œæ­¤æ—¶è¿”å›æœ€åº•å±‚é—®é¢˜çš„è§£</strong></li><li>ç„¶åæƒ³ä¸Šé€å±‚è¿”å›ç»“æœï¼Œç›´åˆ°è¿”å›åŸé—®é¢˜çš„è§£ï¼›æŒ‡çš„æ˜¯<strong>ä»æœ€åº•å±‚å­—é—®é¢˜çš„è§£å¼€å§‹ï¼Œé€†å‘é€ä¸€å›å½’ï¼Œæœ€ç»ˆè¾¾åˆ°é€’æ¨å¼€å§‹çš„åŸé—®é¢˜ï¼Œç›´åˆ°è¿”å›åŸé—®é¢˜çš„è§£</strong></li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4qi9ph3csj20j90pu0tf.jpg" alt="image-20220731230242978" /></p><h2 id="22-é€’æ¨ä¸æ•°æ®å½’çº³æ³•"><a class="markdownIt-Anchor" href="#22-é€’æ¨ä¸æ•°æ®å½’çº³æ³•"></a> 2.2  é€’æ¨ä¸æ•°æ®å½’çº³æ³•</h2><p>å¤šç±³ç½—éª¨ç‰Œç±»ä¼¼çš„æ•°å­¦å½’çº³æ³•çš„æ­¥éª¤æ˜¯ï¼š</p><ol><li>è¯æ˜å½“n==bçš„æ—¶å€™ï¼ŒåŸºæœ¬æƒ…å†µä¸‹æˆç«‹</li><li>è¯æ˜å½“n&gt;bçš„æ—¶å€™ï¼Œn=kæˆç«‹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¨å¯¼å¾—å‡ºn=k+1æˆç«‹</li></ol><p>è¿™ä¸ªæ—¶å€™éœ€è¦è§£å†³çš„é€’å½’å°±éœ€è¦</p><ol><li>é€’å½’çš„ç»ˆæ­¢æ¡ä»¶</li><li>é€’å½’çš„è¿‡ç¨‹</li><li>å›å½’è¿‡ç¨‹</li></ol><h2 id="23-é€’å½’çš„æ¨¡ç‰ˆ"><a class="markdownIt-Anchor" href="#23-é€’å½’çš„æ¨¡ç‰ˆ"></a> 2.3 é€’å½’çš„æ¨¡ç‰ˆ</h2><h3 id="231-é€’å½’å…¬å¼"><a class="markdownIt-Anchor" href="#231-é€’å½’å…¬å¼"></a> 2.3.1 é€’å½’å…¬å¼</h3><p>éœ€è¦æ‰¾åˆ°åŸé—®é¢˜åˆ†è§£ç§°ä¸ºå­é—®é¢˜çš„è§„å¾‹ï¼Œå¹¶ä¸”æ ¹æ®è§„å¾‹å†™å‡ºé€’æ¨å…¬å¼ã€‚è¿™é‡Œçš„å…³é”®æ˜¯éœ€è¦æ‰¾åˆ°åŸé—®é¢˜åˆ†è§£ç§°ä¸ºå­é—®é¢˜çš„è§„å¾‹ï¼Œå¹¶æŠ½è±¡ç§°ä¸ºé€’æ¨å…¬å¼ã€‚</p><p>æ³¨æ„ï¼Œåœ¨æ€è€ƒé€’å½’å…¬å¼çš„æ—¶å€™æ²¡æœ‰å¿…è¦å°†æ•´ä¸ªé€’æ¨è¿‡ç¨‹å’Œå›å½’è¿‡ç¨‹ä¸€å±‚å±‚çš„æƒ³æ¸…æ¥šï¼Œè¿™æ ·å¯èƒ½è¿˜æ²¡æœ‰é€’æ¨åˆ°æ ˆåº•å°±å·²ç»ç»•æ™•äº†ã€‚é‡ç‚¹åœ¨äºæƒ³æ¸…æ¥šn=kåˆ°n=k+1è¿™ä¸ªæ­¥éª¤ï¼Œè€Œä¸æ˜¯n=iåˆ°n=i+1ï¼ˆi=1:mï¼‰ï¼›ä¹Ÿå°±æ˜¯æ‰¾åˆ°é€’å½’è¿‡ç¨‹ä¸­çš„å¾ªç¯ä¸å˜é‡ï¼ˆloop variantï¼‰ï¼Œå…ˆå‡è®¾å­é—®é¢˜è§£å†³äº†ï¼Œå†çœ‹å¦‚ä½•å°†åŸé—®é¢˜åˆ†è§£</p><h3 id="232-ç»ˆæ­¢æ¡ä»¶"><a class="markdownIt-Anchor" href="#232-ç»ˆæ­¢æ¡ä»¶"></a> 2.3.2 ç»ˆæ­¢æ¡ä»¶</h3><p>é€’å½’çš„ç»ˆæ­¢æ¡ä»¶ä¹Ÿå«åšé€’å½’å‡ºå£ï¼Œåœ¨å†™å‡ºé€’æ¨å…¬å¼ä¹‹åï¼Œå°±éœ€è¦è€ƒè™‘é€’å½’çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ä»€ä¹ˆã€‚é€šå¸¸æ¡ä»¶ä¸‹ï¼Œé€’å½’çš„ç»ˆæ­¢æ¡ä»¶æ˜¯é—®é¢˜çš„è¾¹ç•Œå€¼</p><h3 id="233-ç¿»è¯‘æˆä»£ç "><a class="markdownIt-Anchor" href="#233-ç¿»è¯‘æˆä»£ç "></a> 2.3.3 ç¿»è¯‘æˆä»£ç </h3><p>ç¬¬ä¸€æ­¥ï¼Œå®šä¹‰é€’å½’å‡½æ•°ï¼Œæ˜ç¡®å‡½æ•°æ„ä¹‰ã€inputå’Œoutput</p><p>ç¬¬äºŒæ­¥ï¼Œæ ¹æ®å¾ªç¯ä¸å˜é‡æ¥æ¨è®ºå¾—åˆ°é€’å½’å…¬å¼</p><p>ç¬¬ä¸‰æ­¥ï¼Œæ˜ç¡®é€’å½’çš„ç»ˆæ­¢æ¡ä»¶</p><p>ç¬¬å››æ­¥ï¼Œä¼ªä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">recursion</span>(<span class="hljs-params">å¤§è§„æ¨¡ï¼‰ï¼š</span><br><span class="hljs-params"><span class="hljs-keyword">if</span> ç»ˆæ­¢æ¡ä»¶ï¼š</span><br><span class="hljs-params">ç»ˆæ­¢æ¡ä»¶å¤„ç†</span><br><span class="hljs-params"><span class="hljs-keyword">return</span> recursionï¼ˆå°è§„æ¨¡ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="234-é€’å½’çš„æ³¨æ„ç‚¹"><a class="markdownIt-Anchor" href="#234-é€’å½’çš„æ³¨æ„ç‚¹"></a> 2.3.4 é€’å½’çš„æ³¨æ„ç‚¹</h3><p>é¿å…æ ˆæº¢å‡º</p><p>é¿å…é‡å¤è¿ç®—</p><h2 id="24-é€’å½’çš„åº”ç”¨"><a class="markdownIt-Anchor" href="#24-é€’å½’çš„åº”ç”¨"></a> 2.4 é€’å½’çš„åº”ç”¨</h2><p>é€’å½’åœ¨ä½¿ç”¨çš„è¿‡ç¨‹éœ€è¦æ˜ç¡®ä½ çš„loop variantæ˜¯ä»€ä¹ˆï¼Œåœ¨æ¯æ¬¡è¿è¡Œè¿‡ç¨‹ä¸­å¾ªç¯ä¸å˜é‡æ˜¯ä»€ä¹ˆ</p><p><a href="https://leetcode.cn/problems/fibonacci-number/">LC509 æ–æ³¢é‚£å¥‘æ•°åˆ—</a></p><p><a href="https://leetcode.cn/problems/climbing-stairs">LC70çˆ¬æ¥¼æ¢¯</a></p><p><a href="https://leetcode.cn/problems/reverse-string/">LC344 åè½¬å­—ç¬¦ä¸²</a></p><p><a href="https://leetcode.cn/problems/swap-nodes-in-pairs/">LC24 äº¤æ¢èŠ‚ç‚¹</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, next=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.next = next</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">swapPairs</span>(<span class="hljs-params">self, head: ListNode</span>) -&gt; ListNode:<br>        <span class="hljs-keyword">if</span> head==<span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> head.<span class="hljs-built_in">next</span>==<span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">return</span> head<br>        dummy=ListNode(<span class="hljs-number">0</span>,head)<br>        node1=head<br>        res=ListNode(<span class="hljs-number">0</span>,head.<span class="hljs-built_in">next</span>)<br>        node2=head.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">while</span>(node1!=<span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> node2!=<span class="hljs-literal">None</span>):<br>            <span class="hljs-comment"># äº¤æ¢ä¸¤è€…</span><br>            node1.<span class="hljs-built_in">next</span>=node2.<span class="hljs-built_in">next</span><br>            node2.<span class="hljs-built_in">next</span>=node1<br>            dummy.<span class="hljs-built_in">next</span>=node2<br><br>            <span class="hljs-comment"># æ›´æ–°node</span><br>            dummy=node1<br><br>            <span class="hljs-keyword">if</span> node1.<span class="hljs-built_in">next</span>==<span class="hljs-literal">None</span>:<br>                <span class="hljs-keyword">break</span><br>            node1=node1.<span class="hljs-built_in">next</span><br>            node2=node1.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> res.<span class="hljs-built_in">next</span><br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/pascals-triangle-ii/">LC119 æ¨è¾‰ä¸‰è§’</a></p><p><a href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/">LC104 äºŒå‰æ ‘æœ€å¤§æ·±åº¦</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.left = left</span><br><span class="hljs-comment">#         self.right = right</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maxDepth</span>(<span class="hljs-params">self, root: <span class="hljs-type">Optional</span>[TreeNode]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> root:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(self.maxDepth(root.left),self.maxDepth(root.right))+<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/invert-binary-tree/">LC226 ç¿»è½¬äºŒå‰æ ‘</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.left = left</span><br><span class="hljs-comment">#         self.right = right</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">invertTree</span>(<span class="hljs-params">self, root: TreeNode</span>) -&gt; TreeNode:<br>        <span class="hljs-keyword">if</span> root == <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">return</span> root<br>        <span class="hljs-comment"># ç­‰äºå·¦è¾¹çš„åè½¬ åŠ ä¸Š å³è¾¹çš„åè½¬</span><br>        left=self.invertTree(root.left)<br>        right=self.invertTree(root.right)<br>        root.right=left<br>        root.left=right<br>        <span class="hljs-keyword">return</span> root<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/k-th-symbol-in-grammar/">LC779 ç¬¬Kä¸ªè¯­æ³•ç¬¦å·</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">kthGrammar</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span>, k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> k % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> self.kthGrammar(n-<span class="hljs-number">1</span>, (k+<span class="hljs-number">1</span>) // <span class="hljs-number">2</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(self.kthGrammar(n-<span class="hljs-number">1</span>, k // <span class="hljs-number">2</span>) - <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/unique-binary-search-trees-ii/">LC95 ä¸åŒçš„äºŒå‰æœç´¢æ ‘II</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-comment"># class TreeNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.left = left</span><br><span class="hljs-comment">#         self.right = right</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generateTrees</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[TreeNode]:<br>        <span class="hljs-keyword">if</span> n==<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> []<br>        <br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">recursionTree</span>(<span class="hljs-params">left,right</span>):<br>            <span class="hljs-comment"># ç”Ÿæˆleft-rightä¹‹é—´çš„æ ‘</span><br>            <span class="hljs-keyword">if</span> left&gt;right:<br>                <span class="hljs-keyword">return</span> [<span class="hljs-literal">None</span>]<br>            trees=[]<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(left,right+<span class="hljs-number">1</span>):<br>                left_trees=recursionTree(left,i-<span class="hljs-number">1</span>)<br>                right_trees=recursionTree(i+<span class="hljs-number">1</span>,right)<br>                <span class="hljs-keyword">for</span> left_tree <span class="hljs-keyword">in</span> left_trees:<br>                    <span class="hljs-keyword">for</span> right_tree <span class="hljs-keyword">in</span> right_trees:<br>                        curr_tree=TreeNode(i)<br>                        curr_tree.left=left_tree<br>                        curr_tree.right=right_tree<br>                        trees.append(curr_tree)<br>            <span class="hljs-keyword">return</span> trees<br>        <span class="hljs-keyword">return</span> recursionTree(<span class="hljs-number">1</span>,n)<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof/">offer62 åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lastRemaining</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span>, m: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        ans = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>            ans = (m + ans) % i<br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><h1 id="0x03-åˆ†æ²»æ³•divide-and-conquer"><a class="markdownIt-Anchor" href="#0x03-åˆ†æ²»æ³•divide-and-conquer"></a> 0x03 åˆ†æ²»æ³•ï¼ˆDivide and Conquer)</h1><p>è¿™é‡Œåªæ˜¯ç®€å•çš„äº†è§£ï¼Œä»¥å½’å¹¶æ’åºä½œä¸ºåŸºç¡€ã€‚ç†è§£ä¸€ä¸ªç®—æ³•çš„å¥½å¤„å°±æ˜¯å»æ¨¡æ‹Ÿå®ƒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">mergeSort</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-comment"># å½’å¹¶æ’åºçš„åŸºæœ¬æ€æƒ³ï¼š</span><br><span class="hljs-comment"># é‡‡ç”¨ç»å…¸çš„åˆ†æ²»ç­–ç•¥ï¼Œå…ˆé€’å½’å°†å½“å‰åºåˆ—å¹³å‡åˆ†æˆä¸¤åŠï¼Œç„¶åå°†æœ‰åºåºåˆ—åˆå¹¶ï¼Œæœ€ç»ˆåˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€ç®—æ³•æ­¥éª¤ã€‘</span><br><span class="hljs-comment"># 1. å°†æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°æ®å ªç§°næœ‰åºçš„å­åºåˆ—</span><br><span class="hljs-comment"># 2. å°†å½“å‰åºåˆ—ç»„ä¸­çš„æœ‰åºåºåˆ—ä¸¤ä¸¤å½’å¹¶ï¼Œå®Œæˆä¸€éä¹‹ååºåˆ—ç»„é‡Œçš„æ’åºåºåˆ—çš„ä¸ªæ•°å‡ç‰ˆï¼Œæ¯ä¸ªå­åºåˆ—çš„é•¿åº¦åŠ å€</span><br><span class="hljs-comment"># 3. é‡å¤ä¸Šè¿°æ“ä½œå¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æœ‰åºåºåˆ—</span><br><span class="hljs-comment"># </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">left_arr,right_arr</span>):<br>arr=[]<br><span class="hljs-keyword">while</span> left_arr <span class="hljs-keyword">and</span> right_arr:<br><span class="hljs-keyword">if</span> left_arr[<span class="hljs-number">0</span>]&lt;=right_arr[<span class="hljs-number">0</span>]:<br>arr.append(left_arr.pop(<span class="hljs-number">0</span>))<br><span class="hljs-keyword">else</span>:<br>arr.append(right_arr.pop[<span class="hljs-number">0</span>])<br><br><span class="hljs-keyword">while</span> left_arr:<br>arr.append(left_arr.pop(<span class="hljs-number">0</span>))<br><br><span class="hljs-keyword">while</span> right_arr:<br>arr.append(right_arr.pop(<span class="hljs-number">0</span>))<br><br><span class="hljs-keyword">return</span> arr<br><br>size =<span class="hljs-built_in">len</span>(arr)<br><br><span class="hljs-comment"># è¾¹ç•Œæƒ…å†µ</span><br><span class="hljs-keyword">if</span> size&lt;<span class="hljs-number">2</span>:<br><span class="hljs-keyword">return</span> arr<br><br>mid =size//<span class="hljs-number">2</span><br><br>left_arr,right_arr=arr[<span class="hljs-number">0</span>:mid],arr[mid:]<br><span class="hljs-keyword">return</span> merge(mergeSort(left_arr),mergeSort(right_arr))<br></code></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4qikobs8yj21410u0qcx.jpg" alt="IMG_C3B04D575C51-1" /></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4qilo3lblj20r80lhwg6.jpg" alt="img" /></p><h1 id="0x04-å›æº¯ç®—æ³•backtracking-algorithm"><a class="markdownIt-Anchor" href="#0x04-å›æº¯ç®—æ³•backtracking-algorithm"></a> 0x04 å›æº¯ç®—æ³•(Backtracking algorithm)</h1><h2 id="41-å›æº¯ç®—æ³•ç®€ä»‹"><a class="markdownIt-Anchor" href="#41-å›æº¯ç®—æ³•ç®€ä»‹"></a> 4.1  å›æº¯ç®—æ³•ç®€ä»‹</h2><p>ä¸€ç§èƒ½å¤Ÿé¿å…ä¸å¿…è¦æœç´¢çš„ç©·ä¸¾å¼çš„æœç´¢ç®—æ³•ï¼Œé‡‡ç”¨å°è¯•é”™è¯¯çš„æ€æƒ³ï¼Œåœ¨æœç´¢å°è¯•è¿‡ç¨‹ä¸­å¯»æ‰¾é—®é¢˜çš„è§£ï¼Œå½“æ¢ç´¢åˆ°æŸä¸€æ­¥çš„æ—¶å€™ï¼Œå‘ç°åŸå…ˆçš„é€‰æ‹©å¹¶ä¸æ»¡è¶³æ±‚è§£æ¡ä»¶ã€æˆ–è€…è¿˜éœ€è¦æ»¡è¶³æ›´å¤šçš„æ±‚è§£æ¡ä»¶çš„çš„æ—¶å€™ï¼Œå°±é€€å›ä¸€æ­¥é‡æ–°é€‰æ‹©ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­èµ°ä¸é€šå°±é€€å›çš„æŠ€æœ¯ç§°ä¸ºå›æº¯æ³•ã€æ»¡è¶³å›æº¯æ¡ä»¶çš„æŸä¸ªçŠ¶æ€çš„ç‚¹ç§°ä¸ºå›æº¯ç‚¹</p><p>å›æº¯ç®—æ³•é€šå¸¸ç”¨ç®€å•çš„é€’å½’çš„æ–¹æ³•æ¥å®ç°ï¼Œåœ¨è¿›è¡Œå›æº¯çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ä¸¤ç§æƒ…å†µï¼š</p><ol><li>æ‰¾åˆ°ä¸€ä¸ªå¯èƒ½å­˜åœ¨çš„æ­£ç¡®ç­”æ¡ˆ</li><li>åœ¨å°è¯•æ‰€æœ‰å¯èƒ½çš„åˆ†å¸ƒæ–¹æ³•ä¹‹åå®£å¸ƒè¯¥é—®é¢˜æ²¡æœ‰ç­”æ¡ˆ</li></ol><h2 id="42-å›æº¯ç®—æ³•çš„ä¾‹å­"><a class="markdownIt-Anchor" href="#42-å›æº¯ç®—æ³•çš„ä¾‹å­"></a> 4.2  å›æº¯ç®—æ³•çš„ä¾‹å­</h2><p>æ¯”å¦‚æ±‚è§£1ï¼Œ2ï¼Œ3çš„å…¨æ’åˆ—çš„é—®é¢˜ï¼š</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4qimxl3mbj20hm0bv3zc.jpg" alt="image-20220731231528233" /></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">premute</span>(<span class="hljs-params">nums</span>):<br>    res=[] <span class="hljs-comment"># å­˜æ”¾æ‰€æœ‰ç¬¦åˆæ¡ä»¶ç»“æœçš„é›†åˆ</span><br>    path=[] <span class="hljs-comment"># å­˜æ”¾å½“å‰ç¬¦åˆæ¡ä»¶çš„ç»“æœ</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">backtracking</span>(<span class="hljs-params">nums</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(path)==<span class="hljs-built_in">len</span>(nums):<br>            res.append(path[:])<br>            <span class="hljs-keyword">return</span><br>        <br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">if</span> nums[i] <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> path:<br>                <span class="hljs-comment"># ä»å½“å‰è·¯å¾„ä¸­æ²¡æœ‰å‡ºç°çš„æ•°å­—ä¸­é€‰æ‹©</span><br>                path.append(nums[i])<br>                <span class="hljs-comment"># é€’å½’æœç´¢</span><br>                backtracking(nums)<br>                <span class="hljs-comment"># æ’¤é”€é€‰æ‹©</span><br>                path.pop()<br>        <br>    backtracking(nums)<br><br>    <span class="hljs-keyword">return</span> res<br><span class="hljs-built_in">print</span>(premute([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]))<br></code></pre></td></tr></table></figure><h2 id="43-å›æº¯ç®—æ³•çš„è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#43-å›æº¯ç®—æ³•çš„è¿‡ç¨‹"></a> 4.3 å›æº¯ç®—æ³•çš„è¿‡ç¨‹</h2><p>å›æº¯ç®—æ³•çš„è§£é¢˜æ­¥éª¤æ¯”è¾ƒæŠ½è±¡ï¼Œè¿™é‡Œåªæ˜¯åšä¸€ä¸ªç®€å•çš„ä»‹ç»</p><p>ç¬¬ä¸€æ­¥ï¼šç»“åˆæ‰€ç»™çš„é—®é¢˜ï¼Œå®šä¹‰é—®é¢˜çš„æ±‚è§£ç©ºé—´ï¼ŒåŒ…æ‹¬æ±‚è§£çš„ç»„ç»‡å½¢å¼å’Œæ˜¾æ€§çº¦æŸ</p><ol><li>è§£çš„ç»„ç»‡å½¢å¼ï¼Œå°†è§£çš„ç»„ç»‡å½¢å¼éƒ½è§„èŒƒç§°ä¸ºä¸€ä¸ªnå…ƒç¥–</li><li>æ˜¾çº¦æŸï¼Œå¯¹è§£åˆ†é‡çš„å–å€¼èŒƒå›´é™å®šï¼Œç”¨æ¥æ§åˆ¶è§£ç©ºé—´çš„å¤§å°</li></ol><p>ç¬¬äºŒæ­¥ï¼šç¡®å®šè§£ç©ºé—´çš„ç»„ç»‡ç»“æ„ï¼Œè§£ç©ºé—´çš„ç»„ç»‡å€Ÿå£é€šå¸¸ç”¨è§£ç©ºé—´æ ‘çš„æ–¹å¼å½¢è±¡è¡¨è¾¾ï¼Œæ ¹æ®è§£ç©ºé—´æ ‘çš„ä¸åŒï¼Œè§£ç©ºé—´åˆ†ä¸ºå­é›†æ ‘ã€æ’åˆ—æ ‘å’Œmå‰æ ‘</p><p>ç¬¬ä¸‰æ­¥ï¼šæŒ‰ç…§æ·±åº¦ä¼˜å…ˆæœç´¢ç­–ç•¥ï¼Œæ ¹æ®éšçº¦æŸï¼Œåœ¨è§£ç©ºé—´ä¸­æœç´¢é—®é¢˜çš„å¯è¡Œè§£æˆ–è€…æœ€ä¼˜è§£ï¼Œå½“å‘ç°å½“å‰èŠ‚ç‚¹ä¸æ»¡è¶³æ±‚è§£æ¡ä»¶æ—¶å€™å›æº¯å°è¯•å…¶ä»–çš„è·¯å¾„</p><p>ä¸Šé¢çš„æ˜¯è§£é¢˜çš„æŠ½è±¡é€»è¾‘ï¼Œåé¢æ ¹æ®codeä¹¦å†™å›æº¯ç®—æ³•çš„æ­¥éª¤å¯ä»¥åˆ†ä¸ºï¼š</p><ol><li>æ˜ç¡®æ‰€æœ‰çš„é€‰æ‹©ï¼Œç”»å‡ºæœç´¢è¿‡ç¨‹çš„å†³ç­–æ ‘ï¼Œæ ¹æ®å†³ç­–æ ‘æ¥ç¡®å®šæœç´¢è·¯å¾„</li><li>æ˜ç¡®ç»ˆæ­¢æ¡ä»¶ï¼Œæ¨æ•²å‡ºé€’å½’çš„ç»ˆæ­¢æ¡ä»¶ï¼Œä»¥åŠé€’å½’ç»ˆæ­¢æ—¶è¦æ‰§è¡Œçš„å¤„ç†æ–¹æ³•</li><li>å°†å†³ç­–æ ‘å’Œç»ˆæ­¢æ¡ä»¶ç¿»è¯‘æˆä»£ç </li></ol><h2 id="44-å›æº¯ç®—æ³•çš„åº”ç”¨"><a class="markdownIt-Anchor" href="#44-å›æº¯ç®—æ³•çš„åº”ç”¨"></a> 4.4 å›æº¯ç®—æ³•çš„åº”ç”¨</h2><p>åˆæ­¥çš„å›æº¯ç®—æ³•æ˜¯å°†ç°æœ‰çš„å¯èƒ½æ€§åˆ†ç±»ï¼Œç„¶åé€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªé€’å½’åˆ°ä¸‹ä¸€å±‚ï¼Œå¹¶å…è®¸è¿”å›åæ‰§è¡Œä¸‹ä¸€ä¸ªå¯èƒ½æ€§ã€‚é‡ç‚¹åœ¨äºæ¯ä¸€å±‚é€’å½’éƒ½ä¼šæœ‰Nä¸ªå¯èƒ½æ€§ï¼Œæ‰€ä»¥æ›´è¿‘ä¸€æ­¥éœ€è¦è€ƒè™‘å‰ªæã€‚å½“ç„¶éœ€è¦å…ˆæŠŠå›æº¯å­¦ä¼šï¼Œæ‰èƒ½å­¦ä¼šå‰ªçº¸</p><p><a href="https://leetcode.cn/problems/permutations/">LC46 å…¨æ’åˆ—</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">permute</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:<br>        res=[]<br>        path=[]<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">bt</span>(<span class="hljs-params">nums</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(path)==<span class="hljs-built_in">len</span>(nums):<br>                res.append(path[:])<br>                <span class="hljs-keyword">return</span> <br>            <br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>                <span class="hljs-keyword">if</span> nums[i] <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> path:<br>                    path.append(nums[i])<br>                    bt(nums)<br>                    path.pop()<br>        bt(nums)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/permutations-ii/">LC 47å…¨æ’åˆ—II</a></p><p><a href="https://leetcode.cn/problems/subarray-sum-equals-k/">LC560 å’Œä¸ºkçš„å­æ•°ç»„</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">subarraySum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        pre_dic = &#123;<span class="hljs-number">0</span>: <span class="hljs-number">1</span>&#125;<br>        pre_sum = <span class="hljs-number">0</span><br>        count = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            pre_sum += num<br>            <span class="hljs-keyword">if</span> pre_sum - k <span class="hljs-keyword">in</span> pre_dic:<br>                count += pre_dic[pre_sum - k]<br>            <span class="hljs-keyword">if</span> pre_sum <span class="hljs-keyword">in</span> pre_dic:<br>                pre_dic[pre_sum] += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                pre_dic[pre_sum] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> count<br></code></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4qiud55kyj21410u0119.jpg" alt="IMG_CF3CEA8976F6-1" /></p><p><a href="https://leetcode.cn/problems/generate-parentheses/">LC22 æ‹¬å·ç”Ÿæˆ</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generateParenthesis</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:<br>        ans = []<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">S, left, right</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(S) == <span class="hljs-number">2</span> * n:<br>                ans.append(<span class="hljs-string">&#x27;&#x27;</span>.join(S))<br>                <span class="hljs-keyword">return</span><br>            <span class="hljs-keyword">if</span> left &lt; n:<br>                S.append(<span class="hljs-string">&#x27;(&#x27;</span>)<br>                backtrack(S, left+<span class="hljs-number">1</span>, right)<br>                S.pop()<br>            <span class="hljs-keyword">if</span> right &lt; left:<br>                S.append(<span class="hljs-string">&#x27;)&#x27;</span>)<br>                backtrack(S, left, right+<span class="hljs-number">1</span>)<br>                S.pop()<br><br>        backtrack([], <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4qiv5fkztj21410u0q8j.jpg" alt="IMG_D7DDED1F4ECE-1" /></p><p><a href="https://leetcode.cn/problems/letter-combinations-of-a-phone-number/">LC 17 ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">letterCombinations</span>(<span class="hljs-params">self, digits: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:<br>        num2letter=[<span class="hljs-string">&#x27;abc&#x27;</span>,<span class="hljs-string">&#x27;def&#x27;</span>,<span class="hljs-string">&#x27;ghi&#x27;</span>,<span class="hljs-string">&#x27;jkl&#x27;</span>,<span class="hljs-string">&#x27;mno&#x27;</span>,<span class="hljs-string">&#x27;pqrs&#x27;</span>,<span class="hljs-string">&#x27;tuv&#x27;</span>,<span class="hljs-string">&#x27;wxyz&#x27;</span>]<br>        n=<span class="hljs-built_in">len</span>(digits)<br>        res=[]<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> digits:<br>            <span class="hljs-keyword">return</span> []<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">backtracking</span>(<span class="hljs-params">S</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(S)==n:<br>                res.append(<span class="hljs-string">&#x27;&#x27;</span>.join(S))<br>                <span class="hljs-keyword">return</span><br>            <br>            index=<span class="hljs-built_in">len</span>(S)<br>            num=<span class="hljs-built_in">int</span>(digits[index])<br>            <span class="hljs-built_in">print</span>(num)<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> num2letter[num-<span class="hljs-number">2</span>]:<br>                S.append(i)<br>                backtracking(S)<br>                S.pop()<br>        backtracking([])<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/letter-case-permutation/">LC784 å­—å¹•å¤§å°å†™å…¨æ’åˆ—</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">letterCasePermutation</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:<br>        res=[]<br>        path=[]<br><br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">backtracking</span>(<span class="hljs-params">path,index</span>):<br>            <span class="hljs-keyword">if</span> index==<span class="hljs-built_in">len</span>(s):<br>                <span class="hljs-comment"># æ‰€æœ‰çš„å­—æ¯éƒ½éå†å®Œæ¯•</span><br>                res.append(<span class="hljs-string">&#x27;&#x27;</span>.join(path[:]))<br>                <span class="hljs-keyword">return</span><br><br>            char=s[index]<br>            <span class="hljs-keyword">if</span> char.isdigit():<br>                <span class="hljs-comment"># å¦‚æœæ˜¯æ•°å­—ï¼Œç›´æ¥åŠ ä¸Šå»å°±è¡Œ</span><br>                path.append(char)<br>                backtracking(path,index+<span class="hljs-number">1</span>)<br>                path.pop()<br>            <span class="hljs-keyword">else</span>:<br>                path.append(char.lower())<br>                backtracking(path,index+<span class="hljs-number">1</span>)<br>                path.pop()<br>                path.append(char.upper())<br>                backtracking(path,index+<span class="hljs-number">1</span>)<br>                path.pop()<br>        backtracking([],<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/word-search/">LC79 å•è¯æœç´¢</a></p><p>æš‚æ—¶è¿˜ä¸ä¼šhhh</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">exist</span>(<span class="hljs-params">self, board: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]], word: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        directions = [(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>), (-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)]<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">i: <span class="hljs-built_in">int</span>, j: <span class="hljs-built_in">int</span>, k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>            <span class="hljs-keyword">if</span> board[i][j] != word[k]:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">if</span> k == <span class="hljs-built_in">len</span>(word) - <span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <br>            visited.add((i, j))<br>            result = <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">for</span> di, dj <span class="hljs-keyword">in</span> directions:<br>                newi, newj = i + di, j + dj<br>                <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= newi &lt; <span class="hljs-built_in">len</span>(board) <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= newj &lt; <span class="hljs-built_in">len</span>(board[<span class="hljs-number">0</span>]):<br>                    <span class="hljs-keyword">if</span> (newi, newj) <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> visited:<br>                        <span class="hljs-keyword">if</span> check(newi, newj, k + <span class="hljs-number">1</span>):<br>                            result = <span class="hljs-literal">True</span><br>                            <span class="hljs-keyword">break</span><br>            <br>            visited.remove((i, j))<br>            <span class="hljs-keyword">return</span> result<br><br>        h, w = <span class="hljs-built_in">len</span>(board), <span class="hljs-built_in">len</span>(board[<span class="hljs-number">0</span>])<br>        visited = <span class="hljs-built_in">set</span>()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(h):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(w):<br>                <span class="hljs-keyword">if</span> check(i, j, <span class="hljs-number">0</span>):<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/letter-tile-possibilities/">LC1079 æ´»å­—å°åˆ·</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">numTilePossibilities</span>(<span class="hljs-params">self, tiles: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        res=<span class="hljs-built_in">set</span>()<br>        path=[]<br>        hashmap=&#123;&#125;<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(tiles)):<br>            <span class="hljs-keyword">if</span> tiles[i] <span class="hljs-keyword">in</span> hashmap:<br>                hashmap[tiles[i]]+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                hashmap[tiles[i]]=<span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">backtracking</span>(<span class="hljs-params">tiles</span>):<br>            <br>            temp=<span class="hljs-string">&#x27;&#x27;</span>.join(path[:])<br>            <span class="hljs-keyword">if</span> temp!=<span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">and</span> temp <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> res:<br>                res.add(temp)<br>            <br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(tiles)):<br>                <span class="hljs-keyword">while</span>(hashmap[tiles[i]]==<span class="hljs-number">0</span>):<br>                    i=i+<span class="hljs-number">1</span><br>                    <span class="hljs-keyword">if</span> i ==<span class="hljs-built_in">len</span>(tiles):<br>                        <span class="hljs-keyword">return</span> <br>                hashmap[tiles[i]]-=<span class="hljs-number">1</span><br>                path.append(tiles[i])<br>                backtracking(tiles)<br>                va=path.pop()<br>                hashmap[va]+=<span class="hljs-number">1</span><br>        backtracking(tiles)<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(res)<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/restore-ip-addresses/">LC93 å¤åŸIPåœ°å€</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">restoreIpAddresses</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:<br>        res=[]<br>        path=[]<br>        flag=<span class="hljs-number">4</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">backtracking</span>(<span class="hljs-params">s,index</span>):<br>            temp=<span class="hljs-string">&#x27;&#x27;</span>.join(path[:])<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(temp)==<span class="hljs-built_in">len</span>(s)+<span class="hljs-number">4</span>:<br>                res.append(temp[:-<span class="hljs-number">1</span>])<br>                <span class="hljs-keyword">return</span><br><br>            <span class="hljs-keyword">nonlocal</span> flag<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(index+<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(s)+<span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">if</span> flag&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">int</span>(s[index:i])&lt;=<span class="hljs-number">255</span>:<br>                    <span class="hljs-keyword">if</span> i!=index+<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">int</span>(s[index])==<span class="hljs-number">0</span>:<br>                        <span class="hljs-keyword">return</span> <br>                    path.append(s[index:i])<br>                    path.append(<span class="hljs-string">&#x27;.&#x27;</span>)<br>                    flag-=<span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">return</span><br>                backtracking(s,i)<br>                path.pop()<br>                path.pop()<br>                flag+=<span class="hljs-number">1</span><br>        backtracking(s,<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/n-queens/">LC51-Nçš‡å</a></p><p>æ„Ÿè§‰Nçš‡åæ˜¯å›æº¯é‡Œé¢æœ€ç®€å•çš„ä¸€ç§äº†ï¼›ç¡®å®æ¯”è¾ƒç»å…¸</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs vim">class Solution:<br>    def solveNQueens(self, n: <span class="hljs-keyword">int</span>) -&gt; List[List[str]]:<br>        <span class="hljs-keyword">res</span>=[]<br>        path=[]<br>        def backtracking(n):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(path)==n:<br>                <span class="hljs-keyword">res</span>.<span class="hljs-keyword">append</span>(path[:])<br>                <span class="hljs-keyword">return</span> <br>            <br>            <span class="hljs-keyword">for</span> i in <span class="hljs-built_in">range</span>(n):<br>                # æ ¹æ®å‰é¢çš„pathå¯ä»¥å¾—å‡ºç›®å‰è¡Œèƒ½èµ°çš„è·¯çº¿<br>                forbid=[]<br>                <span class="hljs-keyword">for</span> <span class="hljs-keyword">j</span> in <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(path)):<br>                    forbid.<span class="hljs-keyword">append</span>(path[<span class="hljs-keyword">j</span>])<br>                    forbid.<span class="hljs-keyword">append</span>(path[<span class="hljs-keyword">j</span>]+<span class="hljs-built_in">len</span>(path)-<span class="hljs-keyword">j</span>)<br>                    forbid.<span class="hljs-keyword">append</span>(path[<span class="hljs-keyword">j</span>]+<span class="hljs-keyword">j</span>-<span class="hljs-built_in">len</span>(path))<br>                <span class="hljs-keyword">if</span> i not in forbid:<br>                    path.<span class="hljs-keyword">append</span>(i)<br>                    backtracking(n)<br>                    path.<span class="hljs-keyword">pop</span>()<br>        backtracking(n)<br><br>        rest=[]<br>        # ç¿»è¯‘<br>        <span class="hljs-keyword">for</span> i in <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(<span class="hljs-keyword">res</span>)):<br>            rest.<span class="hljs-keyword">append</span>([])<br>            <span class="hljs-keyword">for</span> <span class="hljs-keyword">j</span> in <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(<span class="hljs-keyword">res</span>[<span class="hljs-number">0</span>])):<br>                temp=[<span class="hljs-string">&#x27;.&#x27;</span> <span class="hljs-keyword">for</span> _ in <span class="hljs-built_in">range</span>(n)]<br>                temp[<span class="hljs-keyword">res</span>[i][<span class="hljs-keyword">j</span>]]=<span class="hljs-string">&#x27;Q&#x27;</span><br>                #åˆæˆ<br>                <span class="hljs-keyword">ts</span>=<span class="hljs-string">&#x27;&#x27;</span><br>                <span class="hljs-keyword">for</span> <span class="hljs-keyword">k</span> in temp:<br>                    <span class="hljs-keyword">ts</span>+=<span class="hljs-keyword">k</span><br>                rest[-<span class="hljs-number">1</span>].<span class="hljs-keyword">append</span>(<span class="hljs-keyword">ts</span>)<br>        <span class="hljs-keyword">return</span> rest<br></code></pre></td></tr></table></figure><h1 id="0x05-æ€»ç»“conclusion"><a class="markdownIt-Anchor" href="#0x05-æ€»ç»“conclusion"></a> 0x05 æ€»ç»“ï¼ˆConclusionï¼‰</h1><ol><li>ç†è§£ä¸€ä¸ªç®—æ³•ï¼Œå¹¶ä¸åƒä¸€ä¸ªæ•°æ®ç»“æ„ä¸€æ ·ç›´è§‚ã€‚æ‰€ä»¥æ¨¡æ‹Ÿè¿è¡Œï¼Œä¸€æ­¥ä¸€æ­¥çš„æ‰§è¡Œæ‰èƒ½ç†è§£å…¶ä¸­çš„ä¸€äº›å…³é”®ç‚¹ã€‚åªæ˜¯å•çº¯çš„çœ‹æ¦‚å¿µæ˜¯ä¸okçš„</li><li>æ— è®ºæ˜¯ç®—æ³•è¿˜æ˜¯æ•°æ®ç»“æ„ï¼Œå­¦ä¹ çš„è¿‡ç¨‹å¹¶ä¸æ˜¯ä¸€ä¸ªåˆ›é€ æ€§çš„è¿‡ç¨‹ï¼Œåªæ˜¯å°†è®¡ç®—æœºçš„å•æ¡æŒ‡ä»¤æ‰§è¡Œçš„æ€ç»´å¼ºåŠ åœ¨äººèº«ä¸Šï¼Œå†å†™å‡ºåˆ©ç”¨åˆé€‚çš„æ•°æ®ç»“æ„å’Œç®—æ³•èƒ½å¾—åˆ°ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ</li><li>åˆ†æ²»å’Œå›æº¯çš„æ ¹åŸºè¿˜æ˜¯é€’å½’ï¼Œç†è§£é€’å½’éœ€è¦ç†è§£å¾ªç¯ä¸å˜é‡</li><li>å‰ªæåé¢å†çœ‹è¶´</li></ol>]]></content>
    
    
    <categories>
      
      <category>DataStructure</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•07-ç®—æ³•åˆ·é¢˜-å“ˆå¸Œè¡¨éƒ¨åˆ†</title>
    <link href="/posts/c3b3eb20.html"/>
    <url>/posts/c3b3eb20.html</url>
    
    <content type="html"><![CDATA[<p>æ–°çš„æ•°æ®ç»“æ„ï¼ŒæŸ¥æ‰¾é€Ÿåº¦è´¼å¿«çš„å“ˆå¸Œè¡¨ï¼ï¼</p><span id="more"></span><h2 id="s0x01-ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å“ˆå¸Œè¡¨"><a class="markdownIt-Anchor" href="#s0x01-ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å“ˆå¸Œè¡¨"></a> s0x01 ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å“ˆå¸Œè¡¨ï¼Ÿ</h2><p>é¦–å…ˆæˆ‘ä»¬ç»†æ•°ä¹‹å‰å­¦è¿‡çš„çº¿æ€§æ•°æ®ç»“æ„ï¼Œå…¶ä¸­æœ€åŸºæœ¬çš„åˆ†ç±»ä¸ºæ•°ç»„ï¼ˆArrayï¼‰å’Œé“¾è¡¨ï¼ˆLinked listï¼‰ï¼ŒæŒ‰ç…§æˆ‘ä¸ªäººçš„çœ‹æ³•ï¼Œæœ€å¤§çš„åŒºåˆ«åœ¨äºæ•°ç»„æŒ‰å€å–å€¼çš„æ–¹å¼è®©å…¶åœ¨ç´¢å¼•é€Ÿåº¦å¾ˆå¿«ã€é“¾è¡¨ç”±äºæ•°æ®ä¹‹é—´çš„éš”ç¦»è®©å…¶åœ¨æ’å…¥ä¿®æ”¹ç­‰é€Ÿåº¦å¾ˆå¿«ã€‚</p><p>ç„¶ååœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥äººä¸ºçš„è®¾è®¡è§„åˆ™ï¼ˆFIFOæˆ–è€…LIFOï¼‰æ¥æ›´å¥½çš„æè¿°è¿™ä¸ªç‰©ç†ä¸–ç•Œï¼Œä¹Ÿå°±æ˜¯åœ¨æ•°ç»„å’Œé“¾è¡¨åŸºç¡€ä¸Šæ‰€åŠ çš„ä¸€å±‚æŠ½è±¡ï¼ˆå°±åƒç¨‹åºè¯­è¨€åœ¨å¯„å­˜å™¨åŸºç¡€ä¸ŠæŠ½è±¡ä¸€æ ·ï¼‰ï¼Œä½†æ˜¯åœ¨å­¦ä¹ ä¼˜å…ˆé˜Ÿåˆ—çš„æ—¶å€™ï¼Œå‘ç°å †ï¼ˆHeapï¼‰çš„å‡ºç°æ˜¯åœ¨æ•°ç»„å’Œé“¾è¡¨ä¹‹é—´çš„Trade-offï¼Œå®ƒå®ç°äº†æŸ¥æ‰¾çš„logNã€ä¿®æ”¹åˆ é™¤çš„logNæ—¶é—´ï¼Œå‘ç°éå¸¸çš„Amazing</p><p>æ‰€ä»¥ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å“ˆå¸Œè¡¨å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬éœ€è¦å®ç°å€¼çš„æŸ¥æ‰¾</p><p>(Sedgewick and Wayne, 2021)åœ¨&lt;ç®—æ³•ï¼Œç¬¬å››ç‰ˆ&gt;ä¸­çš„ç¬¬ä¸‰ç« ï¼ˆæŸ¥æ‰¾ï¼‰ä¸­æ‰€æè¿°çš„ï¼š</p><blockquote><p>ç°ä»£è®¡ç®—æœºå’Œç½‘ç»œä½¿æˆ‘ä»¬èƒ½å¤Ÿè®¿é—®æµ·é‡çš„ä¿¡æ¯ã€‚é«˜æ•ˆæ£€ç´¢è¿™äº›ä¿¡æ¯çš„èƒ½åŠ›æ˜¯å¤„ç†å®ƒä»¬çš„é‡è¦å‰ æã€‚æœ¬ç« æè¿°çš„éƒ½æ˜¯æ•°åå¹´æ¥åœ¨å¹¿æ³›åº”ç”¨ä¸­ç»è¿‡å®è·µæ£€éªŒçš„ç»å…¸æŸ¥æ‰¾ç®—æ³•ã€‚æ²¡æœ‰è¿™äº›ç®—æ³•ï¼Œç°ä»£ä¿¡ æ¯ä¸–ç•Œçš„åŸºç¡€è®¡ç®—è®¾æ–½éƒ½æ— ä»è°ˆèµ·ã€‚</p></blockquote><blockquote><p>æˆ‘ä»¬ä¼šä½¿ç”¨ç¬¦å·è¡¨è¿™ä¸ªè¯æ¥æè¿°ä¸€å¼ æŠ½è±¡çš„è¡¨æ ¼ï¼Œæˆ‘ä»¬ä¼šå°†ä¿¡æ¯ï¼ˆå€¼ï¼‰å­˜å‚¨åœ¨å…¶ä¸­ï¼Œç„¶åæŒ‰ç…§ æŒ‡å®šçš„é”®æ¥æœç´¢å¹¶è·å–è¿™äº›ä¿¡æ¯ã€‚é”®å’Œå€¼çš„å…·ä½“æ„ä¹‰å–å†³äºä¸åŒçš„åº”ç”¨ã€‚ç¬¦å·è¡¨ä¸­å¯èƒ½ä¼šä¿å­˜å¾ˆå¤š é”®å’Œå¾ˆå¤šä¿¡æ¯ï¼Œå› æ­¤å®ç°ä¸€å¼ é«˜æ•ˆçš„ç¬¦å·è¡¨ä¹Ÿæ˜¯ä¸€é¡¹å¾ˆæœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ã€‚</p></blockquote><blockquote><p>ç¬¦å·è¡¨æœ‰æ—¶è¢«ç§°ä¸ºå­—å…¸ï¼Œç±»ä¼¼äºé‚£æœ¬å°†å•è¯çš„é‡Šä¹‰æŒ‰ç…§å­—æ¯é¡ºåºæ’åˆ—èµ·æ¥çš„å†å²æ‚ ä¹…çš„å‚è€ƒä¹¦ã€‚ åœ¨è‹±è¯­å­—å…¸é‡Œï¼Œé”®å°±æ˜¯å•è¯ï¼Œå€¼å°±æ˜¯å•è¯å¯¹åº”çš„å®šä¹‰ã€å‘éŸ³å’Œè¯æºã€‚ç¬¦å·è¡¨æœ‰æ—¶åˆå«åšç´¢å¼•ï¼Œå³ä¹¦ æœ¬æœ€åå°†æœ¯è¯­æŒ‰ç…§å­—æ¯é¡ºåºåˆ—å‡ºä»¥æ–¹ä¾¿æŸ¥æ‰¾çš„é‚£éƒ¨åˆ†ã€‚åœ¨ä¸€æœ¬ä¹¦çš„ç´¢å¼•ä¸­ï¼Œé”®å°±æ˜¯æœ¯è¯­ï¼Œè€Œå€¼å°±æ˜¯ ä¹¦ä¸­è¯¥æœ¯è¯­å‡ºç°çš„æ‰€æœ‰é¡µç ã€‚</p></blockquote><blockquote><p>åœ¨è¯´æ˜äº†åŸºæœ¬çš„ API å’Œä¸¤ç§é‡è¦çš„å®ç°ä¹‹åï¼Œæˆ‘ä»¬ä¼šå­¦ä¹ ç”¨ä¸‰ç§ç»å…¸çš„æ•°æ®ç±»å‹æ¥å®ç°é«˜æ•ˆçš„ ç¬¦å·è¡¨ï¼šäºŒå‰æŸ¥æ‰¾æ ‘ã€çº¢é»‘æ ‘å’Œæ•£åˆ—è¡¨ã€‚åœ¨æ€»ç»“ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°å®ƒä»¬çš„è‹¥å¹²æ‰©å±•å’Œåº”ç”¨ï¼Œå®ƒä»¬çš„å®ç° éƒ½æœ‰èµ–äºæˆ‘ä»¬åœ¨æœ¬ç« ä¸­å°†ä¼šå­¦åˆ°çš„é«˜æ•ˆç®—æ³•ã€‚</p></blockquote><p>ç®€å•æ¥è¯´ï¼Œå°±æ¯”å¦‚è¯´æˆ‘ä»¬éœ€è¦åˆ é™¤[1,2,3,4]ä¸­3è¿™ä¸ªå€¼ï¼Œå¦‚æœä»æ•°ç»„çš„è§’åº¦éœ€è¦çŸ¥é“3å¯¹åº”çš„ä¸‹æ ‡ï¼Œå°±ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›å€ŸåŠ©å“ˆå¸Œè¡¨çš„æ–¹å¼æ¥å¿«é€Ÿæ‰¾åˆ°è¿™ä¸ªå€¼</p><h2 id="0x02-å“ˆå¸Œè¡¨å’Œå“ˆå¸Œæ˜ å°„"><a class="markdownIt-Anchor" href="#0x02-å“ˆå¸Œè¡¨å’Œå“ˆå¸Œæ˜ å°„"></a> 0x02 å“ˆå¸Œè¡¨å’Œå“ˆå¸Œæ˜ å°„</h2><p>**å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ï¼Œ**é€šè¿‡é”® <code>key</code>å’Œä¸€ä¸ªæ˜ å°„å‡½æ•° <code>Hash(key)</code>è®¡ç®—å‡ºå¯¹åº”çš„å€¼ <code>value</code> ï¼ŒæŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬é€šè¿‡value=Hash(key)=key//1000ä½œä¸ºå“ˆå¸Œå‡½æ•°ï¼Œç”±æ­¤å¯ä»¥å®ç°æ’å…¥å’ŒæŸ¥æ‰¾ï¼š</p><ol><li>æ¯”å¦‚æ’å…¥0138ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºvalue=0ï¼Œç„¶ååˆ†é…åˆ°0å¯¹åº”çš„åŒºå—ä¸­</li><li>æŸ¥æ‰¾2321ï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°å¯ä»¥å¾—åˆ°2ï¼Œåœ¨2å¯¹åº”çš„åŒºå—ä¸­å¯»æ‰¾å°±å¯ä»¥äº†</li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4dtt91m3tj20b6079aa2.jpg" alt="image-20220720234945173" /></p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æœ€ç»ˆçš„ç‚¹åœ¨<strong>å“ˆå¸Œå‡½æ•°(Hash Function)**å’Œ**å“ˆå¸Œå†²çªï¼ˆHash Collisionï¼‰</strong>,é¦–å…ˆçœ‹å“ˆå¸Œå‡½æ•°ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>å¤šå¯¹ä¸€çš„æ˜ å°„ï¼Œè¦æ±‚ï¼š</strong></p><ol><li>å®¹æ˜“è®¡ç®—çš„ï¼Œå¹¶ä¸”è®¡ç®—çš„ç´¢å¼•å€¼å¯ä»¥å‡åŒ€åˆ†å¸ƒ</li><li>æ‰€å¾—åˆ°çš„å“ˆå¸Œå€¼æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„è¾“å‡º</li><li>å¤šå¯¹ä¸€ï¼Œå¦‚æœHashï¼ˆkey1ï¼‰ï¼=Hashï¼ˆkey2ï¼‰ï¼Œåˆ™key1å’Œkey2ä¸€å®šä¸æƒ³ç­‰</li><li>å¦‚æœHashï¼ˆkey1ï¼‰==Hashï¼ˆkey2â€”ï¼‰ï¼Œåˆ™ä¸¤è€…å¯èƒ½ç›¸åŒï¼Œä¹Ÿå¯èƒ½ä¸åŒï¼ˆå†²çªï¼‰</li></ol><p>ä¸Šè¿°ç¬¬4ç‚¹ä¸­çš„ä¸åŒkeyå¾—åˆ°ç›¸åŒçš„hashï¼ˆkeyï¼‰å°±æ˜¯å“ˆå¸Œå†²çªï¼ˆHash Collisionï¼‰ï¼Œè¿™ä¹Ÿæ˜¯å¥½ç†è§£çš„æœ‰å¾—å¿…æœ‰å¤±ï¼Œä¼šæœ‰é’ˆå¯¹å“ˆå¸Œå†²çªçš„ä¼˜åŒ–ã€‚è¿™å°±éœ€è¦ç²¾å¦™çš„è®¾è®¡èƒ½åŠ›äº†ã€‚</p><h3 id="21-å“ˆå¸Œå‡½æ•°çš„æ–¹æ³•"><a class="markdownIt-Anchor" href="#21-å“ˆå¸Œå‡½æ•°çš„æ–¹æ³•"></a> 2.1 å“ˆå¸Œå‡½æ•°çš„æ–¹æ³•</h3><ul><li>ç›´æ¥å®šå€æ³•</li><li>é™¤ç•™ä½™æ•°æ³•</li><li>å¹³æ–¹æŠ˜ä¸­æ³•</li><li>åŸºæ•°è½¬æ¢æ³•</li><li>ç­‰ç­‰</li></ul><p>è¿™é‡Œå¤§éƒ¨åˆ†ä¸ä¼šç”¨çš„ï¼Œéœ€è¦äº†è§£çš„å¯ä»¥é…åˆæœç´¢å¼•æ“ä½¿ç”¨</p><h3 id="22-å“ˆå¸Œå†²çªçš„è§£å†³"><a class="markdownIt-Anchor" href="#22-å“ˆå¸Œå†²çªçš„è§£å†³"></a> 2.2 å“ˆå¸Œå†²çªçš„è§£å†³</h3><ul><li>å¼€æ”¾åœ°å€æ³•ï¼ˆOpen Addressingï¼‰</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4dttdohlvj20e30a6dg1.jpg" alt="image-20220720234955234" /></p><ul><li>é“¾åœ°å€æ³•ï¼ˆChainingï¼‰-- ç”¨pythonä¼šå¾ˆç®€å•</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h4dttjprqij20by0a674g.jpg" alt="image-20220720235004945" /></p><h2 id="0x03-å“ˆå¸Œè¡¨å’Œå“ˆå¸Œæ˜ å°„çš„è®¾è®¡"><a class="markdownIt-Anchor" href="#0x03-å“ˆå¸Œè¡¨å’Œå“ˆå¸Œæ˜ å°„çš„è®¾è®¡"></a> 0x03 å“ˆå¸Œè¡¨å’Œå“ˆå¸Œæ˜ å°„çš„è®¾è®¡</h2><p><a href="https://leetcode.cn/problems/design-hashset/">T705 è®¾è®¡å“ˆå¸Œé›†åˆ</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHashSet</span>:<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.<span class="hljs-built_in">set</span>=[[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:<br>        index=key%<span class="hljs-number">1000</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.<span class="hljs-built_in">set</span>[index])):<br>            <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">set</span>[index][i]==key:<br>                <span class="hljs-keyword">break</span><br>        self.<span class="hljs-built_in">set</span>[index].append(key)<br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">set</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:<br>        index = key%<span class="hljs-number">1000</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.<span class="hljs-built_in">set</span>[index])):<br>            <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">set</span>[index][i]==key:<br>                self.<span class="hljs-built_in">set</span>[index][i]=-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> self.<span class="hljs-built_in">set</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">contains</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        index=key%<span class="hljs-number">1000</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.<span class="hljs-built_in">set</span>[index])):<br>            <span class="hljs-keyword">if</span> self.<span class="hljs-built_in">set</span>[index][i]==key:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/design-hashmap/">T706 è®¾è®¡å“ˆå¸Œæ˜ å°„</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHashMap</span>:<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.N=<span class="hljs-number">1000</span><br>        self.hashMap=[[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.N)]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">put</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">int</span>, value: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:<br>        index=key%self.N<br>        <span class="hljs-keyword">for</span> values <span class="hljs-keyword">in</span> self.hashMap[index]:<br>            <span class="hljs-keyword">if</span> values[<span class="hljs-number">0</span>]==key:<br>                <span class="hljs-comment"># æ›´æ–°å€¼</span><br>                values[<span class="hljs-number">1</span>]=value<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        self.hashMap[index].append([key,value])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        index = key % self.N<br>        <span class="hljs-keyword">for</span> values <span class="hljs-keyword">in</span> self.hashMap[index]:<br>            <span class="hljs-keyword">if</span> values[<span class="hljs-number">0</span>]==key:<br>                <span class="hljs-keyword">return</span> values[<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:<br>        index = key% self.N<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.hashMap[index])):<br>            <span class="hljs-keyword">if</span> self.hashMap[index][i][<span class="hljs-number">0</span>]==key:<br>                self.hashMap[index].pop(i)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="0x04-å“ˆå¸Œè¡¨çš„åº”ç”¨"><a class="markdownIt-Anchor" href="#0x04-å“ˆå¸Œè¡¨çš„åº”ç”¨"></a> 0x04 å“ˆå¸Œè¡¨çš„åº”ç”¨</h2><p>æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯åŸåœ°å“ˆå¸Œ</p><p><a href="https://leetcode.cn/problems/contains-duplicate/">T217 å­˜åœ¨é‡å¤å…ƒç´ </a></p><p><a href="https://leetcode.cn/problems/contains-duplicate-ii/">T219 å­˜åœ¨é‡å¤å…ƒç´ II</a></p><p><a href="https://leetcode.cn/problems/contains-duplicate-iii/">T220 å­˜åœ¨é‡å¤å…ƒç´ III</a></p><p>è¿™é‡Œä¸èƒ½ç®€å•çš„ä½¿ç”¨ä¹‹å‰çš„å“ˆå¸Œå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä¸èƒ½åœ¨ä¸€ä¸ªæ¡¶é‡Œé¢æ¯”è¾ƒï¼Œæˆ‘è¿˜éœ€è¦å’Œå…¶ä»–æ¡¶å¯¹æ¯”</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">containsNearbyAlmostDuplicate</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span>, t: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        bucket_dict = <span class="hljs-built_in">dict</span>()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-comment"># å°† nums[i] åˆ’åˆ†åˆ°å¤§å°ä¸º t + 1 çš„ä¸åŒæ¡¶ä¸­</span><br>            num = nums[i] // (t + <span class="hljs-number">1</span>)<br><br>            <span class="hljs-comment"># æ¡¶ä¸­å·²ç»æœ‰å…ƒç´ äº†</span><br>            <span class="hljs-keyword">if</span> num <span class="hljs-keyword">in</span> bucket_dict:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>            <span class="hljs-comment"># æŠŠ nums[i] æ”¾å…¥æ¡¶ä¸­</span><br>            bucket_dict[num] = nums[i]<br><br>            <span class="hljs-comment"># åˆ¤æ–­å·¦ä¾§æ¡¶æ˜¯å¦æ»¡è¶³æ¡ä»¶</span><br>            <span class="hljs-keyword">if</span> (num - <span class="hljs-number">1</span>) <span class="hljs-keyword">in</span> bucket_dict <span class="hljs-keyword">and</span> <span class="hljs-built_in">abs</span>(bucket_dict[num - <span class="hljs-number">1</span>] - nums[i]) &lt;= t:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-comment"># åˆ¤æ–­å³ä¾§æ¡¶æ˜¯å¦æ»¡è¶³æ¡ä»¶</span><br>            <span class="hljs-keyword">if</span> (num + <span class="hljs-number">1</span>) <span class="hljs-keyword">in</span> bucket_dict <span class="hljs-keyword">and</span> <span class="hljs-built_in">abs</span>(bucket_dict[num + <span class="hljs-number">1</span>] - nums[i]) &lt;= t:<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>            <span class="hljs-comment"># å°† i-k ä¹‹å‰çš„æ—§æ¡¶æ¸…é™¤ï¼Œå› ä¸ºä¹‹å‰çš„æ¡¶å·²ç»ä¸æ»¡è¶³æ¡ä»¶äº†</span><br>            <span class="hljs-keyword">if</span> i &gt;= k:<br>                bucket_dict.pop(nums[i-k] // (t + <span class="hljs-number">1</span>))<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/single-number/">T136 åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</a></p><p><a href="https://leetcode.cn/problems/two-sum/">T001 ä¸¤æ•°ä¹‹å’Œ</a></p><p>ç¬¬ä¸€é“é¢˜ï¼Œå¾ˆç»å…¸</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        headMap=&#123;&#125;<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">if</span> nums[i] <span class="hljs-keyword">in</span> headMap:<br>                <span class="hljs-keyword">return</span> [i,headMap[nums[i]]]<br>            headMap[target-nums[i]]=i<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/3sum/">T015 ä¸‰æ•°ä¹‹å’Œ</a></p><p>é‡å¤§æ‰“å‡»çš„ä¸€é¢˜ï¼Œä¹Ÿå¾ˆç»å…¸</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">threeSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:<br>        res=[]<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">arr,target</span>):<br>            left=<span class="hljs-number">0</span><br>            right=<span class="hljs-built_in">len</span>(arr)-<span class="hljs-number">1</span><br><br>            <span class="hljs-keyword">while</span>(left&lt;right):<br>                temp_sum=arr[left]+arr[right]<br>                <span class="hljs-keyword">if</span> temp_sum==target:<br>                    <span class="hljs-keyword">if</span> left&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> arr[left]==arr[left-<span class="hljs-number">1</span>]:<br>                        left+=<span class="hljs-number">1</span><br>                    <span class="hljs-keyword">elif</span> right&lt;<span class="hljs-built_in">len</span>(arr)-<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> arr[right]==arr[right+<span class="hljs-number">1</span>]:<br>                        right-=<span class="hljs-number">1</span><br>                    <span class="hljs-keyword">else</span>:<br>                        res.append([target*(-<span class="hljs-number">1</span>),arr[left],arr[right]])<br>                        left+=<span class="hljs-number">1</span><br>                        right-=<span class="hljs-number">1</span><br>                <span class="hljs-keyword">elif</span> temp_sum&lt;target:<br>                    left+=<span class="hljs-number">1</span><br>                <span class="hljs-keyword">elif</span> temp_sum&gt;target:<br>                    right-=<span class="hljs-number">1</span><br>        nums.sort()<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">if</span> nums[i]&gt;<span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">if</span> i&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> nums[i]==nums[i-<span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">continue</span><br>            twoSum(nums[i+<span class="hljs-number">1</span>:],(-<span class="hljs-number">1</span>)*nums[i])        <br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/4sum-ii/">T454 å››æ•°ç›¸åŠ II</a></p><p>å¤§äº‹åŒ–å°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fourSumCount</span>(<span class="hljs-params">self, nums1: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], nums2: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], nums3: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], nums4: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        hashMap1=&#123;&#125;<br>        <span class="hljs-keyword">for</span> num1 <span class="hljs-keyword">in</span> nums1:<br>            <span class="hljs-keyword">for</span> num2 <span class="hljs-keyword">in</span> nums2:<br>                <span class="hljs-keyword">if</span> num1+num2 <span class="hljs-keyword">in</span> hashMap1:<br>                    hashMap1[num1+num2]+=<span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    hashMap1[num1+num2]=<span class="hljs-number">1</span><br>        <br>        count=<span class="hljs-number">0</span><br><br>        <span class="hljs-keyword">for</span> num3 <span class="hljs-keyword">in</span> nums3:<br>            <span class="hljs-keyword">for</span> num4 <span class="hljs-keyword">in</span> nums4:<br>                <span class="hljs-keyword">if</span> -(num3+num4) <span class="hljs-keyword">in</span> hashMap1:<br>                    count+=hashMap1[-(num3+num4)]<br>        <br>        <span class="hljs-keyword">return</span> count<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/find-all-duplicates-in-an-array/">T442 æ•°ç»„ä¸­é‡å¤çš„æ•°æ®</a></p><p>å¾ˆæœ‰æ„æ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findDuplicates</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        <span class="hljs-comment"># ä¾æ—§ä½¿ç”¨åŸåœ°å“ˆå¸Œ</span><br>        <span class="hljs-comment"># hashtable(key)=key-1</span><br>        <span class="hljs-comment"># æ•°ç»„ä¸­åªä¼šå­˜åœ¨ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯æ­£å¸¸æ˜ å°„ã€å¦å¤–ä¸€ç§æ˜¯é‡å¤çš„ï¼Œæ¯æ¬¡äº¤æ¢çš„ç»ˆæ­¢æ¡ä»¶æ˜¯</span><br>        <span class="hljs-comment"># 1. iå¤„çš„æ­£å¸¸æ˜ å°„</span><br>        <span class="hljs-comment"># 2. iå¤„ä¸nums[i]å‡ºç°é‡å¤</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">while</span> nums[i]!=i+<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> nums[i]!=nums[nums[i]-<span class="hljs-number">1</span>]:<br>                nums[nums[i]-<span class="hljs-number">1</span>],nums[i]=nums[i],nums[nums[i]-<span class="hljs-number">1</span>]<br>                <br>        <span class="hljs-keyword">return</span> [num <span class="hljs-keyword">for</span> i, num <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(nums) <span class="hljs-keyword">if</span> num - <span class="hljs-number">1</span> != i]<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/max-points-on-a-line/">T149 ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°</a></p><p>éœ€è¦æ³¨æ„pythonè¿ç®—çš„æ—¶å€™ï¼Œå°æ•°çš„é—®é¢˜ï¼Œæ¯”å¦‚0.1+0.2=0.333334ï¼›ç»“åˆè´ªå¿ƒçš„æ€æƒ³ä½¿ç”¨æ›´ä½³</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maxPoints</span>(<span class="hljs-params">self, points: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        n = <span class="hljs-built_in">len</span>(points)<br>        <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">3</span>:<br>            <span class="hljs-keyword">return</span> n<br>        ans = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            line_dict = <span class="hljs-built_in">dict</span>()<br>            line_dict[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span><br>            same = <span class="hljs-number">1</span><br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>, n):<br>                dx = points[j][<span class="hljs-number">0</span>] - points[i][<span class="hljs-number">0</span>]<br>                dy = points[j][<span class="hljs-number">1</span>] - points[i][<span class="hljs-number">1</span>]<br>                <span class="hljs-keyword">if</span> dx == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> dy == <span class="hljs-number">0</span>:<br>                    same += <span class="hljs-number">1</span><br>                    <span class="hljs-keyword">continue</span><br>                gcd_dx_dy = math.gcd(<span class="hljs-built_in">abs</span>(dx), <span class="hljs-built_in">abs</span>(dy))<br>                <span class="hljs-keyword">if</span> (dx &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> dy &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (dx &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> dy &lt; <span class="hljs-number">0</span>):<br>                    dx = <span class="hljs-built_in">abs</span>(dx) // gcd_dx_dy<br>                    dy = <span class="hljs-built_in">abs</span>(dy) // gcd_dx_dy<br>                <span class="hljs-keyword">elif</span> dx &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> dy &gt; <span class="hljs-number">0</span>:<br>                    dx = -dx // gcd_dx_dy<br>                    dy = -dy // gcd_dx_dy<br>                <span class="hljs-keyword">elif</span> dx &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> dy &lt; <span class="hljs-number">0</span>:<br>                    dx = dx // gcd_dx_dy<br>                    dy = dy // gcd_dx_dy<br>                <span class="hljs-keyword">elif</span> dx == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> dy != <span class="hljs-number">0</span>:<br>                    dy = <span class="hljs-number">1</span><br>                <span class="hljs-keyword">elif</span> dx != <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> dy == <span class="hljs-number">0</span>:<br>                    dx = <span class="hljs-number">1</span><br>                key = (dx, dy)<br>                <span class="hljs-keyword">if</span> key <span class="hljs-keyword">in</span> line_dict:<br>                    line_dict[key] += <span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    line_dict[key] = <span class="hljs-number">1</span><br>            ans = <span class="hljs-built_in">max</span>(ans, same + <span class="hljs-built_in">max</span>(line_dict.values()))<br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/subdomain-visit-count/">T811 å­åŸŸåçš„è®¿é—®è®¡æ•°</a></p><p>å­¦ä¼špythonçš„å­—ç¬¦ä¸²æ“ä½œè¿˜æ˜¯å¾ˆæœ‰ç”¨çš„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">subdomainVisits</span>(<span class="hljs-params">self, cpdomains: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:<br>        ans=&#123;&#125;<br>        <span class="hljs-keyword">for</span> domain <span class="hljs-keyword">in</span> cpdomains:<br>            count,domains=domain.split()<br>            count=<span class="hljs-built_in">int</span>(count)<br><br>            subdomains=domains.split(<span class="hljs-string">&#x27;.&#x27;</span>)<br>            temp=<span class="hljs-string">&#x27;&#x27;</span><br>            <span class="hljs-keyword">for</span> subdomain <span class="hljs-keyword">in</span> subdomains[::-<span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">if</span> temp:<br>                    temp=subdomain+<span class="hljs-string">&#x27;.&#x27;</span>+temp<br>                <span class="hljs-keyword">else</span>:<br>                    temp=subdomain<br>                <span class="hljs-keyword">if</span> temp <span class="hljs-keyword">in</span> ans:<br>                    ans[temp]+=count<br>                <span class="hljs-keyword">else</span>:<br>                    ans[temp]=count<br>        res=[]<br>        <span class="hljs-keyword">for</span> key,value <span class="hljs-keyword">in</span> ans.items():<br>            res.append(<span class="hljs-built_in">str</span>(value)+<span class="hljs-string">&#x27; &#x27;</span>+key)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>DataStructure</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•06-ç®—æ³•åˆ·é¢˜-é˜Ÿåˆ—-å †éƒ¨åˆ†</title>
    <link href="/posts/1bbb5318.html"/>
    <url>/posts/1bbb5318.html</url>
    
    <content type="html"><![CDATA[<p>å’Œæ ˆç›¸ä¼¼ï¼Œé˜Ÿåˆ—ä¹Ÿæ˜¯ä¸€ç§ä¾èµ–é¡ºåºçš„æ•°æ®ç»“æ„ï¼Œä¸è¿‡å®ƒçš„è§„åˆ™æ˜¯å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šä¼šæœ‰å¾ˆå¤šæ–°çš„æ“ä½œï¼Œå’Œå•è°ƒæ ˆç›¸ä¼¼çš„å•è°ƒé˜Ÿåˆ—ã€ä»¥åŠä¸åŒä¼˜å…ˆçº§çš„åŸºäºå †çš„ä¼˜å…ˆé˜Ÿåˆ—æ–¹æ³•</p><span id="more"></span><h2 id="0x01-é˜Ÿåˆ—çš„åŸºç¡€çŸ¥è¯†"><a class="markdownIt-Anchor" href="#0x01-é˜Ÿåˆ—çš„åŸºç¡€çŸ¥è¯†"></a> 0x01 é˜Ÿåˆ—çš„åŸºç¡€çŸ¥è¯†</h2><p>é˜Ÿåˆ—Queueï¼šæ˜¯ä¸€ç§çº¿æ€§è¡¨æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§åªå…è®¸åœ¨è¡¨çš„ä¸€ç«¯è¿›è¡Œæ’å…¥æ“ä½œï¼Œè€Œåœ¨è¡¨çš„å¦å¤–ä¸€ç«¯è¿›è¡Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨</p><p>é˜Ÿå°¾ï¼ˆrearï¼‰ï¼šé˜Ÿåˆ—ä¸­å…è®¸æ’å…¥ä¸€ç«¯</p><p>é˜Ÿå¤´ï¼ˆfrontï¼‰ï¼šå…è®¸åˆ é™¤çš„å¦ä¸€ç«¯</p><p>å½“è¡¨ä¸­æ²¡æœ‰ä»»ä½•å¯æ“ä½œçš„æ•°æ®å…ƒç´ ç§°ä¸ºç©ºé˜Ÿ</p><p>åŒæ ·çš„é˜Ÿåˆ—çš„è®¾è®¡åŒ…æ‹¬é¡ºåºå­˜å‚¨çš„é˜Ÿåˆ—å’Œé“¾å¼å­˜å‚¨çš„é˜Ÿåˆ—</p><p>é˜Ÿåˆ—è¿™ç§æ•°æ®ç»“æ„çš„åŸºæœ¬æ“ä½œå¯ä»¥åˆ†ä¸ºï¼š</p><ol><li>åˆå§‹åŒ–é˜Ÿåˆ—initï¼Œå®šä¹‰é˜Ÿåˆ—çš„å¤§å°sizeã€é˜Ÿå¤´å…ƒç´ æŒ‡é’ˆfrontã€é˜Ÿå°¾å…ƒç´ rear</li><li>åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºis_empty</li><li>åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼Œis_ful</li><li>æ’å…¥å…ƒç´ ï¼ˆå…¥é˜Ÿï¼‰</li><li>åˆ é™¤å…ƒç´ ï¼ˆå‡ºé˜Ÿï¼‰</li><li>è·å–é˜Ÿåˆ—é˜Ÿå¤´å…ƒç´ </li></ol><h2 id="0x02-é˜Ÿåˆ—çš„åŸºæœ¬è®¾è®¡"><a class="markdownIt-Anchor" href="#0x02-é˜Ÿåˆ—çš„åŸºæœ¬è®¾è®¡"></a> 0x02 é˜Ÿåˆ—çš„åŸºæœ¬è®¾è®¡</h2><p><a href="https://leetcode.cn/problems/design-circular-queue/">T 622 è®¾è®¡å¾ªç¯åˆ—</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCircularQueue</span>:<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, k: <span class="hljs-built_in">int</span></span>):<br>        self.size=k<br>        self.queue=[<span class="hljs-literal">None</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(k)]<br>        self.front=-<span class="hljs-number">1</span><br>        self.rear=-<span class="hljs-number">1</span><br>        self.num=<span class="hljs-number">0</span><br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">enQueue</span>(<span class="hljs-params">self, value: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br><br>        <span class="hljs-keyword">if</span> self.isFull():<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">else</span>:<br>            self.num+=<span class="hljs-number">1</span><br>            self.rear=(self.rear+<span class="hljs-number">1</span>)%self.size<br>            self.queue[self.rear]=value<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">deQueue</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-keyword">if</span> self.isEmpty():<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">else</span>:<br>            self.num-=<span class="hljs-number">1</span><br>            self.front=(self.front+<span class="hljs-number">1</span>)%self.size<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">Front</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:<br><br>        <span class="hljs-keyword">if</span> self.isEmpty():<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> self.queue[(self.front+<span class="hljs-number">1</span>)%self.size]<br>            <br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">Rear</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-keyword">if</span> self.isEmpty():<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> self.queue[self.rear]<br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">isEmpty</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-keyword">if</span> self.num==<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">isFull</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-keyword">if</span> self.num==self.size:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/sliding-window-maximum/">T 239 æ»‘åŠ¨çª—å£æœ€å¤§å€¼</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">maxSlidingWindow</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        stack=[]<br>        <span class="hljs-comment"># stackç”¨æ¥å­˜å‚¨æœ€å¤§å€¼çš„ä¸‹æ ‡ï¼Œä½¿ç”¨å•è°ƒé€’å‡æ ˆã€3ï¼Œ2ï¼Œ1ã€‘</span><br>        arr=[]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-comment"># éœ€è¦éå†æ¯ä¸ªæ•°ç»„</span><br>            <span class="hljs-comment"># ä¼˜å…ˆè€ƒè™‘indexè¶…å‡ºèŒƒå›´çš„ï¼Œç¬¬iä¸ªæ•°çš„æ—¶å€™ï¼Œè¾¹ç•Œå±€åŠ¿i-k+1</span><br>            <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> stack[<span class="hljs-number">0</span>]&lt;i-k+<span class="hljs-number">1</span>:<br>                stack.pop(<span class="hljs-number">0</span>)<br>            <span class="hljs-comment"># ä¹‹åè€ƒè™‘å€¼çš„å¤§å°</span><br>            <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> nums[stack[-<span class="hljs-number">1</span>]]&lt;nums[i]:<br>                stack.pop()<br>            stack.append(i)<br>            arr.append(nums[stack[<span class="hljs-number">0</span>]])<br>        <br>        <span class="hljs-keyword">return</span> arr[k-<span class="hljs-number">1</span>:]<br></code></pre></td></tr></table></figure><h2 id="0x03-ä¼˜å…ˆé˜Ÿåˆ—"><a class="markdownIt-Anchor" href="#0x03-ä¼˜å…ˆé˜Ÿåˆ—"></a> 0x03 ä¼˜å…ˆé˜Ÿåˆ—</h2><p>é˜Ÿåˆ—çš„ä½œç”¨ååˆ†æœ‰é™ï¼Œå¸¸è§çš„æ˜¯ä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼Œåœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­å…ƒç´ è¢«èµ‹äºˆä¸åŒçš„ä¼˜å…ˆçº§ï¼Œå½“è®¿é—®é˜Ÿåˆ—å…ƒç´ æ—¶ï¼ŒæŒ‰ç…§å…·æœ‰é«˜ä¼˜å…ˆçº§çš„å…ƒç´ æœ€å…ˆåˆ é™¤ï¼›ä¼˜å…ˆå¯¹ç«‹ä¸æ™®é€šé˜Ÿåˆ—æœ€å¤§çš„ä¸åŒç‚¹åœ¨äºå‡ºé˜Ÿé¡ºåºï¼Œä¼˜å…ˆé˜Ÿåˆ—æŒ‰ç…§ä¼˜å…ˆçº§æ¥å®ç° æœ€é«˜çº§å…ˆå‡ºçš„è§„åˆ™</p><p>psï¼šä¸ªäººè®¤ä¸ºï¼Œå’Œå•è°ƒæ ˆç±»ä¼¼ï¼Œä¼˜å…ˆé˜Ÿåˆ—çš„é‡ç‚¹åœ¨äºâ€œä¼˜å…ˆâ€ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°ä¸€ç§æ•°æ®æ–¹å¼ï¼Œæ¯æ¬¡æ’å…¥å’Œåˆ é™¤çš„æ—¶å€™å¯ä»¥ä¿è¯æœ€ä¸Šé¢ä¸€å±‚æ˜¯è‡ªå·±æƒ³çš„</p><p>ä¼˜å…ˆé˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯éå¸¸å¤šï¼š</p><ol><li>æ•°æ®å‹ç¼©çš„ huffmanç¼–ç </li><li>æœ€çŸ­è·¯å¾„ç®—æ³• Dijkstra</li><li>æœ€å°ç”Ÿæˆæ ‘ç®—æ³• primç®—æ³•</li><li>ä»»åŠ¡è°ƒåº¦å™¨ æ ¹æ®ä¼˜å…ˆçº§æ‰§è¡Œç³»ç»Ÿä»»åŠ¡</li><li>äº‹ä»¶é©±åŠ¨ä»¿çœŸ é¡¾å®¢æ’é˜Ÿç®—æ³•</li><li>é€‰æ‹©é—®é¢˜ æŸ¥æ‰¾ç¬¬Kæœ€å°å…ƒç´ </li></ol><h2 id="0x04-ä¼˜å…ˆé˜Ÿåˆ—è®¾è®¡å’Œä½¿ç”¨"><a class="markdownIt-Anchor" href="#0x04-ä¼˜å…ˆé˜Ÿåˆ—è®¾è®¡å’Œä½¿ç”¨"></a> 0x04 ä¼˜å…ˆé˜Ÿåˆ—è®¾è®¡å’Œä½¿ç”¨</h2><p>è®¾è®¡ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œè®¾è®¡çš„æ“ä½œä¸»è¦åœ¨äºå’Œæ™®é€šé˜Ÿåˆ—çš„enqueueå’Œdequeueä¹‹é—´çš„ä¸åŒ</p><p>é˜Ÿåˆ—çš„å®ç°æ–¹å¼ä¹Ÿä¸åŒï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„å®ç°ã€é“¾è¡¨å®ç°å’ŒäºŒå‰é˜Ÿå®ç°</p><ol><li>æ•°ç»„å®ç°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå…¥é˜Ÿæ“ä½œç›´æ¥æ’å…¥rearï¼ˆO1ï¼‰ã€å‡ºé˜Ÿæ“ä½œéœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œæ‰¾åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼Œè¿”å›å¹¶åˆ é™¤è¯¥å…ƒç´ ï¼Œæ—¶é—´å¤æ‚å¯¹ä¸ºOï¼ˆnï¼‰</li><li>é“¾è¡¨å®ç°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œé“¾è¡¨ä¸­çš„å…ƒç´ æŒ‰ç…§ä¼˜å…ˆçº§æ’åºï¼Œå…¥é˜Ÿæ“ä½œéœ€è¦ä¸ºå¾…æ’å…¥å…ƒç´ åˆ›å»ºèŠ‚ç‚¹ï¼Œå¹¶åœ¨é“¾è¡¨ä¸­æ‰¾åˆé€‚çš„æ’å…¥ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºON</li><li>äºŒå‰å †ç»“æ„å®ç°ä¼˜å…ˆé˜Ÿåˆ—ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§è¿›è¡Œæ’åºï¼Œå…¥é˜Ÿæ“ä½œå°±æ˜¯å°†å…ƒç´ æ’å…¥äºŒå‰å †ä¸­åˆé€‚ä½ç½®ï¼Œæ—¶é—´å¤æ‚å¯¹ä¸ºlogNã€å‡ºé˜Ÿæ“ä½œå°±æ˜¯è¿”å›äºŒå‰å †ä¸­ä¼˜å…ˆçº§æœ€å¤§èŠ‚ç‚¹åˆ é™¤ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯Oï¼ˆlogNï¼‰</li></ol><p>å½“ç„¶é™¤äº†è¿™ç§ç¬¨æ‹™çš„åˆ©ç”¨åŸå§‹æ•°æ®ç”Ÿæˆä¼˜å…ˆé˜Ÿåˆ—çš„æ–¹å¼ä¹‹å¤–ï¼Œåˆ«äººå·²ç»å†™å¥½äº†è½®å­ï¼Œæ¯”å¦‚javaé‡Œé¢çš„priority Queueã€C++çš„priority queueå’Œpythonçš„heapq</p><h3 id="41-ä»€ä¹ˆæ˜¯å †"><a class="markdownIt-Anchor" href="#41-ä»€ä¹ˆæ˜¯å †"></a> 4.1 ä»€ä¹ˆæ˜¯å †ï¼Ÿ</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h45f7ityxtj211u0u0dlv.jpg" alt="IMG_56E0A06B6165-1" /></p><h3 id="42-å †æ’åº"><a class="markdownIt-Anchor" href="#42-å †æ’åº"></a> 4.2 å †æ’åº</h3><p>æˆ‘ä»¬çŸ¥é“å°é¡¶å †çš„ç‰¹ç‚¹æ˜¯å †é¡¶æ°¸è¿œæ˜¯æœ€å°çš„æ•°ï¼Œè™½ç„¶æˆ‘ä»¬ä¸çŸ¥é“å…¶ä»–é¡ºåºï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“å †é¡¶æ˜¯æœ€å°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å †æ•°æ®ç»“æ„æ¥æ’åºï¼Œæ¯æ¬¡å–å‡ºæœ€å°çš„ï¼Œæ¥å®ç°æ’åºã€‚</p><p>å¯¹äºè¾“å…¥çš„numsæ•°ç»„ï¼Œæˆ‘ä»¬è°ƒç”¨buildMinHeapæ¥å®ç°æ•°ç»„å‘å°é¡¶å †çš„è½¬å˜ï¼Œå…·ä½“è¿‡ç¨‹æ˜¯ä¸æ–­è°ƒæ•´æ•°ç»„ã€‚</p><p>åœ¨å»ºç«‹å°é¡¶å †ä¹‹åï¼Œæˆ‘ä»¬æ¯æ¬¡å–å‡ºå †é¡¶å…ƒç´ åˆ°æ•°ç»„å°¾éƒ¨ï¼Œå¹¶å¯¹å‰é¢çš„ã€0:n-2ã€‘è¿›è¡Œå †è°ƒæ•´ï¼Œç”±æ­¤æ¥ä¿æŒå †çš„ç‰¹æ€§ï¼ˆè¿™é‡Œçš„heapfiyå°±æ˜¯heap Adjustï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">sortArray</span>(<span class="hljs-params">nums</span>):<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">heapfiy</span>(<span class="hljs-params">arr,index,end</span>):<br><span class="hljs-comment"># è°ƒæ•´æˆä¸ºå¤§é¡¶å †</span><br>left=index*<span class="hljs-number">2</span>+<span class="hljs-number">1</span><br>right=left+<span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> left&lt;=end:<br>min_index=index<br><span class="hljs-keyword">if</span> arr[left]&lt;arr[min_index]:<br>min_index=left<br><span class="hljs-keyword">if</span> right&lt;=end <span class="hljs-keyword">and</span> arr[right]&lt;arr[min_index]:<br>min_index=right<br><span class="hljs-keyword">if</span> index == min_index:<br><span class="hljs-keyword">break</span> <br><br>arr[index],arr[min_index]=arr[min_index],arr[index]<br><br><br><span class="hljs-comment"># break</span><br>index=min_index<br>left=index*<span class="hljs-number">2</span>+<span class="hljs-number">1</span><br>right=left+<span class="hljs-number">1</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">buildMinHeap</span>(<span class="hljs-params">arr</span>):<br>size=<span class="hljs-built_in">len</span>(arr)<br><span class="hljs-comment"># å †é‡Œé¢æœ€é‡è¦çš„ä¸€ä¸ªæ€§è´¨å°±æ˜¯ï¼Œå­èŠ‚ç‚¹çš„ä¸‹æ ‡ç­‰äºi*2+1ã€i*2+2</span><br><span class="hljs-comment"># æœ€åä¸€ä¸ªéå¶èŠ‚ç‚¹ï¼ˆsize-2)//2</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>((size-<span class="hljs-number">2</span>)//<span class="hljs-number">2</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>heapfiy(arr,i,size-<span class="hljs-number">1</span>)<br><span class="hljs-keyword">return</span> arr<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">minHeapSort</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-comment"># åŸå§‹åºåˆ—æ„å»ºå¤§é¡¶å †</span><br><span class="hljs-comment"># äº¤æ¢æœ€å¤§å€¼å’Œn-1çš„é¡ºåº</span><br><span class="hljs-comment"># æ–°çš„åºåˆ—é‡æ–°æ„å»ºå¤§é¡¶å †</span><br>arr=buildMinHeap(arr)<br><span class="hljs-built_in">print</span>(arr)<br>size=<span class="hljs-built_in">len</span>(arr)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(size):<br>arr[<span class="hljs-number">0</span>],arr[size-i-<span class="hljs-number">1</span>]=arr[size-i-<span class="hljs-number">1</span>],arr[<span class="hljs-number">0</span>]<br>heapfiy(arr,<span class="hljs-number">0</span>,size-i-<span class="hljs-number">2</span>)<br><span class="hljs-keyword">return</span> arr<br><br><span class="hljs-keyword">return</span> minHeapSort(nums)<br><span class="hljs-built_in">print</span>(sortArray([<span class="hljs-number">23</span>,<span class="hljs-number">34</span>,<span class="hljs-number">23</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">9</span>,<span class="hljs-number">667</span>,<span class="hljs-number">9</span>,<span class="hljs-number">0</span>]))<br></code></pre></td></tr></table></figure><h3 id="43-åŸºäºå †å®ç°ä¼˜å…ˆé˜Ÿåˆ—"><a class="markdownIt-Anchor" href="#43-åŸºäºå †å®ç°ä¼˜å…ˆé˜Ÿåˆ—"></a> 4.3 åŸºäºå †å®ç°ä¼˜å…ˆé˜Ÿåˆ—</h3><p>æˆ‘ä»¬çŸ¥é“ä¼˜å…ˆé˜Ÿåˆ—æ˜¯åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†çš„ï¼Œä¸€ä¸ªæ˜¯ä¼˜å…ˆçº§ã€ä¸€ä¸ªæ˜¯åŸå§‹æ•°æ®ï¼›å› æ­¤æˆ‘ä»¬é€šå¸¸éœ€è¦ç”¨å †æ¥å­˜å‚¨åŸå§‹æ•°æ®ï¼Œä½†æ˜¯åœ¨è°ƒæ•´çš„è¿‡ç¨‹ä¸­åˆ©ç”¨ä¼˜å…ˆçº§æ¥æ¯”è¾ƒã€‚ï¼ˆå’Œå•è°ƒæ ˆä¸­æ•°æ®çš„å€¼å’Œæ•°æ®çš„ä¸‹æ ‡ç±»ä¼¼ï¼‰</p><p><a href="https://leetcode.cn/problems/kth-largest-element-in-a-stream/">T703 æ•°æ®æµä¸­çš„ç¬¬Kå¤§å…ƒç´ </a></p><p>å¾ˆç»å…¸å°±æ˜¯ç»´æŠ¤ä¸€ä¸ªé•¿åº¦ä¸ºkçš„ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå¦‚æœæ•°æ®é•¿äº†å°±popå‡ºå †é¡¶å…ƒç´ æ¥ä¿æŒä¿æŒè‡ªèº«çš„å®Œæ•´æ€§</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">KthLargest</span>:<br>    <span class="hljs-comment"># é‡ç‚¹åœ¨äºæ˜¯å¦å¯ä»¥åˆ©ç”¨addä¹‹å‰æ•°æ®æ’åˆ—æ–¹å¼</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, k: <span class="hljs-built_in">int</span>, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>):<br>        self.k=k<br>        self.arr=nums<br>        self.buildHeap(self.k)<br>        <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(self.arr)&gt;self.k:<br>            self.heapPop()<br>        <span class="hljs-comment"># ç»´æŠ¤ä¸€ä¸ªå¤§å°çš„ä¸ºkçš„æœ€å°å †</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, val: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        self.heapPush(val)<br>        <br>        <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(self.arr)&gt;self.k:<br>            self.heapPop()<br>        <span class="hljs-keyword">return</span> self.arr[<span class="hljs-number">0</span>]<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">buildHeap</span>(<span class="hljs-params">self,k</span>):<br>        size=<span class="hljs-built_in">len</span>(self.arr)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>((size-<span class="hljs-number">2</span>)//<span class="hljs-number">2</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>            <span class="hljs-comment"># è‡ªä¸‹å¾€ä¸Šçš„ç»´æŠ¤ä¸€ä¸ªå †</span><br>            self.heapAdjust(i,size-<span class="hljs-number">1</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">heapAdjust</span>(<span class="hljs-params">self,index,end</span>):<br>        <span class="hljs-comment"># indexä»£è¡¨æ˜¯çˆ¶èŠ‚ç‚¹</span><br>        child_l=index*<span class="hljs-number">2</span>+<span class="hljs-number">1</span><br>        child_r=child_l+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span>(child_l&lt;=end):<br>            min_index=index<br>            <span class="hljs-keyword">if</span> self.arr[child_l]&lt;self.arr[min_index]:<br>                min_index=child_l<br>            <span class="hljs-keyword">if</span> child_r &lt;=end <span class="hljs-keyword">and</span> self.arr[child_r]&lt;self.arr[min_index]:<br>                min_index=child_r<br>            <span class="hljs-keyword">if</span> index==min_index:<br>                <span class="hljs-keyword">break</span><br>            <br>            self.arr[min_index],self.arr[index]=self.arr[index],self.arr[min_index]<br>            index=min_index<br>            child_l=index*<span class="hljs-number">2</span>+<span class="hljs-number">1</span><br>            child_r=child_l+<span class="hljs-number">1</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">heapPop</span>(<span class="hljs-params">self</span>):<br>        size=<span class="hljs-built_in">len</span>(self.arr)<br>        self.arr[<span class="hljs-number">0</span>],self.arr[-<span class="hljs-number">1</span>]=self.arr[-<span class="hljs-number">1</span>],self.arr[<span class="hljs-number">0</span>]<br>        top=self.arr.pop()<br>        <span class="hljs-comment"># é‡æ–°æ•´ç†</span><br>        <span class="hljs-keyword">if</span> size&gt;<span class="hljs-number">0</span>:<br>            self.heapAdjust(<span class="hljs-number">0</span>,size-<span class="hljs-number">2</span>)<br>        <span class="hljs-keyword">return</span> top<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">heapPush</span>(<span class="hljs-params">self,val</span>):<br>        self.arr.append(val)<br>        size=<span class="hljs-built_in">len</span>(self.arr)<br>        i=size-<span class="hljs-number">1</span><br>        cur_root=(i-<span class="hljs-number">1</span>)//<span class="hljs-number">2</span><br>        <span class="hljs-keyword">while</span>(cur_root&gt;=<span class="hljs-number">0</span>):<br>            <span class="hljs-keyword">if</span> self.arr[cur_root]&lt;val:<br>                <span class="hljs-keyword">break</span><br>            self.arr[i]=self.arr[cur_root]<br>            i=cur_root<br>            cur_root=(i-<span class="hljs-number">1</span>)//<span class="hljs-number">2</span><br>        self.arr[i]=val<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/top-k-frequent-elements/">T347 å‰Kä¸ªé«˜é¢‘å…ƒç´ </a></p><p>è¿™é‡Œä¸ä¹‹å‰ç±»ä¼¼çš„åœ°æ–¹ï¼Œè¿˜æ˜¯æ±‚Kä¸ªæ»¡è¶³æ¡ä»¶çš„å€¼ï¼Œåªä¸è¿‡ä¸æ˜¯å€¼æœ¬èº«ï¼Œè€Œæ˜¯æ¶‰åŠå€¼çš„å…ƒç´ ï¼Œæ‰€ä»¥å¯ä»¥è¯´æ˜¯å †ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¼˜å…ˆé˜Ÿåˆ—ï¼Œåªä¸è¿‡ä»£è¡¨çš„å®é™…å€¼éœ€è¦ç¿»è¯‘ä¸€ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">topKFrequent</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>            num_dict=<span class="hljs-built_in">dict</span>()<br>            <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>                <span class="hljs-keyword">if</span> num <span class="hljs-keyword">in</span> num_dict:<br>                    num_dict[num]+=<span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    num_dict[num]=<span class="hljs-number">1</span><br><br>            new_nums=<span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(nums))<br><br>            <span class="hljs-keyword">def</span> <span class="hljs-title function_">heapfiy</span>(<span class="hljs-params">heap,index,end</span>):<br>                child_l=index*<span class="hljs-number">2</span>+<span class="hljs-number">1</span><br>                child_r=index*<span class="hljs-number">2</span>+<span class="hljs-number">2</span><br>                <span class="hljs-keyword">while</span>(child_l&lt;=end):<br>                    min_index=index<br>                    <span class="hljs-keyword">if</span> num_dict[heap[min_index]]&gt;num_dict[heap[child_l]]:<br>                        min_index=child_l<br>                    <span class="hljs-keyword">if</span> child_r&lt;=end <span class="hljs-keyword">and</span> num_dict[heap[min_index]]&gt;num_dict[heap[child_r]]:<br>                        min_index=child_r<br>                    <span class="hljs-keyword">if</span> num_dict[heap[index]]==num_dict[heap[min_index]]:<br>                        <span class="hljs-keyword">break</span><br><br>                    <span class="hljs-comment"># äº¤æ¢å †é‡Œé¢çš„ä½ç½®</span><br>                    heap[min_index],heap[index]=heap[index],heap[min_index]<br>                    index=min_index<br>                    child_l=index*<span class="hljs-number">2</span>+<span class="hljs-number">1</span><br>                    child_r=index*<span class="hljs-number">2</span>+<span class="hljs-number">2</span><br><br>            <span class="hljs-keyword">def</span> <span class="hljs-title function_">heappush</span>(<span class="hljs-params">heap,val</span>):<br>                heap.append(val)<br>                i=<span class="hljs-built_in">len</span>(heap)-<span class="hljs-number">1</span><br>                <span class="hljs-keyword">while</span>((i-<span class="hljs-number">1</span>)//<span class="hljs-number">2</span>&gt;=<span class="hljs-number">0</span>):<br>                    cur_root=(i-<span class="hljs-number">1</span>)//<span class="hljs-number">2</span><br>                    <span class="hljs-keyword">if</span> num_dict[heap[cur_root]]&lt;num_dict[val]:<br>                        <span class="hljs-keyword">break</span><br>                    heap[i]=heap[cur_root]<br>                    i=cur_root<br>                heap[i]=val<br>                <span class="hljs-keyword">return</span> heap<br><br>            <span class="hljs-keyword">def</span> <span class="hljs-title function_">heappop</span>(<span class="hljs-params">heap</span>):<br>                heap[<span class="hljs-number">0</span>],heap[-<span class="hljs-number">1</span>]=heap[-<span class="hljs-number">1</span>],heap[<span class="hljs-number">0</span>]<br>                heap.pop()<br>                heap=heapfiy(heap,<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(heap)-<span class="hljs-number">1</span>)<br>                <span class="hljs-keyword">return</span> heap<br><br>            <span class="hljs-comment"># ç»´æŠ¤ä¸€ä¸ªå †ï¼Œæ¯æ¬¡pushä¸€ä¸ªå…ƒç´ </span><br>            <span class="hljs-comment"># é•¿åº¦è¶…è¿‡kï¼Œéœ€è¦popä¸€ä¸ªå…ƒç´ </span><br>            <span class="hljs-comment"># éœ€è¦ç»´æŠ¤çš„æ˜¯æœ€å°å †</span><br>            <br>            res=[]<br>            <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> new_nums:<br>                heappush(res,num)<br><br>            <span class="hljs-keyword">while</span>(<span class="hljs-built_in">len</span>(res)&gt;k):<br>                heappop(res)<br>            <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/k-closest-points-to-origin/">T973 æœ€æ¥è¿‘åŸç‚¹çš„Kä¸ªç‚¹</a></p><p>ä¸€æ ·çš„ï¼Œåªä¸è¿‡è®¡æ•°å˜æˆäº†æ¬§æ°è·ç¦»ï¼Œæœ‰ç‚¹æ— èŠçš„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">kClosest</span>(<span class="hljs-params">self, points: <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">disCounting</span>(<span class="hljs-params">point</span>):<br>            <span class="hljs-keyword">return</span> point[<span class="hljs-number">0</span>]*point[<span class="hljs-number">0</span>]+point[<span class="hljs-number">1</span>]*point[<span class="hljs-number">1</span>]<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">heapAdjust</span>(<span class="hljs-params">heap,index,end</span>):<br>            child_l=index*<span class="hljs-number">2</span>+<span class="hljs-number">1</span><br>            child_r=index*<span class="hljs-number">2</span>+<span class="hljs-number">2</span><br>            <span class="hljs-keyword">while</span>(child_l&lt;=end):<br>                max_index=index<br>                <span class="hljs-keyword">if</span> disCounting(heap[child_l])&gt;disCounting(heap[max_index]):<br>                    max_index=child_l<br>                <span class="hljs-keyword">if</span> child_r&lt;=end <span class="hljs-keyword">and</span> disCounting(heap[child_r])&gt;disCounting(heap[max_index]):<br>                    max_index=child_r<br>                <span class="hljs-keyword">if</span> max_index==index:<br>                    <span class="hljs-keyword">break</span><br>                <br>                heap[index],heap[max_index]=heap[max_index],heap[index]<br>                index=max_index<br>                child_l=index*<span class="hljs-number">2</span>+<span class="hljs-number">1</span><br>                child_r=index*<span class="hljs-number">2</span>+<span class="hljs-number">2</span><br>        <br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">heappush</span>(<span class="hljs-params">heap,val</span>):<br>            <span class="hljs-comment"># è·ç¦»ä¸ºä¼˜å…ˆçº§</span><br>            <span class="hljs-comment"># é‡Œé¢çš„å…ƒç´ ä¸ºpoint</span><br>            heap.append(val)<br>            i=<span class="hljs-built_in">len</span>(heap)-<span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span>((i-<span class="hljs-number">1</span>)//<span class="hljs-number">2</span>&gt;=<span class="hljs-number">0</span>):<br>                cur_root=(i-<span class="hljs-number">1</span>)//<span class="hljs-number">2</span><br><br>                <span class="hljs-keyword">if</span> disCounting(heap[cur_root])&gt;disCounting(val):<br>                    <span class="hljs-keyword">break</span><br>                heap[i]=heap[cur_root]<br>                i=cur_root<br>            heap[i]=val<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">heappop</span>(<span class="hljs-params">heap</span>):<br>            heap[<span class="hljs-number">0</span>],heap[-<span class="hljs-number">1</span>]=heap[-<span class="hljs-number">1</span>],heap[<span class="hljs-number">0</span>]<br>            heap.pop()<br>            heapAdjust(heap,<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(heap)-<span class="hljs-number">1</span>)<br><br>        res=[]<br>        <span class="hljs-keyword">for</span> point <span class="hljs-keyword">in</span> points:<br>            heappush(res,point)<br>        <br>        <span class="hljs-keyword">while</span>(<span class="hljs-built_in">len</span>(res)&gt;k):<br>            heappop(res)<br>        <br>        <span class="hljs-keyword">return</span> res<br>            <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>DataStructure</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•05-ç®—æ³•åˆ·é¢˜-å †æ ˆéƒ¨åˆ†</title>
    <link href="/posts/3ad3c8e3.html"/>
    <url>/posts/3ad3c8e3.html</url>
    
    <content type="html"><![CDATA[<p>æ•°æ®ç»“æ„ã€ç®—æ³•æ€æƒ³ï¼Œå…·ä½“é—®é¢˜çš„è®¾è®¡èƒ½åŠ›ï¼Œä»¥åŠä¸€äº›é»‘è¯ä¹Ÿæ˜¯æœ‰å¿…è¦çš„ï¼Œæ¯”å¦‚åŒæŒ‡é’ˆã€æ»‘åŠ¨çª—å£ã€å•è°ƒæ ˆã€ä¼˜å…ˆé˜Ÿåˆ—ç­‰</p><span id="more"></span><h2 id="0x01-å †æ ˆçš„åŸºæœ¬çŸ¥è¯†"><a class="markdownIt-Anchor" href="#0x01-å †æ ˆçš„åŸºæœ¬çŸ¥è¯†"></a> 0x01 å †æ ˆçš„åŸºæœ¬çŸ¥è¯†</h2><p>**å †æ ˆï¼ˆStackï¼‰**ç®€ç§°ä¸ºæ ˆã€‚ä¸€ç§çº¿æ€§è¡¨æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§åªå…è®¸åœ¨è¡¨çš„ä¸€ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„çº¿æ€§è¡¨ã€‚</p><p>æˆ‘ä»¬æŠŠæ ˆä¸­å…è®¸æ’å…¥å’Œåˆ é™¤çš„ä¸€ç«¯ç§°ä¸º **ã€Œæ ˆé¡¶ï¼ˆtopï¼‰ã€ï¼›**å¦ä¸€ç«¯åˆ™ç§°ä¸º <strong>ã€Œæ ˆåº•ï¼ˆbottomï¼‰ã€</strong> ã€‚å½“è¡¨ä¸­æ²¡æœ‰ä»»ä½•æ•°æ®å…ƒç´ æ—¶ï¼Œç§°ä¹‹ä¸º <strong>ã€Œç©ºæ ˆã€ã€‚</strong></p><p>ä¸»è¦æ“ä½œåˆ†ä¸ºæ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œåˆ†åˆ«æ˜¯å…¥æ ˆæ“ä½œå’Œå‡ºæ ˆæ“ä½œã€‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3zvrja07yj204r05q744.jpg" alt="image-20220708221924230" /></p><p>è®©æˆ‘ä»¬æ¥è®¾è®¡ä¸€ä¸ªå †æ ˆï¼Œå¯¹ä¸€ä¸ªéç›´è§‚çš„æ•°æ®ç»“æ„æŒæ¡çš„æœ€å¥½æ–¹æ³•æ˜¯ç”¨åŸºæœ¬çš„æ•°æ®ç»“æ„æ¥å®ç°å®ƒï¼Œå‚ç…§ï¼š<a href="https://leetcode.cn/problems/min-stack/"><strong>T155 æœ€å°æ ˆè®¾è®¡</strong></a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MinStack</span>:<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.stack=[]<br>        self.topPointer=-<span class="hljs-number">1</span><br>        self.<span class="hljs-built_in">min</span>=[]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self, val: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:<br>        self.stack.append(val)<br>        self.topPointer+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> self.topPointer==<span class="hljs-number">0</span>:<br>            self.<span class="hljs-built_in">min</span>.append(val)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">if</span> val&lt;self.<span class="hljs-built_in">min</span>[-<span class="hljs-number">1</span>]:<br>                self.<span class="hljs-built_in">min</span>.append(val)<br>            <span class="hljs-keyword">else</span>:<br>                self.<span class="hljs-built_in">min</span>.append(self.<span class="hljs-built_in">min</span>[-<span class="hljs-number">1</span>])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:<br>        self.<span class="hljs-built_in">min</span>.pop()<br>        self.stack.pop()<br>        self.topPointer-=<span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">top</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">int</span>:<br><br>        <span class="hljs-keyword">return</span> self.stack[-<span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h2 id="0x02-å †æ ˆçš„åŸºæœ¬ä½œç”¨"><a class="markdownIt-Anchor" href="#0x02-å †æ ˆçš„åŸºæœ¬ä½œç”¨"></a> 0x02 å †æ ˆçš„åŸºæœ¬ä½œç”¨</h2><p>ä¸å…¶è¯´å †æ ˆæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒæ›´å¤šçš„æ˜¯ä¸€ç§è®¾è®¡ç®—æ³•çš„æŠ€å·§ï¼ˆå¦‚æœå•çº¯ä»ç®—æ³•çš„è§’åº¦æ¥è¯´ï¼‰ï¼Œå½“ç„¶åœ¨å®é™…ç¡¬ä»¶ä¸­ä¹Ÿå­˜åœ¨ç”±äºç¡¬ä»¶çš„é™åˆ¶ï¼ˆæ¯”å¦‚ç£å¸¦ï¼‰å¯¼è‡´é¡ºåºçš„é—®é¢˜ã€‚</p><p>ä»ç®—æ³•çš„è§’åº¦æ¥è¯´ï¼Œå †æ ˆå…·æœ‰çš„ä½œç”¨</p><ul><li>ä½¿ç”¨å †æ ˆå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¿å­˜å’Œå–ç”¨ä¿¡æ¯ï¼Œå› æ­¤é•¿è¢«ç”¨ä½œç®—æ³•å’Œç¨‹åºä¸­çš„è¾…åŠ©å­˜å‚¨ç»“æ„ï¼Œä¸´æ—¶ä¿å­˜ä¿¡æ¯ï¼Œä¾›åé¢æ“ä½œä¸­ä½¿ç”¨ã€‚<ul><li>ä¾‹å¦‚ï¼šæ“ä½œç³»ç»Ÿä¸­çš„å‡½æ•°è°ƒç”¨æ ˆï¼Œæµè§ˆå™¨ä¸­çš„å‰è¿›ã€åé€€åŠŸèƒ½ã€‚</li></ul></li><li>å †æ ˆçš„åè¿›å…ˆå‡ºè§„åˆ™ï¼Œå¯ä»¥ä¿è¯ç‰¹å®šçš„å­˜å–é¡ºåºã€‚<ul><li>ä¾‹å¦‚ï¼šç¿»è½¬ä¸€ç»„å…ƒç´ çš„é¡ºåºã€é“è·¯åˆ—è½¦è½¦è¾†è°ƒåº¦ã€‚</li></ul></li></ul><h2 id="0x03-å †æ ˆçš„é¢˜ç›®"><a class="markdownIt-Anchor" href="#0x03-å †æ ˆçš„é¢˜ç›®"></a> 0x03 å †æ ˆçš„é¢˜ç›®</h2><h3 id="31-æœ‰æ•ˆçš„æ‹¬å·"><a class="markdownIt-Anchor" href="#31-æœ‰æ•ˆçš„æ‹¬å·"></a> 3.1 æœ‰æ•ˆçš„æ‹¬å·</h3><p><a href="https://leetcode.cn/problems/valid-parentheses/">T20 æœ‰æ•ˆçš„æ‹¬å·</a></p><p>ä¸€ä¸ªéå¸¸ç»å…¸çš„é¢˜ç›®ï¼Œç®—æ˜¯å †æ ˆçš„å…ˆå…¥åå‡ºçš„å…¸å‹çš„åº”ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">isValid</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">len</span>(s)%<span class="hljs-number">2</span>==<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>        flagStack=[]<br>        pair=&#123;<span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-string">&#x27;(&#x27;</span>,<span class="hljs-string">&#x27;&#125;&#x27;</span>:<span class="hljs-string">&#x27;&#123;&#x27;</span>,<span class="hljs-string">&#x27;]&#x27;</span>:<span class="hljs-string">&#x27;[&#x27;</span>&#125;<br>        <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(flagStack)!=<span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">if</span> char <span class="hljs-keyword">in</span> pair <span class="hljs-keyword">and</span> flagStack[-<span class="hljs-number">1</span>]==pair[char]:<br>                    flagStack.pop()<br>                <span class="hljs-keyword">else</span>: <br>                    flagStack.append(char)<br>            <span class="hljs-keyword">else</span>:<br>                flagStack.append(char)<br><br>        <span class="hljs-keyword">if</span> flagStack:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure><h3 id="32-åŸºæœ¬è®¡ç®—å™¨ii"><a class="markdownIt-Anchor" href="#32-åŸºæœ¬è®¡ç®—å™¨ii"></a> 3.2 åŸºæœ¬è®¡ç®—å™¨II</h3><p><a href="https://leetcode.cn/problems/basic-calculator-ii/">T227 åŸºæœ¬è®¡ç®—å™¨II</a></p><p>é‡ç‚¹æ€æƒ³æ˜¯å°†æ¯ä¸ªå…ƒç´ ï¼Œéƒ½çœ‹æˆnumåœ¨optionçš„åé¢ï¼Œä½†æ˜¯é€ä¸ªå–å‡ºnumå’Œoptionï¼›zè¿™é‡Œæ²¡æœ‰è€ƒè™‘ åˆ°pythonçš„å­—ç¬¦ä¸²æ“ä½œåŠŸèƒ½</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python">s Solution:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        size=<span class="hljs-built_in">len</span>(s)<br>        stack=[]<br>        op=<span class="hljs-string">&#x27;+&#x27;</span><br>        index=<span class="hljs-number">0</span><br>        num=<span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">while</span>(index&lt;size):<br><br>            <span class="hljs-keyword">if</span> s[index] <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;+-*/&#x27;</span>:<br>                <span class="hljs-comment"># å¦‚æœæ˜¯è¿ç®—ç¬¦</span><br>                num=<span class="hljs-string">&#x27;&#x27;</span><br>                op=s[index]<br>                index+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-comment"># éœ€è¦å°†numå–å‡ºæ¥</span><br>                <span class="hljs-keyword">while</span>(index&lt;size <span class="hljs-keyword">and</span> s[index] <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;+-*/&#x27;</span>):<br>                    num+=s[index]<br>                    index+=<span class="hljs-number">1</span><br>                num=<span class="hljs-built_in">int</span>(num)<br>                <span class="hljs-keyword">if</span> op==<span class="hljs-string">&#x27;+&#x27;</span>:<br>                    stack.append(num)<br>                <span class="hljs-keyword">elif</span> op==<span class="hljs-string">&#x27;-&#x27;</span>:<br>                    stack.append(-num)<br>                <span class="hljs-keyword">elif</span> op==<span class="hljs-string">&#x27;*&#x27;</span>:<br>                    top=stack.pop()<br>                    stack.append(top*num)<br>                <span class="hljs-keyword">elif</span> op==<span class="hljs-string">&#x27;/&#x27;</span>:<br>                    top=stack.pop()<br>                    stack.append(<span class="hljs-built_in">int</span>(top/num))<br></code></pre></td></tr></table></figure><h3 id="33-é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼"><a class="markdownIt-Anchor" href="#33-é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼"></a> 3.3 é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼</h3><p><a href="https://leetcode.cn/problems/evaluate-reverse-polish-notation/">T150 é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼</a></p><p>æ€è·¯å’ŒT227å·®ä¸å¤š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">evalRPN</span>(<span class="hljs-params">self, tokens: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        numStack=[]<br>        <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> tokens:<br>            <span class="hljs-keyword">if</span> char <span class="hljs-keyword">in</span> <span class="hljs-string">&#x27;+-*/&#x27;</span>:<br>                <span class="hljs-comment"># å–å‡ºæ¥å‰ä¸¤ä¸ªæ•°å­—</span><br>                num1=numStack.pop()<br>                num2=numStack.pop()<br>                <span class="hljs-keyword">if</span> char==<span class="hljs-string">&#x27;+&#x27;</span>:<br>                    numStack.append(num1+num2)<br>                <span class="hljs-keyword">elif</span> char==<span class="hljs-string">&#x27;-&#x27;</span>:<br>                    numStack.append(num2-num1)<br>                <span class="hljs-keyword">elif</span> char==<span class="hljs-string">&#x27;*&#x27;</span>:<br>                    numStack.append(num1*num2)<br>                <span class="hljs-keyword">else</span>:<br>                    numStack.append(<span class="hljs-built_in">int</span>(num2/num1))<br>            <span class="hljs-keyword">else</span>:<br>                numStack.append(<span class="hljs-built_in">int</span>(char))<br>        <span class="hljs-keyword">return</span> numStack.pop()<br></code></pre></td></tr></table></figure><h3 id="34-å­—ç¬¦ä¸²è§£ç "><a class="markdownIt-Anchor" href="#34-å­—ç¬¦ä¸²è§£ç "></a> 3.4 å­—ç¬¦ä¸²è§£ç </h3><p>ç”¨è¿™ä¸ªæ ˆæ¥è®°å½•å½“å‰çš„å…ƒç´ ï¼Œå¦‚æœä¸ºã€‘å°±å‘åä¸€ç›´æœå¯»åˆ°ã€ï¼Œå¾—åˆ°numå’Œstrï¼Œæ¥åå¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decodeString</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        elementStack=[]<br>        temp=<span class="hljs-string">&#x27;&#x27;</span><br>        num=<span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> s:<br>            elementStack.append(char)<br>            <span class="hljs-keyword">if</span> char==<span class="hljs-string">&#x27;]&#x27;</span>:<br>                <span class="hljs-comment"># æå–å­—ç¬¦ä¸²</span><br>                elementStack.pop()<br>                <span class="hljs-keyword">while</span>(elementStack[-<span class="hljs-number">1</span>]!=<span class="hljs-string">&#x27;[&#x27;</span>):<br>                    top=elementStack.pop()<br>                    temp+=top[::-<span class="hljs-number">1</span>]<br>                elementStack.pop()<br>                <span class="hljs-keyword">while</span>(<span class="hljs-built_in">len</span>(elementStack)&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> elementStack[-<span class="hljs-number">1</span>].isdigit()):<br>                    num+=elementStack.pop()<br>                <span class="hljs-comment"># æ–°çš„å­—ç¬¦</span><br>                <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>(num[::-<span class="hljs-number">1</span>])):<br>                    elementStack.append(temp[::-<span class="hljs-number">1</span>])<br>                num=<span class="hljs-string">&#x27;&#x27;</span><br>                temp=<span class="hljs-string">&#x27;&#x27;</span><br>        res=<span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> elementStack:<br>            res+=e<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><h3 id="35-éªŒè¯æ ˆåºåˆ—"><a class="markdownIt-Anchor" href="#35-éªŒè¯æ ˆåºåˆ—"></a> 3.5 éªŒè¯æ ˆåºåˆ—</h3><p><a href="https://leetcode.cn/problems/validate-stack-sequences/">T946 éªŒè¯æ ˆåºåˆ—</a></p><p>æ„Ÿè§‰è¿™ä¸ªå°±éå¸¸è€ƒéªŒæ€ç»´èƒ½åŠ›ï¼Œå› ä¸ºpushedå’Œpoppedç›¸å½“äºä¸ºé€†åæ“ä½œï¼Œå› æ­¤å¯ä»¥ç¿»å½’æ¥æŒ‰ç…§å †æ ˆçš„æ–¹å¼ç»§ç»­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">validateStackSequences</span>(<span class="hljs-params">self, pushed: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], popped: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        <span class="hljs-comment"># å’Œæ‹¬å·ä¸€æ ·çš„</span><br>        <span class="hljs-comment"># æ—¢ç„¶pushedå’Œpoppedéƒ½æ˜¯æŒ‰ç…§stackçš„è§„åˆ™</span><br>        <span class="hljs-comment"># åè¿‡æ¥ä¹Ÿå¯ä»¥ç”¨stackçš„è§„åˆ™æ¥è¿›è¡Œæ’åº</span><br>        j=<span class="hljs-number">0</span><br>        stack=[]<br>        j=<span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> pushed:<br>            stack.append(p)<br>            <span class="hljs-keyword">while</span>(stack <span class="hljs-keyword">and</span> stack[-<span class="hljs-number">1</span>]==popped[j]):<br>                stack.pop()<br>                j+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> j==<span class="hljs-built_in">len</span>(pushed)<br></code></pre></td></tr></table></figure><h2 id="0x04-å•è°ƒæ ˆmonotone-stackåŸºç¡€çŸ¥è¯†"><a class="markdownIt-Anchor" href="#0x04-å•è°ƒæ ˆmonotone-stackåŸºç¡€çŸ¥è¯†"></a> 0x04 å•è°ƒæ ˆï¼ˆMonotone stackï¼‰åŸºç¡€çŸ¥è¯†</h2><p>å•è°ƒæ ˆåªæ˜¯å…·æœ‰æ›´å¼ºé™åˆ¶çš„æ ˆï¼Œå®ƒéœ€è¦äººä¸ºè®¾ç½®è§„åˆ™ï¼ˆè®¾ç½®é€’å¢æˆ–è€…é€’å‡ï¼‰çš„å•è°ƒæ ˆï¼Œç”±æ­¤å¯ä»¥å®ç°çš„ç›®çš„ä¸ºï¼šã€å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…æ‰¾åˆ°ä¸€å®šæ•°ç»„å†…çš„æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼ï¼›åŒæ—¶ç²¾ç®€åˆ é™¤ä¸€äº›æ— ç”¨çš„ä¿¡æ¯ã€‘ï¼Œæ‰€ä»¥åœ¨ç®—æ³•è®¾è®¡ä¸Šéœ€è¦æ›´åŠ å·§å¦™ã€‚</p><p>é€šå¸¸å¯ä»¥åˆ†ä¸ºå•è°ƒé€’å¢æ ˆå’Œå•è°ƒé€’å‡æ ˆï¼Œè¿™ä¸ªé¡ºåºå’Œä»€ä¹ˆæ˜¯æ ˆé¡¶ã€ä»€ä¹ˆæ˜¯æ ˆåº•ä¸€æ ·å¾ˆéš¾è®©äººç†æ¸…æ¥šé¡ºåºï¼Œå› æ­¤åªéœ€è¦è€ƒè™‘åœ¨å•è°ƒæ ˆä¸­æ ˆçš„å¤§å°é¡ºåºæ˜¯å•è°ƒçš„ï¼Œç”±æ­¤å¯ä»¥è®¾è®¡è¿›å‡ºæ ˆçš„é¡ºåºï¼Œä»¥å•è°ƒé€’å¢æ ˆä¸ºä¾‹ï¼š</p><ul><li>å‡è®¾å½“å‰è¿›æ ˆå…ƒç´ ä¸º <code>x</code>ï¼Œå¦‚æœ <code>x</code> æ¯”æ ˆé¡¶å…ƒç´ å°ï¼Œåˆ™ç›´æ¥å…¥æ ˆã€‚</li><li>å¦åˆ™ä»æ ˆé¡¶å¼€å§‹éå†æ ˆä¸­å…ƒç´ ï¼ŒæŠŠå°äº <code>x</code> æˆ–è€…ç­‰äº <code>x</code> çš„å…ƒç´ å¼¹å‡ºæ ˆï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ªå¤§äº <code>x</code> çš„å…ƒç´ ä¸ºæ­¢ï¼Œç„¶åå†æŠŠ <code>x</code> å‹å…¥æ ˆä¸­ã€‚</li></ul><h2 id="0x05-å•è°ƒæ ˆçš„ä½¿ç”¨åœºæ™¯"><a class="markdownIt-Anchor" href="#0x05-å•è°ƒæ ˆçš„ä½¿ç”¨åœºæ™¯"></a> 0x05 å•è°ƒæ ˆçš„ä½¿ç”¨åœºæ™¯</h2><p>ç½‘ä¸Šæœ‰å¾ˆå¤šåšå®¢ï¼Œä¹Ÿæœ‰å¾ˆå¤šçš„æ•™å­¦è§†é¢‘ï¼Œè¿™é‡Œæ‘˜é€‰ä¸€äº›æ€»ç»“çš„ï¼Œå•è°ƒæ ˆä¸»è¦è§£å†³çš„é—®é¢˜ä¸ºï¼š</p><ol><li>å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ </li><li>å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ </li><li>å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ </li><li>å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ </li></ol><p>åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œéœ€è¦å…ˆå°†å®é™…é—®é¢˜æŠ½è±¡ç§°ä¸ºä¸Šè¿°çš„å››ç§é—®é¢˜ï¼Œå†åˆ©ç”¨å•è°ƒæ ˆæ±‚è§£ï¼Œæœ‰ç‚¹è¿‡äºæŠ½è±¡äº†ï¼Œç»“åˆé—®é¢˜æ¥çœ‹ä¼šå¥½ä¸€ç‚¹</p><h3 id="51-å¯»æ‰¾å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ "><a class="markdownIt-Anchor" href="#51-å¯»æ‰¾å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ "></a> 5.1 å¯»æ‰¾å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ </h3><p>ä»å·¦åˆ°å³éå†å…ƒç´ ï¼Œæ„é€ å•è°ƒé€’å¢æ ˆï¼ˆä»æ ˆé¡¶åˆ°æ ˆåº•é€’å¢ï¼‰ï¼šä¸€ä¸ªå…ƒç´ å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ å°±æ˜¯å°†å…¶ã€Œæ’å…¥å•è°ƒé€’å¢æ ˆã€æ—¶çš„æ ˆé¡¶å…ƒç´ ã€‚å¦‚æœæ’å…¥æ—¶çš„æ ˆä¸ºç©ºï¼Œåˆ™è¯´æ˜å·¦ä¾§ä¸å­˜åœ¨æ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ ã€‚</p><h3 id="52-å¯»æ‰¾å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ "><a class="markdownIt-Anchor" href="#52-å¯»æ‰¾å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ "></a> 5.2 å¯»æ‰¾å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´  <a href="https://algo.itcharge.cn/03.Stack/02.Monotone-Stack/01.Monotone-Stack/#22-%E5%AF%BB%E6%89%BE%E5%B7%A6%E4%BE%A7%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%AF%94%E5%BD%93%E5%89%8D%E5%85%83%E7%B4%A0%E5%B0%8F%E7%9A%84%E5%85%83%E7%B4%A0">#</a></h3><p>ä»å·¦åˆ°å³éå†å…ƒç´ ï¼Œæ„é€ å•è°ƒé€’å‡æ ˆï¼ˆä»æ ˆé¡¶åˆ°æ ˆåº•é€’å‡ï¼‰ï¼šä¸€ä¸ªå…ƒç´ å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å…ƒç´ å°±æ˜¯å°†å…¶ã€Œæ’å…¥å•è°ƒé€’å‡æ ˆã€æ—¶çš„æ ˆé¡¶å…ƒç´ ã€‚å¦‚æœæ’å…¥æ—¶çš„æ ˆä¸ºç©ºï¼Œåˆ™è¯´æ˜å·¦ä¾§ä¸å­˜åœ¨æ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ ã€‚</p><h3 id="53-å¯»æ‰¾å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ "><a class="markdownIt-Anchor" href="#53-å¯»æ‰¾å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ "></a> 5.3 å¯»æ‰¾å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´  <a href="https://algo.itcharge.cn/03.Stack/02.Monotone-Stack/01.Monotone-Stack/#23-%E5%AF%BB%E6%89%BE%E5%8F%B3%E4%BE%A7%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%AF%94%E5%BD%93%E5%89%8D%E5%85%83%E7%B4%A0%E5%A4%A7%E7%9A%84%E5%85%83%E7%B4%A0">#</a></h3><p>ä»å·¦åˆ°å³éå†å…ƒç´ ï¼Œæ„é€ å•è°ƒé€’å¢æ ˆï¼ˆä»æ ˆé¡¶åˆ°æ ˆåº•é€’å¢ï¼‰ï¼šä¸€ä¸ªå…ƒç´ å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ å°±æ˜¯å°†å…¶ã€Œå¼¹å‡ºå•è°ƒé€’å¢æ ˆã€æ—¶å³å°†æ’å…¥çš„å…ƒç´ ã€‚å¦‚æœè¯¥å…ƒç´ æ²¡æœ‰è¢«å¼¹å‡ºæ ˆï¼Œåˆ™è¯´æ˜å³ä¾§ä¸å­˜åœ¨æ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ ã€‚</p><p>ä»å³åˆ°å·¦éå†å…ƒç´ ï¼Œæ„é€ å•è°ƒé€’å¢æ ˆï¼ˆä»æ ˆé¡¶åˆ°æ ˆåº•é€’å¢ï¼‰ï¼šä¸€ä¸ªå…ƒç´ å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ å°±æ˜¯å°†å…¶ã€Œæ’å…¥å•è°ƒé€’å¢æ ˆã€æ—¶çš„æ ˆé¡¶å…ƒç´ ã€‚å¦‚æœæ’å…¥æ—¶çš„æ ˆä¸ºç©ºï¼Œåˆ™è¯´æ˜å³ä¾§ä¸å­˜åœ¨æ¯”å½“å‰å…ƒç´ å¤§çš„å…ƒç´ ã€‚</p><h3 id="54-å¯»æ‰¾å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ "><a class="markdownIt-Anchor" href="#54-å¯»æ‰¾å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ "></a> 5.4 å¯»æ‰¾å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´  <a href="https://algo.itcharge.cn/03.Stack/02.Monotone-Stack/01.Monotone-Stack/#24-%E5%AF%BB%E6%89%BE%E5%8F%B3%E4%BE%A7%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%AF%94%E5%BD%93%E5%89%8D%E5%85%83%E7%B4%A0%E5%B0%8F%E7%9A%84%E5%85%83%E7%B4%A0">#</a></h3><ul><li>ä»å·¦åˆ°å³éå†å…ƒç´ ï¼Œæ„é€ å•è°ƒé€’å‡æ ˆï¼ˆä»æ ˆé¡¶åˆ°æ ˆåº•é€’å‡ï¼‰ï¼šä¸€ä¸ªå…ƒç´ å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å…ƒç´ å°±æ˜¯å°†å…¶ã€Œå¼¹å‡ºå•è°ƒé€’å‡æ ˆã€æ—¶å³å°†æ’å…¥çš„å…ƒç´ ã€‚å¦‚æœè¯¥å…ƒç´ æ²¡æœ‰è¢«å¼¹å‡ºæ ˆï¼Œåˆ™è¯´æ˜å³ä¾§ä¸å­˜åœ¨æ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ ã€‚</li><li>ä»å³åˆ°å·¦éå†å…ƒç´ ï¼Œæ„é€ å•è°ƒé€’å‡æ ˆï¼ˆä»æ ˆé¡¶åˆ°æ ˆåº•é€’å‡ï¼‰ï¼šä¸€ä¸ªå…ƒç´ å³ä¾§ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å…ƒç´ å°±æ˜¯å°†å…¶ã€Œæ’å…¥å•è°ƒé€’å‡æ ˆã€æ—¶çš„æ ˆé¡¶å…ƒç´ ã€‚å¦‚æœæ’å…¥æ—¶çš„æ ˆä¸ºç©ºï¼Œåˆ™è¯´æ˜å³ä¾§ä¸å­˜åœ¨æ¯”å½“å‰å…ƒç´ å°çš„å…ƒç´ ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">é€’å¢æ ˆ</span>(<span class="hljs-params">nums</span>):<br>stack=[]<br><span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br><span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> num&gt;=stack[-<span class="hljs-number">1</span>]:<br>stack.pop()<br>stack.append(num)<br></code></pre></td></tr></table></figure><h2 id="0x06-å•è°ƒæ ˆçš„å®é™…åº”ç”¨"><a class="markdownIt-Anchor" href="#0x06-å•è°ƒæ ˆçš„å®é™…åº”ç”¨"></a> 0x06 å•è°ƒæ ˆçš„å®é™…åº”ç”¨</h2><h3 id="61-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ i"><a class="markdownIt-Anchor" href="#61-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ i"></a> 6.1 ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ I</h3><p><a href="https://leetcode.cn/problems/next-greater-element-i/">T496 ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  I</a></p><p>è¿™ä¸ªå¾ˆç¬¦åˆå•è°ƒæ ˆä½¿ç”¨çš„åœºæ™¯çš„ï¼Œæ‰€ä»¥ä¸»è¦æ˜¯éœ€è¦ç†Ÿæ‚‰å•è°ƒæ ˆæ±‚è§£é—®é¢˜çš„æ–¹æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">nextGreaterElement</span>(<span class="hljs-params">self, nums1: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], nums2: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        <span class="hljs-comment"># ç¬¬äºŒç§ä½¿ç”¨å•è°ƒé€’å¢æ ˆï¼Œå› ä¸ºnums1æ˜¯num2çš„å­é›†ï¼Œæ‰€ä»¥å¯ä»¥éå†nums2</span><br>        <span class="hljs-comment"># æ„é€ å•è°ƒé€’å¢æ ˆï¼Œæ±‚å‡ºnums2æ¯ä¸ªå…ƒç´ å³ä¾§ä¸‹ä¸€ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œç„¶åå­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­</span><br>        <span class="hljs-comment"># </span><br>        <span class="hljs-comment"># ã€å…·ä½“åšæ³•ã€‘</span><br>        <span class="hljs-comment"># reså­˜å‚¨ç­”æ¡ˆï¼Œä½¿ç”¨stackè¡¨ç¤ºå•è°ƒé€’å¢æ ˆï¼Œä½¿ç”¨å“ˆå¸Œè¡¨num-mapå­˜å‚¨nums2ä¸­æ¯”ä¸‹ä¸€ä¸ªå½“å‰</span><br>        <span class="hljs-comment"># å…ƒç´ å¤§çš„æ•°å€¼ï¼Œå½“å‰æ•°å€¼ï¼šä¸‹ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ å¤§çš„æ•°å€¼</span><br>        <span class="hljs-comment"># </span><br>        <span class="hljs-comment"># éå†nums2ï¼Œå¯¹äºå½“å‰å…ƒç´ ï¼Œå¦‚æœå°åˆ™å…¥æ ˆï¼Œå¦‚æœå…ƒç´ å¤§åˆ™ä¸€ç›´å‡ºæ ˆï¼Œå‡ºæ ˆå…ƒç´ æ˜¯ç¬¬ä¸€ä¸ªå¤§</span><br>        <span class="hljs-comment"># äºå½“å‰å…ƒç´ å€¼çš„å…ƒç´ </span><br>        <span class="hljs-comment"># </span><br>        <span class="hljs-comment"># éå†ç©æ•°ç»„nums2å‘¨ï¼Œå»ºç«‹å¥½å“ˆå¸Œè¡¨ä¹‹åï¼Œéå†æ•°ç»„1</span><br>        <span class="hljs-comment"># </span><br>        <span class="hljs-comment"># ä»num-mapä¸­å–å‡ºå¯¹åº”çš„å€¼</span><br>        res=[]<br>        stack=[]<br>        num_map=<span class="hljs-built_in">dict</span>()<br><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums2:<br>            <span class="hljs-keyword">while</span>(stack) <span class="hljs-keyword">and</span> num&gt;stack[-<span class="hljs-number">1</span>]:<br>                num_map[stack[-<span class="hljs-number">1</span>]]=num<br>                stack.pop()<br>            stack.append(num)<br>            <span class="hljs-built_in">print</span>(stack)<br><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums1:<br>            res.append(num_map.get(num,-<span class="hljs-number">1</span>))<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><h3 id="62-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ii"><a class="markdownIt-Anchor" href="#62-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ii"></a> 6.2 ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ II</h3><p><a href="https://leetcode.cn/problems/next-greater-element-ii/">T503 ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ II</a></p><p>å’Œä¸Šé¢ä¸€æ ·ï¼Œéå†ä¸¤æ¬¡å°±å¥½äº†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">nextGreaterElements</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        res=[]<br>        stack=[]<br>        temp=[-<span class="hljs-number">1</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums))]<br>        stack_index=[]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)*<span class="hljs-number">2</span>):<br>            <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">and</span> nums[i%<span class="hljs-built_in">len</span>(nums)]&gt;stack[-<span class="hljs-number">1</span>]:<br>                index=stack_index.pop()<br>                stack.pop()<br>                temp[index]=nums[i%<span class="hljs-built_in">len</span>(nums)]<br>            stack_index.append(i%<span class="hljs-built_in">len</span>(nums))<br>            stack.append(nums[i%<span class="hljs-built_in">len</span>(nums)])<br>        <span class="hljs-keyword">return</span> temp<br>               <br></code></pre></td></tr></table></figure><h3 id="63-æ¯æ—¥æ¸©åº¦"><a class="markdownIt-Anchor" href="#63-æ¯æ—¥æ¸©åº¦"></a> 6.3 æ¯æ—¥æ¸©åº¦</h3><p><a href="https://leetcode.cn/problems/daily-temperatures/">T739 æ¯æ—¥æ¸©åº¦</a></p><p>ä¹Ÿæ˜¯å•è°ƒæ ˆè§£é¢˜çš„å¸¸è§„æ€è·¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dailyTemperatures</span>(<span class="hljs-params">temperatures</span>):<br>        <span class="hljs-comment"># å› ä¸ºç­‰ä»·äºæ‰¾ç¬¬iå…ƒç´ åï¼Œé«˜äºè¿™ä¸ªå…ƒç´ çš„indexä¹‹å·®</span><br>        <span class="hljs-comment"># å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸€ä¸ªstackæ¥è®°å½•é€’å‡å…ƒç´ çš„ä¸‹æ ‡</span><br>        size=<span class="hljs-built_in">len</span>(temperatures)<br>        ans=[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(size)]<br>        stack=[]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(size):<br>            <span class="hljs-keyword">while</span>( stack <span class="hljs-keyword">and</span> temperatures[i]&gt;temperatures[stack[-<span class="hljs-number">1</span>]]):<br>                index=stack.pop()<br>                ans[index]=i-index<br>            stack.append(i)<br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3zvvr5nfnj20ie08yt9t.jpg" alt="image-20220708222328976" /></p><h3 id="64-è‚¡ç¥¨æ—¶é—´è·¨åº¦"><a class="markdownIt-Anchor" href="#64-è‚¡ç¥¨æ—¶é—´è·¨åº¦"></a> 6.4 è‚¡ç¥¨æ—¶é—´è·¨åº¦</h3><p><a href="https://leetcode.cn/problems/online-stock-span/">T901 è‚¡ç¥¨ä»·æ ¼è·¨åº¦</a></p><p>å•è°ƒæ ˆå¯ä»¥å­˜å‚¨å€¼ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¯¹åº”çš„ä¸‹æ ‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StockSpanner</span>:<br>    <span class="hljs-comment"># å°äºæˆ–ç­‰äºä»Šå¤©ä»·æ ¼çš„æœ€å¤§è¿ç»­æ—¥æ•°</span><br>    <span class="hljs-comment"># ç­‰ä»·äºæ±‚è§£å·¦ä¾§æœ€è¿‘çš„ä¸€æ¬¡å¤§äºä»·æ ¼çš„æ—¥æ•°</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br><br>        self.stack=[]<br>        self.day=[]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">next</span>(<span class="hljs-params">self, price: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        dayT=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span>(self.stack <span class="hljs-keyword">and</span> price&gt;=self.stack[-<span class="hljs-number">1</span>]):<br>            dayT+=self.day.pop()<br>            self.stack.pop()<br>        self.day.append(dayT)<br>        self.stack.append(price)<br>        <span class="hljs-keyword">return</span> dayT<br></code></pre></td></tr></table></figure><h3 id="65-å»é™¤é‡å¤å­—æ¯"><a class="markdownIt-Anchor" href="#65-å»é™¤é‡å¤å­—æ¯"></a> 6.5 å»é™¤é‡å¤å­—æ¯</h3><p><a href="https://leetcode.cn/problems/remove-duplicate-letters/">T316 å»é™¤é‡å¤å­—æ¯</a></p><p>è¿™ä¸€é¢˜çœ‹ä¸Šå»æ˜¯å’Œå•è°ƒæ ˆæ²¡æœ‰å…³ç³»çš„ï¼Œè¿™é‡Œå°±éœ€è¦å°†ç°å®é—®é¢˜è½¬æ¢ç§°ä¸ºå•è°ƒæ ˆçš„é—®é¢˜ï¼›é¦–å…ˆç»“æœçš„å­—å…¸åºæœ€å°ï¼Œå°±æ˜¯å°½å¯èƒ½çš„å°†aæ”¾åˆ°bå‰é¢ã€cæ”¾åˆ°då‰é¢ï¼Œå› æ­¤æˆ‘ä»¬æ¯æ¬¡éå†çš„æ—¶å€™éœ€è¦å¯¹åº”å­—ç¬¦æ”¾å…¥ç»“æœå¹¶æ’åºã€‚ä½†æ˜¯æˆ‘ä»¬è¦è­¦æƒ•åé¢æ˜¯å¦è¿˜å‰©å­—ç¬¦ï¼Œå› æ­¤å°±éœ€è¦å…ˆéå†å­—ç¬¦ä¸²ä¸­å­—ç¬¦å¯¹åº”çš„æ•°é‡ï¼Œç„¶ååœ¨éå†åˆ é™¤çš„æ—¶å€™æ ¹æ®å­—ç¬¦ä¸²æ˜¯å¦æœ‰å‰©ä½™æ¥å†³å®šåˆ ä¸åˆ å­—ç¬¦ã€‚amazingï¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">removeDuplicateLetters</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        <span class="hljs-comment"># é¦–å…ˆéœ€è¦ç»Ÿè®¡å„ç§å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°</span><br>        <span class="hljs-comment"># å¯¹sè¿›è¡Œéå†</span><br>        <span class="hljs-comment"># è¦æ±‚å­—å…¸åºæœ€å°ï¼Œä¹Ÿå°±æ˜¯aè¦å°½å¯èƒ½åœ¨bå‰é¢ï¼Œbè¦å°½å¯èƒ½åœ¨cå‰é¢</span><br>        <span class="hljs-comment"># è¿™å°±éœ€è¦ç”¨å•è°ƒæ ˆæ¥çº¦æŸï¼Œä½†æ˜¯éœ€è¦æ³¨æ„å•è°ƒæ ˆä¸­å…ƒç´ æ˜¯å¦å­˜åœ¨</span><br>        charMap=<span class="hljs-built_in">dict</span>()<br>        resStack=[]<br><br>        <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> char <span class="hljs-keyword">in</span> charMap:<br>                charMap[char]+=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                charMap[char]=<span class="hljs-number">1</span><br>        <br>        <span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> s:<br>            <span class="hljs-keyword">if</span> char <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> resStack:<br>                <span class="hljs-comment"># å¦‚æœä¸åœ¨resStackä¸­,æˆ‘éœ€è¦è®¾ç½®ä¸€ä¸ªå°½å¯èƒ½å°çš„åºåˆ—</span><br>                <span class="hljs-comment"># åŒæ—¶éœ€è¦ä¿è¯è¿˜æœ‰æ•°</span><br>                <span class="hljs-keyword">while</span> resStack <span class="hljs-keyword">and</span> char&lt;resStack[-<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> charMap[resStack[-<span class="hljs-number">1</span>]]&gt;<span class="hljs-number">0</span>:<br>                    resStack.pop()<br>                resStack.append(char)<br>                charMap[char]-=<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                charMap[char]-=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>.join(resStack)<br></code></pre></td></tr></table></figure><h3 id="66-æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„"><a class="markdownIt-Anchor" href="#66-æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„"></a> 6.6 æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„</h3><p><a href="https://leetcode.cn/problems/shortest-unsorted-continuous-subarray/">T581 æœ€çŸ­æ— åºå­æ•°ç»„</a></p><p>åŒæ ·çš„è¿™ä¸ªéœ€è¦å…ˆåˆ†æé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä»€ä¹ˆï¼Œéšå«çš„å°±æ˜¯åºåˆ—ä¸€å®šæ˜¯å…ˆé€’å¢ã€ç„¶åä¹±åºã€ç„¶åé€’å¢ï¼Œè¿™ä¸ªç¬¬ä¸€ä¸ªé€’å¢åºåˆ—çš„æœ€å¤§å€¼æ˜¯åé¢çš„æœ€å°å€¼ã€ç¬¬äºŒä¸ªé€’å¢åºåˆ—çš„æœ€å°å€¼æ˜¯åé¢çš„æœ€å¤§å€¼ï¼›ç”±æ­¤å°±å¯ä»¥ç”¨å•è°ƒæ ˆçš„æ–¹å¼æ¥æ±‚è§£é—®é¢˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findUnsortedSubarray</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-comment"># å¦‚æœå¿…ç„¶å­˜åœ¨è¿™æ ·çš„ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯å•è°ƒé€’å¢ï¼Œç„¶å***ã€ç„¶åå•è°ƒé€’å¢</span><br>        <span class="hljs-comment"># ä»å°åˆ°å¤§ï¼Œæ‰¾åˆ°å·¦è¾¹ç•Œ</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums)&lt;<span class="hljs-number">2</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        stack=[]<br>        size=<span class="hljs-built_in">len</span>(nums)<br>        left=size-<span class="hljs-number">1</span><br>        right=<span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(size):<br>            <span class="hljs-keyword">while</span>(stack <span class="hljs-keyword">and</span> nums[i]&lt;nums[stack[-<span class="hljs-number">1</span>]]):<br>                left=<span class="hljs-built_in">min</span>(left,stack.pop())<br>            stack.append(i)<br>        stack[:]=[]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(size-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">while</span>(stack <span class="hljs-keyword">and</span> nums[i]&gt;nums[stack[-<span class="hljs-number">1</span>]]):<br>                right=<span class="hljs-built_in">max</span>(right,stack.pop())<br>            stack.append(i)<br><br>        <span class="hljs-keyword">if</span> right-left+<span class="hljs-number">1</span>&gt;<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> right-left+<span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>DataStructure</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•04-ç®—æ³•åˆ·é¢˜-æ•°ç»„éƒ¨åˆ†</title>
    <link href="/posts/ee1b4739.html"/>
    <url>/posts/ee1b4739.html</url>
    
    <content type="html"><![CDATA[<p>æ— è®ºæ¦‚å¿µçœ‹çš„æœ‰å¤šå°‘ï¼Œéƒ½éœ€è¦è‡ªå·±å®æˆ˜ã€‚åˆ·é¢˜çš„è¿‡ç¨‹å¹¶ä¸æ˜¯ä¸€ä¸ªç ”ç©¶çš„è¿‡ç¨‹ï¼Œè€Œæ˜¯æ›´å¥½çš„ç†è§£äººä½œä¸ºæœºå™¨çš„è®¡ç®—æ–¹å¼ï¼Œemmmå…¶å®æ˜¯è®©äººå˜å¾—æ›´åƒè®¡ç®—å™¨å¹¶æ‰¾åˆ°ä¸€äº›è®¡ç®—æœºå¼çš„ä¾¿æ·æ€è€ƒæ–¹å¼ã€‚æ‰¯çš„è¿œäº†ï¼Œæ•°ç»„ä½œä¸ºä¸€ç§æ¯”è¾ƒåŸºæœ¬çš„æ•°æ®ç»“æ„æ–¹å¼ï¼Œå¸¸è§çš„ç®—æ³•æŠ€å·§æœ‰æ’åºç®—æ³•ã€äºŒåˆ†æŸ¥æ‰¾ã€åŒæŒ‡é’ˆã€æ»‘åŠ¨çª—å£</p><span id="more"></span><p><a href="https://blog.tjdata.site/2022/04/16/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%9501-%E5%90%91%E9%87%8F%EF%BD%9C%E5%88%97%E8%A1%A8%EF%BD%9C%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97%EF%BD%9C%E6%A0%91/">æ•°æ®ç»“æ„ä¸ç®—æ³•01- å‘é‡ ï½œ åˆ—è¡¨ ï½œ æ ˆå’Œé˜Ÿåˆ—</a></p><h1 id="0x01-æ•°ç»„æ’åº"><a class="markdownIt-Anchor" href="#0x01-æ•°ç»„æ’åº"></a> 0x01   æ•°ç»„æ’åº</h1><h2 id="11-å†’æ³¡æ’åº"><a class="markdownIt-Anchor" href="#11-å†’æ³¡æ’åº"></a> 1.1 å†’æ³¡æ’åº</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">bubbleSort</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-comment"># å†’æ³¡æ’åºçš„æ€æƒ³</span><br><span class="hljs-comment"># ç›¸é‚»å…ƒç´ ä¹‹é—´çš„æ¯”è¾ƒå’Œå˜æ¢ï¼Œå°†å€¼è¾ƒå°çš„å…ƒç´ é€æ­¥ä»åé¢ç§»åˆ°å‰é¢ï¼Œå€¼è¾ƒå¤§çš„å…ƒç´ ä»å‰é¢ç§»åˆ°åé¢</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># å†’æ³¡æ’åºçš„æ­¥éª¤</span><br><span class="hljs-comment"># é€æ­¥å°†iå’Œi+1å…ƒç´ ç›¸æ¯”è¾ƒï¼Œå¦‚æœå¤§å°ä¸åˆé€‚åˆ™äº¤æ¢ï¼Œè¿™æ ·é‡å¤ä¸€æ¬¡å¯ä»¥ä¿è¯ä¸‹æ ‡ä¸ºnçš„å€¼æœ€å¤§</span><br><span class="hljs-comment"># ä¹‹åå¯¹n-2å…ƒç´ é‡å¤æ“ä½œï¼Œä¸€ç›´åˆ°æ’åºç»“æŸ</span><br><span class="hljs-comment"># </span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)):<br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)-i-<span class="hljs-number">1</span>):<br><span class="hljs-keyword">if</span> arr[j]&gt;arr[j+<span class="hljs-number">1</span>]:<br>arr[j],arr[j+<span class="hljs-number">1</span>]=arr[j+<span class="hljs-number">1</span>],arr[j]<br><br><span class="hljs-keyword">return</span> arr<br></code></pre></td></tr></table></figure><h2 id="12-é€‰æ‹©æ’åº"><a class="markdownIt-Anchor" href="#12-é€‰æ‹©æ’åº"></a> 1.2 é€‰æ‹©æ’åº</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">selectSort</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-comment"># é€‰æ‹©æ’åºçš„æ€æƒ³</span><br><span class="hljs-comment"># æ¯ä¸€æ¬¡æ’åºä¸­ï¼Œä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­é€‰æ‹©ä¸€ä¸ªæœ€å°çš„å…ƒç´ ï¼Œæœªæ’å¥½åºçš„å…ƒç´ æœ€å‰é¢çš„é‚£ä¸ªå…ƒç´ äº¤æ¢ä½ç½®</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># é€‰æ‹©æ’åºç®—æ³•æ­¥éª¤</span><br><span class="hljs-comment"># åœ¨ç®—æ³•ä¸­è®¾ç½®æ•´å‹å˜é‡iï¼Œæ—¢å¯ä»¥ä½œä¸ºæ’åºæ ‘æœ¨çš„è®¡ç®—ã€åŒæ—¶iä¹Ÿä½œä¸ºæ‰§è¡Œç¬¬iæ¬¡æ’åºçš„æ—¶å€™ï¼Œå‚åŠ æ’åºçš„ån-i+1å…ƒç´ çš„ä½ç½®</span><br><span class="hljs-comment"># æ•´å‹å˜é‡ min_iè®°å½•æœ€å°å…ƒç´ çš„ä¸‹æ ‡</span><br><span class="hljs-comment"># ç»“æŸä¹‹ä¸­äº¤æ¢ä¸¤è€…ä¹‹é—´çš„é¡ºåº</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)-<span class="hljs-number">1</span>):<br>min_i=i<br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(arr)):<br><span class="hljs-keyword">if</span> arr[j]&lt;arr[min_i]:<br>min_i=j<br><br><span class="hljs-keyword">if</span> i!=min_i:<br>arr[i],arr[min_i]=arr[min_i],arr[i]<br><br><span class="hljs-keyword">return</span> arr<br></code></pre></td></tr></table></figure><h2 id="13-æ’å…¥æ’åº"><a class="markdownIt-Anchor" href="#13-æ’å…¥æ’åº"></a> 1.3 æ’å…¥æ’åº</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">insertSort</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-comment"># æ’å…¥æ’åºçš„åŸºæœ¬æ€æƒ³</span><br><span class="hljs-comment"># æ¯ä¸€æ¬¡æ’åºä¸­ï¼Œå°†å‰©ä½™æ— åºåˆ—åºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ’å…¥åˆ°æœ‰åºåºåˆ—çš„é€‚å½“ä½ç½®ä¸Š</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># æ’å…¥æ’åºçš„åŸºæœ¬æ­¥éª¤</span><br><span class="hljs-comment"># å°†ç¬¬ä¸€ä¸ªå…ƒç´ çœ‹ä½œä¸€ä¸ªæœ‰åºåºåˆ—</span><br><span class="hljs-comment"># ä»å¤´åˆ°å°¾æ‰«ææ— åºåºåˆ—ï¼Œå°†æ‰«æåˆ°çš„æ¯ä¸ªå…ƒç´ æ’å…¥åˆ°æœ‰åºåºåˆ—çš„é€‚å½“ä½ç½®ä¸Š</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(arr)):<br>temp=arr[i]<br>j=i<br><span class="hljs-comment"># 0-ï¼ˆi-1ï¼‰éƒ½æ˜¯æœ‰åºæ•°ç»„</span><br><span class="hljs-keyword">while</span> j&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> arr[j-<span class="hljs-number">1</span>]&gt;temp:<br>arr[j]=arr[j-<span class="hljs-number">1</span>]<br><span class="hljs-comment"># å› ä¸ºè‚¯å®šéœ€è¦ç§»åŠ¨ä¸€ä¸ªä½ç½®</span><br>j-=<span class="hljs-number">1</span><br>arr[j]=temp<br><br><span class="hljs-keyword">return</span> arr<br></code></pre></td></tr></table></figure><h2 id="14-å¸Œå°”æ’åºæ²¡ææ‡‚å¹²ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#14-å¸Œå°”æ’åºæ²¡ææ‡‚å¹²ä»€ä¹ˆ"></a> 1.4 å¸Œå°”æ’åºï¼ˆæ²¡ææ‡‚å¹²ä»€ä¹ˆï¼‰</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">shellSort</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-comment"># å¸Œå°”æ’åºçš„åŸºæœ¬æ€æƒ³</span><br><span class="hljs-comment"># æŒ‰ç…§ä¸€å®šçš„é—´éš”å–å€¼åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œæ¯ä¸ªå­åºåˆ—æŒ‰ç…§æ’å…¥æ’åºï¼Œç„¶åé€æ¸ç¼©å°é—´éš”è¿›è¡Œ</span><br><span class="hljs-comment"># ä¸‹ä¸€è½®åˆ’åˆ†å­åºåˆ—å’Œæ’å…¥æ’åºï¼Œä¸€ç›´åˆ°æœ€åä¸€è½®æ’åºé—´éš”ä¸º1</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># å¸Œå°”æ’åºæ˜¯åœ¨æ’å…¥æ’åºçš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ’å…¥æ’åºåœ¨å·²ç»æ’å¥½åºçš„æ•ˆç‡éå¸¸é«˜</span><br><span class="hljs-comment"># ä½†æ˜¯æ’å…¥æ’åºæ•ˆç‡æ¯”è¾ƒä½çš„åŸå› æ˜¯æ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä»¥ä¸º</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># å¸Œå°”æ’åºçš„ç®—æ³•æ­¥éª¤</span><br><span class="hljs-comment"># 1. ç¡®å®šå…ƒç´ é—´éš”Gapï¼Œå°†åºåˆ—æŒ‰ç…§1å¼€å§‹åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œä¹‹é—´å…ƒç´ çš„é—´éš”ä¸ºä¸€ä¸ªgap</span><br><span class="hljs-comment"># 2. å‡å°‘é—´éš”æ•°ï¼Œå¹¶é‡æ–°å°†æ•´ä¸ªåºåˆ—æŒ‰ç…§æ–°çš„é—´éš”æ•°åˆ†æˆè‹¥å¹²ä¸ªå­åºåˆ—ï¼Œå¹¶å¯¹æ¯ä¸ªå­åºåˆ—è¿›è¡Œæ’åº</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># </span><br>size=<span class="hljs-built_in">len</span>(arr)<br>gap=size//<span class="hljs-number">2</span><br><br><span class="hljs-keyword">while</span> gap&gt;<span class="hljs-number">0</span>:<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(gap,size):<br>temp=arr[i]<br>j=i<br><span class="hljs-keyword">while</span> j&gt;=gap <span class="hljs-keyword">and</span> arr[j-gap]&gt;temp:<br>arr[j]=arr[j-gap]<br>j-=gap<br>arr[j]=temp<br>gap=gap//<span class="hljs-number">2</span><br><span class="hljs-keyword">return</span> arr<br></code></pre></td></tr></table></figure><h2 id="15-å½’å¹¶æ’åºå¾ˆå–œæ¬¢çš„æ’åº"><a class="markdownIt-Anchor" href="#15-å½’å¹¶æ’åºå¾ˆå–œæ¬¢çš„æ’åº"></a> 1.5 å½’å¹¶æ’åºï¼ˆå¾ˆå–œæ¬¢çš„æ’åºï¼‰</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">mergeSort</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-comment"># å½’å¹¶æ’åºçš„åŸºæœ¬æ€æƒ³ï¼š</span><br><span class="hljs-comment"># é‡‡ç”¨ç»å…¸çš„åˆ†æ²»ç­–ç•¥ï¼Œå…ˆé€’å½’å°†å½“å‰åºåˆ—å¹³å‡åˆ†æˆä¸¤åŠï¼Œç„¶åå°†æœ‰åºåºåˆ—åˆå¹¶ï¼Œæœ€ç»ˆåˆå¹¶æˆä¸€ä¸ªæœ‰åºåºåˆ—</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€ç®—æ³•æ­¥éª¤ã€‘</span><br><span class="hljs-comment"># 1. å°†æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°æ®å ªç§°næœ‰åºçš„å­åºåˆ—</span><br><span class="hljs-comment"># 2. å°†å½“å‰åºåˆ—ç»„ä¸­çš„æœ‰åºåºåˆ—ä¸¤ä¸¤å½’å¹¶ï¼Œå®Œæˆä¸€éä¹‹ååºåˆ—ç»„é‡Œçš„æ’åºåºåˆ—çš„ä¸ªæ•°å‡ç‰ˆï¼Œæ¯ä¸ªå­åºåˆ—çš„é•¿åº¦åŠ å€</span><br><span class="hljs-comment"># 3. é‡å¤ä¸Šè¿°æ“ä½œå¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æœ‰åºåºåˆ—</span><br><span class="hljs-comment"># </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">left_arr,right_arr</span>):<br>arr=[]<br><span class="hljs-keyword">while</span> left_arr <span class="hljs-keyword">and</span> right_arr:<br><span class="hljs-keyword">if</span> left_arr[<span class="hljs-number">0</span>]&lt;=right_arr[<span class="hljs-number">0</span>]:<br>arr.append(left_arr.pop(<span class="hljs-number">0</span>))<br><span class="hljs-keyword">else</span>:<br>arr.append(right_arr.pop[<span class="hljs-number">0</span>])<br><br><span class="hljs-keyword">while</span> left_arr:<br>arr.append(left_arr.pop(<span class="hljs-number">0</span>))<br><br><span class="hljs-keyword">while</span> right_arr:<br>arr.append(right_arr.pop(<span class="hljs-number">0</span>))<br><br><span class="hljs-keyword">return</span> arr<br><br>size =<span class="hljs-built_in">len</span>(arr)<br><br><span class="hljs-comment"># è¾¹ç•Œæƒ…å†µ</span><br><span class="hljs-keyword">if</span> size&lt;<span class="hljs-number">2</span>:<br><span class="hljs-keyword">return</span> arr<br><br>mid =size//<span class="hljs-number">2</span><br><br>left_arr,right_arr=arr[<span class="hljs-number">0</span>:mid],arr[mid:]<br><span class="hljs-keyword">return</span> merge(mergeSort(left_arr),mergeSort(right_arr))<br></code></pre></td></tr></table></figure><h2 id="16-å¿«é€Ÿæ’åºç¬¬äºŒå–œæ¬¢"><a class="markdownIt-Anchor" href="#16-å¿«é€Ÿæ’åºç¬¬äºŒå–œæ¬¢"></a> 1.6 å¿«é€Ÿæ’åºï¼ˆç¬¬äºŒå–œæ¬¢ï¼‰</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">quickSort</span>(<span class="hljs-params">arr,low,high</span>):<br><span class="hljs-comment"># å¿«é€Ÿæ’åºï¼Œæ’åºçš„è¾¹ç•Œæ¡ä»¶ lowæ¯”highå°</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">resort</span>(<span class="hljs-params">arr,low,high</span>):<br><span class="hljs-comment"># è¿™é‡Œçš„æ•°ç»„ä¸­ï¼Œç›®æ ‡æ•°å·²ç»æ”¾åˆ°çš„æœ€å³è¾¹</span><br><span class="hljs-comment"># ç°åœ¨éœ€è¦æŠŠå¤§äºç›®æ ‡å€¼çš„æ•°æ®æ”¾åˆ°å³è¾¹</span><br><br>flag=low-<span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(low,high+<span class="hljs-number">1</span>):<br><span class="hljs-comment"># åŒæŒ‡é’ˆ</span><br><span class="hljs-keyword">if</span> arr[j]&lt;=arr[high]:<br>flag+=<span class="hljs-number">1</span><br>arr[flag],arr[j]=arr[j],arr[flag]<br><br><span class="hljs-keyword">return</span> flag<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">random_index</span>(<span class="hljs-params">arr,low,high</span>):<br><span class="hljs-comment"># å½“ç„¶è¿˜éœ€è¦è¿›è¡Œä¸€äº›å°çš„æ“ä½œ</span><br>index=(low+high)//<span class="hljs-number">2</span><br><br><span class="hljs-comment"># é»˜è®¤å·¦è¾¹éƒ½æ˜¯æœ€å°çš„</span><br>arr[index],arr[high]=arr[high],arr[index]<br><span class="hljs-keyword">return</span> resort(arr,low,high)<br><br><span class="hljs-keyword">if</span> low&lt;high:<br><span class="hljs-comment"># æ¯æ¬¡æŒ‰ç…§é˜Ÿåˆ—æ’åº</span><br><span class="hljs-comment"># éœ€è¦è¿”å›æ ‡æ†çš„ä¸‹æ ‡</span><br>index =random_index(arr,low,high)<br><br><span class="hljs-comment"># ä¹‹åè¿˜éœ€è¦ç»§ç»­åˆ†è§£</span><br>quickSort(arr,low,index-<span class="hljs-number">1</span>)<br>quickSort(arr,index+<span class="hljs-number">1</span>,high)<br><span class="hljs-keyword">return</span> arr<br></code></pre></td></tr></table></figure><h2 id="17-å †æ’åºæ²¡çœ‹æ‡‚æ„Ÿè§‰å¤ªéš¾äº†"><a class="markdownIt-Anchor" href="#17-å †æ’åºæ²¡çœ‹æ‡‚æ„Ÿè§‰å¤ªéš¾äº†"></a> 1.7 å †æ’åºï¼ˆæ²¡çœ‹æ‡‚ï¼Œæ„Ÿè§‰å¤ªéš¾äº†ï¼‰</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">heapSort</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-comment"># å€Ÿç”¨å †ç»“æ„æ‰€è®¾è®¡çš„æ’åºç®—æ³•ï¼Œå°†æ•°ç»„è½¬æ¢ä¸ºå¤§é¡¶å †ï¼Œé‡å¤ä»å¤§é¡¶å †ä¸­å–å‡ºæ•°å€¼æœ€å¤§çš„èŠ‚ç‚¹ï¼Œå¹¶è®©å‰©ä½™çš„å †ç»´æŒå¤§é¡¶å †çš„æ€§è´¨</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€å †çš„å®šä¹‰ã€‘</span><br><span class="hljs-comment"># å¤§é¡¶å †ï¼Œæ ¹èŠ‚ç‚¹å€¼å¤§äºå­èŠ‚ç‚¹å€¼</span><br><span class="hljs-comment"># å°é¡¶å †ï¼Œæ ¹èŠ‚ç‚¹å€¼å°äºç­‰äºå­èŠ‚ç‚¹å€¼</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€ç®—æ³•æ­¥éª¤ã€‘</span><br><span class="hljs-comment"># 1. é¦–å…ˆå°†æ— åºåºåˆ—æ„é€ æˆç¬¬1ä¸ªå¤§é¡¶å †ï¼Œä½¿å¾—mä¸ªå…ƒç´ çš„æœ€å¤§å€¼åœ¨åºåˆ—çš„ç¬¬ä¸€ä¸ªå€¼</span><br><span class="hljs-comment"># 2. äº¤æ¢åºåˆ—çš„æœ€å¤§å€¼å…ƒç´ ä¸æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®</span><br><span class="hljs-comment"># 3. å°†å‰é¢n-1å…ƒç´ ç»„æˆçš„åºåˆ—è°ƒæ•´ç§°ä¸ºä¸€ä¸ªæ–°çš„å¤§é¡¶å †ï¼Œè¿™æ ·å¾—åˆ°ç¬¬2ä¸ªæœ€å¤§å€¼å…ƒç´ </span><br><span class="hljs-comment"># 4. å¦‚æ­¤å¾ªç¯ä¸‹å»ï¼ŒçŸ¥é“ç§°ä¸ºä¸€ä¸ªæœ‰åºåºåˆ—</span><br><span class="hljs-comment"># </span><br>arrLen =<span class="hljs-built_in">len</span>(arr)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">heapify</span>(<span class="hljs-params">arr,i</span>):<br>left=<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span><br>right=<span class="hljs-number">2</span>*i+<span class="hljs-number">2</span><br>largest=i<br><span class="hljs-keyword">if</span> left&lt;arrLen <span class="hljs-keyword">and</span> arr[left]&gt;arr[largest]:<br>largest=left<br><span class="hljs-keyword">if</span> right&lt;arrLen <span class="hljs-keyword">and</span> arr[right]&gt;arr[largest]:<br>largest=right<br><br><span class="hljs-keyword">if</span> largest!=i:<br>arr[i],arr[largest]=arr[largest],arr[i]<br>heapify(arr,largest)<br><span class="hljs-built_in">print</span>(arr)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">buileMaxHeap</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)//<span class="hljs-number">2</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>heapify(arr,i)<br><br>buileMaxHeap(arr)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;buil&#x27;</span>)<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(arrLen-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>):<br>arr[<span class="hljs-number">0</span>],arr[i]=arr[i],arr[<span class="hljs-number">0</span>]<br>arrLen-=<span class="hljs-number">1</span><br>heapify(arr,<span class="hljs-number">0</span>)<br><br><span class="hljs-keyword">return</span> arr<br></code></pre></td></tr></table></figure><h2 id="18-è®¡æ•°æ’åºæ²¡æ„æ€"><a class="markdownIt-Anchor" href="#18-è®¡æ•°æ’åºæ²¡æ„æ€"></a> 1.8 è®¡æ•°æ’åº(æ²¡æ„æ€)</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">countingSort</span>(<span class="hljs-params">arr</span>):<br><span class="hljs-comment"># ã€åŸºæœ¬æ€æƒ³ã€‘</span><br><span class="hljs-comment"># ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„æ•°ç»„countsï¼Œå…¶ä¸­countså…ƒç´ æ˜¯æ’åºæ•°ç»„ä¸­arrç­‰äºiçš„ä¸ªæ•°</span><br><span class="hljs-comment"># æ ¹æ®æ•°ç»„countsæ¥å°†arrçš„å…ƒç´ æ’åˆ—åˆ°æ­£ç¡®ä½ç½®</span><br>min_arr,max_arr=<span class="hljs-built_in">min</span>(arr),<span class="hljs-built_in">max</span>(arr)<br><br>counts =[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_arr-min_arr+<span class="hljs-number">1</span>)]<br><br><span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> arr:<br>counts[num-min_arr]+=<span class="hljs-number">1</span><br><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,max_arr-min_arr+<span class="hljs-number">1</span>):<br>counts[j]+=counts[j-<span class="hljs-number">1</span>]<br><br>res=[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr))]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(arr)-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>res[counts[arr[i]-min_arr]-<span class="hljs-number">1</span>]=arr[i]<br>counts[arr[i]-min_arr]-=<span class="hljs-number">1</span><br><span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><h2 id="19-åŸºæ•°æ’åºå¾ˆæœ‰æ„æ€æ³¨æ„æœ‰è´Ÿæ•°çš„æƒ…å†µ"><a class="markdownIt-Anchor" href="#19-åŸºæ•°æ’åºå¾ˆæœ‰æ„æ€æ³¨æ„æœ‰è´Ÿæ•°çš„æƒ…å†µ"></a> 1.9 åŸºæ•°æ’åºï¼ˆå¾ˆæœ‰æ„æ€ï¼Œæ³¨æ„æœ‰è´Ÿæ•°çš„æƒ…å†µï¼‰</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">raidxSort</span>(<span class="hljs-params">arr</span>):<br>    <span class="hljs-comment"># åŸºæ•°æ’åºradix sortã€åŸºæœ¬æ€æƒ³ã€‘</span><br>    <span class="hljs-comment"># å°†æ•´æ•°æŒ‰ç…§ä½åˆ‡å‰²ç§°ä¸ºä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰ç…§ä¸ªä½æ•°æ¥ä»å°åˆ°è¾¾è¿›è¡Œæ’åˆ—</span><br>    <span class="hljs-comment"># æ³¨æ„è¿™ä¸ªæ’åºæ–¹å¼æ˜¯å…ˆæ¯”è¾ƒä¸ªä½æ•°ï¼Œç„¶åé€æ¸å‘é«˜ä½æ•°</span><br>    <br>    <span class="hljs-comment"># é¦–å…ˆéœ€è¦äº†è§£åˆ°åŸºæ•°æ’åºä¸­æœ€å¤§ä½æ•°</span><br>    max_radix=<span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> arr:<br>    <span class="hljs-keyword">if</span> num&gt;<span class="hljs-number">0</span>:<br>    temp=<span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(num))<br>    <span class="hljs-keyword">if</span> max_radix&lt;temp:<br>    max_radix=temp<br>    <span class="hljs-keyword">else</span>:<br>    temp=<span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(num))-<span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> max_radix&lt;temp:<br>    max_radix=temp<br><br>    <span class="hljs-keyword">for</span> radix <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_radix):<br>        <span class="hljs-comment"># ä»æœ€ä½ä½åˆ°æœ€é«˜ä½å¼€å§‹è®¡ç®—</span><br>        <span class="hljs-comment"># æŒ‰ç…§ä½æ•°æ¥ç”Ÿæˆ</span><br>        buckets=[[] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<br>        <span class="hljs-comment"># æŒ‰ç…§ä¸ªä½æ•°ï¼Œæ”¾åˆ°æ¯ä¸ªç¯®å­ï¼Œå†æŒ‰ç…§åä½æ•°æ”¾åˆ°ç¯®å­</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> arr:<br>            <span class="hljs-comment"># æå–radixå¯¹åº”çš„ä½æ•°ï¼Œ0ä»£è¡¨ä¸ªä½</span><br>            <span class="hljs-comment"># è¿™é‡Œä½¿ç”¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„æ–¹å¼æ¥æ–¹ä¾¿ç†è§£</span><br>            <br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(<span class="hljs-built_in">abs</span>(num)))&lt;(radix+<span class="hljs-number">1</span>):<br>                <span class="hljs-comment"># ä½æ•°ä¸å¤Ÿçš„æ—¶å€™ï¼Œè¯´æ˜è¿™ä¸ªä½ç½®æ²¡æœ‰0ï¼Œå°±éœ€è¦æ”¾åˆ°ç¬¬ä¸€æ ¼</span><br>                buckets[<span class="hljs-number">0</span>].append(num)<br>            <span class="hljs-keyword">else</span>:<br>                index=<span class="hljs-built_in">str</span>(<span class="hljs-built_in">abs</span>(num))[<span class="hljs-built_in">len</span>(<span class="hljs-built_in">str</span>(<span class="hljs-built_in">abs</span>(num)))-<span class="hljs-number">1</span>-radix]<br>                buckets[<span class="hljs-built_in">int</span>(index)].append(num)<br>        <span class="hljs-comment"># æå–åˆ°bucketsä¹‹åéœ€è¦é‡æ–°è§£æarrä¸­</span><br>        arr.clear()<br>        <span class="hljs-keyword">for</span> bukcet <span class="hljs-keyword">in</span> buckets:<br>            <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> bukcet:<br>                arr.append(num)<br>    neg_arr=[]<br>    pos_arr=[]<br><br>    <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> arr:<br>    <span class="hljs-keyword">if</span> num&gt;<span class="hljs-number">0</span>:<br>    pos_arr.append(num)<br>    <span class="hljs-keyword">else</span>:<br>    neg_arr.append(num)<br>    <span class="hljs-keyword">return</span> neg_arr[::-<span class="hljs-number">1</span>]+pos_arr<br><br></code></pre></td></tr></table></figure><h2 id="110-æ¡¶æ’åºå¬ç€å°±æ²¡æ„æ€"><a class="markdownIt-Anchor" href="#110-æ¡¶æ’åºå¬ç€å°±æ²¡æ„æ€"></a> 1.10 æ¡¶æ’åºï¼ˆå¬ç€å°±æ²¡æ„æ€ï¼‰</h2><p>è·³è¿‡</p><p>æ’åºç›¸å…³çš„é¢˜ç›®ï¼š</p><p><a href="https://leetcode.cn/problems/rotate-array/">189 è½®è½¬æ•°ç»„</a></p><p><a href="https://leetcode.cn/problems/plus-one/">66 åŠ ä¸€</a></p><p><a href="https://leetcode.cn/problems/find-pivot-index/">724 å¯»æ‰¾æ•°ç»„ä¸­å¿ƒä¸‹æ ‡</a></p><p><a href="https://leetcode.cn/problems/max-consecutive-ones/">485 æœ€å¤§è¿ç»­1çš„ä¸ªæ•°</a></p><p><a href="https://leetcode.cn/problems/product-of-array-except-self/">238é™¤è‡ªèº«ä»¥å¤–ä¹˜ç§¯</a></p><p><a href="https://leetcode.cn/problems/diagonal-traverse/">498å¯¹è§’çº¿éå†</a></p><p><a href="https://leetcode.cn/problems/rotate-image/">48æ—‹è½¬å›¾åƒ</a></p><p><a href="https://leetcode.cn/problems/pascals-triangle/">118 æ¨è¾‰ä¸‰è§’</a></p><p><a href="https://leetcode.cn/problems/pascals-triangle-ii/">119 æ¨è¾‰ä¸‰è§’2</a></p><p><a href="https://leetcode.cn/problems/set-matrix-zeroes/">73çŸ©é˜µç½®é›¶</a></p><p><a href="https://leetcode.cn/problems/spiral-matrix/">54èºæ—‹æ•°ç»„</a></p><p><a href="https://leetcode.cn/problems/spiral-matrix-ii/">59 èºæ—‹æ•°ç»„2</a></p><p><a href="https://leetcode.cn/problems/move-zeroes/">ç§»åŠ¨é›¶</a></p><p><a href="https://leetcode.cn/problems/kth-largest-element-in-an-array/">215æ•°ç»„ç¬¬Kå¤§å…ƒç´ </a></p><p><a href="https://leetcode.cn/problems/sort-colors/">75é¢œè‰²åˆ†ç±»</a></p><p><a href="https://leetcode.cn/problems/relative-ranks/">506 ç›¸å¯¹åæ¬¡</a></p><p><a href="https://leetcode.cn/problems/sort-an-array/">912æ’åºæ•°ç»„</a></p><p><a href="https://leetcode.cn/problems/merge-sorted-array/">88åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</a></p><p><a href="https://leetcode.cn/problems/majority-element/">169 å¤šæ•°å…ƒç´ </a></p><p><a href="https://leetcode.cn/problems/maximum-gap/">æœ€å¤§é—´è·</a></p><h1 id="0x02-äºŒåˆ†æŸ¥æ‰¾"><a class="markdownIt-Anchor" href="#0x02-äºŒåˆ†æŸ¥æ‰¾"></a> 0x02 äºŒåˆ†æŸ¥æ‰¾</h1><p>æ³¨æ„äºŒåˆ†æŸ¥æ‰¾ä¸åŒè¾¹ç•Œæ¡ä»¶å¯ä»¥æ±‚è§£ä¸åŒçš„é—®é¢˜ï¼Œå¯ä»¥ç®€å•çš„æŸ¥æ‰¾æ•°ç»„ä¸­å­˜åœ¨å…ƒç´ çš„ä½ç½®ï¼Œä¹Ÿå¯ä»¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºæ•°ç»„çš„ä¸‹æ ‡ï¼Œä¹Ÿå¯ä»¥æŸ¥æ‰¾æœ€åä¸€ä¸ªå°äºç­‰äºè¯¥æ•°æ®çš„ä¸‹æ ‡ï¼Œä¹Ÿå¯ä»¥æŸ¥è¯¢ç›¸å…³çš„å…ƒç´ çš„å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ====================================================================#</span><br><span class="hljs-comment"># ==========================äºŒåˆ†æŸ¥æ‰¾====================================#</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€ç®—æ³•æ¦‚è¿°ã€‘</span><br><span class="hljs-comment"># ç¡®å®šå¾…æŸ¥æ‰¾å…ƒç´ æ‰€åœ¨çš„åŒºé—´èŒƒå›´ï¼Œå†é€æ­¥ç¼©å°èŒƒå›´ï¼Œç›´åˆ°æ‰¾åˆ°å…ƒç´ æˆ–è€…æ‰¾ä¸åˆ°è¯¥å…ƒç´ ä¸ºæ­¢</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€ç®—æ³•æ€æƒ³ã€‘</span><br><span class="hljs-comment"># ç»å…¸çš„å‡è€Œæ²»ä¹‹çš„æ€æƒ³ï¼Œå‡å°é—®é¢˜è§„æ¨¡æ¥è§£å†³é—®é¢˜ï¼Œæ¯ä¸€æ¬¡æŸ¥æ‰¾æ’é™¤æ‰ä¸€å®šä¸å­˜åœ¨ç›®æ ‡å…ƒç´ çš„</span><br><span class="hljs-comment"># åŒºé—´ï¼Œåœ¨å‰©ä¸‹å¯èƒ½å­˜åœ¨çš„ç›®æ ‡å…ƒç´ çš„åŒºé—´ä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œæ¯ä¸€æ¬¡é€šè¿‡ä¸€äº›æ¡ä»¶åˆ¤æ–­ï¼Œå°†å¾…æœç´¢çš„</span><br><span class="hljs-comment"># åŒºé—´é€æ¸ç¼©å°ï¼Œæ¥è¾¾åˆ°å‡å°‘é—®é¢˜è§„æ¨¡çš„ç›®çš„</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€ç®—æ³•è¿‡ç¨‹ã€‘</span><br><span class="hljs-comment"># 1. æ¯æ¬¡æŸ¥æ‰¾ä»æ•°ç»„çš„ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œå¦‚æœä¸­é—´å…ƒç´ æ­£å¥½æ˜¯æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåˆ™æœç´¢è¿‡ç¨‹ç»“æŸ</span><br><span class="hljs-comment"># 2. å¦‚æœç‰¹å®šå…ƒç´ å¤§äºæˆ–è€…å°äºä¸­é—´å…ƒç´ ï¼Œåˆ™åœ¨å¤§äºæˆ–è€…å°äºçš„å…ƒç´ ä¸­æŸ¥æ‰¾</span><br><span class="hljs-comment"># 3. å¦‚æœåœ¨æŸä¸€æ­¥éª¤æ•°ç»„ä¸ºç©ºåˆ™ä»£è¡¨æ‰¾ä¸åˆ°</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€ç®—æ³•é‡ç‚¹ã€‘</span><br><span class="hljs-comment"># 1. åŒºé—´çš„å¼€é—­é—®é¢˜ï¼Ÿ</span><br><span class="hljs-comment"># 2. midçš„å–å€¼é—®é¢˜</span><br><span class="hljs-comment"># 3. å‡ºç•Œæ¡ä»¶çš„åˆ¤æ–­ï¼Ÿ</span><br><span class="hljs-comment"># 4. æœç´¢åŒºé—´çš„èŒƒå›´é€‰æ‹©é—®é¢˜ï¼Ÿ</span><br><span class="hljs-comment"># =====================================================================#</span><br><span class="hljs-comment"># </span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">baseBinarySearch</span>(<span class="hljs-params">nums,target</span>):<br><span class="hljs-comment"># numsæ˜¯ä¸€ä¸ªå‡åº</span><br><span class="hljs-comment"># å­˜åœ¨ä¸‹æ ‡å°±è¿”å›</span><br><span class="hljs-comment"># ä¸å­˜åœ¨å°±è¿”å›-1</span><br><span class="hljs-comment"># å› ä¸ºè¦è¿”å›ä¸‹æ ‡ï¼Œæ‰€ä»¥é‡‡ç”¨indexé‡‡ç”¨</span><br>left=<span class="hljs-number">0</span><br>right=<span class="hljs-built_in">len</span>(nums)-<span class="hljs-number">1</span><br><span class="hljs-comment">#=========================================#</span><br><span class="hljs-comment"># ã€äºŒåˆ†æŸ¥æ‰¾çš„å¼€é—­é—®é¢˜ã€‘</span><br><span class="hljs-comment"># ç¬¬ä¸€ç§ï¼šå·¦é—­å³é—­ï¼ŒåŒºé—´ä¸­æ‰€æœ‰çš„ç‚¹éƒ½å¯ä»¥å¾—åˆ°</span><br><span class="hljs-comment"># ç¬¬äºŒç§ï¼šå·¦é—­å³å¼€ï¼Œå³è¾¹ç•Œçš„ç‚¹ä¸èƒ½è¢«å–åˆ°</span><br><span class="hljs-comment">#=========================================#</span><br><br><span class="hljs-keyword">while</span>(left&lt;=right):<br><span class="hljs-comment">#=========================================#</span><br><span class="hljs-comment"># ã€å‡ºç•Œæ¡ä»¶çš„åˆ¤æ–­ã€‘</span><br><span class="hljs-comment"># left&lt;=right</span><br><span class="hljs-comment"># è¯´æ˜æŸ¥æ‰¾çš„å…ƒç´ ä¸å­˜åœ¨</span><br><span class="hljs-comment"># left&lt;right</span><br><span class="hljs-comment"># æ­¤æ—¶æŸ¥æ‰¾çš„åŒºé—´ä¸</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment">#=========================================#</span><br>mid=(left+right)//<span class="hljs-number">2</span><br><span class="hljs-comment">#=========================================#</span><br><span class="hljs-comment"># ã€MIDçš„å–å€¼é—®é¢˜ã€‘</span><br><span class="hljs-comment"># ç¬¬ä¸€ç§ï¼š(left+right)//2</span><br><span class="hljs-comment"># ç¬¬äºŒç§ï¼šleft+ï¼ˆright-leftï¼‰//2</span><br><span class="hljs-comment"># å‰è€…æ˜¯å¸¸è§å†™æ³•ï¼Œåè€…æ˜¯ä¸ºäº†é˜²æ­¢æ•´å‹æº¢å‡ºã€‚//2çš„ä»£è¡¨çš„ä¸­é—´æ•°æ˜¯å‘ä¸‹å–æ•´</span><br><span class="hljs-comment"># åŒæ—¶è¿™ç§å€¾å‘äºå¯»æ‰¾å·¦è¾¹çš„æ•°ç»„ï¼Œè¿™é‡Œå¯ä»¥é€‰æ‹©</span><br><span class="hljs-comment"># mid=(left+right+1)//2æˆ–è€…mid=leftï¼ˆright-left+1ï¼‰//2</span><br><span class="hljs-comment"># åŒæ—¶è¿™é‡Œçš„æŸ¥æ‰¾è¿‡æˆåŠŸ1/2ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©é å·¦ä¸€ç‚¹ã€æˆ–è€…é å³ä¸€ç‚¹</span><br><span class="hljs-comment"># ä»ä¸€èˆ¬çš„æ„ä¹‰ä¸Šæ¥è¯´ï¼Œè¶£ä¸­é—´ä½ç½®å…ƒç´ åœ¨å¹³å‡æ„ä¹‰ä¸­è¾¾åˆ°çš„æ•ˆæœæœ€å¥½</span><br><span class="hljs-comment">#=========================================#</span><br><span class="hljs-keyword">if</span> nums[mid]&lt;target:<br><span class="hljs-comment">#=========================================#</span><br><span class="hljs-comment"># ã€æœç´¢åŒºé—´çš„é€‰æ‹©ã€‘</span><br><span class="hljs-comment"># ç›´æ¥æ³•ï¼Œåœ¨å¾ªç¯ä½“ä¸­å…ƒç´ ä¹‹é—´è¿”å›</span><br><span class="hljs-comment"># æ’é™¤æ³•ï¼Œåœ¨å¾ªç¯ä½“ä¸­æ’å‡ºç›®æ ‡å…ƒç´ ä¸€å®šä¸å­˜åœ¨åŒºé—´</span><br><span class="hljs-comment">#=========================================#</span><br><br><span class="hljs-comment"># è¯´æ˜targetåœ¨å³è¾¹</span><br>left=mid+<span class="hljs-number">1</span><br><span class="hljs-keyword">elif</span> nums[mid]&gt;target:<br><span class="hljs-comment"># è¯´æ˜targetåœ¨å·¦è¾¹</span><br>right=mid-<span class="hljs-number">1</span><br><span class="hljs-keyword">else</span>:<br><span class="hljs-keyword">return</span> mid<br><br><span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br>nums=[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">44</span>]<br>target=<span class="hljs-number">4</span><br><span class="hljs-comment"># print(baseBinarySearch(nums,target))</span><br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/binary-search/">704 äºŒåˆ†æŸ¥æ‰¾</a></p><p><a href="https://leetcode.cn/problems/guess-number-higher-or-lower/">374 çŒœæ•°å­—å¤§å°</a></p><p><a href="https://leetcode.cn/problems/search-insert-position/">35 æœç´¢æ’å…¥ä½ç½®</a></p><p><a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/">34 æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ </a></p><p><a href="https://leetcode.cn/problems/two-sum-ii-input-array-is-sorted/">167ä¸¤æ•°ä¹‹å’Œ</a></p><p><a href="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/">153 å¯»æ‰¾æ—‹è½¬æ•°ç»„æœ€å°å€¼</a></p><p><a href="https://leetcode.cn/problems/search-a-2d-matrix/">74 æœç´¢äºŒç»´çŸ©é˜µ</a></p><p><a href="https://leetcode.cn/problems/sqrtx/">xçš„å¹³æ–¹æ ¹</a></p><h1 id="0x3-åŒæŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#0x3-åŒæŒ‡é’ˆ"></a> 0x3 åŒæŒ‡é’ˆ</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ====================================================================#</span><br><span class="hljs-comment"># ==========================æ•°ç»„åŒæŒ‡é’ˆ====================================#</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€ç®—æ³•æ¦‚è¿°ã€‘</span><br><span class="hljs-comment"># åœ¨éå†å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ˜¯ä½¿ç”¨å•ä¸ªæŒ‡é’ˆè¿›è¡Œè®¿é—®ï¼Œè€Œæ˜¯ä½¿ç”¨åŒæŒ‡é’ˆæ¥è®¿é—®è¾¾åˆ°ç›®çš„</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># ã€ç®—æ³•æ€æƒ³ã€‘</span><br><span class="hljs-comment"># æ ¹æ®æŒ‡é’ˆçš„æ–¹å‘ï¼Œå¯ä»¥åˆ†ä¸º</span><br><span class="hljs-comment"># å¯¹æ’æŒ‡é’ˆï¼šä¸¤ä¸ªæŒ‡é’ˆçš„æ–¹å‘ç›¸å</span><br><span class="hljs-comment"># å¿«æ…¢æŒ‡é’ˆï¼šæŒ‡é’ˆæ–¹å‘ç›¸åŒ</span><br><span class="hljs-comment"># åˆ†ç¦»åŒæŒ‡é’ˆï¼šå¦‚æœä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«å±äºä¸åŒçš„æ•°ç»„æˆ–è€…é“¾è¡¨</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># =====================================================================#</span><br><span class="hljs-comment"># </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">threeSum</span>(<span class="hljs-params">nums</span>):<br>    res=[]<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">arr,target</span>):<br>        left=<span class="hljs-number">0</span><br>        <span class="hljs-built_in">print</span>(arr)<br>        <span class="hljs-built_in">print</span>(target)<br>        right=<span class="hljs-built_in">len</span>(arr)-<span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">while</span>(left&lt;right):<br>        temp_sum=arr[left]+arr[right]<br>        <span class="hljs-keyword">if</span> temp_sum==target:<br>        res.append([target*(-<span class="hljs-number">1</span>),arr[left],arr[right]])<br>        left+=<span class="hljs-number">1</span><br>        right-=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">elif</span> temp_sum&lt;target:<br>        left+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">elif</span> temp_sum&gt;target:<br>        right-=<span class="hljs-number">1</span><br>    nums.sort()<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>        <span class="hljs-keyword">if</span> nums[i]&gt;<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">if</span> i&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> nums[i]==nums[i-<span class="hljs-number">1</span>]:<br>        <span class="hljs-keyword">continue</span><br>        twoSum(nums[i+<span class="hljs-number">1</span>:],(-<span class="hljs-number">1</span>)*nums[i])        <br>    <span class="hljs-keyword">return</span> res<br>nums = [-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">4</span>]<br><span class="hljs-comment"># print(threeSum(nums))</span><br><span class="hljs-comment"># </span><br><span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/two-sum-ii-input-array-is-sorted">167 ä¸¤æ•°ä¹‹å’Œ</a></p><p><a href="https://leetcode.cn/problems/reverse-string">344 åè½¬å­—ç¬¦ä¸²</a></p><p><a href="https://leetcode.cn/problems/reverse-vowels-of-a-string">345åè½¬å­—ç¬¦ä¸²ä¸­çš„å…ƒéŸ³å­—æ¯</a></p><p><a href="https://leetcode.cn/problems/container-with-most-water">11 æœ€å¤šçš„å®¹å™¨</a></p><p><a href="https://leetcode.cn/problems/3sum">15ä¸‰æ•°ä¹‹å’Œ</a></p><p><a href="https://leetcode.cn/problems/3sum-closest">16æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ</a></p><h1 id="0x04-æ»‘åŠ¨çª—å£"><a class="markdownIt-Anchor" href="#0x04-æ»‘åŠ¨çª—å£"></a> 0x04 æ»‘åŠ¨çª—å£</h1><p>ä¸‹å‘¨ä»»åŠ¡</p><h1 id="0x05"><a class="markdownIt-Anchor" href="#0x05"></a> 0x05</h1><p>ç®€å•é¢˜ä¸­ä¹Ÿä¼šè•´å«ç€ä¸€äº›åŸºæœ¬çš„æ“ä½œ</p><p>æ¯”å¦‚è®¾ç½®ä¸€äº›æ ‡å¿—ä½ã€è¾¹ç•Œæ¡ä»¶çš„è®¾è®¡ã€è¾…åŠ©å…ƒç´ çš„è®¾ç½®ï¼Œè¿™äº›éœ€è¦æ½œç§»é»˜åŒ–çš„åˆ·é¢˜çš„è¿‡ç¨‹ä¸­æ‰èƒ½çœ‹åˆ°</p>]]></content>
    
    
    <categories>
      
      <category>DataStructure</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œ-04-Chapter04 ç½‘ç»œå±‚åè®®</title>
    <link href="/posts/582ef9f0.html"/>
    <url>/posts/582ef9f0.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨åº”ç”¨å±‚æˆ‘ä»¬å¯ä»¥è§£é‡Šæ•°æ®ä¼ è¾“çš„ç›®çš„ã€åœ¨è¿è¾“å±‚åˆ†æå¯ä»¥çœ‹å‡ºä¸¤ä¸ªä¸»æœºè¿›ç¨‹ä¹‹é—´é€»è¾‘é€šä¿¡ã€åœ¨æœ¬æ¬¡çš„ç½‘ç»œå±‚å°†æ¶‰åŠä¸»æœºä¸ä¸»æœºä¹‹é—´çš„é€šä¿¡æœåŠ¡æ˜¯å¦‚ä½•å®ç°çš„ã€‚ç”±äºç½‘ç»œå±‚çš„å¤æ‚æ€§ï¼Œå…¶å¯ä»¥åˆ†ä¸ºæ•°æ®å±‚é¢å’Œæ§åˆ¶å±‚é¢ã€‚</p><span id="more"></span><h2 id="0x01-è¿è¾“å±‚overview"><a class="markdownIt-Anchor" href="#0x01-è¿è¾“å±‚overview"></a> 0x01 è¿è¾“å±‚overview</h2><p>å‡è®¾ä»H1å‘H2è½¬é€ä¿¡æ¯</p><p>H1ä¸­çš„ç½‘ç»œå±‚å–å¾—æ¥è‡ªäºH1è¿è¾“å±‚çš„æŠ¥æ–‡æ®µï¼Œå°†æ¯ä¸ªæŠ¥æ–‡æ®µå°è£…æˆä¸€ä¸ªæ•°æ®æŠ¥ï¼Œç„¶åå‘ç›¸é‚»è·¯ç”±å™¨R1å‘é€æ•°æ®ï¼Œ åœ¨ç½‘ç»œä¸­ç»è¿‡å¤šä¸ªè·¯ç”±å™¨çš„è½¬å‘å’Œæ§åˆ¶ï¼Œåˆ°è¾¾æ¥æ”¶æ–¹çš„è·¯ç”±å™¨ï¼›</p><p>åœ¨ç½‘ç»œçš„è¿‡ç¨‹ä¸­æ¯å°è·¯ç”±å™¨çš„åŠŸèƒ½æ˜¯ä»è¾“å…¥é“¾è·¯å‘è¾“å‡ºé“¾è·¯çš„è½¬å˜ï¼›æ§åˆ¶å±‚é¢æ˜¯åè°ƒæœ¬åœ°çš„è·¯ç”±å™¨è½¬å‘åŠ¨ä½œï¼Œç„¶åæ•´ä¸ªè¿‡ç¨‹çš„æ•°æ®æŠ¥æ²¿ç€originå’Œendä¸»æœºä¹‹é—´çš„è·¯ç”±å™¨è·¯å¾„è¿›è¡Œä¸»æœºä¹‹é—´ç«¯åˆ°ç«¯ä¼ é€ã€‚</p><p>åœ¨æ¥æ”¶æ–¹ä¸»æœºH2æ”¶åˆ°æ¥è‡ªç›¸é‚»è·¯ç”±å™¨çš„R2çš„æ•°æ®æŠ¥ï¼Œæå–å‡ºè¿è¾“å±‚çš„æ•°æ®æ®µï¼Œå¹¶å°†å…¶ä¸Šäº¤ç»™H2çš„è¿è¾“å±‚ï¼Œåœ¨ä¼ é€’ç»™åº”ç”¨å±‚</p><img src="/Users/chenxia/Library/Application Support/typora-user-images/image-20220628112103408.png" alt="image-20220628112103408" style="zoom:50%;" /><p>è½¬å‘ï¼ˆforwardingï¼‰ï¼šæŒ‡çš„å°†åˆ†ç»„ä»ä¸€ä¸ªè¾“å…¥é“¾è·¯æ¥å£è½¬ç§»åˆ°é€‚å½“çš„è¾“å‡ºé“¾è·¯æ¥å£çš„è·¯ç”±æœ¬åœ°å·¥ä½œ</p><p>è·¯ç”±é€‰æ‹©ï¼ˆroutingï¼‰ï¼šç¡®å®šåˆ†ç»„ä»originåˆ°endæ¬¡çš„ç½‘ç»œèŒƒå›´å¤„ç†è¿‡ç¨‹</p><p>è½¬å‘è¡¨ï¼ˆforwarding tableï¼‰ï¼šè·¯ç”±å™¨æ£€æŸ¥åˆ°è¾¾åˆ†ç»„é¦–éƒ¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µå€¼ï¼Œè¿›è€Œå®ç°è¿™äº›é¦–éƒ¨å€¼åœ¨å…¶è½¬å‘è¡¨ä¸­ç´¢å¼•ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•æ¥è½¬å‘åˆ†ç»„</p><p>è½¬å‘è¡¨åˆ¶å®šçš„æ–¹æ³•ï¼Ÿï¼Ÿ</p><ol><li>ä¼ ç»Ÿæ–¹æ³•ï¼Œè·¯ç”±å™¨ä¸­ç‰©ç†å­˜åœ¨çš„æ‰€æœ‰è½¬å‘è¡¨çš„å†…å®¹æ˜¯ç”±äººç±»ç½‘ç»œæ“ä½œå‘˜ç›´æ¥é…ç½®çš„</li><li>SDNæ–¹æ³•ï¼Œè¿œç¨‹æ§åˆ¶å™¨è®¡ç®—å’Œåˆ†å‘è½¬å‘è¡¨æ¥ä¾›æ¯å°è·¯ç”±å™¨é€‰æ‹©ï¼›è¿™ä¸ªéœ€è¦è®¾è®¡åœ¨å…·æœ‰é«˜å¯é æ€§å’Œå†—ä½™æ€§çš„è¿œç¨‹æ•°æ®ä¸­å¿ƒï¼Œç”±IDPæˆ–è€…ç¬¬ä¸‰æ–¹ç®¡ç†ã€‚æ­¤æ—¶è·¯ç”±å™¨å’Œè¿œç¨‹æ§åˆ¶å™¨ä¹‹é—´çš„é€šä¿¡é€šè¿‡è½¯ä»¶å®šä¹‰ç½‘ç»œï¼ˆsoftware defined networkingï¼ŒSDNï¼‰æ¥æ§åˆ¶</li></ol><h2 id="0x02-è¿è¾“å±‚åˆ†æ"><a class="markdownIt-Anchor" href="#0x02-è¿è¾“å±‚åˆ†æ"></a> 0x02 è¿è¾“å±‚åˆ†æ</h2><p>æˆ‘ä»¬å¯ä»¥ç”¨å¼€é˜”çš„è§†é‡æ¥ä¸“æ³¨äºæˆ‘ä»¬å¼•å…¥çš„æ–°ä¸œè¥¿å¹¶è€ƒè™‘ç½‘ç»œå±‚å¯èƒ½æä¾›çš„ä¸åŒç±»å‹çš„æœåŠ¡ï¼›åœ¨è¿™æ ·ä¸€ä¸ªå¤æ‚çš„æƒ…å†µä¸­å¯èƒ½å­˜åœ¨çš„é—®é¢˜åŒ…æ‹¬ï¼š</p><ol><li>è¿è¾“å±‚å¦‚ä½•å°†å¤šä¸ªåˆ†ç»„äº¤ä»˜ç»™ç›®çš„åœ°ï¼Ÿ</li><li>è¿è¾“å±‚ä¹‹åæ˜¯å¦å¯ä»¥ä¿æŒé¡ºåºï¼Ÿ</li><li>å‘é€ä¸¤ä¸ªåˆ†ç»„å’Œæ¥æ”¶åˆ†ç»„çš„æ—¶é—´é—´éš”ç›¸åŒå—ï¼Ÿ</li><li>ç½‘ç»œå±‚å¦‚ä½•æä¾›æ‹¥å¡çš„ä¿¡æ¯ç»™è¿è¾“å±‚ï¼Ÿ</li><li>åœ¨å‘é€ä¸»æœºå’Œæ¥æ”¶ä¸»æœºä¹‹é—´è¿æ¥è¿è¾“å±‚é€šé“çš„æŠ½è±¡ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>===</li></ol><p>è¿™äº›ç­”æ¡ˆéƒ½æ˜¯å¯¹ç½‘ç»œå±‚æä¾›çš„æœåŠ¡æ¨¡å‹è¿›è¡Œæè¿°æ‰€å†³å®šã€‚ç½‘ç»œæœåŠ¡æ¨¡å‹ï¼ˆnetwork service modelï¼‰å®šä¹‰æ•°æ®åˆ†ç»„åœ¨åˆ†é€ä¸æ¥æ”¶ç«¯ç³»ç»Ÿä¹‹é—´ç«¯åˆ°ç«¯çš„è¿è¾“ç‰¹æ€§</p><p>æˆ‘ä»¬<strong>é¦–å…ˆ</strong>è€ƒè™‘ç½‘ç»œå±‚æ‰€èƒ½æä¾›å¯èƒ½çš„æœåŠ¡ï¼š</p><ol><li>ç¡®ä¿äº¤ä»˜ï¼Œè¯¥æœåŠ¡ç¡®ä¿åˆ†ç»„å°†æœ€ç»ˆåˆ°è¾¾ç›®çš„åœ°</li><li>æ—¶å»¶ä¸Šç•Œï¼Œåœ¨ç‰¹å®šçš„ä¸»æœºä¸ä¸»æœºä¹‹é—´çš„æœ€å¤§å»¶è¿Ÿ</li><li>æœ‰åºåˆ†ç»„äº¤ä»˜ï¼Œç¡®ä¿åˆ†ç»„æŒ‰ç…§å‘é€é¡ºåºåˆ°è¾¾ç›®çš„åœ°</li><li>ç¡®ä¿æœ€å°å¸¦å®½ï¼Œæ¨¡ä»¿å‘é€å’Œæ¥æ”¶æŒ‰ç…§ç‰¹å®šé€Ÿç‡ä¼ è¾“é“¾è·¯</li><li>å®‰å…¨æ€§ï¼Œç½‘ç»œå±‚èƒ½å¤Ÿåœ¨æºåŠ å¯†æ‰€æœ‰æ•°æ®æŠ¥ï¼Œå¹¶åœ¨ç›®çš„åœ°è§£å¯†è¿™äº›åˆ†ç»„</li><li>ä»¥åŠä¸€äº›å…¶ä»–çš„æ–¹å¼</li></ol><p>ä½†æ˜¯ï¼å› ç‰¹ç½‘çš„ç½‘ç»œå±‚åªæä¾›ä¸€ç§æœåŠ¡ï¼Œå°½åŠ›è€Œä¸ºæœåŠ¡ï¼ˆbest- effort serviceï¼‰ï¼›å…¶ä»–çš„ç½‘ç»œä½“ç³»ç»“æ„å®šä¹‰å’Œå®ç°äº†è¶…è¿‡å› ç‰¹ç½‘å°½åŠ›è€Œä¸ºæœåŠ¡çš„æœåŠ¡æ¨¡å‹ï¼Œä¾‹å¦‚ATMç½‘ç»œä½“ç³»å®ç°äº†ç¡®ä¿é¡ºåºæ¶åŒ–æ—¶é—´å»¶è¿Ÿã€æœ‰è¾¹ç•Œæ—¶å»¶è¿Ÿçš„ç¡®ä¿è¶³æ ¡å¸¦å®½ã€ä»¥åŠä¸€äº›ç»§æ‰¿æœåŠ¡ä½“ç³»ç»“æ„æä¾›ç«¯åˆ°ç«¯çš„æ—¶å»¶ä¿è¯ã€‚ä½†æ˜¯å› ç‰¹ç½‘è¿™ç§å°½åŠ›è€Œä¸ºçš„æœåŠ¡æ¨¡å‹å·²ç»è¢«è¯æ˜è¶³å¤Ÿå¥½ã€‚</p><p>åé¢æˆ‘ä»¬å°†è®¨è®ºï¼š</p><ul><li><p>è·¯ç”±å™¨å†…éƒ¨ç¡¬ä»¶æ“ä½œï¼ŒåŒ…æ‹¬è¾“å…¥å’Œè¾“å‡ºåˆ†ç»„ã€å†…éƒ¨äº¤æ¢æœºåˆ¶ä»¥åŠåˆ†ç»„æ’é˜Ÿå’Œè°ƒåº¦</p></li><li><p>ä¼ ç»Ÿçš„ipè½¬å‘ï¼Œå…¶ä¸­åˆ†ç»„åŸºäºå®ƒä»¬çš„ç›®çš„IPåœ°å€è½¬å‘åˆ°è¾“å‡ºç«¯å£ï¼Œå°†å­¦ä¹ åˆ°IPå¯»å€</p></li></ul><p>ä»¥åŠæ›´è¿‘ä¸€æ­¥çš„ä¸€èˆ¬è½¬å‘ï¼ŒåŸºäºå¤§é‡é¦–éƒ¨å€¼æ¥è½¬å‘åˆ°è¾“å‡ºç«¯å£</p><p>è½¬å‘å’Œäº¤æ¢ä¸¤ä¸ªæœ¯è¯­ï¼›çº¦å®š</p><ul><li><p>åˆ†ç»„äº¤æ¢æœºï¼šæŒ‡çš„æ˜¯ä¸€å°é€šç”¨åˆ†ç»„äº¤æ¢ï¼Œæ ¹æ®åˆ†ç»„é¦–éƒ¨å­—æ®µçš„å€¼ï¼Œä»è¾“å…¥é“¾è·¯è½¬ç§»åˆ°è¾“å‡ºåˆ†ç»„</p></li><li><p>é“¾è·¯å±‚äº¤æ¢æœºï¼šæ ¹æ®é“¾è·¯å¸§ä¸­çš„å­—æ®µå€¼åšå‡ºè½¬å‘å†³å®š</p></li><li><p>è·¯ç”±å™¨ï¼ˆrouterï¼‰ï¼šå…¶ä»–çš„åˆ†ç»„äº¤æ¢æœºç§°ä¸ºè·¯ç”±å™¨ï¼ŒåŸºäºç½‘ç»œå±‚çš„æ•°æ®æŠ¥ä¸­çš„é¦–éƒ¨å­—æ®µå€¼åšå‡ºè½¬å‘å†³å®š</p></li></ul><h2 id="0x03-è·¯ç”±å™¨å·¥ä½œåŸç†"><a class="markdownIt-Anchor" href="#0x03-è·¯ç”±å™¨å·¥ä½œåŸç†"></a> 0x03 è·¯ç”±å™¨å·¥ä½œåŸç†</h2><ol><li>è¾“å…¥ç«¯å£ï¼ˆinput portï¼‰ï¼ˆç¡¬ä»¶ï¼‰<ol><li>æ‰§è¡Œè¿›å…¥ ç‰©ç†é“¾è·¯çš„ç‰©ç†å±‚åŠŸèƒ½</li><li>é“¾è·¯è¿œç«¯çš„æ•°æ®é“¾è·¯å±‚äº¤äº’æ¥æ‰§è¡Œæ•°æ®é“¾è·¯å±‚åŠŸèƒ½</li><li>è¾“å…¥ç«¯å£éœ€è¦æ‰§è¡ŒæŸ¥æ‰¾åŠŸèƒ½</li><li>å¯¹äºæ§åˆ¶åˆ†ç»„ä»è¾“å…¥ç«¯å£è½¬å‘åˆ°è·¯ç”±é€‰æ‹©å¤„ç†å™¨</li></ol></li><li>äº¤æ¢ç»“æ„ï¼ˆswitchï¼‰ï¼ˆç¡¬ä»¶ï¼‰<ol><li>å°†è·¯ç”±å™¨çš„è¾“å…¥ç«¯å£è¿æ¥åˆ°è¾“å‡ºç«¯å£</li><li>ç½‘ç»œè·¯ç”±å™¨å†…éƒ¨ç½‘ç»œ</li></ol></li><li>è¾“å‡ºç«¯å£ï¼ˆoutput portï¼‰ï¼ˆç¡¬ä»¶ï¼‰<ol><li>å­˜å‚¨ä»äº¤æ¢ç»“æ„æ¥æ”¶çš„åˆ†ç»„ï¼Œå¹¶æ‰§è¡Œå¿…è¦çš„é“¾è·¯å±‚å’Œç‰©ç†å±‚åŠŸèƒ½</li></ol></li><li>è·¯ç”±é€‰æ‹©å¤„ç†å™¨ï¼ˆrouter select processï¼‰<ol><li>ä¼ ç»Ÿæ§åˆ¶ï¼Œæ‰§è¡Œè·¯ç”±é€‰æ‹©åè®®ã€ç»´æŠ¤è·¯ç”±é€‰æ‹©è¡¨ä¸å…³è”é“¾è·¯çŠ¶æ€ä¿¡æ¯</li><li>SDNæ§åˆ¶ï¼Œä¸è¿œç¨‹æ§åˆ¶å™¨é€šä¿¡ã€è¾“å…¥è¾“å‡ºç«¯å£å®‰è£…è¡¨é¡¹</li></ol></li></ol><p>ä¸ºä»€ä¹ˆè·¯ç”±å™¨éœ€è¦ä½¿ç”¨ç¡¬ä»¶å®ç°ï¼Ÿæ¯”å¦‚10Gpbså’Œ64å­—èŠ‚ä¸ºå•ä½çš„IPæ•°æ®æŠ¥ï¼Œå…¶è¾“å…¥ç«¯å£åœ¨å¦ä¸€ä¸ªæ•°æ®æŠ¥åˆ°è¾¾ä¹‹é—´åªæœ‰51.2nsæ¥å¤„ç†æ•°æ®æŠ¥ï¼Œå¦‚æœNå„ç«¯å£ç»“åˆåœ¨ä¸€å—çº¿è·¯å¡ä¸Šï¼Œæ•°æ®å¤„ç†é€Ÿç‡å¿…é¡»ä»¥Nå€é€Ÿç‡æ¥è¿è¡Œï¼Œè¿œè¿œè¶…è¿‡è½¯ä»¶å®ç°çš„é€Ÿç‡ï¼›æ•°æ®å±‚é¢ä»¥msæˆ–è€…sçš„æ–¹é¢è¿è¡Œï¼Œæ‰§è¡ŒåŒ…æ‹¬è·¯ç”±é€‰æ‹©åè®®ã€ä¸Šä¸‹çº¿è·¯å“åº”ã€è¿œç¨‹æ§åˆ¶é€šä¿¡å’Œæ‰§è¡Œç®¡ç†åŠŸèƒ½</p><p>åœ¨æ·±å…¥è®¨è®ºè·¯ç”±å™¨å†…éƒ¨ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®è·¯ç”±å™¨å¤„ç†éœ€è¦ä»€ä¹ˆä¿¡æ¯ï¼Ÿ</p><ol><li>æœ‰ç›®çš„åœ°è½¬å‘</li><li>é€šç”¨è½¬å‘</li></ol><h3 id="31-è¾“å…¥ç«¯å£å¤„ç†å’ŒåŸºäºç›®çš„åœ°è½¬å‘"><a class="markdownIt-Anchor" href="#31-è¾“å…¥ç«¯å£å¤„ç†å’ŒåŸºäºç›®çš„åœ°è½¬å‘"></a> 3.1  è¾“å…¥ç«¯å£å¤„ç†å’ŒåŸºäºç›®çš„åœ°è½¬å‘</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3nsnsnw33j210o0augmn.jpg" alt="image-20220628112516078" /></p><ol><li>çº¿è·¯ç«¯æ¥</li><li>æ•°æ®é“¾è·¯å¤„ç†ï¼ˆåè®®ã€æ‹†å°ï¼‰</li><li>æŸ¥æ‰¾ã€è½¬å‘ã€æ’é˜Ÿ</li><li>äº¤æ¢ç»“æ„</li></ol><p>é¦–å…ˆçœ‹å‡ºä¸€ä¸ªæœ€åŸºæœ¬çš„ä¾‹å­ï¼Œè·¯ç”±å™¨çš„è¾“å…¥ç«¯å£åˆ†ä¸ºå››æ¡é“¾è·¯ï¼Œæˆ‘ä»¬ä¸å¿…å¯¹è·¯ç”±å™¨çš„æ˜ å°„åŒ…æ‹¬40äº¿å¯èƒ½å­˜åœ¨çš„åœ°å€ï¼›æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸åŒçš„åŒ¹é…åŸåˆ™æ¥è¿›è¡Œäº¤æ¢ï¼Œä½†æ˜¯ç”±äºIPåœ°å€ç¼–ç çš„å­˜åœ¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æœ€å¤§å‰ç¼€åŒ¹é…è§„åˆ™ï¼ˆlongest prefix matching ruleï¼‰æ¥è¿›è¡ŒåŒ¹é…</p><p>åœ¨è½¬å‘è¡¨ç¡®å®šçš„æ­¤æŠ€æœ¯ï¼ŒæŸ¥æ‰¾æ˜¯ç®€å•çš„ï¼Œä¹Ÿå°±æ˜¯å®ç°ç¡¬ä»¶é€»è¾‘ä¸‹çš„æœ€å¤§å‰ç¼€IPï¼Œä½†æ˜¯åœ¨Gpbsé€Ÿç‡ä¸‹ï¼Œè¿™ç§æŸ¥æ‰¾å¿…é¡»åœ¨nsæ‰§è¡Œï¼Œå› æ­¤å¿…é¡»è¦ç”¨ç¡¬ä»¶æ‰§è¡ŒæŸ¥æ‰¾ã€è¿˜éœ€è¦å¯¹å¤§å‹è½¬å‘è¡¨ä½¿ç”¨è¶…å‡ºç®€å•çº¿æ€§æœç´¢æŠ€æœ¯ï¼Œç¡¬ä»¶å¸¸æ—¶é—´DRAMã€SRAMã€TCAMç­‰</p><p>ç¡®å®šåˆ†ç»„çš„è¾“å‡ºç«¯å£ï¼Œè¯¥åˆ†ç»„èƒ½å¤Ÿå‘é€è¿›å…¥äº¤æ¢ç»“æ„ï¼Œå¦‚æœå…¶ä»–åˆ†ç»„æ­£åœ¨ä½¿ç”¨ï¼Œæˆ‘ä»¬åœ¨è¿›å…¥äº¤æ¢ç»“æ„æ—¶å€™æš‚æ—¶é˜»å¡ï¼Œå› æ­¤ä¸€ä¸ªè¢«é˜»å¡çš„åˆ†ç»„å¿…é¡»åœ¨è¾“å…¥ç«¯å£å‡ºæ’é˜Ÿï¼Œå¹¶ç­‰å¾…ç¨åè¢«åŠæ—¶è°ƒåº¦æ¥é€šè¿‡äº¤æ¢ç»“æ„</p><ol><li>å¿…é¡»å‡ºç°ç‰©ç†å±‚å’Œé“¾è·¯å±‚å¤„ç†</li><li>å¿…é¡»æ£€æŸ¥åˆ†ç»„çš„ç‰ˆæœ¬å·ã€æ£€éªŒå’Œä»¥åŠå¯¿å‘½å­—æ®µï¼Œå¹¶ä¸”é‡å†™è¿™ä¸¤ä¸ªå­—æ®µ</li><li>å¿…é¡»æ›´æ–°ç”¨æˆ·ç½‘ç»œç®¡ç†çš„è®¡æ•°å™¨</li></ol><p>åŒ¹é…+åŠ¨ä½œ</p><h3 id="32-äº¤æ¢"><a class="markdownIt-Anchor" href="#32-äº¤æ¢"></a> 3.2  äº¤æ¢</h3><ol><li><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3nsobsd1pj210s0msgnx.jpg" alt="image-20220628112544656" /></li></ol><p>ä¸‰ç§äº¤æ¢æŠ€æœ¯</p><ol><li>å†…å­˜äº¤æ¢</li><li>æ€»çº¿äº¤æ¢</li><li>äº’è”ç½‘ç»œäº¤æ¢</li></ol><h3 id="33-è¾“å‡ºç«¯å£å¤„ç†"><a class="markdownIt-Anchor" href="#33-è¾“å‡ºç«¯å£å¤„ç†"></a> 3.3 è¾“å‡ºç«¯å£å¤„ç†</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3nsofiyvnj20ye0agt9o.jpg" alt="image-20220628112552623" /></p><h3 id="34-æ’é˜Ÿåˆ†æ"><a class="markdownIt-Anchor" href="#34-æ’é˜Ÿåˆ†æ"></a> 3.4 æ’é˜Ÿåˆ†æ</h3><p>åœ¨è¾“å…¥ç«¯å£å’Œè¾“å‡ºç«¯å£éƒ½ä¼šå‡ºç°æ’é˜Ÿçš„ç°è±¡ï¼Œå½“è·¯ç”±å™¨çš„ç¼“å­˜ç©ºé—´è€—å°½çš„æ—¶å€™å°±ä¼šå‡ºç°ä¸¢åŒ…çš„ç°è±¡</p><p>é‚£ä¹ˆåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼ˆè¾“å…¥é€Ÿç‡ã€Nå’Œäº¤æ¢é€Ÿç‡ï¼‰åœ¨å¤šå°‘çš„æ—¶å€™ä¼šå‡ºç°æ‹¥å µï¼Ÿå¦‚ä½•ç¼“è§£æ‹¥å µç°è±¡ï¼Ÿ</p><ol><li>è¾“å…¥æ’é˜Ÿï¼šçº¿è·¯å‰éƒ¨é˜»å¡ï¼ˆHOL head of the lineï¼‰</li><li>è¾“å‡ºæ’é˜Ÿï¼Œå¼ƒå°¾ï¼ˆdrop tailï¼‰ã€ä»¥åŠæä¾›ä¸»åŠ¨é˜Ÿåˆ—ç®¡ç†ï¼ˆactive queue managementï¼ŒAQMç®—æ³•ï¼‰ã€éšæœºæ—©æœŸæ£€æµ‹ï¼ˆRandom Early Detectionï¼ŒREDï¼‰</li></ol><h3 id="35-åˆ†ç»„è°ƒåº¦"><a class="markdownIt-Anchor" href="#35-åˆ†ç»„è°ƒåº¦"></a> 3.5  åˆ†ç»„è°ƒåº¦</h3><p>æ’é˜Ÿçš„åˆ†ç»„å¦‚ä½•ç»è¾“å‡ºé“¾è·¯ä¼ è¾“çš„é—®é¢˜ï¼Œè¿™é‡Œå­˜åœ¨ä¸€äº›åŸºæœ¬çš„è§„åˆ™</p><ol><li>å…ˆè¿›å…ˆå‡º</li><li>ä¼˜å…ˆæƒæ’åº priority queuing</li><li>å¾ªç¯æ’åºè§„åˆ™ round robin queueing discipline</li></ol><h2 id="0x04-ç½‘ç»œå±‚åè®®-ç½‘é™…åè®®ipv4-ipv6"><a class="markdownIt-Anchor" href="#0x04-ç½‘ç»œå±‚åè®®-ç½‘é™…åè®®ipv4-ipv6"></a> 0x04 ç½‘ç»œå±‚åè®® â€“ ç½‘é™…åè®®ï¼ˆIPv4ã€IPv6ï¼‰</h2><h3 id="41-ipv4æ•°æ®æŠ¥æ ¼å¼"><a class="markdownIt-Anchor" href="#41-ipv4æ•°æ®æŠ¥æ ¼å¼"></a> 4.1 IPv4æ•°æ®æŠ¥æ ¼å¼</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3nspqxsc9j20zq0mqwge.jpg" alt="image-20220628112708344" /></p><p>å…³é”®å­—æ®µåˆ†æ</p><ol><li>ç‰ˆæœ¬å·</li><li>é¦–éƒ¨é•¿åº¦</li><li>æœåŠ¡ç±»å‹TOS</li><li>æ•°æ®æŠ¥é•¿åº¦ï¼Œå› ä¸ºè¯¥å­—èŠ‚ä¸º16bitï¼Œæ‰€ä»¥IPæ•°æ®æŠ¥ç†è®ºé•¿åº¦ä¸º65536ï¼›ä½†æ˜¯ä¸€èˆ¬å¾ˆå°‘è¶…è¿‡1500</li><li>æ ‡è¯†ã€æ ‡å¿—ã€ç‰‡åç§»ï¼Œä¸IPåˆ†åŒºæœ‰å…³ï¼Œä½†æ˜¯IPv6ä¸å…è®¸åˆ†ç»„</li><li>å¯¿å‘½TTLï¼Œtime to live</li><li>åè®®ï¼Œæ¯”å¦‚6æ ‡è¯†TCPã€17è¡¨ç¤ºUDPï¼›åè®®å·ç±»ä¼¼è¿è¾“å±‚æŠ¥æ–‡æ®µä¸­ç«¯å£å·å­—æ®µèµ·åˆ°çš„ä½œç”¨</li><li>é¦–éƒ¨æ£€éªŒå’Œ</li><li>æºå’Œç›®æ ‡IPåœ°å€</li><li>é€‰é¡¹ï¼Œæ„å‘³ç€IPé¦–éƒ¨å…è®¸è¢«æ‹“å±•</li><li>æ•°æ®ï¼Œæœ‰æ•ˆè½½è·ï¼Œå¤„ç†TCPã€UDPè¿˜åŒ…æ‹¬ICMPç­‰åè®®</li></ol><h3 id="42-ipv4æ•°æ®æŠ¥åˆ‡ç‰‡"><a class="markdownIt-Anchor" href="#42-ipv4æ•°æ®æŠ¥åˆ‡ç‰‡"></a> 4.2 IPv4æ•°æ®æŠ¥åˆ‡ç‰‡</h3><p>ç½‘ç»œå±‚ä¸‹é¢çš„é“¾è·¯å±‚çš„ä¸åŒï¼Œå…¶æ‰¿è½½ç½‘ç»œåˆ†ç»„çš„é•¿åº¦ä¹Ÿä¸åŒï¼Œæœ‰çš„åè®®èƒ½æ‰¿è½½å¤§æ•°æ®æŠ¥ã€æœ‰çš„åè®®åªèƒ½æ‰¿è½½å°çš„åˆ†ç»„ã€‚æ¯”å¦‚ä»¥å¤ªç½‘ä¸èƒ½è¶…è¿‡1500å­—èŠ‚ã€æŸäº›å¹¿åŸŸç½‘ä¸èƒ½è¶…è¿‡576å­—èŠ‚ï¼Œè¿™ä¸ªè¢«ç§°ä¸ºæœ€å¤§ä¼ é€å•å…ƒï¼ˆMaximum Transmission Unitï¼ŒMTUï¼‰</p><p>ä¸ºäº†ä¿è¯åœ¨æ‰€ä»¥çš„é“¾è·¯ä¸­éƒ½å¯ä»¥ä¼ è¾“ï¼Œæˆ‘ä»¬éœ€è¦å°†IPæ•°æ®æŠ¥ä¸­çš„æ•°æ®åˆ†ç‰‡æˆå¤šä¸ªè¾ƒå°çš„IPæ•°æ®æŠ¥ï¼Œç”¨å•ç‹¬çš„é“¾è·¯å±‚å¸§ï¼ˆFrameï¼‰æ¥å°è£…è¿™äº›è¾ƒå°çš„IPæ•°æ®æŠ¥ï¼Œç„¶åé€šè¿‡è¾“å‡ºé“¾è·¯å‘é€è¿™äº›å¸§ï¼Œæ¯ä¸ªè¾ƒå°çš„æ•°æ®æŠ¥ç§°ä¸ºç‰‡ï¼ˆFragmentï¼‰</p><h3 id="43-ipv4ç¼–å€"><a class="markdownIt-Anchor" href="#43-ipv4ç¼–å€"></a> 4.3 IPv4ç¼–å€</h3><p>åœ¨è®¨è®ºIPç¼–å€ä¹‹å‰ï¼Œæˆ‘ä»¬ç®€è¦äº†è§£ä¸»æœºä¸è·¯ç”±å™¨æ¥å…¥ç½‘ç»œçš„æ–¹æ³•ï¼Œä¸€å°ä¸»æœºé€šå¸¸åªæœ‰ä¸€æ¡é“¾è·¯è¿æ¥åˆ°ç½‘ç»œï¼Œå½“ä¸»æœºä¸­çš„IPæƒ³å‘é€ä¸€ä¸ªæ•°æ®æŠ¥ï¼Œä»–å°±éœ€è¦åœ¨è¯¥é“¾è·¯å‘é€ï¼Œè¿™ä»¶ç§°ä¸ºæ¥å£ï¼ˆinterfaceï¼‰ï¼›è·¯ç”±å™¨ç”±äºæ˜¯ç½‘ç»œä¸­çš„è®¾ç½®ï¼Œå› æ­¤å…·æœ‰å¤šä¸ªæ¥å£ï¼›åŒæ—¶å› ä¸ºä¸»æœºå’Œè·¯ç”±å™¨éƒ½å¯ä»¥å‘é€å’Œæ¥æ”¶IPæ•°æ®æŠ¥ï¼Œå› æ­¤éƒ½éœ€è¦æ‹¥æœ‰è‡ªå·±çš„iPåœ°å€ï¼Œä»æŠ€æœ¯ä¸Šè¯´ï¼ŒIPåœ°å€ä¸ä¸€ä¸ªæ¥å£ç›¸å…³è”ï¼Œè€Œä¸æ˜¯ä¸åŒ…æ‹¬è¯¥æ¥å£çš„ä¸»æœºæˆ–è·¯ç”±å™¨ç›¸å…³è”</p><p>IPv4é‡‡ç”¨ç‚¹åˆ†åè¿›åˆ¶è®°æ³•ï¼Œæ¯”å¦‚192.168.0.1</p><p>åœ¨å…¨çƒå› ç‰¹ç½‘ä¸­æ¯å°ä¸»æœºå’Œè·¯ç”±å™¨ä¸Šçš„æ¯ä¸ªæ¥å£éƒ½å¿…é¡»æœ‰å…¨çƒå”¯ä¸€çš„IPåœ°å€ï¼ˆåœ¨NATåé¢çš„æ¥å£é™¤å¤–ï¼‰ï¼Œè¿™äº›åœ°å€ä¸èƒ½éšæ„è‡ªç”±é€‰æ‹©</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3nsqsfz61j20zy0ng408.jpg" alt="image-20220628112808159" /></p><p>äº’è”è¿™ä¸»æœºæ¥å£å’Œè·¯ç”±å™¨æ¥å£å½¢æˆä¸€ä¸ªå­ç½‘ï¼ˆsubnetï¼‰ï¼ŒIPç¼–å€ä¸ºè¿™ä¸ªå­ç½‘åˆ†é…ä¸€ä¸ªåœ°å€ï¼Œ223.1.1.0/24.ç§°ä¸ºå­ç½‘æ©ç ï¼ˆnetwork maskï¼‰</p><p>å› ç‰¹ç½‘çš„åœ°å€åˆ†é…ç­–ç•¥ä¸ºæ— ç±»åˆ«åŸŸé—´è·¯ç”±é€‰æ‹©ï¼ˆClassless interDomain routingï¼ŒCIDRï¼‰å°†å­ç½‘å¯»å€æ¦‚å¿µåŒ–ä¸ºa.b.c.d/x æ„æˆIPåœ°å€çš„ç½‘ç»œéƒ¨åˆ†ï¼›ç½‘ç»œä¸­å‰©ä½™çš„32-xæ¯”ç‰¹è¢«è®¤ä¸ºæ˜¯ç”¨äºåŒºåˆ†è¯¥ç»„ç»‡å†…éƒ¨è®¾ç½®çš„ï¼Œå…¶ä¸­çš„é¢æ‰€æœ‰çš„è®¾å¤‡å…·æœ‰ç›¸åŒçš„å‰ç¼€</p><p>åœ¨CIDRè¢«é‡‡ç”¨ä¹‹å‰ï¼ŒIPåœ°å€çš„ç½‘ç»œéƒ¨åˆ†ä¸ºé€‰å€ä¸º8ã€16ã€24æ¯”ç‰¹ï¼Œç§°ä¸ºåˆ†ç±»ç¼–å€ï¼ˆclassful addressingï¼‰ï¼Œç§°ä¸ºAã€Bå’ŒCç±»ç½‘ç»œï¼Œä½†æ˜¯Cç±»ç½‘ç»œåªèƒ½ä½¿ç”¨254å°ã€Bç±»å¯ä»¥65534å¤ªå¤šäº†</p><p>ç‰¹æ®Šçš„IPåœ°å€ï¼Œ255.255.255.255ä¸ºIPå¹¿æ’­åœ°å€ï¼Œè¯¥æ•°æ®äº¤ä»˜ç»™åŒä¸€ä¸ªç½‘ç»œçš„æ‰€æœ‰ä¸»æœº</p><p>åœ¨è¯¦å­¦ä¹ IPç¼–å€ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸»æœºæˆ–è€…å­ç½‘æœ€åˆæ˜¯å¦‚ä½•å¾—åˆ°åœ°å€çš„</p><p>ç¬¬ä¸€æ­¥ï¼šè·å–åœ°å€ï¼Œå¯ä»¥ä»ISPè·å¾—ã€ISPä»å› ç‰¹ç½‘åå­—å’Œç¼–å·åˆ†é…æœºæ„ï¼ˆInternet corporation for assigned Names and Numbersï¼ŒICANNï¼‰ç®¡ç†ï¼Œå…¶è¿˜ç®¡ç†DNSæœåŠ¡å™¨</p><p>ç¬¬äºŒéƒ¨ï¼Œä¸»æœºä¸è·¯ç”±å™¨æ¥å£åˆ†é…IPåœ°å€ï¼Œç³»ç»Ÿç®¡ç†å‘˜é€šå¸¸æ‰‹å·¥é…ç½®IPåœ°å€ï¼Œä¸»æœºåœ°å€ä¹Ÿå¯ä»¥æ‰‹åŠ¨é…ç½®ä½†æ˜¯é€šå¸¸ä½¿ç”¨åŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼ˆDynamic Host configurationï¼ŒDHCPï¼‰ï¼Œå…è®¸ä¸»æœºè‡ªåŠ¨è·å–ä¸€ä¸ªIPåœ°å€ï¼Œå…è®¸ä¸»æœºæ¯æ¬¡å’Œç½‘ç»œè¿æ¥çš„æ—¶å€™éƒ½ä¼šè·å¾—ä¸€ä¸ªç›¸åŒçš„IPåœ°å€æˆ–è€…ä¸´æ—¶çš„IPåœ°å€</p><h3 id="44-åœ°å€è½¬æ¢ä¸é€šä¿¡è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#44-åœ°å€è½¬æ¢ä¸é€šä¿¡è¿‡ç¨‹"></a> 4.4 åœ°å€è½¬æ¢ä¸é€šä¿¡è¿‡ç¨‹</h3><p>å¯¹äºå®¶åº­ç½‘ç»œç­‰ä¸“ç”¨ç½‘ç»œï¼ˆprivate networkï¼‰å’Œå…·æœ‰ä¸“ç”¨åœ°å€çš„åœ°åŸŸï¼ˆrealm with private addressï¼‰ï¼Œå…¶ä¸­çš„IPåœ°å€åªæœ‰åœ¨ä¸“ç”¨ç½‘ç»œä¸­æ‰æœ‰ä½œç”¨ï¼›ä½†æ˜¯åœ¨ä¸“ç”¨ç½‘ä¸­è‡³å°‘éœ€è¦æœ‰ä¸€ä¸ªå…¬ç½‘IPåœ°å€çš„è®¾å¤‡ï¼Œæ­¤æ—¶è¿™ä¸ªè·¯ç”±å™¨æ˜¯å¦‚ä½•è·å–è‡ªå·±çš„iPåœ°å€çš„ï¼Ÿä½¿ç”¨çš„æ˜¯ISPæä¾›çš„DHCPæœåŠ¡</p><p>ä¹‹é—´é€šä¿¡çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><p>ä¸“ç”¨ç½‘10.0.01:3345æƒ³å’Œå…¬ç½‘IPçš„128.119.40.186:80è¿›è¡Œé€šä¿¡ï¼›ä¸“ç”¨ç½‘ä¸­çš„å…¬ç½‘IPè·¯ç”±å™¨ä¸º138.76.29.7ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å°†ä¸“ç”¨ç½‘å’Œå…¬ç½‘IPè·¯ç”±å™¨æ–°å¢ä¸€ä¸ªæ˜ å°„ï¼Œ10.0.0.1:3345å’Œ128.76.29.7:5001ï¼ˆ5001ä»»æ„ï¼‰ï¼Œç„¶åæ•°æ®é€šè¿‡128.76.29.7ï¼š5001å’Œ128.119.40.186ï¼š80è¿›è¡Œé€šä¿¡ï¼Œè·¯ç”±å™¨è´Ÿè´£ä¸¤è€…ä¹‹é—´çš„è½¬æ¢ï¼ŒåŒæ—¶è·¯ç”±çš„NATåè®®æ”¯æŒè¶…è¿‡60000ä¸ªå¹¶è¡Œè¿æ¥</p><p>NATåè®®çš„æ‰¹è¯„è€…æŒ‡å‡ºï¼š</p><ol><li>è·¯ç”±å™¨æˆ–è€…è®¾å¤‡æ˜¯ç”¨æ¥è¿›è¡Œè¿›ç¨‹å¯»å€ã€è€Œä¸æ˜¯ä¸»æœºå¯»å€çš„ï¼Œè¿™ç§è¿è§„ç”¨æ³•åœ¨è¿è¡Œå®¶åº­ç½‘ç»œä¸­çš„æœåŠ¡å™¨ä¼šå‡ºç°é—®é¢˜ï¼›è¿™é‡Œéœ€è¦NATç©¿è¶Šï¼ˆtraversalï¼‰æˆ–è€…é€šç”¨å³æ’å³ç”¨ï¼ˆUniversal Plug and playï¼ŒUPnPåè®®ï¼‰</li><li>è¿åäº†ä¸»æœºä¹‹é—´åº”å½“ç›´æ¥å¯¹è¯çš„åŸåˆ™</li></ol><h3 id="45-ipv6"><a class="markdownIt-Anchor" href="#45-ipv6"></a> 4.5 IPv6</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3nsrry1hnj212g0j4wfr.jpg" alt="image-20220628112904862" /></p><h2 id="0x05-æ§åˆ¶å±‚é¢"><a class="markdownIt-Anchor" href="#0x05-æ§åˆ¶å±‚é¢"></a> 0x05 æ§åˆ¶å±‚é¢</h2><p>å…¶ä¸­ç®—æ³•è¿‡äºç¡¬æ ¸ï¼Œè¿™é‡Œä¸åšä»‹ç»ï¼Œå¯ä»¥çœ‹å‡ºè½¬å‘è¡¨çš„åˆ¶ä½œåˆ†ä¸ºä¸¤ç§</p><ol><li>é¢„å…ˆç‰©ç†è®¾ç½®</li><li>ç”±SDNæ¥è½¯ä»¶æ§åˆ¶</li></ol><p>è½¯ä»¶æ§åˆ¶é¢ä¸´é›†ä¸­è¿˜æ˜¯åˆ†æ•£çš„åŒºåˆ«ã€é¢ä¸´é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ã€é¢ä¸´è´Ÿè½½æ•æ„Ÿæˆ–è¿Ÿé’çš„é—®é¢˜</p><h2 id="0x06-å®é™…åº”ç”¨å’Œæ„Ÿæ‚Ÿ"><a class="markdownIt-Anchor" href="#0x06-å®é™…åº”ç”¨å’Œæ„Ÿæ‚Ÿ"></a> 0x06 å®é™…åº”ç”¨å’Œæ„Ÿæ‚Ÿ</h2><h3 id="61-ä¸€ä¸ªå®é™…çš„ä¾‹å­"><a class="markdownIt-Anchor" href="#61-ä¸€ä¸ªå®é™…çš„ä¾‹å­"></a> 6.1 ä¸€ä¸ªå®é™…çš„ä¾‹å­</h3><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3nstwf2mrj20u011tqd3.jpg" alt="image-20220628113107112" /></p><h3 id="62-ä¸€äº›å®é™…çš„åº”ç”¨"><a class="markdownIt-Anchor" href="#62-ä¸€äº›å®é™…çš„åº”ç”¨"></a> 6.2 ä¸€äº›å®é™…çš„åº”ç”¨</h3><p>sshè¿æ¥è¿œç¨‹ä¸»æœº</p><p>æ­å»ºè‡ªå·±çš„webdaväº‘ç›˜</p><p>å¼€æ”¾è‡ªå·±çš„MCæœåŠ¡å™¨</p><p>åˆ©ç”¨è…¾è®¯äº‘æœåŠ¡å™¨å®ç°å†…ç½‘ç©¿é€</p>]]></content>
    
    
    <categories>
      
      <category>ComputerNetwork</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œ-03-Chapter03 è¿è¾“å±‚åè®®</title>
    <link href="/posts/30d17536.html"/>
    <url>/posts/30d17536.html</url>
    
    <content type="html"><![CDATA[<p>å°è¯•å°†è¯¾æœ¬ä¸­çš„çŸ¥è¯†é‡æ–°æ•´ç†æˆä¸ºè‡ªå·±çš„postï¼Œè™½ç„¶ç”¨è‡ªå·±çš„ç†è§£å»æè¿°å¯èƒ½ä¼šå¸¦æ¥é”™è¯¯ï¼Œä½†æ˜¯â€œå¤ªå¯¹çš„è¯å¹¶æ²¡æœ‰æ–°çš„ä»·å€¼â€ï¼Œæœ¬æ¬¡ä¸»è¦æè¿°ä½äºè®¡ç®—å°±ç½‘ç»œåº”ç”¨å±‚å’Œç½‘ç»œå±‚ä¹‹é—´çš„è¿è¾“å±‚çš„é€šä¿¡åè®®ï¼Œä»¥åŠå…¶åœ¨ä¼ é€’è¿‡ç¨‹ä¸­çš„ï¼šå¯é æ€§å’Œæ‹¥å¡æ§åˆ¶ä¸¤ä¸ªåŸºæœ¬é—®é¢˜ã€‚</p><span id="more"></span><h2 id="0x01-èƒŒæ™¯"><a class="markdownIt-Anchor" href="#0x01-èƒŒæ™¯"></a> 0x01 èƒŒæ™¯</h2><h3 id="11-è¿è¾“å±‚æ¦‚è¿°"><a class="markdownIt-Anchor" href="#11-è¿è¾“å±‚æ¦‚è¿°"></a> 1.1 è¿è¾“å±‚æ¦‚è¿°</h3><p>è¿è¾“å±‚ä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹ä¹‹é—´æä¾›é€»è¾‘é€šä¿¡ï¼ˆlogic communicationï¼‰ï¼Œä»åº”ç”¨ç¨‹åºçš„è§’åº¦æ¥è¯´ï¼Œè¿è¡Œä¸åŒè¿›ç¨‹çš„ä¸»æœºä¹‹é—´å¥½åƒç›´æ¥ç›¸è¿ä¸€æ ·ï¼Œè€Œä¸ç”¨è€ƒè™‘æ‰¿è½½è¿™äº›ç‰©ç†åŸºç¡€è®¾æ–½çš„ç»†èŠ‚ã€‚</p><p>è¿è¾“å±‚åè®®æ˜¯åœ¨ç«¯ç³»ç»Ÿä¸­è€Œä¸æ˜¯è·¯ç”±å™¨ä¸­å®ç°çš„ï¼š</p><p><strong>åœ¨å‘é€ç«¯ï¼Œè¿è¾“å±‚å°†ä»å‘é€åº”ç”¨ç¨‹åºè¿›ç¨‹æ¥æ”¶åˆ°æŠ¥æ–‡è½¬æ¢æˆè¿è¾“å±‚åˆ†ç»„æˆä¸ºè¿è¾“å±‚æŠ¥æ–‡æ®µï¼ˆsegmentï¼‰</strong>ï¼Œï¼ˆåç»­ç½‘ç»œå±‚å¯èƒ½ä¼šå°è£…æˆç½‘ç»œå±‚åˆ†ç»„ï¼ˆæ•°æ®æŠ¥ï¼‰å‘ç›®çš„åœ°å‘é€ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç½‘ç»œè·¯ç”±å™¨ä»…ä½œç”¨äºè¯¥æ•°æ®æŠ¥çš„ç½‘ç»œå±‚å­—æ®µï¼‰ï¼Œ<strong>åœ¨æ¥æ”¶ç«¯ç½‘ç»œå±‚ä»æ•°æ®æŠ¥ä¸­æå–å‡ºè¿è¾“å±‚å­—æ®µï¼Œå¹¶å°†æŠ¥æ–‡ä¸Šäº¤ç»™è¿è¾“å±‚</strong></p><p>ç½‘ç»œåº”ç”¨ç¨‹åºä¸­å¯ä»¥æœ‰å¤šç§è¿è¾“å±‚åè®®ï¼Œåœ¨å› ç‰¹ç½‘ä¸­åŒ…æ‹¬UDPå’ŒTCPåè®®ã€‚</p><p>ï¼Ÿè¿è¾“å±‚å’Œç½‘ç»œå±‚åŒºåˆ«ï¼Ÿ</p><p>è¿è¾“å±‚ä¸»è¦è´Ÿè´£ä¸¤ä¸ªhostä¹‹é—´ä¸åŒè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼›è€Œç½‘ç»œå±‚æä¾›hostä¹‹é—´çš„é€»è¾‘é€šä¿¡ï¼›ä»¥å¯„å¿«é€’çš„æ–¹å¼æ¥æè¿°ï¼š</p><blockquote><p>åº”ç”¨å±‚æŠ¥æ–‡æ˜¯å¿«é€’é‡Œé¢çš„ä¸œè¥¿ï¼Œè¿è¾“å±‚ä¸»è¦è´Ÿè´£æ”¶ä»¶äººçš„å…·ä½“ä¿¡æ¯ï¼Œè¿è¾“å±‚åè®®ä¸»è¦è´Ÿè´£å„åœ°åŒºæ”¶é›†å’Œåˆ†å‘å¿«é€’äººå‘˜ï¼›ç½‘ç»œå±‚ä¸»è¦è´Ÿè´£æ”¶è´§åœ°å€ï¼Œç½‘ç»œå±‚åè®®ä¸»è¦è´Ÿè´£è¿è¾“è½¦è¾†ã€æ–¹å¼çš„åˆ†é…</p></blockquote><p>è¿™ç§è§£è€¦çš„è¿‡ç¨‹å¯ä»¥ä¸ºä¸åŒè¿›ç¨‹é€šä¿¡ä¹‹é—´è§„å®šä¸åŒçš„åè®®ï¼Œè€Œä¸æ˜¯æ¯ä¸ªäººéƒ½å®‰æ’ä¸€è¾†è½¦æˆ–è€…ä¸€ç§åœ°å€ç¼–ç æ–¹å¼æ¥é€ æˆæ‚ä¹±çš„æƒ…å†µï¼›åŒæ—¶ä¸åŒçš„è¿è¾“å±‚åè®®ä¹Ÿå¯ä»¥æ­é…ä¸åŒçš„ç½‘ç»œå±‚åè®®ã€‚</p><h3 id="12-å› ç‰¹ç½‘è¿è¾“å±‚æ¦‚è¿°"><a class="markdownIt-Anchor" href="#12-å› ç‰¹ç½‘è¿è¾“å±‚æ¦‚è¿°"></a> 1.2 å› ç‰¹ç½‘è¿è¾“å±‚æ¦‚è¿°</h3><p>UDPï¼šç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œè¿™ä¸ªè¿›ç¨‹æä¾›ä¸€ç§ä¸å¯é ã€æ— è¿æ¥çš„æœåŠ¡</p><p>TCPï¼šä¼ è¾“æ§åˆ¶åè®®ï¼Œæä¾›å¯é çš„ã€é¢å‘è¿æ¥çš„æœåŠ¡</p><p>ç»“åˆIPå±‚ç†è§£å¯èƒ½ä¼šæ›´å¥½ï¼Œè¿™é‡Œéœ€è¦äº†è§£çš„æ˜¯ï¼šå› ç‰¹ç½‘ç½‘ç»œåè®®çš„ä¸ºIPåè®®ï¼ˆç½‘é™…åè®®ï¼‰ï¼Œæä¾›ä¸»æœºä¸ä¸»æœºä¹‹é—´çš„é€»è¾‘é€šä¿¡ï¼ŒæœåŠ¡æ¨¡å‹æ˜¯å°½åŠ›è€Œä¸ºè§’åº¦ï¼Œå¹¶ä¸ä½œä»»ä½•ç¡®ä¿ï¼Œä¹Ÿå°±æ˜¯ç§°ä¸ºä¸å¯é æœåŠ¡ï¼Œåœ¨è¿™ä¸€ç« æˆ‘ä»¬éœ€è¦çŸ¥é“çš„æ˜¯æ¯ä¸€å°ä¸»æœºéƒ½æœ‰ä¸€ä¸ªIPåœ°å€</p><p>UDPå’ŒTCPçš„åŸºæœ¬è´£ä»»æ˜¯å°†ä¸¤ä¸ªç«¯ç³»ç»Ÿä¹‹é—´çš„IPäº¤ä»˜æœåŠ¡æ‹“å±•åˆ°ç«¯ç³»ç»Ÿä¸Šä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„äº¤ä»˜æœåŠ¡ï¼Œè¿™ä¸ªç§°ä¸ºå¤šè·¯å¤ç”¨ï¼ˆtransport- layer multiplexingï¼‰å’Œå¤šè·¯åˆ†è§£ï¼ˆdemultiplexingï¼‰ã€‚é™¤æ­¤ä¹‹å¤–TCPè¿˜ä¼šæä¾›å¯é æ•°æ®ä¼ è¾“ï¼ˆreliable data transferï¼‰å’Œæ‹¥å¡æ§åˆ¶ï¼ˆcongestion controlï¼‰</p><blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼šå½“ä½ ååœ¨è®¡ç®—æœºä¸‹è½½webé¡µé¢ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦è¿è¡Œä¸€ä¸ªFTPä¼šè¯å’Œä¸¤ä¸ªTelnetä¼šè¯ï¼Œè¿™æ ·4ä¸ªç½‘ç»œåº”ç”¨è¿›ç¨‹åœ¨è¿è¡Œï¼Œåœ¨è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å°†ä¸»æœºæ¥å—åˆ°çš„ä¿¡æ¯åˆ†é…ç»™è¿™4ä¸ªè¿›ç¨‹ä¸­çš„ä¸€ä¸ªï¼Œè¿™å°±æ˜¯è¿è¾“å±‚è´Ÿè´£äº‹æƒ…ã€‚åº”ç”¨å±‚é‡Œé¢æ˜¯é€šè¿‡å¥—æ¥å­—ï¼ˆsocketï¼‰å°†æ•°æ®ä»åº”ç”¨å±‚ä¼ å‘è¿è¾“å±‚å’Œå‘è¿è¾“å±‚è¿›ç¨‹ä¼ é€’æ•°æ®çš„é—¨æˆ·ï¼Œå› æ­¤åœ¨ä»»ä½•ä¸€ä¸ªæ—¶åˆ»ä¸»æœºä¸Šå­˜åœ¨å¤šä¸ªå¥—æ¥å­—ï¼Œå¥—æ¥å­—å…·æœ‰å”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚</p></blockquote><p>ï¼Ÿé‚£ä¹ˆä¸»æœºå¦‚ä½•å°†ä¸€ä¸ªåˆ°è¾¾çš„è¿è¾“å±‚æŠ¥æ–‡å®šå‘åˆ°é€‚å½“çš„å¥—æ¥å­—ï¼Ÿ</p><p>è¿™ä¸ªå°±éœ€è¦æˆ‘ä»¬åœ¨è¿è¾“å±‚æŠ¥æ–‡æ®µä¸­å®šä¹‰ä¸€äº›å­—æ®µï¼Œåœ¨æ¥æ”¶ç«¯è¿è¾“å±‚æ¥è§£æè¿™äº›å­—æ®µæ¥å°†æŠ¥æ–‡å®šå‘åˆ°å¥—æ¥å­—ï¼Œè¿™ä¸ªå°±æ˜¯å¤šè·¯åˆ†è§£ï¼ˆdemultiplexingï¼‰çš„è¿‡ç¨‹ï¼›åœ¨æºä¸»æœºä¸Šå°†æŠ¥æ–‡æ®µä¼ é€’åˆ°è¿è¾“å±‚è¿™ä¸ªå·¥ä½œç§°ä¸ºå¤šè·¯å¤ç”¨ï¼ˆmultiplexingï¼‰ï¼›ä½†æ˜¯å½“ç„¶TCPç›¸æ¯”è¾ƒUDPçš„è§£æè¿‡ç¨‹ä¼šæ›´åŠ å¤æ‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3j553zhshj20yu0iqjt6.jpg" alt="image-20220624104913355" /></p><h3 id="13-è§„èŒƒè¯­è¨€"><a class="markdownIt-Anchor" href="#13-è§„èŒƒè¯­è¨€"></a> 1.3 è§„èŒƒè¯­è¨€</h3><p>æŠ¥æ–‡æ®µï¼ˆsegmentï¼‰ï¼šç»è¿‡ç½‘ç»œå±‚åˆ°è¾¾è¿è¾“å±‚åç”Ÿæˆçš„åˆ†ç»„æŠ¥æ–‡</p><p>æ•°æ®æŠ¥ï¼ˆdatagramï¼‰ï¼šè¿è¾“å±‚çš„æŠ¥æ–‡åˆ°è¾¾ç½‘ç»œå±‚ç”Ÿæˆçš„åˆ†ç»„æŠ¥æ–‡</p><p>socketï¼šåº”ç”¨å±‚è¿›ç¨‹å’Œè¿è¾“å±‚ä¹‹é—´æ•°æ®é€šä¿¡çš„æ–¹å¼ï¼ŒåŒä¸€ä¸ªhostå­˜åœ¨å¤šä¸ªå¥—æ¥å­—ï¼Œæ¯ä¸ªå¥—æ¥å­—å…·æœ‰å”¯ä¸€æ ‡è¯†ç¬¦</p><p>å¤šè·¯å¤ç”¨ï¼šå¤šä¸ªæ•°æ®ä¼ è¾“åˆ°è¿è¾“å±‚</p><p>å¤šè·¯åˆ†è§£ï¼šæ”¶åˆ°ä¸‹å±‚æ•°æ®è½¬ç§»åˆ°ä¸Šå±‚å¤šä¸ªè¿›ç¨‹</p><h2 id="0x02-åŸºæœ¬åŸç†"><a class="markdownIt-Anchor" href="#0x02-åŸºæœ¬åŸç†"></a> 0x02 åŸºæœ¬åŸç†</h2><h3 id="21-å¯é æ•°æ®ä¼ è¾“åŸç†reliable-data-transfer-protocol"><a class="markdownIt-Anchor" href="#21-å¯é æ•°æ®ä¼ è¾“åŸç†reliable-data-transfer-protocol"></a> 2.1 å¯é æ•°æ®ä¼ è¾“åŸç†ï¼ˆReliable Data Transfer Protocolï¼‰</h3><p>åœ¨æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°å·®é”™ã€æŸåå’Œä¸¢å¤±çš„ç°è±¡ï¼Œæƒ³è¦æŒ‰ç…§åŸæ¥æ•°æ®å¤åŸå°±æ˜¯å¯é æ•°æ®ä¼ è¾“åè®®éœ€è¦è§„èŒƒçš„äº‹æƒ…ï¼Œè¿™ç§åè®®å¯ä»¥çœ‹ä½œæ˜¯ç­–ç•¥æ–¹é¢çš„methodï¼Œå› ä¸ºå®ƒä¸ä»…å¯ä»¥é€‚ç”¨äºè¿è¾“å±‚ã€ä¹Ÿå¯ä»¥ç½‘ç»œå±‚æˆ–è€…åº”ç”¨å±‚ï¼Œæ›´é‡è¦çš„æ˜¯å†…åœ¨æ€æƒ³ï¼Œè€ŒTCPç›¸æ¯”è¾ƒUDPçš„ä¸€æ–¹é¢å°±æ˜¯ä½¿ç”¨äº†å¯é æ•°æ®ä¼ è¾“çš„ä¸œè¥¿</p><p>å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/qq_40177015/article/details/112836182">https://blog.csdn.net/qq_40177015/article/details/112836182</a></p><p>æœ€åŸºæœ¬çš„æ¨¡å‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåé¢æˆ‘ä»¬å¯ä»¥å±‚å±‚é€’è¿›æ¥çœ‹è¿™ä¸ªæ˜¯å¦‚ä½•å®ç°çš„ï¼š</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3j5baidh9j20go0fkzku.jpg" alt="image-20220624105512085" /></p><h4 id="211-rdt10-åº•å±‚ä¿¡é“å¯é çš„æƒ…å†µ"><a class="markdownIt-Anchor" href="#211-rdt10-åº•å±‚ä¿¡é“å¯é çš„æƒ…å†µ"></a> 2.1.1 RDT1.0 â€“ åº•å±‚ä¿¡é“å¯é çš„æƒ…å†µ</h4><p>é‚£å°±åªéœ€è¦</p><p>å‘é€ç«¯ï¼šæ¥å—ä¸Šå±‚çš„dataã€è½¬æ¢ï¼ˆmake-pktï¼‰æˆæ•°æ®æ®µpacketã€ç„¶åå‘é€ï¼ˆsendï¼‰</p><p>æ¥æ”¶ç«¯ï¼šæ¥å—ä¸‹å±‚çš„packetã€æå–extractå‡ºæ•°æ®dataã€ç„¶åç§»äº¤deliverç»™ä¸Šå±‚</p><h4 id="212-rdt20-åº•å±‚å·®é”™çš„æƒ…å†µä½†ä¸ä¼šä¸¢å¤±"><a class="markdownIt-Anchor" href="#212-rdt20-åº•å±‚å·®é”™çš„æƒ…å†µä½†ä¸ä¼šä¸¢å¤±"></a> 2.1.2 RDT2.0 â€“ åº•å±‚å·®é”™çš„æƒ…å†µï¼ˆä½†ä¸ä¼šä¸¢å¤±ï¼‰</h4><p>å‡ºç°å·®é”™æˆ‘ä»¬çš„ç¬¬ä¸€ååº”æ˜¯éœ€è¦ï¼šå¦‚ä½•æ£€æŸ¥å‡ºå·®é”™ã€ä»¥åŠå¦‚æœå‘Šè¯‰å‘é€æ–¹é”™äº†ã€ä»¥åŠé‡æ–°å‘é€ï¼Œè¿™ç§ç§°ä¸ºåŸºäºè‡ªåŠ¨é‡ä¼ è¯·æ±‚ï¼ˆARQã€automatic repeat requestï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3j5ica43wj20vu0u0wgh.jpg" alt="image-20220624110157727" /></p><h4 id="213-rdt2122"><a class="markdownIt-Anchor" href="#213-rdt2122"></a> 2.1.3 RDT2.1&amp;2.2</h4><p>ä½†æ˜¯RDT2.0å¹¶æ²¡æœ‰è€ƒè™‘ACKå’ŒNAKé”™è¯¯çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™å‘ç”Ÿå‘é€ç«¯å¿˜è®°é‡ä¼ æˆ–è€…è¿‡åº¦é‡ä¼ ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æŠ¥æ–‡è¿›è¡Œæ ‡è®°ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å¢åŠ æ•°æ®åˆ†ç»„ç¼–å·ï¼ˆsequence numberï¼‰æ¥å¸®åŠ©åŒºåˆ†ï¼Œè¿™ä¹Ÿå°±æ˜¯RDT2.1çš„å·¥ä½œ</p><p>ç”±äºåŒæ—¶æ£€éªŒACKå’ŒNAKå¾ˆéº»çƒ¦ï¼Œå› æ­¤å¯ä»¥è®¾è®¡å•çº¯åªç”¨ACKçš„ç¡®è®¤å’Œå¦å®šå°±å¯ã€‚</p><h4 id="214-rdt30-ç»è¿‡æ¯”ç‰¹å·®é”™å’Œä¸¢åŒ…ä¿¡é“çš„å¯é ä¿¡æ¯ä¼ è¾“"><a class="markdownIt-Anchor" href="#214-rdt30-ç»è¿‡æ¯”ç‰¹å·®é”™å’Œä¸¢åŒ…ä¿¡é“çš„å¯é ä¿¡æ¯ä¼ è¾“"></a> 2.1.4 RDT3.0 â€“ ç»è¿‡æ¯”ç‰¹å·®é”™å’Œä¸¢åŒ…ä¿¡é“çš„å¯é ä¿¡æ¯ä¼ è¾“</h4><p>é’ˆå¯¹ä¸¢åŒ…ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®å®šæ—¶å™¨ï¼ˆï¼Ÿå¦‚ä½•é’ˆå¯¹æ¯ä¸ªæŠ¥æ–‡è®¾ç½®ï¼‰ï¼Œåœ¨ä¸€å®šçš„æ—¶é—´é—´éš”ï¼ˆï¼Ÿåé¢ä»‹ç»è¿™ä¹ˆç¡®å®šï¼‰ä¸‹ï¼Œæ²¡æœ‰æ”¶åˆ°ACKå°±é‡æ–°å‘é€</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3j5qmjcrbj20u0118adu.jpg" alt="image-20220624110956831" /></p><h4 id="214-æš‚åœæ€è€ƒrdt"><a class="markdownIt-Anchor" href="#214-æš‚åœæ€è€ƒrdt"></a> 2.1.4 æš‚åœæ€è€ƒRDT</h4><p>RDTæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå…¨æ­£ç¡®çš„åè®®ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€ä¸ªåœç­‰åè®®ï¼Œåœ¨äºæˆ‘æ¯ä¸ªåˆ†ç»„æŠ¥æ–‡éœ€è¦ç­‰åˆ°ä¸Šä¸€ä¸ªACKåˆ°æ¥çš„æ—¶å€™å†é‡æ–°å‘é€ï¼Œä¿¡é“ä¸­åªæœ‰ä¸€ä¸ªæŠ¥æ–‡å¿…ç„¶æ˜¯æµªè´¹çš„</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥é‡‡ç”¨æµæ°´çº¿çš„æ–¹å¼ï¼Œä¸åœçš„å‘é€æŠ¥æ–‡ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™åˆä¼šé¢ä¸´æ–°çš„é—®é¢˜</p><h4 id="215-æµæ°´çº¿-é€€å›næ­¥gbn"><a class="markdownIt-Anchor" href="#215-æµæ°´çº¿-é€€å›næ­¥gbn"></a> 2.1.5 æµæ°´çº¿-é€€å›Næ­¥ï¼ˆGBNï¼‰</h4><p>ç”±äºæµæ°´çº¿å…è®¸å‘é€å‘è¿ç»­å‘é€å¤šä¸ªåˆ†ç»„è€Œä¸éœ€è¦ç­‰å¾…ç¡®è®¤ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‡ºç°æŸä¸ªæ•°æ®åˆ†ç»„å·®é”™æˆ–è€…ä¸¢å¤±çš„æƒ…å†µå°±éå¸¸éº»çƒ¦ï¼ŒGBNè®¾ç½®æ˜¯é”™è¯¯å°±é€€å›Næ­¥é‡æ–°å‘é€ï¼Œè¿™æ ·çš„ç¼ºç‚¹æ˜¯é€šä¿¡ç³»ç»Ÿå¯èƒ½ä¼šè¢«è®¸è®¸å¤šå¤šçš„æ— ç”¨æŠ¥æ–‡å……æ–¥</p><h4 id="216-æµæ°´çº¿-é€‰æ‹©é‡ä¼ sr"><a class="markdownIt-Anchor" href="#216-æµæ°´çº¿-é€‰æ‹©é‡ä¼ sr"></a> 2.1.6 æµæ°´çº¿-é€‰æ‹©é‡ä¼ ï¼ˆSRï¼‰</h4><p>ä¸ºäº†è§£å†³GBNçš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨é€‰æ‹©é‡ä¼ çš„åè®®ï¼Œå¯¹äºé”™è¯¯ä¹‹åçš„åºåˆ—å·æ¥æ”¶ç«¯ä¿å­˜</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3j5vh6fz9j20u00ufwhd.jpg" alt="image-20220624111436365" /></p><h4 id="217-æ€»ç»“"><a class="markdownIt-Anchor" href="#217-æ€»ç»“"></a> 2.1.7 æ€»ç»“</h4><p>åœ¨ç»è¿‡ä¸Šè¿°å¯é æ•°æ®ä¼ è¾“æœºåˆ¶çš„æè¿°ä¹‹åï¼Œå­˜åœ¨ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼š</p><ul><li>å·®é”™æ£€éªŒï¼ˆchecksumï¼‰</li><li>å®šæ—¶å™¨ï¼ˆtimerï¼‰</li><li>åºå·ï¼ˆsequence numberï¼‰</li><li>ç¡®è®¤ï¼ˆacknowledgementï¼‰</li><li>å¦å®šç¡®è®¤ï¼ˆNAKï¼‰</li><li>çª—å£ã€æµæ°´çº¿ï¼ˆwindowsã€pipelineï¼‰</li></ul><h3 id="22-æ‹¥å¡æ§åˆ¶åŸç†"><a class="markdownIt-Anchor" href="#22-æ‹¥å¡æ§åˆ¶åŸç†"></a> 2.2 æ‹¥å¡æ§åˆ¶åŸç†</h3><p><a href="https://zhuanlan.zhihu.com/p/37379780">https://zhuanlan.zhihu.com/p/37379780</a></p><h4 id="221-ä»€ä¹ˆæ˜¯æ‹¥å¡"><a class="markdownIt-Anchor" href="#221-ä»€ä¹ˆæ˜¯æ‹¥å¡"></a> 2.2.1 ä»€ä¹ˆæ˜¯æ‹¥å¡</h4><p>ä½œç”¨äºç½‘ç»œçš„ï¼Œé¿å…è¿‡å¤šçš„æ— æ•ˆé‡ä¼ æ•°æ®å……æ–¥åœ¨ä¼ è¾“ç½‘ç»œä¸­</p><p>ç¬¬ä¸€ç§æƒ…å†µï¼šä¸¤å°æœºå™¨ä¹‹é—´+æ— é™ç¼“å­˜çš„è·¯ç”±å™¨</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3j62wp107j20ww0g8aau.jpg" alt="image-20220624112144178" /></p><p>ç¬¬äºŒç§æƒ…å†µï¼šä¸¤å°æœºå™¨ä¹‹é—´+æœ‰é™ç¼“å­˜çš„è·¯ç”±å™¨</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3j635ogl7j212o0e6q3y.jpg" alt="image-20220624112159474" /></p><p>ç¬¬ä¸‰ç§æƒ…å†µï¼šå¤šå°æœºå™¨ä¹‹é—´+æœ‰é™ç¼“å­˜çš„è·¯ç”±å™¨</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3j63h1aosj20j60hyt9b.jpg" alt="image-20220624112217633" /></p><h4 id="222-æ‹¥å¡æ§åˆ¶æ–¹æ³•"><a class="markdownIt-Anchor" href="#222-æ‹¥å¡æ§åˆ¶æ–¹æ³•"></a> 2.2.2 æ‹¥å¡æ§åˆ¶æ–¹æ³•</h4><p>ç¬¬ä¸€ç§æ–¹æ³•ï¼šç«¯åˆ°ç«¯çš„æ‹¥å¡æ§åˆ¶ï¼Œæ¯”å¦‚æ ¹æ®æŠ¥æ–‡ä¸¢åŒ…æƒ…å†µæ¥è§‚å¯Ÿç½‘ç»œæ‹¥å¡çŠ¶æ€ï¼Œè¿›è€Œç¼©å°è‡ªå·±çš„çª—å£ï¼ˆTCPé‡‡ç”¨çš„ï¼‰</p><p>ç¬¬äºŒç§æ–¹æ³•ï¼šç½‘ç»œè¾…åŠ©æ‹¥å¡æ§åˆ¶ï¼Œç½‘ç»œä¸­è·¯ç”±å™¨ç­‰ä¼ è¾“ç»™ç«¯è®¾å¤‡ï¼Œé«˜é€Ÿæ‹¥å µæƒ…å†µ</p><h2 id="0x03-udptcp"><a class="markdownIt-Anchor" href="#0x03-udptcp"></a> 0x03 UDP/TCP</h2><h3 id="31-udpä¼ è¾“åè®®"><a class="markdownIt-Anchor" href="#31-udpä¼ è¾“åè®®"></a> 3.1 UDPä¼ è¾“åè®®</h3><h4 id="311-udpæŠ¥æ–‡"><a class="markdownIt-Anchor" href="#311-udpæŠ¥æ–‡"></a> 3.1.1 UDPæŠ¥æ–‡</h4><p><img src="https://cdn.fasionchan.com/p/39b4247a4dea3d460832c67f8791ca06d1b72753.png" alt="img" /></p><p>æºç«¯å£ï¼šå‘é€æ–¹çš„è¿›ç¨‹å¯¹åº”çš„socketçš„ç«¯å£</p><p>ç›®çš„ç«¯å£ï¼šæ¥æ”¶æ–¹çš„è¿›ç¨‹å¯¹åº”çš„socketç«¯å£</p><p>æŠ¥æ–‡é•¿åº¦ï¼šç”¨æ¥æ£€æŸ¥æŠ¥æ–‡æ˜¯å¦ä¼šå‡ºé”™</p><p>æ£€éªŒå’Œï¼šæœ€åŸºæœ¬çš„å·®é”™çš„checksumæ£€éªŒ</p><h4 id="312-udpå¥—æ¥å­—ç¼–ç¨‹"><a class="markdownIt-Anchor" href="#312-udpå¥—æ¥å­—ç¼–ç¨‹"></a> 3.1.2 UDPå¥—æ¥å­—ç¼–ç¨‹</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs stata">UDPClient.py<br><br>from socket import *<br>serverName=&#x27;hostname;<br>serverPort=12000<br><br><span class="hljs-comment">// å¸¸è§å®¢æˆ·ç«¯çš„å¥—æ¥å­—</span><br>clientSocket=socket(AF_INETï¼ŒSOCK_DGRAM)<br><span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨ä½¿ç”¨äº†ipv4ï¼›ç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨è¯¥å¥—æ¥å­—æ˜¯SOCKâ€”â€”DGRAMç±»å‹çš„</span><br>message=raw_input(&#x27;<span class="hljs-keyword">Input</span> your message:&#x27;)<br><br><span class="hljs-comment">//æœ‰äº†ä¿¡æ¯å’Œå‘é€ç«¯socket</span><br>clientSocket.sendto(message.<span class="hljs-keyword">encode</span>(),(serverName,serverPort))<br><br><span class="hljs-comment">//ä¹‹åç­‰å¾…æœåŠ¡å™¨çš„æ•°æ®</span><br>modifiedMessage,serverAddreess =clientSocket.recvfrom(2048)<br><span class="hljs-comment">// 2048ä»£è¡¨åˆ†ç»„ä¿¡æ¯åˆ°è¾¾è¯¥å®¢æˆ·ç«¯å¥—æ¥å­—ï¼Œè¯¥åˆ†ç»„çš„æ•°æ®çš„æ”¾åˆ°å˜é‡modified messageä¸­</span><br><span class="hljs-comment">// æºåœ°å€æ”¾ç½®åˆ°å˜é‡server Addressï¼Œå–ç¼“å­˜é•¿åº¦2048ä½œä¸ºè¾“å…¥</span><br><span class="hljs-keyword">print</span>(modifiedMessage.<span class="hljs-keyword">decode</span>())<br>clientSocket.<span class="hljs-keyword">close</span>()<br></code></pre></td></tr></table></figure><h3 id="32-tcpä¼ è¾“åè®®"><a class="markdownIt-Anchor" href="#32-tcpä¼ è¾“åè®®"></a> 3.2 TCPä¼ è¾“åè®®</h3><h4 id="321-tcpæŠ¥æ–‡"><a class="markdownIt-Anchor" href="#321-tcpæŠ¥æ–‡"></a> 3.2.1 TCPæŠ¥æ–‡</h4><ul><li>é¦–éƒ¨åŒ…æ‹¬16æ¯”ç‰¹æºç«¯å£å·å’Œ16æ¯”ç‰¹ç›®çš„ç«¯å£å·ï¼Œè¢«ç”¨äºå¤šè·¯å¤ç”¨/åˆ†è§£æ¥è‡ªæˆ–è€…é€åˆ°ä¸Šå±‚åº”ç”¨çš„æ•°æ®</li><li>32æ¯”ç‰¹çš„åºå·å­—æ®µï¼ˆsequence number fieldï¼‰å’Œ32æ¯”ç‰¹çš„ç¡®è®¤å·å­—æ®µï¼ˆacknowledgment number fieldï¼‰ç”¨äºå®ç°å¯é æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œéšæœºçš„åˆå§‹åºåˆ—å·è¿˜æ˜¯å¾ˆæœ‰æ„æ€çš„ï¼›è®¨è®ºè§å</li><li>4æ¯”ç‰¹çš„é¦–éƒ¨å­—æ®µé•¿åº¦ï¼ˆheader length fieldï¼‰ï¼ŒæŒ‡ç¤ºä»¥32æ¯”ç‰¹çš„å­—ä¸ºå•ä½çš„TCPé¦–éƒ¨é•¿åº¦ï¼Œç”±äºTCPé€‰é¡¹å­—æ®µçš„åŸå› ï¼ŒTCPé¦–éƒ¨çš„é•¿åº¦æ˜¯å¯å˜çš„ï¼Œä¸€èˆ¬ä¸ºç©ºåˆ™è¯´æ˜å…¸å‹é•¿åº¦ä¸º20å­—èŠ‚</li><li>8æ¯”ç‰¹çš„æ ‡å¿—å­—æ®µï¼ˆflag fieldï¼‰<ul><li>ACKï¼ŒæŒ‡ç¤ºç¡®è®¤å­—æ®µçš„å€¼æ˜¯æœ‰æ•ˆçš„</li><li>RSTã€SYNã€FINï¼Œç”¨äºè¿æ¥å’Œæ‹†é™¤</li><li>CWRã€ECEï¼Œæ‹¥å¡é€šçŸ¥é‡Œé¢ä½¿ç”¨</li><li>PSHï¼Œæœ‰å€¼æ—¶ï¼Œåº”å½“æŒ‡ç¤ºæ¥æ”¶æ–¹ç«‹å³å°†æ•°æ®äº¤ç»™ä¸Šå±‚</li><li>URGï¼ŒæŒ‡ç¤ºæŠ¥æ–‡æ®µä¸­å­˜åœ¨çš„è¢«å‘é€ç«¯çš„ä¸Šå±‚è®¾ç½®ä¸ºç´§æ€¥çš„æ•°æ®ï¼Œæœ€åä¸€ä¸ªå­—èŠ‚æœ‰ç´§æ€¥æ•°æ®æŒ‡é’ˆå­—æ®µç»™å‡º</li></ul></li><li>16æ¯”ç‰¹çš„æ¥å—çª—å£ï¼ˆreceive windows fieldï¼‰ï¼Œç”¨äºæµé‡æ§åˆ¶ï¼Œç”¨äºæŒ‡ç¤ºæ¥æ”¶æ–¹æ„¿æ„æ¥å—çš„å­—èŠ‚æ•°é‡</li><li>æ ¡éªŒå’Œå­—æ®µï¼ˆchecksum fieldï¼‰</li><li>16æ¯”ç‰¹çš„ç´§æ€¥æ•°æ®æŒ‡é’ˆï¼ˆurgent data pointer fieldï¼‰</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3ja78n9qbj20wg0pognp.jpg" alt="image-20220624134417983" /></p><h4 id="322-tcpæ•´ä¸ªè¿‡ç¨‹"><a class="markdownIt-Anchor" href="#322-tcpæ•´ä¸ªè¿‡ç¨‹"></a> 3.2.2 TCPæ•´ä¸ªè¿‡ç¨‹</h4><p>TCPè¿æ¥æ˜¯åœ¨å¤æ‚çš„ç‰©ç†ç½‘ç»œä¸­å»ºç«‹ä¸¤å°ä¸»æœºï¼ˆhostï¼‰ä¹‹é—´çš„ç‚¹å¯¹ç‚¹ï¼ˆpoint to pointï¼‰ä¹‹é—´çš„è¿æ¥ï¼›ä¸¤å°ä¸»æœºä¹‹é—´è¿æ¥çš„ç®€çº¦è¿‡ç¨‹æ˜¯é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ï¼ˆthree-way handshakeï¼‰è¿›è¡Œçš„ï¼š</p><p>å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªç‰¹æ®Šçš„TCPæŠ¥æ–‡æ®µï¼ŒæœåŠ¡å™¨ä½¿ç”¨å¦ä¸€ä¸ªç‰¹æ®Šçš„TCPæŠ¥æ–‡æ®µæ¥å“åº”ï¼Œä¹‹åå®¢æˆ·ç«¯åˆ©ç”¨ç¬¬ä¸‰ä¸ªç‰¹æ®ŠæŠ¥æ–‡æ®µä½œä¸ºå“åº”ï¼Œç¬¬ä¸‰ä¸ªå¯ä»¥åŒ…å«æœ‰æ•ˆè´Ÿè·ï¼ˆä¹Ÿå°±æ˜¯åº”ç”¨å±‚æ•°æ®ï¼‰ï¼Œæ•´ä¸ªè¿‡ç¨‹ç§°ä¸ºä¸‰æ¬¡æ¡æ‰‹ï¼›ä¹‹ååŒ…æ‹¬å››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ï¼›è¯¦ç»†å¦‚ä¸‹ï¼š</p><ul><li>ç¬¬ä¸€æ­¥ï¼Œclienté¦–å…ˆå‘æœåŠ¡å™¨TCPå‘é€ä¸€ä¸ªç‰¹æ®Šçš„TCPæŠ¥æ–‡æ®µï¼ŒSYNæŠ¥æ–‡æ®µè®¾è®¡ä¸º1ï¼ŒåŒæ—¶clientéšæœºé€‰æ‹©ä¸€ä¸ªåˆå§‹åºå·ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªIPæ•°æ®æŠ¥å‘é€ç»™server</li><li>ç¬¬äºŒæ­¥ï¼Œè¿™ä¸ªç‰¹æ®Šçš„TCPæŠ¥æ–‡æ®µåˆ°è¾¾serveråï¼Œè¯¥TCPè¿æ¥åˆ†é…ç¼“å­˜å’Œå˜é‡ï¼Œå¹¶å‘clientå‘é€å…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µï¼Œè¿™ä¸ªå…è®¸çš„æŠ¥æ–‡æ®µåŒ…æ‹¬ä¸‰ä¸ªé‡è¦çš„ä¿¡æ¯ï¼šSYNæ¯”ç‰¹ä¸º1ã€ç¡®è®¤å·è®¾ç½®client-isn+1ã€è®¾ç½®æœåŠ¡å™¨çš„server-isnå­—æ®µï¼Œè¿™ä¸ªè¢«ç§°ä¸ºSYNACK segment</li><li>clientåœ¨å—åˆ°å›å¤ä¹‹åï¼Œä¸ºè¯¥è¿æ¥åˆ†é…ç¼“å­˜å’Œå˜é‡ï¼Œclientå‘serverå‘é€å¦å¤–ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œå¯¹äºæœåŠ¡å™¨çš„å…è®¸è¿æ¥çš„æŠ¥æ–‡æ®µè¿›è¡Œç¡®è®¤ï¼Œserver-isn+1è®¾ç½®åˆ°TCPæŠ¥æ–‡æ®µé¦–éƒ¨ç¡®è®¤å­—èŠ‚ï¼Œè¿™é‡Œå¯ä»¥æŠ¥æ–‡æ®µä¸­æºå¸¦æ•°æ®</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3jaa8apaqj20yf0u0die.jpg" alt="image-20220624134710294" /></p><p>æ‹†é™¤ï¼š</p><p>é€šè¿‡FINå­—æ®µæ¥è®¾ç½®å…³é—­æŠ¥æ–‡æ®µï¼Œclientå‘é€åŒ…å«FINæŠ¥æ–‡ï¼Œserverå‘é€ACKï¼›ä¹‹åserverå‘é€FINï¼Œclientå›å¤ACKï¼Œå¦‚æœæ²¡æœ‰å…³é—­è®¾ç½®è¶…æ—¶é‡ä¼ æœºåˆ¶</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3jaaw97tbj20x30u040a.jpg" alt="image-20220624134748694" /></p><p>ä¹‹ååº”ç”¨å±‚é€šè¿‡å¥—æ¥å­—ï¼ˆsocketï¼‰æ¥ä¼ é€’æ•°æ®æµï¼Œè¿™äº›æ•°æ®è¢«å¼•å¯¼åˆ°è¿æ¥åˆ°å‘é€ç¼“å­˜ï¼ˆsend bufferï¼‰ä¸­ï¼Œä¹‹åTCPä¼šæ—¶ä¸æ—¶åœ°ä»å‘é€ç¼“å­˜ä¸­å–å‡ºæ¥ä¸€å—æ•°æ®ï¼Œå¹¶å°†æ•°æ®ä¼ é€’åˆ°ç½‘ç»œå±‚ï¼Œè¿™é‡Œå–å‡ºå¤šå°‘æ•°æ®å—é™äºæœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼ˆmaximum segment sizeï¼ŒMSSï¼‰ï¼Œè¿™ä¸ªé€šè¿‡ç”±æœ€åˆç¡®å®šçš„æœ€å¤§é“¾è·¯å±‚å¸§é•¿åº¦ï¼ˆMTUï¼‰ç¡®å®š</p><h4 id="323-tcpçš„å¯é æ•°æ®ä¼ è¾“"><a class="markdownIt-Anchor" href="#323-tcpçš„å¯é æ•°æ®ä¼ è¾“"></a> 3.2.3 TCPçš„å¯é æ•°æ®ä¼ è¾“</h4><p>å®šæ—¶å™¨çš„é‡è¦è®¾è®¡æ˜¯éœ€è¦äº†è§£å¤šé•¿æ—¶é—´æ‰æ˜¯è¶…æ—¶ï¼Ÿå› æ­¤éœ€è¦å¯¹ä¸¤ä¸ªhostä¹‹é—´çš„ä¼ é€æ—¶é—´è¿›è¡Œç¡®è®¤ï¼Œè¿™ä¸ªéœ€è¦è€ƒè™‘çš„è¿™ä¸ªè¶…æ—¶æ—¶é—´é—´éš”é‡ä¼ çš„è®¾ç½®ï¼Œå®ƒå¿…é¡»è¦å¤§äºè¯¥é“¾æ¥çš„å¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰ï¼Œä»¥åŠæ˜¯å¦éœ€è¦ä¸ºæ‰€æœ‰æœªç¡®è®¤çš„æŠ¥æ–‡æ®µå„è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨</p><p>TCPè¿æ¥ä¸ºæ¯ä¸€ä¸ªæ—¶é—´æ®µåšå‡ºä¸€æ¬¡SampleRTTï¼Œç»“åˆå†å²ä¼°è®¡çš„Estimate RTTæ¥åšç§»åŠ¨å¹³å‡ï¼ˆEWMAï¼Œexponential weighed moving averageï¼‰ï¼›åŒæ—¶å®šä¹‰åå·®DevRTT</p><p>EstimateRTT=0.875EstimateRTT+0.125SampleRTT</p><p>DevRTT=0.75DevRTT+0.25ï¼ˆSampleRTT- EstimateRTTï¼‰</p><p>è®¾ç½®æ—¶é—´é—´éš”ä¸º</p><p>Timeout Interval=EstimateRTT+4DevRTT</p><p>åœ¨å¯é æ€§ä¼ è¾“ç« èŠ‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹äºä¸¢åŒ…æœ€é‡è¦çš„æ˜¯å®šæ—¶å™¨çš„è®¾ç½®ã€å¯¹äºå‘é€æ–¹æœ€é‡è¦çš„æ˜¯å®šä¹‰å¦‚ä½•é‡ä¼ æ•°æ®ï¼Œå› æ­¤åœ¨TCPä¸­é‡‡ç”¨çš„æ–¹æ³•å¦‚å›¾ï¼šä¹Ÿå°±æ˜¯é‡‡ç”¨ä¸€ä¸ªå®šæ—¶å™¨çš„è¶…æ—¶é‡ä¼ æœºåˆ¶ã€‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3jadgm29gj20xf0u00uz.jpg" alt="image-20220624135014852" /></p><ol><li>è¶…æ—¶é—´éš”åŠ å€<ol><li>å®šæ—¶å™¨æ—¶é™è¿‡æœŸä¹‹åè¶…æ—¶é—´é—´éš”çš„é•¿åº¦ï¼Œåœ¨è¿™ç§ä¿®æ”¹ä¸­ï¼Œæ²¡å½“è¶…æ—¶äº‹ä»¶å‘ç”Ÿåï¼ŒTCPé‡ä¼ å…·æœ‰æœ€å°åºå·çš„è¿˜æœªè¢«ç¡®è®¤çš„æŠ¥æ–‡æ®µï¼Œåªæ˜¯æ¯æ¬¡TCPé‡ä¼ éƒ½ä¼šå°†ä»¥ä¸‹ä¸€æ¬¡è¶…æ—¶é—´éš”è®¾ç½®ä¸ºå‰é¢çš„2å€ï¼›è¿™ç§ä¿®æ”¹æä¾›äº†ä¸€ç§å½¢å¼å—é™çš„æ‹¥å¡æ§åˆ¶ï¼Œå› ä¸ºæ—¶å»¶å¢åŠ å¹¶ä¸”é‡ä¼ ä¼šå¯¼è‡´æ‹¥å¡æ›´ä¸¥é‡</li></ol></li><li>å¿«é€Ÿé‡ä¼ <ol><li>ä¸Šè¿°çš„è¶…æ—¶é‡ä¼ çš„é—®é¢˜åœ¨äºè¶…æ—¶å‘¨æœŸå¯èƒ½ç›¸å¯¹è¾ƒé•¿ï¼Œå½“ä¸€ä¸ªæŠ¥æ–‡æ®µä¸¢å¤±æ—¶ï¼Œè¿™ç§é•¿è¶…æ—¶å‘¨æœŸä½¿å¾—å‘é€æ–¹å»¶è¿Ÿé‡ä¼ ä¸¢å¤±çš„åˆ†ç»„ï¼Œä»è€Œå¢åŠ äº†ç«¯åˆ°ç«¯çš„æ—¶å»¶ï¼Œè¿™é‡Œå¯ä»¥é‡‡ç”¨å†—ä½™ACKï¼ˆduplicate ACKï¼‰æ¥å¸®åŠ©æ£€æµ‹ä¸¢åŒ…</li></ol></li><li>GBN or SR<ol><li>TCPæ›´å¤šçš„äº‹é€‰æ‹©ç¡®è®¤ï¼ˆselective acknowledgementï¼‰ï¼Œå±äºä¸¤è€…ä¹‹é—´balance</li></ol></li></ol><h4 id="324-tcpçš„æ‹¥å¡æ§åˆ¶"><a class="markdownIt-Anchor" href="#324-tcpçš„æ‹¥å¡æ§åˆ¶"></a> 3.2.4 TCPçš„æ‹¥å¡æ§åˆ¶</h4><p>è¿˜æ²¡çœ‹æ‡‚ï½ï½</p><p><a href="https://zhuanlan.zhihu.com/p/37379780">https://zhuanlan.zhihu.com/p/37379780</a></p><p>è¿™ä½åšä¸»æ€»ç»“ä¸º</p><ol><li>æ…¢å¼€å§‹ã€æ‹¥å¡é¿å…</li><li>å¿«é‡ä¼ ã€å¿«æ¢å¤</li></ol><p><a href="https://zhangbinalan.gitbooks.io/protocol/content/tcpde_yong_sai_kong_zhi.html">https://zhangbinalan.gitbooks.io/protocol/content/tcpde_yong_sai_kong_zhi.html</a></p><p>æ…¢å¼€å§‹( slow-start )ã€æ‹¥å¡é¿å…( congestion avoidance )ã€å¿«é‡ä¼ ( fast retransmit )å’Œå¿«æ¢å¤( fast recovery )ã€‚</p><h3 id="33-ä¸¤è€…å¯¹æ¯”"><a class="markdownIt-Anchor" href="#33-ä¸¤è€…å¯¹æ¯”"></a> 3.3 ä¸¤è€…å¯¹æ¯”</h3><p>æ—¢ç„¶TCPæ¯”UDPå¤šå‡ºæ¥è¿™ä¹ˆå¤šåŠŸèƒ½ï¼Ÿä¸¤è€…ä¹‹é—´çš„ä¼˜åŠ£åœ¨å“ªé‡Œå‘¢ï¼ŒUDPæä¾›äº†é€Ÿåº¦å¿«ã€æŠ¥æ–‡ä¼ é€’å¤šçš„ç‰¹ç‚¹ï¼Œè€ŒTCPè™½ç„¶ç‚¹å¯¹ç‚¹å®‰å…¨ä¼ é€’ä½†æ˜¯è®¡ç®—å¼€é”€å¤§ï¼Œé€‚åˆç”¨äºå®‰å…¨æ€§è¾ƒå¼ºçš„ä¸šåŠ¡ã€‚</p><ul><li>å…³äºå‘é€ä»€ä¹ˆæ•°æ®ä»¥åŠä½•æ—¶å‘é€çš„åº”ç”¨å±‚æ§åˆ¶æ›´ä¸ºç²¾ç»†ï¼›é‡‡ç”¨UDPä¸»éœ€è¦è¿›ç¨‹å°†æ•°æ®ä¼ é€ç»™UDPå³å¯ï¼Œä½†æ˜¯TCPå…·æœ‰æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼›åœ¨ä¸€äº›åº”ç”¨ä¸­æ›´åŠ å¼ºè°ƒå®æ—¶æ€§ï¼Œè€Œä¸å¿…è¦æ•°æ®çš„å®Œæ•´æ€§</li><li>æ— é¡»è¿æ¥å»ºç«‹ï¼Œå¯¹äºç½‘é¡µHTTPè¿æ¥ä¸­å¯é æ€§æ˜¯é‡è¦çš„ï¼ŒåŒæ—¶å®æ—¶æ€§ä¹Ÿæ˜¯é‡è¦çš„ï¼Œæ‰€ä»¥è°·æ­Œçš„QUICåè®®æ˜¯åœ¨UDPåè®®çš„åŸºç¡€ä¸Šåœ¨åº”ç”¨å±‚åè®®ä¸­å®ç°äº†å¯é æ€§</li><li>æ— è¿æ¥çŠ¶æ€ï¼ŒTCPéœ€è¦ä¿æŒè¿æ¥çŠ¶æ€ï¼Œè¿™ä¸ªåŒ…æ‹¬æ¥å—å’Œå‘é€ç¼“å­˜ã€æ‹¥å¡æ§åˆ¶iå‚æ•°ä»¥åŠåºå·ä¸ç¡®è®¤å¥½çš„å‚æ•°ï¼Œè€ŒUDPä¸éœ€è¦è¿½è¸ªè¿™äº›å‚æ•°ï¼Œå› æ­¤åœ¨æŸäº›ç‰¹å®šåº”ç”¨ä½¿ç”¨UDPå¯ä»¥æ”¯æŒæ›´å¤šçš„å¹¶å‘ç”¨æˆ·</li><li>åˆ†ç»„é¦–éƒ¨å¼€é”€å°ï¼ŒTCPæŠ¥æ–‡æ®µ20å­—èŠ‚çš„é¦–éƒ¨å¼€é”€ã€UDPä»…æœ‰8å­—èŠ‚</li></ul><p>åŒæ—¶åœ¨UDPä¸å¯é çš„åŸºç¡€ä¸Šï¼Œå¯ä»¥åœ¨åº”ç”¨å±‚ä¸Šå¢åŠ å¯é ä¼ è¾“åè®®æ¥å®ç°å¯é UDPï¼ˆæ¯”å¦‚Googleçš„QUICåè®®ï¼‰</p><h2 id="0x04-å›é¡¾-æ”¶è·å’Œå±•æœ›"><a class="markdownIt-Anchor" href="#0x04-å›é¡¾-æ”¶è·å’Œå±•æœ›"></a> 0x04 å›é¡¾ã€æ”¶è·å’Œå±•æœ›</h2><p>å°†æœ¬ç§‘ä¿¡æ¯ä¼ è¾“åŸç†ã€é€šä¿¡ç½‘ç»œåŸºç¡€æ²¡æœ‰å¬æ‡‚çš„æ•°æ®æŠ¥æ•´æ˜ç™½äº†å‡ºå¤„ï¼›å¹¶ä¸”åœ¨æè¿°ä¸€ä»¶äº‹æƒ…çš„è¿‡ç¨‹æœ€å¥½å…ˆç®€åŒ–ä¸€ä¸ªåŸºæœ¬æ¨¡å‹ã€ç„¶åé€æ­¥æ·»åŠ ã€‚åŒæ—¶ç†æ¸…æ¥šå…¶ä¸­çš„åŸç†ã€ç­–ç•¥å’Œå…·ä½“æ“ä½œä¹‹é—´çš„åŒºåˆ«å’Œè”ç³»</p>]]></content>
    
    
    <categories>
      
      <category>ComputerNetwork</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œ-02-Chapter02 åº”ç”¨å±‚åè®®</title>
    <link href="/posts/e75be22e.html"/>
    <url>/posts/e75be22e.html</url>
    
    <content type="html"><![CDATA[<p>ç½‘ç»œåº”ç”¨æ˜¯è®¡ç®—æœºç½‘ç»œå­˜åœ¨çš„ç†ç”±ï¼Œå¦‚æœæˆ‘ä»¬ä¸èƒ½æ„æƒ³å‡ºä»»ä½•æ¸¸æœ‰ç”¨çš„åº”ç”¨ï¼Œä¹Ÿå°±æ²¡æœ‰å¿…è¦æ”¯æŒå®ƒä»¬çš„ç½‘ç»œåè®®æ¥ï¼Œæ­£æ˜¯å› ç‰¹ç½‘çš„å…¨é¢å‘å±•ä»¥æ¥ï¼Œçš„ç¡®å¼€å‘ä¼—å¤šæœ‰ç”¨çš„ã€æœ‰è¶£çš„ç½‘ç»œåº”ç”¨ï¼Œæ­£æ˜¯è¿™äº›åº”ç”¨ç¨‹åºæˆä¸ºå› ç‰¹ç½‘æˆåŠŸçš„é©±åŠ¨åŠ›ã€‚</p><p>ä¸€äº›éå¸¸æœ‰æ„æ€çš„å†å²ï¼š</p><p>20ä¸–çºª70å¹´å¹´ä»£åˆ°80å¹´å¹´ä»£ï¼Œæµè¡Œçš„ç»å…¸çš„åŸºäºæ–‡æœ¬çš„åº”ç”¨ï¼Œæ¯”å¦‚ç”µå­é‚®ä»¶ã€è¿œç¨‹è®¿é—®è®¡ç®—æœºç­‰ï¼›</p><p>20ä¸–çºª90å¹´ä»£ä¸­æœŸå¼•å…¥çš„ä¸‡ç»´ç½‘ï¼ŒåŒ…æ‹¬Webå†²æµªã€æœç´¢å’Œç”µå­å•†åŠ¡</p><p>20ä¸–çºªæœ«ï¼Œå¼•å…¥çš„å³æ—¶é€šè®¯å’Œå¯¹ç­‰P2Pæ–‡ä»¶åˆ†äº«</p><p>ä¹‹åå‡ºç°æ¥ï¼šIPç”µè¯ã€è§†é¢‘ç”µè¯ã€è§†é¢‘ç½‘ç«™ã€åœ¨çº¿æ¸¸æˆ</p><p>å†åˆ°æ™ºèƒ½æ‰‹æœºå‘å±•ï¼šç­¾åˆ°ã€çº¦ä¼šå’Œåœ°å›¾å¯¼èˆªç­‰ç­‰</p><p>è´²æœ¬ç« ä¸»è¦å­¦ä¹ ç½‘ç»œåº”ç”¨çš„åŸç†å’Œå®ç°æ–¹é¢çš„åªæ˜¯ï¼Œä»å…³é”®çš„åº”ç”¨å±‚æ¦‚å¿µå¼€å§‹ï¼Œæè¿°ç½‘ç»œæœåŠ¡ã€å®¢æˆ·å’ŒæœåŠ¡å™¨ã€è¿›ç¨‹å’Œè¿è¾“å±‚æ¥å£ï¼Œä¹‹åè®¾è®¡å¼€å‘è¿è¡Œåœ¨TCPå’ŒUDPçš„ç½‘ç»œåº”ç”¨ç¨‹åºï¼Œä¹‹åå­¦ä¹ Socketæ¥å£æ¥ç¼–å†™ä¸€äº›ç®€å•çš„å®¢æˆ·-æœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚</p><h2 id=""><a class="markdownIt-Anchor" href="#"></a> </h2><span id="more"></span><h2 id="21-åº”ç”¨å±‚åè®®åŸç†"><a class="markdownIt-Anchor" href="#21-åº”ç”¨å±‚åè®®åŸç†"></a> 2.1 åº”ç”¨å±‚åè®®åŸç†</h2><p>åœ¨åº”ç”¨å±‚ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ä¸å¿…è¦å…³å¿ƒç½‘ç»œä¸­è·¯ç”±è®¾ç½®ç­‰ç­‰æƒ…å†µã€‚</p><h3 id="211-ç½‘ç»œåº”ç”¨ç¨‹åºä½“ç³»ç»“æ„-application-architecture"><a class="markdownIt-Anchor" href="#211-ç½‘ç»œåº”ç”¨ç¨‹åºä½“ç³»ç»“æ„-application-architecture"></a> 2.1.1 ç½‘ç»œåº”ç”¨ç¨‹åºä½“ç³»ç»“æ„ï¼ˆ Application architectureï¼‰</h3><p>åº”ç”¨ç¨‹åºç ”å‘è€…è®¾è®¡ï¼Œè§„å®šå¦‚ä½•åœ¨å„ç§ç«¯ç³»ç»Ÿä¸Šç»„ç»‡è¯¥åº”ç”¨ç¨‹åºï¼Œåœ¨é€‰æ‹©åº”ç”¨ç¨‹åºä½“ç³»ç»“æ„æ—¶ï¼Œåº”ç”¨ç¨‹åºç ”å‘è€…å¾ˆå¯èƒ½åˆ©ç”¨ç°ä»£ç½‘ç»œåº”ç”¨ç¨‹åºæ‰€ä½¿ç”¨çš„ä¸¤ç§ä¸»æµä½“ç³»ç»“æ„ä¹‹ä¸€ï¼šå®¢æˆ·-æœåŠ¡å™¨ä½“ç³»ç»“æ„å’Œå¯¹ç­‰P2Pä½“ç³»ç»“æ„</p><ol><li>Client-server architectureï¼Œå¯èƒ½ä¼šå‡ºç°å¤šå°å®¢æˆ·ç«¯æƒ³æœåŠ¡å™¨å“åº”ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹æœåŠ¡å™¨çš„IPåœ°å€æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯ä¼šå‡ºç°å•ç‹¬çš„æœåŠ¡å™¨ä¸»æœºè·Ÿä¸ä¸Šæ‰€æœ‰å®¢æˆ·è¯·æ±‚çš„æƒ…å†µï¼Œå› æ­¤éœ€è¦è®¾ç½®å¤šä¸ªæ•°æ®ä¸­å¿ƒData centerç”¨æ¥åˆ›å»ºå¼ºå¤§çš„è™šæ‹ŸæœåŠ¡å™¨ï¼Œé€šå¸¸ä¸€ä¸ªæ•°æ®ä¸­å¿ƒå¯èƒ½å­˜åœ¨æ•°åä¸‡å°æœåŠ¡å™¨</li><li>P2P architectureï¼Œåº”ç”¨ç¨‹åºå¯¹äºä¸“ç”¨æœåŠ¡å™¨çš„å…·æœ‰æœ€å°çš„ä¾èµ–ï¼Œç›¸ååº”ç”¨ç¨‹åºåœ¨é—´æ–­è¿æ¥çš„ä¸»æœºä¹‹é—´ä½¿ç”¨ç›´æ¥é€šä¿¡ï¼Œè¿™äº›ä¸»æœºå¯¹ç§°ä¸ºå¯¹ç­‰æ–¹ï¼ŒæœåŠ¡å™¨ç”¨äºè·Ÿè¸ªç”¨æˆ·çš„IPåœ°å€ï¼Œä½†æ˜¯ç”¨æˆ·åˆ°ç”¨æˆ·çš„æŠ¥æ–‡åœ¨ç”¨æˆ·ä¸»æœºä¹‹é—´æ— é¡»é€šè¿‡ä¸­é—´æœåŠ¡å™¨ç›´æ¥å‘é€ï¼Œä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç‰¹ç‚¹æ˜¯å…·æœ‰è‡ªæ‹“å±•æ€§ï¼ˆself-scalabilityï¼‰</li></ol><h3 id="212-è¿›ç¨‹é€šä¿¡process-communication"><a class="markdownIt-Anchor" href="#212-è¿›ç¨‹é€šä¿¡process-communication"></a> 2.1.2 è¿›ç¨‹é€šä¿¡ï¼ˆProcess communicationï¼‰</h3><p>åœ¨æ„å»ºç½‘ç»œåº”ç”¨éœ€è¦å¯¹è¿è¡Œåœ¨å¤šä¸ªç«¯ç³»ç»Ÿä¸Šçš„ç¨‹åºæ˜¯å¦‚ä½•è¿›è¡Œé€šä¿¡çš„æƒ…å†µè¿›è¡Œäº†è§£ï¼Œâš ï¸è®¡ç®—æœºç½‘ç»œä¸­å¹¶ä¸å…³æ³¨äºåŒä¸€å°ä¸»æœºçš„è¿›ç¨‹ï¼Œè€Œæ˜¯ä¸åŒç«¯ç³»ç»Ÿçš„è¿›ç¨‹ï¼ˆProcessï¼‰ä¹‹é—´çš„é€šä¿¡æœºåˆ¶</p><p>åœ¨è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä¼šè¯åœºæ™¯ä¸­ï¼Œå‘èµ·é€šä¿¡çš„ç§°ä¸ºå®¢æˆ·ï¼ˆClinetï¼‰ã€åœ¨ä¼šè¯å¼€å§‹ç­‰å¾…è”ç³»çš„æ˜¯æœåŠ¡å™¨ï¼ˆServerï¼‰</p><p>è¿›ç¨‹ä¸ç½‘ç»œä¹‹é—´é€šä¿¡çš„æ¥å£éœ€è¦ä½¿ç”¨å¥—æ¥å­—ï¼ˆSocketï¼‰çš„è½¯ä»¶æ¥å£å‘ç½‘ç»œå‘é€messageå’Œæ¥å—messageï¼›è°ƒç”¨ç³»ç»Ÿæä¾›çš„socket apiå’Œæ“ä½œç³»ç»Ÿï¼Œå°†å…¶è½¬æ¢ä¸ºä¸åŒçš„æµé‡çš„tCPå†å‘é€ã€‚æˆ‘ä»¬å¯ä»¥åœ¨Socketä¸­é€‰æ‹©ä»€ä¹ˆï¼Ÿ</p><ol><li>é€‰æ‹©è¿è¾“å±‚çš„åè®®</li><li>è®¾å®šå‡ ä¸ªè¿è¾“å±‚å‚æ•°ï¼Œæ¯”å¦‚æœ€å¤§ç¼“å­˜å’Œæœ€å¤§æŠ¥æ–‡é•¿åº¦</li></ol><p>åŒæ—¶åœ¨è¿›ç¨‹éœ€è¦è€ƒè™‘åœ°å€IPå’Œç«¯å£Portçš„é€‰æ‹©</p><p><a href="https://zh.m.wikipedia.org/zh/TCP/UDP%E7%AB%AF%E5%8F%A3%E5%88%97%E8%A1%A8">TCP/UDPç«¯å£åˆ—è¡¨ - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦</a></p><h3 id="213-å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡"><a class="markdownIt-Anchor" href="#213-å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡"></a> 2.1.3 å¯ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„è¿è¾“æœåŠ¡</h3><p>é’ˆå¯¹ä¸åŒçš„Applicationè‡ªç„¶éœ€è¦ä¸åŒçš„è¿è¾“æ–¹å¼ï¼Œæ¯”å¦‚å®é™…çš„ç«è½¦ã€é£æœºå„æœ‰ä¸åŒï¼Œè®¡ç®—æœºç½‘ç»œä¼ è¾“æ–¹å¼ä¹Ÿæ˜¯ç›¸åŒã€‚éœ€æ±‚åˆ†æéœ€è¦ä»ä¹‹é—´çš„è®¡ç®—æœºç½‘ç»œçš„åŸºæœ¬ç‰¹æ€§å‡ºå‘</p><ol><li>å¯é æ€§æ•°æ®ä¼ è¾“ï¼ˆreliable data transferï¼‰</li><li>ååé‡ï¼ˆBandwidthï¼‰</li><li>å®šæ—¶ï¼ˆTime delayï¼‰</li><li>å®‰å…¨æ€§ï¼ˆSecurityï¼‰</li></ol><h3 id="214-å› ç‰¹ç½‘æˆ–è€…æŠ½è±¡æ¨¡å‹ä¸‹æ¬¡å±‚æä¾›çš„è¿è¾“æœåŠ¡"><a class="markdownIt-Anchor" href="#214-å› ç‰¹ç½‘æˆ–è€…æŠ½è±¡æ¨¡å‹ä¸‹æ¬¡å±‚æä¾›çš„è¿è¾“æœåŠ¡"></a> 2.1.4 å› ç‰¹ç½‘ï¼ˆæˆ–è€…æŠ½è±¡æ¨¡å‹ä¸‹æ¬¡å±‚ï¼‰æä¾›çš„è¿è¾“æœåŠ¡</h3><p>æä¾›TCPå’ŒUDPä¼ è¾“åè®®ï¼Œè¿™ä¸ªæ˜¯è¿è¾“å±‚æä¾›çš„é€‰æ‹©</p><ul><li>TCPçš„ä¸»è¦ç‰¹ç‚¹æ˜¯é¢å‘è¿æ¥çš„æœåŠ¡ï¼Œä¼šæœ‰æ¡æ‰‹çš„è¿‡ç¨‹ï¼ŒåŒæ—¶æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ä»¥åŠæ‹¥å¡æ§åˆ¶æœºåˆ¶ã€‚</li><li>UDPæä¾›ä¸å¿…è¦æœåŠ¡çš„è½»é‡çº§è¿è¾“åè®®ï¼Œé¢å‘æ— è¿æ¥çš„</li></ul><p>é¢å¤–çš„ä¼šæœ‰Security Socket Layeræ¥å°†è¿›è¡ŒåŠ å¯†ï¼Œæä¾›å…³é”®è¿›ç¨‹åˆ°è¿›ç¨‹çš„å®‰å…¨æ€§æœåŠ¡</p><h3 id="215-åº”ç”¨å±‚åè®®application-layer-protocol"><a class="markdownIt-Anchor" href="#215-åº”ç”¨å±‚åè®®application-layer-protocol"></a> 2.1.5 åº”ç”¨å±‚åè®®ï¼ˆapplication-layer protocolï¼‰</h3><p>å­¦ä¹ å¦‚ä½•æ„é€ æŠ¥æ–‡å‘é€åˆ°Socketå®ç°ç½‘ç»œè¿›ç¨‹ä¹‹é—´çš„ç›¸äº’é€šä¿¡ï¼Œå¦‚ä½•æ„é€ è¿™äº›æŠ¥æ–‡ï¼Ÿå¦‚ä½•æ˜ç¡®è¿™äº›æŠ¥æ–‡ä¸­å­—æ®µçš„å«ä¹‰ï¼Ÿåœ¨ä½•æ—¶å‘é€æŠ¥æ–‡ï¼Ÿè¿™äº›éƒ½æ˜¯ç”±åè®®è§„å®šçš„ï¼š</p><ol><li>äº¤æ¢çš„æŠ¥æ–‡ç±»å‹ï¼Œåˆ©ç”¨requestå’ŒresponseæŠ¥æ–‡</li><li>æŠ¥æ–‡ä¸­å­—æ®µæ˜¯å¦‚ä½•æè¿°</li><li>å­—æ®µçš„è¯­ä¹‰</li><li>ç¡®å®šä¸€ä¸ªè¿›ç¨‹ä½•æ—¶ä»¥åŠå¦‚ä½•å‘é€æŠ¥æ–‡</li></ol><h2 id="22-webå’Œhttp"><a class="markdownIt-Anchor" href="#22-webå’Œhttp"></a> 2.2 Webå’ŒHTTP</h2><p>Webæ˜¯ä¸€ä¸ªå¼•èµ·å…¬ä¼—æ³¨æ„çš„å› ç‰¹ç½‘åº”ç”¨ï¼Œæå¤§çš„æ”¹å˜äº†äººä¸å·¥ä½œç¯å¢ƒäº¤æµçš„æ–¹å¼ï¼Œå®ƒå°†äººä»¬ä»è¢«åŠ¨æ¥å—è½¬å‘æŒ‰éœ€æ“ä½œ</p><h3 id="221-httpæ¦‚å†µhypertext-transfer-protocolhttp"><a class="markdownIt-Anchor" href="#221-httpæ¦‚å†µhypertext-transfer-protocolhttp"></a> 2.2.1 HTTPæ¦‚å†µï¼ˆHyperText Transfer Protocolï¼ŒHTTPï¼‰</h3><p>è¶…æ–‡æœ¬ä¼ è¾“åè®®æ˜¯Webçš„æ ¸å¿ƒï¼Œä¸»è¦ç”±å®¢æˆ·ç«¯ç¨‹åºå’ŒæœåŠ¡å™¨ç¨‹åºç»„æˆï¼Œåœ¨ä¸¤ä¸ªä¸åŒçš„hostä¸­ï¼Œé€šè¿‡äº¤æ¢HTTPæŠ¥æ–‡è¿›è¡Œä¼šè¯ï¼Œéœ€è¦å›é¡¾Webæœ¯è¯­ã€‚</p><p>Webé¡µé¢ï¼ˆweb pageï¼‰æ˜¯ç”±å¯¹è±¡ï¼ˆObjectï¼‰ç»„æˆçš„ï¼ŒåŒ…æ‹¬HTMLæ–‡ä»¶ã€JPEGå›¾ç‰‡ã€JAVAç¨‹åºæˆ–è€…è§†é¢‘ç­‰</p><p>URLæ˜¯è¿™äº›æ–‡ä»¶å¯»æ‰¾åœ°å€çš„ä¸œè¥¿ï¼Œå¤šæ•°Webé¡µé¢åŒ…å«HTMLæ–‡æœ¬å’Œ5ä¸ªJPEGå›¾å½¢ï¼Œæµè§ˆå™¨ï¼ˆWeb browserï¼‰å®ç°äº†HTTPçš„å®¢æˆ·ç«¯ã€æœåŠ¡å™¨ï¼ˆWeb serverï¼‰å®ç°äº†HTPPçš„æœåŠ¡å™¨ç«¯ï¼Œç”¨äºå­˜å‚¨webå¯¹è±¡</p><p>HTTPä¹Ÿå®šä¹‰äº†å®¢æˆ·ç«¯è¯·æ±‚å’Œå›å¤Webé¡µé¢çš„æ–¹å¼ï¼ŒHTTPä½¿ç”¨TCPä½œä¸ºæ”¯æ’‘è¿è¾“åè®®ï¼Œå³HTTPä¸€å®šèƒ½ä¿è¯æŠ¥æ–‡å¯ä»¥ä¼ é€’ï¼ŒåŒæ—¶åœ¨è¯·æ±‚å’Œå›å¤çš„çŠ¶æ€ä¸­ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šä¿å­˜å…³äºå®¢æˆ·çš„ä»»ä½•ä¿¡æ¯ï¼Œå› æ­¤æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®ï¼ˆStateless protocolï¼‰</p><h3 id="222-éæŒç»­è¿æ¥å’ŒæŒç»­è¿æ¥yes-or-no-persistent-connection"><a class="markdownIt-Anchor" href="#222-éæŒç»­è¿æ¥å’ŒæŒç»­è¿æ¥yes-or-no-persistent-connection"></a> 2.2.2 éæŒç»­è¿æ¥å’ŒæŒç»­è¿æ¥ï¼ˆyes or no persistent connectionï¼‰</h3><p>ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼šå­˜åœ¨ä¸€ä¸ªæŒç»­æ–‡ä»¶äº¤äº’æ˜¯é‡‡ç”¨å•ç‹¬çš„TCPè¿æ¥ï¼Œè¿˜æ˜¯ç»è¿‡ä¸åŒçš„TCPè¿æ¥ï¼Œç»è¿‡æ¿€çƒˆçš„è®¨è®ºå¸Œæœ›åœ¨ä¸€å®šæ—¶é—´é—´éš”å†…é‡‡ç”¨æŒç»­æ€§è¿æ¥çš„æ–¹å¼ï¼Œè¶…è¿‡ä¹‹åé‡‡ç”¨éæŒç»­æ€§è¿æ¥çš„æ–¹å¼</p><h3 id="223-httpæŠ¥æ–‡æ ¼å¼"><a class="markdownIt-Anchor" href="#223-httpæŠ¥æ–‡æ ¼å¼"></a> 2.2.3 HTTPæŠ¥æ–‡æ ¼å¼</h3><p>ç¬¬ä¸€ç§è¯·æ±‚æŠ¥æ–‡ï¼Œç¬¬ä¸€è¡Œæ˜¯request lineï¼Œåé¢çš„è¡Œheader lineï¼Œ</p><p>è¯·æ±‚è¡ŒåŒ…æ‹¬æ–¹æ³•å­—æ®µã€URLå­—æ®µå’ŒHTTPç‰ˆæœ¬</p><p>å¸¸ç”¨çš„æ–¹æ³•æœ‰GETã€POSTã€HEADã€PUTã€DELETE</p><p>HOSTæä¾›ä¿¡æ¯æ˜¯webä»£ç†é«˜é€Ÿç¼“å­˜æ‰€éœ€è¦çš„</p><p>Connectionï¼šé«˜é€ŸæœåŠ¡å™¨ä¸è¦ä½¿ç”¨æŒç»­è¿æ¥</p><p>User-agentï¼šæŒ‡æ˜ç”¨æˆ·ä»£ç†ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡å™¨çš„ç±»å‹</p><p>Accept-languageï¼šè¡¨ç¤ºæ‹¥æŠ¤æƒ³è¦è¯¥å¯¹è±¡çš„ç‰ˆæœ¬</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3cmwne8ooj20y60u040w.jpg" alt="image-20220618194455618" /></p><p>ä¸‰ä¸ªéƒ¨åˆ†ï¼šåˆå§‹çŠ¶æ€è¡Œstatus lineã€å…­ä¸ªé¦–éƒ¨è¡Œheader lineã€å®ä½“è¡Œentity body</p><p>HTTPä»¥åŠçŠ¶æ€ç </p><p>connection è¡¨ç¤ºå‘é€å®Œä¹‹åå°†å…³é—­tcpè¿æ¥</p><p>200 OKè¯·æ±‚æˆåŠŸ</p><p>301å¯¹è±¡è¢«æ°¸ä¹…è½¬ç§»äº†</p><p>400é€šç”¨å·®é”™ä»£ç </p><p>404 è¯·æ±‚çš„æ–‡æ¡£ä¸åœ¨æœåŠ¡å™¨ä¸Š</p><p>505  æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚æŠ¥æ–‡ä½¿ç”¨çš„HTTPåè®®ç‰ˆæœ¬</p><p>Date è¡¨ç¤ºæœåŠ¡å™¨ä»æ–‡ä»¶ç³»ç»Ÿä¸­æ£€ç´¢åˆ°è¯¥å¯¹è±¡ï¼Œå¹¶æ’å…¥å“åº”æŠ¥æ–‡å¹¶å‘é€è¯¥æŠ¥æ–‡çš„æ—¶é—´</p><p>Serverï¼šè¡¨ç¤ºæœåŠ¡å™¨äº§ç”Ÿ</p><p>Last-modifiedï¼šè¡¨ç¤ºå¯¹è±¡åˆ›å»ºæˆ–è€…æœ€åä¿®æ”¹çš„æ—¥æœŸå’Œæ—¶é—´</p><p>Content-Lengthï¼šåŒ…å«çš„å­—èŠ‚æ•°</p><p>content-typeï¼šå¯¹è±¡æ˜¯HTMLæ–‡æœ¬</p><h3 id="224-æœåŠ¡å™¨ç¼“å­˜-cookie"><a class="markdownIt-Anchor" href="#224-æœåŠ¡å™¨ç¼“å­˜-cookie"></a> 2.2.4 æœåŠ¡å™¨ç¼“å­˜ cookie</h3><p>æ— çŠ¶æ€çš„HTTPæœåŠ¡å™¨ç®€åŒ–äº†è®¾è®¡ï¼Œä½†æ˜¯ä¸ºäº†è¯†åˆ«ç”¨æˆ·ï¼Œè¿˜æ˜¯å¸Œæœ›å°†è¯·æ±‚å†…å®¹ä¸ç”¨æˆ·èº«ä»½è”ç³»èµ·æ¥ï¼Œä¸ºæ­¤ä½¿ç”¨Cookieï¼Œå…¶ä¸»è¦ç”±å››ä¸ªç»„ä»¶æ„æˆ</p><ol><li>åœ¨HTTPå“åº”æŠ¥æ–‡ä¸­ä¸€ä¸ªcookieé¦–éƒ¨è¡Œ</li><li>åœ¨HTTPè¯·æ±‚æŠ¥æ–‡ä¸­ä¸€ä¸ªcookieé¦–éƒ¨è¡Œ</li><li>åœ¨ç”¨æˆ·ç«¯ç³»ç»Ÿä¸­ä¿ç•™æœ‰ä¸€ä¸ªcookieæ–‡ä»¶ï¼Œå¹¶ç”±ç”¨æˆ·çš„æµè§ˆå™¨è¿›è¡Œç®¡ç†</li><li>ä½äºwebç«™ç‚¹çš„ä¸€ä¸ªåç«¯æ•°æ®åº“</li></ol><p>ä½†æ˜¯ç»“åˆcookieç”¨æˆ·æä¾›çš„è´¦æˆ·ä¿¡æ¯ï¼Œwebç«™ç‚¹å¯ä»¥çŸ¥é“è®¸å¤šç”¨æˆ·çš„ä¿¡æ¯</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3cmwtxupej214a0u0ad6.jpg" alt="image-20220618194508226" /></p><h3 id="225-webç¼“å­˜cache"><a class="markdownIt-Anchor" href="#225-webç¼“å­˜cache"></a> 2.2.5 Webç¼“å­˜ï¼ˆcacheï¼‰</h3><p>ä¹Ÿå«åšä»£ç†æœåŠ¡å™¨ï¼ˆproxy serverï¼‰ï¼Œæ˜¯èƒ½å¤Ÿä»£è¡¨åˆå§‹WebæœåŠ¡å™¨æ¥æ»¡è¶³HTTPè¯·æ±‚çš„ç½‘ç»œå®ä½“</p><p>webç¼“å­˜å¯ä»¥å¤§å¤§å‡å°‘å®¢æˆ·è¯·æ±‚çš„å“åº”æ—¶é—´ï¼Œ</p><p>åŒæ—¶å¯ä»¥å¤§å¤§å‡å°‘ä¸€ä¸ªæœºæ„çš„æ¥å…¥é“¾è·¯åˆ°å› ç‰¹ç½‘çš„é€šä¿¡é‡ï¼Œé€šè¿‡å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆContent Distribution Networkï¼ŒCDNï¼‰ï¼Œwebç¼“å­˜å™¨æ­£åœ¨è®©å› ç‰¹ç½‘å‘æŒ¥è¶Šæ¥è¶Šå¤šçš„ä½œç”¨</p><p>ä½†æ˜¯webç¼“å­˜çš„ä¸€ä¸ªé‡è¦çš„é—®é¢˜å¯èƒ½æ˜¯ï¼Œå­˜æ”¾åœ¨ç¼“å­˜å™¨ä¸­çš„å¯¹è±¡å‰¯æœ¬å¯èƒ½æ˜¯é™ˆæ—§çš„ï¼Œè¿™å°±éœ€è¦ç¼“å­˜å™¨è¯å®å¯¹è±¡æ˜¯æœ€æ–°çš„ï¼Œä¹Ÿå°±æ˜¯æ¡ä»¶GETï¼ˆconditional  GETæ–¹æ³•ï¼‰</p><h2 id="23-mailå’Œsmtp-pop3-imap-http"><a class="markdownIt-Anchor" href="#23-mailå’Œsmtp-pop3-imap-http"></a> 2.3 Mailå’ŒSMTPã€POP3ã€IMAPã€HTTP</h2><p>å½“å› ç‰¹ç½‘è¿˜åœ¨è¥è¤“ä¹‹ä¸­ï¼Œç”µå­é‚®ä»¶å·²ç»ç§°ä¸ºæ¥æœ€æµè¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ˜¯ä¸€ç§å¼‚æ­¥é€šä¿¡åª’ä»‹ï¼Œä¹Ÿå°±æ˜¯äººä»¬æ–¹ä¾¿çš„æ—¶å€™å¯ä»¥æ”¶å‘é‚®ä»¶ï¼Œä¸å¿…ä¸ä»–äººè®¡åˆ’è¿›è¡Œåè°ƒã€‚åŒæ—¶ç”µå­é‚®ä»¶çš„ä¼˜åŠ¿åœ¨äºå…·æœ‰é™„ä»¶ã€è¶…é“¾æ¥ã€htmlæ ¼å¼æ–‡æœ¬çš„å›¾ç‰‡çš„æŠ¥æ–‡ã€‚</p><p>é¦–å…ˆçœ‹ç”µå­é‚®ä»¶çš„æ€»ä½“ç»“æ„ä»¥åŠå…³é”®ç»„æˆéƒ¨åˆ†</p><ol><li>ç”¨æˆ·ä»£ç† user-agent</li><li>é‚®ä»¶æœåŠ¡å™¨ mail-server</li><li>ç®€å•é‚®ä»¶ä¼ è¾“åè®® simple-Mail-Transfer-Protocolï¼ŒSMTP</li></ol><p>é‡è¦çš„åœºæ™¯ï¼š SMTPä¸€èˆ¬ä¸ä½¿ç”¨ä¸­é—´é‚®ä»¶æœåŠ¡å™¨å‘é€é‚®ä»¶ï¼Œå³æ—¶è¿™ä¸¤ä¸ªé‚®ä»¶æœåŠ¡å™¨ä½äºåœ°çƒä¸¤ç«¯ä¹Ÿæ˜¯è¿™æ ·çš„ï¼Œå³ä½¿å¦ä¸€ä¸ªæœåŠ¡å™¨æ²¡æœ‰å¼€æœºï¼Œè¿™æ ·çš„æŠ¥æ–‡ä¹Ÿä¼šä¿ç•™åœ¨ALiceçš„é‚®ä»¶æœåŠ¡å™¨ä¸Šç­‰å¾…è¿›è¡Œæ–°çš„å°è¯•</p><h3 id="231-smtpåè®®"><a class="markdownIt-Anchor" href="#231-smtpåè®®"></a> 2.3.1 SMTPåè®®</h3><h3 id="image-20220618194530174232-smtpåè®®ä¸httpåè®®å¯¹æ¯”"><a class="markdownIt-Anchor" href="#image-20220618194530174232-smtpåè®®ä¸httpåè®®å¯¹æ¯”"></a> <img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3cmx7wx4uj21480c6q47.jpg" alt="image-20220618194530174" />2.3.2 SMTPåè®®ä¸HTTPåè®®å¯¹æ¯”</h3><p>HTTP ä»WebæœåŠ¡å™¨å‘å®¢æˆ·ç«¯ä¼ é€æ–‡ä»¶ï¼›ä½†æ˜¯HTTPæ˜¯ä¸€ä¸ªpull protocolï¼Œåœ¨æ–¹ä¾¿çš„æ—¶å€™ï¼ŒæŸäº›äººåœ¨WebæœåŠ¡å™¨ä¸Šè£…è½½ä¿¡æ¯ï¼Œç”¨æˆ·ä½¿ç”¨HTTPåè®®ä»æœåŠ¡å™¨ä¸Šæ‹‰å–è¿™äº›åè®®</p><p>SMTP ä»ä¸€ä¸ªé‚®ä»¶æœåŠ¡å™¨å‘å¦ä¸€ä¸ªé‚®ä»¶æœåŠ¡å™¨ä¼ é€æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯å‘é€é‚®ä»¶æœåŠ¡å™¨å°†æ–‡ä»¶æ¨å‘æ¥å—é‚®ä»¶æœåŠ¡å™¨</p><p>å…¶ä»–çš„åŒºåˆ«ï¼š</p><ol><li>STMPè¦æ±‚æ¯ä¸ªæŠ¥æ–‡æŒ‰ç…§7æ¯”ç‰¹ASCIIæ ¼å¼ï¼Œå¦‚æœå«æœ‰éæ³•çš„7æ¯”ç‰¹æˆ–è€…äºŒè¿›åˆ¶çš„å›¾å½¢æ–‡ä»¶ï¼Œéœ€è¦æŒ‰ç…§7æ¯”ç‰¹ASCIIè¿›è¡Œç¼–ç ï¼ŒHTTPä¸å—è¿™æ ·çš„é™åˆ¶</li><li>å¦‚ä½•å¤„ç†åŒ…å«æ–‡æœ¬å’Œå›¾å½¢çš„æ–‡æ¡£ï¼ŒHTTPå°†å…¶å°è£…åœ¨HTTPå“åº”æŠ¥æ–‡ä¸­ï¼ŒSMTPåˆ™æŠŠæ‰€æœ‰æŠ¥æ–‡å¯¹è±¡æ”¾åœ¨ä¸€ä¸ªæŠ¥æ–‡ä¸­</li></ol><h3 id="233-é‚®ä»¶æŠ¥æ–‡æ ¼å¼"><a class="markdownIt-Anchor" href="#233-é‚®ä»¶æŠ¥æ–‡æ ¼å¼"></a> 2.3.3 é‚®ä»¶æŠ¥æ–‡æ ¼å¼</h3><p>ç±»ä¼¼ä¸SPIã€CANï¼Œæ— çº¿ä¼ é€’éƒ½éœ€è¦ä½¿ç”¨é¦–éƒ¨è¡Œæ¥ä½œä¸ºæ ‡è¯†ï¼Œåªæ˜¯ä½œä¸ºåº”ç”¨å±‚çš„æ ‡è¯†å¯èƒ½æ›´äººæ€§åŒ–ä¸€ç‚¹ï¼Œä½†æ˜¯è¿™æ ·çš„äººæ€§åŒ–å¯èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šè®©äººäº§ç”Ÿè´¹è§£ï¼Œä¹‹åç†è§£èƒŒåçš„æœºç†æ‰èƒ½æ›´å¥½ç†è§£åˆ«äººã€‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3cmxhqyoaj20zc05gt8x.jpg" alt="image-20220618194546104" /></p><h3 id="234-é‚®ä»¶è®¿é—®åè®®"><a class="markdownIt-Anchor" href="#234-é‚®ä»¶è®¿é—®åè®®"></a> 2.3.4 é‚®ä»¶è®¿é—®åè®®</h3><p>ä¹‹å‰è®¨è®ºçš„SMTPåè®®ï¼Œå¿…é¡»è¦æ±‚å‘é€ç«¯å‘é€çš„æ—¶å€™ï¼Œæ¥æ”¶ç«¯åœ¨çº¿ï¼Œä½†æ˜¯ç”±äºPCæˆ–è€…æ‰‹æœºä¸èƒ½ä¸€ç§ä¿æŒåœ¨çº¿ï¼Œå› æ­¤é€šå¸¸éœ€è¦ä¸€ä¸ªå…±äº«çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œä½†æ˜¯è¿™ä¸ªæœåŠ¡å™¨å’Œä»£ç†ä¹‹é—´ä¸èƒ½é€šè¿‡SMTPä¼ é€ï¼Œå› ä¸ºSMTPåªèƒ½Pushï¼Œä¸èƒ½PULLæ–‡ä»¶ï¼Œå› æ­¤éœ€è¦ä¸€äº›æµè¡Œçš„é‚®ä»¶è®¿é—®åè®®ï¼ŒåŒ…æ‹¬</p><ol><li>ç¬¬ä¸‰ç‰ˆçš„é‚®å±€åè®®ï¼ŒPOST-OFFCIE-PROTOCOLï¼ŒPOP3<ol><li>ç¬¬ä¸€ä¸ªé˜¶æ®µï¼šç‰¹è®¸ï¼ˆAuthorizationï¼‰</li><li>ç¬¬äºŒä¸ªé˜¶æ®µï¼šäº‹åŠ¡å¤„ç†</li><li>ç¬¬ä¸‰ä¸ªé˜¶æ®µï¼šæ›´æ–°</li><li>ç‰¹ç‚¹ï¼Œä¸€æ—¦å°†é‚®ä»¶ä¸‹è½½åˆ°æœ¬åœ°ä¸»æœºå°±èƒ½ç®€å†é‚®ä»¶æ–‡ä»¶å¤¹ï¼Œå¹¶å°†ä¸‹è½½çš„é‚®ä»¶æ”¾å…¥è¯¥æ–‡ä»¶å¤¹ä¸­ï¼Œä¹‹åBobå¯ä»¥åˆ é™¤æŠ¥æ–‡ï¼Œå¯ä»¥åœ¨æ–‡ä»¶å¤¹ä¹‹é—´ç§»åŠ¨æŠ¥æ–‡ï¼Œå¹¶æŸ¥è¯¢æŠ¥æ–‡ï¼Œä½†æ˜¯POP3åè®®æ²¡æœ‰ç»™ç”¨æˆ·æä¾›ä»»ä½•åˆ›å»ºè¿œç¨‹æ–‡ä»¶å¤¹å¹¶ä¸ºæŠ¥æ–‡æŒ‡æ´¾æ–‡ä»¶å¤¹çš„æ–¹æ³•</li></ol></li><li>å› ç‰¹ç½‘é‚®ä»¶è®¿é—®åè®® Internet Mail Access Protocolï¼ŒIMAP<ol><li>IMAPåè®®æ˜¯ä¸€ä¸ªé‚®ä»¶è®¿é—®åè®®ï¼Œæ¯ä¸ªæŠ¥æ–‡ä¸ä¸€ä¸ªæ–‡ä»¶å¤¹è”ç³»èµ·æ¥ï¼Œå½“æŠ¥æ–‡ç¬¬ä¸€æ¬¡åˆ°è¾¾æœåŠ¡å™¨æ—¶ï¼Œä¸æ”¶ä»¶äººçš„inboxçš„æ–‡ä»¶å¤¹ç›¸å…³è”ï¼Œæ”¶ä»¶äººåˆ™èƒ½å¤ŸæŠŠé‚®ä»¶è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ã€ç”¨æˆ·åˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸­ï¼Œé˜…è¯»é‚®ä»¶ã€åˆ é™¤é‚®ä»¶ç­‰</li><li>è¿˜æä¾›äº†åœ¨è¿œç¨‹æ–‡ä»¶å¤¹ä¸­æŸ¥è¯¢é‚®ä»¶çš„å‘½ä»¤</li><li>ç»´æŠ¤äº†IMAPä¼šè¯çš„ç”¨æˆ·çŠ¶æ€ä¿¡æ¯</li><li>ï¼ˆé‡è¦ï¼‰å…è®¸ç”¨æˆ·ä»£ç†è·å–æŠ¥æ–‡æŸäº›éƒ¨åˆ†çš„å‘½ä»¤</li></ol></li><li>HTTP<ol><li>åœ¨ä¸Šè¿°é€‰æ‹©å’Œè·å–çš„è¿‡ç¨‹é‡‡ç”¨çš„æ˜¯httpçš„åè®®</li><li>ä½†æ˜¯é‚®ä»¶ä¼ è¾“çš„è¿‡ç¨‹ä¸­ä»ç„¶é‡‡ç”¨çš„æ˜¯SMTPåè®®</li></ol></li></ol><h2 id="image-2022061819455651324-urlå’Œdns"><a class="markdownIt-Anchor" href="#image-2022061819455651324-urlå’Œdns"></a> <img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3cmxo698jj210c0a4jsm.jpg" alt="image-20220618194556513" />2.4 URLå’ŒDNS</h2><p>ä¸€ä»¶äº‹ç‰©é€šå¸¸å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ¥è¿›è¡Œæ ‡è¯†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å§“åæ¥æ ‡è¯†ï¼Œä¹Ÿå¯ä»¥é€šè¿‡èº«ä»½è¯æ¥æ ‡è¯†ã€ä¹Ÿå¯ä»¥é€šè¿‡ç¤¾ä¿è´¦å·æ¥æœ‰é™çš„ã€é€šè¿‡æŸä¸ªå­¦æ ¡çš„å­¦å·æ¥ç¡®å®šçš„è®¤è¯†ä¸€ä¸ªäººï¼Œåœ¨ä¸åŒçš„åœºæ™¯ä¸‹å¯ä»¥é‡‡ç”¨ä¸åŒçš„è¯†åˆ«æ–¹å¼ï¼Œå¯¹äºè®¡ç®—æœºç½‘ç»œä¸­çš„ä¸»æœºæœ‰å¤šç§æ–¹å¼</p><ol><li>ä¸»æœºåç§°ï¼ˆHost nameï¼‰ï¼Œwww.baidu.comç­‰ï¼Œä½†æ˜¯ä¸»æœºå‡ ä¹æ²¡å“Ÿæä¾›ä¸»æœºåœ¨å› ç‰¹ç½‘ä¸­çš„ä½ç½®ä¿¡æ¯</li><li>IPåœ°å€ï¼Œåˆ©ç”¨4å­—èŠ‚ç»„æˆï¼Œå…·æœ‰ä¸¥æ ¼çš„å±‚æ¬¡ç»“æ„ï¼Œè¿™é‡Œå°†åœ¨ç¬¬å››ç« ä¸­è¿›è¡Œè®¨è®º</li></ol><h3 id="241-dnsdomain-name-systemåŸŸåç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#241-dnsdomain-name-systemåŸŸåç³»ç»Ÿ"></a> 2.4.1 DNSï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰</h3><p>äººä»¬å®¹æ˜“è®°ä½ä¸»æœºåæ ‡è¯†æ–¹å¼ï¼Œä½†æ˜¯è·¯ç”±å™¨å–œæ¬¢å®šé•¿çš„ã€æœ‰ç€å±‚æ¬¡ç»“æ„çš„IPåœ°å€ï¼Œä¸ºäº†è¿™äº›ä¸åŒçš„åå¥½ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§å°†ä¸»æœºåç§°è½¬æ¢åˆ°IPåœ°å€çš„ç›®å½•æœåŠ¡ï¼Œè¿™å°±æ˜¯åŸŸåç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½</p><ol><li>ä¸€ä¸ªåˆ†å±‚çš„DNSæœåŠ¡å™¨å®ç°çš„åˆ†å¸ƒå¼æ•°æ®åº“</li><li>ä¸€ä¸ªæ˜¯çš„ä¸»æœºèƒ½å¤ŸæŸ¥è¯¢åˆ†å¸ƒå¼æ•°æ®åº“çš„é¢åº”ç”¨å±‚åè®®</li></ol><p>DNSæœåŠ¡å™¨é€šå¸¸æ˜¯è¿è¡ŒBINDï¼ˆBerkeley internet name domainï¼‰è½¯ä»¶çš„UNIXï¼Œä½¿ç”¨53ç«¯å£ï¼Œè€ƒè™‘å®ƒå¦‚ä½•ä½¿ç”¨ï¼Œå¯ä»¥è§‚å¯Ÿä¸€ä¸ªå®¢æˆ·ç«¯å‘é€URLè¯·æ±‚ä¼šå‘ç”Ÿä»€ä¹ˆæ ·çš„è¿‡ç¨‹ï¼š</p><ol><li>ç”¨æˆ·ä¸»æœºä¸Šè¿è¡ŒDNSåº”ç”¨çš„å®¢æˆ·ç«¯</li><li>æµè§ˆå™¨ä»ä¸Šè¿°URLä¸­æŠ½å–å‡ºä¸»æœºåï¼Œä¹Ÿå°±æ˜¯URLï¼Œä¼ é€’ç»™DNSåº”ç”¨çš„å®¢æˆ·ç«¯</li><li>DNSå®¢æˆ·ç«¯å‘DNSæœåŠ¡å™¨å‘é€åŒ…å«ä¸»æœºçš„è¯·æ±‚</li><li>è¿”å›ipåœ°å€çš„æŠ¥æ–‡</li><li>ä¸€æ—¦æµè§ˆå™¨æ²¡æ”¶åˆ°æ¥è‡ªDNSçš„IPåœ°å€ï¼Œå‘è¯¥IPåœ°å€çš„80ç«¯å£çš„HTTPæœåŠ¡å™¨è¿›ç¨‹å‘é€ä¸€ä¸ªTCPè¿æ¥</li></ol><p>é™¤è¿›è¡Œä¸»æœºåˆ°IPåœ°å€çš„è½¬æ¢ä¹‹å¤–è¿˜æä¾›æœåŠ¡</p><ol><li>ä¸»æœºååˆ°ipåœ°å€è½¬æ¢</li><li>ä¸»æœºåˆ«å host aliasing</li><li>é‚®ä»¶æœåŠ¡å™¨åˆ«å mail server aliasing</li><li>è´Ÿè½½åˆ†é… load distribution ç”¨äºåœ¨å†—ä½™çš„æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œè´Ÿè½½åˆ†é…ï¼Œç¹å¿™çš„ç«™ç‚¹è¢«å†—ä½™åˆ†å¸ƒåœ¨å¤šå°æœåŠ¡å™¨ä¸­ï¼Œæ¯å°æœåŠ¡å™¨å‡è¿è¡Œåœ¨ä¸åŒçš„ç«¯ç³»ç»Ÿé«˜ä¸Šï¼Œå› æ­¤ipåœ°å€é›†åˆå¯ä»¥ä¸åŒä¸€ä¸ªè§„èŒƒä¸»æœºåç›¸è”ç³»ã€‚ä¸€äº›å†…å®¹åˆ†å‘å…¬å¸ä¹Ÿä»¥æ›´åŠ å¤æ‚çš„æ–¹å¼ä½¿ç”¨DNSæ¥æä¾›webå†…å®¹åˆ†å‘</li></ol><h3 id="242-dnså·¥ä½œåŸç†æ¦‚è¿°"><a class="markdownIt-Anchor" href="#242-dnså·¥ä½œåŸç†æ¦‚è¿°"></a> 2.4.2 DNSå·¥ä½œåŸç†æ¦‚è¿°</h3><p>DNSå®¢æˆ·ç«¯ä½¿ç”¨gethostbyname() çš„æ–¹æ³•å¯ä»¥ç®€å•çš„å¾—åˆ°IPåœ°å€çš„æŠ¥æ–‡ï¼Œä½†æ˜¯å¯¹äºDNSå†…éƒ¨æœºç†å¤æ‚ï¼Œå› ä¸ºå®ƒæ˜¯ç”±åˆ†å¸ƒåœ¨å…¨çƒå¤§é‡çš„DNSæœåŠ¡å™¨ä»¥åŠå®šä¹‰DNSæœåŠ¡å™¨ä¸æŸ¥è¯¢ä¸»æœºé€šä¿¡æ–¹å¼çš„åº”ç”¨å±‚åè®®ç»„æˆ</p><p>å¦‚æœä¸€ä¸ªç½‘ç»œåªå­˜åœ¨ä¸€ä¸ªDNSæœåŠ¡å™¨</p><ol><li>å•ç‚¹æ•…éšœ a single point of failure</li><li>é€šä¿¡å®¹é‡ traffic volume</li><li>è¿œè·ç¦»çš„é›†ä¸­å¼æ•°æ®åº“ distant centralized database</li><li>ç»´æŠ¤ maintenanceï¼Œå› æ­¤éœ€è¦é‡‡ç”¨ä¸åŒå±‚æ¬¡æ–¹å¼ç»„ç»‡</li></ol><p>éœ€è¦åˆ†å¸ƒå¼ã€å±‚æ¬¡æ•°æ®åº“</p><ol><li>æ ¹DNS</li><li>é¡¶çº§åŸŸ Top Level Domain TLD</li><li>æƒå¨DNSæœåŠ¡å™¨</li><li>æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œè¿™ä¸ªç”±ISPæä¾›ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨é€šå¸¸ä½¿ç”¨DHCPä¸å…¶ä»–æœ¬åœ°DNSæœåŠ¡å™¨è¿æ¥ï¼Œåœ¨æœ¬æ¬¡ç½‘ç»œä¸­å¯èƒ½ä¸ç”¨æˆ·çš„æœåŠ¡å™¨ä¸´è¿‘ï¼Œèµ·åˆ°äº†ä»£ç†çš„ä½œç”¨</li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3cmxx687yj20u012bjtk.jpg" alt="image-20220618194611062" /></p><p>è¿™é‡Œä½¿ç”¨åˆ°äº†é€’å½’æŸ¥è¯¢ï¼ˆrecursive queryï¼‰å’Œè¿­ä»£æŸ¥è¯¢ï¼ˆiterative queryï¼‰ä¸¤ç§æ–¹å¼</p><aside> ğŸ’¡ DNSç¼“å­˜</aside><p>ä¸ºäº†æ”¹å–„æ—¶å»¶å’Œå‡å°‘äº’è”ç½‘ä¸Šçš„DNSæŠ¥æ–‡æ•°é‡ï¼Œå¹¿æ³›ä½¿ç”¨ç¼“å­˜çš„æ¦‚å¿µï¼Œä¸€èˆ¬æƒ…å†µä¸‹DNSæœåŠ¡å™¨åœ¨åŒä¸€æ®µæ—¶é—´å†…ä¼šä¸¢å¼ƒç¼“å­˜çš„ä¿¡æ¯ï¼Œè¿™æ ·ä¼šè®©çš„æ ¹æœåŠ¡å™¨æˆ–è€…TLDçš„æœåŠ¡å™¨è¢«ç»•è¿‡</p><aside> ğŸ’¡ DNSè®°å½•å’ŒæŠ¥æ–‡</aside><p>å…±åŒå®ç°äº†DNSåˆ†å¸ƒå¼æ•°æ®åº“çš„æ‰€æœ‰DNSæœåŠ¡å™¨å­˜å‚¨çš„èµ„æºè®°å½•ï¼Œåªæœ‰æŸ¥è¯¢å’Œå›ç­”æŠ¥æ–‡</p><h2 id="image-2022061819462503425-file-shareå’Œp2p"><a class="markdownIt-Anchor" href="#image-2022061819462503425-file-shareå’Œp2p"></a> <img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h3cmy5z76qj213i0ko768.jpg" alt="image-20220618194625034" />2.5 File Shareå’ŒP2P</h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæœ¬ç« æè¿°çš„åº”ç”¨åŒ…æ‹¬webã€ç”µå­é‚®ä»¶å’ŒDNSéƒ½é‡‡ç”¨äº†å®¢æˆ·-æœåŠ¡å™¨ä½“ç³»ç»“æ„ï¼Œæå¤§ä¾èµ–äºæ€»æ˜¯æ‰“å¼€çš„åŸºç¡€uè®¾æ–½æœåŠ¡å™¨ï¼Œä½¿ç”¨P2Pä½“ç³»ç»“æ„å¯¹äºæ€»æ˜¯æ‰“å¼€çš„åŸºç¡€è®¾ç½®è®¾æ–½æœåŠ¡å™¨æœ‰æœ€å°çš„ä¾èµ–ï¼Œä¸ä¹‹ç›¸åï¼Œæˆé—´æ­‡è¿æ¥çš„ä¸»æœºæ‰¹æ¬¡ç›´æ¥é€šä¿¡ï¼Œè¿™äº›å¯¹ç­‰æ–¹å¹¶ä¸ä¸ºæœåŠ¡æä¾›å•†ISPæ‰€æ‹¥æœ‰ï¼Œè€Œæ˜¯å—ç”¨æˆ·æ§åˆ¶çš„æ¡Œé¢è®¡ç®—æœºå’Œä¸ªäººè®¡ç®—æœº</p><p>æœ¬æ¬¡ç« èŠ‚å°†ç ”ç©¶ä¸€ä¸ªéå¸¸è‡ªç„¶çš„P2Påº”ç”¨ï¼Œå³ä»å•ä¸€æœåŠ¡å™¨å‘å¤§é‡å¯¹ç­‰æ–¹å‘é€å¤§æ–‡ä»¶ï¼Œè¿™é‡Œå¯èƒ½æ˜¯Linuxæ“ä½œç³»ç»Ÿï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯MP3éŸ³ä¹æ–‡ä»¶ç­‰ï¼Œåœ¨å®¢æˆ·-æœåŠ¡å™¨æ–‡ä»¶åˆ†å‘ä¸­ï¼Œè¯¥æœåŠ¡å™¨å¿…é¡»å‘æ¯ä¸ªå¯¹ç­‰æ–¹å‘é€è¯¥æ–‡ä»¶çš„å‰¯æœ¬ï¼ŒæœåŠ¡å™¨æ‰¿æ‹…äº†æå¤§çš„è´Ÿæ‹…ï¼Œå¹¶ä¸”æ¶ˆè€—äº†å¤§é‡çš„æœåŠ¡å™¨å¸¦å®½ï¼›åœ¨P2Pæ–‡ä»¶åˆ†å‘ä¸­ï¼Œæ¯ä¸ªå¯¹ç­‰æ–¹èƒ½å¤Ÿæ”¶åˆ°ä»»ä½•å…¶ä»–å¯¹ç­‰æ–¹é‡æ–°åˆ†å‘å·²ç»æ”¶åˆ°çš„è¯¥æ–‡ä»¶çš„ä»»ä½•éƒ¨åˆ†ï¼Œè€Œä»åœ¨åˆ†å‘è¿‡ç¨‹ä¸­ååŠ©è¯¥æœåŠ¡å™¨ï¼Œ2016å¹´ä¸­æœ€é‡è¦çš„æ˜¯BitTorrent</p><h3 id="251-p2pä½“ç³»ç»“æ„çš„æ‹“å±•æ€§"><a class="markdownIt-Anchor" href="#251-p2pä½“ç³»ç»“æ„çš„æ‹“å±•æ€§"></a> 2.5.1 P2Pä½“ç³»ç»“æ„çš„æ‹“å±•æ€§</h3><p>ä¸ºäº†å°†å®¢æˆ·-æœåŠ¡å™¨ä½“ç³»ç»“æ„ä¸P2Pä½“ç³»ç»“æ„è¿›è¡Œæ¯”è¾ƒï¼Œé˜è¿°P2Pçš„å†…åœ¨è‡ªæ‹“å±•æ€§ï¼Œæˆ‘ä»¬ç°åœ¨è€ƒè™‘ä¸€ä¸ªç”¨äºä¸¤ç§ä½“ç³»ç»“æ„ç±»å‹çš„ç®€å•å®šé‡æ¨¡å‹</p><h2 id="26-video-streamå’Œå†…å®¹åˆ†å‘ç½‘cdn"><a class="markdownIt-Anchor" href="#26-video-streamå’Œå†…å®¹åˆ†å‘ç½‘cdn"></a> 2.6 VIdeo Streamå’Œå†…å®¹åˆ†å‘ç½‘CDN</h2><p>åœ¨æœ¬èŠ‚æˆ‘ä»¬å°†å¯¹å¦‚ä½•åœ¨ä»Šå¤©çš„å› ç‰¹ç½‘å®ç°æµè¡Œçš„è§†é¢‘æµæœåŠ¡è¿›è¡Œæ¦‚è¿°ï¼Œå®ç°çš„æ–¹å¼æ˜¯é€šè¿‡åº”ç”¨å±‚åè®®å’Œåƒé«˜é€Ÿç¼“å­˜é‚£æ ·æ–¹å¼è¿è¡Œçš„æœåŠ¡å™¨ã€‚</p><h3 id="261-å› ç‰¹ç½‘è§†é¢‘"><a class="markdownIt-Anchor" href="#261-å› ç‰¹ç½‘è§†é¢‘"></a> 2.6.1 å› ç‰¹ç½‘è§†é¢‘</h3><p>videoæ˜¯ä¸€ç³»åˆ—çš„å›¾åƒï¼Œé€šå¸¸æ˜¯æŒ‰ç…§ä¸€ç§æ’å®šçš„é€Ÿç‡æ¥ï¼Œè¿™äº›æ˜¯é€šè¿‡åƒç´ é˜µåˆ—ç»„æˆï¼Œé€šè¿‡æ¯”ç‰¹ç¼–ç æ¥å®ç°äº®åº¦æˆ–è€…é¢œè‰²ï¼Œå› æ­¤æ¯”ç‰¹ç‡è¶Šé«˜ã€å›¾åƒè´¨é‡è¶Šå¥½ï¼Œç”¨æˆ·çš„æ€»ä½“è§†è§‰æ„Ÿå—è¶Šå¥½ï¼Œå› æ­¤è§†é¢‘ç½‘ç«™ä¹Ÿä¼šæ ¹æ®è§†é¢‘è®¾ç½®ä¸åŒæ¸…æ™°åº¦çš„ç‰ˆæœ¬</p><h3 id="262-httpæµå’Œdashdynamic-adaptive-streaming-over-http"><a class="markdownIt-Anchor" href="#262-httpæµå’Œdashdynamic-adaptive-streaming-over-http"></a> 2.6.2 HTTPæµå’ŒDASHï¼ˆdynamic adaptive streaming over HTTPï¼‰</h3><p>HTTPæµä¸­ï¼Œè§†é¢‘åªæ˜¯å­˜å‚¨åœ¨HTTPæœåŠ¡å™¨ä¸­ä½œä¸ºä¸€ä¸ªæ™®é€šçš„æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„URLï¼Œå½“ç”¨æˆ·æŸ¥çœ‹è¿™ä¸ªè§†é¢‘çš„æ—¶å€™ï¼Œå®¢æˆ·ä¸æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªTCPè¿æ¥å¹¶å‘é€å¯¹è¯¥URLçš„getè¯·æ±‚ï¼ŒæœåŠ¡å™¨åˆ™ä»¥åº•å±‚ç½‘ç»œåè®®å’Œæµé‡æ¡ä»¶å…è®¸çš„å°½å¯èƒ½å¿«çš„é€Ÿç‡ï¼Œå‘é€è§†é¢‘æ–‡ä»¶ï¼Œå¦ä¸€ç«¯å­—èŠ‚è¢«æ”¶é›†åˆ°å®¢æˆ·åº”ç”¨ç¼“å­˜ä¸­ï¼Œä¸€æ®µè¶…è¿‡é¢„å…ˆè®¾å®šçš„é—¨é™ï¼Œå®¢æˆ·åº”ç”¨ç¨‹åºå°±å¯ä»¥å¼€å§‹æ’­æ”¾</p><p>å¯¹äºç›¸åŒçš„å®¢æˆ·çš„ä¸åŒæ—¶é—´ä¹Ÿæœ‰å¯èƒ½å­˜åœ¨ä¸åŒçš„å¸¦å®½ï¼Œå› æ­¤éœ€è¦æ ¹æ®ä¸åŒæ—¶æ®µï¼Œè®¾è®¡ä¸åŒçš„æ¯”ç‰¹ç‡ï¼Œå¯¹åº”äºä¸åŒçš„è´¨é‡æ°´å¹³ï¼Œå®¢æˆ·åŠ¨æ€é€‰æ‹©æ¥è‡ªé«˜é€Ÿç‡ç‰ˆæœ¬çš„å¿«ï¼Œå½“å¯ç”¨å¸¦å®½é‡è¾ƒä½çš„æ—¶å€™ï¼Œå®¢æˆ·å¯ä»¥è‡ªç„¶é€‰æ‹©æ¥è‡ªä½é€Ÿç‡ç‰ˆæœ¬çš„å¿«</p><h3 id="263-å†…å®¹åˆ†å‘ç½‘-content-distribution-network"><a class="markdownIt-Anchor" href="#263-å†…å®¹åˆ†å‘ç½‘-content-distribution-network"></a> 2.6.3 å†…å®¹åˆ†å‘ç½‘ content distribution network</h3><p>å¯¹äºä¸€ä¸ªå› ç‰¹ç½‘è§†é¢‘å…¬å¸ï¼Œæœ€ç›´è§‚çš„æ˜¯å»ºç«‹å•ä¸€çš„å¤§è§„æ¨¡æ•°æ®ä¸­å¿ƒï¼Œåœ¨æ•°æ®ä¸­å¿ƒä¸­å­˜å‚¨æ‰€æœ‰çš„è§†é¢‘ï¼Œå¹¶ç›´æ¥ä»è¯¥æ•°æ®ä¸­å¿ƒå‘ä¸–ç•ŒèŒƒå›´çš„å®¢æˆ·ä¼ è¾“æµå¼è§†é¢‘ï¼Œä¼šå­˜åœ¨ä¸€äº›é—®é¢˜</p><ol><li>å¦‚æœå®¢æˆ·è¿œç¦»æ•°æ®ä¸­å¿ƒï¼ŒæœåŠ¡å™¨åˆ°å®¢æˆ·çš„åˆ†ç»„å°†è·¨è¶Šè®¸å¤šé€šä¿¡é“¾è·¯å¹¶è‚¯å‘¢ä¸ªç»è¿‡ä¸åŒçš„ISPï¼Œå¯¼è‡´çƒ¦äººçš„é€šä¿¡æ—¶å»¶</li><li>ç»è¿‡å¤šæ¡é“¾è·¯ä¼šæµªè´¹ç½‘ç»œå¸¦å®½</li><li>å•ä¸ªæ•°æ®ä¸­å¿ƒä»£è¡¨ç€å•ç‚¹æ•…éšœ</li></ol><h2 id="27-è¯¾åä¹ é¢˜"><a class="markdownIt-Anchor" href="#27-è¯¾åä¹ é¢˜"></a> 2.7 è¯¾åä¹ é¢˜</h2><p><a href="https://blog.51cto.com/rickyigoogle/1857294">è¯¾åä¹ é¢˜å’Œé—®é¢˜_ä¸å›å…±å‹‰çš„æŠ€æœ¯åšå®¢_51CTOåšå®¢</a></p><p><a href="https://blog.51cto.com/rickyigoogle/1857301">è¯¾åä¹ é¢˜å’Œé—®é¢˜ å¤ä¹ é¢˜ 2.2ï½2.5èŠ‚_ä¸å›å…±å‹‰çš„æŠ€æœ¯åšå®¢_51CTOåšå®¢</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">nslookup blog.tjdata.site<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ComputerNetwork</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å·¥ç§‘ç”Ÿç ”0çš„Macbook Air M1 13inchï¼ˆ16+256ï¼‰æ·±åº¦ä½¿ç”¨æ„Ÿå—</title>
    <link href="/posts/9148fb62.html"/>
    <url>/posts/9148fb62.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨æ·±åº¦ä½¿ç”¨M1ä¸€å¹´ä¹‹åï¼Œåœ¨å³å°†æ¯”å¦‚ç ”ç©¶ç”Ÿç”Ÿæ´»ä¹‹å‰ï¼Œä»‹ç»ä¸€æ¬¡Macã€‚åŒæ—¶ä¹Ÿä¼šç»“åˆè‡ªå·±çš„åä¸ºMate40proä»‹ç»macOS+ipadOS+harmonyOSåœ¨æ—¥å¸¸ä½¿ç”¨çš„ä¹ æƒ¯ï¼Œè¯´æ˜å¸¸ç”¨çš„è½¯ä»¶ã€ç¡¬ä»¶çš„é…ä»¶ã€æ–‡ä»¶ç®¡ç†å’ŒåŒæ­¥ä»¥åŠpasswordä»¥åŠGTDç®¡ç†ã€ç¯å¢ƒç®¡ç†ä¸­Linuxå’Œpythonç¯å¢ƒä»¥åŠGitä½¿ç”¨ç­‰ï¼Œä½œä¸ºä¸€æ¬¡Summary</p><p>æœ¬æ¬¡ä»‹ç»çš„ä¸»ä½“æ˜¯2020å¹´å‘å¸ƒçš„M1èŠ¯ç‰‡çš„Macï¼Œä¹Ÿç»å†äº†ç»“æ„æ›´è¿­ä¹‹è‹¦ï¼Œå½“ç„¶ä¸€å¹´ä¹‹åèƒ½çœ‹åˆ°ARMæ¶æ„çš„ä¼˜è¶Šæ€§ã€‚å…·ä½“è§„æ ¼é…ç½®å¦‚å›¾</p><p><a href="https://www.apple.com.cn/macbook-air-m1/specs/">MacBook Air (M1 èŠ¯ç‰‡æœºå‹) - æŠ€æœ¯è§„æ ¼</a></p><p>ã€å†™ä½œæ—¶é—´ã€‘2022å¹´6æœˆ12æ—¥</p><span id="more"></span><h1 id="01-software-management"><a class="markdownIt-Anchor" href="#01-software-management"></a> 01 Software management</h1><p>åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šè½¯ä»¶éƒ½æ²¡æœ‰å…¼å®¹M1ï¼Œå…¼å®¹M1çš„ç ´è§£ç‰ˆä¹Ÿå°‘çš„å¯æ€œ</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h35ebccppbj20u00xlmzq.jpg" alt="Software on Mac" /></p><p>å¸¸ç”¨çš„Macè½¯ä»¶ä¸‹è½½ç½‘ç«™ï¼š</p><p><a href="https://www.macwk.com/">MacWk - ç²¾å“macè½¯ä»¶ä¸‹è½½</a></p><h2 id="11-å¤„ç†ä¸åŒæ ¼å¼æ–‡ä»¶è½¯ä»¶"><a class="markdownIt-Anchor" href="#11-å¤„ç†ä¸åŒæ ¼å¼æ–‡ä»¶è½¯ä»¶"></a> 1.1 å¤„ç†ä¸åŒæ ¼å¼æ–‡ä»¶è½¯ä»¶</h2><p>Office ä¸‰ä»¶å¥—ï¼šdocxã€pptã€xlsx<br />WPS ï¼šåŒofficeï¼Œè™½ç„¶åŠŸèƒ½ä¼šå°‘ä¸€ç‚¹ï¼Œä½†æ˜¯å¸¦æ¥çš„æ˜¯æ€§èƒ½çš„æå‡<br />Typoraï¼šMarkdown<br />Sublime Textï¼šæ‰“å¼€ã€è½»ç¼–è¾‘ ã€codeã€‘ã€markdownã€latexï¼ˆå¿«ï¼‰<br />Skimï¼šæ‰“å¼€PDFæ–‡ä»¶ï¼Œæ­é…Sublime Textä½¿ç”¨ï¼ˆå¿«ï¼‰<br />PDF Expertï¼šç¼–è¾‘PDFæ–‡ä»¶<br />iMovieï¼šç¼–è¾‘è§†é¢‘æ–‡ä»¶<br />IINAï¼šè§†é¢‘æ’­æ”¾è½¯ä»¶ï¼ˆå¿«ï¼‰<br />Capture Oneï¼šä¿®å›¾è½¯ä»¶</p><h2 id="12-ç‰›åˆ€ç±»å·¥å…·"><a class="markdownIt-Anchor" href="#12-ç‰›åˆ€ç±»å·¥å…·"></a> 1.2 ç‰›åˆ€ç±»å·¥å…·</h2><p>Notionï¼šéå¸¸å¥½ç”¨çš„ç¬”è®°è½¯ä»¶<br />Zoteroï¼šæ–‡çŒ®ç®¡ç†è½¯ä»¶ï¼Œå¯ä»¥æ­é…notionä½¿ç”¨<br />Marginnote3 : é˜…è¯»PDFå’ŒçŸ¥è¯†ç®¡ç†è½¯ä»¶ï¼Œä¸å¤ªå¥½ç”¨<br />OmniGraffle ï¼š æµç¨‹å›¾ç»˜åˆ¶è½¯ä»¶ï¼ˆå¹³æ›¿ draw.ioç½‘ç«™ï¼‰<br />Xmindï¼šæ€ç»´å¯¼å›¾è½¯ä»¶ï¼Œæ­£åœ¨ç”¨çš„<br />Edgeï¼šå¾ˆä¸é”™çš„æµè§ˆå™¨<br />Axure RPï¼šåŸå‹è®¾è®¡è½¯ä»¶<br />Parallels Desktopï¼šè™šæ‹Ÿæœºç®¡ç†<br />Terminusï¼šç»ˆç«¯å¢å¼º</p><h2 id="13-æ¶¦ç‰©ç»†æ— å£°çš„å°å·¥å…·"><a class="markdownIt-Anchor" href="#13-æ¶¦ç‰©ç»†æ— å£°çš„å°å·¥å…·"></a> 1.3 æ¶¦ç‰©ç»†æ— å£°çš„å°å·¥å…·</h2><p>ClashXï¼šä»£ç†è½¯ä»¶ç®€ä»‹<br />Rectangleï¼šçª—å£ç®¡ç†<br />æ¬§è·¯è¯å…¸ï¼šæŸ¥å•è¯<br />iStatï¼šç¡¬ä»¶çŠ¶æ€<br />iPic Freeï¼šmarkdownçš„å›¾ç‰‡ä¸Šä¼ <br />Aldenteï¼šå……ç”µç®¡ç†<br />GifSkiï¼šå‹ç¼©ç”ŸæˆGIFæ–‡ä»¶<br />SVGviewï¼šæŸ¥çœ‹SVG<br />Hidden barï¼šçŠ¶æ€æ è®¾ç½®éšè—<br />iShotï¼šæˆªå›¾è½¯ä»¶ï¼Œå¯ä»¥é•¿æˆªå›¾å’Œæ ‡è®°ï¼ˆcommand shift 4/5å¯ä»¥æˆªå›¾å’Œå½•å±ï¼‰<br />Better Zipï¼šè§£å‹ç¼©æ–‡ä»¶<br />ClipborderManagementï¼šå‰ªè´´æ¿ç®¡ç†<br />åšæœäº‘+Nextcloudï¼šWebdavæ–‡ä»¶ç®¡ç†<br />cheetsheetï¼šå¿«æ·é”®æé†’<br />Monitor Controlï¼šç®¡ç†æ˜¾ç¤ºå™¨çš„äº®åº¦<br />Mail+Calendar+Reminder+Notes+Musicï¼šè‡ªå¸¦çš„è½¯ä»¶éƒ½éå¸¸é«˜</p><h2 id="14-å¨±ä¹ç±»å·¥å…·"><a class="markdownIt-Anchor" href="#14-å¨±ä¹ç±»å·¥å…·"></a> 1.4 å¨±ä¹ç±»å·¥å…·</h2><p>Bç«™å®¢æˆ·ç«¯<br />è…¾è®¯è§†é¢‘<br />è™šæ‹Ÿæœºå†…çš„æ¤ç‰©å¤§æˆ˜åƒµå°¸<br />å¾®ä¿¡-QQ<br />ç™¾åº¦ç½‘ç›˜+é˜¿é‡Œäº‘ç›˜</p><h1 id="02-hardware-management"><a class="markdownIt-Anchor" href="#02-hardware-management"></a> 02 Hardware management</h1><p>Anker Nano II 65Wå……ç”µå¤´</p><p>å°ç±³100wå¿«å……çº¿ï¼ˆ2mï¼‰</p><p>Belkinä¸ƒåˆä¸€æ‹“å±•å</p><p>ç½—æŠ€Master 2s</p><p>DP1.4ç»¿è”è½¬æ¥çº¿</p><p>è¥¿æ•°ç§»åŠ¨ç¡¬ç›˜*2T</p><p>åä¸ºåŸè£…TypeCè€³æœº</p><h1 id="03-file-management-and-workflow"><a class="markdownIt-Anchor" href="#03-file-management-and-workflow"></a> 03 File management and workflow</h1><h2 id="31-macæœ¬åœ°æ–‡ä»¶ç®¡ç†å’Œå¤‡ä»½"><a class="markdownIt-Anchor" href="#31-macæœ¬åœ°æ–‡ä»¶ç®¡ç†å’Œå¤‡ä»½"></a> 3.1 Macæœ¬åœ°æ–‡ä»¶ç®¡ç†å’Œå¤‡ä»½</h2><p>256Gçš„å›ºæ€ç¡¬ç›˜ç”¨èµ·æ¥æ¯”è¾ƒç€æ€¥ï¼Œå¥½åœ¨é€Ÿåº¦å¾ˆå¿«ï¼Œå…¨æ–° M1 MacBook Air çš„å›ºæ€ç¡¬ç›˜å†™å…¥é€Ÿåº¦ä¸º 2190 MB/sï¼Œè¯»å–é€Ÿåº¦ä¸º 2675 MB/sï¼›ç›¸æ¯”è¾ƒæ‰‹æœºçš„sfsçš„é€Ÿåº¦å¯å‘ç°è¯¥æœºè¿ç»­è¯»å–çº¦ä¸º 1966M/sï¼ŒæŒç»­å†™å…¥ 1280M/sï¼›ç›¸æ¯”è¾ƒUFS3.1é€šå¸¸ä¸º1200M/så’Œ800M/sï¼Œé€Ÿåº¦æ„Ÿè§‰éå¸¸ä¸é”™ã€‚</p><p>åœ¨æ—¥å¸¸ä½¿ç”¨çš„æ–‡ä»¶ä¸­ä¸»è¦åˆ†ä¸ºï¼š</p><ol><li>å¤§æ–‡ä»¶ï¼Œæ¯”å¦‚ä¸‹è½½çš„4Kç”µå½±ã€çˆ±æ­»æœºç³»åˆ—ç‰‡ç­‰ï¼Œè¿™ä¸€ç±»æ–‡ä»¶åœ¨ä½¿ç”¨ä¹‹åå¯ä»¥æ”¾åˆ°ç§»åŠ¨ç¡¬ç›˜ä½œä¸ºå­˜å‚¨ï¼Œæˆ–è€…ä¸Šä¼ åˆ°ç™¾åº¦ç½‘ç›˜</li><li>ä¸å¸¸ç”¨çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ä¸‹è½½çš„æ–‡ä»¶PDFã€ä¸‹è½½çš„PPTã€ä¸ç”¨çš„è¯¾ç¨‹PPTï¼Œè¿™ä¸€ç±»æ–‡ä»¶é€šå¸¸åœ¨ä¸€ä¸ªé˜¶æ®µç»“æŸä¹‹åå¯ä»¥å¤‡ä»½ï¼Œæ¯”å¦‚æ”¾åœ¨ç§»åŠ¨ç¡¬ç›˜æˆ–è€…æ”¾åˆ°ç™¾åº¦ç½‘ç›˜ä¸­</li><li>å°è€Œæ‚çš„æ–‡ä»¶ï¼Œä¸´æ—¶åšçš„pptã€ä¸‹è½½çš„é€šçŸ¥ï¼Œè¿™æ˜¯ç®¡ç†çš„é‡ç‚¹</li></ol><p>ç®¡ç†æ–¹æ³•Tag+Folderï¼š</p><p>ä½œä¸ºä¸€ä¸ªå¯¹macOSçš„çš„Finderçƒ­çˆ±çš„äººæ¥è¯´ï¼Œéå¸¸å–œæ¬¢æä¾›tagçš„é€‰é¡¹ï¼Œä½†æ˜¯å¸¸å¸¸åˆ©ç”¨Tagä¹Ÿä¼šè®©æˆ‘æ„Ÿåˆ°è‹¦æ¼ï¼Œå› ä¸ºä¼šå› ä¸ºä¸€ä¸ªæ–‡ä»¶æ»¡è¶³å¤šä¸ªtagè€Œä¸çŸ¥é“å¦‚ä½•åŒºåˆ†ï¼Œç„¶åæ–°å»ºä¸€ä¸ªTempæ–‡ä»¶å¤¹ï¼Œä¹…è€Œä¹…ä¹‹æ‰€æœ‰çš„æ–‡ä»¶éƒ½ä¼šè¢«æ”¾åˆ°è¿™ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ä¸­ã€‚å°±åœ¨è‹¦è‹¦æ€è€ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°å¤©ç„¶çš„æ— è®ºæ˜¯windowsè¿˜æ˜¯macOSéƒ½ç»™æˆ‘æä¾›å¥½äº†åº”è¯¥æœ‰çš„æ–¹æ³•Folderï¼ŒæŒ‰ç…§Documentã€Pictureã€Videoã€Downloadã€Desktopçš„æ–‡ä»¶å¤¹æ–¹å¼æ¥è¿›è¡Œåˆ†ç±»ï¼Œè¿™é‡Œçš„ç®¡ç†åŸåˆ™æ˜¯ï¼š</p><blockquote><p>é¦–å…ˆæŒ‰ç…§æ–‡ä»¶çš„æ—¶æ•ˆæ€§åŒºåˆ†å¼€ï¼š</p><ol><li>æ—¶æ•ˆè¾ƒçŸ­çš„ download desktop</li><li>æ—¶æ•ˆè¾ƒé•¿çš„ documentã€pictureã€video</li></ol><p>å†æ ¹æ®è‡ªå·±çš„Projectæ¥å¯¹ä¸åŒæ–‡ä»¶ç±»å‹çš„æ–‡ä»¶è¿›è¡Œæ ‡è®°Tagï¼Œæ–¹ä¾¿è‡ªå·±æŸ¥æ‰¾<br />Tagå­˜åœ¨çš„æ„ä¹‰æ˜¯è®©è‡ªå·±å®¹æ˜“æ‰¾åˆ°ä»–ï¼Œè€Œä¸æ˜¯åˆ†ç±»ï¼Œå› ä¸ºFolderå¤©ç„¶å…·æœ‰åˆ†ç±»çš„ä½œç”¨</p></blockquote><h2 id="32-åŸºäºwebdavçš„å¤šç«¯åŒæ­¥sync"><a class="markdownIt-Anchor" href="#32-åŸºäºwebdavçš„å¤šç«¯åŒæ­¥sync"></a> 3.2 åŸºäºWebdavçš„å¤šç«¯åŒæ­¥Sync</h2><p>ï¼ï¼macOS12è¿˜æ²¡æœ‰é€‚é…åšæœäº‘çš„äº‘æ¡¥æ¨¡å¼ï¼ï¼</p><p>ç½‘ç›˜é€šå¸¸å¯ä»¥åˆ†ä¸ºä¸¤ç§</p><ol><li>å¤§å®¹é‡ï¼Œä½œä¸ºèµ„æºåº“ä»…é™Appæ“ä½œçš„ï¼Œæ¯”å¦‚ç™¾åº¦ç½‘ç›˜ã€é˜¿é‡Œäº‘ç›˜ã€å¤¸å…‹äº‘ç›˜ç­‰</li><li>åŒæ­¥ç½‘ç›˜ï¼Œæ¯”å¦‚iCloudã€åšæœäº‘ã€DropBoxã€nextcloudã€one driveç­‰</li></ol><p>é’ˆå¯¹ç¬¬ä¸€ç§ç½‘ç›˜çº¯ç²¹å¯ä»¥å½“ä½œå¤‡ä»½ç›˜å¤„ç†ï¼Œè™½ç„¶ç™¾åº¦ç½‘ç›˜æ¨å‡ºåŒæ­¥ç©ºé—´ï¼Œä½“éªŒä¾æ—§éå¸¸ä¸å¥½ã€‚ç¬¬äºŒç§ç½‘ç›˜ä¸»è¦é’ˆå¯¹å†™ä½œåŠå…¬å’ŒåŒæ­¥ï¼Œå¦‚æœä½ æ˜¯iPhone+iPad+Macå½“ç„¶iCloudæ˜¯æœ€ä½³çš„é€‰æ‹©ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œåœ¨å›½å†…çš„ç¯å¢ƒä½¿ç”¨éå¸¸çš„èˆ’æœï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰åˆ™éœ€è¦æŒ‘é€‰ï¼Œä¸»è¦çš„é€‰æ‹©æœ‰ï¼š</p><ol><li>æ—¶ä¸æ—¶æŠ½é£çš„one drive</li><li>ä¼šå‘˜å½“é“çš„åšæœäº‘</li><li>è‡ªå»ºwebdavåè®®çš„nextcloud</li></ol><h3 id="321-ç¬¬ä¸€ç§one-drive"><a class="markdownIt-Anchor" href="#321-ç¬¬ä¸€ç§one-drive"></a> 3.2.1 ç¬¬ä¸€ç§one drive</h3><p>é€Ÿåº¦æœ‰æ—¶å€™è«åçš„å¿«ï¼Œæœ‰æ—¶å€™è«åçš„æ…¢ï¼Œä½¿ç”¨å¾ˆéš¾å—ã€‚åŒæ­¥å¿…é¡»åœ¨è‡ªå·±çš„ç”µè„‘ä¸­æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ä½œä¸ºåŒæ­¥ï¼Œä¸èƒ½å®ç°åŒæ­¥å…¶ä»–ä»»æ„æ–‡ä»¶å¤¹çš„åŠŸèƒ½ï¼Œæ¯”è¾ƒé¸¡è‚‹ã€‚ä½†æ˜¯å¯ä»¥é‡Šæ”¾æœ¬åœ°ç©ºé—´ï¼Œä»¥å¿«æ·æ–¹å¼ä¿å­˜åœ¨æœ¬åœ°ï¼ŒåŒæ—¶ä½œä¸ºå­¦ç”Ÿå¯ä»¥äº«å—è¶…å¤§å®¹é‡ã€‚</p><h3 id="322-ç¬¬äºŒç§-åšæœäº‘"><a class="markdownIt-Anchor" href="#322-ç¬¬äºŒç§-åšæœäº‘"></a> 3.2.2 ç¬¬äºŒç§ åšæœäº‘</h3><p>ç›®å‰å¼€äº†ä¸€å¹´çš„ä¼šå‘˜ï¼Œåœ¨å°è¯•å…¶ä¸­çš„ä½¿ç”¨æŠ€å·§ï¼Œåˆ©ç”¨åšæœäº‘æ¥æ„å»ºMac+iPad+Mate40proä¹‹é—´çš„æ–‡ä»¶å…±äº«ä½“ç³»ï¼ˆé‡ç‚¹ï¼åä¸ºå±…ç„¶å¯ä»¥å°†æ–‡ä»¶å¤¹æ”¾åœ¨æ¡Œé¢ï¼Œå¤ªå¥½ç”¨ï¼‰ï¼Œåœ¨å›½å†…çš„åŒæ­¥é€Ÿåº¦éå¸¸å¿«ï¼Œå¿«åˆ°çœ‹ä¸è§ã€‚ä½†æ˜¯ç›®å‰macOS12åº”è¯¥æ˜¯ä¸æ”¯æŒäº‘æ¡¥æ¨¡å¼çš„apiï¼Œä¹Ÿå°±æ˜¯æˆ‘æ–‡ä»¶éƒ½æ˜¯åŒæ­¥çš„ï¼Œè€Œä¸èƒ½é‡Šæ”¾æœ¬åœ°ç©ºé—´</p><h3 id="323-ç¬¬ä¸‰ç§-webdavåè®®è‡ªå»ºnextcloud"><a class="markdownIt-Anchor" href="#323-ç¬¬ä¸‰ç§-webdavåè®®è‡ªå»ºnextcloud"></a> 3.2.3 ç¬¬ä¸‰ç§ webdavåè®®è‡ªå»ºnextcloud</h3><p>å› ä¸ºæœ¬äººè‡ªå·±æœ‰ä¸€å°è…¾è®¯äº‘æœåŠ¡å™¨ï¼Œæ‰€ä»¥å°è¯•ä½¿ç”¨nextcloudæ„å»ºè‡ªå·±çš„äº‘ç›˜ï¼Œä½†æ˜¯å› ä¸ºåŠŸèƒ½æ¯”è¾ƒåˆçº§ï¼Œæƒ³è¦åœ¨Macç³»ç»Ÿä¸­é›†æˆéœ€è¦èµ°HTTPSåè®®ï¼Œæš‚æ—¶è¿˜æ²¡æœ‰æå¥½ï¼Œä½†æ˜¯webdavåè®®é™¤äº†å¯ä»¥ä¸‹è½½æ–‡ä»¶ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åŒæ­¥æ—¥å†ç­‰ï¼Œæ„å»ºmacOS+iPados+HarmonyOSçš„åŒæ­¥ï¼Œä½†æ˜¯ç›®å‰httpsåè®®è¿˜æ²¡æœ‰æå¥½ï¼ŒæœŸå¾…åé¢çš„ä½¿ç”¨</p><h2 id="33-passwordç®¡ç†"><a class="markdownIt-Anchor" href="#33-passwordç®¡ç†"></a> 3.3 Passwordç®¡ç†</h2><p>å¯†ç ç®¡ç†çš„é‡è¦æ€§ï¼Œæ— è®ºæ˜¯ä¸ªäººä¿¡æ¯ä¸­éœ€è¦çš„å¯†ç ç®¡ç†ï¼Œè¿˜æ˜¯æŒæ¡æœåŠ¡å™¨ä¸­çš„ä½¿ç”¨ï¼Œéƒ½éœ€è¦æŒæ¡è‰¯å¥½çš„ç±³é˜¿ä»¬</p><ul><li>æ‹–åº“:æ‹–åº“å°±æ˜¯æŒ‡é»‘å®¢é€šè¿‡å„ç§ç¤¾å·¥æ‰‹æ®µã€æŠ€æœ¯æ‰‹æ®µå°†æ•°æ®åº“ä¸­æ•æ„Ÿä¿¡æ¯éæ³•è·å–ï¼Œä¸€èˆ¬è¿™äº›æ•æ„Ÿä¿¡æ¯åŒ…æ‹¬ç”¨æˆ·çš„è´¦å·ä¿¡ æ¯å¦‚ç”¨æˆ·åã€å¯†ç ;èº«ä»½ä¿¡æ¯å¦‚çœŸå®å§“åã€è¯ä»¶å·ç ;é€šè®¯ä¿¡æ¯å¦‚ç”µå­é‚®ç®±ã€ç”µè¯ã€ä½å€ç­‰ã€‚</li><li>æ´—åº“:åœ¨æ‹–åº“åï¼Œå–å¾—å¤§é‡çš„ç”¨æˆ·æ•°æ®ä¹‹åï¼Œé»‘å®¢ä¼šé€šè¿‡ä¸€ç³»åˆ—çš„æŠ€æœ¯æ‰‹æ®µå’Œé»‘è‰²äº§ä¸šé“¾å°†æœ‰ä»·å€¼çš„ç”¨æˆ·æ•°æ®å˜ç°ã€‚</li><li>æ’åº“:æ’åº“æ˜¯é»‘å®¢é€šè¿‡æ”¶é›†äº’è”ç½‘å·²æ³„éœ²çš„ç”¨æˆ·å’Œå¯†ç ä¿¡æ¯ï¼Œç”Ÿæˆå¯¹åº”çš„å­—å…¸è¡¨ï¼Œå°è¯•æ‰¹é‡ç™»é™†å…¶ä»–ç½‘ç«™ åï¼Œå¾—åˆ°ä¸€ç³»åˆ—å¯ä»¥ç™»å½•çš„ç”¨æˆ·ã€‚å¾ˆå¤šç”¨æˆ·åœ¨ä¸åŒç½‘ç«™ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„å¸å·å¯†ç ï¼Œå› æ­¤é»‘å®¢å¯ä»¥é€šè¿‡è·å– ç”¨æˆ·åœ¨Aç½‘ç«™çš„è´¦æˆ·ä»è€Œå°è¯•ç™»å½•Bç½‘å€ï¼Œè¿™å°±å¯ä»¥ç†è§£ä¸ºæ’åº“æ”»å‡»ã€‚</li></ul><p>æ‰‹æœºå†…éƒ¨åä¸ºè‡ªå¸¦çš„å¯†ç ç®¡ç†å™¨çœŸçš„æ˜¯å¤ªå·®åŠ²äº†ï¼Œä¸ºäº†æ»¡è¶³å¤šç«¯åŒæ­¥çš„åŠŸèƒ½ï¼Œæ—¢ç„¶ç”¨ä¸äº†Appleçš„é’¥åŒ™ä¸²æœåŠ¡ï¼ŒGoogleå¯†ç åœ¨åä¸ºä¸­ç”¨ä¸äº†ï¼Œåªèƒ½ä½¿ç”¨å¾®è½¯çš„EDGEï¼Œç”µè„‘å’Œå¹³æ¿ç«¯ä½¿ç”¨æµè§ˆå™¨ï¼Œæ‰‹æœºç«¯å¼€å¯æµè§ˆå™¨å¤–éƒ¨å¡«å……åŠŸèƒ½ã€‚</p><p>å½“æ—¶å®é™…çš„å¯†ç æœ€å¥½è¿˜æ˜¯ç”¨å¤‡å¿˜å½•æˆ–è€…ç¬”è®°æœ¬è®°ä¸‹æ¥ï¼ï¼</p><h2 id="34-gtdç®¡ç†"><a class="markdownIt-Anchor" href="#34-gtdç®¡ç†"></a> 3.4 GTDç®¡ç†</h2><p>å®ƒçš„æ‰€æœ‰æ–¹æ³•éƒ½å›´ç»•ç€æŠŠæ‰€æœ‰äº‹æƒ…éƒ½ä»å¤§è„‘ä¸­å¼„å‡ºæ¥å¹¶ä½“ç³»åŒ–åœ°ç®¡ç†ï¼Œè®©äººä¸“æ³¨äºçœ¼å‰çš„å·¥ä½œï¼Œå®Œå…¨ä¿¡ä»»å¤–éƒ¨ä½“ç³»çš„äº‹åŠ¡ç®¡ç†ã€‚</p><p>å› æ­¤ï¼ŒGTDçš„æ–¹æ³•æœ€é€‚ç”¨ä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>äº‹åŠ¡ç¹æ‚ï¼Œå®¹æ˜“å¿˜è®°å’Œæ··æ·†</li><li>å®³æ€•å¿˜è®°ä»»åŠ¡è€Œåå¤å›æƒ³ï¼Œæµªè´¹æ—¶é—´é€ æˆå‹åŠ›</li><li>æ‚åŠ¡çº·æ‰°ï¼Œé‡è¦çš„äº‹å¸¸æ¥ä¸åŠåš</li></ul><p>é€šå¸¸ä½¿ç”¨reminderæ¥å°†éœ€è¦åšçš„äº‹æƒ…è®°å½•ä¸‹ï¼Œæ”¶é›†æ‰€æœ‰çš„äº‹æƒ…ï¼Œç„¶ååˆ’åˆ†åˆ°é•¿æœŸå’ŒçŸ­æœŸåº”ç”¨ï¼Œä¹‹ååœ¨æ—¥å†calendarä¸­è®°å½•å‡†ç¡®çš„äº‹æƒ…ï¼Œåœ¨åŒæ­¥è¿‡ç¨‹ä¸­ï¼Œä¾æ—§é‡‡ç”¨å¾®è½¯çš„outlooké‚®ç®±æ¥å®ç°å¤šç«¯åŒæ­¥ï¼Œæ‰‹æœºä¸Šéœ€è¦ä¸‹è½½ä¸€ä¸ªMicrosoft ToDoï¼Œå¾ˆç®€æ´ï¼</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h35e8ze3tbj20ji0p8gnf.jpg" alt="Untitled" /></p><h2 id="35-notesç®¡ç†"><a class="markdownIt-Anchor" href="#35-notesç®¡ç†"></a> 3.5 Notesç®¡ç†</h2><p>ç¬”è®°æ•´ç†ä¸­ï¼Œé€šå¸¸çš„æ¥æºåŒ…æ‹¬</p><ol><li>è®²åº§ã€ä¼šè®®ç­‰çš„ä¼šè®®è®°å½•å’Œæ€»ç»“</li><li>å¯¹äºè§†é¢‘ã€æ–‡æ¡£ã€è¯¾æœ¬çš„é˜…è¯»å’Œæ€»ç»“</li><li>ä¸ªäººåšå®¢</li><li>è‡ªå·±çš„ä»£ç ä»“åº“</li></ol><p>ç”±äºä½¿ç”¨ä¸åŒæ–‡ä»¶å°±è®©è‡ªå·±çš„ç¬”è®°æ•´ç†å›°éš¾ï¼Œå› æ­¤ä¸ªäººé€‰æ‹©çš„ALl in oneçš„Notionæ¥ç®¡ç†è‡ªå·±çš„ç¬”è®°ï¼Œä½œä¸ºä¸€ä¸ªåŸºäºWebçš„ç¬”è®°ç®¡ç†ï¼Œå¾ˆå¥½ç”¨ï¼Œä¸ªäººç¬”è®°çš„ç‰¹å¾ç®¡ç†é€‰æ‹©</p><ul><li><p>Area-user ï¼šç¬”è®°ä¸­ä¸»è¦åˆ†ä¸ºpersonï¼ˆè‡ªå·±çš„æ€è€ƒã€è‡ªå·±çš„æ•´ç†ã€è‡ªå·±çš„è¯»ä¹¦è®°å½•ï¼‰ï¼›æˆ–è€…æ˜¯schoolï¼ˆè¯¾é¢˜ç»„çš„é¡¹ç›®ã€è®²åº§ï¼‰ï¼›ä»¥åŠä¸€äº›ç¬¬ä¸‰æ–¹çš„ä¸œè¥¿ï¼Œæˆ‘æ˜¯å»studyï¼Œæˆ–è€…åšä¸€äº›record</p></li><li><p>Group-Tagï¼šç”¨äºåˆ†ç±»çš„ä¾æ®ï¼Œå°†è‡ªå·±çš„ç¬”è®°åˆ†ä¸ºå››ç§ï¼šLibraryï¼ˆä¸ªäººçš„æ±‡æ€»è¡¨ï¼‰ã€Postï¼ˆä¸€äº›å•ç‹¬çš„æ–‡ç« ï¼‰ã€Wikiï¼ˆå®Œæ•´çŸ¥è¯†ä½“ç³»ï¼Œå¸®åŠ©å­¦ä¹ ï¼‰ã€Logï¼ˆé¡¹ç›®çš„æ—¥å¿—ï¼‰</p></li><li><p>Nameï¼šè¯¥é¡µé¢çš„ä¸»è¦åç§°ï¼Œæ±‡æ€»è¡¨å»ºè®®å¸¦ä¸Šæ±‡æ€»ä¸¤å­—ã€seriesçš„è¯¾ç¨‹æˆ–è€…å¸Œæœ›å¯ä»¥å¸¦ä¸Š&lt;åç§°&gt;ä½œä¸ºæ ‡è¯†</p></li><li><p>Create Dateï¼šåˆ›å»ºæ—¥æœŸ</p></li><li><p>Resourceï¼š è¿™ä¸ªé¡µé¢çš„æ ¹æºæ˜¯ä»€ä¹ˆï¼ŒåŒ…æ‹¬ä¸ªäººçš„ç®¡ç†ç±»æˆ–è€…æ€è€ƒç±»ã€schoolçš„é¡¹ç›®æ—¥å¿—æˆ–ä¸€äº›æ‚äº‹ã€studyçš„è¯¾ç¨‹æˆ–æ–‡æ¡£</p></li><li><p>Areaï¼šéšä¾¿çš„ä¸€äº›tag</p></li></ul><h1 id="04-environment-management"><a class="markdownIt-Anchor" href="#04-environment-management"></a> 04 Environment management</h1><h2 id="41-homebrew-è½¯ä»¶åŒ…ç®¡ç†å·¥å…·"><a class="markdownIt-Anchor" href="#41-homebrew-è½¯ä»¶åŒ…ç®¡ç†å·¥å…·"></a> 4.1 Homebrew â€”è½¯ä»¶åŒ…ç®¡ç†å·¥å…·</h2><p><a href="https://brew.sh/index_zh-cn.html">Homebrew</a></p><p>Homebrewæ˜¯ä¸€æ¬¾macOSçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œé€šè¿‡å…¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„install or uninstallè½¯ä»¶å·¥å…·ï¼Œç±»ä¼¼ä¸Linuxä¸‹çš„apt-getã€nodeçš„npmç­‰åŒ…ç®¡ç†å·¥å…·ã€centosä¸‹çš„yumï¼Œä½¿ç”¨homebrewå¯ä»¥å®‰è£…ç³»ç»Ÿæ²¡æœ‰é¢„è£…çš„ä¸œè¥¿ï¼Œï¼ŒåŒæ—¶ä¼šå°†è½¯ä»¶åŒ…å®‰è£…åˆ°ç‹¬ç«‹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯localæ–‡ä»¶å¤¹ä¸‹é¢çš„homebrewè‡ªå·±å®‰è£…çš„æ–‡ä»¶ï¼Œç„¶åå†é€šè¿‡è½¯é“¾æ¥åˆ°usr/local</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">/<span class="hljs-built_in">bin</span>/bash -c <span class="hljs-string">&quot;$(curl -fsSL &lt;https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh&gt;)&quot;</span><br></code></pre></td></tr></table></figure><p>ï¼ˆå¯é€‰çš„ï¼Œå¦‚æœå¸Œæœ›å°†homebrewæ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">echo <span class="hljs-string">&#x27;eval &quot;$(/opt/homebrew/bin/brew shellenv)&quot;&#x27;</span> &gt;&gt; ~/.zprofile<br><span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;$(/opt/homebrew/bin/brew shellenv)&quot;</span><br></code></pre></td></tr></table></figure><p>å¸¸ç”¨çš„ä¸€äº›å‘½ä»¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">brew install åŒ…å<br>brew uninstall åŒ…å<br>brew upgrade åŒ…å<br><br>brew update<br>brew upgrade<br>brew outdated<br><br>// æŸ¥çœ‹Homebrewç‰ˆæœ¬<br>brew --version<br>brew <span class="hljs-built_in">list</span><br>brew home<br>brew info åŒ…å<br>brew doctor<br></code></pre></td></tr></table></figure><h2 id="42-mini-forge3-macosçš„conda"><a class="markdownIt-Anchor" href="#42-mini-forge3-macosçš„conda"></a> 4.2 Mini forge3 â€” macOSçš„conda</h2><ol><li>ä¸€ç§æ˜¯ä¸‹è½½shè„šæœ¬ï¼Œç„¶åè‡ªå·±å®‰è£…</li><li>ä½¿ç”¨homebrewå®‰è£…mini forge3</li></ol><p>Anacondaå’ŒMinicondaåˆ°ç°åœ¨éƒ½æ²¡æœ‰æä¾›M1å¤„ç†å™¨çš„condaç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨conda-forgeæä¾›miniforgeï¼Œç”¨æ¥æ”¯æŒApple Siliconçš„ç‰ˆæœ¬è½¯ä»¶</p><p>ä¸‹è½½è½¯ä»¶çš„åœ°å€</p><p><a href="https://github.com/conda-forge/miniforge/#download">GitHub - conda-forge/miniforge: A conda-forge distribution.</a></p><p>ä¸‹è½½å¥½mini forge3ä¸­å¯¹åº”çš„macOS+apple siliconçš„è„šæœ¬ï¼Œå‡è®¾ä¸‹è½½å’‹downloadæ–‡ä»¶å¤¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">cd download<br><br>// ä¹‹åå®‰è£…è„šæœ¬<br>// å‡å¦‚ä¹‹å‰å®‰è£…è¿‡ï¼Œå¯ä»¥é‡æ–°å¸è½½å†å®‰è£…<br>// å¸è½½çš„è„šæœ¬ <br>// rm -rf ~/miniforge3 <br>// rm -rf .conda <br>// rm -rf .condarc<br>// æ²¡æœ‰ä»¥ä¸Šå¯ä»¥ç•¥è¿‡<br>bash Miniforge3-MacOSX-arm64.sh<br></code></pre></td></tr></table></figure><p>å®Œæˆå®‰è£…ä¹‹åï¼Œéœ€è¦é‡æ–°æ¿€æ´»é…ç½®æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">source .zshrc<br></code></pre></td></tr></table></figure><p>å®Œæˆä¹‹åå¯ä»¥æµ‹è¯•condaæ˜¯å¦å®‰è£…å®Œæˆ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">conda --version<br></code></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨homebrewå®‰è£…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">brew install miniforge<br></code></pre></td></tr></table></figure><p>condaå¸¸è§å‘½ä»¤çš„ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python">// condaç¯å¢ƒçš„åˆ›å»ºã€æ¿€æ´»<br><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰condaç¯å¢ƒ</span><br>conda info -e<br><span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span><br>conda create -n env_name python=python_version<br>Eg:conda create -n py39 python=<span class="hljs-number">3.9</span><br><span class="hljs-comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><br>conda activate env_name<br>Eg: conda activate py39<br><span class="hljs-comment"># é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span><br>conda deactivate<br><br><span class="hljs-comment"># åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</span><br>conda remove -n env_name --<span class="hljs-built_in">all</span><br><br>// åŒ…çš„æŸ¥çœ‹ã€å®‰è£…ã€åˆ é™¤å’Œæ›´æ–°<br><span class="hljs-comment"># æŸ¥çœ‹ç¯å¢ƒä¸‹æ‰€æœ‰å®‰è£…çš„åŒ…</span><br>conda activate env_name<br>conda <span class="hljs-built_in">list</span><br><span class="hljs-comment"># æŸ¥çœ‹æ˜¯å¦å®‰è£…ç‰¹å®šçš„åŒ…</span><br>conda activate env_name<br>conda <span class="hljs-built_in">list</span> package_name<br><span class="hljs-comment"># å®‰è£…åŒ…</span><br>conda antivate env_name<br>conda insatall package_name<br><span class="hljs-comment"># åˆ é™¤åŒ…</span><br>conda antivate env_name<br>conda remove package_name <br><span class="hljs-comment"># æ›´æ–°åŒ…</span><br>conda antivate env_name<br>conda update package_name<br><br>// conda å®‰è£…æœ¬åœ°åŒ…<br><span class="hljs-comment"># è¿›å…¥åŒ…æ‰€åœ¨è·¯å¾„ cd /dè·¯å¾„</span><br>cd /dE:\\Download<br><span class="hljs-comment"># å®‰è£…åŒ… conda install --use-local åŒ…å</span><br>conda install --use-local pytorch-<span class="hljs-number">1.8</span><span class="hljs-number">.0</span>-py3<span class="hljs-number">.7</span>_cuda11<span class="hljs-number">.1</span>_cudnn8_0.tar.bz2<br><br>// condaæ¸…ç†ç¯å¢ƒ<br>conda clean -p<br>conda clean <br></code></pre></td></tr></table></figure><h2 id="43-git-ç‰ˆæœ¬æ§åˆ¶"><a class="markdownIt-Anchor" href="#43-git-ç‰ˆæœ¬æ§åˆ¶"></a> 4.3 Git â€” ç‰ˆæœ¬æ§åˆ¶</h2><h3 id="431-å¸¸è§æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#431-å¸¸è§æŒ‡ä»¤"></a> 4.3.1 å¸¸è§æŒ‡ä»¤</h3><p><a href="https://git-scm.com/book/zh/v2">Book</a></p><p><a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html">å¸¸ç”¨ Git å‘½ä»¤æ¸…å•</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python">// æ–°å»ºä»£ç åº“<br><span class="hljs-comment"># åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ª Git ä»£ç åº“</span><br>$ git init<br><span class="hljs-comment"># æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸º Git ä»£ç åº“</span><br>$ git init [project-name]<br><span class="hljs-comment"># ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²</span><br>$ git clone [url]<br><br>// é…ç½®gitï¼Œé…ç½®æ–‡ä»¶ä¸ºgitconfigï¼Œå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•<br><span class="hljs-comment"># æ˜¾ç¤ºå½“å‰çš„ Git é…ç½®</span><br>$ git config --<span class="hljs-built_in">list</span><br><span class="hljs-comment"># ç¼–è¾‘ Git é…ç½®æ–‡ä»¶</span><br>$ git config -e [--<span class="hljs-keyword">global</span>]<br><span class="hljs-comment"># è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯</span><br>$ git config [--<span class="hljs-keyword">global</span>] user.name <span class="hljs-string">&quot;[name]&quot;</span><br>$ git config [--<span class="hljs-keyword">global</span>] user.email <span class="hljs-string">&quot;[email address]&quot;</span><br><br>ç­‰ç­‰<br><br><span class="hljs-comment"># æ·»åŠ æ‰€æœ‰æ–‡ä»¶</span><br><br>git commit -m <span class="hljs-string">&#x27;[your message]&#x27;</span><br><span class="hljs-comment"># ä¸Šä¼ ï¼Œåº”è¯¥æ˜¯ä¸Šä¸€æ¬¡addçš„æ–‡ä»¶å¤¹çš„ä¿¡æ¯</span><br><br><br><span class="hljs-comment"># GitHubçš„æœ¬åœ°sshçš„è®¾ç½®</span><br><span class="hljs-comment"># GitHubçš„æœ¬åœ°</span><br><br>git config --<span class="hljs-keyword">global</span>  --<span class="hljs-built_in">list</span><br>git config --<span class="hljs-keyword">global</span>  user.name <span class="hljs-string">&quot;è¿™é‡Œæ¢ä¸Šä½ çš„ç”¨æˆ·å&quot;</span><br>git config --<span class="hljs-keyword">global</span> user.email <span class="hljs-string">&quot;è¿™é‡Œæ¢ä¸Šä½ çš„é‚®ç®±&quot;</span><br>ssh-keygen -t rsa -C <span class="hljs-string">&quot;è¿™é‡Œæ¢ä¸Šä½ çš„é‚®ç®±&quot;</span><br><span class="hljs-comment"># åç»­ç¡®è®¤å°±è¡Œï¼Œåœ¨GitHubä¸Šè¿›è¡ŒGUIçš„è®¾ç½®å°±OK</span><br>Settings -- SSH <span class="hljs-keyword">and</span> GPG keys<br><br><span class="hljs-comment"># ä¸ºdnfæ·»åŠ </span><br>sudo dnf config-manager --add-repo https://cli.github.com/packages/rpm/gh-cli.repo<br><span class="hljs-comment"># å®‰è£…å°±å¥½</span><br>dnf install gh<br><span class="hljs-comment"># ä¹‹åè®¤è¯</span><br>gh auto login<br><span class="hljs-comment"># æŒ‰ç…§è§„å®šè¾“å…¥é€‰æ‹©è¾“å…¥tokenå°±è¡Œäº†</span><br></code></pre></td></tr></table></figure><h3 id="432-git-pycharm-githubæ“ä½œ"><a class="markdownIt-Anchor" href="#432-git-pycharm-githubæ“ä½œ"></a> 4.3.2 Git - PyCharm - GitHubæ“ä½œ</h3><p>é¦–å…ˆå®‰è£…å¥½è‡ªå·±çš„gitï¼Œç„¶ååœ¨pycharmä¸­çš„version control systemä¸­ä¸ºå½“å‰çš„é¡¹ç›®æ„å»ºè‡ªå·±çš„gitåŒæ­¥ç›®å½•ï¼Œå…¶ä¸­çš„ gitæ¯æ¬¡çš„æ–‡ä»¶ä¼šå­˜å‚¨åœ¨ç›¸å¯¹åº”çš„.gitæ–‡ä»¶å¤¹çš„ç›®å½•ä¸‹ï¼Œæ‰€ä»¥ä¹Ÿä¼šå¯¼è‡´åœ¨æ¯æ¬¡æå–çš„è¿‡ç¨‹ä¼šé€æ¸å˜çš„è¶Šæ¥è¶Šå¤§ï¼ŒåŒæ—¶ä¸ºè‡ªå·±çš„GitHubè´¦æˆ·ä¸­çš„ä¸€äº›æ“ä½œ</p><ol><li><a href="http://chenxia31.github.io">chenxia31.github.io</a> ,ä¸»è¦æ˜¯ä¸ªäººblogçš„ä½¿ç”¨ï¼Œåœ¨å…¶ä¸­ä½¿ç”¨markdownæ¥æ’°å†™ç›¸å…³çš„æ¨æ–‡ï¼Œä½¿ç”¨hexo gã€hexo dï¼Œä»¥åŠGitHub pageæ¥ç®¡ç†åŸŸåæ¥å®Œæˆè‡ªå·±çš„å…¬å¼€</li><li>code_study_pratice è¿™ä¸ªæ˜¯è¿‡å»çš„ä¸€äº›æ“ä½œï¼Œè¿™é‡Œå°±åˆ é™¤ï¼Œç®—æ˜¯æœ€å¼€å§‹çš„algorithmçš„ä¸œè¥¿ï¼Œå› ä¸ºåå­—ä¸å¥½å¬ä»¥åå°±åˆ é™¤æ¥ï¼Œä¸ºå•¥ä¸æ¢ä¸ªåå­—ï¼Œç®—äº†æ¢ä¸€ä¸ªåå­—é‡æ–°å¼€å§‹</li><li>Mercuryè¿™é‡Œä»¥åå°±æ˜¯ä»£ç å­¦ä¹ çš„åœ°æ–¹ï¼Œä¸»è¦åˆ†ä¸ºBaseSkillï¼ˆæ¯”å¦‚pandasçš„æ“ä½œï¼‰ã€Courseï¼ˆæ¯”å¦‚CS229ã€CS61Aã€æå®æ¯…ä¹‹ç±»çš„ï¼‰ã€Kaggleï¼ˆå…¶ä¸­æ¯”èµ›çš„åç§°ï¼‰ã€Leetcdeï¼ˆåŒ…æ‹¬åŠ›æ‰£å®˜ç½‘çš„ï¼Œè¿˜æœ‰ä¸€äº›å…³äºç®—æ³•å¯¼è®ºä¸­ä¹ é¢˜çš„åˆ·ï¼‰ã€latexä¸­çš„ä¸€äº›æ¨¡ç‰ˆã€å¦‚æœæƒ³è¦æ›´è¿‘ä¸€æ­¥è¿˜éœ€è¦æœ‰å…¶ä»–ä»£ç è¯­è¨€æ¯”å¦‚webå¼€å‘ã€C++è¯­è¨€ç­‰å±äºSpecial Area</li></ol><h3 id="433-git-vscode-githubæ“ä½œ"><a class="markdownIt-Anchor" href="#433-git-vscode-githubæ“ä½œ"></a> 4.3.3 Git - VsCode - GitHubæ“ä½œ</h3><p>æš‚æ—¶ä¸éœ€è¦</p><h2 id="44-pythontensorflow-pytorch"><a class="markdownIt-Anchor" href="#44-pythontensorflow-pytorch"></a> 4.4 ï¼ˆPythonï¼‰Tensorflow + Pytorch</h2><p>2022-04-09 pytorchæš‚æ—¶æ²¡æœ‰æ”¯æŒGPUåŠ é€Ÿï¼Œä»…ä»…æ˜¯è®¨è®ºé˜¶æ®µï¼Œtensorflowå·²ç»æ”¯æŒGPUåŠ é€Ÿï¼Œä½¿ç”¨çš„æ˜¯appleæä¾›çš„metalçš„toolkit</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">conda install -c pytorch pytorch torchvision<br></code></pre></td></tr></table></figure><p><a href="https://developer.apple.com/metal/tensorflow-plugin/">Tensorflow Plugin - Metal - Apple Developer</a></p><p>åœ¨condaç®¡ç†ä¸­ï¼Œç›´æ¥ä½¿ç”¨homebrewå®‰è£…çš„miniforgeå¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œå¯ä»¥é€‰æ‹©ç¬¬ä¸€ç§ä¸‹è½½ä¹‹åæ‰‹åŠ¨å®‰è£…çš„æ–¹å¼æ¥ç®¡ç†</p><p>ä¹‹åæ˜¯æ–°å»ºä¸€ä¸ªcondaç¯å¢ƒï¼Œç„¶åactivateè¿›å»</p><p>åˆ©ç”¨condaå®‰è£…ç›¸å…³ä¾èµ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">// å¯ä»¥ç®¡ç†å®‰è£…çš„ç‰ˆæœ¬<br>conda install -c apple tensorflow-deps==<span class="hljs-number">2.6</span><span class="hljs-number">.0</span><br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨ç¯å¢ƒå†…ä½¿ç”¨pipå®‰è£…ç›¸å¯¹åº”çš„tensorflowå’Œæ’ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">// å®‰è£…<br>python -m pip install tensorflow-macos<br>python -m pip install tensorflow-metal<br><br>// å¦‚æœéœ€è¦å¸è½½ä¹‹åé‡æ–°å®‰è£…<br>python -m pip uninstall tensorflow-macos<br>python -m pip uninstall tensorflow-metal<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tensorflow.keras <span class="hljs-keyword">import</span> layers<br><span class="hljs-keyword">from</span> tensorflow.keras <span class="hljs-keyword">import</span> models<br>model = models.Sequential()<br>model.add(layers.Conv2D(<span class="hljs-number">32</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), activation=<span class="hljs-string">&#x27;relu&#x27;</span>, input_shape=(<span class="hljs-number">28</span>, <span class="hljs-number">28</span>, <span class="hljs-number">1</span>)))<br>model.add(layers.MaxPooling2D((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)))<br>model.add(layers.Conv2D(<span class="hljs-number">64</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), activation=<span class="hljs-string">&#x27;relu&#x27;</span>))<br>model.add(layers.MaxPooling2D((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)))<br>model.add(layers.Conv2D(<span class="hljs-number">64</span>, (<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), activation=<span class="hljs-string">&#x27;relu&#x27;</span>))<br>model.add(layers.Flatten())<br>model.add(layers.Dense(<span class="hljs-number">64</span>, activation=<span class="hljs-string">&#x27;relu&#x27;</span>))<br>model.add(layers.Dense(<span class="hljs-number">10</span>, activation=<span class="hljs-string">&#x27;softmax&#x27;</span>))<br>model.summary()<br><br><span class="hljs-keyword">from</span> tensorflow.keras.datasets <span class="hljs-keyword">import</span> mnist<br><span class="hljs-keyword">from</span> tensorflow.keras.utils <span class="hljs-keyword">import</span> to_categorical<br>(train_images, train_labels), (test_images, test_labels) = mnist.load_data()<br>train_images = train_images.reshape((<span class="hljs-number">60000</span>, <span class="hljs-number">28</span>, <span class="hljs-number">28</span>, <span class="hljs-number">1</span>))<br>train_images = train_images.astype(<span class="hljs-string">&#x27;float32&#x27;</span>) / <span class="hljs-number">255</span><br>test_images = test_images.reshape((<span class="hljs-number">10000</span>, <span class="hljs-number">28</span>, <span class="hljs-number">28</span>, <span class="hljs-number">1</span>))<br>test_images = test_images.astype(<span class="hljs-string">&#x27;float32&#x27;</span>) / <span class="hljs-number">255</span><br>train_labels = to_categorical(train_labels)<br>test_labels = to_categorical(test_labels)<br>model.<span class="hljs-built_in">compile</span>(optimizer=<span class="hljs-string">&#x27;rmsprop&#x27;</span>,<br>              loss=<span class="hljs-string">&#x27;categorical_crossentropy&#x27;</span>,<br>              metrics=[<span class="hljs-string">&#x27;accuracy&#x27;</span>])<br>model.fit(train_images, train_labels, epochs=<span class="hljs-number">5</span>, batch_size=<span class="hljs-number">64</span>)<br>test_loss, test_acc = model.evaluate(test_images, test_labels)<br>test_acc<br></code></pre></td></tr></table></figure><p><a href="https://zhuanlan.zhihu.com/p/408877901">https://zhuanlan.zhihu.com/p/408877901</a>)</p><h2 id="45-linuxä½¿ç”¨"><a class="markdownIt-Anchor" href="#45-linuxä½¿ç”¨"></a> 4.5 Linuxä½¿ç”¨</h2><p>Linux ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹</p><ul><li>å†…æ ¸çš„å¼•å¯¼<ul><li>BIOSå¼€æœºè‡ªæ£€ï¼ŒæŒ‰ç…§BIOSä¸­è®¾ç½®çš„å¯åŠ¨è®¾å¤‡æ¥å¯åŠ¨ï¼Œæ“ä½œç³»ç»Ÿæ¥ç®¡ç¡¬ä»¶ä¹‹åï¼Œé¦–å…ˆè¯»å…¥/bootç›®å½•ä¸‹çš„å†…æ ¸æ–‡ä»¶</li></ul></li><li>è¿è¡Œinit<ul><li>initæ˜¯ç³»ç»Ÿæ‰€æœ‰è¿›ç¨‹çš„èµ·ç‚¹ï¼Œé¦–å…ˆè¯»å–é…ç½®æ–‡ä»¶ /etc/inittab</li></ul></li><li>ç³»ç»Ÿåˆå§‹åŒ–</li><li>å»ºç«‹ç»ˆç«¯</li><li>ç”¨æˆ·ç™»é™†ç³»ç»Ÿ<ul><li>å‘½ä»¤è¡Œ</li><li>ssh</li><li>å›¾å½¢ç•Œé¢</li></ul></li></ul><p>Linux ç³»ç»Ÿç›®å½•ç»“æ„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span>ï¼šæŸ¥çœ‹æ–‡ä»¶ç›®å½•<br>å¸¸è§ç›®å½•çš„è§£é‡Šï¼š<br>/bin =binaries äºŒè¿›åˆ¶æ–‡ä»¶çš„ç¼©å†™ï¼Œè¿™ä¸ªç›®å½•å­˜æ”¾æœ€å¸¸ç”¨ä½¿ç”¨çš„æ˜æ—<br>/boot å­˜æ”¾å¯åŠ¨Linuxçš„æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶<br>/dev æ˜¯deviceçš„ç¼©å†™ï¼Œå­˜æ”¾çš„æ˜¯Linuxçš„å¤–éƒ¨è®¾å¤‡ï¼ŒLinuxä¸­é¥­æ˜‚é—®è®¾å¤‡å’Œè®¿é—®æ–‡ä»¶çš„æ–¹å¼æ˜¯ç›¸åŒçš„<br>/etc æ˜¯etceteraçš„ç¼©å†™ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•<br>/home ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•æ˜¯ç”¨ç”¨æˆ·çš„è´¦å·åç§°<br>/lib æ˜¯libraryï¼Œå­˜æ”¾åœ¨å’Œç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€é“¾æ¥åº“<br>/media ç³»ç»Ÿä¼šå°†è¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹<br>/mnt è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ°åˆ«çš„æ–‡ä»¶ç³»ç»Ÿ<br>/opt optionalï¼Œæ˜¯ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ï¼Œå¼„äººæ˜¯ç©ºçš„<br>/proc æ˜¯processesçš„ç¼©å†™ï¼Œæ˜¯è™šæ‹Ÿæ–‡ä»¶ä¸‹iç—›ï¼Œè¿™ä¸ªç›®å½•çš„nettingä¸å†ç¡¬ç›˜ä¸Šè€Œæ˜¯åœ¨å†…å­˜é‡Œé¢ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹é‡Œé¢çš„æ–‡ä»¶æ¥å±è”½å‘½ä»¤<br>/root ç³»ç»Ÿç®¡ç†å‘˜çš„ç”¨æˆ·ä¸»ç›®å½•<br>/sbin superuser binariesçš„ç¼©å†™ï¼Œå­˜æ”¾çš„é¢æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åº<br>/selinux æ˜¯centosç‰¹æœ‰çš„ç›®å½•ï¼Œç±»ä¼¼äºWindowsçš„é¢é˜²ç«å¢™<br>/usr unix shared resourcesçš„ç¼©å†™ï¼Œç”¨æˆ·çš„è®¸å¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶<br>/usr/bin ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åº<br>/usr/sbin <br>/usr/src å†…æ ¸æºä»£ç é»˜è®¤çš„å­˜æ”¾ç›®å½•<br></code></pre></td></tr></table></figure><p>Linuxç³»ç»Ÿæ˜¯ä¸€ç§å…¸å‹çš„å¤šç”¨æˆ·ç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·å¤„äºä¸åŒçš„åœ°ä½ï¼Œæ‹¥æœ‰ä¸åŒçš„æƒé™ï¼Œä¸ºæ¥ä¿æŠ¤ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼ŒLinuxç³»ç»Ÿå¯¹ä¸åŒçš„ç”¨æˆ·è®¿é—®ç›¸åŒçš„æ–‡ä»¶çš„æƒé™åšå‡ºäº†ä¸åŒçš„è§„å®šï¼Œåœ¨Linuxä¸­å¸¸ç”¨ä¸€ä¸‹ä¸¤ä¸ªå‘½ä»¤æ¥ä¿®æ”¹æ–‡ä»¶æˆ–è€…ç›®å½•æ‰€è¿°çš„ç”¨æˆ·ä¸æƒé™</p><ul><li>chownï¼ˆchange ownerï¼‰ä¿®æ”¹æ‰€å±çš„userå’Œgroup</li><li>chmodï¼ˆchange modeï¼‰ä¿®æ”¹ç”¨æˆ·çš„æƒé™</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">ll æˆ–è€…ls<span class="hljs-operator">-</span>l<br>æ¥æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„å±æ€§ä»¥åŠæ–‡ä»¶æ‰€å±äºçš„<span class="hljs-keyword">user</span>å’Œ<span class="hljs-keyword">group</span><br></code></pre></td></tr></table></figure><p>Linux æ–‡ä»¶å’Œç›®å½•ç®¡ç†</p><p>Linuxçš„ç›®å½•ç»“æ„ä¸ºtreeç»“æ„ï¼Œæœ€é¡¶çº§çš„ç›®å½•ä¸ºæ ¹ç›®å½•ï¼Œå…¶ä»–ç›®å½•é€šè¿‡æŒ‚è½½å¯ä»¥æ·»åŠ åˆ°treeä¸­ï¼Œé€šè¿‡è§£é™¤æŒ‚è½½å¯ä»¥ç§»é™¤ä»–ä»¬ï¼Œé¦–å…ˆåŒºåˆ†ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„</p><ul><li>ç»å¯¹è·¯å¾„ /usr/share/doc</li><li>ç›¸å¯¹è·¯å¾„ â€¦/man</li></ul><p>å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">lsï¼šlist file åˆ—å‡ºç›®å½•åŠæ–‡ä»¶å<br>cdï¼šchange directory åˆ‡æ¢ç›®å½•<br>pwdï¼šä½©å†…å¡” work directory æ˜¾ç¤ºç›®å‰çš„ç›®å½•<br>mkdirï¼šmake directory åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•<br>rmdirï¼šremove directory åˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½•<br>cpï¼š<span class="hljs-keyword">copy</span> fileå¤åˆ¶æ–‡ä»¶<br>rmï¼šremoveåˆ é™¤æ–‡ä»¶æˆ–è€…ç›®å½•<br>mvï¼šmove file ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•<br>man ã€commandã€‘æ¥æŸ¥çœ‹ä½¿ç”¨æ–‡æ¡£<br></code></pre></td></tr></table></figure><p>Linuxçš„æ–‡ä»¶å†…å®¹æŸ¥çœ‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡æœ¬å†…å®¹<br>tac ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤º<br>nl æ˜¾ç¤ºçš„æ—¶å€™è¾“å‡ºè¡Œå·<br>more ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºå†…å®¹<br>less å¯ä»¥<br>head å‰å‡ è¡Œ<br>tail åªçœ‹åå‡ è¡Œ<br></code></pre></td></tr></table></figure><p>Linuxçš„è¿æ¥linkçš„æ¦‚å¿µï¼Œä¸€ç§æ˜¯ç¡¬è¿æ¥ï¼Œå¦å¤–ä¸€ç§æ˜¯ç¬¦å·è¿æ¥</p><ul><li>hard link é€šè¿‡ç´¢å¼•ç•Œé¢çš„æ¥è¿æ¥ï¼Œä¿å­˜åœ¨ç£ç›˜åˆ†åŒºæ±‡æ€»çš„æ–‡ä»¶ä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹éƒ½ç»™å®ƒåˆ†é…ä¸€ä¸ªç¼–å·æˆä¸ºinode indexï¼Œåœ¨Linuxæ±‡æ€»å¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ä¸ªç´¢å¼•å±Šç”µè§†å­˜åœ¨çš„ï¼Œç¡¬è¿æ¥å…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªæœ‰æ•ˆçš„æ–‡ä»¶å</li><li>symbolic linkï¼šç±»ä¼¼äºå¿«æ·æ–¹å¼</li></ul><p>Linux ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†</p><p>Linuxç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·éƒ½å¿…é¡»é¦–å…ˆå‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åç”¨è´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿ</p><p>ç”¨æˆ·çš„è´¦å·ä¸€æ–¹é¢å¯ä»¥å¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å¯¹ä½¿ç”¨ç³»ç»Ÿå¾—åˆ°ç”¨æˆ·è¿›è¡Œè·Ÿè¸ªå¹¶æ§åˆ¶ä»–ä»¬å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·ç»„ç»‡æ–‡ä»¶ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›å®‰å…¨æ€§é˜²æŠ¤</p><p>å®ç°ç”¨æˆ·è´¦å·çš„ç®¡ç†ï¼Œè¦å®Œæˆçš„å·¥ä½œä¸»è¦æœ‰å‡ ä¸ªæ–¹é¢</p><ul><li>ç”¨æˆ·è´¦å·çš„æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹</li><li>ç”¨æˆ·å£ä»¤çš„ç®¡ç†</li><li>ç”¨æˆ·ç»„çš„ç®¡ç†</li></ul><p>Linuxç£ç›˜ç®¡ç†å¥½åç›´æ¥å…³ç³»åˆ°æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜</p><p>Linuxç£ç›˜ç®¡ç†å¸¸ç”¨çš„å‘½ä»¤ä¸ºdfã€duã€fidsk</p><ul><li>disk fullï¼ˆdfï¼‰</li><li>disk usedï¼ˆduï¼‰</li><li>fdisk ç”¨äºç£ç›˜åˆ†åŒº</li></ul><p>æˆ‘çš„baseç¯å¢ƒæ˜¯æˆ‘ä¹‹å‰ç”¨çš„</p><p>é¦–å…ˆå®‰è£…anacondaï¼š</p><p>wget -P /tmp <a href="https://repo.anaconda.com/archive/Anaconda3-2021.11-Linux-x86_64.sh">https://repo.anaconda.com/archive/Anaconda3-2021.11-Linux-x86_64.sh</a></p><p>wgetæ˜¯å·¥å…·çš„åç§°ï¼Œåé¢çš„ğŸ”—æ˜¯å¯¹åº”çš„ä¸‹è½½åœ°è½´</p><p>åé¢çš„/tmpæ˜¯è®©ä¸‹è½½æ–‡ä»¶å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢</p><p>å¸¸è§çš„command</p><p>yum yellow dog update modified æ˜¯ä¸€ä¸ªåœ¨fedoraå’Œredhatä»¥åŠsuseçš„shellå‰ç«¯è½¯çœ‹åŒ…ç®¡ç†å™¨ï¼ŒåŸºäºRPMåŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰ä¾èµ–è½¯ä»¶åŒ…ï¼Œæ— é¡»ç¹çå¯¹çš„ä¸€æ¬¡æ¬¡ä¸‹è½½</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql">grammar <span class="hljs-keyword">of</span> yumï¼š<br>yum ã€optionã€‘ ã€commandã€‘<br><span class="hljs-operator">*</span> option å¯é€‰ï¼ŒåŒ…æ‹¬<span class="hljs-operator">-</span>hï¼ˆhelpï¼‰ <span class="hljs-operator">-</span>yï¼ˆyesï¼‰ <span class="hljs-operator">-</span>qï¼ˆä¸æ˜¾ç¤ºå®‰è£…è¿‡ç¨‹ï¼‰<br><span class="hljs-operator">*</span> command è¦è¿›è¡Œçš„æ“ä½œ<br><span class="hljs-operator">*</span> package å®‰è£…çš„åŒ…å<br><br>å¸¸è§çš„å‘½ä»¤ï¼š<br><span class="hljs-keyword">check</span><span class="hljs-operator">-</span><span class="hljs-keyword">update</span><br><span class="hljs-keyword">update</span><br>install <span class="hljs-operator">&lt;</span>package<span class="hljs-operator">-</span>name<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">update</span> <span class="hljs-operator">&lt;</span>package <span class="hljs-operator">-</span>name<span class="hljs-operator">&gt;</span><br>yum list<br>yum remove <span class="hljs-operator">&lt;</span>package <span class="hljs-operator">-</span>name<span class="hljs-operator">&gt;</span><br>yum <span class="hljs-keyword">search</span> <span class="hljs-operator">&lt;</span>keyword<span class="hljs-operator">&gt;</span><br>yum clean packages<br>yum clean headers<br>yum clean oldheaders<br></code></pre></td></tr></table></figure><p>apt (advanced packageing tool æ˜¯ä¸€ä¸ªåœ¨debianå’Œubuntuç»ˆç«¯é¢shellå‰ç«¯è½¯ä»¶æŒ‚ä½ äº†å·¥å…·</p><p>åˆ©ç”¨bash Anaconda3-2021.11-Linux-x86_64.s h æ¥å®‰è£…å¯¹åº”çš„æ–‡ä»¶</p><p>å®‰è£…çš„ä½ç½®ä¼šé»˜è®¤åœ¨root/anacondaçš„ç›®å½•ä¸‹é¢</p><p>ä»yumå®‰è£…dnf</p><h2 id="46-dockerä½¿ç”¨"><a class="markdownIt-Anchor" href="#46-dockerä½¿ç”¨"></a> 4.6 Dockerä½¿ç”¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java">yum list installed | grep docker<br><br>å¸è½½å®‰è£…<br>yum -y remove docker-ce-cli.x86_64<br>yum -y remove docker-ce.x86_64<br>yum -y remove containerd.io<br><br>å®‰è£…ä¾èµ–<br>yum install -y yum-utils device-mapper-persistent-data lvm2<br>å®‰è£…yumåœ†å¤´<br><br>yum-config-manager --add-repo &lt;https:<span class="hljs-comment">//mirrors.cloud.tencent.com/docker-ce/linux/centos/docker-ce.repo&gt;</span><br><br>å®‰è£…Docker<br><br>yum install -y docker-ce docker-ce-cli containerd.io<br><br>docker version<br></code></pre></td></tr></table></figure><p>å¯åŠ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">systemctl start docker<br><br>è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨<br>systemctl enable docker<br><br>æŸ¥çœ‹è¿è¡ŒçŠ¶æ€<br></code></pre></td></tr></table></figure><p>é…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">mkdir -p /etc/docker<br><br><span class="hljs-comment">//é…ç½®åŠ é€Ÿ</span><br>tee /etc/docker/daemon.json &lt;&lt;-<span class="hljs-string">&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;&lt;https://mirror.ccs.tencentyun.com&gt;&quot;</span>]<br>&#125;<br>EOF<br><br><span class="hljs-comment">// é‡å¯å®ˆæŠ¤è¿›ç¨‹å¹¶é‡å¯docker</span><br>systemctl daemon-reload &amp;&amp; systemctl restart docker<br></code></pre></td></tr></table></figure><p>è¿è¡Œç¬¬ä¸€ä¸ªå®¹å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">docker run --name=hello hello-world<br><br>æŸ¥çœ‹<br>docker ps -a<br></code></pre></td></tr></table></figure><p>æˆ–è€…ä¸€æ­¥ä¸€æ­¥è¿è¡Œä¸€ä¸ªå®¹å™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java">docker pull johngong/calibre-web<br><br>æŸ¥çœ‹ç°æœ‰<br>docker images<br><br>æ ¹æ®åˆ›å»ºé•œåƒ <br>docker create --name=calibre-web -p <span class="hljs-number">80</span>:<span class="hljs-number">8083</span> -v /data/calibre-web/library:/library -e WEBLANGUAGE=zh_CN johngong/calibre-web<br><br>docker create æ˜¯åˆ›å»ºå®¹å™¨çš„å‘½ä»¤<br>--name=calibre-web è¡¨ç¤ºåˆ›å»ºçš„å®¹å™¨çš„åç§°<br>-p <span class="hljs-number">80</span>:<span class="hljs-number">8083</span> è¡¨ç¤ºè¯¥å®¹å™¨å°† <span class="hljs-number">80</span> ç«¯å£æ˜ å°„åˆ° <span class="hljs-number">8083</span> ç«¯å£<br>-v /data/calibre-web/librery:/libray è¡¨ç¤ºè¯¥å®¹å™¨å°† /data/calibre-web/library ç›®å½•æ˜ å°„ä¸º /library ç›®å½•<br>-e WEBLANGUAGE=zh_CN è¡¨ç¤ºè¯¥å®¹å™¨å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œå˜é‡åæ˜¯ WEBLANGUAGEï¼Œå˜é‡å€¼æ˜¯ zh_CN<br>johngong/calibre-web æ˜¯å®¹å™¨çš„é•œåƒï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å‰é¢æ‹‰å–çš„é•œåƒ<br><br>å¯åŠ¨åˆšæ‰åˆ›å»ºå¥½çš„é•œåƒ<br><br>docker start calibre-web<br></code></pre></td></tr></table></figure><p>åœæ­¢é•œåƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java">docker stop calibre-web<br><br>æˆ–è€…<br><br>docker kill calibre-web<br><br>åˆ é™¤å®¹å™¨<br>docker rm calibre-web<br><br>docker rmi hello-world<br><br>docker rmi `docker images -q`åˆ é™¤æ‰€æœ‰<br></code></pre></td></tr></table></figure><p>Dockeréƒ¨ç½²python ç½‘ç«™</p><ul><li>å®‰è£…Dockerè™šæ‹Ÿæœºç¯å¢ƒ</li><li>å­¦ä¹ dockeå¸¸ç”¨å‘½ä»¤</li><li>å®‰è£…Python SDKå’ŒMySQLé•œåƒ</li><li>ä¸ºFlaskæ·»åŠ SQL Alchemyæ‹“å±•åº“</li></ul><p>ä¸ºä»€ä¹ˆè¦Docker?è™šæ‹ŸåŒ–ç¯å¢ƒçš„é‡è¦æ€§</p><ol><li>ç›´æ¥ç¨‹åºå®‰è£…æˆ–è€…éƒ¨ç½²åœ¨Linuxæ“ä½œç³»ç»Ÿä¸Šé¢ï¼Œå®¹æ˜“å¼•å‘èµ„æºå†²çª</li><li>ç¨‹åºå¸è½½ä¸å¹²å‡€ï¼Œå¯¼è‡´æ— æ³•å®‰è£…æˆ–è€…éƒ¨ç½²æ–°ç¨‹åº</li><li>æ¯æ¬¡éƒ¨ç½²ä¹‹å‰è¦å®‰è£…å¾ˆå¤šè½¯ä»¶ï¼Œä¿®æ”¹å¤æ‚çš„é…ç½®æ–‡ä»¶</li><li>æ— æ³•è®©æœåŠ¡å™¨ç¡¬ä»¶èµ„æºå®ç°å¤šç§Ÿæˆ·æœåŠ¡</li><li>å¢å¤§äº†åœ¨Linuxç³»ç»Ÿä¸Šéƒ¨ç½²é›†ç¾¤å’Œåˆ†å¸ƒå¼çš„éš¾åº¦</li></ol><p>åœ¨Linuxä¸Šå®‰è£…dockerï¼Œäº†è§£docker hubçš„</p><p>è®¾ç½®dockerhubçš„åŠ é€Ÿå™¨DaoCloud</p><p>äº†è§£Dockeré•œåƒä¸å®¹å™¨çš„å…³ç³»ï¼Œäº†è§£é•œåƒå’Œå®¹å™¨ä¹‹é—´çš„å…³ç³»ï¼Œå­¦ä¹ å¸¸ç”¨çš„dockerå‘½ä»¤</p><p>ä»€ä¹ˆæ˜¯dockeré•œåƒï¼Ÿ</p><p>ä¸ºäº†å¿«é€Ÿæ‰“åŒ…å’Œéƒ¨ç½²è½¯ä»¶ç¯å¢ƒï¼Œdockerå¼•å…¥imageæœºåˆ¶</p><p>é•œåƒæ˜¯ä¸€ä¸ªé…ç½®å¥½çš„åªè¯»å±‚è½¯ä»¶ç¯å¢ƒ</p><p>å¯ä»¥é€šè¿‡dockerfileæ–‡ä»¶åˆ›å»ºé•œåƒï¼Œä¹Ÿå¯ä»¥ä»dockerä»“åº“ä¸­ä¸‹è½½åˆ°é•œåƒä¸­</p><p>ä»€ä¹ˆæ˜¯dockerå®¹å™¨</p><p>å®¹å™¨æ˜¯åœ¨é•œåƒåŸºç¡€ä¸Šåˆ›å»ºå‡ºçš„è™šæ‹Ÿå®ä¾‹ï¼Œå†…å®¹å¯è¯»å¯å†™</p><p>ä¸€ä¸ªdocker image å¯ä»¥åˆ›å»ºå¤šä¸ªcontainerï¼Œè€Œä¸”containerä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œéƒ¨ç½²çš„ç¨‹åºä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°ï¼Œæ‰€æœ‰çš„å®¹å™¨ç›´æ¥ä½¿ç”¨å®¿ä¸»çš„ä¸»æœºçš„Linuxå†…æ ¸</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h35ej6gi2lj20yw0kewgs.jpg" alt="image-20220612133616568" /></p><p>docker run -it â€”name=p1 python:3.8 bash</p><p>docker ä¼šä¸ºæ¯ä¸ªå®¹å™¨åˆ›å»ºç½‘å€</p><p>å­¦ä¹ dockerç½‘ç»œï¼Œdockerçš„å®¹å™¨ç«¯å£æ˜ å°„ï¼Œç›®å½•æŒ‚è½½æŠ€æœ¯ï¼ŒFTPç¨‹åºæ¥ç®¡ç†æ–‡ä»¶ï¼Œå¯ä»¥å°†å®¿ä¸»æœºæŒ‚è½½åœ¨ç›®å½•æŒ‚è½½</p><p>docker network create â€”subnet=172.18.0.0/16 mynet</p><p>ç½‘æ®µçš„ip</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir">docker network create --subnet=<span class="hljs-number">172.18</span>.<span class="hljs-number">0.0</span>/<span class="hljs-number">16</span> mynet<br>docker network rm mynet<br>docker run -it --name=p2 --net mynet --ip <span class="hljs-number">172.18</span>.<span class="hljs-number">0.2</span> <span class="hljs-symbol">python:</span><span class="hljs-number">3.8</span> bash<br></code></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤æ¥å®¿ä¸»æœºä¹‹å¤–ï¼Œä»»ä½•ä¸»æœºæ— æ³•è®¿é—®è¿œç¨‹è®¿é—®çš„dockerå®¹å™¨ï¼Œé€šè¿‡ç«¯å£æ˜ å°„å¯ä»¥æŠŠå®¹å™¨ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£ï¼Œè¿™æ ·å…¶ä»–çš„ä¸»æœºå°±èƒ½è®¿é—®å®¹å™¨æ¥ï¼Œæ˜ å°„åˆ°å®¿ä¸»æœºçš„ç«¯å£ï¼Œä¸éœ€è¦è®¾ç½®é˜²ç«å¢™è§„åˆ™</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">docker run -it -<span class="hljs-symbol">p9500:</span><span class="hljs-number">5000</span> -<span class="hljs-symbol">p9600:</span><span class="hljs-number">3306</span> <span class="hljs-symbol">python3.8:</span>bash<br></code></pre></td></tr></table></figure><p>ä¸ºèƒ½æŠŠä¸€éƒ¨åˆ†ä¸šåŠ¡æ•°æ®ä¿å­˜åœ¨dockerç¯å¢ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨ftpï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç›®å½•æ˜ å°„ã€‚å› ä¸ºftpä¼šå¯¼è‡´æ–‡ä»¶åˆ é™¤ï¼Œåªæ”¯æŒæ–‡ä»¶ç›®å½•æŒ‚è½½ï¼Œä¸æ”¯æŒæ–‡ä»¶æŒ‚è½½ï¼Œè€Œä¸”ä¸€ä¸ªå®¹å™¨å¯ä»¥æŒ‚è½½å¤šä¸ªç›®å½•</p><p>-v /root/test:/root/project()å‰é¢æ˜¯å®¿ä¸»æœºï¼Œåé¢æ˜¯</p><p>docker run -it -p 9500:5000 python:3.8 -v /usr/local/JDBUS:/root/project bash</p>]]></content>
    
    
    <categories>
      
      <category>Person</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PersonPost</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œ-01-Chapter01 è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘</title>
    <link href="/posts/f10c5200.html"/>
    <url>/posts/f10c5200.html</url>
    
    <content type="html"><![CDATA[<p>æš‘å‡æ–°å‘ï¼Œè‡ªé¡¶å‘ä¸‹çš„å­¦ä¹ è®¡ç®—æœºç½‘ç»œï¼Œè™½ç„¶ä½œä¸ºäº¤é€šäººå­¦è¿‡äº†ä¿¡å·ä¸ç³»ç»Ÿã€ä¿¡æ¯ä¼ è¾“åŸç†ã€åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œäº†è§£åˆ°äº†æ¯”ç‰¹ä¼ è¾“ä»¥åŠåè®®çš„åˆæ­¥æ¦‚å¿µï¼Œä½†æ˜¯å’Œå®é™…åº”ç”¨ä¸­çš„è®¡ç®—æœºç½‘ç»œè¿˜å­˜åœ¨æ¯”è¾ƒå¤§çš„GAPï¼Œè‡ªé¡¶å‘ä¸‹æˆåŠŸçš„ä»‹ç»äº†å¦‚ä½•å»çœ‹è®¡ç®—æœºç½‘ç»œï¼Œè€Œä¸”ä½œè€…è¡Œæ–‡éå¸¸æœ‰è¶£ï¼<a href="http://101.43.56.17:84/s/J22BYyj7sFKyDyj">Computer Networking_ A Top-Down Approach, Global Edition, 8th Edition.pdf</a>,è‡ªå·±nextcloudæ­å»ºçš„webdavç½‘ç›˜åˆ†äº«ï¼</p><span id="more"></span><h1 id="chapter01-è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘"><a class="markdownIt-Anchor" href="#chapter01-è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘"></a> chapter01 è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘</h1><p>æ¦‚è¿°è®¡ç®—æœºç½‘ç»œå’Œå› ç‰¹ç½‘ï¼Œè¿™ç« çš„ç›®æ ‡æ˜¯ä»æ•´ä½“ä¸Šç²—çº¿æ¡å‹¾å‹’å‡ºè®¡ç®—æœºç½‘ç»œçš„æ¦‚è²Œï¼Œå¹¶ä¸”æè¿°è¿™æœ¬ä¹¦çš„å†…å®¹æ¡†æ¶ï¼ŒåŒ…å«å¤§é‡è®¡ç®—æœºç½‘ç»œçš„èƒŒæ™¯çŸ¥è¯†ï¼Œå¹¶æ”¾åˆ°æ•´ä¸ªç½‘ç»œçš„å¤§ç¯å¢ƒä¸­è®¨è®ºç»“æœã€‚</p><p>åœ¨ä»‹ç»åŸºæœ¬æœ¯è¯­å’Œæ¦‚å¿µåï¼Œå°†é¦–å…ˆæŸ¥çœ‹æ„æˆç½‘ç»œçš„åŸºæœ¬ç¡¬ä»¶å’Œè½¯ä»¶ç»„å»ºï¼Œä»ç½‘ç»œçš„è¾¹ç¼˜å¼€å§‹è€ƒå¯Ÿç½‘ç»œä¸­è¿è¡Œçš„ç«¯è®¾å¤‡ï¼›ä¹‹åæ¢ç©¶ç½‘ç»œçš„æ ¸å¿ƒï¼ŒåŒ…æ‹¬ä¼ è¾“æ•°æ®çš„é“¾è·¯å’Œäº¤æ¢æœºï¼Œä»¥åŠå°†ç«¯ç³»ç»Ÿå’Œç½‘ç»œæ ¸å¿ƒç›¸è¿æ¥çš„æ¥å…¥ç½‘å’Œç‰©ç†åª’ä½“</p><p>ååŠéƒ¨åˆ†å°†ä»æ›´å¹¿æ³›ã€æ›´æŠ½è±¡çš„è§’åº¦æ¥è€ƒå¯Ÿè®¡ç®—æœºç½‘ç»œï¼ŒåŒ…æ‹¬å…¶ä¸­çš„æ•°æ®çš„æ—¶é—´å»¶è¿Ÿã€ä¸¢åŒ…å’Œååé‡ï¼›ä»‹ç»å…¶ä¸­çš„å…³é”®ä½“ç³»ç»“æ„åŸåˆ™ï¼Œå¦‚åè®®åˆ†å±‚å’ŒæœåŠ¡æ¨¡å‹ï¼Œæˆ‘ä»¬å°†äº†è§£åˆ°è®¡ç®—æœºç½‘ç»œå¯¹äºè®¸å¤šä¸åŒç±»å‹çš„æ”»å‡»æ¥è¯´æ˜¯è„†å¼±çš„</p><h2 id="11-æ˜¯ä»€ä¹ˆæ˜¯å› ç‰¹ç½‘internet"><a class="markdownIt-Anchor" href="#11-æ˜¯ä»€ä¹ˆæ˜¯å› ç‰¹ç½‘internet"></a> 1.1 æ˜¯ä»€ä¹ˆæ˜¯å› ç‰¹ç½‘ï¼ˆInternetï¼‰</h2><h3 id="111-ç¡¬ä»¶è§’åº¦æè¿°"><a class="markdownIt-Anchor" href="#111-ç¡¬ä»¶è§’åº¦æè¿°"></a> 1.1.1 ç¡¬ä»¶è§’åº¦æè¿°</h3><p>computer networkä¼¼ä¹æœ‰ç‚¹è¿‡æ—¶ï¼Œå› ä¸ºé™¤äº†ç”µè„‘ã€æœåŠ¡å™¨æ™ºèƒ½æ‰‹æœºã€ç”µè§†ã€æ¸¸æˆæœºã€æ¸©åº¦è°ƒèŠ‚è®¾å¤‡éƒ½é€æ¸è¿æ¥åˆ°å› ç‰¹ç½‘ä¸­ï¼Œè€Œè¿™äº›è®¾å¤‡é€šå¸¸ç§°ä¸ºä¸»æœºï¼ˆHostï¼‰æˆ–è€…ç«¯ç³»ç»Ÿï¼ˆEnd systemï¼‰</p><p>**ç«¯ç³»ç»Ÿï¼ˆEnd systemï¼‰<strong>é€šè¿‡</strong>é€šä¿¡é“¾è·¯ï¼ˆCommunication linkï¼‰<strong>å’Œ</strong>åˆ†ç»„äº¤æ¢ï¼ˆPacket switchï¼‰**è¿æ¥åˆ°ä¸€èµ·ï¼Œ</p><p>å…¶ä¸­é€šä¿¡é“¾è·¯ç”±ä¸åŒçš„ç‰©ç†åª’ä»‹ç»„æˆï¼ŒåŒ…æ‹¬åŒè½´ç”µç¼†ã€é“œçº¿ã€å…‰çº¤ç­‰ï¼Œæœ€é‡è¦çš„æ˜¯ä¼ è¾“é€Ÿç‡</p><p>å…¶ä¸­åˆ†ç»„äº¤æ¢æ˜¯å°†ä»ä¸€ç»„è¾“å…¥é“¾è·¯åˆ°è¾¾å¦å¤–ä¸€ä¸ªè¾“å‡ºé“¾è·¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ç”±è®¸å¤šç‰¹è‰²çš„åˆ†ç»„äº¤æ¢æœºï¼Œå…¶ä¸­æœ€è‘—åçš„åŒ…æ‹¬è·¯ç”±å™¨ï¼ˆrouterï¼‰å’Œé“¾è·¯å±‚äº¤æ¢æœºï¼ˆlink-layer switchï¼‰</p><p>### 1.1.2 è½¯ä»¶è§’åº¦æè¿°</p><p>äº’è”ç½‘åº”ç”¨å¤„ç†ä¼ ç»Ÿçš„ç”µå­é‚®ä»¶ã€webå†²æµªç­‰ä¼ ç»Ÿåº”ç”¨å¤–ï¼Œè¿˜åŒ…æ‹¬ç§»åŠ¨æ™ºèƒ½æ‰‹æœºå’Œå¹³æ¿ç”µè„‘åº”ç”¨ç¨‹åºï¼Œå…¶ä¸­åŒ…æ‹¬å³æ—¶é€šè®¯ã€åœ°å›¾å¯¼èˆªã€æµåª’ä½“ç­‰ï¼Œè¿™äº›åº”ç”¨ç¨‹åºæ¶‰åŠå¤šä¸ªç›¸äº’äº¤äº’æ•°æ®çš„ç«¯ç³»ç»Ÿï¼Œå› æ­¤ç§°ä¸ºåˆ†å¸ƒå¼åº”ç”¨ç³»ç»Ÿï¼ˆdistributed applicationï¼‰</p><aside><p>ğŸ’¡ ï¼Ÿï¼Ÿå‡è®¾ä½ å¸Œæœ›å¯¹åˆ†å¸ƒå¼å› ç‰¹ç½‘æœ‰ä¸€ä¸ªæ¿€åŠ¨äººå¿ƒçš„æƒ³æ³•ï¼Œå¦‚ä½•å°†è¿™ç§æƒ³æ³•è½¬æ¢ç§°ä¸ºä¸€ç§å®é™…çš„å› ç‰¹ç½‘åº”ç”¨å‘¢ï¼Ÿï¼Ÿä¹Ÿå°±æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªç«¯ç³»ç»Ÿä¸Šçš„åº”ç”¨ç¨‹åºæ€æ ·æ‰èƒ½é€šè¿‡äº’è”ç½‘è·å¾—åœ¨å¦ä¸€ä¸ªç«¯ç³»ç»Ÿä¸Šçš„è½¯ä»¶å‘é€çš„æ•°æ®ï¼Ÿ</p><p>ä¸å› ç‰¹ç½‘çš„ç«¯ç³»ç»Ÿæä¾›äº†ä¸€ä¸ª<strong>å¥—æ¥å­— socket interfaceï¼Œè§„å®šäº†è¿è¥åœ¨ä¸€ä¸ªç«¯ç³»ç»Ÿä¸Šçš„ç¨‹åº è¯·æ±‚å› ç‰¹ç½‘åŸºç¡€è®¾æ–½å‘è¿è¡Œåœ¨å¦ä¸€ä¸ªç«¯ç³»ç»Ÿä¸Šçš„ç‰¹å®šç›®çš„åœ°ç¨‹åºäº¤ä»˜æ•°æ®çš„æ–¹å¼ï¼Œæ˜¯å‘é€ç¨‹åºå¿…é¡»éµå¾ªçš„è§„åˆ™é›†åˆ</strong></p></aside><blockquote><p>åè®®ï¼ˆprotocolï¼‰å®šä¹‰äº†ä¸¤ä¸ªæˆ–å¤šä¸ªé€šä¿¡å®ä½“ä¹‹é—´äº¤æ¢çš„æŠ¥æ–‡çš„æ ¼å¼å’Œé¡ºåºï¼Œä»¥åŠæŠ¥æ–‡å‘é€å’Œæˆ–æ¥å—ä¸€æ¡æŠ¥æ–‡æˆ–å…¶ä»–æ—¶é—´æ‰€é‡‡å–çš„åŠ¨ä½œ</p></blockquote><p>ä¸åŒçš„åè®®ç”¨äºå®Œæˆä¸åŒçš„é€šä¿¡ä»»åŠ¡</p><h2 id="12-ç½‘ç»œè¯¦ç»†-ç½‘ç»œè¾¹ç¼˜"><a class="markdownIt-Anchor" href="#12-ç½‘ç»œè¯¦ç»†-ç½‘ç»œè¾¹ç¼˜"></a> 1.2 ç½‘ç»œè¯¦ç»† â€” ç½‘ç»œè¾¹ç¼˜</h2><p>ç«¯ç³»ç»Ÿç§°ä¸ºä¸»æœºï¼ˆhostï¼‰ï¼Œä¹Ÿè¢«å«åšç«¯ç³»ç»Ÿï¼ˆEnd systemï¼‰ï¼Œä¸»æœºå¯ä»¥è¿›ä¸€æ­¥åˆ’åˆ†ä¸ºå®¢æˆ·ï¼ˆClientï¼‰å’ŒæœåŠ¡å™¨ï¼ˆServerï¼‰</p><p>ä¼ è¾“çš„ç‰©ç†åª’ä»‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¹Ÿå°±æ˜¯ä¿¡æ¯ä¼ è¾“åŸç†ä¸­ä¼ é€’ä¿¡æ¯çš„æ–¹å¼ï¼Œä»å‘å°„å™¨åˆ°æ¥æ”¶å™¨ä¸­çš„ç‰©ç†åª’ä»‹å’Œå¼•å¯¼å‹åª’ä»‹</p><ol><li><p>ç‰©ç†åª’ä»‹ï¼ˆPhysical mediumï¼‰</p><ol><li><p>åŒç»é“œçº¿ï¼Œç”¨æ¥å‡å°‘ä¸´è¿‘ç±»ä¼¼çš„åŒç»çº¿çš„å—²ä½ å»å¹²æ‰°ï¼Œæ— å±è”½åŒç»çº¿ï¼ˆUTPï¼‰é€šå¸¸ç”¨äºå»ºç­‘ç‰©å†…çš„è®¡ç®—æœºç½‘ç»œï¼ˆLANï¼‰</p></li><li><p>åŒè½´ç”µç¼†ï¼Œç”±ä¸¤ä¸ªé“œå¯¼ä½“ç»„æˆçš„ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªå¯¼ä½“æ˜¯åŒå¿ƒçš„è€Œä¸æ˜¯å¹¶è¡Œçš„ï¼Œå¯ä»¥è¾¾åˆ°è¾ƒå¿«çš„æ•°æ®ä¼ è¾“é€Ÿç‡</p></li><li><p>å…‰çº¤ï¼Œä¸€ç§ç»†è€ŒæŸ”è½¯çš„èƒ½å¤Ÿå¼•å¯¼å…‰è„‰å†²çš„åª’ä»‹ï¼Œè¡°å‡ä½åŒæ—¶éš¾ä»¥çªƒå¬ï¼Œç”±äºå…‰é¢‘ç‡çš„ç‰¹æ®Šæ€§ï¼Œä»¥51.8Mpbsä½œä¸ºæ ‡å‡†ç‰ˆ</p></li></ol></li><li><p>å¯¼å¼•æ€§åª’ä»‹ï¼ˆGuided mediaï¼‰</p><ol><li><p>é™†åœ°æ— çº¿ç”µä¿¡é“ï¼Œæå¤§çš„ä¾èµ–äºä¼ æ’­ç¯å¢ƒå’Œä¿¡å·ä¼ è¾“çš„ä¸¾ä¾‹ï¼Œåˆ†ä¸ºçŸ­ã€ä¸­ã€é•¿ä¸‰ç±»</p></li><li><p>å«æ˜Ÿæ— çº¿ä¿¡é“ï¼Œé€šå¸¸ä½¿ç”¨ä¸¤ç±»å«æ˜Ÿï¼ŒåŒæ­¥å«æ˜Ÿï¼ˆgeostationary satelliteï¼‰å’Œè¿‘åœ°è½¨é“ï¼ˆlow-earth satelliteï¼‰</p></li></ol></li></ol><p>è¾¹ç¼˜è®¾å¤‡å’Œç½‘ç»œé“¾æ¥éœ€è¦è€ƒè™‘æ¥å…¥ç½‘ï¼Œä¹Ÿå°±æ˜¯å°†ç«¯ç³»ç»Ÿç‰©ç†è®¾å¤‡è¿æ¥åˆ°è¾¹ç¼˜è·¯ç”±å™¨ï¼ˆEdge routerï¼‰ï¼Œå¸¸è§çš„æ–¹å¼æœ‰ï¼š</p><ol><li><p>å®¶åº­æ¥å…¥ï¼ŒDSLã€ç”µç¼†ã€FTTHã€æ‹¨å·å’Œå«æ˜Ÿ</p><ol><li><p>DSLï¼ˆDigital Subscriber Lineï¼‰æ•°å­—ç”¨æˆ·çº¿ï¼Œå—é™äºä»·æ ¼æˆ–è€…ç‰©ç†è´·æ¬¾ï¼Œä¸Šè¡Œé€Ÿç‡å’Œä¸‹è¡Œé€Ÿç‡å¹¶ä¸ç›¸åŒ</p></li><li><p>ç”µç¼†ï¼ˆCable Internet Accessï¼‰åˆ©ç”¨æœ‰çº¿ç”µè§†å…¬å¸ç°æœ‰çš„æœ‰çº¿ç”µè§†åŸºç¡€è®¾æ–½ï¼Œé€šå¸¸ä½¿ç”¨åŒè½´ç”µç¼†å’Œå…‰çº¤æ··åˆçš„æ–¹å¼ï¼ˆHybrid Fiber Coaxï¼ŒHFCï¼‰</p></li><li><p>å…‰çº¤åˆ°æˆ·ï¼ˆFiber to the homeï¼ŒFTTH)ï¼Œåˆ†ä¸ºä¸»åŠ¨å…‰çº¤ç½‘ç»œå’Œè¢«åŠ¨å…‰çº¤ç½‘ç»œ</p></li><li><p>éå¸¸æ…¢ã€é€‚åˆåè¿œåœ°åŒºçš„å«æ˜Ÿå’Œæ‹¨å·ï¼ˆä¼ ç»Ÿç”µè¯çº¿ï¼‰</p></li></ol></li><li><p>å…¬å…±åœºæ‰€ï¼Œä»¥å¤ªç½‘å’ŒWiFi</p><ol><li><p>ä½¿ç”¨å±€åŸŸä»¥å¤ªç½‘å°†è®¾å¤‡è¿æ¥åˆ°äº¤æ¢æœºï¼Œæ¯”å¦‚ä½¿ç”¨åŒç»é“œçº¿è¿æ¥åˆ°å‡ç¼“é›†</p></li><li><p>ä¸€ç§åŸºäºIEEE802.11çš„LANä»‹å…¥æ–¹å¼</p></li><li><p>è™½ç„¶ä»¥å¤ªç½‘å’ŒWi-Fiæ¥å…¥ç½‘æœ€æ—©å‡ºç°åœ¨ä¼ä¸šæˆ–å¤§å­¦ï¼Œä½†æ˜¯ä»Šå¹´æ¥ä¹Ÿå·²ç»æˆä¸ºå®¶åº­ç½‘ç»œä¸­ç›¸å½“å¸¸è§çš„éƒ¨ä»¶</p></li></ol></li><li><p>ç§»åŠ¨ç½‘ç»œï¼Œ3Gã€LTEã€5G</p><ol><li><p>åˆ©ç”¨åŸºç«™å¸ƒè®¾æ¥è·å–é€Ÿåº¦</p></li><li><p>LTEï¼ˆlong term evolutionï¼‰æœ€å·®é¦–å­—æ¯ç¼©å†™è¯ï¼Œå–å¾—äº†10Mpbsçš„é€Ÿç‡</p></li></ol></li></ol><h2 id="13-ç½‘ç»œè¯¦ç»†-ç½‘ç»œæ ¸å¿ƒ"><a class="markdownIt-Anchor" href="#13-ç½‘ç»œè¯¦ç»†-ç½‘ç»œæ ¸å¿ƒ"></a> 1.3 ç½‘ç»œè¯¦ç»† â€”ç½‘ç»œæ ¸å¿ƒ</h2><p>ç”±é€šä¿¡é“¾è·¯å’Œäº¤æ¢æœºç»„æˆçš„ç½‘çŠ¶ç³»ç»Ÿï¼Œåœ¨ç½‘ç»œé“¾è·¯å’Œäº¤æ¢æœºç§»åŠ¨æ•°æ®çš„ä¸¤ç§åŸºæœ¬æ–¹æ³•ï¼Œç”µè·¯äº¤æ¢ï¼ˆcircuit switchingï¼‰å’Œåˆ†ç»„äº¤æ¢ï¼ˆpacket switchingï¼‰</p><h3 id="131-åˆ†ç»„äº¤æ¢"><a class="markdownIt-Anchor" href="#131-åˆ†ç»„äº¤æ¢"></a> 1.3.1 åˆ†ç»„äº¤æ¢</h3><p>ä¼ é€’æŠ¥æ–‡ï¼Œä½†æ˜¯ä¼šæ ¹æ®æ•°æ®åŒ…æœ‰æ—¶å»¶ï¼Œå› ä¸ºäº¤æ¢æœºéœ€è¦å­˜å‚¨æ–‡ä»¶ç„¶åå‘å‡ºå»</p><h3 id="132-ç”µè·¯äº¤æ¢"><a class="markdownIt-Anchor" href="#132-ç”µè·¯äº¤æ¢"></a> 1.3.2 ç”µè·¯äº¤æ¢</h3><p>é¢å‘ç”µè·¯çš„è¿æ¥ï¼Œæ— è®ºæ—¶æ—¶åˆ†å¤ç”¨ã€é¢‘åˆ†å¤ç”¨è¿˜æ˜¯ç åˆ†å¤ç”¨</p><h2 id="14-ç½‘ç»œè¯¦ç»†-è¯„ä»·æŒ‡æ ‡æ—¶å»¶-ä¸¢åŒ…å’Œååé‡"><a class="markdownIt-Anchor" href="#14-ç½‘ç»œè¯¦ç»†-è¯„ä»·æŒ‡æ ‡æ—¶å»¶-ä¸¢åŒ…å’Œååé‡"></a> 1.4 ç½‘ç»œè¯¦ç»† â€” è¯„ä»·æŒ‡æ ‡ï¼šæ—¶å»¶ã€ä¸¢åŒ…å’Œååé‡</h2><p>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›å› ç‰¹ç½‘æœåŠ¡èƒ½å¤Ÿåœ¨ä»»æ„ä¸¤ä¸ªç«¯ç³»ç»Ÿä¹‹é—´éšå¿ƒæ‰€æ¬²ç¬é—´ç§»åŠ¨æ•°æ®è€Œæ²¡æœ‰ä»»ä½•æ•°æ®ä¸¢å¤±ï¼Œä½†æ˜¯å—é™äºç³»ç»Ÿçš„å®é™…ä¼ é€’é€Ÿç‡ï¼Œå¯èƒ½ä¼šä¸¢åˆ°åˆ†ç»„çš„æŠ¥æ–‡ï¼Œä¸€æ–¹é¢è¿™ä¸ªæ˜¯ç½‘ç»œçš„å·¨å¤§é—®é¢˜ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯è®¡ç®—æœºç½‘ç»œå­˜åœ¨çš„æ„ä¹‰</p><h3 id="141-æ—¶å»¶çš„æ¦‚è¿°"><a class="markdownIt-Anchor" href="#141-æ—¶å»¶çš„æ¦‚è¿°"></a> 1.4.1 æ—¶å»¶çš„æ¦‚è¿°</h3><p>å½“åˆ†ç»„æŠ¥æ–‡ä»ä¸€ä¸ªèŠ‚ç‚¹æ²¿ç€è¿™æ¡è·¯åˆ°è¾¾ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¯¥åˆ†ç»„åœ¨æ²¿é€”ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ç»å—äº†å‡ ç§ä¸åŒç±»å‹çš„æ—¶å»¶ï¼Œå…¶ä¸­æœ€é‡è¦çš„åŒ…æ‹¬</p><ol><li><p>èŠ‚ç‚¹å¤„ç†æ—¶å»¶ï¼ˆNodal processing delayï¼‰ï¼Œæ¯”å¦‚æ£€æŸ¥æ¯”ç‰¹å·®é”™æ‰€éœ€è¦çš„æ—¶é—´ã€ç­‰æ—¶é—´</p></li><li><p>æ’é˜Ÿæ—¶å»¶ï¼ˆQueuing delayï¼‰ï¼Œåœ¨é˜Ÿåˆ—ä¸­ï¼Œåœ¨é“¾è·¯ä¸Šç­‰å¾…ä¼ ä¸–çš„æ—¶é—´ï¼Œå¦‚æœæµé‡å¾ˆå¤§ï¼Œåˆ™ä¸èƒ½ä¼ è¾“æ— éœ€ç­‰å¾…</p></li><li><p>ä¼ è¾“æ—¶å»¶ï¼ˆTransmission delayï¼‰ï¼Œè¿™ä¸ªé€‚ç”¨äºæŠ¥æ–‡åˆ†ç»„æ‰€éœ€è¦çš„æ—¶é—´æ¯«ç§’çº§åˆ°å¾®ç§’çº§åˆ«</p></li><li><p>ä¼ æ’­æ—¶å»¶ï¼ˆPropagation delayï¼‰ï¼Œè¿™ä¸ªæ˜¯å®é™…ä¸Šåœ¨è·¯å¾„ä¸Šè¿è¡Œçš„é¢è®°å½•ï¼Œä¸€æ—¦ä¸€ä¸ªæ¯”ç‰¹èµ°å‘äº†é“¾è·¯ï¼Œè¯¥æ¯”ç‰¹æ‰€éœ€è¦çš„è·¯ç”±å™¨ä¼ æ’­</p></li></ol><p>ä¸åŒä¸šåŠ¡åœºæ™¯å¯¹äºè®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½å¤„ç†æ–¹å¼å¹¶ä¸ç›¸åŒã€‚</p><h3 id="142-æ’é˜Ÿæ—¶å»¶å’Œä¸¢åŒ…çš„å…³ç³»"><a class="markdownIt-Anchor" href="#142-æ’é˜Ÿæ—¶å»¶å’Œä¸¢åŒ…çš„å…³ç³»"></a> 1.4.2 æ’é˜Ÿæ—¶å»¶å’Œä¸¢åŒ…çš„å…³ç³»</h3><p>å½“ç„¶æ˜¯æ—¶å»¶è¶Šé•¿ï¼Œä¸¢åŒ…è¶Šå¤šå•¦</p><h3 id="143-ç«¯åˆ°ç«¯æ—¶å»¶"><a class="markdownIt-Anchor" href="#143-ç«¯åˆ°ç«¯æ—¶å»¶"></a> 1.4.3 ç«¯åˆ°ç«¯æ—¶å»¶</h3><p>ç•¥</p><h3 id="144-è®¡ç®—æœºç½‘ç»œçš„ååé‡"><a class="markdownIt-Anchor" href="#144-è®¡ç®—æœºç½‘ç»œçš„ååé‡"></a> 1.4.4 è®¡ç®—æœºç½‘ç»œçš„ååé‡</h3><p>ç•¥</p><h2 id="15-ç½‘ç»œè¯¦ç»†-åè®®å±‚æ¬¡å’ŒæœåŠ¡æ¨¡å‹"><a class="markdownIt-Anchor" href="#15-ç½‘ç»œè¯¦ç»†-åè®®å±‚æ¬¡å’ŒæœåŠ¡æ¨¡å‹"></a> 1.5 ç½‘ç»œè¯¦ç»† â€” åè®®å±‚æ¬¡å’ŒæœåŠ¡æ¨¡å‹</h2><p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­è™½ç„¶å­˜åœ¨å¤§é‡çš„é¥®ç”¨ç¨‹åºåè®®ã€å„ç§ä¸ªæ ·çš„ç«¯ç³»ç»Ÿã€åˆ†ç»„äº¤æ¢æœºä»¥åŠå„ç§ç±»å‹çš„é“¾è·¯çº§åª’ä½“ï¼Œé¢å¯¹è¿™ç§å¤æ‚æ€§ï¼Œè¿˜å­˜åœ¨ç»„ç»‡ç½‘ç»œä½“ç³»ç»“æ„çš„å¸Œæœ›å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼ŒOSIå‚è€ƒæ¨¡å‹</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h34oyjwusqj21ck0rmahb.jpg" alt="image-20220611225128148" /></p><h3 id="151-åˆ†ç»„çš„ä½“ç³»ç»“æ„"><a class="markdownIt-Anchor" href="#151-åˆ†ç»„çš„ä½“ç³»ç»“æ„"></a> 1.5.1 åˆ†ç»„çš„ä½“ç³»ç»“æ„</h3><p>åˆ©ç”¨åˆ†å±‚çš„ä½“ç³»ç»“æ„å°±å¯ä»¥è®¨è®ºä¸€ä¸ªå¤§è€Œå¤æ‚ç³»ç»Ÿçš„å®šä¹‰è‰¯å¥½çš„ç‰¹å®šéƒ¨åˆ†ï¼Œè¿™ç§ç®€åŒ–æœ¬èº«ç”±äºæä¾›æ¨¡å—åŒ–è€Œå…·æœ‰å¾ˆé«˜ä»·å€¼ï¼Œè¿™æ˜¯çš„æŸå±‚æ‰€æä¾›çš„æœåŠ¡å®¹æ˜“æ”¹å˜ï¼Œåªè¦è¯¥æ›¾å¯¹ä¸Šé¢æä¾›ç›¸åŒçš„æœåŠ¡å¹¶ä¸”ä½¿ç”¨æ¥è‡ªä¸‹å±‚çš„ç›¸åŒæœåŠ¡ï¼Œå°±å¯ä»¥ä¿æŒä¸æ–­æ›´æ–°ï¼Œè¿™ç§æ”¹å˜æœåŠ¡çš„å®ç°è€Œä¸å½±å“è¯¥ç³»ç»Ÿå…¶ä»–ç»„ä»¶æ˜¯åˆ†ç»„çš„å¦ä¸€ç§é‡è¦ä¼˜ç‚¹ã€‚ä½†æ˜¯åˆ†å±‚çš„ä¸€ä¸ªæ½œåœ¨ç¼ºç‚¹æ˜¯ä¸€å±‚å¯èƒ½å®¹æ˜“è¾ƒä½å±‚çš„åŠŸèƒ½ã€‚å°†è¿™äº›ç»¼åˆèµ·æ¥ï¼Œå„å±‚çš„æ‰€æœ‰åè®®è¢«æˆä¸ºåè®®æ ˆï¼ˆprotocol stackï¼‰</p><ol><li><p>åº”ç”¨å±‚ï¼Œæ¯”å¦‚HTTPã€SMTPã€FTPã€SFTPã€DNSè§£æ</p></li><li><p>è¿è¾“å±‚ï¼ŒTCPã€UDP</p></li><li><p>ç½‘ç»œå±‚ï¼Œå°†æ•°æ®æŠ¥datagramä»ä¸€å°ä¸»æœºç§»åŠ¨åˆ°å¦ä¸€å¤ªä¸»æœºï¼ŒåŒ…æ‹¬è‘—åçš„ç½‘é™…åè®®ä½ IPï¼Œä¹ŸåŒ…æ‹¬è·¯ç”±é€‰æ‹©åè®®ç­‰ï¼Œç»Ÿä¸€ç§°ä½œIPå±‚</p></li><li><p>é“¾è·¯å±‚ï¼ŒåŒ…æ‹¬ä»¥å¤ªç½‘ã€WIFIã€ç”µç¼†æ¥å…¥ç½‘DOCSISåè®®ï¼Œè¿™é‡Œçš„åˆ†ç»„æˆä¸ºframe</p></li><li><p>ç‰©ç†å±‚ï¼Œé€šè¿‡ç‰©ç†åè®®ä¼ è¾“</p></li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h34ouv09phj21700r6jv3.jpg" alt="image-20220611224755525" /></p>]]></content>
    
    
    <categories>
      
      <category>ComputerNetwork</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Single-02-å†³ç­–æ ‘ä¸­çš„Boostingæ–¹æ³•</title>
    <link href="/posts/cc1abdc.html"/>
    <url>/posts/cc1abdc.html</url>
    
    <content type="html"><![CDATA[<p>å¯¹å†³ç­–æ ‘ä¸­æœ‰å…³çš„boostingæ–¹æ³•è¿›è¡Œæ€»ç»“ï¼ŒåŒ…æ‹¬æœ€åŸºæœ¬çš„Adaboostã€ç„¶åäº†è§£ä»æå‡æ ‘ï¼ˆBoosting Treeï¼‰åˆ°ä¹‹åçš„æ¢¯åº¦æå‡å›å½’æ ‘ï¼ˆGradient boosting decision treeï¼‰ï¼Œå¸Œæœ›å¯ä»¥äº†è§£å…¶ä¸­çš„Boostingæ–¹æ³•çš„è„‰ç»œï¼Œä¹Ÿä¸ºä¹‹åçš„XGBoostå’ŒLightGBMçš„å­¦ä¹ å¥ å®šåŸºç¡€</p><span id="more"></span><h1 id="0x01-èƒŒæ™¯çŸ¥è¯†"><a class="markdownIt-Anchor" href="#0x01-èƒŒæ™¯çŸ¥è¯†"></a> 0x01 èƒŒæ™¯çŸ¥è¯†</h1><h2 id="11-å†³ç­–æ ‘decision-tree"><a class="markdownIt-Anchor" href="#11-å†³ç­–æ ‘decision-tree"></a> 1.1 å†³ç­–æ ‘ï¼ˆDecision treeï¼‰</h2><p>å†³ç­–æ ‘æ˜¯ä¸€ç§åŸºæœ¬çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå…·æœ‰åˆ†ç±»å’Œå›å½’çš„åŠŸèƒ½ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯å…·æœ‰åˆ†ç±»é€Ÿåº¦å¿«ï¼Œæ¨¡å‹å®¹æ˜“å¯è§†åŒ–çš„è§£é‡Šï¼Œç¼ºç‚¹æ˜¯å®¹æ˜“å‘ç”Ÿè¿‡æ‹Ÿåˆ</p><p>å†³ç­–å¯ä»¥åˆ†ä¸ºåˆ†ç±»æ ‘å’Œå›å½’æ ‘</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2hietpft8j21380u042q.jpg" alt="Untitled" /></p><h2 id="12-é›†æˆå­¦ä¹ -ensemble-learning"><a class="markdownIt-Anchor" href="#12-é›†æˆå­¦ä¹ -ensemble-learning"></a> 1.2 é›†æˆå­¦ä¹  ï¼ˆEnsemble learningï¼‰</h2><p>ä¸ºäº†å°†å¼±å­¦ä¹ å™¨ï¼ˆWeak learnerï¼‰é›†ä¸­å…¶ä¸­å½¢æˆè¿™ä¸ªå…·æœ‰å¤šå­¦ä¹ å™¨ç»¼åˆçš„æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸åŒçš„ç®—æ³•å’Œæ•°æ®é›†èåˆçš„æ–¹å¼æ¥æ„å»ºæ¨¡å‹ã€ä¹Ÿå¯ä»¥é‡‡ç”¨ä¸åŒçš„èåˆæ–¹æ³•æ¯”å¦‚å¹³å‡æ³•æŠ•ç¥¨æ³•stackingã€æˆ–è€…é‡‡ç”¨ç‰¹æ®Šçš„æŠ€å·§æ¯”å¦‚baggingå’Œboostingçš„æ–¹å¼</p><p>å…¶ä¸­XGboostå’ŒGDéƒ½å±äºboostingçš„æ–¹æ³•èŒƒç•´ï¼Œå…¶å·¥ä½œåŸç†æ˜¯åˆå§‹è®­ç»ƒé›†è®­ç»ƒå¾—åˆ°ä¸€ä¸ªåŸºå­¦ä¹ å™¨ï¼Œå†æ ¹æ®åŸºå­¦ä¹ å™¨çš„è¡¨ç°å¯¹è®­ç»ƒæ ·æœ¬åˆ†å¸ƒè¿›è¡Œè°ƒæ•´ï¼Œä½¿å¾—ä¹‹å‰åŸºå­¦ä¹ å™¨å‡ºé”™çš„è®­ç»ƒæ ·æœ¬åç»­å¯ä»¥å¾—åˆ°æ›´å¤šçš„å…³æ³¨ï¼Œç„¶ååŸºäºè°ƒæ•´åçš„æ ·æœ¬åˆ†å¸ƒæ¥é‡æ–°è®­ç»ƒå­¦ä¹ å™¨ï¼Œæœ€ç»ˆç»§æ‰¿å¤šä¸ªå­¦ä¹ å™¨å¹¶æ ¹æ®é”™è¯¯è¿›è¡ŒåŠ æƒæ¥å¾—åˆ°æœ€ç»ˆçš„å­¦ä¹ å™¨</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2hicnaew4j20nu0coq45.jpg" alt="image-20220522213447448" /></p>f(x)=w_0+\Sigma_{m=1}^Mw_m\phi_m(x)\\w\ for\ weigths\\ \phi\ is\ weaker\ learner<h2 id="13-å›é¡¾æœºå™¨å­¦ä¹ "><a class="markdownIt-Anchor" href="#13-å›é¡¾æœºå™¨å­¦ä¹ "></a> 1.3 å›é¡¾æœºå™¨å­¦ä¹ </h2><p>æœºå™¨å­¦ä¹ ä»ç»„æˆéƒ¨åˆ†ä¸­æœ€é‡è¦å¯ä»¥è¯´åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†</p><ol><li>æ•°æ®é›†ï¼ˆdatasetï¼‰</li><li>æ¨¡å‹ï¼ˆmodelï¼‰å’Œå‚æ•°ï¼ˆparametersï¼‰</li><li>ç›®æ ‡å‡½æ•°ï¼ˆobjectiveï¼‰= æŸå¤±ï¼ˆlossï¼‰+æ­£åˆ™åŒ–ï¼ˆregularizationï¼‰</li><li>ä¼˜åŒ–æ–¹æ³•ï¼ˆoptimization methodï¼‰</li></ol><h1 id="0x02-adaboostç®—æ³•"><a class="markdownIt-Anchor" href="#0x02-adaboostç®—æ³•"></a> 0x02 AdaBoostç®—æ³•</h1><h2 id="21-ç®€ä»‹"><a class="markdownIt-Anchor" href="#21-ç®€ä»‹"></a> 2.1 ç®€ä»‹</h2><p>æ¯æ¬¡å­¦ä¹ ä¹‹åï¼Œè¿­ä»£æ›´æ–°æ ·æœ¬æ•°æ®é›†ä¸­çš„æƒé‡æ¥é‡æ–°ç”Ÿæˆä¸€é¢—å†³ç­–æ ‘ï¼Œä¹‹åæ ¹æ®å‡†ç¡®ç‡æ¥ç»„åˆæ‰€æœ‰çš„å­¦ä¹ å™¨å®ä¾‹å¾—åˆ°æœ€ç»ˆçš„ç»“æœ</p><h2 id="22-ç®—æ³•è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#22-ç®—æ³•è¿‡ç¨‹"></a> 2.2 ç®—æ³•è¿‡ç¨‹</h2><p>ç»™å®šä¸€ä¸ªäºŒåˆ†ç±»çš„æ•°æ®é›†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><mo>=</mo><mo>{</mo><mo>(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>i</mi></msub><mo>)</mo><msubsup><mo>}</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>i</mi><mo>=</mo><mi>N</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">T=\{(x_i,y_i)\}_{i=1}^{i=N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8413309999999999em;"></span><span class="strut bottom" style="height:1.0999949999999998em;vertical-align:-0.258664em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mrel">=</span><span class="mopen">{</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose"><span class="mclose">}</span><span class="vlist"><span style="top:0.258664em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼ŒXæ˜¯ç‰¹å¾é›†åˆï¼Œyæ˜¯æ ‡è®°é›†åˆã€‚</p><p>ç®—æ³•çš„æµç¨‹(<strong>AdaBoost) è¾“å‡ºä¸ºGï¼ˆXï¼‰</strong></p><p>1-1 é¦–å…ˆï¼Œåˆå§‹åŒ–è®­ç»ƒæ•°æ®ä¸­çš„æƒé‡åˆ†å¸ƒï¼Œæœ€åˆéƒ½ç›¸åŒæƒé‡</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo>=</mo><mo>(</mo><msub><mi>w</mi><mrow><mn>1</mn><mn>1</mn></mrow></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>w</mi><mrow><mn>1</mn><mi>N</mi></mrow></msub><mo>)</mo><mo separator="true">,</mo><msub><mi>w</mi><mrow><mn>1</mn><mi>i</mi></mrow></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">D_1=(w_{11},...,w_{1N}),w_{1i}=1/N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02691em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02691em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02691em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span></span></p><p>ä¹‹åè®­ç»ƒMé¢—æ ‘ï¼Œå¯¹äºM=1ï¼Œ2ï¼Œâ€¦ï¼ŒM</p><p>2-1 æ ¹æ®æƒé‡åˆ†å¸ƒ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>D</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">D_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>è®­ç»ƒæ•°æ®é›†æ¥å¾—åˆ°åŸºæœ¬åˆ†ç±»å™¨</p><p><strong>ã€Šæèˆªç»Ÿè®¡å­¦ä¹ ã€‹æ²¡æœ‰æåˆ°çš„éƒ¨åˆ†å°±æ˜¯å¦‚ä½•æ ¹æ®æƒé‡æ¥é‡æ–°è®¡ç®—åˆ†ç±»å™¨ï¼›ä¸ªäººæ¨æµ‹æ˜¯åœ¨å†³ç­–æ ‘åˆ†ç±»çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹ä¸åŒç±»åˆ«çš„æ¯”ä¾‹æŒ‰ç…§æƒé‡æ¥é‡æ–°è®¡ç®—ï¼Œæ¯”å¦‚å‡åŒ€åˆ†å¸ƒçš„æ—¶å€™1å’Œ-1çš„æ¯”ä¾‹ä¸º6:4ï¼›å¦‚æœæœ‰æƒé‡éœ€è¦æ ¹æ®å¯¹å…¶ä¸­é”™è¯¯çš„ç±»åˆ«è¿›è¡Œåˆ†ç±»ï¼šï¼ˆ3<em>0.07+3</em>0.16ï¼‰ï¼š4*0.07</strong></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mi>m</mi></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>âˆ’</mo><mo>&gt;</mo><mo>:</mo><mo>{</mo><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mo>+</mo><mn>1</mn><mo>}</mo></mrow><annotation encoding="application/x-tex">G_m(x)-&gt;:\{-1,+1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mrel">&gt;</span><span class="mrel">:</span><span class="mopen">{</span><span class="mord">âˆ’</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord">+</span><span class="mord mathrm">1</span><span class="mclose">}</span></span></span></span></span></p><p>2-2 è®¡ç®—å¾—åˆ°çš„åˆ†ç±»å™¨åœ¨è®­ç»ƒæ•°æ®é›†ä¸­çš„è¯¯å·®ç‡</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>e</mi><mi>m</mi></msub><mo>=</mo><mi>P</mi><mo>(</mo><msub><mi>G</mi><mi>m</mi></msub><mo>(</mo><msub><mi>X</mi><mi>i</mi></msub><mo>)</mo><mo>â‰ </mo><msub><mi>y</mi><mi>i</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">e_m=P(G_m(X_i) \neq y_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07847em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">â‰ </span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>2-3 ç”±æ­¤æ¥å¾—åˆ°åˆ†ç±»å™¨å¯¹åº”çš„æƒé‡</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î±</mi><mi>m</mi></msub><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><mi>l</mi><mi>o</mi><mi>g</mi><mfrac><mrow><mn>1</mn><mo>âˆ’</mo><msub><mi>e</mi><mi>m</mi></msub></mrow><mrow><msub><mi>e</mi><mi>m</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\alpha_m=\frac{1}{2}log\frac{1-e_m}{e_m}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.1574400000000002em;vertical-align:-0.8360000000000001em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>2-4 åœ¨è¿›è¡Œä¸‹ä¸€æ­¥è®¡ç®—çš„è¿‡ç¨‹ä¸­ï¼Œæ›´æ–°ä¸‹ä¸€æ¬¡çš„è®­ç»ƒçš„æƒé‡ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Z</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">Z_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>çš„ä½œç”¨æ˜¯ä¸ºæ¥å½’ä¸€åŒ–</p>W_{m+1}=\frac{w_m}{Z_m}exp(-\alpha_my_iG_m(X_i))\\Z_m=\Sigma w_m exp(-\alpha_my_iG_m(X_i))<p>3-1 è¿™æ ·åå¤è¿­ä»£å¾—åˆ°åŸºæœ¬åˆ†ç±»å™¨çš„çº¿æ€§ç»„åˆ</p>f(x)=\Sigma \alpha_mG_m(X)\\G(X)=sign(f(x))<p>G(x)å°±æ˜¯æœ€ç»ˆçš„è¾“å‡ºï¼Œæœ‰æ—¶å€™ä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­¦ä¹ ç‡æ¥æ§åˆ¶<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span>çš„å¢åŠ é€Ÿåº¦</p><h2 id="23-adaboostä¾‹å­"><a class="markdownIt-Anchor" href="#23-adaboostä¾‹å­"></a> 2.3 AdaBoostä¾‹å­</h2><p>è§ã€Šæèˆªç»Ÿè®¡å­¦ä¹ 131é¡µã€‹</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2hidacu1rj20u01mg453.jpg" alt="lihang" /></p><h2 id="24-ç®—æ³•çš„åˆ†æå’Œè§£é‡Š"><a class="markdownIt-Anchor" href="#24-ç®—æ³•çš„åˆ†æå’Œè§£é‡Š"></a> 2.4 ç®—æ³•çš„åˆ†æå’Œè§£é‡Š</h2><p>å…³äºAdaBoostçš„è§£é‡Šå¯ä»¥åˆ†ä¸ºä¸¤ç§</p><ol><li>æ˜¯é€šè¿‡ç»Ÿè®¡å­¦ä¹ çš„ç†è®ºæ¥æ¨åˆ°å‡ºAdaBoostçš„è®­ç»ƒè¯¯å·®è¾¹ç•Œã€å’Œç›¸å…³æ¨å¹¿çš„å®šç†</li><li>è®¤ä¸ºå®ƒæ˜¯æ¨¡å‹ä¸ºé›†æˆç­–ç•¥ä¸ºadditiveã€æŸå¤±å‡½æ•°ä¸ºexpã€å­¦ä¹ ç®—æ³•ä¸ºå‰å‘åˆ†å¸ƒç®—æ³•ï¼ˆforward Stagewise algorithmï¼‰</li></ol><p>å…¶å®AdaBoostä¸­ä¸€ä¸ªé—®é¢˜å°±æ˜¯æƒé‡çš„é€‰å–ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªæ ·å­çš„ï¼Ÿ</p><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç»“åˆå‰å‘åˆ†å¸ƒæ¥è¿›è¡Œæ¨å¯¼,è¿™é‡Œçš„ç›®æ ‡å‡½æ•°æ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mi>y</mi><mo>âˆ—</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo>)</mo></mrow><annotation encoding="application/x-tex">loss=exp(-y*\hat y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit">s</span><span class="mrel">=</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ—</span><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ä¸ªé™åˆ¶ï¼ŒAdaBooståªèƒ½ä½œä¸ºäºŒåˆ†ç±»æ¥å­¦ä¹ ï¼Œ</p><p>1-1 åŠ æ³•æ¨¡å‹ï¼Œå°±æ˜¯æˆ‘ä»¬å¯ä»¥</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mrow><mi>m</mi></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><msub><mi>G</mi><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>+</mo><msub><mi>Î±</mi><mi>m</mi></msub><mo>âˆ—</mo><msub><mi>f</mi><mi>m</mi></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">G_{m}(x)=G_{m-1}(x)+\alpha_m*f_m(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span></span></p><p>å…¶ä¸­ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î±</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">\alpha_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ä¸ºæƒé‡ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>f</mi><mi>m</mi></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">f_m(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span>æ˜¯æ ¹æ®ç¬¬Mæ¬¡è®­ç»ƒå¾—åˆ°çš„åˆ†ç±»å™¨ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç¡®å®šè¿™ä¸¤è€…çš„å–å€¼ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mtext>Â </mtext><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mi>y</mi><mo>âˆ—</mo><msub><mi>G</mi><mi>m</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo><mo>)</mo><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mtext>Â </mtext><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mi>y</mi><mo>[</mo><msub><mi>G</mi><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>+</mo><msub><mi>Î±</mi><mi>m</mi></msub><mo>âˆ—</mo><msub><mi>f</mi><mi>m</mi></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>]</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">min\ exp(-y*G_m(X))=min\ exp(-y[G_{m-1}(x)+\alpha_m*f_m(x)])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mspace">Â </span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mspace">Â </span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mopen">[</span><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></span></p><p>ç”±äºåœ¨Mæ¬¡è®­ç»ƒçš„æ—¶å€™ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>G</mi><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>(</mo><mi>X</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">G_{m-1}(X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">G</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span>æ²¡æœ‰å½±å“ï¼Œæ‰€ä»¥å¯ä»¥åˆ†ç¦»å¼€æ¥ä½œä¸ºæ¯”ä¾‹é¡¹</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mtext>Â </mtext><msub><mi>w</mi><mi>m</mi></msub><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mi>y</mi><msub><mi>Î±</mi><mi>m</mi></msub><msub><mi>f</mi><mi>m</mi></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">min\ w_mexp(-y\alpha_mf_m(x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mspace">Â </span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02691em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p>æ ¹æ®åŠ æƒæ•°æ®æ¥é‡æ–°è®­ç»ƒå¾—åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>f</mi><mi>m</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">f_m(X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span>ã€‚</p><p>å¯¹äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î±</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">\alpha_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>å¯æ ¹æ®æ±‚å¯¼å¾—åˆ°ç­”æ¡ˆ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mo>âˆ’</mo><mi>y</mi><msub><mi>f</mi><mi>m</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo><mo>]</mo><mo>âˆ—</mo><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mi>y</mi><msub><mi>Î±</mi><mi>m</mi></msub><msub><mi>f</mi><mi>m</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo><mo>)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">[-yf_m(X)]*exp(-y\alpha_mf_m(X))=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mopen">[</span><span class="mord">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mclose">]</span><span class="mbin">âˆ—</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></span></p><p><strong>æ³¨æ„è¿™é‡Œåªæ˜¯ä¸€ä¸ªäºŒåˆ†ç±»çš„é—®é¢˜ï¼Œæ‰€ä»¥åŒ–ç®€ä¹‹åå¾—åˆ°çš„ç­”æ¡ˆ</strong></p>â<h2 id="25-ä¼˜ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#25-ä¼˜ç¼ºç‚¹"></a> 2.5 ä¼˜ç¼ºç‚¹</h2><p>ä¼˜ç‚¹ï¼š</p><p>åˆ†ç±»ç²¾åº¦é«˜ï¼Œå¯ä»¥ç”¨å„ç§å›å½’åˆ†ç±»æ¨¡å‹ä½œä¸ºæ„å»ºå­¦ä¹ ï¼Œéå¸¸çµæ´»ï¼Œä¸å®¹æ˜“è¿‡æ‹Ÿåˆ</p><p>ç¼ºç‚¹ï¼š</p><p>å¯¹äºå¼‚å¸¸å€¼æ•æ„Ÿï¼Œä¼šè·å¾—è¾ƒé«˜çš„æƒé‡</p><h1 id="0x03-æ¢¯åº¦æå‡ç®€ä»‹-gradient-boosting"><a class="markdownIt-Anchor" href="#0x03-æ¢¯åº¦æå‡ç®€ä»‹-gradient-boosting"></a> 0x03 æ¢¯åº¦æå‡ç®€ä»‹ Gradient Boosting</h1><h2 id="30-ç›´è§‰background"><a class="markdownIt-Anchor" href="#30-ç›´è§‰background"></a> 3.0 ç›´è§‰background</h2><p>å‚è€ƒé“¾æ¥5ï¼Œä¸‹æ–‡ç»™å‡ºï¼Œå†™çš„éå¸¸å¥½</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h2hidta2e9j20u03p2h1o.jpg" alt="image-20220522213556373" /></p><h2 id="31-æå‡æ ‘-boosting-tree"><a class="markdownIt-Anchor" href="#31-æå‡æ ‘-boosting-tree"></a> 3.1 æå‡æ ‘ Boosting Tree</h2><p>æå‡æ ‘æ˜¯æŒ‰ç…§åˆ†ç±»æ ‘æˆ–è€…å›å½’æ ‘ä½œä¸ºåŸºæœ¬åˆ†ç±»å™¨çš„æå‡æ–¹æ³•ï¼Œæå‡æ ‘è¢«è®¤ä¸ºæ˜¯ç»Ÿè®¡å­¦ä¹ ä¸­æ€§èƒ½æœ€å¥½çš„æ–¹æ³•ä¹‹ä¸€ï¼Œé’ˆå¯¹ä¸åŒé—®é¢˜çš„æå‡æ ‘çš„å­¦ä¹ ç®—æ³•ä¸»è¦åœ¨äºæŸå¤±å‡½æ•°ä¸åŒï¼ŒåŒ…æ‹¬å¹³æ–¹è¯¯å·®æŸå¤±å‡½æ•°ã€æŒ‡æ•°æŸå¤±å‡½æ•°çš„åˆ†ç±»é—®é¢˜å’Œä¸€èˆ¬æŸå¤±å‡½æ•°çš„ä¸€èˆ¬å†³ç­–é—®é¢˜</p><p><strong>å›å½’é—®é¢˜ä¸­çš„æå‡æ ‘ç®—æ³•</strong></p><p>1-1 åˆå§‹åŒ–æ¨¡å‹</p><p>2-1 å¯¹äºm=1ï¼Œ2ï¼Œâ€¦ï¼ŒMä¸æ–­è¿­ä»£</p><p>2-2 è®¡ç®—ä¸Šä¸€ä¸ªæ¨¡å‹ç•™ä¸‹æ¥çš„æ®‹å·®</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mrow><mi>m</mi><mi>i</mi></mrow></msub><mo>=</mo><mi>y</mi><mo>âˆ’</mo><msub><mi>f</mi><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">r_{mi}=y-f_{m-1}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span></span></p><p>2-3 é‡æ–°è®¡ç®—ä¸€ä¸ªå›å½’æ ‘</p><p>2-4 æ›´æ–°ç°æœ‰çš„æ¨¡å‹</p><p>2-5 å¾—åˆ°æœ€ç»ˆçš„å›å½’æ ‘</p><p><a href="Gradient%20Boosting%E7%AE%97%E6%B3%95%E7%9A%84%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90%20adea61fa3573481aaf9534834231c2c8/gradient_boosting.pdf">gradient_boosting.pdf</a></p><p>æ¯ä¸€æ¬¡å»ºç«‹æ¨¡å‹æ˜¯åœ¨ä¹‹å‰å»ºç«‹æ¨¡å‹æŸå¤±å‡½æ•°çš„æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼ŒæŸå¤±å‡½æ•°æ˜¯è¯„ä»·æ¨¡å‹æ€§èƒ½ï¼Œå¦‚æœå¯ä»¥è®©æŸå¤±å‡½æ•°å¯ä»¥æŒç»­ä¸‹é™ï¼Œå°±èƒ½å¤Ÿä½¿å¾—æ¨¡å‹å¯ä»¥ä¸æ–­æ”¹å˜æå‡æ€§èƒ½ï¼Œå…¶ä¸­æœ€å¥½çš„æ–¹æ³•æ˜¯è®©æŸå¤±å‡½æ•°å¯ä»¥æ²¿ç€æ¢¯åº¦çš„ä¸‹é™è¿›è¡Œæ›´æ–°è¿­ä»£</p><h2 id="32-æ¢¯åº¦æå‡-gradient-boostingfor-regression-dt"><a class="markdownIt-Anchor" href="#32-æ¢¯åº¦æå‡-gradient-boostingfor-regression-dt"></a> 3.2 æ¢¯åº¦æå‡ Gradient Boostingï¼ˆfor regression DTï¼‰</h2><p>æœ€å¼€å§‹GBDTåªèƒ½è§£å†³å›å½’é—®é¢˜ï¼Œä½†æ˜¯åç»­å·¥ä¸šçš„è°ƒæ•´ä¹‹åå…è®¸åˆ†ç±»</p><p>ä»ä¸Šè¿°æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå¯¹äºåˆ†ç±»å’Œå›å½’æ¨¡å‹ä¸‹æ¥çš„æ€è·¯ï¼Œä½†æ˜¯åç»­æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåŠï¼Ÿå¯¹äºå…¶ä»–ç±»å‹çš„æŸå¤±å‡½æ•°ï¼Œæˆ‘ä»¬å¦‚ä½•å»è®­ç»ƒæ•´ä¸ªè¿‡ç¨‹ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦åˆ©ç”¨æ¢¯åº¦ä¸‹é™ï¼ˆGradient decentçš„æ€è·¯ï¼‰</p><p>æ®‹å·®å…¶å®æ˜¯æ ¹æ®å¾ˆç›´è§‰çš„æƒ³æ³•æ¥å¾—åˆ°çš„ï¼Œä½†æ˜¯å¯¹äºæ›´åŠ å¤æ‚çš„æŸå¤±å‡½æ•°æ¯”å¦‚äº¤å‰ç†µä¹‹ç±»çš„ï¼Œç®€å•çš„æ®‹å·®æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥ä¸ºäº†ä¿è¯æ•´ä¸ªç®—æ³•å¯ä»¥èµ°ä¸‹å»ï¼Œä½¿ç”¨æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>âˆ’</mo><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi><mo>(</mo><mi>y</mi><mo separator="true">,</mo><msub><mi>f</mi><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>)</mo></mrow><mrow><msub><mi>f</mi><mrow><mi>m</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">-\frac{\partial L(y,f_{m-1}(x))}{f_{m-1}(x)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.363em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord">âˆ’</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">L</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.10764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>åœ¨å…¶ä¸­ä½¿ç”¨shrinkageçš„æ–¹æ³•ï¼Œæ¥ä¿è¯æ¯æ¬¡ä»…ä»…æ”¹å˜ä¸€ä¸ï¼Œæ¥é€æ¸çš„å¾—åˆ°æ¢¯åº¦æå‡å›å½’æ ‘</p>â<p>å¯ä»¥çœ‹å‡ºæ¢¯åº¦æå‡ï¼ˆGradient Boostingï¼‰å’ŒAdaBoostä¹‹é—´çš„ç»†å¾®çš„åŒºåˆ«åœ¨äºï¼šå¯¹äºé”™è¯¯çš„æ•°æ®ï¼ŒAdaBoosté‡‡ç”¨æ”¹å˜å…¶æ ·æœ¬åˆ†å¸ƒçš„æƒé‡å¢å¤§æ¯”ä¾‹ï¼Œè€Œæ¢¯åº¦æå‡æ˜¯åˆ©ç”¨æ®‹å·®çš„å¤§å°æ¥æé«˜é”™è¯¯æ•°æ®åœ¨æ¨¡å‹ä¸­çš„é‡è¦æ€§</p><h1 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> referenceï¼š</h1><p>ã€Šç»Ÿè®¡å­¦ä¹ æ–¹æ³•ã€‹-æèˆª</p><p>ã€Šæœºå™¨å­¦ä¹ ã€‹-å‘¨å¿—å</p><p><a href="https://blog.csdn.net/shine19930820/article/details/65633436">https://blog.csdn.net/shine19930820/article/details/65633436</a></p><p><a href="https://www.ccs.neu.edu/home/vip/teach/MLcourse/4_boosting/slides/gradient_boosting.pdf">https://www.ccs.neu.edu/home/vip/teach/MLcourse/4_boosting/slides/gradient_boosting.pdf</a></p><p>[<a href="https://blog.csdn.net/shine19930820/article/details/65633436">https://blog.csdn.net/shine19930820/article/details/65633436</a>](</p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Single</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ›æ‰£top100-1ï½20</title>
    <link href="/posts/67984991.html"/>
    <url>/posts/67984991.html</url>
    
    <content type="html"><![CDATA[<p>é€‚åˆåˆå§‹ç®—æ³•ä¸æ•°æ®ç»“æ„çš„æ–°æ‰‹å’Œæƒ³è¦åœ¨çŸ­æ—¶é—´å†…é«˜æ•ˆæå‡çš„äººï¼Œç†Ÿç»ƒæŒæ¡è¿™100é“é¢˜ï¼Œå¯ä»¥å…·å¤‡åœ¨ä»£ç ä¸–ç•Œé€šè¡Œçš„åŸºæœ¬èƒ½åŠ›ã€‚æƒ³å€Ÿè¿™ä¸€ç™¾é“é¢˜æ¥äº†è§£ä¸€ä¸‹ç®—æ³•çš„ä¸€äº›åŸºæœ¬æ€æƒ³ã€‚æœ¬æ¬¡ä¸»è¦ä¸ºé¢˜å·1ï½20å…±11é“é¢˜ã€‚ç¬¬å››é¢˜æ˜¯é‡ç‚¹ã€‚</p><span id="more"></span><h2 id="0x00-è‡ªæˆ‘æ€»ç»“"><a class="markdownIt-Anchor" href="#0x00-è‡ªæˆ‘æ€»ç»“"></a> 0x00 è‡ªæˆ‘æ€»ç»“</h2><p>æ•°æ®ç»“æ„å’Œç®—æ³•æ˜¯çœ‹å¾…ä¸€é“é¢˜ç›®çš„ä¸åŒè§£è¯»ã€‚æ•°æ®ç»“æ„æ›´å¤šçš„æ˜¯å¦‚ä½•å»è¡¨è¿°ä¸€ä»¶äº‹æƒ…ï¼Œä¸åŒçš„æ•°æ®ç»“æ„å…·æœ‰ä¸åŒçš„æ—¶é—´ç©ºé—´å¤æ‚åº¦çš„æ€§èƒ½å’Œä¸åŒçš„æ¥å£ï¼Œè¿™ä¹Ÿæ˜¯ä¸åŒæ•°æ®ç»“æ„çš„ç‰¹ç‚¹æ‰€åœ¨ï¼Œç®—æ³•æ›´å¤šçš„æ˜¯è§£å†³é—®é¢˜çš„æµç¨‹ï¼Œå¦‚ä½•æŠŠæ‰‹é‡Œé¢å·²ç»æœ‰çš„æ•°æ®ç»“æ„é€šè¿‡ä¸‰ç§åŸºæœ¬çš„é€»è¾‘è¿ç®—ç»“åˆå½¢æˆé«˜æ•ˆçš„æ“ä½œæµç¨‹ã€‚</p><p>åœ¨åˆ·é¢˜ä¹‹å‰æŒæ¡å…·æœ‰å“ªäº›å¸¸è§çš„æ•°æ®ç»“æ„å’Œç®—æ³•æ˜¯æœ‰å¿…è¦çš„ï¼Œæ•°æ®ç»“æ„å¯ä»¥åˆ†ä¸ºçº¿æ€§æ•°æ®ç»“æ„ï¼šæ ˆå’Œé˜Ÿåˆ—ã€æ•°æ®ä¸çŸ©é˜µï¼›åŠçº¿æ€§ç»“æ„ï¼šæ ‘ï¼Œéçº¿æ€§ç»“æ„ï¼šé“¾è¡¨ã€æ•°ç»„ã€å›¾ã€ä½è¿ç®—ç­‰ï¼›ä»ç®—æ³•çš„è§’åº¦å¯ä»¥åˆ†ä¸ºåŸºæœ¬ï¼šåˆ†æ²»ã€è´ªå¿ƒã€åŠ¨æ€è§„åˆ’ã€å›æº¯ã€åˆ†æå®šç•Œï¼›å’Œä¸€äº›ç‰¹æ®Šçš„æŠ€å·§åŒæŒ‡é’ˆã€äºŒåˆ†æŸ¥æ‰¾ã€æœç´¢æ³•ç­‰ï¼Œä»¥åŠç‰¹å®šçš„åœºæ™¯æ’åºã€æ ‘çš„æœç´¢ç­‰</p><h2 id="0x01-t1-ä¸¤æ•°ä¹‹å’Œ"><a class="markdownIt-Anchor" href="#0x01-t1-ä¸¤æ•°ä¹‹å’Œ"></a> 0x01 T1 ä¸¤æ•°ä¹‹å’Œ</h2><p>æ ‡ç­¾ï¼šæ•°ç»„ã€å“ˆå¸Œè¡¨</p><p>éš¾åº¦ï¼šç®€å•</p><blockquote><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target  çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚ä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚</p></blockquote><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">class</span> Solution:<br>    def twoSum(self, nums: List[<span class="hljs-built_in">int</span>], <span class="hljs-keyword">target</span>: <span class="hljs-built_in">int</span>) -&gt; List[<span class="hljs-built_in">int</span>]:<br>        hashtable=dict()<br>        # æ–°å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œæ¥è®°å½•æ¯ä¸ªæ•°å­—å®ƒå¯¹åº”çš„è¡¥æ•°<br>        for i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(len(nums)):<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">target</span>-nums[i] <span class="hljs-keyword">in</span> hashtable:<br>            # åœ¨è¿™ä¸ªå“ˆå¸Œè¡¨ä¸­å°±OKäº†ï¼Œè€Œä¸”è¿™ä¸ªæ—¶é—´å¤æ‚åº¦å¹¶ä¸é«˜<br>                <span class="hljs-keyword">return</span> [hashtable[<span class="hljs-keyword">target</span>-nums[i]],i]<br>            hashtable[nums[i]]=i<br>        <span class="hljs-keyword">return</span> []<br></code></pre></td></tr></table></figure><h2 id="0x02-t2-ä¸¤æ•°ç›¸åŠ "><a class="markdownIt-Anchor" href="#0x02-t2-ä¸¤æ•°ç›¸åŠ "></a> 0x02 T2 ä¸¤æ•°ç›¸åŠ </h2><p>æ ‡ç­¾ï¼šé€’å½’ã€é“¾è¡¨ã€æ ‡ç­¾</p><p>éš¾åº¦ï¼šä¸­ç­‰</p><blockquote><p>ç»™ä½ ä¸¤ä¸ª éç©º çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚</p><p>è¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚</p><p>ä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, next=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.next = next</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">addTwoNumbers</span>(<span class="hljs-params">self, l1,l2</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">addTwoNumbers2</span>(<span class="hljs-params">l1, l2, flag</span>):<br>            <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">            ä¸‰ç§æƒ…å†µ</span><br><span class="hljs-string">            æƒ…å†µ1ï¼šé“¾è¡¨éƒ½å­˜åœ¨ï¼Œl1!=None</span><br><span class="hljs-string">            æƒ…å†µ2ï¼šé“¾è¡¨ä¸å­˜åœ¨ï¼Œèµ‹å€¼ä¸º0</span><br><span class="hljs-string">            è®¡ç®—ä¸¤æ•°ä¹‹å’Œ</span><br><span class="hljs-string">            å¦‚æœå¤§äº10ï¼Œåˆ™valä¸ºä½™æ•°</span><br><span class="hljs-string">            flagå€¼ä¸º1</span><br><span class="hljs-string">            é“¾è¡¨ä¸å­˜åœ¨å¹¶ä¸”flag==0ï¼Œåˆ™å¾ªç¯ç»ˆæ­¢ï¼Œè¾“å‡ºæœ€ç»ˆçš„é“¾è¡¨</span><br><span class="hljs-string">            é“¾è¡¨å­˜åœ¨ï¼Œåˆ™ç»§ç»­ä¸‹ä¸€ä¸ªå¾ªç¯</span><br><span class="hljs-string">            &#x27;&#x27;&#x27;</span><br>            <span class="hljs-keyword">if</span> l1!=<span class="hljs-literal">None</span>:<br>                num1=l1.val<br>                l1=l1.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                num1 = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">if</span> l2!=<span class="hljs-literal">None</span>:<br>                num2=l2.val<br>                l2=l2.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                num2 = <span class="hljs-number">0</span><br>            <span class="hljs-comment"># æ›´æ–°æ±‚å’Œ</span><br>            sum_result = num1 + num2 + flag<br>            <span class="hljs-comment"># ç»“æœæ±‚ä½™</span><br>            val = sum_result % <span class="hljs-number">10</span><br>            <span class="hljs-comment"># æ›´æ–°flagï¼Œå¤§äº9è®¾ç½®ä¸º1ï¼Œå…¶ä»–çš„åˆ™ä¸º0</span><br>            <span class="hljs-keyword">if</span> sum_result &gt; <span class="hljs-number">9</span>:<br>                flag = <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                flag = <span class="hljs-number">0</span><br>            <span class="hljs-comment"># ç»ˆæ­¢æ¡ä»¶ï¼Œl1ä¸ºç©ºï¼Œå¹¶ä¸”flagä¸º0</span><br>            <span class="hljs-keyword">if</span> l1 == <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> l2==<span class="hljs-literal">None</span> <span class="hljs-keyword">and</span>  flag == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">return</span> ListNode(val)<br>            <span class="hljs-keyword">return</span> ListNode(val, addTwoNumbers2(l1, l2, flag))<br>        <span class="hljs-keyword">return</span> addTwoNumbers2(l1,l2,<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><h2 id="0x03-t3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a class="markdownIt-Anchor" href="#0x03-t3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"></a> 0x03 T3 æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</h2><p>æ ‡ç­¾ï¼šå­—ç¬¦ä¸²ï¼Œæ»‘åŠ¨çª—å£å“ˆå¸Œè¡¨</p><p>éš¾åº¦ï¼šä¸­ç­‰</p><blockquote><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code> ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ <strong>æœ€é•¿å­ä¸²</strong> çš„é•¿åº¦</p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vim">class Solution:<br>    def lengthOfLongestSubstring(self, s: str) -&gt; <span class="hljs-keyword">int</span>:<br>    # æ„Ÿè§‰æ¯”è¾ƒç®€å•<br>        <span class="hljs-keyword">if</span> not <span class="hljs-variable">s:return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">left</span> = <span class="hljs-number">0</span><br>        lookup = <span class="hljs-keyword">set</span>()<br>        n = <span class="hljs-built_in">len</span>(s)<br>        max_len = <span class="hljs-number">0</span><br>        cur_len = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i in <span class="hljs-built_in">range</span>(n):<br>            cur_len += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> s[i] in lookup:<br>                lookup.<span class="hljs-built_in">remove</span>(s[<span class="hljs-keyword">left</span>])<br>                <span class="hljs-keyword">left</span> += <span class="hljs-number">1</span><br>                cur_len -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> cur_len &gt; max_len:max_len = cur_len<br>            lookup.<span class="hljs-built_in">add</span>(s[i])<br>        <span class="hljs-keyword">return</span> max_len<br></code></pre></td></tr></table></figure><h2 id="0x04-t4-å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°"><a class="markdownIt-Anchor" href="#0x04-t4-å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°"></a> 0x04 T4 å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°</h2><p>æ ‡ç­¾ï¼šæ•°ç»„ã€äºŒåˆ†æŸ¥æ‰¾ã€åˆ†æ²»</p><p>éš¾åº¦ï¼šå›°éš¾</p><blockquote><p>ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ ä¸­ä½æ•° ã€‚</p><p>ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º O(log (m+n)) ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findMedianSortedArrays</span>(<span class="hljs-params">self, nums1, nums2</span>):<br>        <span class="hljs-comment"># even éœ€è¦æ‰¾ï¼ˆm+n+1ï¼‰/2</span><br>        <span class="hljs-comment"># odd éœ€è¦æ‰¾ï¼ˆm+nï¼‰/2 ï¼ˆm+nï¼‰/2+1</span><br>        m=<span class="hljs-built_in">len</span>(nums1)<br>        n=<span class="hljs-built_in">len</span>(nums2)<br>        <span class="hljs-keyword">if</span> (m+n)%<span class="hljs-number">2</span> ==<span class="hljs-number">1</span>:<br>            <span class="hljs-comment"># odd</span><br>            <span class="hljs-keyword">return</span> self.getK(nums1,nums2,(m+n+<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>)<br>        <span class="hljs-keyword">else</span>:<br>        <span class="hljs-comment"># even</span><br>            a=self.getK(nums1,nums2,(m+n)/<span class="hljs-number">2</span>)<br>            b=self.getK(nums1,nums2,(m+n)/<span class="hljs-number">2</span>+<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> (a+b)/<span class="hljs-number">2</span><br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">getK</span>(<span class="hljs-params">self,nums1,nums2,k</span>):<br>        <span class="hljs-comment"># nums1ï¼šç¬¬ä¸€ä¸ªæ­£åºçš„æ•°ç»„</span><br>        <span class="hljs-comment"># nums2ï¼šç¬¬äºŒæ­£åºçš„æ•°ç»„</span><br>        <span class="hljs-comment"># kï¼šä¸¤ä¸ªå¹¶åˆ—æ•°ç»„ä¸­ç¬¬kå¤§çš„æ•°ç»„</span><br>        <span class="hljs-comment"># ç»ˆæ­¢æ¡ä»¶ä¸ºï¼Œkä¸º1</span><br>        k=<span class="hljs-built_in">int</span>(k)<br>        m=<span class="hljs-built_in">len</span>(nums1)<br>        n=<span class="hljs-built_in">len</span>(nums2)<br>        index1,index2=<span class="hljs-built_in">int</span>(<span class="hljs-built_in">min</span>(k//<span class="hljs-number">2</span>,m))-<span class="hljs-number">1</span>,<span class="hljs-built_in">int</span>(<span class="hljs-built_in">min</span>(k//<span class="hljs-number">2</span>,n))-<span class="hljs-number">1</span><br>        <span class="hljs-comment"># ä¸¤ä¸ªæ­£åºæ•°ç»„ä¸­çš„å€¼</span><br>        <span class="hljs-keyword">if</span> m==<span class="hljs-number">0</span>:<br>            <span class="hljs-comment"># ç¬¬ä¸€ä¸ªæ•°ç»„åˆ°å¤´</span><br>            <span class="hljs-keyword">return</span> nums2[k-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span> n==<span class="hljs-number">0</span>:<br>            <span class="hljs-comment"># è¯´æ˜ç¬¬äºŒä¸ªæ•°ç»„åˆ°å¤´</span><br>            <span class="hljs-keyword">return</span> nums1[k-<span class="hljs-number">1</span>]<br>        <span class="hljs-keyword">if</span> k==<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(nums1[<span class="hljs-number">0</span>],nums2[<span class="hljs-number">0</span>])<br>        <span class="hljs-comment"># ä¸‹é¢æ¥çœ‹å¦‚ä½•æ›´æ–°è¿­ä»£</span><br>        value1=nums1[index1]<br>        value2=nums2[index2]<br>        <span class="hljs-keyword">if</span> value1 &lt;= value2:<br>            k=k-index1-<span class="hljs-number">1</span><br>            nums1=nums1[index1+<span class="hljs-number">1</span>:]<br>        <span class="hljs-keyword">else</span>:<br>            k=k-index2-<span class="hljs-number">1</span><br>            nums2=nums2[index2+<span class="hljs-number">1</span>:]<br>        <span class="hljs-keyword">return</span> self.getK(nums1,nums2,k)<br></code></pre></td></tr></table></figure><h2 id="0x05-t5-æœ€é•¿å›æ–‡å­ä¸²"><a class="markdownIt-Anchor" href="#0x05-t5-æœ€é•¿å›æ–‡å­ä¸²"></a> 0x05 T5 æœ€é•¿å›æ–‡å­ä¸²</h2><p>æ ‡ç­¾ï¼šå­—ç¬¦ä¸²ï¼ŒåŠ¨æ€è§„åˆ’</p><p>éš¾åº¦ï¼šä¸­ç­‰</p><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code>ï¼Œæ‰¾åˆ° <code>s</code> ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚</p></blockquote><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">class</span> Solution:<br>    <span class="hljs-attribute">def</span> longestPalindrome(self, s: str) -&gt; str:<br>        <span class="hljs-comment">## dynamic programing ,åŸºæœ¬æ­¥éª¤æ˜¯ç¡®å®šä¸‹æ ‡çš„å«ä¹‰å’Œé€’æ¨å…¬å¼çš„å«ä¹‰</span><br>        <span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼Œç¡®å®šdpæ•°æ®ï¼Œç”¨dpã€i,jã€‘æ¥è¡¨ç¤ºåŒºé—´èŒƒå›´å†…çš„æ·„å·æ˜¯å¦ä¸ºå›æ–‡å­ä¸²dp[i][j]æ˜¯å¦ä¸ºtrue</span><br>        <span class="hljs-comment"># ç¬¬äºŒæ­¥ï¼Œç¡®å®šé€’æ¨çš„ä¸‰ç§æƒ…å†µï¼Œå›æ–‡æ•°å–çœŸçš„æƒ…å†µåˆ†ä¸º</span><br>        <span class="hljs-comment"># 1. i=jç›¸ç­‰ï¼Œtrue</span><br>        <span class="hljs-comment"># 2. iå’Œjç›¸å·®ç­‰äº1ï¼Œtrue</span><br>        <span class="hljs-comment"># 3. iå’Œjç›¸å·®å¤§äº1çš„æƒ…å†µï¼Œå¦‚æœiå’Œjç›¸ç­‰ï¼Œéœ€è¦æŸ¥çœ‹iå’Œjçš„åŒºé—´å†…éƒ¨æ˜¯ä¸æ˜¯ç›¸ç­‰ï¼Œä¹Ÿå°±æ˜¯dp[i+1][j-1]æ˜¯ä¸æ˜¯true</span><br>        <span class="hljs-comment"># ç¬¬ä¸‰æ­¥ï¼Œç¡®å®šdpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–ï¼Œå½“ç„¶éƒ½æ˜¯false</span><br>        <span class="hljs-comment"># ç¬¬å››æ­¥ï¼Œä¸ºäº†ä¿è¯dp[i+1][j-1]è¦æœ€æ–°å¼€å§‹è®¡ç®—,æ‰€ä»¥å¯ä»¥å…ˆå°†ç¬¬ä¸€ç§æƒ…å†µå’Œç¬¬äºŒç§æƒ…å†µå…ˆå¾—åˆ°</span><br><br>        <span class="hljs-attribute">dp</span>=[[<span class="hljs-number">0</span> for i in range(len(s))] for j in range(len(s))]<br>        <span class="hljs-attribute">left</span> = <span class="hljs-number">0</span><br>        <span class="hljs-attribute">right</span> = <span class="hljs-number">0</span><br>        <span class="hljs-attribute">maxlength</span>=<span class="hljs-number">0</span><br>        <span class="hljs-attribute">for</span> i in range(len(s)-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>):<br>            <span class="hljs-attribute">for</span> j in range(i, len(s)):<br>                <span class="hljs-attribute">if</span> s[i]==s[j]:<br>                    <span class="hljs-attribute">if</span> (j - i &lt;= <span class="hljs-number">1</span>):<br>                        <span class="hljs-attribute">dp</span>[i][j] = <span class="hljs-number">1</span><br>                    <span class="hljs-attribute">elif</span> dp[i + <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] == <span class="hljs-number">1</span>:<br>                        <span class="hljs-attribute">dp</span>[i][j] = <span class="hljs-number">1</span><br>                <span class="hljs-attribute">if</span> dp[i][j] == <span class="hljs-number">1</span> and j - i + <span class="hljs-number">1</span> &gt; maxlength:<br>                    <span class="hljs-attribute">maxlength</span> = j - i + <span class="hljs-number">1</span><br>                    <span class="hljs-attribute">left</span> = i<br>                    <span class="hljs-attribute">right</span> = j<br>        <span class="hljs-attribute">return</span> s[left:right + <span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure><h2 id="0x06-t10-æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"><a class="markdownIt-Anchor" href="#0x06-t10-æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"></a> 0x06 T10 æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</h2><p>æ ‡ç­¾ï¼šå­—ç¬¦ä¸²ã€é€’å½’ã€åŠ¨æ€è§„åˆ’</p><p>éš¾åº¦ï¼šå›°éš¾</p><blockquote><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦è§„å¾‹ pï¼Œè¯·ä½ æ¥å®ç°ä¸€ä¸ªæ”¯æŒ â€˜.â€™ å’Œ â€˜*â€™ çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚</p><p>â€˜.â€™ åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦<br />â€˜*â€™ åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ <br />æ‰€è°“åŒ¹é…ï¼Œæ˜¯è¦æ¶µç›– æ•´ä¸ª å­—ç¬¦ä¸² sçš„ï¼Œè€Œä¸æ˜¯éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚</p></blockquote><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs prolog">class <span class="hljs-symbol">Solution</span>:<br>    def isMatch(self, s: str, p: str) -&gt; bool:<br>        m, n = len(s), len(p)<br><br>        def matches(i: int, j: int) -&gt; bool:<br>            if i == <span class="hljs-number">0</span>:<br>                return <span class="hljs-symbol">False</span><br>            if p[j - <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;.&#x27;</span>:<br>                return <span class="hljs-symbol">True</span><br>            return s[i - <span class="hljs-number">1</span>] == p[j - <span class="hljs-number">1</span>]<br><br>        f = [[<span class="hljs-symbol">False</span>] * (n + <span class="hljs-number">1</span>) for <span class="hljs-symbol">_</span> in range(m + <span class="hljs-number">1</span>)]<br>        f[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-symbol">True</span><br>        for i in range(m + <span class="hljs-number">1</span>):<br>            for j in range(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>                if p[j - <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;*&#x27;</span>:<br>                    f[i][j] |= f[i][j - <span class="hljs-number">2</span>]<br>                    if matches(i, j - <span class="hljs-number">1</span>):<br>                        f[i][j] |= f[i - <span class="hljs-number">1</span>][j]<br>                else:<br>                    if matches(i, j):<br>                        f[i][j] |= f[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]<br>        return f[m][n]<br></code></pre></td></tr></table></figure><h2 id="0x07-t11-ç››æœ€å¤šæ°´çš„å®¹å™¨"><a class="markdownIt-Anchor" href="#0x07-t11-ç››æœ€å¤šæ°´çš„å®¹å™¨"></a> 0x07 T11 ç››æœ€å¤šæ°´çš„å®¹å™¨</h2><p>æ ‡ç­¾ï¼šè´ªå¿ƒã€æ•°ç»„ã€åŒæŒ‡é’ˆ</p><p>éš¾åº¦ï¼šä¸­ç­‰</p><blockquote><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ height ã€‚æœ‰ n æ¡å‚çº¿ï¼Œç¬¬ i æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ (i, 0) å’Œ (i, height[i]) ã€‚</p><p>æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ x è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚</p><p>è¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚</p><p>è¯´æ˜ï¼šä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql">class Solution:<br>    def maxArea(self, height):<br>        # æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œæ‰¾å‡ºå…¶ä¸­ä¸xè½´æ„æˆå¯ä»¥å®¹çº³æœ€å¤šçš„æ°´<br>        <span class="hljs-keyword">left</span><span class="hljs-operator">=</span><span class="hljs-number">0</span><br>        <span class="hljs-keyword">right</span><span class="hljs-operator">=</span>len(height)<span class="hljs-number">-1</span><br>        <span class="hljs-keyword">result</span><span class="hljs-operator">=</span><span class="hljs-number">0</span><br>        while <span class="hljs-keyword">left</span> <span class="hljs-operator">&lt;</span> <span class="hljs-keyword">right</span>:<br>            <span class="hljs-keyword">result</span><span class="hljs-operator">=</span><span class="hljs-built_in">max</span>(<span class="hljs-keyword">result</span>,<span class="hljs-built_in">min</span>(height[<span class="hljs-keyword">right</span>],height[<span class="hljs-keyword">left</span>])<span class="hljs-operator">*</span>(<span class="hljs-keyword">right</span><span class="hljs-operator">-</span><span class="hljs-keyword">left</span>))<br>            # æ›´æ–°<span class="hljs-keyword">right</span>å’Œ<span class="hljs-keyword">left</span><br>            # æå‡çš„æ„ä¹‰ï¼Œåœ¨äºåˆ é™¤å°äºå½“å‰å€¼<br>            if height[<span class="hljs-keyword">right</span>]<span class="hljs-operator">&gt;</span>height[<span class="hljs-keyword">left</span>]:<br>                <span class="hljs-keyword">left</span><span class="hljs-operator">=</span><span class="hljs-keyword">left</span><span class="hljs-operator">+</span><span class="hljs-number">1</span>   <br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">right</span><span class="hljs-operator">=</span><span class="hljs-keyword">right</span><span class="hljs-number">-1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">result</span><br></code></pre></td></tr></table></figure><h2 id="0x08-t15-ä¸‰æ•°ä¹‹å’Œ"><a class="markdownIt-Anchor" href="#0x08-t15-ä¸‰æ•°ä¹‹å’Œ"></a> 0x08 T15 ä¸‰æ•°ä¹‹å’Œ</h2><p>æ ‡ç­¾ï¼šæ•°ç»„ã€åŒæŒ‡é’ˆã€æ’åº</p><p>éš¾åº¦ï¼šä¸­ç­‰</p><blockquote><p>ç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾— a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p></blockquote><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-keyword">class</span> Solution:<br>    def twoSum(self, nums: List[<span class="hljs-built_in">int</span>], <span class="hljs-keyword">target</span>: <span class="hljs-built_in">int</span>) -&gt; List[<span class="hljs-built_in">int</span>]:<br>        hashtable=dict()<br>        # æ–°å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œæ¥è®°å½•æ¯ä¸ªæ•°å­—å®ƒå¯¹åº”çš„è¡¥æ•°<br>        for i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(len(nums)):<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">target</span>-nums[i] <span class="hljs-keyword">in</span> hashtable:<br>            # åœ¨è¿™ä¸ªå“ˆå¸Œè¡¨ä¸­å°±OKäº†ï¼Œè€Œä¸”è¿™ä¸ªæ—¶é—´å¤æ‚åº¦å¹¶ä¸é«˜<br>                <span class="hljs-keyword">return</span> [hashtable[<span class="hljs-keyword">target</span>-nums[i]],i]<br>            hashtable[nums[i]]=i<br>        <span class="hljs-keyword">return</span> []<br></code></pre></td></tr></table></figure><h2 id="0x09-t17ç”µè¯å·ç çš„å­—ç¬¦ç»„åˆ"><a class="markdownIt-Anchor" href="#0x09-t17ç”µè¯å·ç çš„å­—ç¬¦ç»„åˆ"></a> 0x09 T17ç”µè¯å·ç çš„å­—ç¬¦ç»„åˆ</h2><p>æ ‡ç­¾ï¼šå­—ç¬¦ä¸²ã€å“ˆå¸Œè¡¨ã€å›æº¯</p><p>éš¾åº¦ï¼šä¸­ç­‰</p><blockquote><p>ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— <code>2-9</code> çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›ã€‚</p></blockquote><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs prolog">class <span class="hljs-symbol">Solution</span>:<br>    def letterCombinations(self, digits: str) -&gt; <span class="hljs-symbol">List</span>[str]:<br>        if not digits: return []<br><br>        phone = &#123;<span class="hljs-string">&#x27;2&#x27;</span>:[<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>],<br>                 <span class="hljs-string">&#x27;3&#x27;</span>:[<span class="hljs-string">&#x27;d&#x27;</span>,<span class="hljs-string">&#x27;e&#x27;</span>,<span class="hljs-string">&#x27;f&#x27;</span>],<br>                 <span class="hljs-string">&#x27;4&#x27;</span>:[<span class="hljs-string">&#x27;g&#x27;</span>,<span class="hljs-string">&#x27;h&#x27;</span>,<span class="hljs-string">&#x27;i&#x27;</span>],<br>                 <span class="hljs-string">&#x27;5&#x27;</span>:[<span class="hljs-string">&#x27;j&#x27;</span>,<span class="hljs-string">&#x27;k&#x27;</span>,<span class="hljs-string">&#x27;l&#x27;</span>],<br>                 <span class="hljs-string">&#x27;6&#x27;</span>:[<span class="hljs-string">&#x27;m&#x27;</span>,<span class="hljs-string">&#x27;n&#x27;</span>,<span class="hljs-string">&#x27;o&#x27;</span>],<br>                 <span class="hljs-string">&#x27;7&#x27;</span>:[<span class="hljs-string">&#x27;p&#x27;</span>,<span class="hljs-string">&#x27;q&#x27;</span>,<span class="hljs-string">&#x27;r&#x27;</span>,<span class="hljs-string">&#x27;s&#x27;</span>],<br>                 <span class="hljs-string">&#x27;8&#x27;</span>:[<span class="hljs-string">&#x27;t&#x27;</span>,<span class="hljs-string">&#x27;u&#x27;</span>,<span class="hljs-string">&#x27;v&#x27;</span>],<br>                 <span class="hljs-string">&#x27;9&#x27;</span>:[<span class="hljs-string">&#x27;w&#x27;</span>,<span class="hljs-string">&#x27;x&#x27;</span>,<span class="hljs-string">&#x27;y&#x27;</span>,<span class="hljs-string">&#x27;z&#x27;</span>]&#125;<br>                <br>        def backtrack(conbination,nextdigit):<br>            if len(nextdigit) == <span class="hljs-number">0</span>:<br>                res.append(conbination)<br>            else:<br>                for letter in phone[nextdigit[<span class="hljs-number">0</span>]]:<br>                    backtrack(conbination + letter,nextdigit[<span class="hljs-number">1</span>:])<br><br>        res = []<br>        backtrack(<span class="hljs-string">&#x27;&#x27;</span>,digits)<br>        return res<br></code></pre></td></tr></table></figure><h2 id="0x10-t19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#0x10-t19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹"></a> 0x10 T19 åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹</h2><p>æ ‡ç­¾ï¼šé“¾è¡¨ï¼ŒåŒæŒ‡é’ˆ</p><p>éš¾åº¦ï¼šä¸­ç­‰</p><blockquote><p>ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ <code>n</code> ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</p></blockquote><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-comment"># class ListNode:</span><br><span class="hljs-comment">#     def __init__(self, val=0, next=None):</span><br><span class="hljs-comment">#         self.val = val</span><br><span class="hljs-comment">#         self.next = next</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">removeNthFromEnd</span>(<span class="hljs-params"><span class="hljs-variable language_">self</span>, <span class="hljs-symbol">head:</span> ListNode, <span class="hljs-symbol">n:</span> int</span>) -&gt; <span class="hljs-symbol">ListNode:</span><br>        dummy = ListNode(<span class="hljs-number">0</span>, head)<br>        first = head<br>        second = dummy<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n):<br>            first = first.<span class="hljs-keyword">next</span><br><br>        <span class="hljs-keyword">while</span> <span class="hljs-symbol">first:</span><br>            first = first.<span class="hljs-keyword">next</span><br>            second = second.<span class="hljs-keyword">next</span><br>        <br>        second.<span class="hljs-keyword">next</span> = second.<span class="hljs-keyword">next</span>.<span class="hljs-keyword">next</span><br>        <span class="hljs-keyword">return</span> dummy.<span class="hljs-keyword">next</span><br></code></pre></td></tr></table></figure><h2 id="0x11-t20-æœ‰æ•ˆçš„æ‹¬å·"><a class="markdownIt-Anchor" href="#0x11-t20-æœ‰æ•ˆçš„æ‹¬å·"></a> 0x11 T20 æœ‰æ•ˆçš„æ‹¬å·</h2><p>æ ‡ç­¾ï¼šæ ˆã€å­—ç¬¦ä¸²</p><p>éš¾åº¦ï¼šç®€å•</p><blockquote><p>ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€™ï¼Œâ€˜)â€™ï¼Œâ€˜{â€™ï¼Œâ€˜}â€™ï¼Œâ€˜[â€™ï¼Œâ€˜]â€™ çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p><p>æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š</p><p>å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚<br />å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚</p></blockquote><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">class</span> Solution:<br>    <span class="hljs-keyword">def</span> isValid(self, s: str) -&gt; bool:<br>        stack = []<br>        <br>        <span class="hljs-keyword">for</span> item in s:<br>            <span class="hljs-keyword">if</span> item == <span class="hljs-string">&#x27;(&#x27;</span>:<br>                stack.<span class="hljs-keyword">append</span>(<span class="hljs-string">&#x27;)&#x27;</span>)<br>            elif item == <span class="hljs-string">&#x27;[&#x27;</span>:<br>                stack.<span class="hljs-keyword">append</span>(<span class="hljs-string">&#x27;]&#x27;</span>)<br>            elif item == <span class="hljs-string">&#x27;&#123;&#x27;</span>:<br>                stack.<span class="hljs-keyword">append</span>(<span class="hljs-string">&#x27;&#125;&#x27;</span>)<br>            elif not stack or stack[-<span class="hljs-number">1</span>] != item:<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">False</span><br>            <span class="hljs-keyword">else</span>:<br>                stack.<span class="hljs-keyword">pop</span>()<br>        <br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">True</span> <span class="hljs-keyword">if</span> not stack <span class="hljs-keyword">else</span> <span class="hljs-keyword">False</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>DataStructure</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•03-æœç´¢æ ‘</title>
    <link href="/posts/1866a43d.html"/>
    <url>/posts/1866a43d.html</url>
    
    <content type="html"><![CDATA[<p>äºŒå‰æ ‘ä¸­ä¸‰ç§éå†æ–¹å¼ï¼šå‰åºéå†ã€ååºéå†å’Œä¸­åºéå†ï¼›åœ¨æ™®é€šäºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢searchã€æ’å…¥insertã€åˆ é™¤removeä¸­çš„ç®—æ³•æ•ˆç‡æˆ–è€…è¯´å¤æ‚åº¦å’Œæ ‘çš„æ·±åº¦æœ‰å…³ã€‚å› æ­¤åœ¨æ ‘çš„ç­‰ä»·äº¤æ¢å’ŒåŸºæœ¬æ“ä½œçš„åŸºç¡€ä¸Šï¼Œæå‡ºäº†å¹³è¡¡äºŒå‰æ ‘ï¼ˆBBSTï¼ŒBalanced binary search treeï¼‰çš„æ¦‚å¿µï¼Œç”±æ­¤å»¶ä¼¸å¾—åˆ°AVLã€ä¼¸å±•æ ‘ï¼ˆSplay treeï¼‰ã€Bæ ‘ã€çº¢é»‘æ ‘ã€KD-æ ‘çš„æ¦‚å¿µï¼Œå¹¶å¯ä»¥çœ‹åˆ°è¿™äº›åœ¨å®é™…ç”Ÿæ´»ä¸­çš„åº”ç”¨ã€‚</p><span id="more"></span><h1 id="0x01-äºŒå‰æ ‘çš„éå†traversal"><a class="markdownIt-Anchor" href="#0x01-äºŒå‰æ ‘çš„éå†traversal"></a> 0x01 äºŒå‰æ ‘çš„éå†traversal</h1><p>å¯¹äºŒå‰æ ‘çš„è®¿é—®å¯ä»¥æŠ½è±¡ä¸ºå¦‚ä¸‹å½¢å¼ï¼šæŒ‰ç…§æŸç§çº¦å®šçš„æ¬¡åºï¼Œå¯¹èŠ‚ç‚¹è®¿é—®ä¸”ä»…ä¸€æ¬¡ã€‚éå†ä¹‹äºäºŒå‰æ ‘çš„æ„ä¹‰ï¼ŒåŒæ ·åœ¨äºä¸ºç›¸å…³ç®—æ³•çš„å®ç°æä¾›é€šç”¨çš„æ¡†æ¶ï¼Œæ­¤å¤–è¿™ä¸€è¿‡ç¨‹ç­‰æ•ˆäºå°†åŠçº¿æ€§çš„æ ‘å½¢ç»“æ„è½¬æ¢ä¸ºçº¿æ€§ç»“æ„ï¼Œä½†æ˜¯äºŒå‰æ ‘ä¸åœ¨å±äºçº¿æ€§ç»“æ„ï¼Œå› æ­¤éå†è¿‡ç¨‹æ›´ä¸ºå¤æ‚ã€‚</p><h3 id="11-é€’å½’å¼éå†-recursively-traversal"><a class="markdownIt-Anchor" href="#11-é€’å½’å¼éå†-recursively-traversal"></a> 1.1 é€’å½’å¼éå† recursively traversal</h3><p>äºŒå‰æ ‘æœ¬èº«å¹¶ä¸å…·æœ‰å¤©ç„¶çš„å…¨å±€æ¬¡åºï¼Œæ•…ä¸ºå®ç°éå†ï¼Œé¦–é€‰éœ€è¦åœ¨å„èŠ‚ç‚¹ä¸å…¶å­©å­ä¹‹é—´çº¦å®šæŸç§å±€éƒ¨æ¬¡åºï¼Œä»è€Œé—´æ¥å®šä¹‰å…¨å±€æ¬¡åºã€‚åˆ†ä¸ºå·¦ï¼ˆLï¼Œleftï¼‰ã€å³ï¼ˆRï¼Œrightï¼‰ã€èŠ‚ç‚¹ï¼ˆRï¼Œrootï¼‰ï¼Œå› æ­¤åˆ†ä¸ºVLRã€LVRã€LRVä¸‰ä¸­å¿ƒé€‰æ‹©ï¼Œä¹Ÿå°±æ˜¯å…ˆåºéå†ï¼ˆpreorderï¼‰ã€ä¸­åºéå†ï¼ˆinorderï¼‰ã€ååºéå†ï¼ˆpostorderï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215vcp5iuj214e0eugnd.jpg" alt="image-20220508181358930" /></p><ul><li>å…ˆåºéå†ï¼ˆpreorderï¼‰</li></ul><p>é¦–å…ˆæ ¸å¯¹Xæ˜¯ä¸æ˜¯ç©ºé›†ï¼Œè‹¥xä¸ºç©ºåˆ™ç›´æ¥é€€å‡º</p><p>è‹¥xéç©ºï¼Œåˆ™æŒ‰ç…§å…ˆåºéå†ï¼Œä¼˜å…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œç„¶åè®¿é—®å·¦å­æ ‘å’Œå³å­æ ‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">travPre_R</span>(<span class="hljs-params"><span class="hljs-built_in">set</span>,visit</span>):<br><span class="hljs-keyword">if</span>(!x) <span class="hljs-keyword">return</span>;<br>visit(x.data);<br>travPre_R(X.lc,visit)<br>travPre_R(x.rc,visit)<br></code></pre></td></tr></table></figure><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215ivk5wuj215g0newgs.jpg" alt="image-20220508180157156" /></p><ul><li>ä¸­åºéå†ï¼ˆinorderï¼‰</li></ul><p>å„èŠ‚ç‚¹åœ¨ä¸­åºéå†åºåˆ—ä¸­</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215j3hud2j215s0nkwgn.jpg" alt="image-20220508180212428" /></p><ul><li>ååºéå†ï¼ˆpostorderï¼‰</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215jai8m0j214e0msgnr.jpg" alt="image-20220508180223701" /></p><p>é€’å½’éå†ç®—æ³•å’Œè¿­ä»£éå†ç®—æ³•éƒ½éœ€è¦æ¸è¿›çš„çº¿æ€§æ—¶é—´ï¼Œè€Œä¸”ç›¸å¯¹è€Œè¨€ï¼Œå‰è€…æ›´åŠ ç®€æ˜ï¼›ä½†æ˜¯è¿­ä»£ç®—æ³•çš„æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦çš„å¸¸ç³»æ•°ç›¸æ¯”è¾ƒé€’å½’æ›´å°ï¼ŒåŒæ—¶ä»è¿­ä»£éå†å®Œæˆå¯ä»¥åŠ æ·±å¯¹ç›¸å…³è¿‡ç¨‹å’ŒæŠ€å·§çš„ç†è§£</p><h3 id="12-é€’å½’å¼éå†-recursively-traversal"><a class="markdownIt-Anchor" href="#12-é€’å½’å¼éå†-recursively-traversal"></a> 1.2 é€’å½’å¼éå† recursively traversal</h3><p>æ¯”è¾ƒéš¾ï¼Œä½†å¯ä»¥åŠ æ·±ç†è§£</p><p>å…ˆåºéå†å¯ä»¥åˆ†è§£ä¸ºä¸¤æ®µï¼Œæ²¿ç€æœ€å·¦ä¾§é€šè·¯è‡ªä¸Šè€Œä¸‹çš„è®¿é—®å„èŠ‚ç‚¹ï¼Œä»¥åŠè‡ªåº•å‘ä¸Šéå†çš„å¯¹åº”å³å­æ ‘</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215k3xq5jj215s0l0myw.jpg" alt="image-20220508180309182" /></p><h2 id="13-ä¸€äº›ç®—æ³•çš„å®ç°"><a class="markdownIt-Anchor" href="#13-ä¸€äº›ç®—æ³•çš„å®ç°"></a> 1.3 ä¸€äº›ç®—æ³•çš„å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Definition for a binary tree node.</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, left=<span class="hljs-literal">None</span>, right=<span class="hljs-literal">None</span></span>):<br>        self.val = val<br>        self.left = left<br>        self.right = right<br><br><span class="hljs-comment"># é¢˜ç›®debugåœ°å€ï¼šhttps://leetcode-cn.com/problems/binary-tree-inorder-traversal/</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inorderTraversal</span>(<span class="hljs-params">self, root</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹rootï¼Œè¿”å›å®ƒçš„ä¸­åºéå†</span><br><span class="hljs-string">        äºŒå‰æ ‘çš„éå†åˆ†ä¸ºæ·±åº¦éå†å’Œå¹¿åº¦éå†</span><br><span class="hljs-string">        æ·±åº¦éå†åˆ†ä¸ºå‰åºã€ä¸­åºå’Œååºä¸‰ç§éå†æ–¹æ³•</span><br><span class="hljs-string">        - å‰åºï¼Œæ ¹èŠ‚ç‚¹ã€å·¦å­æ ‘ã€å³å­æ ‘</span><br><span class="hljs-string">        - ä¸­åºï¼Œå·¦å­æ ‘ã€æ ¹èŠ‚ç‚¹ã€å³å­æ ‘</span><br><span class="hljs-string">        - ååºï¼Œå·¦å­æ ‘ã€å³å­æ ‘ã€æ ¹èŠ‚ç‚¹</span><br><span class="hljs-string">        å¹¿åº¦éå†å°±æ˜¯å¸¸è¯´çš„å±‚æ¬¡éå†çš„æ–¹æ³•</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">        :param root:</span><br><span class="hljs-string">        :return:</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        stack,ret=[],[]<br>        <span class="hljs-comment"># è®¾è®¡ä¸€ä¸ªæ ˆä½œä¸ºä¸­é—´å˜é‡</span><br>        <span class="hljs-comment"># retä¸ºæœ€ç»ˆç»“æœ</span><br>        cur=root <span class="hljs-comment"># åˆå§‹åŒ–æœ€åˆçš„å€¼ä¸ºcur</span><br>        <span class="hljs-keyword">while</span> stack <span class="hljs-keyword">or</span> cur:<br>            <span class="hljs-comment"># å½“stackä¸ºç©ºå¹¶ä¸”curä¸ºç©ºåœæ­¢ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰éƒ½éå†å®Œï¼ŒåŒæ—¶ä¹Ÿä¸å­˜åœ¨å·¦å­æ ‘</span><br>            <span class="hljs-keyword">if</span> cur:<br>                <span class="hljs-comment"># å¦‚æœå½“å‰èŠ‚ç‚¹éç©ºï¼Œåˆ™å–è¿™ä¸ªèŠ‚ç‚¹åˆ°stackä¸­</span><br>                <span class="hljs-comment"># å°†å½“å‰èŠ‚ç‚¹è®¾ç½®ä¸ºèŠ‚ç‚¹çš„left node</span><br>                stack.append(cur)<br>                cur=cur.left<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-comment"># å¦‚æœstackéç©ºï¼Œä½†æ˜¯å½“å‰èŠ‚ç‚¹ä¸ºç©ºã€‚è¯´æ˜éå†åˆ°æœ€å·¦è¾¹çš„</span><br>                <span class="hljs-comment"># å–å½“å‰èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ª</span><br>                cur=stack.pop()<br>                ret.append(cur.val)<br>                cur=cur.right<br>        <span class="hljs-keyword">return</span> ret<br></code></pre></td></tr></table></figure><h1 id="0x02-äºŒå‰æœç´¢æ ‘binary-search-tree"><a class="markdownIt-Anchor" href="#0x02-äºŒå‰æœç´¢æ ‘binary-search-tree"></a> 0x02 äºŒå‰æœç´¢æ ‘ï¼ˆBinary Search tree)</h1><p>äºŒå‰æœç´¢æ ‘æ˜¯æ»¡è¶³é¡ºåºæ€§çš„äºŒå‰æ ‘</p><blockquote><p>ä»»ä¸€èŠ‚ç‚¹rçš„å·¦å³å­æ ‘ä¸­ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹ï¼ˆè‹¥å­˜åœ¨ï¼‰å‡ä¸å¤§äºï¼ˆä¸å°äºï¼‰r ä¸ºå›é¿è¾¹ç•Œæƒ…å†µï¼Œæš‚å®šå‡è®¾æ‰€æœ‰èŠ‚ç‚¹ä¸æƒ³ç­‰ï¼Œå› æ­¤å¯ä»¥ç®€åŒ–ä¸º ä»»æ„èŠ‚ç‚¹rçš„å·¦ï¼ˆå³ï¼‰å­æ ‘ä¸­ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹ï¼ˆè‹¥å­˜åœ¨ï¼‰å‡å°äºï¼ˆå¤§äºï¼‰r</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215ngximaj21n60es0u8.jpg" alt="image-20220508180624423" /></p><p>ä»æœ¬ç« å¼€å§‹ï¼Œè®¨è®ºçš„é‡ç‚¹å°†é€æ­¥è½¬å‘æŸ¥æ‰¾æŠ€æœ¯ï¼Œå®é™…ä¸Šåœ¨ä¹‹å‰çš„ç« èŠ‚å·²ç»å°±æ­¤åšè¿‡ä¸€äº›è®¨è®ºï¼Œæ¯”å¦‚åœ¨vectorå’Œlistç­‰ç»“æœä¸­ï¼Œå·²ç»ç»™å‡ºäº†å¯¹åº”çš„ADTç»“æ„ï¼Œä½†æ˜¯é—æ†¾çš„æ˜¯è¿™ç§æ¥å£çš„æ•ˆç‡æ— æ³•ä»¤äººæ»¡æ„ã€‚</p><p>æ¯”å¦‚vectorå‘é‡æ¨¡ç‰ˆï¼Œé’ˆå¯¹æ— åºå’Œæœ‰åºå‘é‡çš„æŸ¥æ‰¾æä¾›äº†find()å’Œsearchï¼ˆï¼‰æ¥å£ã€‚å‰è€…çš„å®ç°ç­–ç•¥æ˜¯å°†ç›®æ ‡å¯¹è±¡ä¸å‘é‡å­˜æ”¾çš„å¯¹è±¡é€ä¸ªå¯¹æ¯”ï¼Œç¡¬åˆºéœ€è¦O(n)æ—¶é—´ï¼Œåè€…åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ç­–ç•¥å¯ä»¥ç¡®ä¿O(logN)æ—¶é—´å†…å®Œæˆå•æ¬¡æŸ¥æ‰¾ï¼Œä½†æ˜¯ä¸€æ—¦å‘é‡æœ¬èº«éœ€è¦ä¿®æ”¹ï¼Œæ— è®ºæ˜¯æ’å…¥è¿˜æ˜¯åˆ é™¤ï¼Œåœ¨æœ€åæƒ…å†µä¸‹æ¯æ¬¡éœ€è¦Oï¼ˆnï¼‰çš„æ—¶é—´ã€‚</p><p>æ‰€ä»¥å¯¹äºçº¿æ€§ç»“æ„æ¥è¯´ï¼Œæ—¢è¦æ±‚å¯¹è±¡é›†åˆçš„ç»„æˆå¯ä»¥é«˜æ•ˆç‡åœ°åŠ¨æ€è°ƒæ•´ï¼ŒåŒæ—¶ä¹Ÿè¦æ±‚èƒ½å¤Ÿé«˜æ•ˆç‡æŸ¥æ‰¾ï¼ŒlInear data structureå¾ˆéš¾èƒœä»»ï¼Œ<strong>é‚£ä¹ˆé«˜æ•ˆç‡çš„åŠ¨æ€ä¿®æ”¹å’Œé«˜æ•ˆç‡çš„é™æ€æŸ¥æ‰¾èƒ½å¦åŒæ—¶å…¼é¡¾ï¼Œå¦‚æœ‰å¯èƒ½åˆåº”è¯¥é‡‡ç”¨ä»€ä¹ˆæ ·çš„æ•°æ®ç»“æ„ï¼Ÿ</strong></p><p>ä¹‹åä¸¤ç« å¸Œæœ›é€æ­¥äº†è§£å…¶ä¸­çš„æ•…äº‹ï¼Œæ¶‰åŠåˆ°çš„æ•°æ®ç»“æ„ç§ç±»æ¯”è¾ƒå¤šï¼ŒæŒ‰ç…§åŸºæœ¬å’Œé«˜çº§ä¸¤ç« åˆ†åˆ«è¿›è¡Œè®²è§£</p><blockquote><p>æœ¬ç« é¦–å…ˆä»‹ç»æ ‘å¼æŸ¥æ‰¾çš„æ€»ä½“æ„æ€ã€åŸºæœ¬ç®—æ³•ä»¥åŠæ•°æ®ç»“æ„ï¼Œé€šè¿‡å¯¹äºŒåˆ†æŸ¥æ‰¾ç­–ç•¥çš„æŠ½è±¡ä¸æ¨å¹¿æ¥å®šä¹‰å¹¶å®ç°äºŒå‰æœç´¢æ ‘ï¼ˆBinary search tree)ç»“æ„ï¼Œè™½ç„¶åœ¨æœ€åæƒ…å†µä¸‹æ¸è¿›æ—¶é—´å¤æ‚åº¦ä¸ä¹‹å‰å¹¶æ— å®è´¨æ€§æ”¹å˜ï¼Œä½†æ˜¯è¿™ç»™å‡ºæ¥ä¸€ç§åŸºäºåŠçº¿æ€§çš„æ ‘å½¢ç»“æ„ã€‚ ä¹‹åæå‡ºç†æƒ³å¹³è¡¡å’Œé€‚åº¦å¹³è¡¡ç­‰æ¦‚å¿µï¼Œå¹¶ç›¸åº”å¼•å…¥å’Œå®ç°AVLæ ‘è¿™ç§å…¸å‹çš„å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼ˆBalanced binary search tree)ï¼Œå€ŸåŠ©ç²¾å·§çš„å¹³è¡¡è°ƒæ•´ç®—æ³•ï¼ŒAVLæ ‘å¯ä»¥ä¿è¯å³ä½¿åœ¨æœ€åæƒ…å†µä¸‹ï¼Œå•æ¬¡åŠ¨æ€ä¿®æ”¹å’Œé™æ€æŸ¥æ‰¾ä¹Ÿå¯ä»¥åœ¨O(logN)çš„æ—¶é—´å†…å®Œæˆï¼Œåœ¨ä¹‹åçš„é€‰æ‹©ä¸­ç»™å‡ºbalanced m-way search trees</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215lu9vldj20zk0eq0to.jpg" alt="image-20220508180449006" /></p><h2 id="21-æŸ¥æ‰¾ç®—æ³•search"><a class="markdownIt-Anchor" href="#21-æŸ¥æ‰¾ç®—æ³•search"></a> 2.1 æŸ¥æ‰¾ç®—æ³•ï¼ˆSearchï¼‰</h2><p>é‡‡ç”¨å‡è€Œæ²»ä¹‹çš„æ€è·¯ä¸ç­–ç•¥ï¼Œæ‰§è¡Œçš„è¿‡ç¨‹å¯ä»¥æè¿°ä¸º</p><p>ä»æ ‘æ ¹å‡ºå‘ï¼Œé€æ­¥ç¼©å°æŸ¥æ‰¾èŒƒå›´ï¼Œç›´åˆ°å‘ç°ç›®æ ‡æˆ–ç¼©å°åˆ°ç©ºæ ‘ã€‚èŠ‚ç‚¹çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œéƒ½éœ€è¦é¦–å…ˆè°ƒç”¨æŸ¥æ‰¾ç®—æ³•ï¼Œå¹¶æ ¹æ®æŸ¥æ‰¾ç»“æœç¡®å®šååºçš„å¤„ç†æ–¹å¼ï¼Œå› æ­¤è¿™é‡Œå¼•ç”¨æ–¹å¼ä¼ é€’å­æ ‘æ ¹èŠ‚ç‚¹ï¼Œä¸ºåç»­æ“ä½œæä¾›å¿…è¦çš„ä¿¡æ¯</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215oij6xpj21l40sotca.jpg" alt="image-20220508180724414" /></p><p>æ•ˆç‡ï¼šåœ¨äºŒå‰æœç´¢æ ‘çš„æ¯ä¸€å±‚ï¼ŒæŸ¥æ‰¾ç®—æ³•è‡³å¤šè®¿é—®ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸”åªéœ€å¸¸æ•°æ—¶é—´ï¼Œå› æ­¤æ€»ä½“æ‰€éœ€è¦æ—¶é—´åº”çº¿æ€§æ­£æ¯”äºæŸ¥æ‰¾è·¯å¾„çš„é•¿åº¦ï¼Œæˆ–æœ€ç»ˆè¿”å›èŠ‚ç‚¹çš„æ·±åº¦ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹å¯ä»¥è¾¾åˆ°\omiga nçš„å¤æ‚åº¦ï¼›ç”±æ­¤æˆ‘ä»¬å¾—åˆ°æ±½æ°´ï¼Œè‹¥è¦æ§åˆ¶å•æ¬¡æŸ¥æ‰¾åœ¨æœ€åæƒ…å†µä¸‹çš„è¿è¡Œæ—¶é—´ï¼Œéœ€è¦ä»äºŒå‰æœç´¢æ ‘çš„é«˜åº¦å…¥æ‰‹ï¼Œåé¢è®¨è®ºçš„å¹³è¡¡äºŒå‰æœç´¢æ ‘æ­£æ˜¯åŸºäºè¿™ä¸ªæ€è·¯çš„æ”¹è¿›</p><h2 id="22-æ’å…¥ç®—æ³•insert"><a class="markdownIt-Anchor" href="#22-æ’å…¥ç®—æ³•insert"></a> 2.2 æ’å…¥ç®—æ³•ï¼ˆInsertï¼‰</h2><p>ä¸€èˆ¬åœ¨äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°èŠ‚ç‚¹eçš„è¿‡ç¨‹ï¼Œå¯ä»¥æè¿°ä¸ºå‡½æ•°insert(): å®ƒçš„è¿‡ç¨‹æ˜¯é¦–å…ˆè°ƒç”¨search() æŸ¥æ‰¾eï¼Œå¦‚æœè¿”å›ä½ç½®éç©ºï¼Œåˆ™è¯´æ˜å·²æœ‰é›·åŒèŠ‚ç‚¹ä»ï¼Œæ’å…¥æ“ä½œå¤±è´¥ï¼Œå¦åˆ™xå¿…ç„¶æ˜¯_hotèŠ‚ç‚¹çš„æŸä¸€ä¸ªç©ºå­©å­ï¼Œäºæ˜¯åˆ›å»ºè¿™ä¸ªå­©å­å¹¶å­˜å…¥eï¼Œä¹‹åæ›´æ–°å…¨æ ‘çš„è§„æ¨¡è®°å½•ï¼Œå¹¶è°ƒç”¨updateHeightAboveï¼ˆï¼‰æ¥æ›´æ–°xå’Œå†ä»£ç¥–å…ˆçš„é«˜åº¦</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215oy1xz3j21me0j6di4.jpg" alt="image-20220508180749261" /></p><p><strong>æ•ˆç‡</strong>ï¼š ä¸»è¦å°å­©åœ¨å¯¹ç®—æ³•search()å’ŒupdateHeightAbove()çš„è°ƒç”¨ï¼Œæ—¶é—´å¤æ‚åº¦åŒæ ·å–å†³ä¸æ–°èŠ‚ç‚¹çš„æ·±åº¦ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ä¸è¶…è¿‡å…¨æ ‘çš„é«˜åº¦</p><h2 id="23-åˆ é™¤ç®—æ³•remove"><a class="markdownIt-Anchor" href="#23-åˆ é™¤ç®—æ³•remove"></a> 2.3 åˆ é™¤ç®—æ³•ï¼ˆRemoveï¼‰</h2><p>ä»äºŒå‰æœç´¢æ ‘ä¸­åˆ é™¤èŠ‚ç‚¹ï¼Œé¦–å…ˆéœ€è¦è°ƒç”¨BST::searchï¼ˆï¼‰æ¥åˆ¤æ–­ç›®æ ‡ç‚¹æ˜¯å¦çš„ç¡®å­˜åœ¨æ ‘ä¸­ï¼Œå¦‚æœå­˜åœ¨åˆ™éœ€è¦è¿”å›å…¶ä½ç½®ï¼Œæ–¹èƒ½å¯¹å…¶è¿›è¡Œå…·ä½“å®æ–½åˆ é™¤æ“ä½œï¼Œåœ¨åˆ é™¤çš„è¿‡ç¨‹ä¸­åˆ†ä¸ºå•åˆ†æ”¯æƒ…å†µå’ŒåŒåˆ†æ”¯æƒ…å†µ</p><p><strong>æ•ˆç‡</strong>ï¼š åˆ é™¤æ“ä½œæ‰€éœ€è¦çš„æ—¶é—´ä¸»è¦æ¶ˆè€—åœ¨å¯¹search()ã€succï¼ˆï¼‰å’ŒupdateHeightAboveï¼ˆï¼‰ çš„è°ƒç”¨ï¼Œåœ¨æ ‘ä¸­çš„ä»»ä½•é«˜åº¦ï¼Œå®ƒä»¬éƒ½è‡³å¤šæ¶ˆè€—Oï¼ˆ1ï¼‰æ—¶é—´ï¼Œæ•…æ€»ä½“çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ä¼šè¶…è¿‡å…¨æ ‘çš„é«˜åº¦</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215pj4rzoj21mg0h4tay.jpg" alt="image-20220508180822827" /></p><h1 id="0x03-å¹³è¡¡äºŒå‰æœç´¢æ ‘balanced-binary-search-tree"><a class="markdownIt-Anchor" href="#0x03-å¹³è¡¡äºŒå‰æœç´¢æ ‘balanced-binary-search-tree"></a> 0x03 å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼ˆBalanced binary search treeï¼‰</h1><h2 id="31-æ ‘é«˜å’Œæ€§èƒ½"><a class="markdownIt-Anchor" href="#31-æ ‘é«˜å’Œæ€§èƒ½"></a> 3.1 æ ‘é«˜å’Œæ€§èƒ½</h2><p>æ ¹æ®å¯¹äºŒå‰æœç´¢æ ‘çš„å®ç°ä¸åˆ†æï¼Œsearch()ã€insert()å’Œremoveï¼ˆï¼‰ç­‰ä¸»è¦æ¥å£çš„è¿è¡Œæ—¶é—´ï¼Œå‡çº¿æ€§æ­£æ¯”äºäºŒå‰æœç´¢æ ‘çš„é«˜åº¦ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼ŒäºŒå‰æœç´¢æ ‘å¯èƒ½å½»åº•é€€åŒ–ä¸ºåˆ—è¡¨ï¼Œæ­¤æ—¶æŸ¥æ‰¾æ•ˆç‡ç”šè‡³ä¼šé™ä½O(n)ï¼Œå› æ­¤å¦‚æœä¸èƒ½æœ‰æ•ˆæ§åˆ¶æ ‘é«˜ï¼Œå®é™…æ€§èƒ½æ¯”ä¹‹å‰çš„å‘é‡å’Œåˆ—è¡¨å¹¶æ²¡æœ‰æ˜æ˜¾çš„åŒºåˆ«ã€‚</p><p>ä¸ºäº†æè¿°å‡ºç°è¿™ç§æœ€åçš„æƒ…å†µçš„æ¦‚ç‡ï¼Œè¿™é‡Œä½¿ç”¨å¹³å‡å¤æ‚åº¦çš„æ¦‚å¿µæ¥çœ‹äºŒå‰æœç´¢æ ‘çš„æ€§èƒ½ï¼Œä½¿ç”¨ä¸¤ç§å¸¸è§çš„éšæœºç»Ÿè®¡å£å¾„æ¥è¿›è¡Œåˆ†æ</p><ul><li>éšæœºç”Ÿæˆ(randomly generated)ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å¯ä»¥çœ‹å‡ºäºŒå‰æœç´¢æ ‘çš„å¹³å‡é«˜åº¦ä¸º\Omega(LogN)</li><li>éšæœºç»„æˆ(randomly composed)ï¼Œ å¹³å‡æŸ¥æ‰¾é•¿åº¦ä¸º \Omega(\Sqrt(N))</li></ul><p><strong>å¯¹æ¯”ä¸¤ç§æƒ…å†µï¼Œå¯ä»¥çœ‹å‡ºä¸¤ç§ä¸åŒçš„ç»Ÿè®¡å£å¾„ä¸­å¯¹äºå¹³è¡¡äºŒå‰æ ‘çš„ç»Ÿè®¡æ¬¡æ•°çš„é‡å ï¼Œåœ¨ç¬¬ä¸€ç§å¹³è¡¡ä¸­ä¼šè¶Šæ˜¯å¹³è¡¡çš„æ ‘è¶Šä¼šè¢«ç»Ÿè®¡å¤šæ¬¡ï¼Œå› æ­¤ç›¸å¯¹è€Œè¨€ï¼ŒæŒ‰ç…§åé¢å£å¾„å¤šå¾—åˆ°çš„ä¼°è®¡å€¼æ›´åŠ å¯ä¿¡ã€‚</strong></p><h2 id="32-ç†æƒ³å¹³è¡¡å’Œé€‚åº¦å¹³è¡¡"><a class="markdownIt-Anchor" href="#32-ç†æƒ³å¹³è¡¡å’Œé€‚åº¦å¹³è¡¡"></a> 3.2 ç†æƒ³å¹³è¡¡å’Œé€‚åº¦å¹³è¡¡</h2><p>åœ¨ä¹‹å‰çœ‹å¯¹äºäºŒå‰æ ‘ï¼ˆBinary treeï¼‰çš„åŸºæœ¬æ“ä½œï¼Œæ¯”å¦‚search()ã€insertï¼ˆï¼‰ã€removeï¼ˆï¼‰çš„æ€§èƒ½ä¸»è¦å–å†³ä¸æ ‘çš„é«˜åº¦ï¼Œå› æ­¤åœ¨èŠ‚ç‚¹æ•°ç›®å›ºå®šçš„æƒ…å†µä¸‹ï¼Œåº”å½“å°½å¯èƒ½çš„é™ä½é«˜åº¦ï¼Œä¹Ÿå°±æ˜¯å°½å¯èƒ½çš„è®©å…„å¼Ÿå­æ ‘çš„é«˜åº¦å½¼æ­¤æ¥è¿‘ï¼Œè®©å…¨æ ‘æ›´åŠ å¹³è¡¡ï¼Œæ¯”å¦‚å¯¹äºåŒ…å«nèŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œæœ€ç†æƒ³çš„æƒ…å†µæ˜¯é«˜åº¦ä¸ºlog_2N,è¿™ç§å°±æ˜¯ç†æƒ³å¹³è¡¡çš„æƒ…å†µï¼›ä½†æ˜¯é€‚å½“æ”¾æ¾è¦æ±‚å¯ä»¥è®©æˆ‘ä»¬å¾—åˆ°æ¯”è¾ƒå¥½çš„æ•ˆæœï¼Œä¹Ÿå°±æ˜¯é€‚åº¦å¹³è¡¡ã€‚</p><p>æ¯”å¦‚å°†æ ‘é«˜é™åˆ¶åœ¨æ¸è¿›ä¸è¶…è¿‡O(logN),ç›¸æ¯”è¾ƒä¸¥æ ¼çš„ç†æƒ³å¹³è¡¡äºŒå‰æ ‘ä¼šæ›´åŠ æ”¾æ¾ï¼Œè¿™é‡Œä»‹ç»çš„AVLæ ‘ã€ä¼¸å±•æ ‘ã€çº¢é»‘æ ‘ã€KDæ ‘ç­‰éƒ½å±äºé€‚åº¦å¹³è¡¡çš„ç±»åˆ«ï¼Œå› æ­¤ä¹Ÿå¯ä»¥å½’çº³ä¸ºå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼ˆBalanced binary search treeï¼‰</p><p><strong>å¹³è¡¡äºŒå‰æœç´¢æ ‘çš„é€‚åº¦å¹³è¡¡æ€§å°±æ˜¯é€šè¿‡å¯¹æ ‘ä¸­æ¯ä¸€ä¸ªå±€éƒ¨å¢åŠ æŸç§é™åˆ¶æ¡ä»¶æ¥ä¿è¯çš„ï¼Œ</strong></p><p>æ¯”å¦‚åœ¨çº¢é»‘æ ‘ä¸­ï¼Œä»æ ‘æ ¹åˆ°å¶èŠ‚ç‚¹çš„é€šè·¯æ€»æ˜¯åŒ…å«ä¸€æ ·å¤šçš„é»‘èŠ‚ç‚¹ï¼›</p><p>æ¯”å¦‚åœ¨AVLæ ‘ä¸­ï¼Œå…„å¼ŸèŠ‚ç‚¹çš„é«˜åº¦ç›¸å·®ä¸è¿‡1</p><p>è¿™ç§é™åˆ¶æ¡ä»¶è®¾å®šæ˜¯éå¸¸ç²¾å¦™çš„ï¼Œé™¤äº†é€‚åº¦å¹³è¡¡æ€§ï¼Œè¿˜å…·æœ‰å±€éƒ¨æ€§</p><ol><li>ç»è¿‡å•æ¬¡åŠ¨æ€ä¿®æ”¹æ“ä½œåï¼Œè‡³å¤šä¹‹åOï¼ˆlogNï¼‰å¤„å±€éƒ¨ä¸åœ¨æ»¡è¶³é™åˆ¶æ¡ä»¶</li><li>å¯ä»¥åœ¨O(logN)çš„æ—¶é—´å†…ï¼Œè®©è¿™Oï¼ˆlogNï¼‰å¤„å±€éƒ¨ä¹ƒè‡³å…¨æ ‘é‡æ–°æ»¡è¶³é™åˆ¶æ¡ä»¶</li></ol><p>ç”±æ­¤æ¥è®©å¤±å»å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œå¿…ç„¶å¯ä»¥è¿…é€Ÿè½¬æ¢ç§°ä¸ºä¸€é¢—ç­‰ä»·çš„å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œç­‰ä»·äºŒå‰æœç´¢æ ‘ä¹‹é—´çš„è½¬æ¢è¿‡ç¨‹ç§°ä¸ºç­‰ä»·äº¤æ¢</p><h2 id="33-ç­‰ä»·äº¤æ¢"><a class="markdownIt-Anchor" href="#33-ç­‰ä»·äº¤æ¢"></a> 3.3 ç­‰ä»·äº¤æ¢</h2><p>é¦–å…ˆå®šä¹‰ç­‰ä»·ï¼Œä¹Ÿå°±æ˜¯ä¸­åºéå†ç›¸åŒçš„äºŒå‰æ ‘ä¹‹é—´æ˜¯ç­‰ä»·çš„ï¼Œè¿™ç§ç‰¹ç‚¹å¯ä»¥æ¦‚æ‹¬ä¸ºâ€œä¸Šä¸‹å¯å˜ï¼Œå·¦å³ä¸ä¹±â€</p><p>è™½ç„¶äºŒå‰æœç´¢æ ‘å¯ä»¥è½¬æ¢ä¸ºç†æƒ³å¹³è¡¡çš„å®Œå…¨äºŒå‰æ ‘ï¼Œä½†æ˜¯è¿™ç§è½¬æ¢ä¹Ÿæ˜¯éœ€è¦æ—¶é—´çš„ï¼Œå¦‚ä½•å®ç°è¿™ç§å±€éƒ¨å¤±è¡¡çš„è°ƒæ•´çš„åŒæ—¶æ¥ä¿è¯ä¿®å¤çš„é€Ÿåº¦ï¼Ÿ</p><h2 id="34-æ—‹è½¬è°ƒæ•´"><a class="markdownIt-Anchor" href="#34-æ—‹è½¬è°ƒæ•´"></a> 3.4 æ—‹è½¬è°ƒæ•´</h2><p>æœ€åŸºæœ¬çš„ä¿®å¤æ‰‹æ®µå°±æ˜¯é€šè¿‡å›´ç»•ç‰¹å®šèŠ‚ç‚¹çš„é€‰è£…æ¥å®ç°ç­‰ä»·å‰æä¸‹çš„å±€éƒ¨æ‹“æ‰‘è°ƒæ•´ï¼Œä¹Ÿå°±æ˜¯å•æ—‹å’ŒåŒæ—‹ï¼Œzigå’Œzag</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215qv5fzvj20j80okaba.jpg" alt="image-20220508180940206" /></p><p>zigå’Œzagå‡å±äºå±€éƒ¨æ“ä½œï¼Œä»…æ¶‰åŠå¸¸ç†Ÿä¸ªèŠ‚ç‚¹åŠå…¶ä¹‹é—´çš„é“¾æ¥å…³ç³»ï¼Œæ•…å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆï¼Œåœ¨åé¢å®ç°å„ç§äºŒå‰æœç´¢æ•°å¹³è¡¡åŒ–ç®—æ³•æ˜¯æ”¯æ’‘æ€§çš„åŸºæœ¬æ“ä½œã€‚</p><h1 id="0x04-å¹³è¡¡äºŒå‰æœç´¢æ ‘bbstbalanced-binary-search-treeçš„æ€»ç»“"><a class="markdownIt-Anchor" href="#0x04-å¹³è¡¡äºŒå‰æœç´¢æ ‘bbstbalanced-binary-search-treeçš„æ€»ç»“"></a> 0x04 å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼ˆBBSTï¼ŒBalanced binary search treeï¼‰çš„æ€»ç»“</h1><p>æœ¬æ¥ç›´æ¥çœ‹AVLçš„ï¼Œä½†æ˜¯ç”±äºå¤ªéš¾äº†ï¼Œä¸å¦‚åœ¨æ­¤å¯¹è¿™ä¸€ç±»çš„å¹³è¡¡äºŒå‰æœç´¢æ ‘åšä¸€ä¸ªæ€»ç»“ï¼Œé˜²æ­¢ä»¥åæ¦‚å¿µçš„æ··æ·†ï¼ŒåŒæ—¶åœ¨å­¦ä¹ è¿™äº›BBSTçš„æ—¶å€™è¦æ³¨æ„åŸºæœ¬æ¦‚å¿µäº§ç”Ÿçš„æ ‘çš„æ·±åº¦å’Œç®—æ³•ï¼ˆåŸºæœ¬æ“ä½œinsert()ã€remove()ã€search() ä¹‹é—´çš„å…³</p><ul><li>AVLæ ‘ï¼Œå¹³è¡¡äºŒå‰æ ‘ä¹‹ä¸€ï¼Œåº”ç”¨ç›¸å¯¹å…¶ä»–æ•°æ®ç»“æ„æ¯”è¾ƒå°‘ï¼Œwindowså¯¹è¿›ç¨‹åœ°å€ç©ºé—´çš„ç®¡ç†ç”¨åˆ°äº†AVLï¼›ç”±G. M. Adelson-Velskyå’ŒE. M. Landisä¸1962å¹´åæ˜[36] ï¼Œå¹¶ä»¥ä»–ä»¬åå­—çš„é¦–å­—æ¯å‘½å</li><li>ä¼¸å±•æ ‘ï¼ˆSplay treeï¼‰ï¼ŒæŒ‰ç…§â€œæœ€å¸¸ç”¨è€…ä¼˜å…ˆâ€çš„å¯å‘å¼ç­–ç•¥ï¼Œå¼•å…¥å¹¶å®ç°ä¼¸å±•æ ‘ï¼Œï¼›ç”±D. D. Sleatorå’ŒR. E. Tarjanäº1985å¹´å‘æ˜</li><li>Bã€B-ã€B+æ ‘ï¼Œå¹³è¡¡å¤šè·¯æŸ¥æ‰¾æ ‘ï¼ˆæŸ¥æ‰¾è·¯å¾„ä¸åªä¸¤ä¸ªï¼‰ï¼Œä¸»è¦ç”¨åœ¨æ–‡ä»¶ç³»ç»Ÿä»¥åŠæ•°æ®åº“ä¸­åšç´¢å¼•ç­‰</li><li>çº¢é»‘æ ‘ï¼Œå¹¿æ³›åº”ç”¨åœ¨C++STLä¸­ï¼Œæ¯”å¦‚mapå’Œsetã€Javaçš„TreeMap</li><li>KD-æ ‘ç»“æ„ï¼Œåœ¨å››å‰æ ‘ï¼ˆquadtreeï¼‰å’Œå…«å‰æ ‘ï¼ˆoctreeï¼‰çš„ä¸€èˆ¬æ€§æ¨å¹¿ï¼Œæ˜¯åœ¨è®¡ç®—å‡ ä½•ç±»é—®é¢˜çš„æ±‚è§£çš„æ¨¡å¼</li></ul><h2 id="41-avlæ ‘"><a class="markdownIt-Anchor" href="#41-avlæ ‘"></a> 4.1 AVLæ ‘</h2><p>åœ¨äºŒå‰æŸ¥æ‰¾æ ‘ä¸­ï¼Œä»»ä¸€èŠ‚ç‚¹å¯¹åº”çš„ä¸¤æ£µå­æ ‘çš„æœ€å¤§é«˜åº¦å·®ä¸º 1ï¼Œè¿™æ ·çš„äºŒå‰æŸ¥æ‰¾æ ‘ç§°ä¸ºå¹³è¡¡äºŒå‰æ ‘</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215rmbfysj20uy0l4757.jpg" alt="image-20220508181023823" /></p><p>ç‰¹ç‚¹ï¼š</p><p>å°½ç®¡å¯ä»¥ä¿è¯æœ€åæƒ…å†µä¸‹çš„å•æ¬¡æ“ä½œé€Ÿåº¦ï¼Œä½†éœ€åœ¨èŠ‚ç‚¹ä¸­åµŒå…¥å¹³è¡¡å› å­ç­‰æ ‡è¯†ï¼›æ›´é‡è¦çš„æ˜¯ï¼Œåˆ é™¤æ“ä½œä¹‹åçš„é‡å¹³è¡¡å¯èƒ½éœ€åšå¤š è¾¾ï—(logn)æ¬¡æ—‹è½¬ï¼Œä»è€Œé¢‘ç¹åœ°å¯¼è‡´å…¨æ ‘æ•´ä½“æ‹“æ‰‘ç»“æ„çš„å¤§å¹…åº¦å˜åŒ–ã€‚</p><p>ä¿æŒæ ‘å¹³è¡¡çš„ç›®çš„æ˜¯å¯ä»¥æ§åˆ¶æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤åœ¨å¹³å‡å’Œæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(log n)ï¼Œç›¸æ¯”æ™®é€šäºŒå‰æ ‘æœ€åæƒ…å†µçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) ï¼ŒAVLæ ‘æŠŠæœ€åæƒ…å†µçš„å¤æ‚åº¦æ§åˆ¶åœ¨å¯æ¥å—èŒƒå›´ï¼Œéå¸¸åˆé€‚å¯¹ç®—æ³•æ‰§è¡Œæ—¶é—´æ•æ„Ÿç±»çš„åº”ç”¨ã€‚</p><h2 id="42-ä¼¸å±•æ ‘splay-tree"><a class="markdownIt-Anchor" href="#42-ä¼¸å±•æ ‘splay-tree"></a> 4.2 ä¼¸å±•æ ‘ï¼ˆSplay treeï¼‰</h2><p>1ï¼‰åˆšåˆšè¢«è®¿é—®è¿‡çš„èŠ‚ç‚¹ï¼Œææœ‰å¯èƒ½åœ¨ä¸ä¹…ä¹‹åå†æ¬¡è¢«è®¿é—®åˆ°</p><p>2ï¼‰å°†è¢«è®¿é—®çš„ä¸‹ä¸€èŠ‚ç‚¹ï¼Œææœ‰å¯èƒ½å°±å¤„äºä¸ä¹…ä¹‹å‰è¢«è®¿é—®è¿‡çš„æŸä¸ªèŠ‚ç‚¹çš„é™„è¿‘</p><p>ç‰¹ç‚¹ï¼š</p><p>ä¼¸å±•æ ‘å®ç°ç®€ä¾¿ã€æ— éœ€ä¿®æ”¹èŠ‚ç‚¹ ç»“æ„ã€åˆ†æ‘Šå¤æ‚åº¦ä½ï¼Œä½†å¯æƒœæœ€åæƒ…å†µä¸‹çš„å•æ¬¡æ“ä½œéœ€è¦(n)æ—¶é—´ï¼Œæ•…éš¾ä»¥é€‚ç”¨äºæ ¸ç”µç«™ã€åŒ» é™¢ç­‰å¯¹å¯é æ€§å’Œç¨³å®šæ€§è¦æ±‚æé«˜çš„åœºåˆã€‚</p><h2 id="43-b-b-bæ ‘"><a class="markdownIt-Anchor" href="#43-b-b-bæ ‘"></a> 4.3 Bã€B-ã€B+æ ‘</h2><p>ä¸ºæ­¤ï¼Œéœ€è¦å……åˆ†åˆ©ç”¨ç£ç›˜ä¹‹ç±»å¤–éƒ¨å­˜å‚¨å™¨çš„å¦ä¸€ç‰¹æ€§ï¼šå°±æ—¶é—´æˆæœ¬è€Œè¨€ï¼Œè¯»å–ç‰©ç†åœ°å€è¿ç»­ çš„ä¸€åƒä¸ªå­—èŠ‚ï¼Œä¸è¯»å–å•ä¸ªå­—èŠ‚å‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚æ—¢ç„¶å¤–éƒ¨å­˜å‚¨å™¨æ›´é€‚å®œäºæ‰¹é‡å¼è®¿é—®ï¼Œä¸å¦¨é€šè¿‡ æ—¶é—´æˆæœ¬ç›¸å¯¹æä½çš„å¤šæ¬¡å†…å­˜æ“ä½œï¼Œæ¥æ›¿ä»£æ—¶é—´æˆæœ¬ç›¸å¯¹æé«˜çš„å•æ¬¡å¤–å­˜æ“ä½œã€‚ç›¸åº”åœ°ï¼Œéœ€è¦å°† é€šå¸¸çš„äºŒå‰æœç´¢æ ‘ï¼Œæ”¹é€ ä¸ºå¤šè·¯æœç´¢æ ‘åœ¨ä¸­åºéå†çš„æ„ä¹‰ä¸‹ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§ç­‰ä»·å˜æ¢ã€‚</p><p>ç‰¹ç‚¹ï¼š</p><p>Bæ ‘æ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„å¹³è¡¡å› å­å‡ç­‰äº0çš„å¤šè·¯æŸ¥æ‰¾æ ‘ï¼ˆAVLæ ‘æ˜¯å¹³è¡¡å› å­ä¸å¤§äº 1 çš„äºŒè·¯æŸ¥æ‰¾æ ‘ï¼‰ã€‚B æ ‘èŠ‚ç‚¹å¯ä»¥ä¿å­˜å¤šä¸ªæ•°æ®ï¼Œä½¿å¾— B æ ‘å¯ä»¥ä¸ç”¨åƒ AVL æ ‘é‚£æ ·ä¸ºäº†ä¿æŒå¹³è¡¡é¢‘ç¹çš„æ—‹è½¬èŠ‚ç‚¹ã€‚Bæ ‘çš„å¤šè·¯çš„ç‰¹æ€§ï¼Œé™ä½äº†æ ‘çš„é«˜åº¦ï¼Œæ‰€ä»¥Bæ ‘ç›¸æ¯”äºå¹³è¡¡äºŒå‰æ ‘æ˜¾å¾—çŸ®èƒ–å¾ˆå¤šã€‚Bæ ‘éå¸¸é€‚åˆä¿å­˜åœ¨ç£ç›˜ä¸­çš„æ•°æ®è¯»å–ï¼Œå› ä¸ºæ¯æ¬¡è¯»å–éƒ½ä¼šæœ‰ä¸€æ¬¡ç£ç›˜IOï¼Œé«˜åº¦é™ä½å‡å°‘äº†ç£ç›˜IOçš„æ¬¡æ•°ã€‚</p><h2 id="44-çº¢é»‘æ ‘"><a class="markdownIt-Anchor" href="#44-çº¢é»‘æ ‘"></a> 4.4 çº¢é»‘æ ‘</h2><p>ä¸ºæ­¤é¦–å…ˆéœ€åœ¨AVLæ ‘â€œé€‚åº¦å¹³è¡¡â€æ ‡å‡†çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥æ”¾å®½æ¡ä»¶ã€‚å®é™…ä¸Šï¼Œçº¢é»‘æ ‘ æ‰€é‡‡ç”¨çš„â€œé€‚åº¦å¹³è¡¡â€æ ‡å‡†ï¼Œå¯å¤§è‡´è¡¨è¿°ä¸ºï¼šä»»ä¸€èŠ‚ç‚¹å·¦ã€å³å­æ ‘çš„é«˜åº¦ï¼Œç›¸å·®ä¸å¾—è¶…è¿‡ä¸¤å€</p><p>ç‰¹ç‚¹ï¼š</p><p>è€ŒèŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦å†³å®šç€å¯¹èŠ‚ç‚¹çš„æŸ¥è¯¢æ•ˆç‡ï¼Œè¿™æ ·æˆ‘ä»¬ç¡®ä¿äº†ï¼Œæœ€åæƒ…å†µä¸‹çš„æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸è¶…è¿‡O(log n)ï¼Œå¹¶ä¸”æœ‰è¾ƒé«˜çš„æ’å…¥å’Œåˆ é™¤æ•ˆç‡ã€‚</p><h2 id="45-kd-æ ‘ç»“æ„"><a class="markdownIt-Anchor" href="#45-kd-æ ‘ç»“æ„"></a> 4.5 KD-æ ‘ç»“æ„</h2><p>éœ€è¦åœ¨ç†è§£å¤šç»´æŸ¥è¯¢çš„åŸºç¡€ä¸ŠæŸ¥è¯¢</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h215ru5fa3j21ki0lu448.jpg" alt="image-20220508181036189" /></p><p>å¾ªç€ä¸Šä¸€èŠ‚é‡‡ç”¨å¹³è¡¡äºŒå‰æœç´¢æ ‘å®ç°ä¸€ç»´æŸ¥è¯¢çš„æ„æ€ï¼Œå¯ä»¥å°†å¾…æŸ¥è¯¢çš„äºŒç»´ç‚¹é›†ç»„ç»‡ä¸ºæ‰€è°“ çš„kd-æ ‘ï¼ˆkd-treeï¼‰â‘¥ç»“æ„ã€‚åœ¨ä»»ä½•çš„ç»´åº¦ä¸‹ï¼Œkd-æ ‘éƒ½æ˜¯ä¸€æ£µé€’å½’å®šä¹‰çš„å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>DataStructure</category>
      
    </categories>
    
    
    <tags>
      
      <tag>TsinghuaBook</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ“ä½œç³»ç»Ÿ-01--åŸºæœ¬æ¦‚å¿µ</title>
    <link href="/posts/ac6f4ba.html"/>
    <url>/posts/ac6f4ba.html</url>
    
    <content type="html"><![CDATA[<p>å¸Œæœ›è·Ÿç€æè€å¸ˆæ¥äº†è§£ä¸€ä¸‹ï¼ŒåµŒå…¥å¼ç³»ç»Ÿå’Œå¾®æœºåŸç†æ²¡æœ‰äº†è§£çš„åœ°æ–¹ï¼Œæ¥è§è¯è®¡computeræ˜¯å¦‚ä½•ä»è®¡ç®—æœºå˜æˆç”µè„‘çš„ã€‚å¯èƒ½éœ€è¦çœ‹ä¸€ä¸‹&lt;è®¡ç®—æœºç»„æˆåŸç†&gt;,ä½†æ˜¯å› ä¸ºå¤ªä¸‹é¥­äº†ï¼Œå°±çœ‹ä¸€ä¸‹è¿™ä¸ªå§,æŒæ¡æ¦‚å¿µå°±å¥½ã€‚Learning OS concepts by coding them!</p><span id="more"></span><h2 id="0x01-ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#0x01-ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ"></a> 0x01 ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ</h2><p>è®¡ç®—æœºæ˜¯ç”¨æ¥å¸®åŠ©äººä»¬è§£å†³ä¸€äº›å®é™…é—®é¢˜çš„ï¼Œå®ƒéœ€è¦é€šè¿‡æ€»çº¿æ¥è¿æ¥è¾“å…¥è¾“å‡ºè®¾å¤‡ã€å­˜å‚¨ã€CPUå’Œå†…å­˜ç­‰è®¾å¤‡ã€‚å…¶ä¸­æœ€é‡è¦çš„CPUï¼ˆCentral Processing Unitï¼Œä¸­å¤®å¤„ç†å™¨ï¼‰ä¸»è¦æ˜¯è§£é‡Šè®¡ç®—æœºä¸­çš„æŒ‡ä»¤å¹¶å¤„ç†æ•°æ®çš„å•å…ƒã€‚</p><p>æ¯”å¦‚è®¡ç®—æœºåœ¨ç»ˆç«¯è¾“å…¥helloçš„è¿‡ç¨‹</p><ol><li>cpuå‘å‡ºæŒ‡ä»¤ï¼Œå–å†…å­˜</li><li>å†…å­˜å–å¯¹åº”åœ°å€çš„å†…å®¹</li><li>é€šè¿‡æ§åˆ¶å™¨ã€æ€»çº¿æ¥ä¼ é€’åˆ°å›¾å½¢æ§åˆ¶å™¨</li></ol><p>æ“ä½œç³»ç»Ÿï¼ˆoperation systemï¼‰å°†è®¡ç®—æœºç¡¬ä»¶è®¾å¤‡ç®¡ç†ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šå®ç°åº”ç”¨è½¯ä»¶ã€‚åŸºæœ¬çš„è½¯ä»¶åŒ…æ‹¬CPUã€å†…å­˜ã€ç»ˆç«¯ã€ç£ç›˜ã€æ–‡ä»¶ï¼›åœ¨ä¹‹å¤–çš„é«˜çº§æ“ä½œç³»ç»Ÿä¸­æ·»åŠ ä¸åŒè®¡ç®—æœºä¹‹å‰çš„ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬éœ€è¦å­¦ä¹ </p><ol><li>ä»åº”ç”¨è½¯ä»¶å‡ºå‘çœ‹æ“ä½œç³»ç»Ÿï¼Œåªèƒ½æ˜¯ä»…ä»…åœç•™åœ¨æ“ä½œç³»ç»Ÿçš„æ¥å£</li><li>ä»åº”ç”¨è½¯ä»¶å‡ºå‘è¿›å…¥åˆ°æ“ä½œç³»ç»Ÿï¼Œç†è§£å…¶ä¸­å‘½ä»¤çš„è¿‡ç¨‹ï¼Œç†è§£é‡æ‰èƒ½çŸ¥é“èƒŒåçš„åŠŸèƒ½å¹¶å¼€å‘</li><li>ä»ç¡¬ä»¶å‡ºå‘è®¾è®¡å¹¶å®ç°æ“ä½œç³»ç»Ÿ</li></ol><p>å¸Œæœ›äº†è§£æ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•è¿è½¬çš„ï¼Œå…«ä¸ªå®éªŒ</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t987gketj21320ma0wu.jpg" alt="image-20220501220536591" /></p><h2 id="0x02-bootsects"><a class="markdownIt-Anchor" href="#0x02-bootsects"></a> 0x02 bootsect.s</h2><h3 id="21-è®¡ç®—æœºå‘å±•çš„å†å²"><a class="markdownIt-Anchor" href="#21-è®¡ç®—æœºå‘å±•çš„å†å²"></a> 2.1 è®¡ç®—æœºå‘å±•çš„å†å²</h3><ol><li><p>ä»ç™½çº¸åˆ°å›¾çµæœºï¼Œ1936å¹´ï¼Œé€šè¿‡æ¨¡æ‹Ÿäººå¯¹è®¡ç®—è¿‡ç¨‹å¾—åˆ°è®¡ç®—æ¨¡å‹</p></li><li><p>ä»å›¾çµæœºåˆ°é€šç”¨å›¾çµæœºçš„è¿‡ç¨‹</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t999dayzj212w0lu424.jpg" alt="image-20220501220637428" /></p></li><li><p>ä»é€šç”¨å›¾çµæœºåˆ°è®¡ç®—æœºï¼ˆ1946å¹´ï¼Œå†¯Â·æ´›ä¾æ›¼ï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t99fp0rej212o0lmtc0.jpg" alt="image-20220501220647956" /></p></li></ol><h3 id="22-è®¡ç®—æœºå¼€æœºçš„è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#22-è®¡ç®—æœºå¼€æœºçš„è¿‡ç¨‹"></a> 2.2 è®¡ç®—æœºå¼€æœºçš„è¿‡ç¨‹</h3><ol><li><p>è®¡ç®—æœºä¸­å¼€å§‹ç”µæºçš„æœ€åˆçš„IPæ˜¯ç”±ç¡¬ä»¶è®¾è®¡è€…å†³å®šï¼Œæ¯”å¦‚x86çš„å¼€æœºCS=0xffffï¼Œip=0x0000ï¼Œä»¥åŠå¯»å€ï¼ˆBiosæ˜ å°„åŒºï¼‰ï¼Œæ£€æŸ¥RAMã€é”®ç›˜ã€æ˜¾ç¤ºå™¨å’Œè½¯ç¡¬ç£ç›˜ï¼Œæ±‡ç¼–ä¸­çš„æ¯ä¸€æ¡æŒ‡ä»¤ä¸­æœ‰ç€æ“ä½œ</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t9ahfz81j212u0ly0xl.jpg" alt="image-20220501220748296" /></p></li><li><p>BIOSçš„å¼•å¯¼æ‰‡åŒºä»£ç ï¼ˆbootsect.sï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t9am9xgyj212o0lsaeh.jpg" alt="image-20220501220756067" /></p></li></ol><h2 id="0x03-setups-and-heads"><a class="markdownIt-Anchor" href="#0x03-setups-and-heads"></a> 0x03 setup.s and head.s</h2><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t9oxzj4wj20j30lugmw.jpg" alt="image-20220501222142153" /></p><p>åœ¨ä¸Šè¿°bootsec.sè¿è¡Œå®Œä¹‹åï¼Œå¯ä»¥æ˜¯å¯¼å…¥setup.sï¼Œå®ƒä¸»è¦åšäº†ä¸¤ä»¶äº‹æƒ…</p><ol><li>æ·»åŠ æ“ä½œç³»ç»Ÿä»£ç åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸ºäº†ä¿è¯æ“ä½œç³»ç»Ÿçš„å®Œæ•´æ€§ï¼Œç§»åŠ¨åˆ°0åœ°å€,ç¬¬ä¸€ä¸ªä»£ç æ˜¯head.s</li><li>è¯»å–ç¡¬ä»¶ä¿¡æ¯å¹¶åˆå§‹åŒ–ï¼Œmem_init</li></ol><p>è¿è¡Œsetup.sçš„è¿‡ç¨‹ä¸­ä¼šçŸ­æš‚çš„å®šä¹‰GDTå’ŒIDTè¡¨æ ¼ï¼Œä¹‹åç³»ç»Ÿä¼šè¿›è¡Œæ¨¡å¼çš„è½¬æ¢ï¼Œå°†16ä½æ¨¡å¼æ¥å˜ä¸º32ä½æ¨¡å¼ï¼Œæé«˜å¯¹å†…å­˜ä½¿ç”¨çš„æƒé™</p><p>16ä½æ¨¡å¼çš„å¯»å€è§£æç”µè·¯ï¼šCS&lt;&lt;4+ip  ï¼ˆç§°ä¸ºå®æ¨¡å¼ï¼‰</p><p>32ä½æ¨¡å¼çš„å¯»å€è§£æç”µè·¯ï¼šæ ¹æ®CSæŸ¥è¡¨+IPï¼ˆç§°ä½ä¿æŠ¤æ¨¡å¼ï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t9m8pleej214q0ogaec.jpg" alt="image-20220501221905679" /></p><p>åœ¨è¿è¡Œå®Œhead.sä¹‹åä¾¿å¯ä»¥å­©å­é€‰å“ªä¸ªmain.c,è¿™é‡Œæ˜¯æ ¹æ®æ ˆæ¥è¿›è¡Œå¤„ç†çš„ï¼Œä¹Ÿå°±æ˜¯å†…å­˜ä¸­å‡½æ•°çš„è®°å½•å’Œè¿”å›</p><h2 id="0x04-interface"><a class="markdownIt-Anchor" href="#0x04-interface"></a> 0x04 Interface</h2><p>æ¥å£å°±æ˜¯ç³»ç»Ÿæä¾›çš„ä¸€äº›å¯ä»¥è°ƒç”¨çš„å‡½æ•°ï¼Œå› ä¸ºæ¥å£æ˜¯å‡½æ•°ï¼Œå‡½æ•°æ˜¯é€šè¿‡è°ƒç”¨å®ç°çš„ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºç³»ç»Ÿè°ƒç”¨</p><p>åœ¨å…·ä½“åˆ°æ“ä½œç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„æ¥å£éœ€è¦ä¸€äº›ç»Ÿä¸€çš„è§„èŒƒï¼Œæœ€åŸºæœ¬çš„æ˜¯POSIXä¸­çš„æ¥å£åˆ—è¡¨</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t9s1foj1j213e0m0djp.jpg" alt="image-20220501222440442" /></p>]]></content>
    
    
    <categories>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å“ˆå·¥å¤§æ“ä½œç³»ç»Ÿ-ææ²»å†›</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¼˜åŒ–ç®—æ³•-01--pyomoçš„ç®€å•å­¦ä¹ </title>
    <link href="/posts/903b7e5.html"/>
    <url>/posts/903b7e5.html</url>
    
    <content type="html"><![CDATA[<p>pyomoæ˜¯Pythonä¸­çš„ä¸€ä¸ªå»ºæ¨¡æ±‚è§£è¯­è¨€ Pyomo(Python Optimization Modeling Objects):ä¼˜åŒ–å»ºæ¨¡å¯¹è±¡ï¼Œæ”¯æŒå¤æ‚ä¼˜åŒ–åº”ç”¨çš„æ•°å­¦æ¨¡å‹çš„å»ºç«‹å’Œåˆ†æ,æ˜¯ä¸€ç§åŠŸèƒ½é½å…¨çš„é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…å«ä¸€ç»„ä¸°å¯Œçš„æ”¯æŒåº“ï¼›å»ºæ¨¡çš„è¿‡ç¨‹æ˜¯ç§‘å­¦ç ”ç©¶ã€å·¥ç¨‹å’Œå•†ä¸šè®¸å¤šæ–¹é¢çš„åŸºæœ¬è¿‡ç¨‹ï¼Œå»ºæ¨¡æ¶‰åŠç³»ç»Ÿæˆ–ç°å®ä¸–ç•Œå¯¹è±¡çš„ç®€åŒ–è¡¨ç¤ºçš„åˆ¶å®šã€‚å¯ä»¥è°ƒç”¨cplexè¿™æ ·çš„æ±‚è§£å™¨æ¥è¿›è¡Œè®¡ç®—ã€‚</p><span id="more"></span><p><a href="https://zhuanlan.zhihu.com/p/479835520">Cplex12.10â€“Linuxâ€“(Py3~Py38å®‰è£…è¿‡ç¨‹ï¼ˆé™„å®‰è£…åŒ…ï¼‰)</a></p><p>å› æ­¤åƒPyomoçš„å»ºæ¨¡å·¥å…·å¯ä»¥ç”¨äºï¼š</p><ol><li>è§£é‡Šç³»ç»Ÿä¸­å‡ºç°çš„ç°è±¡</li><li>é¢„æµ‹ç³»ç»Ÿçš„æœªæ¥çŠ¶æ€</li><li>è¯†åˆ«ç³»ç»Ÿä¸­å¯èƒ½çš„æœ€åæƒ…å†µæˆ–è€…æœ€ä½æˆæœ¬çš„æå€¼ç‚¹</li><li>åˆ†ææƒè¡¡æ¥ç»™äºˆå†³ç­–è€…æ”¯æŒ</li></ol><p>å¸¸è§çš„æ±‚è§£å™¨ï¼š</p><ul><li>CBCï¼Œå¼€æºæ±‚è§£å™¨ï¼ˆCOIN-ORï¼‰å¼€å‘çš„çº¿æ€§è§„åˆ’æ±‚è§£å™¨ï¼Œæ€§èƒ½ä¸è¶³</li><li>GLPKï¼ˆGNU Linear Programmed Kitï¼‰æ˜¯GNUç»´æŠ¤ä¸€ä¸ªçº¿å½¢è§„åˆ’å·¥å…·åŒ…ï¼Œå¯¹äºæ±‚è§£å¤§è§„æ¨¡çš„é¢çº¿æ€§è§„åˆ’é—®é¢˜é€Ÿåº¦ç¼“æ…¢</li><li>CPLEXï¼Œæ˜¯IBMå¼€å‘çš„å•†ä¸šçº¿æ€§è§„åˆ’æ±‚è§£å™¨ï¼Œå¯ä»¥æ±‚è§£LP,QP,QCQP,SOCPç­‰å››ç±»åŸºæœ¬é—®é¢˜å’Œå¯¹åº”çš„MIPï¼Œç¤¾åŒºç‰ˆä»…æ”¯æŒä½äº1000å˜é‡çš„ä½¿ç”¨ï¼Œæ•™è‚²ç‰ˆæ— é™åˆ¶ï¼Œå»ºæ¨¡æ—¶é—´é•¿ï¼Œä½†æ˜¯æ±‚è§£é€Ÿåº¦éå¸¸å¿«</li><li>Gurobiï¼Œæ˜¯CPLEXå›¢é˜Ÿåˆ›å§‹äººé‡æ–°åˆ›å»ºçš„å•†ä¸šæ±‚è§£å™¨ï¼Œå’Œcplexé€Ÿåº¦å·®åˆ«ä¸å¤§ï¼Œç›¸å¯¹æ¥è¯´æ¯”Cplexå¥½ä¸€ç‚¹</li></ul><p>Pyomoçš„å­¦ä¹ ç½‘ç«™</p><p><a href="https://pyomo.readthedocs.io/en/stable/installation.html">Installation - Pyomo 6.4.0 documentation</a></p><h2 id="0x01-pyomo-overview"><a class="markdownIt-Anchor" href="#0x01-pyomo-overview"></a> 0x01 Pyomo overview</h2><h3 id="11-mathematical-modeling-æ•°å­¦å»ºæ¨¡"><a class="markdownIt-Anchor" href="#11-mathematical-modeling-æ•°å­¦å»ºæ¨¡"></a> 1.1 Mathematical modeling æ•°å­¦å»ºæ¨¡</h3><p>æ•°å­¦æ¨¡å‹æ˜¯ç”¨å½¢å¼åŒ–çš„è¯­è¨€è¡¨ç¤ºç³»ç»Ÿåªæ˜¯ï¼Œä»¥ä¸‹æ•°å­¦æ¦‚å¿µæ˜¯ç°ä»£å»ºæ¨¡æ´»åŠ¨çš„æ ¸å¿ƒ</p><ol><li>å˜é‡variableï¼Œå˜é‡ä»£è¡¨æ¨¡å‹çš„æœªçŸ¥æˆ–å˜åŒ–éƒ¨åˆ†ï¼Œï¼ˆä¾‹å¦‚æ˜¯å¦åšå‡ºå†³å®šï¼Œæˆ–ç³»ç»Ÿç»“æœçš„ç‰¹å¾ï¼‰ï¼Œå˜é‡æ‰€å–çš„å€¼é€šå¸¸ç§°ä¸ºè§£ï¼Œé€šå¸¸æ˜¯ä¼˜åŒ–è¿‡ç¨‹çš„è¾“å‡º</li><li>å‚æ•°parametersï¼Œå‚æ•°è¡¨ç¤ºä¸ºæ‰§è¡Œä¼˜åŒ–å¿…é¡»æä¾›çš„æ•°æ®ï¼Œå®é™…ä¸Šåœ¨æŸäº›è®¾ç½®ä¸­dataç”¨æ¥ä»£æ›¿parameters</li><li>å…³ç³»relationsï¼Œè¿™é‡Œæ˜¯åœ¨å®šä¹‰æ¨¡å‹çš„ä¸åŒéƒ¨åˆ†å¦‚ä½•ç›¸äº’é“¾æ¥çš„æ–¹ç¨‹ã€ä¸ç­‰å¼æˆ–è€…å…¶ä»–çš„æ•°å­¦å…³ç³»</li><li>ç›®æ ‡goalï¼Œååº”è¢«å»ºæ¨¡ç³»ç»Ÿçš„ç›®æ ‡å’ŒåŠŸèƒ½</li></ol><p>åœ¨è®¡ç®—æœºæ±‚è§£çš„è¿‡ç¨‹ä¸­å¯ä»¥åˆ†ä¸ºå»ºæ¨¡å’Œæ±‚è§£ä¸¤ä¸ªæ–¹é¢ï¼Œè®¡ç®—æ€§èƒ½çš„æ›¿åƒ§æ˜¯çš„æ•°å­¦æ¨¡å‹çš„æ•°å€¼åˆ†æç§°ä¸ºä¸€é¡¹å¸ç©ºè§æƒ¯çš„æ´»åŠ¨ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰å»ºæ¨¡è¯­è¨€ï¼Œè®¾ç½®è¾“å…¥æ–‡ä»¶ã€æ‰§è¡Œæ±‚è§£å™¨ä»¥åŠä»æ±‚è§£å™¨ä¸­è¾“å‡ºä¸­æå–ç»“æœçš„è¿‡ç¨‹å³ç¹çåˆå®¹æ˜“å‡ºé”™ï¼Œåœ¨å‘ç”Ÿé”™è¯¯æ—¶éš¾ä»¥è°ƒè¯•ï¼Œåœ¨å¤§è§„æ¨¡çš„å®é™…åº”ç”¨ç¨‹åºä¸­è¿™ç§å›°éš¾æ›´åŠ å¤æ‚ï¼Œæ­¤å¤–ä¼˜åŒ–è½¯ä»¶åŒ…ä½¿ç”¨çš„æ ¼å¼å¾ˆå¤šï¼Œè€Œè®¸å¤šä¼˜åŒ–å™¨å®é™…è¯†åˆ«çš„æ ¼å¼å¾ˆå°‘ï¼Œå› æ­¤åº”ç”¨å¤šä¸ªä¼˜åŒ–å™¨æ±‚è§£æ¥åˆ†ææ¨¡å‹ä¼šå¸¦æ¥é¢å¤–çš„å¤æ‚æ€§</p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­pyomoå¸Œæœ›æ‹“å±•ç”¨äºpythonçš„æ•°å­¦å»ºæ¨¡ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„ä¼˜åŒ–æ±‚è§£å™¨æ¥è¾…åŠ©æ±‚è§£ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å…¶å…·æœ‰çš„ç‰¹å¾æœ‰</p><ul><li>å¼€æº</li><li>å¯å®šåˆ¶</li><li>æ±‚è§£å™¨é›†æˆ</li><li>å…·æœ‰éå¸¸robustçš„è¯­è¨€ã€å¹¿æ³›çš„æ–‡æ¡£ã€ä¸°å¯Œçš„æ ‡å‡†åº“é›†ï¼Œå¯¹ç°ä»£ç¼–ç¨‹ä¸­ç±»å’Œå‡½æ•°çš„æ”¯æŒ</li></ul><h3 id="12-overview-of-modeling-components-and-processeså»ºæ¨¡ç»„å»ºå’Œè¿‡ç¨‹æè¿°"><a class="markdownIt-Anchor" href="#12-overview-of-modeling-components-and-processeså»ºæ¨¡ç»„å»ºå’Œè¿‡ç¨‹æè¿°"></a> 1.2 Overview of modeling components and processeså»ºæ¨¡ç»„å»ºå’Œè¿‡ç¨‹æè¿°</h3><p>ç®€å•å»ºæ¨¡è¿‡ç¨‹çš„åŸºæœ¬æ­¥éª¤</p><ol><li>åˆ›å»ºæ¨¡å‹å¹¶å£°æ˜ç»„å»º</li><li>å®ä¾‹åŒ–æ¨¡å‹</li><li>åº”ç”¨æ±‚è§£å™¨</li><li>è¯¢é—®æ±‚è§£å™¨ç»“æœ</li></ol><p>åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­pyomoçš„å»ºæ¨¡ç»„ä»¶å®šä¹‰æ¥æ¨¡å‹çš„ä¸åŒæ–¹é¢ï¼ŒåŒ…æ‹¬ç°ä»£AMLé€šå¸¸æ”¯æŒçš„å»ºæ¨¡ç»„ä»¶ï¼Œ</p><p>sets, symbolic parameters, decision variables, objectivesï¼Œconstraints</p><p>åœ¨pyomoä¸­å®šä¹‰ç›¸å…³çš„pythonç±»</p><ul><li>Setï¼Œç”¨äºå®šä¹‰æ¨¡å‹å®ä¾‹çš„æ•°æ®</li><li>Paramï¼Œç”¨äºå®šä¹‰æ¨¡å‹å®ä¾‹çš„å‚æ•°æ•°æ®</li><li>Varã€‚æ¨¡å‹ä¸­çš„å†³ç­–å˜é‡</li><li>Objectiveï¼Œæ¨¡å‹ä¸­æœ€å°åŒ–æˆ–æœ€å¤§åŒ–çš„ç›®æ ‡å‡½æ•°</li><li>Constraintï¼Œå¯¹æ¨¡å‹ä¸­çš„Varæ–½åŠ çº¦æŸé™åˆ¶çš„è¡¨è¾¾å¼</li></ul><h2 id="0x02-abstract-versus-concrete-modelsæŠ½è±¡æ¨¡å‹å’Œå…·ä½“æ¨¡å‹"><a class="markdownIt-Anchor" href="#0x02-abstract-versus-concrete-modelsæŠ½è±¡æ¨¡å‹å’Œå…·ä½“æ¨¡å‹"></a> 0x02 Abstract versus concrete modelsæŠ½è±¡æ¨¡å‹å’Œå…·ä½“æ¨¡å‹</h2><p>ä½¿ç”¨ç±»AbstractModelï¼ˆï¼‰å¯ä»¥ä½¿ç”¨è¡¨ç¤ºæ•°æ®å€¼çš„ç¬¦å·æ¥å®šä¹‰æ•°å­¦æ¨¡å‹ï¼Œï¼Œä¾‹å¦‚ä¸‹åˆ—è¡¨ç¤ºä¸€ä¸ªçº¿æ€§ç¨‹åºï¼Œç”¨äºæ‰¾åˆ°å‘é‡çš„æœ€ä¼˜å€¼xï¼ŒåŒ…æ‹¬å‚æ•°nå’Œbï¼Œå’Œå‚æ•°å‘é‡aå’Œc</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t87h6ybuj20w609a74r.jpg" alt="image-20220501213016741" /></p><p>ä½¿ç”¨ç±»ConcreteModelï¼ˆï¼‰æ¥å»ºç«‹å…·ä½“æ¨¡å‹</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1t87n2lgfj20qa05c74f.jpg" alt="image-20220501213028132" /></p><p>pythonç¨‹åºå¯èƒ½æ›´å–œæ¬¢ ç¼–å†™å…·ä½“æ¨¡å‹ï¼Œè€Œå…¶ä»–çš„ä¸€äº›ä»£æ•°å»ºæ¨¡è¯­è¨€çš„ç”¨æˆ·å¯èƒ½æ›´å–œæ¬¢ç¼–å†™æŠ½è±¡æ¨¡å‹</p><h3 id="21-simple-modelsç®€å•æ¨¡å‹"><a class="markdownIt-Anchor" href="#21-simple-modelsç®€å•æ¨¡å‹"></a> 2.1 Simple modelsç®€å•æ¨¡å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> pyomo.environ as pyo<br>model=pyo.ConcreteModel()<br>model.x=pyo.Var([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],domain=pyo.NonNegativeReals)<br>model.Obj=pyo.Objective(expr=<span class="hljs-number">2</span>*model.x[<span class="hljs-number">1</span>]+<span class="hljs-number">3</span>*model.x[<span class="hljs-number">2</span>])<br>model.Constraint1=pyo.Constraint(expr=<span class="hljs-number">3</span>*model.x[<span class="hljs-number">1</span>]+<span class="hljs-number">4</span>*model.x[<span class="hljs-number">2</span>]&gt;=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>è™½ç„¶è§„åˆ™å‡½æ•°ä¹Ÿå¯ä»¥ç”¨äºæŒ‡å®šConstraintå’ŒObjectiveï¼Œä½†æ˜¯åœ¨æ­¤ç¤ºä¾‹ä¸­ä½¿ç”¨expræ¥ä»…åœ¨å…·ä½“æ¨¡å‹ä¸­å¯ç”¨çš„é€‰é¡¹ï¼Œæ¥ç›´æ¥æŒ‡å®šè¡¨è¾¾å¼</p><h3 id="22-abstract-modelsæŠ½è±¡æ¨¡å‹"><a class="markdownIt-Anchor" href="#22-abstract-modelsæŠ½è±¡æ¨¡å‹"></a> 2.2 Abstract ModelsæŠ½è±¡æ¨¡å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java">from _future_ <span class="hljs-keyword">import</span> division<br><span class="hljs-keyword">import</span> pyomo.environ as pyo<br><br>model=pyo.AbstractModel()<br><br><span class="hljs-comment">//  å®šä¹‰ä¸€äº›å‚æ•°çš„é›†åˆ</span><br><span class="hljs-comment">// within ç”¨äºéªŒè¯åˆ†é…ç»™å‚æ•°æ•°æ®å€¼çš„é€‰é¡¹çš„ä½¿ç”¨</span><br>model.m=pyo.Param(within=pyo.NonNegativeReals)<br>model.n=pyo.Param(within=pyo.NonNegativeReals)<br><br><span class="hljs-comment">// ä½¿ç”¨rangesetæ¥å£°æ˜é›†åˆæ˜¯ä¸€ä¸ªæ•´æ•°åºåˆ—</span><br>Model.I=Pyo.RangeSet(<span class="hljs-number">1</span>,model.m)<br>Model.J=Pyo.RangeSet(<span class="hljs-number">1</span>,model.n)<br><br><span class="hljs-comment">// å½“é›†åˆSetä½œä¸ºParamçš„ç»„ä»¶å‚æ•°ç»™å‡ºä¹‹åï¼Œè¡¨æ˜è¯¥é›†åˆå°†ç´¢å¼•å‚æ•°</span><br>model.a=pyo.Param(model.I,model.J)<br>model.b=pro.Param(model.I)<br>model.c=pyo.Param(model.J)<br><br><span class="hljs-comment">//æ ¹æ®å‚æ•°jå®šä¹‰å˜é‡ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºVariableæŒ‡å®šçš„å‚æ•°åŸŸ</span><br>model.x=pyo.Var(model.J,domain=pyo.NonNegativeReals)<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">åœ¨æŠ½è±¡æ¨¡å‹ä¸­ï¼Œpromoè¡¨è¾¾å¼é€šå¸¸é€šè¿‡defæ¥å®šä¹‰å‡½æ•°ç»™å®šç›®æ ‡å’Œçº¦æŸå£°æ˜ï¼Œè¯¥defä¸ºå‡½æ•°åŠå…¶å‚æ•°å»ºç«‹ä¸€ä¸ªåç§°ï¼Œå½“pyomoä½¿ç”¨å‡½æ•°æ¥è·å–objectiveæˆ–è€…constraintæ—¶å€™ï¼Œæ€»æ˜¯å°†æ¨¡å‹ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°è¾“å…¥</span><br><span class="hljs-comment">å› æ­¤åœ¨pyomoä¸­å£°æ˜æ­¤ç±»å‡½æ•°æ—¶ï¼Œæ¨¡å‹å§‹ç»ˆæ˜¯ç¬¬ä¸€ä¸ªå½¢å¼å‚æ•°ï¼Œå¦‚æœéœ€è¦è¯·éµå¾ªå…¶ä»–å‚æ•°</span><br><span class="hljs-comment">å®šä¹‰çš„è¿‡ç¨‹ä¸­æœ‰ï¼Œå¸¸è§çš„</span><br><span class="hljs-comment">sumå‡½æ•°ï¼Œæ¥è¡¨ç¤ºæ±‚å’Œ</span><br><span class="hljs-comment">summationï¼ˆï¼‰è¡¨ç¤ºä¸¤ä¸ªå‚æ•°åœ¨ä»–ä»¬çš„ç´¢å¼•çš„ä¹˜ç§¯ä¹‹å’Œï¼Œé»˜è®¤æœ€å°åŒ–ï¼Œå¦‚æœå¸Œæœ›æœ€å¤§åŒ–éœ€è¦åŠ å…¥senese=pyo.maximize</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">//å®šä¹‰ç›®æ ‡å‡½æ•°</span><br>def <span class="hljs-title function_">obj_experssion</span><span class="hljs-params">(m)</span>:<br><span class="hljs-keyword">return</span> pyo.summation(m.c,m.x)<span class="hljs-comment">//??è¿™é‡Œåº”è¯¥æ˜¯çŸ©é˜µç›¸ä¹˜</span><br>model.OBJ=pyo.Objective(rule=obj_experssion)<span class="hljs-comment">//ï¼Ÿï¼Ÿè¿™é‡Œçš„å‚æ•°è¾“å…¥ä¸ºä»€ä¹ˆæ˜¯rule</span><br><br>def <span class="hljs-title function_">ax_constraint_rule</span><span class="hljs-params">(m, i)</span>:<br>    # <span class="hljs-keyword">return</span> the expression <span class="hljs-keyword">for</span> the constraint <span class="hljs-keyword">for</span> i<br>    <span class="hljs-keyword">return</span> sum(m.a[i,j] * m.x[j] <span class="hljs-keyword">for</span> j in m.J) &gt;= m.b[i]<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">ä»æŠ½è±¡æ¨¡å‹ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªå€¼è®¾ç½®ä¸€ä¸ªçº¦æŸiä»1åˆ°m</span><br><span class="hljs-comment">ä¸ºå‚æ•°åŒ–è¡¨è¾¾å¼iï¼Œæˆ‘ä»¬å°†å®ƒä½œä¸ºå½¢å¼å‚æ•°åŒ…å«åœ¨å£°æ˜çº¦æŸè¡¨è¾¾å¼çš„å‡½æ•°ä¸­ï¼Œä½¿ç”¨pyomo.constraintå‚æ•°</span><br><span class="hljs-comment">å› ä¸ºæˆ‘ä»¬æ¨¡å‹å…·æœ‰è®¸å¤šç›¸åŒå½¢å¼çš„çº¦æŸï¼Œå¹¶ä¸”æˆ‘ä»¬åˆ›å»ºæ¥ä¸€ä¸ªé›†åˆï¼Œmodel.Iè¿™äº›çº¦æŸå¯ä»¥åœ¨å…¶ä¸Šè¢«ç´¢å¼•ï¼Œå› æ­¤è¿™æ˜¯çº¦æŸå£°æ˜çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ</span><br><span class="hljs-comment">ä¸‹ä¸ªå‚æ•°ç»™å‡ºæ¥å°†ç”¨äºç”Ÿæˆçº¦æŸè¡¨è¾¾å¼çš„è§„åˆ™ï¼Œ</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">è¿™ä¸ªçº¦æŸå£°æ˜model.Iå°†åˆ›å»ºä¸€ä¸ªç”±é›†åˆç´¢å¼•çš„çº¦æŸåˆ—è¡¨ï¼Œå¹¶ä¸”å¯¹äºæ¯ä¸ªæˆå‘˜model.Iéƒ½ä¼šè°ƒç”¨å‡½æ•°ax-constraint-ruleå¹¶ä¼ é€’ç»™æ¨¡å‹å¯¹è±¡ä»¥åŠæˆå‘˜model.I</span><br><span class="hljs-comment">*/</span><br># the next line creates one constraint <span class="hljs-keyword">for</span> each member of the set model.I<br>model.AxbConstraint = pyo.Constraint(model.I, rule=ax_constraint_rule)<br></code></pre></td></tr></table></figure><p>ä¸ºäº†ä½¿ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œå¿…é¡»ç»™å‡ºå‚æ•°å€¼çš„æ•°æ®ï¼Œå¯ä»¥æä¾›æ•°æ®çš„æ–‡ä»¶ï¼Œæ ¼å¼ä¸ºdat</p><h2 id="0x03-pyomo-model-setting"><a class="markdownIt-Anchor" href="#0x03-pyomo-model-setting"></a> 0x03 Pyomo model setting</h2><ul><li><code>Any</code>= æ‰€æœ‰å¯èƒ½çš„å€¼</li><li><code>Reals</code>= æµ®ç‚¹å€¼</li><li><code>PositiveReals</code>= ä¸¥æ ¼çš„æ­£æµ®ç‚¹å€¼</li><li><code>NonPositiveReals</code>= éæ­£æµ®ç‚¹å€¼</li><li><code>NegativeReals</code>= ä¸¥æ ¼çš„è´Ÿæµ®ç‚¹å€¼</li><li><code>NonNegativeReals</code>= éè´Ÿæµ®ç‚¹å€¼</li><li><code>PercentFraction</code>= åŒºé—´ [0,1] ä¸­çš„æµ®ç‚¹å€¼</li><li><code>UnitInterval</code>= PercentFraction çš„åˆ«å</li><li><code>Integers</code>= æ•´æ•°å€¼</li><li><code>PositiveIntegers</code>= æ­£æ•´æ•°å€¼</li><li><code>NonPositiveIntegers</code>= éæ­£æ•´æ•°å€¼</li><li><code>NegativeIntegers</code>= è´Ÿæ•´æ•°å€¼</li><li><code>NonNegativeIntegers</code>= éè´Ÿæ•´æ•°å€¼</li><li><code>Boolean</code> å¸ƒå°”å€¼ï¼Œå¯ä»¥è¡¨ç¤ºä¸º False/Trueã€0/1ã€â€˜Falseâ€™/â€˜Trueâ€™ å’Œ â€˜Fâ€™/â€˜Tâ€™</li><li><code>Binary</code>= æ•´æ•° {0, 1}</li></ul><h3 id="31-sets"><a class="markdownIt-Anchor" href="#31-sets"></a> 3.1 Sets</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">pyo.Set()<br>* dimen,é›†åˆå‚æ•°çš„ç»´åº¦<br>* docï¼Œæè¿°é›†åˆçš„å­—ç¬¦ä¸²<br>* filterï¼Œåœ¨æ„é€ è¿‡ç¨‹ä¸­ä½¿ç”¨å¸ƒå°”å‡½æ•°<br>* initializeï¼ŒåŒ…å«setçš„åˆå§‹æˆå‘˜çš„å¯è¿­ä»£å¯¹è±¡<br>* orderedï¼Œä¸€ä¸ªboolæ¥è¡¨ç¤ºé›†åˆæ˜¯æœ‰åºçš„<br>* validateï¼ŒéªŒè¯æ–°æˆå‘˜æ•°æ®çš„bool<br>* withinï¼Œç”¨äºéªŒè¯çš„é›†åˆ<br><br>pyo.rangeSet()<br>ç”Ÿæˆä¸€ä¸ªã€min,max,stepã€‘<br></code></pre></td></tr></table></figure><h3 id="32-parameters"><a class="markdownIt-Anchor" href="#32-parameters"></a> 3.2 Parameters</h3><p>ä½¿ç”¨è¯¥è¯è¡¨ç¤ºå¿…é¡»æä¾›çš„æ•°æ®ï¼Œä»¥ä¾¿ä¸ºå†³ç­–å˜é‡æ‰¾åˆ°æœ€ä½³çš„åˆ†é…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">pyo.Param()<br>* <span class="hljs-keyword">default</span><br>* doc<br>* initialize è¿”å›ç”¨äºåˆå§‹åŒ–å‚æ•°å€¼çš„æ•°æ®å‡½æ•°<br>* mutableï¼Œboolæ¥è®¾ç½®æ˜¯å¦å…è®¸åœ¨paramåˆå§‹åŒ–åæ›´æ”¹å€¼<br>* validateï¼Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ¥å—æ¨¡å‹ã€å»ºè®®å€¼å’Œå»ºè®®å€¼çš„ç´¢å¼•<br>* withinï¼Œç”¨äºéªŒè¯çš„é›†åˆï¼ŒæŒ‡å®šæœ‰æ•ˆå‚æ•°å€¼çš„åŸŸ<br></code></pre></td></tr></table></figure><h3 id="33-varibles"><a class="markdownIt-Anchor" href="#33-varibles"></a> 3.3 Varibles</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">pyo.Var()<br>* bounds<br>* domain<br>* initialize,ä¸ºå˜é‡æä¾›åˆå§‹å€¼ï¼Œæˆ–è€…æä¾›åˆå§‹ç´¢å¼•å€¼<br></code></pre></td></tr></table></figure><h3 id="34-objectives"><a class="markdownIt-Anchor" href="#34-objectives"></a> 3.4 Objectives</h3><p>è¿”å›è¯•å›¾æœ€å¤§åŒ–æˆ–æœ€å°åŒ–å€¼çš„å˜é‡å‡½æ•°ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªé»˜è®¤å‚æ•°ä½modelçš„å‡½æ•°æ¥ä½œä¸ºè¾“å…¥</p><figure class="highlight stan"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stan">def ObjRule(<span class="hljs-title">model</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*<span class="hljs-title">model</span>.x[<span class="hljs-number">1</span>] + <span class="hljs-number">3</span>*<span class="hljs-title">model</span>.x[<span class="hljs-number">2</span>]<br><span class="hljs-title">model</span>.obj1 = pyo.Objective(rule=ObjRule)<br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨senseå‚æ•°æ¥æœ€å¤§åŒ–</p><h3 id="35-constraints"><a class="markdownIt-Anchor" href="#35-constraints"></a> 3.5 Constraints</h3><p>å¤§å¤šæ•°çº¦æŸæ˜¯ä½¿ç”¨è§„åˆ™åˆ›å»ºçš„ç­‰å¼æˆ–ä¸ç­‰å¼æŒ‡å®šè¡¨è¾¾çš„</p><p>çº¦æŸå¯ä»¥é€šè¿‡åˆ—è¡¨æˆ–é›†åˆæ¥ç´¢å¼•ï¼Œå½“å£°æ˜ä¸­åŒ…å«åˆ—è¡¨æˆ–é›†åˆä½œä¸ºå‚æ•°ï¼Œå…ƒç´ ä¼šè¿­ä»£ä¼ é€’ç»™è§„åˆ™å‡½æ•°</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">model.A = <span class="hljs-constructor">RangeSet(1,10)</span><br>model.a = <span class="hljs-constructor">Param(<span class="hljs-params">model</span>.A, <span class="hljs-params">within</span>=PositiveReals)</span><br>model.ToBuy = <span class="hljs-constructor">Var(<span class="hljs-params">model</span>.A)</span><br>def bud<span class="hljs-constructor">_rule(<span class="hljs-params">model</span>, <span class="hljs-params">i</span>)</span>:<br>    return model.a<span class="hljs-literal">[<span class="hljs-identifier">i</span>]</span>*model.ToBuy<span class="hljs-literal">[<span class="hljs-identifier">i</span>]</span> &lt;= i<br>aBudget = <span class="hljs-constructor">Constraint(<span class="hljs-params">model</span>.A, <span class="hljs-params">rule</span>=<span class="hljs-params">bud_rule</span>)</span><br></code></pre></td></tr></table></figure><h2 id="æ±‚è§£å®ä¾‹"><a class="markdownIt-Anchor" href="#æ±‚è§£å®ä¾‹"></a> æ±‚è§£å®ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å­¦ä¹ promoä¸­å»ºæ¨¡çš„åŸºæœ¬è¿‡ç¨‹</span><br><span class="hljs-comment"># min 2*x+3*y</span><br><span class="hljs-comment"># s.t. 3x+4y&gt;=1</span><br><span class="hljs-comment"># x,y&gt;=0</span><br><span class="hljs-comment"># å°è¯•æ„å»ºæ¨¡å‹ï¼Œæ±‚è§£å¹¶å¾—åˆ°æœ€ç»ˆçš„ç»“æœ</span><br><span class="hljs-keyword">from</span> pyomo.environ <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> pyomo.environ <span class="hljs-keyword">as</span> pyo<br><br><span class="hljs-comment"># å»ºç«‹å®é™…æ¨¡å‹</span><br>model=ConcreteModel()<br>model.x=Var([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],domain=pyo.NonNegativeReals)<br>model.Obj=Objective(expr=<span class="hljs-number">2</span>*model.x[<span class="hljs-number">1</span>]+<span class="hljs-number">3</span>*model.x[<span class="hljs-number">2</span>])<br>model.Constraint1=Constraint(expr=<span class="hljs-number">3</span>*model.x[<span class="hljs-number">1</span>]+<span class="hljs-number">4</span>*model.x[<span class="hljs-number">2</span>]&gt;=<span class="hljs-number">1</span>)<br><br>opt=pyo.SolverFactory(<span class="hljs-string">&#x27;cplex&#x27;</span>)<br>opt.solve(model)<br><span class="hljs-built_in">print</span>(pyo.value(model.x[<span class="hljs-number">1</span>]))<br><span class="hljs-built_in">print</span>(pyo.value(model.x[<span class="hljs-number">2</span>]))<br></code></pre></td></tr></table></figure><h2 id=""><a class="markdownIt-Anchor" href="#"></a> </h2>]]></content>
    
    
    <categories>
      
      <category>Optimizer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Pyomo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•02-å›¾</title>
    <link href="/posts/36d150d2.html"/>
    <url>/posts/36d150d2.html</url>
    
    <content type="html"><![CDATA[<p>è¿™é‡Œä¸»è¦å€Ÿé‰´Tsinghuaçš„2020fall&lt;æ•°æ®ç»“æ„ä¸ç®—æ³•&gt;è¿™æœ¬ä¹¦ï¼ŒåŒ…å«å¯¹äºä¸€äº›åŸºæœ¬æ•°æ®ç»“æ„çš„æ¢ç´¢ï¼Œå…ˆä»å®šä¹‰æ¢³ç†ï¼Œåœ¨æ•´ç†é¢˜ç›®ï¼Œä¹‹åæ˜¯å®é™…è®­ç»ƒã€‚ç»“åˆä¹‹å‰åœ¨ç¨‹åºè®¾è®¡æˆ–åµŒå…¥å¼ä¸­å¯¹äºæ•°æ®åœ¨å®é™…å­˜å‚¨çš„ä¾‹å­æ¥å­¦ä¹ å¯èƒ½ä¼šæ›´å¥½ã€‚ä»ä¸­ä¹Ÿèƒ½ä½“æ‚Ÿåˆ°ç®—æ³•ä¸€äº›å«ä¹‰</p><p>æœ¬æ¬¡ä¸»è¦å¯¹å›¾ï¼ˆGraphï¼‰çš„åŸºæœ¬çŸ¥è¯†ç‚¹ï¼Œå’Œä¸€äº›å®é™…åº”ç”¨çš„ç®—æ³•è¿›è¡Œæè¿°ï¼Œä½†æ˜¯åœ¨å¦å¤–ä¸€æ–¹é¢ï¼Œå›¾ä¹Ÿä¸ä»…ä»…å­˜åœ¨äºæ•°æ®ç»“æ„ä¸­ï¼Œåœ¨è¿ç­¹å­¦ä¸­å¯¹å›¾ä¹Ÿæœ‰ç›¸å…³çš„æè¿°ï¼Œå› æ­¤å¸Œæœ›åœ¨è¿™é‡Œæ•´åˆä¸¤è€…ä¹‹é—´çš„æ¦‚å¿µï¼Œå¹¶åˆ†åˆ«ä»‹ç»ä¸¤è€…çš„åº”ç”¨ï¼ŒæŒºæœ‰æ„æ€çš„ã€‚</p><span id="more"></span><h1 id="0x01-æ•°æ®ç»“æ„ä¸­çš„-å›¾-graph"><a class="markdownIt-Anchor" href="#0x01-æ•°æ®ç»“æ„ä¸­çš„-å›¾-graph"></a> 0x01 æ•°æ®ç»“æ„ä¸­çš„ å›¾ Graph</h1><p>ä¾‹å¦‚ä¹‹å‰ä¾‹å­ä¸­çš„è¿·å®«ï¼Œå€ŸåŠ©ç»³ç´¢æŒæ¡è¿·å®«å†…å„é€šé“ä¹‹é—´çš„ç›¸äº’å…³ç³»ï¼Œåœ¨å¾ˆå¤šåº”ç”¨ä¸­æˆ‘ä»¬éœ€è¦å‡†ç¡®æœ‰æ•ˆæè¿°å’Œåˆ©ç”¨è¿™ç±»ä¿¡æ¯ï¼Œè¿™ç±»ä¿¡æ¯å¾€å¾€å¯ä»¥è¡¨è¿°ä¸ºå®šä¹‰ä¸ä¸€ç»„å¯¹è±¡ä¹‹é—´çš„äºŒå…ƒå…³ç³»ï¼Œæ¯”å¦‚åŸå¸‚äº¤é€šå›¾ã€æ¯”å¦‚äº’è”ç½‘ä¸­çš„IPåœ°å€ï¼Œå°½ç®¡ä¸Šä¸€ç« çš„æ ‘ Treeç»“æ„ä¹Ÿå¯ä»¥ç”¨æ¥è¡¨ç¤ºè¿™ç§äºŒå…ƒå…³ç³»ï¼Œä½†æ˜¯ä»…é™ä¸Parent Node å’ŒChild Nodeä¹‹é—´ï¼Œè¿™ç§ä¸€èˆ¬æ€§çš„äºŒå…ƒå…³ç³»å±äºå›¾è®º Graph Theoryçš„èŒƒç•´</p><p>æœ¬ç« çš„ä¸»è¦ç›®çš„</p><ol><li>ç®€è¦ä»‹ç»å›¾ï¼ˆGraphï¼‰çš„åŸºæœ¬æ¦‚å¿µå’Œæœ¯è¯­</li><li>å¦‚ä½•å®ç°ä½œä¸ºæŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰çš„å›¾ç»“æ„ï¼Œä¸»è¦è®¨è®ºé‚»æ¥çŸ©é˜µï¼ˆAdjacent matrixï¼‰ï¼Œå’Œé‚»æ¥è¡¨ï¼ˆAdjacent listï¼‰ä¸¤ç§å®ç°æ–¹å¼</li><li>ä»éå†ï¼ˆtraverseï¼‰çš„è§’åº¦ä»‹ç»å°†å›¾ï¼ˆGraphï¼‰è½¬æ¢ä¸ºæ ‘ï¼ˆTreeï¼‰çš„å…¸å‹æ–¹æ³•ï¼ŒåŒ…æ‹¬å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰å’Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰</li><li>åˆ†åˆ«ä»¥æ‹“æ‰‘æ’åºå’ŒåŒè¿é€šåŸŸåˆ†è§£ä¸ºä¾‹å­ï¼Œä»‹ç»åˆ©ç”¨åŸºæœ¬æ•°æ®ç»“æ„å¹¶åŸºäºéå†æ¨¡å¼ï¼Œè®¾è®¡å›¾ç®—æ³•çš„ä¸»è¦æ–¹æ³•</li><li>ï¼ˆæ•°æ®ç»“æ„å†³å®šéå†æ¬¡åºï¼‰çš„è§‚ç‚¹å‡ºå‘ï¼Œå°†éå†ç®—æ³•æ¦‚æ‹¬å¹¶ç»Ÿä¸€ä¸ºæœ€ä½³ä¼˜å…ˆéå†è¿™ä¸€æ¨¡å¼ï¼Œå¦‚æ­¤æ¥æ›´åŠ å‡†ç¡®å’Œæ·±åˆ»ç†è§£ä¸åŒå›¾ç®—æ³•ä¹‹é—´çš„å…±æ€§ä¸è”ç³»ï¼Œæ›´å¯ä»¥å­¦ä¼šé€šè¿‡é€‰æ‹©å’Œæ”¹è¿›æ•°æ®ç»“æ„ï¼Œé«˜æ•ˆè®¾è®¡å¹¶å®ç°å„ç§å›¾ç®—æ³•</li></ol><h2 id="11-æ¦‚è¿°"><a class="markdownIt-Anchor" href="#11-æ¦‚è¿°"></a> 1.1 æ¦‚è¿°</h2><p>å›¾ï¼ˆGraphï¼‰å®šä¹‰ä¸ºG=ï¼ˆVï¼ŒEï¼‰ã€‚é›†åˆVä¸­çš„å…ƒç´ ä¸ºé¡¶ç‚¹ï¼ˆVertexï¼‰ï¼Œé›†åˆEä¸­çš„å…ƒç´ åˆ†åˆ«å¯¹åº”äºVæ€»çš„æŸä¸€å¯¹é¡¶ç‚¹ï¼ˆu,vï¼‰ï¼Œè¡¨ç¤ºå®ƒä»¬ä¹‹é—´å­˜åœ¨çš„æŸç§å…³ç³»ï¼Œå› æ­¤å¯ä»¥ç§°ä¸ºè¾¹ï¼ˆEdgeï¼‰ï¼Œä»è®¡ç®—éœ€æ±‚çš„è§’åº¦çº¦å®šéƒ½æ˜¯æœ‰é™é›†ï¼Œè§„æ¨¡åˆ†åˆ«è®°ä¸ºnå’Œe</p><ul><li>æ— å‘å›¾ï¼ˆundirected graphï¼‰ï¼Œè‹¥è¾¹(u,v)æ‰€å¯¹åº”é¡¶ç‚¹çš„uå’Œvçš„æ¬¡åºæ— æ‰€è°“ï¼Œç§°ä½œæ— å‘è¾¹ï¼ˆundirect edgeï¼‰ï¼›</li><li>æœ‰å‘å›¾ï¼ˆdirected graphï¼‰ã€‚å¦‚æœä¸å¯¹ç­‰ï¼Œç§°ä¸ºdirected edgeï¼Œå¦‚æœä»uæŒ‡å‘vï¼Œåˆ™å…¶ä¸­uæ˜¯è¯¥è¾¹çš„originæˆ–è€…å°¾é¡¶ç‚¹tailï¼Œvæ˜¯è¯¥è¾¹çš„ç»ˆç‚¹destinationæˆ–å¤´é¡¶ç‚¹head</li><li>å¦‚æœåŒ…å«æœ‰å‘è¾¹å’Œæ— å‘è¾¹ï¼Œå¯ä»¥ç§°ä¸ºæ··åˆå›¾mixed graph</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jsk2ef7kj21540eogmx.jpg" alt="image-20220423173842428" /></p><p>åº¦ï¼ˆDegreeï¼‰ï¼Œå¯¹äºä»»ä½•ä¸€è¾¹e=&lt;u,v&gt;ï¼Œå¯ä»¥ç§°é¡¶ç‚¹uå’Œvå½¼æ­¤é‚»æ¥ï¼ˆadjacentï¼‰ï¼ŒåŒæ—¶ä¸è¾¹eå½¼æ­¤å…³è”ï¼ˆincidentï¼‰ã€‚åœ¨æ— å‘å›¾ä¸­ï¼Œä¸é¡¶ç‚¹vå…³è”çš„è¾¹æ•°ç§°ä¸ºvçš„åº¦æ•°ï¼ˆdegreeï¼‰ï¼Œè®°degï¼ˆvï¼‰ï¼›åœ¨æœ‰å‘å›¾ä¸­ï¼Œå‡ºè¾¹æ€»æ•°ç§°ä¸ºå‡ºåº¦ï¼ˆout-degreeï¼‰ã€å…¥è¾¹æ€»æ•°ç§°ä¸ºï¼ˆin-degreeï¼‰</p><p>ç®€å•å›¾ï¼ˆSimple Graphï¼‰ï¼ŒæŒ‡çš„æ˜¯ä¸åŒ…å«ä»»ä½•è‡ªç¯çš„å›¾ï¼ˆSelf-loopï¼‰ï¼Œè‡ªç¯æŒ‡çš„æ˜¯è”æ¥ä¸åŒä¸€é¡¶ç‚¹ä¹‹é—´çš„è¾¹ï¼Œåœ¨æŸäº›åœºæ™¯ä¸­å…·æœ‰ç‰¹å®šæ„ä¹‰ï¼Œä½†åœ¨ç®€å•å›¾ä¸­ä¸è®¨è®ºã€‚</p><p>é€šè·¯ï¼ˆpathï¼‰å°±æ˜¯ç”±m+1ä¸ªé¡¶ç‚¹äºmæ¡è¾¹äº¤æ›¿è€Œæˆçš„ä¸€ä¸ªåºåˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›è¾¹ä¾æ¬¡é¦–å°¾ç›¸è¿ï¼Œå…¶ä¸­æ²¿é€”çš„è¾¹çš„æ€»æ•°mæ˜¯é€šè·¯çš„é•¿åº¦ã€‚æ³¨æ„é€šè·¯ä¸­çš„è¾¹å¿…é¡»äº’å¼‚ï¼Œä½†æ˜¯é¡¶ç‚¹å¯èƒ½é‡å¤ï¼Œå½“é¡¶ç‚¹éƒ½ä¸ç›¸åŒç§°ä¸ºç®€å•é€šè·¯ï¼ˆSimple pathï¼‰</p><p>ç¯è·¯ï¼ˆcycleï¼‰å°±æ˜¯åœ¨é€šè·¯çš„åŸºç¡€ä¸ŠåŠ ä¸Šèµ·æ­¢é¡¶ç‚¹ç›¸åŒï¼Œå¯¹äºä¸åŒ…å«ä»»ä½•ç¯è·¯çš„æœ‰å‘å›¾ç§°ä¸ºæœ‰å‘æ— ç¯å›¾ï¼ˆdirected acrylic graphï¼ŒDAGï¼‰ï¼Œå¦‚æœç¯è·¯ä¸­é™¤äº†èµ·ç‚¹å’Œç»ˆç‚¹çš„é¡¶ç‚¹ç›¸åŒï¼Œå…¶ä»–éƒ½æ˜¯ä¸€æ ·çš„ç§°ä¸ºç®€å•ç¯è·¯ï¼ˆSimple  cycleï¼‰ã€‚ä¸€äº›ç‰¹æ®Šçš„ç¯è·¯ï¼Œæ¬§æ‹‰ç¯è·¯ï¼ˆEulerian tourï¼‰æ˜¯å›¾ä¸­å„è¾¹ä¸€æ¬¡ä¸”æ°å¥½ä¸€æ¬¡çš„ç¯è·¯ï¼›å¯¹å¶çš„ï¼Œå“ˆå¯†å°”é¡¿ç¯è·¯ï¼ˆHamiltonian tourï¼‰æ˜¯ç»è¿‡å›¾ä¸­å„é¡¶ç‚¹ä¸€æ¬¡ä¸”æ°å¥½ä¸€æ¬¡çš„ç¯è·¯</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jsuai42wj20sk13a0vy.jpg" alt="image-20220423174833630" /></p><p>å¸¦æƒç½‘ç»œï¼ˆweighted networkï¼ŒGï¼ˆVï¼ŒEï¼Œwtï¼ˆï¼‰ï¼‰ï¼‰éœ€è¦é€šè¿‡ä¸€ä¸ªæƒå€¼å‡½æ•°ï¼Œä¸ºæ¯ä¸€è¾¹eæŒ‡å®šä¸€ä¸ªæƒé‡weightï¼Œwtï¼ˆeï¼‰æŒ‡å®šè¾¹eçš„æƒé‡</p><p>å¤æ‚åº¦ï¼ˆcomplexityï¼‰ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­nå„é¡¶ç‚¹ï¼Œæœ€å¤šæœ‰e=Oï¼ˆn^2)æ¥è¿›è¡Œæè¿°</p><h2 id="12-æŠ½è±¡æ•°æ®ç±»å‹çš„å®ç°"><a class="markdownIt-Anchor" href="#12-æŠ½è±¡æ•°æ®ç±»å‹çš„å®ç°"></a> 1.2 æŠ½è±¡æ•°æ®ç±»å‹çš„å®ç°</h2><p>ä¹Ÿå°±æ˜¯å›¾ï¼ˆGraphï¼‰æ“ä½œçš„ä¸€äº›æ–¹æ³•ï¼Œä¸€èˆ¬å¸¸è§çš„å®é™…æ–¹æ³•ï¼Œå…·ä½“å®ç°è¿‡ç¨‹ç•¥è¿‡ï¼ˆçœ‹ä¸æ‡‚ï¼Œæš‚æ—¶è§‰å¾—æ²¡å¿…è¦ï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jsvv72s8j21j00si10p.jpg" alt="image-20220423175001245" /></p><h2 id="13-é‚»æ¥çŸ©é˜µ-adjacent-matrix"><a class="markdownIt-Anchor" href="#13-é‚»æ¥çŸ©é˜µ-adjacent-matrix"></a> 1.3 é‚»æ¥çŸ©é˜µ Adjacent matrix</h2><p>é‚»æ¥çŸ©é˜µæ˜¯å›¾ï¼ˆGraphï¼‰çš„ADTï¼ˆAbstract Data Typeï¼‰ï¼Œä½¿ç”¨æ–¹é˜µA[n][n] è¡¨ç¤ºç”±né¡¶ç‚¹æ„æˆçš„å›¾ï¼Œå…¶ä¸­çš„æ¯ä¸ªå•å…ƒè´Ÿè´£æè¿°é¡¶ç‚¹ä¹‹é—´å¯èƒ½å­˜åœ¨çš„é‚»æ¥ï¼ˆAdjacentï¼‰å…³ç³»</p><p>å¯¹äºæ— æƒå›¾ï¼Œå­˜åœ¨å’Œä¸å­˜åœ¨ä½¿ç”¨0-1æ¥è¡¨ç¤º</p><p>å¯¹äºå¸¦æƒç½‘ç»œï¼Œæ­¤æ—¶å¯ä»¥å°†çŸ©é˜µä¸­å„å•å…ƒä»boolè½¬æ¢ä¸ºintæˆ–è€…floatç±»å‹ï¼Œå¯¹äºä¸å­˜åœ¨çš„è¾¹ä½¿ç”¨0æˆ–è€…âˆæ¥ä»£æ›¿</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jsy7rq50j213i0oeq57.jpg" alt="image-20220423175220132" /></p><p><strong>ä»£ç å®ç°è¿‡ç¨‹ç•¥è¿‡</strong></p><h3 id="131-æ—¶é—´æ€§èƒ½"><a class="markdownIt-Anchor" href="#131-æ—¶é—´æ€§èƒ½"></a> 1.3.1 æ—¶é—´æ€§èƒ½</h3><p>å„é¡¶ç‚¹ç¼–å·å¯ä»¥ç›´æ¥è½¬æ¢ä¸ºå…¶Adjacent matrixä¸­å¯¹åº”çš„Rankï¼Œä»è€Œä½¿å¾—ADTä¸­æ‰€æœ‰çš„é™æ€æ“ä½œæ¥å£çš„æ—¶é—´åªéœ€è¦Oï¼ˆ1ï¼‰æ—¶é—´</p><p>å¦å¤–è¾¹çš„é™æ€å’ŒåŠ¨æ€æ“ä½œåªéœ€è¦Oï¼ˆ1ï¼‰çš„æ—¶é—´ï¼Œä»£ä»·æ˜¯Adjacent matrixçš„ç©ºé—´å†—ä½™</p><p>ä½†æ˜¯è¿™ç§æ–¹æ³•å¹¶éå®Œç¾æ— ç¼ºï¼Œä¸è¶³ç‚¹åœ¨äºé¡¶ç‚¹çš„åŠ¨æ€æ“ä½œæ¥å£ååˆ†è€—è´¹æ—¶é—´ï¼Œä¸ºæ¥æ’å…¥æ–°çš„é¡¶ç‚¹ï¼ŒV[]ä¸­éœ€è¦æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ŒåŒæ—¶è¾¹é›†å‘é‡E[][]ä¹Ÿéœ€è¦å¢åŠ ä¸€è¡Œï¼Œä¸”æ¯è¡Œéƒ½éœ€è¦æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œé¡¶ç‚¹çš„åˆ é™¤æ“ä½œä¹Ÿæ˜¯ç±»ä¼¼ï¼›åœ¨é€šå¸¸çš„ç®—æ³•ä¸­é¡¶ç‚¹çš„åŠ¨æ€æ“ä½œè¿œå°‘äºå…¶ä»–æ“ä½œï¼Œè€Œä¸”è®¡å…¥å‘é‡æ‰©å®¹çš„ä»£ä»·ï¼Œå•æ¬¡æ“ä½œçš„è€—æ—¶ä¸è¿‡Oï¼ˆnï¼‰</p><h3 id="132-ç©ºé—´æ€§èƒ½"><a class="markdownIt-Anchor" href="#132-ç©ºé—´æ€§èƒ½"></a> 1.3.2 ç©ºé—´æ€§èƒ½</h3><p>å¯¹äºæ— å‘å›¾è€Œè¨€ï¼Œé‚»æ¥çŸ©é˜µå¿…é¡»ä¸ºå¯¹ç§°é˜µï¼Œå…¶ä¸­é™¤è‡ªç¯ä»¥å¤–çš„æ¯æ¡è¾¹éƒ½è¢«é‡å¤å­˜æ”¾æ¥ä¸¤æ¬¡ï¼Œå› æ­¤æœ‰ä¸€åŠçš„å•å…ƒéƒ½æ˜¯å†—ä½™çš„ï¼Œä¹Ÿå°±æ˜¯Oï¼ˆn^2ï¼‰</p><h2 id="14-é‚»æ¥è¡¨adjacent-list"><a class="markdownIt-Anchor" href="#14-é‚»æ¥è¡¨adjacent-list"></a> 1.4 é‚»æ¥è¡¨ï¼ˆadjacent listï¼‰</h2><p>åœ¨ä¸Šè¿°é‚»æ¥çŸ©é˜µï¼ˆAdjacent matrixï¼‰çš„ç©ºé—´è§£é‡Šä¸­å¯ä»¥çœ‹å‡ºå…¶ç©ºé—´çš„ä»å­˜åœ¨æ”¹è¿›çš„ä½™åœ°ï¼Œåœ¨å®é™…åº”ç”¨ä¸­å¤„ç†çš„å›¾æ‰€å«æœ‰çš„è¾¹é€šå¸¸è¿œè¿œå°‘äºOï¼ˆn^2)ï¼Œæ¯”å¦‚åœ¨å¹³é¢å›¾ä¹‹ç±»çš„ç¨€ç–å›¾ï¼ˆsparse graphï¼‰ä¸­ï¼Œè¾¹æ•°æ¸è¿›ä¸è¶…è¿‡Oï¼ˆnï¼‰ï¼Œä»…ä»…ä¸é¡¶ç‚¹æ€»æ•°å¤§è‡´ç›¸å½“</p><p>ä¸ºäº†å®Œå–„è¿™ç§é™æ€ç©ºé—´ç®¡ç†ç­–ç•¥æ‰€å¯¼è‡´çš„é—®é¢˜ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å›¾ç»“æ„çš„å¦å¤–ä¸€ç§è¡¨ç¤ºä¸å®ç°æ–¹å¼ï¼Œå¯ä»¥å°†é‚»æ¥çŸ©é˜µè½¬æ¢ç§°é‚»æ¥è¡¨çš„æ–¹å¼ï¼Œåˆ†åˆ«è®°å½•æ¯ä¸ªé¡¶ç‚¹çš„å…³è”è¾¹ï¼ˆæˆ–è€…ç­‰ä»·çš„é‚»æ¥é¡¶ç‚¹ï¼‰æ¥æ„æˆé‚»æ¥è¡¨ï¼ˆadjacent listï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jszx2aytj21iu0netbt.jpg" alt="image-20220423175358651" /></p><h3 id="141-æ—¶é—´å¤æ‚åº¦åˆ†æ"><a class="markdownIt-Anchor" href="#141-æ—¶é—´å¤æ‚åº¦åˆ†æ"></a> 1.4.1 æ—¶é—´å¤æ‚åº¦åˆ†æ</h3><p>å¤æ‚åº¦åˆ†æï¼Œadjacent listä¸­çš„åˆ—è¡¨ç­‰äºé¡¶ç‚¹æ€»æ•°Nï¼Œæ¯æ¡è¾¹åœ¨å…¶ä¸­ä»…å­˜æ”¾ä¸€æ¬¡ï¼ˆfor direct graphï¼‰æˆ–è€…ä¸¤æ¬¡ï¼ˆfor undirected graphï¼‰ï¼Œå› æ­¤ç©ºé—´æ€»é‡ä¸ºO(n+e),ä¸å›¾è‡ªèº«çš„è§„æ¨¡ç›¸å½“ï¼Œç›¸æ¯”è¾ƒadjacent matrixæœ‰å¾ˆå¤§çš„æ”¹è¿›</p><p>åœ¨ç©ºé—´æ€§èƒ½çš„æ”¹è¿›ï¼Œç›¸å¯¹åº”çš„æ˜¯æ—¶é—´æ€§èƒ½çš„é™ä½ä¸ºä»£ä»·ï¼Œæ¯”å¦‚åˆ¤æ–­é¡¶ç‚¹vä¸é¡¶ç‚¹uçš„è¾¹æ˜¯å¦å­˜åœ¨ï¼Œéœ€è¦O(n)æ—¶é—´</p><p>ä¸é¡¶ç‚¹ç›¸å…³çš„åŠ¨æ€æ“ä½œï¼Œé¡¶ç‚¹çš„æ’å…¥æ“ä½œå¯ä»¥åœ¨Oï¼ˆ1ï¼‰çš„æ—¶é—´å†…å®Œæˆï¼Œé¡¶ç‚¹çš„åˆ é™¤æ“ä½œéœ€è¦éå†æ‰€æœ‰çš„adjacent listï¼Œéœ€è¦Oï¼ˆeï¼‰æ—¶é—´</p><h3 id="142-ç©ºé—´å¤æ‚åº¦åˆ†æ"><a class="markdownIt-Anchor" href="#142-ç©ºé—´å¤æ‚åº¦åˆ†æ"></a> 1.4.2 ç©ºé—´å¤æ‚åº¦åˆ†æ</h3><p>adjacent liståœ¨è®¿é—®å•æ¡è¾¹çš„æ•ˆç‡å¹¶ä¸ç®—é«˜ï¼Œä½†æ˜¯é€‚åˆç”¨å¾ªç¯çš„é¢æ–¹å¼ï¼Œå¤„ç†åŒä¸€é¡¶ç‚¹çš„æ‰€æœ‰å…³è”è¾¹æ¯”å¦‚ä¸ºäº†æšä¸¾ä»é¡¶ç‚¹vå‡ºå‘çš„æ‰€æœ‰è¾¹ï¼Œä»…éœ€è¦theta(1+outdegreee(v))è€Œä¸æ˜¯theta(n)çš„æ—¶é—´</p><h2 id="15-å›¾graphéå†ç®—æ³•æ¦‚è¿°bfså’Œdfs"><a class="markdownIt-Anchor" href="#15-å›¾graphéå†ç®—æ³•æ¦‚è¿°bfså’Œdfs"></a> 1.5 å›¾ï¼ˆGraphï¼‰éå†ç®—æ³•æ¦‚è¿°â€“BFSå’ŒDFS</h2><p>å›¾ç®—æ³•ä¸­å¤§éƒ¨åˆ†æˆå‘˜çš„ä¸»ä½“æ¡†æ¶éƒ½å½’ç»“äºå›¾çš„éå†ï¼Œä¸æ ‘çš„éå†ç›¸ä¼¼ï¼Œå›¾çš„éå†éœ€è¦è®¿é—®æ‰€æœ‰é¡¶ç‚¹ä¸€æ¬¡ä¸”ä»…æœ‰ä¸€æ¬¡ï¼Œæ­¤å¤–å›¾éå†åŒæ—¶è¿˜éœ€è¦è®¿é—®æ‰€æœ‰çš„è¾¹ä¸€æ¬¡ä¸”ä»…ä¸€æ¬¡</p><p>åŒæ—¶æ— è®ºé‡‡ç”¨ä½•ç§ç­–ç•¥å’Œç®—æ³•ï¼Œå›¾éå†éƒ½å¯ä»¥ç†è§£ä¸º<strong>å°†éçº¿æ€§ç»“è½¬åŒ–ä¸ºåŠçº¿æ€§ç»“æ„çš„è¿‡ç¨‹ï¼Œç»éå†è€Œç¡®å®šçš„è¾¹ç±»å‹ä¸­ï¼Œæœ€é‡è¦çš„ä¸€ç±»å°±æ˜¯æ‰€è°“çš„æ ‘è¾¹ï¼Œå®ƒä»¬ä¸æ‰€æœ‰é¡¶ç‚¹å…±åŒæ„æˆæ¥åŸå›¾çš„ä¸€é¢—æ”¯æ’‘æ ‘ï¼Œç§°ä¸ºéå†æ ‘traversal tree</strong></p><p>å›¾ä¸­é¡¶ç‚¹ä¹‹é—´å¯èƒ½å­˜åœ¨å¤šæ¡é€šè·¯ï¼Œä¸ºæ¥é¿å…å¯¹é¡¶ç‚¹é‡å¤è®¿é—®ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸è¿˜éœ€è¦åŠ¨æ€è®¾ç½®ä¸åŒé¡¶ç‚¹çš„çŠ¶æ€ï¼Œå¹¶éšç€éå†çš„è¿›ç¨‹ä¸æ–­è½¬æ¢çŠ¶æ€ï¼Œç›´è‡³æœ€åçš„â€œè®¿é—®å®Œæ¯•â€ï¼Œå›¾çš„éå†æ›´åŠ å¼ºè°ƒå¯¹å¤„äºç‰¹å®šçŠ¶æ€é¡¶ç‚¹çš„ç”„åˆ«ä¸æŸ¥æ‰¾ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºå›¾æœç´¢ï¼ˆGraph searchï¼‰</p><p>æ·±åº¦ä¼˜å…ˆæœç´¢ã€å¹¿åº¦ä¼˜å…ˆæœç´¢ã€æœ€ä½³ä¼˜å…ˆç­‰åŸºæœ¬è€Œå…¸å‹çš„å›¾æœç´¢ï¼Œéƒ½å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…å®Œæˆï¼Œä¹Ÿå°±ç¡è¿™äº›ç®—æ³•ä»…éœ€è¦Oï¼ˆn+eï¼‰çš„æ—¶é—´æ¥è®¿é—®æ‰€æœ‰çš„é¡¶ç‚¹å’Œè¾¹</p><p>å„ç§å›¾æœç´¢ä¹‹é—´çš„åŒºåˆ«ä½“ç°åœ¨è¾¹åˆ†ç±»ç»“æœçš„ä¸åŒï¼Œä»¥åŠæ‰€å¾—éå†æ ‘çš„ç»“æ„å·®å¼‚ï¼Œå…¶å†³å®šå› ç´ åœ¨äºæœç´¢è¿‡ç¨‹çš„æ¯ä¸€æ­¥è¿­ä»£ï¼Œå°†ä¾ç…§ä½•ç§ç­–ç•¥æ¥é€‰å–ä¸‹ä¸€æ¥å—è®¿é—®çš„é¡¶ç‚¹</p><h3 id="151-å¹¿åº¦ä¼˜å…ˆæœç´¢-breadth-first-search-bfs-è¶Šæ—©è¢«è®¿é—®åˆ°çš„é¡¶ç‚¹å…¶é‚»å±…è¢«ä¼˜å…ˆé€‰ç”¨"><a class="markdownIt-Anchor" href="#151-å¹¿åº¦ä¼˜å…ˆæœç´¢-breadth-first-search-bfs-è¶Šæ—©è¢«è®¿é—®åˆ°çš„é¡¶ç‚¹å…¶é‚»å±…è¢«ä¼˜å…ˆé€‰ç”¨"></a> 1.5.1  å¹¿åº¦ä¼˜å…ˆæœç´¢ breadth-first-search BFS è¶Šæ—©è¢«è®¿é—®åˆ°çš„é¡¶ç‚¹ï¼Œå…¶é‚»å±…è¢«ä¼˜å…ˆé€‰ç”¨</h3><p>æœç´¢çš„è¿‡ç¨‹ï¼šåå¤ä»å‰æ²¿é›†ï¼ˆfrontierï¼‰ä¸­æ‰¾åˆ°æœ€æ—©è¢«è®¿é—®åˆ°é¡¶ç‚¹vï¼Œè‹¥å…¶é‚»å±…å‡å·²è®¿é—®åˆ°ï¼Œåˆ™å°†å…¶é€å‡ºå‰æ²¿é›†ï¼Œå¦åˆ™éšæ„é€‰å‡ºä¸€ä¸ªå°šæœªè®¿é—®åˆ°çš„é‚»å±…ï¼Œå¹¶å°†å…¶åŠ å…¥åˆ°å‰æ²¿é›†ï¼ˆfrontierï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jtddjxr9j212p0u0gps.jpg" alt="image-20220423180654603" /></p><p>ç”±äºæ¯ä¸€æ­¥è¿­ä»£éƒ½æœ‰ä¸€ä¸ªé¡¶ç‚¹è¢«è®¿é—®ï¼Œå› æ­¤æœ€å¤šè¿­ä»£Oï¼ˆnï¼‰ï¼Œå¦ä¸€æ–¹é¢å› ä¸ºä¸ä¼šæ³„æ¼æ¯ä¸ªåˆšè¢«è®¿é—®é¡¶ç‚¹çš„ä»»ä½•é‚»å±…ï¼Œå› æ­¤å¯¹åº”æ— å‘å›¾ï¼ˆundirected graphï¼‰å¿…èƒ½è¦†ç›–sæ‰€å±çš„è¿é€šåˆ†é‡ï¼ˆconnected componentï¼‰ï¼Œå¯¹äºæœ‰å‘å›¾å¿…èƒ½è¦†ç›–ä»¥sä¸ºèµ·ç‚¹çš„å¯è¾¾åˆ†é‡ï¼ˆreachable componentï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// å›¾çš„å¹¿åº¦ä¼˜å…ˆæœç´¢ç®—æ³•</span><br><span class="hljs-keyword">void</span> Graph::bfs(<span class="hljs-type">int</span> s)&#123; <span class="hljs-comment">//assert 0,n</span><br>reset();<br><span class="hljs-type">int</span> clock=<span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> v=s; <span class="hljs-comment">//åˆå§‹åŒ–</span><br><span class="hljs-keyword">do</span><br><span class="hljs-title function_">if</span> <span class="hljs-params">(UNDISCOVERED == status(v)</span>)<span class="hljs-comment">// ä¸€æ—¦é‡åˆ°å°šæœªå‘ç°çš„é¡¶ç‚¹</span><br>BFS(v,clock);<br><span class="hljs-keyword">while</span> (s !=(v=(++v %n))<span class="hljs-comment">// æŒ‰ç…§åºå·æ£€æŸ¥</span><br><br><span class="hljs-keyword">void</span> Graph::BFS(<span class="hljs-type">int</span> v, <span class="hljs-type">int</span>&amp; clock)&#123;<br>Queue Q;<span class="hljs-comment">//è¾…åŠ©é˜Ÿåˆ—</span><br>status(V)=DISCOVERED;<br>Q.enqueue(v);<span class="hljs-comment">//åˆå§‹åŒ–èµ·ç‚¹</span><br><span class="hljs-keyword">while</span>(!Q.empty())&#123;<br><span class="hljs-type">int</span> v=Q.dequeue();<br>dTime(v)=++clock;<span class="hljs-comment">//å–å‡ºé˜Ÿé¦–é¡¶ç‚¹v</span><br><span class="hljs-keyword">for</span>(u=firstNbr(v);-<span class="hljs-number">1</span>&lt;u;u=nextNbr(v,u))<br><span class="hljs-keyword">if</span>(status(u)==UNDISCOVERED)&#123;<br>status(u)=DSICOVERED;<br>Q.enqueue(u);<span class="hljs-comment">//å‘ç°é¡¶ç‚¹</span><br>type(v,u)=TREE;<br>parent(u)=v;<br>&#125;<span class="hljs-keyword">else</span><br>type(v,u)=CROSS;<br>&#125;<br>status(v)=VISITED<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="152-æ·±åº¦ä¼˜å…ˆæœç´¢-depth-first-searchdfs-ä¼˜å…ˆé€‰å–æœ€åä¸€ä¸ªè¢«è®¿é—®åˆ°çš„é¡¶ç‚¹çš„é‚»å±…"><a class="markdownIt-Anchor" href="#152-æ·±åº¦ä¼˜å…ˆæœç´¢-depth-first-searchdfs-ä¼˜å…ˆé€‰å–æœ€åä¸€ä¸ªè¢«è®¿é—®åˆ°çš„é¡¶ç‚¹çš„é‚»å±…"></a> 1.5.2 æ·±åº¦ä¼˜å…ˆæœç´¢ depth-first-searchï¼ŒDFS ä¼˜å…ˆé€‰å–æœ€åä¸€ä¸ªè¢«è®¿é—®åˆ°çš„é¡¶ç‚¹çš„é‚»å±…</h3><p>ä»¥é¡¶ç‚¹sä¸ºåŸºç‚¹çš„DFSæœç´¢ï¼Œé¦–å…ˆè®¿é—®é¡¶ç‚¹sï¼Œå†ä»sæ‰€æœ‰å°šæœªè®¿é—®åˆ°çš„é‚»å±…ä¸­ä»»å–å…¶ä¸€ï¼Œå¹¶ä»¥ä¹‹ä¸ºåŸºç‚¹ï¼Œé€’å½’åœ°æ‰§è¡ŒDFSæœç´¢ï¼Œæ•…å„é¡¶ç‚¹è¢«è®¿é—®åˆ°çš„æ¬¡åºï¼Œç±»ä¼¼ä¸æ ‘çš„å…ˆåºéå†ï¼Œè€Œå„é¡¶ç‚¹è¢«è®¿é—®å®Œæ¯•çš„æ¬¡åºï¼Œåˆ™ç±»ä¼¼äºæ ‘çš„ååºéå†</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jtds3mknj210f0u0n1k.jpg" alt="image-20220423180718094" /></p><h1 id="0x02-äº¤é€šè¿ç­¹å­¦ä¸­çš„å›¾"><a class="markdownIt-Anchor" href="#0x02-äº¤é€šè¿ç­¹å­¦ä¸­çš„å›¾"></a> 0x02 äº¤é€šè¿ç­¹å­¦ä¸­çš„å›¾</h1><h2 id="21-äº¤é€šä¸­å›¾çš„ä¾‹å­"><a class="markdownIt-Anchor" href="#21-äº¤é€šä¸­å›¾çš„ä¾‹å­"></a> 2.1 äº¤é€šä¸­å›¾çš„ä¾‹å­</h2><ul><li>è½¨é“äº¤é€šä¸­çš„å›¾</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jtmqzjf9j205i07374c.jpg" alt="downloadçš„å‰¯æœ¬" /></p><ul><li>18ä¸–çºªå“¥å°¼æ–¯å ¡åŸçš„ï¼Œæ™®é›·æ ¼å°”çš„ä¸¤å²¸å’Œæ²³ä¸­ä¸¤ä¸ªå²›ä¹‹å‰æœ‰ä¸ƒåº§æ¡¥</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jtnh8soij20fi09nq45.jpg" alt="115307km2myngyo36ya3a6" /></p><ul><li>ç»å…¸çš„æ”¶å‘é—®é¢˜</li></ul><h2 id="22-åŸºæœ¬æ¦‚å¿µæ— å‘å›¾g"><a class="markdownIt-Anchor" href="#22-åŸºæœ¬æ¦‚å¿µæ— å‘å›¾g"></a> 2.2 åŸºæœ¬æ¦‚å¿µâ€“æ— å‘å›¾G</h2><p>æ— å‘å›¾ï¼Œè®¾ V æ˜¯ä¸€ä¸ªæœ‰né¡¶ç‚¹çš„éç©ºé›†åˆï¼šV={v1ï¼Œv2ï¼Œv3ï¼Œâ€¦ï¼Œvn}ï¼›Eæ˜¯ä¸€ä¸ªæœ‰mæ¡æ— å‘è¾¹çš„é›†åˆï¼šE={e1ï¼Œe2ï¼Œâ€¦ï¼Œem}ï¼Œåˆ™ç§°Vå’ŒEè¿™ä¸¤ä¸ªé›†åˆç»„åˆä¸€ä¸ªæ— å‘å›¾ï¼Œè®°åšG=ï¼ˆVï¼ŒEï¼‰</p><p>åŸºäºæ— å‘å›¾çš„Gçš„ç»“æ„ç‰¹ç‚¹ï¼Œç»™å‡ºä¸‹åˆ—æœ¯è¯­</p><ul><li>å¹³è¡Œè¾¹ï¼Œå¦‚æœä¸¤æ¡ä¸åŒçš„è¾¹å…·æœ‰ç›¸åŒçš„ç«¯ç‚¹ï¼Œç§°ä¸ºeå’Œeâ€˜æ˜¯Gçš„å¹³è¡Œè¾¹</li><li>ç®€å•å›¾ï¼Œå¦‚æœå›¾Gä¸­æ²¡æœ‰å¹³è¡Œè¾¹åˆ™ä¸ºç®€å•å›¾ï¼ˆï¼ï¼æœ‰ç‚¹ä¸ä¸€æ ·ï¼‰</li><li>å®Œå¤‡å›¾ï¼Œè‹¥å›¾Gä¸­ä»»ä½•ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æ°å¥½æœ‰ä¸€æ¡è¾¹ç›¸å…³è”ï¼Œåˆ™ç§°å›¾Gæ˜¯å®Œå¤‡å›¾</li><li>å­å›¾ï¼ŒG1=ï¼ˆV1ï¼ŒE1ï¼‰å¹¶ä¸”V1å±äºVã€E1å±äºE</li><li>ç”Ÿæˆå­å›¾ï¼ŒG1æ˜¯Gçš„å­å›¾ï¼Œå¹¶ä¸”V1=Vï¼Œåˆ™ç§°G1æ˜¯Gçš„ç”Ÿæˆå­å›¾</li><li>å¯¼å‡ºå­å›¾ï¼Œè‹¥éç©ºE1å±äºEï¼Œåˆ™E1åŠåŒ…å«çš„é¡¶ç‚¹æ—¶Gçš„å¯¼å‡ºå­å›¾</li><li>é“¾ï¼Œæ— å‘å›¾ä¸­ä¸€ä¸ªç”±é¡¶ç‚¹å’Œè¾¹äº¤æ›¿è€Œæˆçš„éç©ºæœ‰é™åºåˆ—ï¼ŒQ=v0e0v1e1v2ï¼Œå¦‚æœèµ·å§‹ç‚¹ç›¸åŒæ˜¯é—­é“¾ï¼Œä¸æƒ³ç­‰ä½å¼€é“¾</li><li>åˆç­‰é“¾ï¼Œè‹¥å¼€é“¾Qä¸­è¯¸é¡¶ç‚¹éƒ½ä¸ç›¸åŒï¼Œåˆ™ç§°Qä¸ºä¸€æ¡åˆç­‰é“¾</li><li>å›è·¯ï¼Œè‹¥ä¸€ä¸ªé—­é“¾é™¤é“¾ç¬¬ä¸€ä¸ªé¡¶ç‚¹å’Œæœ€åä¸€ä¸ªé¡¶ç‚¹ç›¸åŒä¹‹å¤–ï¼Œæ²¡æœ‰å…¶ä»–ç›¸åŒçš„é¡¶ç‚¹å’Œç›¸åŒçš„è¾¹åˆ™ç§°ä¸ºå›è·¯</li><li>è¿é€šå›¾ï¼Œè‹¥å›¾Gä¸­ä»»æ„ä¸¤é¡¶ç‚¹uå’Œvä¹‹é—´å­˜åœ¨ä¸€æ¡é“¾ï¼Œåˆ™ç§°ä¸ºå›¾Gä¸ºè¿é€šå›¾ã€‚ å¦åˆ™è¢«ç§°ä¸ºåˆ†ç¦»å›¾</li><li>å‰²è¾¹ï¼Œè‹¥Gä¸ºè¿é€šå›¾ï¼Œå°†Gä¸­è¾¹eå–èµ°åæ‰€å¾—å›¾ä¸ºåˆ†ç¦»å›¾ï¼Œåˆ™ç§°eä¸ºå›¾Gçš„å‰²è¾¹</li></ul><h2 id="23-åŸºæœ¬æ¦‚å¿µæœ‰å‘å›¾d"><a class="markdownIt-Anchor" href="#23-åŸºæœ¬æ¦‚å¿µæœ‰å‘å›¾d"></a> 2.3 åŸºæœ¬æ¦‚å¿µâ€“æœ‰å‘å›¾D</h2><p>æœ‰å‘å›¾ï¼Œè®¾ V æ˜¯ä¸€ä¸ªæœ‰né¡¶ç‚¹çš„éç©ºé›†åˆï¼šV={v1ï¼Œv2ï¼Œv3ï¼Œâ€¦ï¼Œvn}ï¼›Eæ˜¯ä¸€ä¸ªæœ‰mæ¡æœ‰å‘è¾¹çš„é›†åˆï¼šE={e1ï¼Œe2ï¼Œâ€¦ï¼Œem}ï¼Œåˆ™ç§°Vå’ŒEè¿™ä¸¤ä¸ªé›†åˆç»„åˆä¸€ä¸ªæœ‰å‘å›¾ï¼Œè®°åšD=ï¼ˆVï¼ŒEï¼‰</p><p>ç±»ä¼¼çš„æœ‰å‘å›¾Dä¹Ÿæœ‰æœ¯è¯­</p><ul><li>å¹³è¡Œè¾¹ï¼Œä¸åŒæœ‰å‘è¾¹çš„eä¸eâ€˜çš„èµ·ç‚¹ä¸ç»ˆç‚¹ç›¸åŒ</li><li>å­¤ç«‹ç‚¹ï¼ŒVä¸­ä¸ä¸Eä»»ä¸€æ¡è¾¹å…³è”çš„ç‚¹ç§°ä¸ºDçš„å­¤ç«‹ç‚¹</li><li>ç®€å•å›¾ï¼Œæ— å¹³è¡Œè¾¹çš„ç§°ä¸ºç®€å•å›¾</li><li>å®Œå¤‡å›¾ï¼Œå›¾ä¸­ä»»ä½•ä¸¤ä¸ªé¡¶ç‚¹ï¼Œå­˜åœ¨æœ‰å‘è¾¹ï¼ˆuï¼Œvï¼‰å’Œï¼ˆvï¼Œuï¼‰ï¼Œåˆ™è¯¥æœ‰å‘å›¾Dä¸ºå®Œå¤‡å›¾</li><li>åŸºæœ¬å›¾ï¼Œå°†æœ‰å‘å›¾Dçš„æ¯æ¡è¾¹é™¤å®šå‘å°±å¾—åˆ°ä¸€ä¸ªç›¸åº”çš„æ— å‘å›¾Gï¼Œåˆ™Gä½Dçš„åŸºæœ¬å›¾</li><li>å­å›¾ï¼ŒåŒä¸Š</li><li>å¯¼å‡ºå­å›¾ï¼ŒåŒä¸Š</li><li>å¯¼å‡ºç”Ÿæˆå­å›¾ï¼ŒåŒä¸Š</li><li>åŒæ„å›¾ï¼Œå¦‚ä¸‹å›¾ï¼Œé¡¶ç‚¹å’Œè¾¹æ˜¯ç›¸ç­‰çš„ï¼Œç”±äºåŒæ„å›¾è¢«è®¤ä¸ºæ˜¯ç›¸åŒçš„ï¼Œè¿™å°±ç»™æˆ‘ä»¬åœ¨ç½‘ç»œè§„åˆ’ä¸­å»ºç«‹ç½‘ç»œæ¨¡å‹å¸¦æ¥è®¸å¤šæ–¹ä¾¿ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å‡ ä½•å›¾æ¥æ„å»ºç½‘ç»œæ¨¡å‹æ—¶ï¼Œç‚¹çš„ä½ç½®å¯ä»¥ä»»æ„å¸ƒç½®ã€‚è¾¹çš„é•¿çŸ­æ›²ç›´å¯ä»¥ä»»æ„ï¼Œå› æ­¤éœ€è¦å°½é‡è®¾è®¡è¿™ç§ååº”é—®é¢˜æ¸…æ™°ã€ç®€ç»ƒçš„å‡ ä½•å›¾</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jvjxhytcj20t40cgt9m.jpg" alt="image-20220423192222370" /></p><ul><li>é“¾ï¼Œè‹¥Qæ˜¯æœ‰å‘å›¾Dçš„åŸºæœ¬å›¾Gä¸­çš„ä¸€æ¡é“¾ï¼Œåˆ™Qä¸ºDçš„ä¸€æ¡é“¾</li><li>åˆç­‰é“¾ï¼Œè‹¥Qæ˜¯æœ‰å‘å›¾Dçš„åŸºæœ¬å›¾Gçš„ä¸€æ¡åˆç­‰é“¾ï¼Œåˆ™Qè¢«ç§°ä¸ºDçš„ä¸€æ¡åˆç­‰é“¾</li><li>è·¯ï¼Œè‹¥Qæ˜¯æœ‰å‘å›¾Dçš„åŸºæœ¬å›¾Gä¸­ä¸€æ¡é“¾</li><li>è·¯å¾„</li><li>å›è·¯ï¼Œç¬¬ä¸€ä¸ªé¡¶ç‚¹å’Œæœ€åä¸€ä¸ªé¡¶ç‚¹ç›¸åŒ</li></ul><h2 id="24-åŸºæœ¬æ¦‚å¿µçŸ©é˜µè¡¨ç¤º"><a class="markdownIt-Anchor" href="#24-åŸºæœ¬æ¦‚å¿µçŸ©é˜µè¡¨ç¤º"></a> 2.4 åŸºæœ¬æ¦‚å¿µâ€“çŸ©é˜µè¡¨ç¤º</h2><p>å…³è”çŸ©é˜µï¼Œè¡Œè¡¨ç¤ºé¡¶ç‚¹ï¼Œåˆ—è¡¨ç¤ºè¾¹ï¼Œä½¿ç”¨1è¡¨ç¤ºæ˜¯å¦é“¾æ¥</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jvpknwsyj20lm0bomxi.jpg" alt="image-20220423192745492" /></p><p>é‚»æ¥çŸ©é˜µï¼Œè¡Œè¡¨ç¤ºé¡¶ç‚¹ï¼Œåˆ—è¡¨ç¤ºé¡¶ç‚¹ï¼Œä½¿ç”¨æ•°ç›®è¡¨ç¤ºä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´çš„é“¾æ¥æ•°é‡</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jvplgdvuj20je0b2weq.jpg" alt="image-20220423192751635" /></p><h2 id="25-æ ‘"><a class="markdownIt-Anchor" href="#25-æ ‘"></a> 2.5 æ ‘</h2><p>ä¸åšèµ˜è¿°</p><h1 id="0x03-æ•°æ®ç»“æ„ä¸­å›¾çš„åº”ç”¨"><a class="markdownIt-Anchor" href="#0x03-æ•°æ®ç»“æ„ä¸­å›¾çš„åº”ç”¨"></a> 0x03 æ•°æ®ç»“æ„ä¸­å›¾çš„åº”ç”¨</h1><h2 id="31-æ‹“æ‰‘æ’åºtopological-sorting"><a class="markdownIt-Anchor" href="#31-æ‹“æ‰‘æ’åºtopological-sorting"></a> 3.1 æ‹“æ‰‘æ’åºï¼ˆtopological sortingï¼‰</h2></aside><p>ä»¥æ•™æçš„ç¼–å†™å®é™…é—®é¢˜ä¸ºä¾‹å­ï¼Œä½œè€…å¯ä»¥å€ŸåŠ©æœ‰å‘å›¾çš„ç»“æ„æ•´ç†å‡ºç›¸å…³çŸ¥è¯†ç‚¹ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå› å‘é‡æ˜¯æ•£åˆ—è¡¨å’ŒæŸ¥æ‰¾è¡¨çš„åŸºç¡€çŸ¥è¯†ç‚¹ï¼Œç­‰ç­‰å¾—åˆ°ä¸€ä»½æœ‰å‘å›¾ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šå¦‚ä½•å°†è¿™ä¸ªæœ‰å‘å›¾ï¼ˆundirected graphï¼‰æ¥å¾—åˆ°å…·æœ‰å‰ç«¯çš„é¡ºåºçš„é¢æ‹“æ‰‘æ’åºï¼ˆtopological sortingï¼‰</p><p>ç›¸å®¹ï¼šæ¯ä¸€ä¸ªé¡¶ç‚¹éƒ½ä¸ä¼šé€šè¿‡è¾¹ï¼ŒæŒ‡å‘å…¶åœ¨æ­¤åºåˆ—ä¸­çš„å‰é©±é¡¶ç‚¹ï¼Œè¿™æ ·çš„ä¸€ä¸ªçº¿æ€§åºåˆ—ï¼Œç§°ä½œåŸå›¾çš„æ‹“æ‰‘åºåˆ—</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jxi9uds7j21g00jgmz9.jpg" alt="image-20220423203001712" /></p><p>é’ˆå¯¹æœ‰å‘æ— ç¯å›¾ï¼ˆdirected noloop graphï¼‰ï¼Œé—®é¢˜åœ¨äºtopological sortingæ˜¯å¦å¿…ç„¶å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨æ˜¯å¦å”¯ä¸€ï¼Ÿ</p><p>åŒç†ï¼Œæœ‰é™ååºé›†ä¸­ä¹Ÿå¿…ç„¶å­˜åœ¨æå°å…ƒç´ ï¼ˆåŒæ ·ï¼Œæœªå¿…å”¯ä¸€ï¼‰ã€‚è¯¥å…ƒç´ ä½œä¸ºé¡¶ç‚¹ï¼Œå‡ºåº¦å¿…ç„¶ ä¸ºé›¶ï‚¾ï‚¾æ¯”å¦‚å›¾6.10(b)ä¸­çš„é¡¶ç‚¹Då’ŒFã€‚è€Œåœ¨å¯¹æœ‰å‘æ— ç¯å›¾çš„DFSæœç´¢ä¸­ï¼Œé¦–å…ˆå› è®¿é—®å®Œæˆè€Œè½¬ æ¢è‡³VISITEDçŠ¶æ€çš„é¡¶ç‚¹mï¼Œä¹Ÿå¿…ç„¶å…·æœ‰è¿™ä¸€æ€§è´¨ï¼›åä¹‹äº¦ç„¶ã€‚</p><p>166</p><p>è¿›ä¸€æ­¥åœ°ï¼Œæ ¹æ®DFSæœç´¢çš„ç‰¹æ€§ï¼Œé¡¶ç‚¹mï¼ˆåŠå…¶å…³è”è¾¹ï¼‰å¯¹æ­¤åçš„æœç´¢è¿‡ç¨‹å°†ä¸èµ·ä»»ä½•ä½œç”¨ã€‚ äºæ˜¯ï¼Œä¸‹ä¸€è½¬æ¢è‡³VISITEDçŠ¶æ€çš„é¡¶ç‚¹å¯ç­‰æ•ˆåœ°ç†è§£ä¸ºæ˜¯ï¼Œä»å›¾ä¸­å‰”é™¤é¡¶ç‚¹mï¼ˆåŠå…¶å…³è”è¾¹ï¼‰ä¹‹ åçš„å‡ºåº¦ä¸ºé›¶è€…ï‚¾ï‚¾åœ¨æ‹“æ‰‘æ’åºä¸­ï¼Œè¯¥é¡¶ç‚¹åº”ä¸ºé¡¶ç‚¹mçš„å‰é©±ã€‚ç”±æ­¤å¯è§ï¼ŒDFSæœç´¢è¿‡ç¨‹ä¸­å„é¡¶ ç‚¹è¢«æ ‡è®°ä¸ºVISITEDçš„æ¬¡åºï¼Œæ°å¥½ï¼ˆæŒ‰é€†åºï¼‰ç»™å‡ºäº†åŸå›¾çš„ä¸€ä¸ªæ‹“æ‰‘æ’åºã€‚</p><p>æ­¤å¤–ï¼ŒDFSæœç´¢å–„äºæ£€æµ‹ç¯è·¯çš„ç‰¹æ€§ï¼Œæ°å¥½å¯ä»¥ç”¨æ¥åˆ¤åˆ«è¾“å…¥æ˜¯å¦ä¸ºæœ‰å‘æ— ç¯å›¾ã€‚å…·ä½“åœ°ï¼Œ æœç´¢è¿‡ç¨‹ä¸­ä¸€æ—¦å‘ç°åå‘è¾¹ï¼Œå³å¯ç»ˆæ­¢ç®—æ³•å¹¶æŠ¥å‘Šâ€œå› éDAGè€Œæ— æ³•æ‹“æ‰‘æ’åºâ€ã€‚</p><h2 id="32-åŒè¿é€šåŸŸåˆ†è§£"><a class="markdownIt-Anchor" href="#32-åŒè¿é€šåŸŸåˆ†è§£"></a> 3.2 åŒè¿é€šåŸŸåˆ†è§£</h2><p>è€ƒæŸ¥æ— å‘å›¾Gã€‚è‹¥åˆ é™¤é¡¶ç‚¹våGæ‰€åŒ…å«çš„è¿é€šåŸŸå¢å¤šï¼Œåˆ™vç§°ä½œåˆ‡å‰²èŠ‚ç‚¹ï¼ˆcut vertexï¼‰æˆ– å…³èŠ‚ç‚¹ï¼ˆarticulation pointï¼‰ã€‚å¦‚å›¾6.13ä¸­çš„Cå³æ˜¯ä¸€ä¸ªå…³èŠ‚ç‚¹ï‚¾ï‚¾å®ƒçš„åˆ é™¤å°†å¯¼è‡´è¿é€šåŸŸ å¢åŠ ä¸¤å—ã€‚åä¹‹ï¼Œä¸å«ä»»ä½•å…³èŠ‚ç‚¹çš„å›¾ç§°ä½œåŒè¿é€šå›¾ã€‚ä»»ä¸€æ— å‘å›¾éƒ½å¯è§†ä½œç”±è‹¥å¹²ä¸ªæå¤§çš„åŒè¿ é€šå­å›¾ç»„åˆè€Œæˆï¼Œè¿™æ ·çš„æ¯ä¸€å­å›¾éƒ½ç§°ä½œåŸå›¾çš„ä¸€ä¸ªåŒè¿é€šåŸŸï¼ˆbi-connected componentï¼‰ã€‚ ä¾‹å¦‚å›¾6.14(a)ä¸­çš„æ— å‘å›¾ï¼Œå¯åˆ†è§£ä¸ºå¦‚å›¾(b)æ‰€ç¤ºçš„ä¸‰ä¸ªåŒè¿é€šåŸŸã€‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jxi2rwwdj21e00f6gn5.jpg" alt="image-20220423202944889" /></p><h2 id="33-ä¼˜å…ˆçº§æœç´¢"><a class="markdownIt-Anchor" href="#33-ä¼˜å…ˆçº§æœç´¢"></a> 3.3 ä¼˜å…ˆçº§æœç´¢</h2><p>ä¸Šé¢çš„å›¾æœç´¢åº”ç”¨è™½ç„¶å„æœ‰ç‰¹ç‚¹ï¼Œä½†æ˜¯å…¶åŸºæœ¬æ¡†æ¶ç¼ºåŸºæœ¬ç›¸ä¼¼ï¼Œæ€»ä½“è€Œè¨€éƒ½æ˜¯é€šè¿‡è¿­ä»£é€æ­¥å‘ç°å„é¡¶ç‚¹ï¼Œå°†å…¶çº³å…¥éå†æ ‘ä¸­å¹¶åšç›¸åº”å¤„ç†ï¼ŒåŒæ—¶æ ¹æ®åº”ç”¨é—®é¢˜çš„éœ€æ±‚é€‚å½“ç»™å‡ºè§£ç­”ï¼Œå„ç®—æ³•åœ¨åŠŸèƒ½ä¸Šçš„å·®å¼‚ï¼Œä¸»è¦ä½“ç°åœ¨æ¯ä¸€æ­¥è¿­ä»£ä¸­å¯¹æ–°é¡¶ç‚¹çš„é€‰å–ç­–ç•¥ä¸åŒï¼Œæ¯”å¦‚BFSæœç´¢ä¼šä¼˜å…ˆè€ƒå¯Ÿæ›´æ—©è¢«å‘ç°çš„é¡¶ç‚¹ï¼Œè€ŒDFSä¼šæ›´ä¾§é‡äºæœ€åè¢«å‘ç°çš„é¡¶ç‚¹</p><p>æ€»ç»“ä¸Šè¿°ç­–ç•¥ï¼Œå¯ä»¥çœ‹å‡ºå…¶æœ¬è´¨ä¸Šæ˜¯ç»™æ‰€æœ‰é¡¶ç‚¹èµ‹äºˆä¸åŒçš„ä¼˜å…ˆçº§ï¼Œéšç€ç®—æ³•çš„æ¨è¿›ä¸æ–­è°ƒæ•´ï¼Œè€Œæ¯ä¸€æ­¥è¿­ä»£æ‰€é€‰å–çš„é¡¶ç‚¹éƒ½æ˜¯å½“æ—¶çš„ä¼˜å…ˆçº§æœ€é«˜è€…ï¼ŒæŒ‰ç…§è¿™æ ·çš„ç†è§£ï¼Œå¯ä»¥å°†BFSå’ŒDFSçº³å…¥ç»Ÿä¸€çš„æ¡†æ¶ï¼Œç§°ä¸ºPFSï¼ˆpriority-first searchï¼‰</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¼•å¯¼ä¼˜åŒ–æ–¹å‘çš„æŒ‡æ ‡ï¼Œå¾€å¾€å¯¹åº”äºæŸç§æœ‰é™çš„èµ„æºæˆ–æˆæœ¬ï¼ˆæ¯”å¦‚é€šè®¯å¸¦å®½ã€æœºç¥¨ä»·æ ¼ç­‰ï¼‰å› æ­¤è¿™é‡Œä¸å¦¨çº¦å®šä¼˜å…ˆçº§è¶Šå¤§é¡¶ç‚¹çš„ä¼˜å…ˆçº§è¶Šä½</p><p>é€šè¿‡æœ€å°æ”¯æ’‘æ ‘å’Œæœ€çŸ­è·¯å¾„è¿™ä¸¤ä¸ªç»å…¸çš„å›¾ç®—æ³•æ·±å…¥ä»‹ç»è¿™ä¸ªæ¡†æ¶çš„å…·ä½“åº”ç”¨ï¼Œåœ¨å¤æ‚åº¦çš„åˆ†æä¸­ï¼ŒPFSç”±ä¸¤å±‚å¾ªç¯æ„æˆï¼Œå…¶ä¸­å†…å±‚å¾ªç¯åˆå«å¹¶åˆ—çš„ä¸¤ä¸ªå¾ªç¯ï¼Œé‡‡ç”¨é‚»æ¥è¡¨çš„æ–¹å¼ï¼Œæ€»ä½“çš„å¤æ‚åº¦ä¸ºOï¼ˆn^2)</p><h2 id="34-æœ€å°æ”¯æ’‘æ ‘"><a class="markdownIt-Anchor" href="#34-æœ€å°æ”¯æ’‘æ ‘"></a> 3.4 æœ€å°æ”¯æ’‘æ ‘</h2><p>è¿é€šå›¾Gçš„æŸä¸€æ— ç¯è¿é€šå­æ ‘Tè‹¥è¦†ç›–Gä¸­æ‰€æœ‰çš„é¡¶ç‚¹ï¼Œåˆ™ç§°ä¸ºGçš„ä¸€é¢—æ”¯æ’‘æ ‘æˆ–ç”Ÿæˆæ ‘ï¼ˆspanning treeï¼‰</p><p>å°±ä¿ç•™åŸå›¾ä¸­è¾¹çš„æ•°ç›®è€Œè¨€ï¼Œæ”¯æ’‘æ ‘æ˜¯ç¦æ­¢ç¯è·¯å‰æä¸‹çš„æå¤§å­å›¾ï¼Œä¹Ÿæ˜¯ä¿æŒè¿é€šå‰æä¸‹çš„æœ€å°å­å›¾ï¼Œå…¶å¾€å¾€å¯¹åº”ç³»ç»Ÿä¸­æœ€ç»æµçš„è¿æ¥æ–¹æ¡ˆ</p><h3 id="341-è›®åŠ›ç®—æ³•"><a class="markdownIt-Anchor" href="#341-è›®åŠ›ç®—æ³•"></a> 3.4.1 è›®åŠ›ç®—æ³•</h3><h3 id="342-primç®—æ³•å±äºpfsçš„ç‰¹ä¾‹æ—¶é—´å¤æ‚åº¦ä¸ºon-2"><a class="markdownIt-Anchor" href="#342-primç®—æ³•å±äºpfsçš„ç‰¹ä¾‹æ—¶é—´å¤æ‚åº¦ä¸ºon-2"></a> 3.4.2 primç®—æ³•ï¼ˆå±äºPFSçš„ç‰¹ä¾‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆn^ 2ï¼‰</h3><h2 id="35-æœ€çŸ­è·¯å¾„æ ‘"><a class="markdownIt-Anchor" href="#35-æœ€çŸ­è·¯å¾„æ ‘"></a> 3.5  æœ€çŸ­è·¯å¾„æ ‘</h2><p>å¯ä»¥çœ‹ä¸‹é¢é—®é¢˜æè¿°</p><p>Dijkstraç®—æ³•ï¼ˆæ—¶é—´å¤æ‚åº¦O(n^2)</p><p>![image-20220423203235868](/Users/chenxia/Library/Application Support/typora-user-images/image-20220423203235868.png)</p><h1 id="0x04-äº¤é€šè¿ç­¹å­¦ä¸­çš„å›¾çš„åº”ç”¨"><a class="markdownIt-Anchor" href="#0x04-äº¤é€šè¿ç­¹å­¦ä¸­çš„å›¾çš„åº”ç”¨"></a> 0x04 äº¤é€šè¿ç­¹å­¦ä¸­çš„å›¾çš„åº”ç”¨</h1><h2 id="41-æœ€çŸ­è·¯å¾„é—®é¢˜"><a class="markdownIt-Anchor" href="#41-æœ€çŸ­è·¯å¾„é—®é¢˜"></a> 4.1 æœ€çŸ­è·¯å¾„é—®é¢˜</h2><p>åœ¨ç”Ÿäº§å®è·µã€è¿è¾“ç®¡ç†å’Œå·¥ç¨‹æ—¶é—´çš„å¾ˆå¤šæ´»åŠ¨ä¸­éƒ½éœ€è¦é¢ä¸´å¯»æ‰¾â€œå›¾çš„æœ€çŸ­è·¯å¾„â€ï¼Œè¿™æ˜¯ç½‘ç»œè§„åˆ’ä¸­çš„ä¸€ä¸ªåŸºæœ¬é—®é¢˜</p><p>å‡è®¾å¯¹äºæœ‰å‘å›¾D=ï¼ˆVï¼ŒEï¼‰ï¼Œè®¾å›¾Dçš„æ¯æ¡è¾¹(u,v)éƒ½å’Œä¸€ä¸ªå®æ•°æƒé‡Wï¼ˆeï¼‰=Wï¼ˆuï¼Œvï¼‰å¯¹åº”ï¼Œåˆ™ç§°ä¸ºèµ‹æƒå›¾ã€‚è¿™é‡Œæ‰€è¯´çš„æƒæ˜¯ä¸è¾¹æœ‰å…³çš„æ•°é‡æŒ‡æ ‡ï¼Œå¯ä»¥æ ¹æ®é—®é¢˜çš„éœ€è¦ä¸åŒçš„å«ä¹‰ï¼Œæ¯”å¦‚è·ç¦»ã€æ—¶é—´å’Œè´¹ç”¨ç­‰</p><p>Wï¼ˆPï¼‰=\Sigma W(e)</p><p>å¸¸è§çš„è§£å†³æ–¹æ³•</p><h3 id="411-dijkstraç®—æ³•ç•¥"><a class="markdownIt-Anchor" href="#411-dijkstraç®—æ³•ç•¥"></a> 4.1.1 Dijkstraç®—æ³•(ç•¥)</h3><h3 id="412-bellman-fordç®—æ³•ç•¥"><a class="markdownIt-Anchor" href="#412-bellman-fordç®—æ³•ç•¥"></a> 4.1.2 Bellman-Fordç®—æ³•ï¼ˆç•¥</h3><h2 id="42-æœ€é•¿è·¯å¾„é—®é¢˜"><a class="markdownIt-Anchor" href="#42-æœ€é•¿è·¯å¾„é—®é¢˜"></a> 4.2 æœ€é•¿è·¯å¾„é—®é¢˜</h2><h2 id="43-ç¬¬kçŸ­è·¯å¾„é—®é¢˜"><a class="markdownIt-Anchor" href="#43-ç¬¬kçŸ­è·¯å¾„é—®é¢˜"></a> 4.3 ç¬¬kçŸ­è·¯å¾„é—®é¢˜</h2><p>åœ¨æœ€çŸ­è·¯å¾„çš„åŸºç¡€ä¸Šï¼Œè€ƒè™‘ç¬¬kè·¯å¾„æ„Ÿå…´è¶£</p><h2 id="44-æœ€å°ç”Ÿæˆæ ‘"><a class="markdownIt-Anchor" href="#44-æœ€å°ç”Ÿæˆæ ‘"></a> 4.4 æœ€å°ç”Ÿæˆæ ‘</h2><p>ç»™å®šè¿é€šèµ‹æƒæ— å‘å›¾G=ï¼ˆVï¼ŒEï¼‰ï¼Œè‹¥Tä¸ºGçš„ç”Ÿæˆæ ‘ï¼ŒTä¸­è¾¹eçš„æƒ</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>W</mi><mo>(</mo><mi>T</mi><mo>)</mo><mo>=</mo><mi mathvariant="normal">Î£</mi><mi>W</mi><mo>(</mo><mi>e</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">W(T)=\Sigma W(e)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">Î£</span><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="mopen">(</span><span class="mord mathit">e</span><span class="mclose">)</span></span></span></span></p><p>å…¶ä¸­æœ€å°çš„ç§°ä¸ºæœ€å°ç”Ÿæˆæ ‘ï¼Œä¸€äº›å¸¸è§çš„ç®—æ³•</p><h3 id="441-primç®—æ³•ç•¥"><a class="markdownIt-Anchor" href="#441-primç®—æ³•ç•¥"></a> 4.4.1 Primç®—æ³•ï¼ˆç•¥ï¼‰</h3><h3 id="442-kruskal-ç®—æ³•ç•¥"><a class="markdownIt-Anchor" href="#442-kruskal-ç®—æ³•ç•¥"></a> 4.4.2 Kruskal ç®—æ³•ï¼ˆç•¥ï¼‰</h3><h2 id="45-ä¸­å›½é‚®è·¯é—®é¢˜"><a class="markdownIt-Anchor" href="#45-ä¸­å›½é‚®è·¯é—®é¢˜"></a> 4.5 ä¸­å›½é‚®è·¯é—®é¢˜</h2><p>![image-20220423194702621](/Users/chenxia/Library/Application Support/typora-user-images/image-20220423194702621.png)</p><h2 id="46-è¿è¾“ç½‘ç»œ"><a class="markdownIt-Anchor" href="#46-è¿è¾“ç½‘ç»œ"></a> 4.6 è¿è¾“ç½‘ç»œ</h2><p>è®¸å¤šç³»ç»Ÿä¸­å­˜åœ¨æµçš„é—®é¢˜ï¼Œè¿è¾“ç³»ç»Ÿæœ‰ç‰©èµ„æµã€å…¬äº¤ç³»ç»Ÿä¸­æœ‰è½¦è¾†æµã€ä¾›æ°´ç³»ç»Ÿä¸­å­˜åœ¨æ°´æµï¼Œå› æ­¤å¯ä»¥ç”¨å›¾æ¥æè¿°ç½‘ç»œï¼Œå› æ­¤ç»™å®šä¸€äº›æ•°å­¦å®šä¹‰</p><ul><li>è¿è¾“ç½‘ç»œ</li></ul><p>![image-20220423195949264](/Users/chenxia/Library/Application Support/typora-user-images/image-20220423195949264.png)</p><ul><li>ç½‘ç»œæµ</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jwn57t2cj21e60bi774.jpg" alt="image-20220423200004526" /></p><ul><li>å‰²</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jwnno184j21dg0h0wh0.jpg" alt="image-20220423200030814" /></p><ul><li>æœ€å°å‰²</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jwo3kkpnj21cs09uaby.jpg" alt="image-20220423200100250" /></p><ul><li>æœ€å¤§æµ</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1jwnwkffcj217w05y3zh.jpg" alt="image-20220423200043006" /></p><h2 id="47-æœ€å¤§æµ46"><a class="markdownIt-Anchor" href="#47-æœ€å¤§æµ46"></a> 4.7 æœ€å¤§æµï¼ˆ4.6ï¼‰</h2><h2 id="48-æœ€å°ä»£ä»·æµé—®é¢˜46"><a class="markdownIt-Anchor" href="#48-æœ€å°ä»£ä»·æµé—®é¢˜46"></a> 4.8 æœ€å°ä»£ä»·æµé—®é¢˜ï¼ˆ4.6ï¼‰</h2>]]></content>
    
    
    <categories>
      
      <category>DataStructure</category>
      
    </categories>
    
    
    <tags>
      
      <tag>TsinghuaBook</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°æ®ç»“æ„ä¸ç®—æ³•01-å‘é‡ï½œåˆ—è¡¨ï½œæ ˆä¸é˜Ÿåˆ—ï½œæ ‘</title>
    <link href="/posts/d1d898bf.html"/>
    <url>/posts/d1d898bf.html</url>
    
    <content type="html"><![CDATA[<p>è¿™é‡Œä¸»è¦å€Ÿé‰´Tsinghuaçš„2020fall&lt;æ•°æ®ç»“æ„ä¸ç®—æ³•&gt;è¿™æœ¬ä¹¦ï¼ŒåŒ…å«å¯¹äºä¸€äº›åŸºæœ¬æ•°æ®ç»“æ„çš„æ¢ç´¢ï¼Œå…ˆä»å®šä¹‰æ¢³ç†ï¼Œåœ¨æ•´ç†é¢˜ç›®ï¼Œä¹‹åæ˜¯å®é™…è®­ç»ƒã€‚ç»“åˆä¹‹å‰åœ¨ç¨‹åºè®¾è®¡æˆ–åµŒå…¥å¼ä¸­å¯¹äºæ•°æ®åœ¨å®é™…å­˜å‚¨çš„ä¾‹å­æ¥å­¦ä¹ å¯èƒ½ä¼šæ›´å¥½ã€‚ä»ä¸­ä¹Ÿèƒ½ä½“æ‚Ÿåˆ°ç®—æ³•ä¸€äº›å«ä¹‰</p><p>æœ¬æ¬¡ä¸»è¦å¯¹ç»ªè®ºã€çº¿æ€§ç»“æ„çš„æ•°ç»„ï¼ˆArrayï¼‰ä¸ºåŸºç¡€çš„å‘é‡ï¼ˆVectorï¼‰ã€ä»¥é“¾è¡¨ï¼ˆLinkï¼‰ä¸ºåŸºç¡€çš„åˆ—è¡¨ï¼ˆListï¼‰ã€æ ˆï¼ˆStackï¼‰ä¸é˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼›åŠçº¿æ€§ç»“æ„çš„æ•°ï¼ˆTreeï¼‰åšå®šä¹‰çš„è®°å½•å’Œæ¢³ç†ã€‚</p><span id="more"></span><h1 id="chapter01-ç»ªè®º"><a class="markdownIt-Anchor" href="#chapter01-ç»ªè®º"></a> Chapter01 ç»ªè®º</h1><h2 id="11-çè¯´"><a class="markdownIt-Anchor" href="#11-çè¯´"></a> 1.1 çè¯´</h2><p>è®¡ç®—æœºæ˜¯äººç±»ä»äº‹è®¡ç®—çš„å·¥å…·ï¼Œä¹Ÿæ˜¯æŠ½è±¡è®¡ç®—æ¨¡å‹çš„å…·ä½“ç‰©åŒ–ï¼ŒåŸºäºå›¾çµæ¨¡å‹çš„ç°ä»£è®¡ç®—æœºï¼Œå³æ˜¯äººç±»ç°ä»£æ–‡æ˜çš„æ ‡å¿—ä¸åŸºç¡€ï¼Œæ›´æ˜¯äººè„‘æ€ç»´çš„æ‹“å±•ä¸å»¶ä¼¸ã€‚å°½ç®¡è®¡ç®—æœºçš„æ€§èƒ½æ—¥ç›Šæé«˜ï¼Œä½†æ˜¯è¿™ç§èƒ½åŠ›åœ¨è§£å†³å®é™…åº”ç”¨é—®é¢˜èƒ½å¤ŸçœŸæ­£å¾—åˆ°å‘æŒ¥ï¼Œå†³å®šæ€§çš„å› ç´ åœ¨äºäººç±»å¦‚ä½•æ·±å…¥æ€è€ƒä¸åˆ†æè·å¾—å¯¹é—®é¢˜æœ¬è´¨çš„é€å½»ç†è§£ï¼Œ</p><ul><li>éœ€è¦æŒ‰ç…§é•¿æœŸç§¯æ·€çš„æ¡†æ¶å’Œæ¨¡å¼æ¥è®¾è®¡å‡ºåˆä¹é—®é¢˜å†…åœ¨è§„å¾‹çš„ç®—æ³•ï¼Œ</li><li>é€‰ç”¨ã€æ”¹è¿›æˆ–è€…å®šåˆ¶è¶³ä»¥æ”¯æ’‘ç®—æ³•é«˜æ•ˆå®ç°çš„æ•°æ®ç»“æ„ï¼Œ</li><li>å¹¶åœ¨çœŸå®çš„åº”ç”¨ç¯å¢ƒä¸­å……åˆ†æµ‹è¯•ã€è°ƒè¯•å’Œæ”¹è¿›</li></ul><p>é‚£ä¹ˆä»€ä¹ˆæ˜¯ç®—æ³•ï¼Ÿ</p><ul><li>åŸƒåŠäººçš„ç»³ç´¢æ˜¯ç®—æ³•</li><li>å°ºè§„ä½œå›¾æ˜¯ç®—æ³•</li><li>å†’æ³¡æ’åºbubble sortä¹Ÿæ˜¯ç®—æ³•</li></ul><p>å®è§‚çš„å®šä¹‰æ˜¯<strong>åŸºäºç‰¹å®šçš„è®¡ç®—æ¨¡å‹ï¼Œåœ¨è§£å†³æŸä¸€ä¿¡æ¯å¤„ç†é—®é¢˜è€Œè®¾è®¡çš„ä¸€ä¸ªæŒ‡ä»¤åºåˆ—ï¼Œæœ¬ä¹¦æ‰€è¯´çš„ç®—æ³•è¿˜éœ€è¦å…·æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹</strong></p><ul><li>æœ‰inputå’Œoutput</li><li>å¯æ“ä½œã€ç¡®å®šæ€§ä¸å¯è¡Œæ€§</li><li>æœ‰ç©·æ€§å’Œæ­£ç¡®æ€§ï¼Œfiniteness and correctness</li><li>é€€åŒ–ä¸é²æ£’æ€§ï¼Œdegeneracy and robustness</li><li>é‡ç”¨æ€§ï¼Œreuse</li></ul><p>å¦‚ä½•è¯„ä»·ä¸€ä¸ªç®—æ³•å‘¢ï¼Ÿ</p><ul><li>å¯è®¡ç®—æ€§computability</li><li>éš¾è§£æ€§ intractabilityï¼Œæœ¬ä¹¦å°†æ›´å¤šçš„å…³æ³¨äºéâ€œä¸å¯è§£å’Œéš¾è§£â€çš„ä¸€èˆ¬æ€§é—®é¢˜ï¼Œå¹¶è®¨è®ºå¦‚ä½•æ•ˆç‡çš„è§£å†³è¿™ä¸€å±‚é¢çš„è®¡ç®—é—®é¢˜ï¼Œå› æ­¤éœ€è¦<strong>ç¡®å®šä¸€ç§å°ºåº¦ï¼Œä»æ—¶é—´å’Œç©ºé—´æ–¹é¢åº¦é‡ç®—æ³•çš„è®¡ç®—æˆæœ¬ï¼Œå¹¶ç”±æ­¤å¯¹ä¸åŒç®—æ³•è¿›è¡Œæ¯”è¾ƒå’Œè¯„åˆ¤ï¼Œå½“ç„¶æœ€é‡è¦çš„æ˜¯åœ¨ç ”ç©¶å’Œå½’çº³ç®—æ³•è®¾è®¡æœˆå®ç°è¿‡ç¨‹ä¸­çš„ä¸€èˆ¬æ€§è§„å¾‹ä¸æŠ€å·§ï¼Œä»¥ç¼–å†™å‡ºæ•ˆç‡æ›´é«˜ã€èƒ½å¤Ÿå¤„ç†æ›´å¤§è§„æ¨¡æ•°æ®çš„ç¨‹åºï¼Œè¿™æ˜¯æœ¬ä¹¦çš„åŸºæœ¬ä¸»é¢˜ä¹Ÿæ˜¯è´¯ç©¿ä¸»é¢˜çš„è„‰ç»œ</strong></li><li>è®¡ç®—æ•ˆç‡</li><li>æ•°æ®ç»“æ„</li></ul><h2 id="12-å¤æ‚åº¦complexityåº¦é‡"><a class="markdownIt-Anchor" href="#12-å¤æ‚åº¦complexityåº¦é‡"></a> 1.2 å¤æ‚åº¦complexityåº¦é‡</h2><aside> ğŸ’¡ æ—¶é—´å¤æ‚åº¦ï¼ˆTime complexityï¼‰ï¼Œè¿è¡Œæ—¶é—´æ˜¯ç”±å¤šç§ç»¼åˆå› ç´ ä½œç”¨è€Œå†³å®šçš„ï¼Œå› ä¸ºå¯¹äºåŒç§ç®—æ³•ï¼Œå¯¹äºä¸åŒçš„è¾“å…¥æ‰€éœ€çš„è¿è¡Œæ—¶é—´å¹¶ä¸ç›¸åŒï¼Œæ¯”å¦‚å¯¹äºæ’åºé—®é¢˜ï¼Œè¾“å…¥åºåˆ—çš„è§„æ¨¡å…¶ä¸­å„å…ƒç´ çš„å…ƒç´ ä»¥åŠæ¬¡åºå‡ä¸ç¡®å®šï¼Œè¿™äº›å› ç´ éƒ½å°†å½±å“åˆ°æ’åºç®—æ³•æœ€ç»ˆçš„è¿è¡Œæ—¶é—´ï¼Œå› æ­¤**ä¸ºæ¥è¿è¡Œæ—¶é—´å»ºç«‹ä¸€ç§å¯è¡Œã€å¯ä¿¡çš„è¯„ä¼°æ ‡å‡†ï¼Œéœ€è¦è€ƒè™‘å…¶ä¸­çš„å…³é”®å› ç´  å› æ­¤å¯ä»¥å°†è¿™ä¸ªé—®é¢˜è½¬åŒ–æˆä¸ºï¼šéšç€è¾“å…¥æ¨¡å¼çš„æ‰©å¤§ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´å°†å¦‚ä½•å¢é•¿ï¼Ÿæ‰§è¡Œæ—¶é—´çš„è¿™ä¸€å˜åŒ–è¶‹åŠ¿å¯è¡¨ç¤ºä¸ºè¾“å…¥æ¨¡å¼çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥è®²èµ·ç§°ä¸ºæ—¶é—´å¤æ‚åº¦time complexityï¼Œå¯¹äºç‰¹å®šç®—æ³•å¤„ç†è§„æ¨¡ä¸ºnçš„é—®é¢˜æ‰€éœ€è¦çš„æ—¶é—´å¯ä»¥ä½œT(n)**</aside><aside> ğŸ’¡ æ¸è¿›å¤æ‚åº¦ï¼ˆasymptotic analysisï¼‰ï¼Œä¸€äº›ç®—æ³•é€‚ç”¨äºå°è§„æ¨¡è¾“å…¥ï¼Œä¸€äº›ç®—æ³•é€‚ç”¨äºå¤§è§„æ¨¡è¾“å…¥ï¼Œåœ¨è¯„ä»·ç®—æ³•è¿è¡Œæ•ˆç‡æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€å¯ä»¥å¿½ç•¥å…¶å¤„ç†å°è§„æ¨¡é—®é¢˜çš„å·®å¼‚ï¼Œè½¬è€Œå…³æ³¨åœ¨å¤„ç†æ›´å¤§è§„æ¨¡é—®é¢˜æ—¶çš„è¡¨ç°ï¼Œåœ¨å…¶ä¸­æˆ‘ä»¬å¯ä»¥å°è¯•ç”¨ä¸€äº›æ–¹æ³•ï¼Œ1. å¤§Oè®°å· 2 å¤§Omegaè®°å· 3 å¤§Thetaè®°å·</aside><ol><li>æ¸è¿›ä¸Šç•Œ ï¼Œä¹Ÿå°±æ˜¯æœ€å·®æƒ…å†µbig-O notationï¼Œå¯¹äºè§„æ¨¡ä¸ºnçš„ä»»æ„è¾“å…¥ï¼Œç®—æ³•çš„è¿è¡Œæ—¶é—´éƒ½ä¸é«˜äºOï¼ˆfï¼ˆnï¼‰ï¼‰</li><li>æ¸è¿›ä¸‹ç•Œï¼Œä¹Ÿå°±æ˜¯æœ€å¥½æƒ…å†µbig-Omega-Notationï¼Œå¯¹äºè§„æ¨¡ä¸ºnçš„ä»»æ„è¾“å…¥ï¼Œç®—æ³•çš„è¿è¡Œæ—¶é—´éƒ½ä¸ä½äºOmegaï¼ˆgï¼ˆnï¼‰ï¼‰</li><li>å¦‚æœæ°å¥½æ¸è¿›ä¸Šç•Œå’Œæ¸è¿›ä¸‹ç•Œä¹‹é—´å…ˆç­‰ï¼ŒO=Omegaï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨big-theta-notationåšè®°å·</li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1bzmerjgvj214q0g6gn4.jpg" alt="image-20220416233840239" /></p><aside> ğŸ’¡ ç©ºé—´å¤æ‚åº¦ï¼ˆspace complexityï¼‰ï¼Œä¸ºäº†æ›´åŠ å®¢è§‚åœ°è¯„ä»·ç®—æ³•æ€§èƒ½çš„ä¼˜åŠ£ï¼Œé™¤éç‰¹åˆ«ç”³æ˜ï¼Œç©ºé—´å¤æ‚åº¦é€šå¸¸å¹¶ä¸åŸå§‹è¾“å…¥æœ¬èº«æ‰€å ç”¨çš„ç©ºé—´ï¼Œå¯¹äºåŒä¸€é—®é¢˜ï¼Œè¿™ä¸€æŒ‡æ ‡å¯¹ä»»ä½•ç®—æ³•éƒ½æ˜¯ç›¸åŒçš„ï¼Œåä¹‹å…¶ä»–çš„å„ç§æ–¹é¢æ‰€å°å­©çš„ç©ºé—´éƒ½åº”è¯¥è®¡ç®—</aside><p>å¦å¤–åœ¨å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½æ˜¯æ›´å¥½ç”šè‡³ä»…ä»…å…³æ³¨äºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œè€Œä¸å¿…å¯¹ç©ºé—´å¤æ‚åº¦å¤šä¸“é—¨çš„è€ƒå¯Ÿï¼Œè¿™ç§ç®€å•è¯„æµ‹æ–¹å¼çš„ä¸€å¥éƒ½æ¥è‡ªäºä¸€ä¸‹äº‹å®ï¼šå°±æ¸è¿›å¤æ‚åº¦çš„æ„ä¹‰è€Œè¨€ï¼Œåœ¨ä»»ä¸€ç®—æ³•çš„ä»»ä½•ä¸€æ¬¡è¿è¡Œè¿‡ç¨‹ä¸­æ‰€æ¶ˆè€—çš„å­˜å‚¨ç©ºé—´éƒ½ä¸ä¼šå¤šä½™æœŸé—´æ‰€æ‰§è¡ŒåŸºæœ¬æ“ä½œçš„ç´¯è®¡æ¬¡æ•°ï¼›ä½†æ˜¯ç©ºé—´å¤æ‚åº¦çš„åˆ†æçš„æ„ä¹‰åœ¨äºå¯¹ç©ºé—´æ•ˆç‡éå¸¸åœ¨ä¹çš„åº”ç”¨åœºåˆä¸­ï¼Œå½“é—®é¢˜çš„è¾“å…¥è§„æ¨¡æä¸ºåºå¤§æ—¶ï¼Œç”±æ—¶é—´å¤æ‚åº¦æ‰€ç¡®ç«‹çš„å¹³å‡¡ä¸Šç•Œå·²ç»éš¾ä»¥ä»¤äººæ»¡æ„</p><h2 id="13-å¤æ‚åº¦åˆ†æ"><a class="markdownIt-Anchor" href="#13-å¤æ‚åº¦åˆ†æ"></a> 1.3 å¤æ‚åº¦åˆ†æ</h2><p>åœ¨1.2 ä¸­ç¡®å®šç®—æ³•å¤æ‚åº¦çš„åº¦é‡æ ‡å‡†ï¼Œåˆ†æç®—æ³•çš„å¤æ‚åº¦ï¼Œå¯ä¸€èˆ¬ä½¿ç”¨å¤§Oç®—æ³•ï¼Œæ¥å°†å„ç§ç®—æ³•çš„å¤æ‚åº¦ä»ä½åˆ°é«˜åˆ’åˆ†ä¸ºä¸åŒçš„çº§åˆ«</p><ul><li>å¸¸æ•°Oï¼ˆ1ï¼‰</li><li>å¯¹æ•°O(log N)</li><li>çº¿æ€§ Oï¼ˆnï¼‰</li><li>å¤šé¡¹å¼ Oï¼ˆpolynomialï¼ˆnï¼‰ï¼‰</li><li>æŒ‡æ•°Oï¼ˆ2^nï¼‰</li></ul><h2 id="14-é€’å½’recursive"><a class="markdownIt-Anchor" href="#14-é€’å½’recursive"></a> 1.4 é€’å½’recursive</h2><p>é€’å½’çš„ä»·å€¼åœ¨äºï¼Œè®¸å¤šåº”ç”¨é—®é¢˜éƒ½å¯ä»¥ç®€ä»‹è€Œå‡†ç¡®åœ°æè¿°ä¸ºé€’å½’å½¢å¼ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ç§åŸºæœ¬è€Œå…¸å‹çš„ç®—æ³•è®¾è®¡æ¨¡å‹ï¼Œè¿™æ¨¡å¼å¯ä»¥å¯¹å®é™…é—®é¢˜ä¸­åå¤å‡ºç°çš„ç»“æ„å’Œå½¢å¼loop variantè¿›è¡Œé«˜åº¦æ¦‚æ‹¬ï¼Œå¹¶ä»æœ¬è´¨å±‚é¢åŠ ä»¥æè¿°ä¸åˆ»ç”»ï¼Œè¿›è€Œå¯¼å‡ºé«˜æ•ˆçš„ç®—æ³•</p><p>æœ¬ç¯‡æ–‡ç« ä»é€’å½’çš„åŸºæœ¬æ¨¡å¼å…¥æ‰‹ï¼Œå¾ªåºæ¸è¿›ä»‹ç»å¦‚ä½•é€‰æ‹©å’Œåº”ç”¨ï¼ˆçº¿æ€§é€’å½’ã€äºŒåˆ†é€’å½’å’Œå¤šåˆ†æ”¯é€’å½’ç­‰ï¼‰ä¸åŒçš„é€’å½’å½¢å¼ï¼Œæ¥å®ç°ï¼ˆéå†ã€åˆ†æ²»ç­‰ï¼‰ç®—æ³•ç­–ç•¥ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨é€’å½’è·Ÿè¸ªå’Œé€’æ¨æ–¹ç¨‹ç­‰æ–¹æ³•åˆ†æé€’å½’ç®—æ³•çš„å¤æ‚åº¦</p><ul><li>çº¿æ€§é€’å½’ï¼Œbase case of recursionï¼Œé¿å…å› æ— é™é€’å½’å¯¼è‡´ç³»ç»Ÿæº¢å‡ºï¼Œå¾€å¾€å¯¹åº”å‡è€Œæ²»ä¹‹decrease and conquerçš„ç®—æ³•ç­–ç•¥ï¼Œ<strong>é€’å½’æ¯æ·±å…¥ä¸€å±‚ï¼Œå¾…æ±‚è§£é—®é¢˜çš„è§„æ¨¡éƒ½ç¼©å‡ä¸€ä¸ªå¸¸ç†Ÿï¼Œç›´è‡³æœ€ç»ˆèœ•åŒ–ä¸ºå¹³å‡¡çš„ç®€å•é—®é¢˜</strong></li><li>é€’å½’åˆ†æï¼Œå¯ä»¥ä½¿ç”¨é€’å½’è·Ÿè¸ªä¸é€’å½’æ–¹ç¨‹ä¸¤ç§ä¸»è¦çš„æ–¹æ³•<ul><li>ç®—æ³•çš„æ¯ä¸€ä¸ªé€’å½’å®ä¾‹éƒ½è¡¨ç¤ºä¸ºä¸€ä¸ªæ–¹æ¡†ï¼Œå…¶ä¸­è‘—åè¯¥å®ä¾‹è°ƒç”¨çš„å‚æ•°</li><li>è‹¥å®ä¾‹Mè°ƒç”¨å®ä¾‹Nï¼Œåˆ™åœ¨Mä¸Nå¯¹åº”çš„æ–¹æ¡†ä¹‹é—´æ·»åŠ ä¸€æ¡æœ‰å‘è”çº¿</li></ul></li><li>é€’å½’æ¨¡å¼</li><li>é€’å½’æ¶ˆé™¤</li><li>äºŒåˆ†é€’å½’ divide-and-conquer</li></ul><h1 id="chapter02-staticå‘é‡vector"><a class="markdownIt-Anchor" href="#chapter02-staticå‘é‡vector"></a> Chapter02 ï¼ˆStaticï¼‰å‘é‡vector</h1><p>æ•°æ®ç»“æ„æ˜¯æ•°æ®é¡¹çš„ç»“æ„åŒ–é›†åˆï¼Œå…¶ç»“æ„è¡¨ç°ä¸ºæ•°æ®é¡¹ä¹‹é—´çš„ç›¸äº’ç³»åˆ—ä¸ä½œç”¨ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºå®šä¹‰ä¸æ•°æ®é¡¹ä¹‹é—´çš„æŸç§é€»è¾‘æ¬¡åºï¼Œæ ¹æ®è¿™ç§é€»è¾‘æ¬¡åºçš„å¤æ‚ç¨‹åº¦ï¼Œå¯ä»¥å°†æ•°æ®ç»“æ„åˆ’åˆ†ä¸ºçº¿æ€§ç»“æ„ã€åŠçº¿æ€§ç»“æ„å’Œéçº¿æ€§ç»“æ„ä¸‰ä¸ªéƒ¨åˆ†</p><p>åœ¨çº¿æ€§ç»“æ„ä¸­ï¼Œæ•°æ®é¡¹æŒ‰ç…§ä¸€ä¸ªçº¿æ€§æ¬¡æ•°æ„æˆä¸€ä¸ªæ•´ä½“ï¼Œå…¶ä¸­æœ€åŸºæœ¬çš„çº¿æ€§ç»“æ„ä¸ºsequenceï¼Œæ ¹æ®æ•°æ®é¡¹çš„é€»è¾‘æ¬¡åºå’Œç‰©ç†å­˜å‚¨åœ°å€çš„ä¸åŒå¯ä»¥åŒºåˆ†ä¸ºå‘é‡vectorå’Œåˆ—è¡¨list</p><p>æœ¬ç« çš„è®²è§£å°†å›´ç»•å‘é‡ç»“æ„çš„é«˜æ•ˆå®ç°è€Œé€æ­¥å±•å¼€ï¼ŒåŒ…æ‹¬ä½œä¸ºæŠ½è±¡æ•°æ®ç±»å‹çš„æ¥å£è§„èŒƒä»¥åŠå¯¹åº”çš„é¢ç®—æ³•ï¼Œå°¤å…¶æ˜¯é«˜æ•ˆç»´æŠ¤åŠ¨æ€å‘é‡çš„æŠ€å·§</p><h2 id="21-ä»æ•°ç»„å’Œå‘é‡"><a class="markdownIt-Anchor" href="#21-ä»æ•°ç»„å’Œå‘é‡"></a> 2.1 ä»æ•°ç»„å’Œå‘é‡</h2><aside> ğŸ’¡ æ•°ç»„ Array</aside><p>è‹¥é›†åˆSç”±nä¸ªå…ƒç´ ç»„æˆï¼Œä¸”å„å…ƒç´ ä¹‹é—´å…·æœ‰ä¸€ä¸ªçº¿æ€§æ¬¡åºï¼Œåˆ™å¯ä»¥å°†ä»–ä»¬å­˜åœ¨åœ¨å¼€å§‹åœ°å€Aã€ç‰©ç†ä½ç½®è¿ç»­çš„ä¸€æ®µå­˜å‚¨ç©ºé—´ï¼Œ</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>=</mo><mo>[</mo><msub><mi>a</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">A=[a_0,a_1,...,a_{n-1}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mrel">=</span><span class="mopen">[</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span></p><p>qå…¶ä¸­iå°äºjï¼ŒA[i]éƒ½æ˜¯A[j]çš„predecessorï¼Œåè€…æ˜¯successorï¼Œç›¸é‚»çš„æˆä¸ºimmediate predecessorï¼›immediate successorï¼Œå…ƒç´ çš„æ‰€æœ‰å‰å»æ„æˆå‰ç¼€prefixï¼Œæ‰€æœ‰çš„åç»§æ„æˆsuffix</p><p>é‡‡ç”¨è¿™æ ·çš„å…ƒç´ è§„èŒƒï¼Œä¸ä»…ä½¿å¾—æ¯ä¸ªå…ƒç´ éƒ½é€šè¿‡ä¸‹æ ‡å”¯ä¸€æŒ‡ä»£ï¼Œè€Œä¸”å¯ä»¥è®©æˆ‘ä»¬ç›´æ¥è®¿é—®ä»»ä½•å…ƒç´ ï¼Œè¿™é‡Œæ‰€è¯´çš„è®¿é—®åŒ…æ‹¬ è¯»å–å’Œä¿®æ”¹ç­‰åŸºæœ¬æ“ä½œï¼Œâ€œç›´æ¥â€çš„æ„æ€æ˜¯è¿™äº›æ“ä½œå¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆ</p><p>åœ¨å…¶ä¸­å…ƒç´ çš„ç‰©ç†åœ°å€ä¸å…¶ä¸‹æ ‡ä¹‹é—´æ»¡è¶³è¿™ç§çº¿æ€§å…³ç³»ï¼Œå› æ­¤è¢«ç§°ä½œLinear Array</p><aside> ğŸ’¡ å‘é‡Vector</aside><p>å¯¹æ•°ç»„arrayåŸºç¡€ä¸Šåšä¸€èˆ¬æ€§çš„æ¨å¹¿ã€‚ä¹Ÿæ˜¯å…·æœ‰çº¿æ€§æ¬¡åºçš„ä¸€ç»„å…ƒç´ æ„æˆçš„é›†åˆ</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>=</mo><mo>[</mo><msub><mi>v</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>v</mi><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">V=[v_0,v_1,...,v_{n-1}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mrel">=</span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span>å…¶ä¸­çš„å…ƒç´ åˆ†åˆ«ç”±Rankç§©ç›¸äº’åŒºåˆ†</p><p>åœ¨è¿™æ ·æŠ½è±¡ä¹‹åï¼Œæˆ‘ä»¬ä¸åœ¨é™å®šåŒä¸€ä¸ªå‘é‡ä¸­çš„å…ƒç´ éƒ½å±äºåŒä¸€åŸºæœ¬ç±»å‹ï¼Œæœ¬èº«å¯ä»¥æ˜¯æ¥è‡ªäºæ›´å…·ä¸€èˆ¬æ€§çš„æŸä¸€ç±»çš„å¯¹è±¡ï¼Œå¦å¤–å„å…ƒç´ ä¹Ÿä¸è§å¾—åŒæ—¶å…·æœ‰æŸä¸€æ•°å€¼å±æ€§ï¼Œæ•…å¹¶ä¸ä¿è¯ä¹‹é—´å¯ä»¥ç›¸äº’æ¯”è¾ƒå¤§å°</p><h2 id="22-interfaceæ¥å£"><a class="markdownIt-Anchor" href="#22-interfaceæ¥å£"></a> 2.2 Interfaceæ¥å£</h2><p>æ“ä½œæ¥å£</p><p>å…·æœ‰ä¸€äº›åŸºæœ¬æ“ä½œï¼Œ</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1bz8egi6ij219c0nugrp.jpg" alt="Untitled" /></p><p>ä»‹ç»å…¶ä¸­æŸäº›æ“ä½œï¼Œæ¯”å¦‚sizeï¼ˆï¼‰ã€getï¼ˆï¼‰ç­‰é™æ€æ“ä½œå¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆ</p><p>insertï¼ˆï¼‰ã€removeï¼ˆï¼‰ç­‰åŠ¨æ€æ“ä½œå¯èƒ½éœ€è¦çº¿æ€§æ—¶é—´</p><h1 id="chapter03-dynamicåˆ—è¡¨list"><a class="markdownIt-Anchor" href="#chapter03-dynamicåˆ—è¡¨list"></a> Chapter03 ï¼ˆDynamicï¼‰åˆ—è¡¨List</h1><p>ä¸Šä¸€ä¸ªç« èŠ‚ä¸­çš„å…ƒç´ è®¿é—®ä¸ºcall-by-rankè®¿é—®</p><p>å¦å¤–ä¸€ç§å½¢è±¡çš„å…ƒç´ è®¿é—®æ—¶é—´å¯ä»¥æ˜¯call-by-link</p><p>ä¸åŒæ•°æ®ç»“æ„å†…éƒ¨çš„å­˜å‚¨ä¸ç»„ç»‡æ–¹å¼å·®å¼‚ï¼Œå…¶æ“ä½œæ¥å£çš„ä½œç”¨æ–¹å¼å’Œæ—¶ç©ºæ€§èƒ½ä¹Ÿä¸ç›¸åŒï¼Œåœ¨è®¾è®¡å’Œé€‰ç”¨æ•°æ®ç»“æ„æ—¶ï¼Œåº”è¯¥ä»å®é™…åº”ç”¨çš„éœ€æ±‚å‡ºå‘ï¼Œå…ˆç¡®å®šåŠŸèƒ½è§„èŒƒåŠæ€§èƒ½æŒ‡æ ‡ï¼Œæ¯”å¦‚å¼•å…¥LIstçš„ç›®çš„å°±æ˜¯ä¸ºäº†å¼¥è¡¥Vectoråœ¨è§£å†³æŸäº›åº”ç”¨é—®é¢˜çš„åŠŸèƒ½å’Œæ€§èƒ½æ–¹é¢çš„ä¸è¶³ï¼Œä¸¤è€…ä¹‹é—´çš„å·®å¼‚ä½“ç°åœ¨å¯¹å¤–çš„æ“ä½œä¸åŒï¼Œæ ¹æºåœ¨äºå†…éƒ¨å­˜å‚¨æ–¹å¼çš„ä¸åŒ</p><h2 id="31-ä»vectoråˆ°list"><a class="markdownIt-Anchor" href="#31-ä»vectoråˆ°list"></a> 3.1 ä»Vectoråˆ°List</h2><p>è¿™ä¹Ÿä»£è¡¨è¿™ä»Staticåˆ°Dynamicä¹‹é—´çš„è½¬å˜</p><p>Static Storage Policy é™æ€å­˜å‚¨ç­–ç•¥</p><p>ä¹‹å‰çš„Vectoré‡‡ç”¨çš„å°±æ˜¯é™æ€å­˜å‚¨çš„ç­–ç•¥ï¼Œâ€œå„å…ƒç´ ç‰©ç†åœ°å€è¿ç»­â€ï¼Œç”±æ­¤å¯¼è‡´çš„sizeï¼ˆï¼‰getï¼ˆï¼‰é™æ€æ“ä½œå‡å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å®Œæˆï¼Œè€Œinsertï¼ˆï¼‰ã€removeï¼ˆï¼‰ç­‰åŠ¨æ€æ“ä½œå´éƒ½å¯èƒ½éœ€è¦çº¿æ€§æ—¶é—´ï¼›å¾—ç›Šäºè¿™ç§ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥Oï¼ˆ1ï¼‰æ—¶é—´å†…ç”±Rankç¡®å®šå‘é‡å…ƒç´ çš„ç‰©ç†åœ°å€ï¼Œä½†æ˜¯åè¿‡æ¥åœ¨insertå’Œremoveçš„ è¿‡ç¨‹ä¸­åˆä¸å¾—ä¸ç§»åŠ¨ Oï¼ˆnï¼‰å…ƒç´ ï¼Œå¯ä»¥çœ‹å‡ºé™æ€å­˜å‚¨ç­–ç•¥çš„é™æ€æ“ä½œçš„æ•ˆç‡è¾¾åˆ°äº†æè‡´ï¼Œä½†æ˜¯åŠ¨æ€æ“ä½œï¼Œå±€éƒ¨çš„ä¿®æ”¹ä¼šå¼•èµ·æ•´ä¸ªèŒƒå›´ç”šè‡³æ•´ä¸ªæ•°æ®ç»“æ„çš„è°ƒæ•´</p><p>Dynamic Storage Policy åŠ¨æ€å­˜å‚¨ç­–ç•¥</p><p>Listä½œä¸ºä»£è¡¨ï¼Œå°½ç®¡è¦æ±‚å…ƒç´ åœ¨é€»è¾‘ä¸Šå…·æœ‰çº¿æ€§æ¬¡åºï¼Œä½†å¯¹ç‰©ç†åœ°å€å¹¶æœªåšå‡ºä»»ä½•é™åˆ¶ï¼Œå…·ä½“çš„æ˜¯åœ¨ç”Ÿå‘½å‘¨æœŸå†…ï¼Œæ­¤ç±»æ•°æ®ç»“æ„å°†éšç€å†…éƒ¨æ•°æ®çš„éœ€è¦ï¼Œç›¸åº”åˆ†é…æˆ–å›æ”¶å±€éƒ¨çš„æ•°æ®ç©ºé—´ï¼Œå¦‚æ­¤å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»å¾—ä»¥å»¶ç»­ï¼Œå´ä¸å¿…ä¸ç‰©ç†æ¬¡åºç›¸å…³ï¼Œä½œä¸ºè¡¥å¿ï¼Œè¿™ç±»ç»“æ„å°†é€šè¿‡æŒ‡é’ˆæˆ–å¼•ç”¨ç­‰æœºåˆ¶æ¥ç¡®å®šå„å…ƒç´ çš„å®é™…ç‰©ç†åœ°å€</p><p>æ¯”å¦‚é“¾è¡¨ï¼ˆLinked listï¼‰å°±æ˜¯ä¸€ç§å…¸å‹çš„åŠ¨æ€å­˜å‚¨ç»“æ„ï¼Œå…¶ä¸­çš„æ•°æ®åˆ†æ•£ä¸ºä¸€ç³»åˆ—ç§°ä¸ºèŠ‚ç‚¹ï¼ˆNodeï¼‰çš„å•ä½ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡æŒ‡é’ˆç›¸äº’ç´¢å¼•å’Œè®¿é—®ï¼Œå¼•å…¥æ–°çš„èŠ‚ç‚¹å°±å¯ä»¥åˆ é™¤åŸæœ‰çš„èŠ‚ç‚¹ï¼Œåœ¨å±€éƒ¨è°ƒæ•´å°‘é‡ç›¸å…³èŠ‚ç‚¹ä¹‹é—´çš„æŒ‡é’ˆ</p><p>ä½†æ˜¯è¿™æ ·å¹¶ä¸æ˜¯æ²¡æœ‰é—®é¢˜</p><p>åœ¨æé«˜åŠ¨æ€åŠ¨æ€æ“ä½œæ•ˆç‡çš„åŒæ—¶ï¼Œå´ä¸ä¸å¾—ä¸èˆå¼ƒåŸé™æ€å­˜å‚¨ç­–ç•¥ä¸­ä½¿ç”¨Rankè®¿é—®çš„æ–¹å¼ï¼Œä»è€Œé€ æˆæ¥é™æ€æ“ä½œæ€§èƒ½çš„ä¸‹é™ï¼Œè™½ç„¶Link listçš„è®¿é—®å¯ä»¥é€šè¿‡Rankæ¥æŸ¥è¯¢ï¼Œä½†æ˜¯å…¶æœ¬è´¨ä¸Šæ˜¯é€šè¿‡å¤šæ¬¡çš„æŒ‡é’ˆé€’å½’å¾—åˆ°çš„ï¼Œå› æ­¤å¹³å‡è®¿é—®æ—¶é—´ä¸ºOï¼ˆnï¼‰</p><h1 id="chapter04-æ›´åŸºæœ¬æ ˆstack-ä¸é˜Ÿåˆ—queue"><a class="markdownIt-Anchor" href="#chapter04-æ›´åŸºæœ¬æ ˆstack-ä¸é˜Ÿåˆ—queue"></a> Chapter04 ï¼ˆæ›´åŸºæœ¬ï¼‰æ ˆStack ä¸é˜Ÿåˆ—Queue</h1><p>æœ¬ç« çš„ç›®æ ‡æ˜¯å®ç°æ›´åŠ åŸºæœ¬ï¼Œä¹Ÿæ›´åŠ å¸¸ç”¨çš„ä¸¤ç±»æ•°æ®ç»“æ„â€”æ ˆå’Œé˜Ÿåˆ—ï¼Œå±äºçº¿æ€§åºåˆ—ç»“æ„ï¼Œå¤å…¶ä¸­å­˜æ”¾çš„æ•°æ®å¯¹è±¡ä¹‹é—´ä¹Ÿå…·æœ‰çº¿æ€§æ¬¡åºï¼Œç›¸å¯¹äºä¸€èˆ¬çš„åºåˆ—ç»“æ„ï¼Œæ ˆä¸é˜Ÿåˆ—çš„æ•°æ®æ“ä½œèŒƒå›´ä»…é™äºé€»è¾‘ä¸Šçš„ç‰¹å®šæŸæ®µï¼Œå¾—ç›Šäºå…¶ç®€æ´è¡Œäºè§„èŒƒæ€§ï¼Œä»–ä»¬å¯ä»¥æ„å»ºæ›´å¤æ‚ã€æ›´é«˜çº§æ•°æ®ç»“æ„çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ç®—æ³•è®¾è®¡çš„åŸºæœ¬æ–¹æ³•</p><p>ç›¸å¯¹äºå‘é‡å’Œåˆ—è¡¨ï¼Œæ ˆäºé˜Ÿåˆ—çš„å¤–éƒ¨æ¥å£æ›´ä¸ºç®€åŒ–å’Œç´§å‡‘ï¼Œå¾—ç›Šäºæ­¤ï¼Œæœ¬ç« çš„é‡ç‚¹å°†ä¸åœ¨æ‹˜æ³¥å¯¹æ•°æ®ç»“æ„å†…éƒ¨å®ç°æœºåˆ¶çš„å±•ç°ï¼Œå¹¶è½¬è€Œæ›´å¤šä»å¤–éƒ¨ç‰¹æ€§å‡ºå‘ï¼Œç»“åˆè‹¥å¹²å…¸å‹çš„å®é™…é—®é¢˜ä»‹ç»æ ˆå’Œé˜Ÿåˆ—çš„å…·ä½“åº”ç”¨</p><p>åœ¨é˜Ÿåˆ—çš„åº”ç”¨æ–¹é¢ï¼Œè´²å¼ å°†ä»‹ç»å¦‚ä½•å®ç°åŸºäºè½®å€¼ç­–ç•¥çš„é€šç”¨å¾ªç¯åˆ†é…å™¨ï¼Œå¹¶ä»¥é“¶è¡Œçª—å£æœåŠ¡ä¸ºä¾‹å®ç°åŸºæœ¬çš„è°ƒåº¦ç®—æ³•</p><h2 id="41-æ ˆstack"><a class="markdownIt-Anchor" href="#41-æ ˆstack"></a> 4.1 æ ˆï¼ˆStackï¼‰</h2><p>æ ˆæ˜¯å­˜æ”¾æ•°æ®å¯¹è±¡çš„ä¸€ç§ç‰¹æ®Šå®¹å™¨ï¼Œå…¶ä¸­æ•°æ®å…ƒç´ æŒ‰ç…§çº¿æ€§é€»è¾‘æ¬¡åºæ’åˆ—ï¼Œå› æ­¤å¯ä»¥å®šä¹‰é¦–ã€æœ«å…ƒç´ ï¼Œä¸è¿‡å°½ç®¡æ ˆç»“æ„ä¹Ÿæ”¯æŒå¯¹è±¡çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œ<strong>å…¶æ“ä½œçš„èŒƒå›´ä»…é™äºæ ˆçš„æŸä¸€ç‰¹å®šç«¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè‹¥çº¦å®šçš„å…ƒç´ åªèƒ½ä»æŸä¸€ç«¯æ’å…¥å…¶ä¸­ï¼Œåˆ™åè¿‡æ¥ä¹Ÿåªèƒ½ä»è¿™ä¸€ç«¯åˆ é™¤å·²æœ‰çš„å…ƒç´ </strong></p><p>ç±»ä¼¼äºè¿™ç§æ“ä½œï¼Œæ ˆä¸­å¯ä»¥æ“ä½œçš„ä¸€æ®µæˆä¸ºæ ˆé¡¶Stack Topï¼Œå¦ä¸€æ®µæ— æ³•ç›´æ¥æ“ä½œçš„ç›²ç«¯ç§°ä¸ºStack Bottomï¼Œæœ€å¸¸ç”¨çš„æ’å…¥å’Œåˆ é™¤æ“ä½œåˆ†åˆ«ç§°ä¸ºå…¥æ ˆPushå’Œå‡ºæ ˆPop</p><h2 id="42-æ ˆä¸é€’å½’"><a class="markdownIt-Anchor" href="#42-æ ˆä¸é€’å½’"></a> 4.2 æ ˆä¸é€’å½’</h2><p>é€’å½’ç®—æ³•æ‰€éœ€çš„ç©ºé—´é‡ä¸»è¦å†³å®šäºæœ€å¤§é€’å½’æ·±åº¦ï¼Œåœ¨è¾¾åˆ°è¿™ä¸ªæ·±åº¦çš„æ—¶åˆ»ï¼ŒåŒæ—¶æ´»è·ƒçš„é€’å½’å®ä¾‹è¾¾åˆ°æœ€å¤šï¼Œ</p><p>å…³äºæ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•å®ç°å‡½æ•°é€’å½’è°ƒç”¨çš„ï¼Ÿå¦‚ä½•è®°å½•è°ƒç”¨ä¸è¢«è°ƒç”¨å‡½æ•°ï¼ˆé€’å½’ï¼‰ä¹‹é—´çš„å…³ç³»ï¼Ÿå¦‚ä½•å®ç°å‡½æ•°ï¼ˆé€’å½’ï¼‰è°ƒç”¨çš„è¿”å›ï¼Ÿåˆæ˜¯å¦‚ä½•ç»´æŠ¤åŒæ—¶æ´»è·ƒçš„æ‰€æœ‰å‡½æ•°ï¼ˆé€’å½’ï¼‰å®ä¾‹çš„å®ç°çš„ï¼Ÿ</p><p><strong>è¿™äº›æ‰€æœ‰é—®é¢˜çš„ç­”æ¡ˆï¼Œéƒ½å¯ä»¥å½’ç»“äºæ ˆStack</strong></p><p>åœ¨windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªè¿è¡Œä¸­çš„binary executableçš„äºŒè¿›åˆ¶ç¨‹åºéƒ½é…æœ‰ä¸€ä¸ªè°ƒç”¨æ ˆï¼ˆcall stackï¼‰æˆ–æ‰§è¡Œæ ˆexecution stackï¼Œå€ŸåŠ©è°ƒç”¨æ ˆå¯ä»¥è·Ÿè¸ªå±äºåŒä¸€ç¨‹åºçš„æ‰€æœ‰å‡½æ•°ï¼Œè®°å½•å®ƒä»¬ä¹‹é—´çš„ç›¸äº’è°ƒç”¨å…³ç³»ï¼Œå¹¶ä¿è¯åœ¨æ¯ä¸€è°ƒç”¨å®ä¾‹æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå¯ä»¥å‡†ç¡®è¿”å›</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1bzbbeztyj213o0lmtcs.jpg" alt="image-20220416232800442" /></p><ul><li>å‡½æ•°è°ƒç”¨</li></ul><p>Call Stackçš„åŸºæœ¬å•ä½æ˜¯å¸§ï¼ˆFrameï¼‰ã€ä»¥åŠå±€éƒ¨å˜é‡ã€è¾“å…¥å‚æ•°ï¼Œå¹¶å°†è¯¥æ ˆPushè°ƒç”¨æ ˆï¼Œå¹¶åœ¨è¯¥å‡½æ•°è¿”å›ä¹‹å‰å‘ç”Ÿæ–°çš„è°ƒç”¨ï¼ŒåŒæ ·å°†ä¸æ–°å‡½æ•°å¯¹åº”çš„ä¸€å¸§Pushæ ˆé¡¶ï¼Œå‡½æ•°ä¸€æ—¦è¿è¡Œå®Œæ¯•ï¼Œå¯¹åº”çš„å¸§éšå³å¼¹å‡ºï¼Œè¿è¡Œæ§åˆ¶æƒå°†è¢«äº¤è¿˜ç»™è¯¥å‡½æ•°çš„ä¸Šå±‚è°ƒç”¨ï¼Œå¹¶æŒ‰ç…§Frameè®°å½•çš„è¿”å›åœ°å€ç¡®å®šäºŒè¿›åˆ¶ç¨‹åºä¸­ç»§ç»­æ‰§è¡Œçš„ä½ç½®ï¼Œå½“ä½äºæ ˆåº•çš„mainï¼ˆï¼‰è¢«å¼¹å‡ºæ„å‘³ç€æ•´ä¸ªç¨‹åºçš„è¿è¡Œç»“æŸï¼Œæ­¤åæ§åˆ¶æƒå°†äº¤è¿˜ç»™OS</p><p><a href="https://www.bilibili.com/video/BV1FY411J7s7?spm_id_from=333.337.search-card.all.click">CPUçœ¼é‡Œçš„ï¼š{å‡½æ•°} | æ ˆå¸§ | å †æ ˆ | æ ˆå˜é‡ | è°ƒç”¨æ ˆ_å“”å“©å“”å“©_bilibili</a></p><ul><li>é€’å½’</li></ul><p>ä½œä¸ºå‡½æ•°è°ƒç”¨çš„ç‰¹æ®Šå½¢å¼ï¼Œé€’å½’ä¹Ÿå¯ä»¥å€ŸåŠ©ä¸Šè¿°è°ƒç”¨æ ˆå¾—ä»¥å®ç°ï¼Œå¯ä»¥çœ‹å‡ºåŒä¸€å‡½æ•°å¯èƒ½åŒæ—¶æ‹¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œå¹¶åœ¨è°ƒç”¨æ ˆä¸­å„è‡ªå æœ‰ä¸€æ ˆï¼Œè¿™äº›æ ˆçš„ç»“æ„å®Œå…¨ç›¸åŒ</p><p>ä¸€äº›æ²¡æœ‰ç”¨çš„å»ºè®®</p><h2 id="43-æ ˆçš„å…¸å‹åº”ç”¨"><a class="markdownIt-Anchor" href="#43-æ ˆçš„å…¸å‹åº”ç”¨"></a> 4.3 æ ˆçš„å…¸å‹åº”ç”¨</h2><p>4.3.1 é€†åºè¾“å‡º</p><p>é€†åºè¾“å‡ºä¸­çš„å…±åŒç‰¹å¾ï¼šé¦–å…ˆï¼Œè™½æœ‰æ˜ç¡®çš„ç®—æ³•ï¼Œä½†è§£ç­”å´ä»¥çº¿æ€§åºåˆ—çš„å½¢å¼ç»™å‡ºï¼Œå…¶æ¬¡æ— è®ºæ˜¯é€’å½’è¿˜æ˜¯è¿­ä»£å®ç°ï¼Œè¯¥åºåˆ—éƒ½æ˜¯æŒ‰ç…§é€†åºè®¡ç®—è¾“å‡ºçš„ï¼Œæœ€åè¾“å…¥å’Œè¾“å‡ºè§„æ¨¡ä¸ç¡®å®šï¼Œäº‹å…ˆéš¾ä»¥ç¡®å®šç››æ”¾è¾“å‡ºæ•°æ®çš„å®¹å™¨å¤§å°ï¼Œå› æ­¤å…·æœ‰ç‰¹æœ‰çš„â€œåè¿›å…ˆå‡ºâ€çš„ç‰¹ç‚¹ï¼Œä»¥åŠåœ¨å®¹é‡æ–¹é¢çš„è‡ªé€‚åº”æ€§ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨Stackæ¥è§£å†³è¿™ç±»é—®é¢˜</p><aside> ğŸ’¡ è¿›åˆ¶è½¬æ¢é—®é¢˜ï¼Œå¯ä»¥å°†åè¿›åˆ¶æ•´æ•°nè½¬æ¢ä¸ºlambdaè¿›åˆ¶çš„è¡¨ç°å½¢å¼</aside><p>æ¯”è¾ƒç®€å•çš„é™¤å‘—</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">convert</span><span class="hljs-params">(S,<span class="hljs-type">int</span>ï¼šn,base)</span></span>&#123;<br><span class="hljs-type">static</span> <span class="hljs-type">char</span> digit[]=&#123;<span class="hljs-string">&#x27;0&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,...,<span class="hljs-string">&#x27;E&#x27;</span>,<span class="hljs-string">&#x27;F&#x27;</span>&#125;;<br><span class="hljs-keyword">if</span> (n&gt;<span class="hljs-number">0</span>)&#123;<br>S.<span class="hljs-built_in">push</span>(digit[n%base]&#125;<br><span class="hljs-built_in">convert</span>(S,n/base,base)<span class="hljs-comment">//åœ¨Cä¸­è¿™é‡Œçš„n/baseä¼šè‡ªåŠ¨è¾“å‡ºä¸ºæ•´æ•°</span><br>&#125;<br>&#125;<br><span class="hljs-comment">//æ–°çš„baseè¿›åˆ¶ä¸‹ç”±é«˜åˆ°ä½çš„å„æ•°ä½ï¼Œè‡ªé¡¶è€Œä¸‹ä¿å­˜ä¸æ ˆSä¸­</span><br></code></pre></td></tr></table></figure><p>4.3.2 é€’å½’åµŒå¥—</p><p>å…·æœ‰è‡ªç›¸ä¼¼æ€§çš„é—®é¢˜å¯ä»¥ç”¨å¤šåµŒå¥—é€’å½’æè¿°ï¼Œä½†å› ä¸ºåˆ†æ”¯ä½ç½®å’ŒåµŒå¥—æ·±åº¦å¹¶ä¸å›ºå®šï¼Œå…¶é€’å½’ç®—æ³•çš„å¤æ‚åº¦ä¸æ˜“æ§åˆ¶ï¼Œæ ˆç»“æ„åŠå…¶æ“ä½œå¤©ç„¶å…·æœ‰é€’å½’åµŒå¥—æ€§ï¼Œå› æ­¤å¯ç”¨äºé«˜æ•ˆè§£å†³è¿™ç±»é—®é¢˜</p><hr /><hr /><p>æ ˆæ··æ´—ï¼ˆStack Permutationï¼‰</p><p>å‡è®¾ä¸‰ä¸ªæ ˆAã€Bã€Sï¼Œå…¶ä¸­BSå¼€å§‹ä¸ºç©ºï¼ŒAä¸­åŒ…å«nå…ƒç´ ï¼ŒSä½œä¸ºä¸­é—´è½¬ç§»æ ˆï¼Œå°†Aä¸­å…ƒç´ è½¬ç§»åˆ°Bä¸­ï¼Œå…¶ä¸­ä»…å…è®¸</p><p>S.Push(A.Pop())</p><p>B.Push(S.Pop())</p><hr /><aside> ğŸ’¡ æ‹¬å·åŒ¹é…é—®é¢˜ï¼Œå¯¹æºç¨‹åºçš„æ£€æŸ¥æ˜¯ä»£ç compileä¸­é‡è¦è€ŒåŸºæœ¬çš„ä¸€ä¸ªæ­¥éª¤ï¼Œè€Œå¯¹è¡¨è¾¾å¼æ‹¬å·åŒ¹é…çš„æ£€æŸ¥åˆæ˜¯è¯­æ³•æ£€æŸ¥ä¸­å¿…éœ€çš„ä¸€ä¸ªç¯èŠ‚ å…¶ä»»åŠ¡æ˜¯ï¼Œå¯¹ä»»ä½•ä¸€ä¸ªç¨‹åºå—ï¼Œéœ€è¦åˆ¤æ–­å…¶ä¸­çš„æ‹¬å·æ˜¯å¦åœ¨åµŒå¥—çš„æ„ä¹‰ä¸‹å®Œå…¨åŒ¹é…ï¼Œ</aside><h2 id="44-è¯•æ¢å›æº¯æ³•probing-and-backtracking"><a class="markdownIt-Anchor" href="#44-è¯•æ¢å›æº¯æ³•probing-and-backtracking"></a> 4.4 è¯•æ¢å›æº¯æ³•ï¼ˆProbing and BackTrackingï¼‰</h2><p>å¤å¸Œè…Šç¥è¯ä¸­åŠäººåŠç‰›çš„æ€ªç‰©å¼¥è¯ºé™¶æ´›æ–¯ï¼ˆMinotaurï¼‰ï¼Œè—èº«äºä¸€ä¸ªç²¾å¿ƒè®¾è®¡ã€ç»“æ„æå…¶ å¤æ‚çš„è¿·å®«ä¹‹ä¸­ã€‚å› æ­¤ï¼Œæ‰¾åˆ°å¹¶æ¶ˆç­å®ƒç»éæ˜“äº‹ï¼Œè€Œæ­¤åå¦‚ä½•é¡ºåˆ©è¿”å›è€Œä¸è‡´å›°æ­»æ›´æ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚ ä¸è¿‡ï¼Œåœ¨å…¬ä¸»é˜¿é‡Œé˜¿å¾·æ¶…ï¼ˆAriadneï¼‰çš„å¸®åŠ©ä¸‹ï¼Œè‹±é›„å¿’ä¿®æ–¯ï¼ˆTheseusï¼‰è¿˜æ˜¯æƒ³å‡ºäº†ä¸ªå¥½åŠæ³•ï¼Œ ä»–æœ€ç»ˆæ¶ˆç­äº†æ€ªç‰©ï¼Œå¹¶å¸¦ç€å…¬ä¸»è½»æ¾åœ°èµ°å‡ºè¿·å®«ã€‚</p><p>å®é™…ä¸Šï¼Œå¿’ä¿®æ–¯æ‰€ä½¿ç”¨çš„æ³•å®ï¼Œåªä¸è¿‡æ˜¯ä¸€å›¢æ™®é€šçš„çº¿ç»³ã€‚ä»–å°†çº¿ç»³çš„ä¸€ç«¯ç³»åœ¨è¿·å®«çš„å…¥å£ å¤„ï¼Œè€Œåœ¨æ­¤åä¸æ–­æ£€æŸ¥å„ä¸ªè§’è½çš„è¿‡ç¨‹ä¸­ï¼Œçº¿å›¢å§‹ç»ˆæ¡åœ¨ä»–çš„æ‰‹ä¸­ã€‚çº¿å›¢æˆ–æ”¶æˆ–æ”¾ï¼Œè·Ÿéšç€å¿’ä¿® æ–¯ç©¿æ¢­äºèœ¿èœ’æ›²æŠ˜çš„è¿·å®«ä¹‹ä¸­ï¼Œç¡®ä¿ä»–ä¸è‡´è¿·è·¯ã€‚</p><p>å¿’ä¿®æ–¯çš„é«˜æ‹›ï¼Œä¸ç°ä»£è®¡ç®—æœºä¸­æ±‚è§£å¾ˆå¤šé—®é¢˜çš„ç®—æ³•å¼‚æ›²åŒå·¥ã€‚äº‹å®ä¸Šï¼Œå¾ˆå¤šåº”ç”¨é—®é¢˜çš„è§£ï¼Œ åœ¨å½¢å¼ä¸Šéƒ½å¯çœ‹ä½œè‹¥å¹²å…ƒç´ æŒ‰ç‰¹å®šæ¬¡åºæ„æˆçš„ä¸€ä¸ªåºåˆ—ã€‚ ä»¥ ç»å…¸ çš„æ—…è¡Œå•†é—®é¢˜ï¼ˆ traveling salesman problem, TSPï¼‰ä¸ºä¾‹ï¼Œå…¶ç›®æ ‡æ˜¯è®¡ç®—å‡ºç”±ç»™å®šçš„nä¸ªåŸå¸‚æ„æˆçš„ä¸€ä¸ªåºåˆ—ï¼Œä½¿å¾—æŒ‰æ­¤ åºåˆ—å¯¹è¿™äº›åŸå¸‚çš„ç¯æ¸¸æˆæœ¬ï¼ˆæ¯”å¦‚æœºç¥¨ä»·æ ¼ï¼‰æœ€ä½ã€‚å°½ç®¡æ­¤ç±»é—®é¢˜æœ¬èº«çš„æè¿°å¹¶ä¸å¤æ‚ï¼Œä½†é—æ†¾ çš„æ˜¯ï¼Œç”±äºæ‰€æ¶‰åŠå…ƒç´ ï¼ˆæ¯”å¦‚åŸå¸‚ï¼‰çš„æ¯ä¸€æ’åˆ—éƒ½æ˜¯ä¸€ä¸ªå€™é€‰è§£ï¼Œå®ƒä»¬å¾€å¾€æ„æˆä¸€ä¸ªæå¤§çš„æœç´¢ ç©ºé—´ã€‚é€šå¸¸ï¼Œå…¶æœç´¢ç©ºé—´çš„è§„æ¨¡ä¸å…¨æ’åˆ—æ€»æ•°å¤§ä½“ç›¸å½“ï¼Œä¸ºn! = O(nn )ã€‚å› æ­¤è‹¥é‡‡ç”¨è›®åŠ›ç­–ç•¥ï¼Œ é€ä¸€ç”Ÿæˆå¯èƒ½çš„å€™é€‰è§£å¹¶æ£€æŸ¥å…¶æ˜¯å¦åˆç†ï¼Œåˆ™å¿…ç„¶æ— æ³•å°†è¿è¡Œæ—¶é—´æ§åˆ¶åœ¨å¤šé¡¹å¼çš„èŒƒå›´ä»¥å†…ã€‚</p><p><strong>è¿™æ ·çš„ç®—æ³•å¯¹åº”è¿™æ ·çš„æ¨¡å¼ï¼š</strong></p><p>ä»é›¶å¼€å§‹ï¼Œå°è¯•é€æ­¥å¢åŠ å€™é€‰è§£çš„é•¿åº¦ï¼Œæ›´å‡†ç¡®åœ°æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆæ‰¹çš„è€ƒå¯Ÿå…·æœ‰ç‰¹å®šå‰ç¼€çš„æ‰€æœ‰å€™é€‰è§£ï¼Œè¿™ç§ä»é•¿åº¦ä¸Šé€æ­¥å‘ç›®æ ‡è§£é è¿‘çš„å°è¯•ï¼Œæˆä¸ºè¯•æ¢ Probing</p><p>ä½œä¸ºè§£å¾—åˆ°å±€éƒ¨ç‰¹å¾ï¼Œç‰¹å¾å‰ç¼€åœ¨è¯•æ¢çš„è¿‡ç¨‹ä¸­ä¸€æ—¦è¢«å‘ç°ä¸ç›®æ ‡è§£ä¸é€‚åˆï¼Œåˆ™æ”¶ç¼©åˆ°æ­¤å‰ä¸€æ­¥çš„é•¿åº¦ï¼Œç„¶åè¯•æ¢ä¸‹ä¸€å¯èƒ½çš„ç»„åˆï¼Œç‰¹å¾å‰ç¼€é•¿åº¦ç¼©å‡çš„è¿™ç±»æ“ä½œæˆä¸ºï¼Œå›æº¯BackTrackingï¼Œå…¶æ•ˆæœç­‰åŒäºå‰ªæPruning</p><p>åœ¨ä¸Šè¿°çš„æ•…äº‹ä¸­ï¼Œè¿™ç§æ–¹æ³•ä¾èµ–äºæœ‰å‹çš„ç‰©è´¨åŸºç¡€ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä¿è¯æœç´¢è¿‡çš„è¿‡ç¨‹ä¸è¢«é‡å¤æœç´¢ï¼ŒåŠæ³•å°±æ˜¯åœ¨å‰ªæçš„ä½ç½®ç•™ä¸‹æŸç§æ ‡è®°</p><aside> ğŸ’¡ å…«çš‡åï¼Œå›½é™…è±¡æ£‹ä¸­çš‡åçš„åŠ¿åŠ›èŒƒå›´è¦†ç›–æ‰€åœ¨çš„æ°´å¹³çº¿ã€å‚ç›´çº¿å’Œä¸¤æ¡å¯¹è§’çº¿ï¼Œç°åœ¨è€ƒå¯Ÿå¦‚ä¸‹çš„é—®é¢˜ åœ¨n*nçš„æ£‹ç›˜ä¸­ï¼Œå¦‚ä½•ä½¿å¾—å¥¹ä»¬ä¹‹é—´å½¼æ­¤äº’ä¸æ”»å‡»ï¼Œ æ­¤æ—¶ç§°å¥¹ä»¬æ„æˆä¸€ä¸ªå¯è¡Œçš„æ£‹å±€ï¼Œå¯¹äºä»»ä½•æ•´æ•°nå¤§äºç­‰äº4</aside><p>é¦–å…ˆåˆ†æé—®é¢˜å¯ä»¥çœ‹å‡ºï¼Œnçš‡åå¯ä»¥åœ¨n*nçš„æ£‹ç›˜ä¸Šå¯è¡Œï¼Œé¦–å…ˆéœ€è¦è®¾è®¡Queenè¿™ä¸ªç±»ï¼Œä¹Ÿå°±æ˜¯åæ ‡ï¼Œé€šè¿‡é‡è½½åˆ¤æ–­ç­‰æ“ä½œç¬¦æ¥å®ç°å¯¹çš‡åä½ç½®æ˜¯å¦ç›¸äº’å†²çªçš„ä¾¿æ·åˆ¤æ–­</p><p>è‹¥æ¯è¡Œèƒ½ä¸”åªèƒ½æ”¾ç½®ä¸€ä¸ªçš‡åï¼Œä¸å¦¨é¦–å…ˆå°†æ¯ä¸ªçš‡ååˆ†é…ç»™æ¯ä¸€è¡Œï¼Œç„¶åä»ç©ºæ£‹ç›˜å¼€å§‹é€ä¸ªå°è¯•å°†å¥¹ä»¬æ”¾ç½®åˆ°æ— å†²çªçš„æŸåˆ—ï¼Œæ²¡æ”¾ç½®å¥½ä¸€ä¸ªçš‡åæ‰ç»§ç»­è¯•æ¢ä¸‹ä¸€ä¸ªï¼Œè‹¥å½“å‰çš‡ååœ¨ä»»ä½•åˆ—éƒ½ä¼šé€ æˆå†²çªï¼Œåˆ™åç»­çš‡åçš„è¯•æ¢éƒ½æ˜¯å¾’åŠ³çš„ï¼Œå› æ­¤åº”è¯¥å›æº¯åˆ°ä¸Šä¸€çš‡å</p><p>å¯ä»¥å€ŸåŠ©æ ˆsoluæ¥åŠ¨æ€è®°å½•å„çš‡åçš„åˆ—å·ï¼Œå½“è¯¥æ ˆçš„è§„æ¨¡å¢è‡³Nå¾—åˆ°å…¨å±€è§£</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1bzdw2k5zj215a0fu0v1.jpg" alt="image-20220416233029045" /></p><aside> ğŸ’¡ è¿·å®«å¯»è·¯ï¼Œè¦æ±‚ä¾ç…§é¢„å®šçš„è¡Œè¿›è§„åˆ™ï¼Œåœ¨å…·æœ‰ç‰¹å®šé›†åˆç»“æ„çš„ç©ºé—´åŒºåŸŸå†…ï¼Œæ‰¾åˆ°ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„ä¸€æ¡é€šè·¯ï¼Œè¿™æ ·çš„ç®€åŒ–ç‰ˆæœ¬ åœ¨ç©ºé—´åŒºåŸŸé™å®šä¸ºç”±n*nçš„æ–¹æ ¼ç»„æˆçš„è¿·å®«ï¼Œé™¤æ¥å››å‘¨çš„å›´å¢™ï¼Œè¿˜æœ‰åˆ†å¸ƒå…¶é—´çš„è‹¥å¹²éšœç¢ç‰©ï¼Œåªèƒ½æ°´å¹³æˆ–å‚ç›´ç§»åŠ¨ æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯åœ¨ä»»æ„åˆ¶å®šçš„Originå’ŒDesä¸­æ‰¾åˆ°ä¸€æ¡é€šè·¯</aside><h2 id="45-é˜Ÿåˆ—queue"><a class="markdownIt-Anchor" href="#45-é˜Ÿåˆ—queue"></a> 4.5 é˜Ÿåˆ—Queue</h2><p>ä¸æ ˆStackä¸€æ ·ï¼Œé˜Ÿåˆ—Queueä¹Ÿæ˜¯å­˜æ”¾æ•°æ®å¯¹è±¡çš„ä¸€ç§å®¹å™¨ï¼Œå…¶ä¸­çš„æ•°æ®å¯¹è±¡ä¹ŸæŒ‰ç…§çº¿æ€§çš„é€»è¾‘æ¬¡åºæ’åˆ—ï¼Œé˜Ÿåˆ—ç»“æ„åŒæ ·æ”¯æŒå¯¹è±¡Insertå’Œdeleteï¼Œä½†æ˜¯ä¸¤ç§æ“ä½œçš„èŒƒå›´åˆ†åˆ«è¢«é™åˆ¶äºé˜Ÿåˆ—çš„ä¸¤ç«¯ï¼ˆè‹¥çº¦å®šæ–°å¯¹è±¡åªèƒ½ä»æŸä¸€ç«¯æ’å…¥å…¶ä¸­ï¼Œåˆ™åªèƒ½ä»å¦ä¸€ç«¯åˆ é™¤å·²æœ‰çš„å…ƒç´ ï¼Œå…è®¸å–å‡ºå…ƒç´ çš„ä¸€ç«¯æˆä¸ºé˜Ÿå¤´Frontï¼Œè€Œå…è®¸æ’å…¥å…ƒç´ çš„å¦ä¸€ç«¯æˆä¸ºé˜Ÿå°¾Rear</p><p>å¯¹äºçš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œä»é˜Ÿçš„è§’åº¦å¯ä»¥ç§°ä¸ºenqueueå’Œdequeueçš„æ“ä½œ</p><p>å¯¹åº”çš„ä¸€äº›åŸºæœ¬æ“ä½œ</p><aside> ğŸ’¡ å¾ªç¯åˆ†é…å™¨ï¼Œä¸ºåœ¨å®¢æˆ·clientç¾¤ä½“å…±äº«æŸä¸€èµ„æºï¼Œæ¯”å¦‚å…±äº«CPUï¼Œä¸€å¥—å…¬å¹³ä¸”é«˜æ•ˆçš„åˆ†é…è§„åˆ™å¿…ä¸å¯å°‘ï¼Œè€Œé˜Ÿåˆ—ç»“æ„åˆ™éå¸¸é€‚äºå®šä¹‰å’Œå®ç°è¿™æ ·çš„ä¸€å¥—åˆ†é…è§„åˆ™</aside><p>å¯ä»¥ä½¿ç”¨æ‰€è°“çš„è½®å€¼round robinç®—æ³•ä¸­ï¼Œé¦–å…ˆä»¤æ‰€æœ‰å‚ä¸èµ„æºåˆ†é…çš„å®¢æˆ·ç»„æˆä¸€ä¸ªé˜Ÿåˆ—Qï¼Œæ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªåå¤è½®å›å¼çš„è°ƒåº¦è¿‡ç¨‹</p><p>è¿™é‡Œï¼Œæ¯ä½ç”¨æˆ·æŒç»­å ç”¨èµ„æºçš„æ—¶é—´å¯¹ç®—æ³•çš„æˆè´¥è‡³å…³é‡è¦ï¼Œä¸€æ–¹é¢ï¼Œæœªæ¥ä¿è¯å“åº”é€Ÿåº¦ï¼Œè¿™ä¸ªæ—¶é—´å€¼é€šå¸¸ä¸èƒ½è¿‡å¤§ï¼›å¦ä¸€æ–¹é¢ï¼Œå› å æœ‰æƒé™çš„åˆ‡æ¢ä¹Ÿéœ€è¦æ¶ˆè€—ä¸€å®šæ—¶é—´ï¼Œå› æ­¤è¿™ä¸ªæ—¶é—´å–çš„è¿‡å°ï¼Œåˆ‡æ¢è¿‡äºé¢‘ç¹ä¹Ÿä¼šé€ æˆæ•´ä½“æ•ˆç‡çš„ä¸‹é™</p><aside> ğŸ’¡ é“¶è¡ŒæœåŠ¡æ¨¡æ‹Ÿï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨Queueç»“æ„å®ç°é¡¾å®¢æœåŠ¡çš„è°ƒåº¦äºä¼˜åŒ–ï¼Œ</aside><h1 id="chapter05-äºŒå‰æ ‘-tree"><a class="markdownIt-Anchor" href="#chapter05-äºŒå‰æ ‘-tree"></a> Chapter05 äºŒå‰æ ‘ Tree</h1><p>å¦‚æœä»¥å¹³è¡¡äºŒå‰æœç´¢æ•°ä¸ºä¾‹å­ï¼Œè‹¥å…¶ä¸­åŒ…å«nä¸ªå…ƒç´ ï¼Œåˆ™æ¯æ¬¡æŸ¥æ‰¾ã€æ›´æ–°ã€æ’å…¥å’Œåˆ é™¤æ“ä½œç­‰éƒ½å¯ä»¥åœ¨O(log N)çš„æ—¶é—´å†…å®Œæˆ</p><p>æ•°ç»“æ„æœ‰ä¸è®¡å…¶æ•°çš„å˜ç§ï¼Œåœ¨ç®—æ³•ç†è®ºä»¥åŠå®é™…åº”ç”¨ä¸­æ‰®æ¼”ç€æœ€ä¸ºå…³é”®çš„è§’è‰²ï¼Œå¾—ç›Šäºç‹¬ç‰¹è€Œåˆæ™®é€‚çš„é€»è¾‘ç»“æ„ã€‚æ ‘ä½œä¸ºä¸€ç§åˆ†å±‚ç»“æ„ï¼Œè€Œå±‚æ¬¡åŒ–è¿™ä¸ªç‰¹å¾å‡ ä¹è•´å«åœ¨æ‰€æœ‰é£Ÿç‰©åŠå…¶è”ç³»ä¹‹ä¸­</p><p>ä½œä¸ºæ ‘çš„ç‰¹ä¾‹ï¼ŒäºŒå‰æ ‘å®é™…ä¸Šå¹¶ä¸å¤±å…¶ä¸€èˆ¬æ€§ï¼Œå°±æœ¬ç« è€Œè¨€ï¼Œæ— è®ºæ˜¯é€»è¾‘ç»“æ„è¿˜æ˜¯ç®—æ³•åŠŸèƒ½æ¥è¯´ï¼Œä»»ä½•æœ‰è·Ÿæœ‰åºçš„å¤šå‰æ ‘éƒ½å¯ä»¥ç­‰ä»·è½¬åŒ–å¹¶å®ç°ä¸ºäºŒå‰æ ‘ï¼Œæœ¬ç« çš„ç»ˆç‚¹åœ¨äºŒå‰æ ‘ä¸­ï¼Œæˆ‘ä»¬å°†ç”¨é€šè®¯ç¼–ç ç®—æ³•çš„å®ç°è¿™ä¸ªåº”ç”¨å®ä¾‹ä½œä¸ºçº¿ç´¢è´¯ç©¿å…¨ç« </p><h2 id="51-äºŒå‰æ ‘åŠå…¶è¡¨ç¤º"><a class="markdownIt-Anchor" href="#51-äºŒå‰æ ‘åŠå…¶è¡¨ç¤º"></a> 5.1 äºŒå‰æ ‘åŠå…¶è¡¨ç¤º</h2><h3 id="511-æ ‘tree"><a class="markdownIt-Anchor" href="#511-æ ‘tree"></a> 5.1.1 æ ‘ï¼ˆTreeï¼‰</h3><p>ä»å›¾è®ºçš„è§’åº¦æ¥çœ‹ï¼Œæ ‘ç­‰ä»·äºè¿é€šæ— ç¯å›¾ï¼Œå› æ­¤ä¸ä¸€èˆ¬çš„å›¾ç›¸åŒï¼Œæ ‘å¯ä»¥ç”¨</p><ul><li>ä¸€ç»„å®šç‚¹Vertexï¼ŒåŠå…¶è¿æ¥ä¸å…¶é—´çš„è‹¥å¹²æ¡è¾¹edgeç»„æˆ</li><li>åœ¨è®¡ç®—æœºç§‘å­¦ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šåœ¨åˆ¶å®šæŸä¸€ç‰¹å®šå®šç‚¹æˆä¸ºæ ¹rootï¼Œå®ç°rooted tree</li><li>åœ¨ç¨‹åºå®ç°çš„è§’åº¦ä¸Šï¼Œæ›´å¤šå°†å®šç‚¹vertexç§°åšèŠ‚ç‚¹node</li></ul><p>ç”±äºæ ‘çš„è¿é€šæ€§ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸æ ¹ä¹‹é—´éƒ½æœ‰ä¸€æ¡è·¯ç›¸è¿ï¼Œè€Œæ ¹æ®æ ‘çš„æ— ç¯æ€§ï¼Œç”±æ ¹é€šå¾€æ¯ä¸ªèŠ‚ç‚¹çš„è·¯å¾„å¿…ç„¶å”¯ä¸€ï¼Œå› æ­¤åœ¨æ¯ä¸ªèŠ‚ç‚¹vertexåˆ°æ ¹rootçš„å”¯ä¸€é€šè·¯æ‰€ç»è¿‡è¾¹çš„æ•°ç›®ï¼Œç§°ä½œçš„æ·±åº¦depthï¼Œä¾æ®æ·±åº¦æ’åºå¯ä»¥å¯¹æ‰€æœ‰èŠ‚ç‚¹åšåˆ†å±‚å½’ç±»</p><p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b8bad7c8-b710-4d5d-bd03-b0f384cc6eaa/Untitled.png" alt="Untitled" /></p><ul><li>depthï¼›æ²¿æ¯ä¸ªèŠ‚ç‚¹vertexåˆ°æ ¹rootçš„å”¯ä¸€é€šè·¯æ‰€ç»è¿‡è¾¹çš„æ•°ç›®æˆä¸ºè¯¥èŠ‚ç‚¹çš„æ·±åº¦</li><li>ç¥–å…ˆancestor/åä»£descendantï¼›è¿™ä¸ªæ˜¯åŒ…å«vertexèŠ‚ç‚¹æœ¬èº«</li><li>çœŸç¥–å…ˆproper ancestor/çœŸåä»£proper descendantï¼›ä¸åŒ…å«vertexèŠ‚ç‚¹æœ¬èº«</li><li>parent/childï¼›ç›¸é‚»çš„æˆä¸ºçˆ¶æ¯èŠ‚ç‚¹ï¼Œå’Œå­©å­èŠ‚ç‚¹</li><li>degreeï¼Œvertexçš„å­©å­æ€»æ•°ç§°ä¸ºåº¦æ ‘æˆ–è€…åº¦ï¼Œè®°åšdegï¼ˆvï¼‰</li><li>leafï¼Œæ— å­©å­çš„èŠ‚ç‚¹è¢«æˆä¸ºå¶èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æ ¹åœ¨å†…çš„å…¶ä½™èŠ‚ç‚¹éƒ½è¢«ç§°å†…éƒ¨èŠ‚ç‚¹internal node</li><li>subtreeï¼›vertexçš„æ‰€æœ‰åä»£åŠå…¶ä¹‹é—´çš„è”è¾¹ç§°ä½œå­æ ‘ï¼Œsubtreeï¼ˆvï¼‰</li></ul><h3 id="512-äºŒå‰æ ‘-binary-tree"><a class="markdownIt-Anchor" href="#512-äºŒå‰æ ‘-binary-tree"></a> 5.1.2 äºŒå‰æ ‘ ï¼ˆBinary Treeï¼‰</h3><p>äºŒå‰æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹çš„degreeå‡ä¸è¶…è¿‡2ï¼Œå› æ­¤åœ¨Binary Treeä¸­åŒä¸€çˆ¶èŠ‚ç‚¹ä¸­çš„æ±‰å­éƒ½å¯ä»¥ä½¿ç”¨å·¦ã€å³ç›¸äº’åŒºåˆ†ï¼Œå› æ­¤å¯ä»¥è¢«ç§°ä¸ºæœ‰åºäºŒå‰ï¼ˆOrdered Binary Treeï¼‰ï¼›ç‰¹åˆ«çš„ï¼Œä¸åŒ…å«ä¸€åº¦èŠ‚ç‚¹çš„äºŒå‰æ ‘ç§°ä¸ºçœŸäºŒå‰æ ‘ï¼ˆProper Binary Treeï¼‰</p><h3 id="513-å¤šå‰æ ‘k-ary-tree"><a class="markdownIt-Anchor" href="#513-å¤šå‰æ ‘k-ary-tree"></a> 5.1.3 å¤šå‰æ ‘ï¼ˆK-ary Treeï¼‰</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ ‘ä¸­å„èŠ‚ç‚¹çš„degreeçš„æ•°ç›®å¹¶ä¸ç¡®å®šï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„degreeå‡ä¸è¶…è¿‡kä¸ªçš„æœ‰æ ¹æ ‘ï¼Œç§°ä¸ºKå‰æ ‘</p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹è¿‡ï¼Œå¤šå‰æ ‘çš„è¡¨ç°æ–¹å¼æœ‰å¤šç§</p><ol><li>çˆ¶èŠ‚ç‚¹è¡¨ç¤ºæ–¹æ³•</li><li>å­©å­èŠ‚ç‚¹è¡¨ç¤ºæ–¹æ³•</li><li>çˆ¶èŠ‚ç‚¹å’Œå­©å­èŠ‚ç‚¹è¡¨ç¤ºæ–¹æ³•</li><li>æœ‰åºå¤šå‰æ ‘=äºŒå‰æ ‘</li><li>é•¿å­å’Œå…„å¼Ÿ</li></ol><ul><li>çˆ¶èŠ‚ç‚¹è¡¨ç¤ºæ–¹æ³•</li></ul><p>å¯ä»¥å°†å„èŠ‚ç‚¹ç»„ç»‡ä¸ºå‘é‡Vectoræˆ–åˆ—è¡¨Listï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ é™¤ä¿å­˜èŠ‚ç‚¹æœ¬èº«çš„ä¿¡æ¯Dataä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¿å­˜çˆ¶èŠ‚ç‚¹Parentçš„Rankæˆ–Position</p><p>ç‰¹åˆ«çš„ï¼Œå¯ä»¥ä¸ºRootæŒ‡å®šä¸€ä¸ªè™šæ„çš„çˆ¶èŠ‚ç‚¹-1æˆ–Nullï¼Œä¾¿äºç»Ÿä¸€åˆ¤æ–­</p><p>å¦‚æ­¤ï¼Œæ‰€æœ‰å‘é‡æˆ–åˆ—è¡¨æ‰€å çš„ç©ºé—´æ€»é‡ä¸ºOï¼ˆNï¼‰ï¼Œçº¿æ€§æ­£æ¯”äºèŠ‚ç‚¹æ€»æ•°Nï¼Œæ—¶é—´æ–¹é¢ï¼Œä»…éœ€å¸¸æ•°æ—¶é—´å°±å¯ä»¥ç¡®å®šä»»ä¸€èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹Parentï¼›ä½†æ˜¯åè¿‡æ¥ï¼Œå­©å­èŠ‚ç‚¹çš„æŸ¥æ‰¾å´ä¸å¾—ä¸èŠ±è´¹Oï¼ˆnï¼‰æ—¶é—´è®¿éæ‰€æœ‰èŠ‚ç‚¹</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1bzehjzcjj20l20es74x.jpg" alt="image-20220416233103957" /></p><ul><li>å­©å­èŠ‚ç‚¹è¡¨ç¤ºæ–¹æ³•</li></ul><p>å¯ä»¥è®©æ¯ä¸ªèŠ‚ç‚¹å°†å…¶æ‰€æœ‰çš„å­©å­ç»„ç»‡ä¸ºä¸€ä¸ªå‘é‡æˆ–åˆ—è¡¨ï¼Œç”±æ­¤å¯¹äºæ‹¥æœ‰rä¸ªå­©å­çš„èŠ‚ç‚¹ï¼Œå¯ä»¥åœ¨Oï¼ˆr+1ï¼‰çš„æ—¶é—´å†…åˆ—ä¸¾å‡ºå…¶æ‰€æœ‰çš„å­©å­</p><ul><li>çˆ¶èŠ‚ç‚¹å’Œå­©å­èŠ‚ç‚¹</li></ul><p>ä¸Šé¢ä¸¤ç§æ–¹å¼å„æœ‰æ‰€é•¿ï¼Œä¹Ÿå„æœ‰æ‰€çŸ­ï¼Œä¸ºäº†ç»¼åˆä¸¤è€…ä¹‹é—´çš„ä¼˜åŠ¿ï¼Œæ¶ˆé™¤ç¼ºç‚¹ï¼Œå¯ä»¥ä½¿ç”¨å„èŠ‚ç‚¹è®°å½•çˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿè®°å½•åºåˆ—ä¿å­˜æ‰€æœ‰å­©å­</p><p>ä½†æ˜¯è¿™ç§æ–¹æ³•å¹¶ä¸æ˜¯æ²¡æœ‰ç¼ºç‚¹ï¼›å°½ç®¡å¦‚æ­¤å¯ä»¥é«˜æ•ˆå…¼é¡¾å¯¹çˆ¶èŠ‚ç‚¹å’Œå­©å­å®šä½ï¼Œä½†åœ¨èŠ‚ç‚¹æ’å…¥ä¸åˆ é™¤æ“ä½œé¢‘ç¹çš„åœºåˆï¼Œä¸ºäº†åŠ¨æ€ç»´æŠ¤å’Œæ›´æ–°æ ‘çš„æ‹“æ‰‘ç»“æ„ï¼Œä¸å¾—ä¸åå¤éå†å’Œè°ƒæ•´ä¸€äº›èŠ‚ç‚¹æ‰€å¯¹åº”çš„å­©å­åºåˆ—ï¼Œç„¶è€ŒVectorå’ŒListç­‰çº¿æ€§ç»“æ„çš„æ­¤ç±»æ“ä½œéƒ½éœ€è¦è€—è´¹å¤§é‡æ—¶é—´ï¼ŒåŠ¿å¿…å½±å“åˆ°æ•´ä½“çš„æ•ˆç‡</p><ul><li>æœ‰åºå¤šå‰æ ‘å’ŒäºŒå‰æ ‘</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1bzem3ys4j20kq0c0mxo.jpg" alt="image-20220416233111158" /></p><p>é‡‡ç”¨ä»æ”¯æŒé«˜æ•ˆåŠ¨æ€è°ƒæ•´çš„äºŒå‰æ ‘ç»“æ„ï¼Œä¸ºæ­¤å¿…é¡»é¦–å…ˆå»ºç«‹ä»å¤šå‰æ ‘åˆ°äºŒå‰æ ‘ä¹‹é—´çš„æŸç§è½¬æ¢å…³ç³»ï¼Œåœ¨è¿™ç§è½¬æ¢çš„æ„ä¹‰ä¸‹ï¼Œä»»ä½•å¤šå‰æ ‘éƒ½ç­‰ä»·ä¸æŸé¢—äºŒå‰æ ‘</p><ul><li>é•¿å­å’Œå…„å¼Ÿ</li></ul><p>å¤šåºå¤šå‰æ ‘ä¸­ä»»ä¸€éå¶èŠ‚ç‚¹éƒ½æœ‰å”¯ä¸€çš„é•¿å­ï¼Œè€Œä¸”å¯ä»¥è¯¥é•¿å­å‡ºå‘ï¼ŒæŒ‰ç…§çº¦å®šæˆ–æŒ‡å®šçš„æ¬¡åºéå†æ‰€æœ‰çš„å­©å­èŠ‚ç‚¹</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1bzerqbzij20k806mglr.jpg" alt="image-20220416233120308" /><strong>ä¸€ä¸ªéå¸¸æœ‰è¶£çš„ç°è±¡å‡ºç°ï¼šå°½ç®¡äºŒå‰æ ‘åªæ˜¯å¤šå‰æ ‘çš„ä¸€ä¸ªå­é›†ï¼Œä½†æ˜¯å¯¹åº”ç”¨é—®é¢˜çš„æè¿°å’Œåˆ»ç”»èƒ½åŠ›å¹¶ä¸ä½äºåè€…ï¼Œå®é™…ä¸Šä»¥ä¸‹æˆ‘ä»¬è¿˜èƒ½è¿›ä¸€æ­¥å‘ç°ï¼Œå³ä¾¿å°±è®¡ç®—æ•ˆç‡è€Œè¨€ï¼ŒäºŒå‰æ ‘ä¹Ÿå¹¶ä¸é€Šè‰²ä¸€èˆ¬æ„ä¹‰ä¸Šçš„æ ‘ï¼Œåè¿‡æ¥ï¼Œå¾—ç›Šä¸å®šä¹‰çš„ç®€æ´æ€§ä»¥åŠç»“æ„çš„è§„èŒƒæ€§ï¼ŒäºŒå‰æ ‘æ‰€æ‰€æ”¯æ’‘çš„ç®—æ³•å¾€å¾€å¯ä»¥æ›´å¥½åœ°å¾—åˆ°æè¿°ï¼Œæ›´åŠ ä¾¿æ·å®ç°</strong></p><h2 id="52-ç¼–ç æ ‘"><a class="markdownIt-Anchor" href="#52-ç¼–ç æ ‘"></a> 5.2 ç¼–ç æ ‘</h2><p>é€šè¿‡å°†é€šè®¯ç¼–ç ç®—æ³•çš„å®ç°ä½œä¸ºäºŒå‰æ ‘çš„åº”ç”¨å®ä¾‹ï¼Œé€šè®¯ç†è®ºçš„åŸºæœ¬é—®é¢˜æ˜¯åœ¨å°½å¯èƒ½ä½çš„æˆæœ¬ä¸‹ï¼Œç”¨æœ€é«˜çš„é€Ÿåº¦æ¥çœŸå®çš„å®ç°ä¿¡æ¯åœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šçš„å¤åˆ¶å’Œè½¬ç§»ï¼›åœ¨ä¿¡é“è½¬ç§»çš„ä¿¡æ¯å¤§å¤šæŒ‰ç…§äºŒè¿›åˆ¶æ¯”ç‰¹å½¢å¼è¡¨ç¤ºå’Œå­˜åœ¨ï¼Œè€Œæ¯ä¸€ä¸ªå…·ä½“çš„ç¼–ç æ–¹æ¡ˆéƒ½å¯¹åº”ä¸€é¢—äºŒå‰ç¼–ç æ ‘</p><p>è®²è§£çš„ä¸æ·±ï¼Œä¸å€¼å¾—çœ‹ï¼Œå¯ä»¥å»çœ‹ã€Šä¿¡æ¯ä¼ è¾“è¿œç¦»ã€‹</p><h2 id="53-äºŒå‰æ ‘çš„å®ç°"><a class="markdownIt-Anchor" href="#53-äºŒå‰æ ‘çš„å®ç°"></a> 5.3 äºŒå‰æ ‘çš„å®ç°</h2><p>ä½œä¸ºå›¾ï¼ˆGraphï¼‰çš„ç‰¹æ®Šå½¢å¼ï¼ŒäºŒå‰æ ‘çš„åŸºæœ¬ç»„æˆå•å…ƒæ˜¯èŠ‚ç‚¹ä¸è¾¹ï¼Œä½œä¸ºæ•°æ®ç»“æ„ï¼Œå…¶åŸºæœ¬çš„ç»„æˆå®ä½“æ˜¯äºŒå‰æ ‘èŠ‚ç‚¹ï¼ˆBinary Tree Nodeï¼‰ï¼Œè¾¹ä½œç”¨ä¸èŠ‚ç‚¹ä¹‹é—´çš„ç›¸äº’ä½œç”¨</p>]]></content>
    
    
    <categories>
      
      <category>DataStructure</category>
      
    </categories>
    
    
    <tags>
      
      <tag>TsinghuaBook</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PAPER01</title>
    <link href="/posts/fc444d3.html"/>
    <url>/posts/fc444d3.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨ç–«æƒ…å’Œå®šåˆ¶å…¬äº¤çš„èƒŒæ™¯ä¸‹ï¼Œæ¢è®¨å¦‚ä½•ä¿ƒè¿›äººä»¬å¯æŒç»­å‡ºè¡Œï¼Œä¹Ÿå°±æ˜¯å°½å¯èƒ½çš„è½¬å‘å®šåˆ¶å…¬äº¤ï¼Œåšå‡ºçš„ä¸»è¦è´¡çŒ®æ˜¯ç ”ç©¶äº†</p><ol><li>é€šå‹¤è€…åœ¨ç–«æƒ…ä¸­è½¬å‘å®šåˆ¶å…¬äº¤æœåŠ¡çš„æ„æ„¿</li><li>æ ¹æ®é—®å·è°ƒæŸ¥çš„æ–¹æ³•ç¡®å®šäº†ä¸åŒç¾¤ä½“çš„æ¨¡å‹åå¥½</li><li>ä¸ºåœ¨ç–«æƒ…ä¸­ä¿ƒè¿›å…¬äº¤æœåŠ¡æä¾›æ½œåœ¨çš„æ”¿ç­–å»ºè®®</li></ol><p><a href="https://www.sciencedirect.com/science/article/pii/S2046043021000836">è®ºæ–‡é“¾æ¥</a></p><span id="more"></span><h2 id="01-å¼•è¨€å’Œæ–‡çŒ®ç»¼è¿°"><a class="markdownIt-Anchor" href="#01-å¼•è¨€å’Œæ–‡çŒ®ç»¼è¿°"></a> 01 å¼•è¨€å’Œæ–‡çŒ®ç»¼è¿°</h2><p>é¦–å…ˆå¤§çš„èƒŒæ™¯æ˜¯ç–«æƒ…ï¼Œåœ¨ç–«æƒ…åˆæœŸäººä»¬ä¸å¯é¿å…çš„å—åˆ°æ”¿ç­–å’Œå±…å®¶åŠå…¬ç­‰å½±å“åœ¨å®¶ï¼Œä½†æ˜¯éšç€ç–«æƒ…æ…¢æ…¢ç»“æŸï¼Œäººä»¬æœ‰ç€ä¸å¯é¿å…çš„å‡ºè¡Œéœ€æ±‚ï¼Œæ ¹æ®å‰äººçš„ç ”ç©¶ï¼Œç–«æƒ…å‰åå‡ºè¡Œçš„ç‰¹ç‚¹åŒ…æ‹¬</p><ol><li>å®¢æµéœ€æ±‚é™ä½ã€è´§è¿éœ€æ±‚æå‡</li><li>å‡ºè¡Œä½¿ç”¨ç§å®¶è½¦ã€è‡ªè¡Œè½¦å’Œæ­¥è¡Œå‡é«˜ï¼›ä½¿ç”¨å…¶ä»–å…¬å…±äº¤é€šæ–¹å¼é™ä½</li></ol><p>ä½†æ˜¯è¿‡åº¦çš„ç§å®¶è½¦å‡ºè¡Œä¼šå…·æœ‰äº¤é€šæ‹¥å µã€ç¯å¢ƒæ±¡æŸ“ç­‰é—®é¢˜ï¼Œå› æ­¤ä¿ƒè¿›ç–«æƒ…å¯æŒç»­å‡ºè¡Œæ˜¯ååˆ†æœ‰å¿…è¦çš„ï¼Œè€Œå®šåˆ¶å…¬äº¤ï¼ˆcustomized busï¼ŒCBï¼‰æ˜¯å…¸å‹çš„éœ€æ±‚å“åº”å¼å…¬äº¤ï¼ˆdemand response transitï¼ŒDRTï¼‰ï¼Œåˆ©ç”¨ç±»ä¼¼å…¬äº¤æœåŠ¡äºå…·æœ‰ç›¸åŒå‡ºè¡Œç‚¹å’Œç›®çš„åœ°çš„ä¹˜å®¢ï¼Œå®ƒå…·æœ‰æ¯”ç§å®¶è½¦æ›´ç¯ä¿ã€æ¯”ä¼ ç»Ÿå…¬å…±äº¤é€šæˆæœ¬æ›´ä½ã€åŒæ—¶å…·æœ‰ç§å¯†ã€çµæ´»å’Œæ¥é©³çš„ç‰¹ç‚¹ï¼Œä»ç–«æƒ…çš„è§’åº¦å¯ä»¥æœ‰æ•ˆçš„é¿å…è·¯ä¸Šçš„äº¤å‰æ„ŸæŸ“ï¼Œ</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12bxflbqlj20gu0dq759.jpg" alt="image-20220408150845709" /></p><p>ä»å®šåˆ¶å…¬äº¤å’Œç–«æƒ…ä¸­äººä»¬å‡ºè¡Œè¡Œä¸ºå˜åŒ–çš„å‘å±•æ¥çœ‹</p><ol><li>å®šåˆ¶å…¬äº¤çš„æ–‡çŒ®ä¸»è¦ç ”ç©¶å¦‚ä½•æå‡å…¶æœåŠ¡æ°´å¹³ï¼ŒåŒ…æ‹¬è·¯å¾„è§„åˆ’ã€è½¦è¾†è°ƒåº¦ã€æœåŠ¡è´¨é‡ç­‰ï¼Œæ²¡æœ‰ç ”ç©¶å®šåˆ¶å…¬äº¤å…·æœ‰å¸å¼•åŠ›çš„åŸå› ï¼›å› æ­¤å¯ä»¥ç ”ç©¶ç–«æƒ…ä¸­å®šåˆ¶å…¬äº¤å¦‚ä½•å½±å“äººä»¬çš„å‡ºè¡Œè¡Œä¸ºé€‰æ‹©</li><li>åœ¨ç–«æƒ…å‰åï¼Œäººä»¬çš„å‡ºè¡Œæ–¹å¼å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œå…¶ä¸­è®¾è®¡åˆ°äººå£ç‰¹å¾ã€æ”¿ç­–å’Œä¸ªäººè§‚å¿µï¼Œå› æ­¤ç ”ç©¶ç–«æƒ…æ±‡æ€»äººä»¬å‡ºè¡Œè¡Œä¸ºåå¥½çš„æ”¹å˜</li></ol><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12bzt1rgsj20b80d6dg6.jpg" alt="image-20220408151104821" /></p><h2 id="02-æ–¹æ³•å’Œå®éªŒ"><a class="markdownIt-Anchor" href="#02-æ–¹æ³•å’Œå®éªŒ"></a> 02 æ–¹æ³•å’Œå®éªŒ</h2><p>å› æ­¤æœ¬æ–‡ä½¿ç”¨è°ƒæŸ¥é—®å·çš„æ–¹å¼ï¼Œåœ¨é—®å·è°ƒæŸ¥ä¸­ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ol><li>RPè°ƒæŸ¥ï¼Œæ˜¯é’ˆå¯¹ç”¨æˆ·çš„çœŸå®åœºæ™¯è¿›è¡Œæé—®ï¼Œåˆ©ç”¨ç™¾åº¦APIçˆ¬å–çš„é€šå‹¤èµ·ç»ˆç‚¹æ­¥è¡Œã€éª‘è¡Œã€ç§å®¶è½¦ã€å…¬äº¤è½¦ã€åœ°é“å’Œå®šåˆ¶å…¬äº¤çš„æ—¶é—´ã€è·ç¦»å’Œè´¹ç”¨ç­‰ç‰¹å¾</li><li>SPè°ƒæŸ¥æ—¶åœ¨ç»™å®šåœºæ™¯ä¸­å¯¹ç”¨æˆ·çš„è¡Œä¸ºè¿›è¡Œåˆ¤æ–­ï¼Œå¯¹è°ƒæŸ¥ç”¨æˆ·åœ¨æ”¶è´¹å’Œé€Ÿåº¦ä¸åŒçš„å››ç§åœºæ™¯ä¸‹è½¬å‘å®šåˆ¶å…¬äº¤çš„æ„æ„¿ç‰¹å¾åˆ†æï¼›å››ç§æ­£äº¤åœºæ™¯åŒ…æ‹¬ç¥¨ä»·å’Œæ—…è¡Œé€Ÿåº¦çš„å·®å¼‚</li><li>åŸºæœ¬çš„å±æ€§å’Œç¤¾ä¼šå­¦ç‰¹å¾ï¼ŒåŒ…æ‹¬æ€§åˆ«ã€å¹´é¾„ã€å—æ•™è‚²ç¨‹åº¦ã€æ”¶å…¥ã€æ˜¯å¦æœ‰é©¾ç…§ã€æ˜¯å¦æœ‰ç§å®¶è½¦ã€æ˜¯å¦æœ‰è‡ªè¡Œè½¦/æ‘©æ‰˜è½¦</li></ol><p>ä¹‹åä½¿ç”¨å¤šç±»åˆ«é€»è¾‘å›å½’å’ŒåµŒå¥—é€»è¾‘å›å½’åˆ†æï¼Œå®ƒä»¬äºé€»è¾‘å›å½’çš„åŒºåˆ«åœ¨äºï¼Œ</p><p><strong>é€»è¾‘å›å½’</strong></p><p>å‡è®¾</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12c29hqbzj20860263yb.jpg" alt="image-20220408151326904" /></p><p>æˆæœ¬å‡½æ•°</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12c2ga8dgj209k01ot8j.jpg" alt="image-20220408151338000" /></p><p><strong>å¤šç±»åˆ«é€»è¾‘å›å½’</strong></p><p>ï¼ˆpsï¼šæˆ‘è§‰å¾—å°±æ˜¯softmax regressionï¼‰ï¼Œå®ƒå—åˆ°ä¸ç›¸å…³æ›¿ä»£æ–¹æ¡ˆçš„ç‹¬ç«‹æ€§å½±å“ï¼Œä¼šå¯¼è‡´ä¸åŒç±»åˆ«ä¹‹é—´å…·æœ‰äº’æ–¥æ€§ï¼Œå› ä¸ºæˆ‘ä»¬æš‚æ—¶è¿˜ä¸çŸ¥é“CBä¸å…¶ä»–äº¤é€šæ–¹å¼æ˜¯å¦å…·æœ‰ç›¸ä¼¼æ€§ï¼Œå¯¼è‡´ä¸åŒç±»åˆ«ä¹‹é—´å…·æœ‰äº’æ–¥æ€§</p><p><strong>åµŒå¥—é€»è¾‘å›å½’</strong></p><p>å…è®¸æŸäº›å¤‡é€‰æ¨¡å¼ä¹‹é—´å­˜åœ¨ç›¸å…³æ€§ï¼Œæ”¾å®½äº†ä¸åŒç±»åˆ«ä¹‹é—´çš„ç‹¬ç«‹åŒåˆ†å¸ƒçš„å‡è®¾</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12c4np489j207k01e0sj.jpg" alt="image-20220408151545063" /></p><h2 id="03-ç»“æœå’Œè®¨è®º"><a class="markdownIt-Anchor" href="#03-ç»“æœå’Œè®¨è®º"></a> 03 ç»“æœå’Œè®¨è®º</h2><p>å»ºç«‹çš„æ¨¡å‹ä¸º</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12c7bxlcuj20g809sq3e.jpg" alt="image-20220408151819023" /></p><p>æ ¹æ®å‡è®¾æ£€éªŒåˆ¤æ–­NLå¹¶ä¸æ˜¾è‘—ï¼Œè¯´æ˜CBå’Œå…¶ä»–äº¤é€šæ–¹å¼æœ‰æ˜æ˜¾çš„å·®å¼‚ï¼Œå› æ­¤ä¸»è¦çœ‹MNLçš„ç»“æœå°±è¡Œ</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12c84m2saj20la08maaz.jpg" alt="image-20220408151904754" /></p><ol><li><p>å•ç¨‹å®¢åˆ¶åŒ–ç¥¨ä»·ç³»æ•°ä¸ºè´Ÿï¼ˆ-0.1141ï¼‰ï¼›å®šåˆ¶å·´å£«çš„å‡ºè¡Œæ—¶é—´å¯¹é€šå‹¤è€…çš„å‡ºè¡Œæ–¹å¼é€‰æ‹©æ¦‚ç‡äº§ç”Ÿè´Ÿé¢å½±å“ï¼ˆ-1.3966ï¼‰</p></li><li><p>å¤§å¤šæ•°æ¨¡å¼çš„æ—…è¡Œæ—¶é—´ç³»æ•°ä¸ºè´Ÿã€‚æ±½è½¦çš„å‡ºè¡Œæ—¶é—´ç³»æ•°åˆ†åˆ«æ˜¯æ­¥è¡Œå’Œä¹˜åå…¬å…±æ±½è½¦çš„2.41å€å’Œ2.16å€</p></li><li><p>å—è®¿è€…å¯¹å…¬å…±æ±½è½¦çš„è¿›å‡ºè·ç¦»å’Œåœ°é“çš„å‡ºå£è·ç¦»å¾ˆæ•æ„Ÿã€‚åœ°é“çš„å‡ºå£è·ç¦»å½±å“è¾ƒå¤§ï¼ˆ-1.12ï¼‰ï¼Œè€Œå…¬äº¤è½¦çš„å‡ºå£è·ç¦»ä¸æ˜æ˜¾ï¼ˆ-0.3321ï¼‰ã€‚</p></li></ol><p>ä¹‹åæ ¹æ®ASCï¼Œä¹Ÿå°±æ˜¯å—è®¿è€…åœ¨ä¸é‡‡å–ä»»ä½•æªæ–½æ—¶å€™çš„å–å€¼ï¼Œåæ˜ ä¿æŒç°çŠ¶å—è®¿è€…çš„åŸºå‡†æ•ˆç”¨</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12c9jnuhzj20me0hwmye.jpg" alt="image-20220408152026623" /></p><p>Ã˜å¹´è½»äººæ›´æ„¿æ„ä¹˜ååœ°é“å’Œå…¬å…±æ±½è½¦é€šå‹¤ï¼Œå¯¹å®šåˆ¶å…¬äº¤æ¯”è¾ƒç§¯æ</p><p>Ã˜ä¸­å¹´äººæ›´å–œæ¬¢ä¹˜åå®šåˆ¶å…¬äº¤å‡ºå‹¤</p><p>Ã˜ä¸­ç­‰æ”¶å…¥å€¾å‘äºä¸æ­¥è¡Œé€šå‹¤</p><p>Ã˜è¾ƒé«˜æ”¶å…¥å¯¹ç§å®¶è½¦è¡¨ç°æ›´é«˜çš„åå¥½</p><p>Ã˜é«˜ç­‰æ•™è‚²å¯¹å®šåˆ¶å…¬äº¤å…·æœ‰å¼ºçƒˆçš„åå¥½</p><p>Ã˜å¥³æ€§å‡ºè¡Œè€…æ›´å€¾å‘äºä½¿ç”¨å®šåˆ¶å…¬äº¤æœåŠ¡ï¼Œæ¯”ç”·æ€§æ›´è®¨åŒæ­¥è¡Œå’Œéª‘è‡ªè¡Œè½¦</p><p>Ã˜ç”·æ€§å¯¹ä¸åŒé€šå‹¤æ–¹å¼çš„åå¥½æ²¡æœ‰æ˜¾è‘—å·®å¼‚</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12ca0j3b5j20li0h03zo.jpg" alt="image-20220408152053520" /></p><p>Ã˜æ— é©¾ç…§äººç¾¤æ›´å€¾å‘äºå®šåˆ¶å…¬äº¤ï¼ŒåŒæ—¶å¯¹ç§å®¶è½¦å‡ºè¡Œæ¶ˆæ</p><p>Ã˜æœ‰é©¾ç…§äººç¾¤å¯¹ç§å®¶è½¦å‡ºè¡Œå’Œå®šåˆ¶å…¬äº¤éƒ½ç§¯æ</p><p>Ã˜æœ‰è½¦ç¾¤ä½“æ„¿æ„å¼€è½¦é€šå‹¤ï¼Œä½†æ¯”æ²¡æœ‰è½¦çš„äººæ›´æ„¿æ„æ”¹ä¹˜å®šåˆ¶å·´å£«</p><p>Ã˜æœ‰è‡ªè¡Œè½¦çš„å—è®¿è€…ä½¿ç”¨è‡ªè¡Œè½¦ä¸Šç­çš„å¯èƒ½æ€§æ›´é«˜ï¼Œä½†æ˜¯å®šåˆ¶å…¬äº¤å¯¹ä»–ä»¬ä¹Ÿå¾ˆæœ‰å¸å¼•åŠ›</p><p>Ã˜æœ‰è‡ªè¡Œè½¦çš„å—è®¿è€…ä½¿ç”¨è‡ªè¡Œè½¦ä¸Šç­çš„å¯èƒ½æ€§æ›´é«˜ï¼Œä½†æ˜¯å®šåˆ¶å…¬äº¤å¯¹ä»–ä»¬ä¹Ÿå¾ˆæœ‰å¸å¼•åŠ›</p><p>ç”±ä¸Šè¿°ç»™å‡ºçš„å»ºè®®</p><ol><li><p>ä»çŸ­æœŸæ¥çœ‹ï¼Œå…¬ä¼—æ„¿æ„æ¥å—å…·æœ‰ä¸ªäººé˜²æŠ¤è®¾å¤‡å’Œç–«æƒ…é˜²æ§çš„åŸºæœ¬ç”¨å“çš„å®šåˆ¶å…¬äº¤æœåŠ¡</p></li><li><p>ä»é•¿è¿œæ¥çœ‹ï¼Œç”±äºå COVID-19 æ—¶æœŸçš„æ±½è½¦é€šå‹¤è€…æ›´æ„¿æ„ä½¿ç”¨å®šåˆ¶å·´å£«ï¼Œè€Œå®šåˆ¶å·´å£«çš„å‡ºè¡Œæ—¶é—´æ˜¯ä¸€ä¸ªé‡è¦å˜é‡ï¼Œæ”¿åºœåº”å®æ–½ç›¸å…³æ”¿ç­–æ¥æ¨åŠ¨è¿™ä¸€è½¬å˜ã€‚</p></li><li><p>å…³äºæ¯ä¸ªç¾¤ä½“çš„ç‰¹ç‚¹ï¼Œé‡è¦çš„æ˜¯è¦è€ƒè™‘ä¸­å¹´ï¼ˆ31 è‡³ 36 å²ï¼‰æˆ–å—è¿‡é«˜ç­‰æ•™è‚²ï¼ˆç¡•å£«å’Œåšå£«å­¦ä½ï¼‰/ä¸­ç­‰æ”¶å…¥/æ²¡æœ‰æ‰§ç…§æˆ–åŒä¼´ï¼Œå¹¶æ‹¥æœ‰æ±½è½¦å’Œè‡ªè¡Œè½¦ã€‚åº”è¯¥ä¸ºè¿™äº›ç¾¤ä½“è®¾è®¡å…·ä½“çš„æ”¿ç­–ã€‚ç¥¨ä»·æŠ˜æ‰£å’Œè¡¥è´´å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªèµ·ç‚¹ã€‚</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>CB</category>
      
    </categories>
    
    
    <tags>
      
      <tag>paper_reading</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Single01-è®¾è®¡æ¨¡å¼</title>
    <link href="/posts/4de165f7.html"/>
    <url>/posts/4de165f7.html</url>
    
    <content type="html"><![CDATA[<p>è¯»ä¹¦ç¬”è®°</p><span id="more"></span><h2 id="0x01-åŸºç¡€çŸ¥è¯†"><a class="markdownIt-Anchor" href="#0x01-åŸºç¡€çŸ¥è¯†"></a> 0x01 åŸºç¡€çŸ¥è¯†</h2><p><strong>æ¨¡å¼</strong>ï¼šæ¯ä¸ªæ¨¡å¼éƒ½æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬çš„ç¯å¢ƒä¸­ä¸æ–­å‡ºç°çš„é—®é¢˜ï¼Œç„¶åæè¿°äº†è¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ— æ•°æ¬¡é‡ç”¨é‚£äº›å·²æœ‰çš„æˆåŠŸçš„è§£å†³æ–¹æ¡ˆï¼Œæ— é¡»é‡å¤ç›¸åŒçš„å·¥ä½œ</p><p>a pattern is a successful or efficient solution to a recurring problem within a context!</p><p><strong>è®¾è®¡æ¨¡å¼</strong>  ä¸€èˆ¬åŒ…å«æ¨¡å¼åç§°ã€é—®é¢˜ã€ç›®çš„ã€è§£å†³æ–¹æ¡ˆå’Œæ•ˆæœç­‰ç»„æˆè¦ç´ ï¼Œå…¶ä¸­å…³é”®è¦ç´ æ˜¯æ¨¡å¼åç§°ã€é—®é¢˜ã€è§£å†³æ–¹æ¡ˆå’Œæ•ˆæœ</p><ul><li>pattern nameï¼šé€šè¿‡ä¸€ä¸¤ä¸ªè¯æ¥æè¿°æ¨¡å¼çš„é—®é¢˜ã€è§£å†³æ–¹æ¡ˆå’Œæ•ˆæœï¼Œä¾¿äºæ›´å¥½çš„ç†è§£æ¨¡å¼å¹¶æ–¹ä¾¿å¼€å‘äººå‘˜ä¹‹é—´çš„äº¤æµ</li><li>Problemï¼šæè¿°äº†åº”è¯¥åœ¨ä½•æ—¶ä½¿ç”¨æ¨¡å¼ï¼ŒåŒ…å«äº†åœ¨è®¾è®¡ä¸­å­˜åœ¨çš„é—®é¢˜ä»¥åŠé—®é¢˜å­˜åœ¨çš„åŸå› </li><li>Solutionï¼šæè¿°è®¾è®¡æ¨¡å¼çš„ç»„æˆæˆåˆ†ï¼Œä»¥åŠè¿™äº›ç»„æˆæˆåˆ†ä¹‹é—´çš„ç›¸äº’å…³ç³»ï¼Œå„è‡ªçš„èŒè´£å’Œåä½œæ–¹å¼ï¼Œé€šå¸¸è§£å†³æ–¹æ¡ˆé€šè¿‡UMLç±»å›¾å’Œæ ¸å¿ƒä»£ç æ¥è¿›è¡Œæè¿°</li><li>Consequencesï¼šæè¿°äº†æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ä»¥åŠåœ¨ä½¿ç”¨æ¨¡å¼åº”è¯¥æƒè¡¡çš„é—®é¢˜</li></ul><p>æ¨¡å¼çš„åˆ†ç±»ä¸»è¦åˆ†ä¸ºcreationalã€structuralã€behavioralä¸‰ç§</p><ul><li>creationalï¼šæè¿°å¦‚ä½•åˆ›å»ºå¯¹è±¡</li><li>structuralï¼šä¸»è¦ç”¨äºæè¿°å¦‚ä½•å®ç°ç±»æˆ–å¯¹è±¡çš„ç»„åˆ</li><li>behavioralï¼šæè¿°ç±»æˆ–å¯¹è±¡æ€ä¹ˆäº¤äº’ä»¥åŠæ€ä¹ˆåˆ†é…èŒè´£</li></ul><p>è®¾è®¡æ¨¡å¼çš„ä½œç”¨</p><p>å¯ä»¥å®ç°å¯ç»´æŠ¤å¤ç”¨çš„è®¾è®¡æ–¹æ¡ˆï¼Œä½¿ç”¨è¿™äº›æ–¹æ¡ˆå¯ä»¥è®©æˆ‘ä»¬é¿å…åšä¸€äº›é‡å¤æ€§çš„å·¥ä½œï¼Œæœ‰åŠ©äºå¸®åŠ©æˆ‘ä»¬æé«˜å¼€å‘å’Œè®¾è®¡æ•ˆç‡ï¼ŒåŒæ—¶æä¾›äº†ä¸€å¥—é€šç”¨çš„è®¾è®¡è¯æ±‡å’Œä¸€ç§é€šç”¨çš„å½¢å¼æ¥æ–¹ä¾¿å¼€å‘äººå‘˜ä¹‹é—´æ²Ÿé€šå’Œäº¤æµã€ä½¿å¾—è®¾è®¡æ–¹æ¡ˆæ›´åŠ é€šä¿—æ˜“æ‡‚ï¼Œå¤§éƒ¨åˆ†è®¾è®¡æ¨¡å¼éƒ½å…¼é¡¾äº†ç³»ç»Ÿçš„å¯é‡ç”¨æ€§å’Œå¯æ‹“å±•æ€§ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°é‡ç”¨ä¸€äº›å·²æœ‰çš„è®¾è®¡æ–¹æ¡ˆã€åŠŸèƒ½æ¨¡å—ç”šè‡³ä¸€ä¸ªæ™šè¿˜åœ¨å‘¢ä¸ªçš„è½¯ä»¶ä¸‹ç³»ç»Ÿï¼Œé¿å…åšä¸€äº›é‡å¤çš„è®¾è®¡ï¼ˆdonnot repeat your code)</p><h3 id="é¢å‘å¯¹è±¡"><a class="markdownIt-Anchor" href="#é¢å‘å¯¹è±¡"></a> é¢å‘å¯¹è±¡</h3><p>é¢å‘å¯¹è±¡çš„è½¯ä»¶ç³»ç»Ÿçš„è®¾è®¡ï¼Œåœ¨æ”¯æŒå¯ç»´æŠ¤æ€§çš„åŒæ—¶ï¼Œæé«˜ç³»ç»Ÿçš„å¯å¤ç”¨æ€§æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„é—®é¢˜ï¼Œå¦‚ä½•åŒæ—¶æé«˜ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§æ˜¯é¢å‘å¯¹è±¡è®¾è®¡éœ€è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜ä¹‹ä¸€ï¼Œå¸¸è§çš„é¢å‘å¯¹è±¡çš„å…·æœ‰ä¸€ä¸‹çš„è®¾è®¡åŸåˆ™</p><h5 id="å•ä¸€èŒè´£åŸåˆ™-single-responsibility-principle"><a class="markdownIt-Anchor" href="#å•ä¸€èŒè´£åŸåˆ™-single-responsibility-principle"></a> å•ä¸€èŒè´£åŸåˆ™ single responsibility principle</h5><blockquote><p>ä¸€ä¸ªç±»ä¹‹è´Ÿè´£ä¸€ä¸ªåŠŸèƒ½é¢†åŸŸæ€»çš„ç›¸å…³èŒè´£ï¼Œæˆ–è€…å¯ä»¥å®šä¹‰ä¸ºï¼Œå°±ä¸€ä¸ªç±»è€Œè¨€ï¼Œåº”è¯¥åªæœ‰ä¸€ä¸ªå¼•èµ·ä»–å˜åŒ–çš„åŸå› ï¼›åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªç±»æ‰¿æ‹…çš„èŒè´£è¶Šå¤šï¼Œå®ƒè¢«å¤ç”¨çš„å¯èƒ½æ€§å°±è¶Šå°</p></blockquote><h5 id="å¼€é—­åŸåˆ™-open-closed-principle"><a class="markdownIt-Anchor" href="#å¼€é—­åŸåˆ™-open-closed-principle"></a> å¼€é—­åŸåˆ™ open closed principle</h5><blockquote><p>ä¸€ä¸ªè½¯ä»¶å®ä½“åº”è¯¥å¯¹æ‹“å±•å¼€å‘ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œè½¯ä»¶å®ä½“åº”å°½é‡åœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç æƒ…å†µä¸‹è¿›è¡Œæ‹“å±•</p></blockquote><p>ä¸ºäº†æ»¡è¶³å¼€é—­åŸåˆ™é¥¿ï¼Œéœ€è¦å¯¹ç³»ç»Ÿè¿›è¡ŒæŠ½è±¡åŒ–è®¾è®¡ï¼ŒæŠ½è±¡åŒ–æ˜¯å¼€é—­åŸåˆ™é¥¿çš„å…³é”®</p><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs lasso"><span class="hljs-comment">// display æ–¹æ³•</span><br><span class="hljs-keyword">if</span>(<span class="hljs-keyword">type</span>.<span class="hljs-keyword">equals</span>(<span class="hljs-string">&#x27;pie&#x27;</span>)&#123;<br>pieCHart chart=<span class="hljs-literal">new</span> PieChart()<br>chart.display();<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span>.<span class="hljs-keyword">equals</span>(<span class="hljs-string">&#x27;bar&#x27;</span>))&#123;<br>barChart chart=<span class="hljs-literal">new</span> BarChart();<br>chart.dispaly();<br>&#125;)<br><span class="hljs-comment">// ä½†æ˜¯è¿™ç§æ–¹æ³•ä¸­ï¼Œå¦‚æœéœ€è¦å¢åŠ ä¸€ä¸ªæ–°çš„å›¾è¡¨ç±»ï¼Œæ¯”å¦‚æŠ˜çº¿å›¾lineChartï¼Œå°±éœ€è¦ä¿®æ”¹chartdisplayçš„æºä»£ç ï¼Œå¢åŠ åˆ¤æ–­é€»è¾‘è¿åäº†å¼€é—­åŸåˆ™</span><br><span class="hljs-comment">//é‡æ„ä»£ç ï¼Œéœ€è¦é€šè¿‡æŠ½è±¡åŒ–çš„æ–¹å¼æ¥å¯¹ç³»ç»Ÿè¿›è¡Œå†²ä¸ªï¼Œä½¿ä¹‹å¢åŠ æ–°çš„å›¾è¡¨æ—¶ä¸éœ€è¦ä¿®æ”¹æºä»£ç </span><br><span class="hljs-number">1.</span> å¢åŠ ä¸€ä¸ªæŠ½è±¡å›¾è¡¨ç±»AbstractChart å°†ä½¿ç”¨å„ç§å…·ä½“å›¾è¡¨ç±»ä½œä¸ºå­ç±»<br><span class="hljs-number">2.</span> chartdisplayç±»é’ˆå¯¹æŠ½è±¡å›¾è¡¨ç±»è¿›è¡Œç¼–ç¨‹ï¼Œç”±å®¢æˆ·ç«¯æ¥å†³å®šä½¿ç”¨é‚£ç§å…·ä½“å›¾è¡¨<br></code></pre></td></tr></table></figure><h5 id="é‡Œæ°ä»£æ¢åŸåˆ™-liskov-substitution-principle"><a class="markdownIt-Anchor" href="#é‡Œæ°ä»£æ¢åŸåˆ™-liskov-substitution-principle"></a> é‡Œæ°ä»£æ¢åŸåˆ™ liskov substitution principle</h5><blockquote><p>æ‰€æœ‰å¼•ç”¨çˆ¶ç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡</p></blockquote><p>é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å®ç°å¼€é—­åŸåˆ™çš„é‡è¦</p><p>åœ¨è½¯ä»¶ä¸­å°†ä¸€ä¸ªåŸºç±»å¯¹è±¡æ›¿æ¢æˆä¸ºå­ç±»å¯¹è±¡ï¼Œç¨‹åºå°†ä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯å’Œå¼‚å¸¸ï¼Œéœ€è¦æ³¨æ„çš„é—®é¢˜æœ‰</p><ol><li>å­ç±»çš„æ‰€æœ‰é˜²èŒƒå¿…é¡»åœ¨å¼—é›·ä¸­ç”Ÿå‘½ï¼Œä¸ºäº†ä¿è¯ç³»ç»Ÿçš„æ‹“å±•æ€§ï¼Œåœ¨ç¨‹åºé€šå¸¸ä½¿ç”¨parent classæ¥è¿›è¡Œå®šä¹‰</li><li>å°½é‡æŠŠparent classè®¾è®¡ä¸ºæŠ½è±¡ç±»æˆ–è€…å€Ÿå£ï¼Œè®©sub classç»§æ‰¿parent classæˆ–è€…å®ç°parent classå€Ÿå£</li></ol><h5 id="ä¾èµ–å€’è½¬åŸåˆ™-dependence-inversion-principle"><a class="markdownIt-Anchor" href="#ä¾èµ–å€’è½¬åŸåˆ™-dependence-inversion-principle"></a> ä¾èµ–å€’è½¬åŸåˆ™ dependence inversion principle</h5><p>æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”å½“ä»¥æ¥äºæŠ½è±¡</p><p>è¦æ±‚æˆ‘ä»¬åœ¨ç¨‹åºä»£ç ä¸­ä¼ é€’å‚æ•°æˆ–è€…åœ¨å…³è”å…³ç³»æ±‡æ€»ï¼Œå°½é‡å¼•ç”¨å±‚æ¬¡é«˜çš„æŠ½è±¡å±‚ç±»ï¼Œä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»è¿›è¡Œå˜é‡ç±»å‹ç”Ÿå‘½ã€å‚æ•°ç±»å‹ç”Ÿå‘½ã€æ–¹æ³•è¿”å›ç±»å£°æ˜ä»¥åŠæ•°æ®ç±»å‹çš„è½¬æ¢ï¼Œè€Œä¸æ˜¯è¦ç”¨å…·ä½“ç±»æ¥åšè¿™äº›äº‹æƒ…</p><h5 id="æ¥å£éš”ç¦»åŸåˆ™-interface-segregation-principle"><a class="markdownIt-Anchor" href="#æ¥å£éš”ç¦»åŸåˆ™-interface-segregation-principle"></a> æ¥å£éš”ç¦»åŸåˆ™ interface segregation principle</h5><p>ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å•ä¸€çš„æ€»ç»“å£</p><p>æ¥å£ä¸èƒ½å¤ªå°ï¼Œå¤ªå°é€ æˆæ•°é‡å¤ªå¤šéš¾ä»¥ç»´æŠ¤ï¼Œæ¥å£ä¸èƒ½å¤ªå¤§ï¼Œå¤ªå°è¿åæ¥å£éš”ç¦»çš„åŸåˆ™</p><h5 id="åˆæˆå¤ç”¨åŸåˆ™-composite-reuse-principle"><a class="markdownIt-Anchor" href="#åˆæˆå¤ç”¨åŸåˆ™-composite-reuse-principle"></a> åˆæˆå¤ç”¨åŸåˆ™ composite reuse principle</h5><p>å°½é‡ä½¿ç”¨å¯¹è±¡ç»„åˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿æ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„ï¼Œæ˜¯åœ¨ä¸€ä¸ªæ–°çš„å¯¹è±¡ä¾‹é€šè¿‡å…³è”å…³ç³»æ¥ä½¿ç”¨ä¸€äº›å·²æœ‰çš„å¯¹è±¡ï¼Œä½¿ä¹‹æˆä¸ºæ–°å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œæ–°å¯¹è±¡é€šè¿‡å§”æ´¾è°ƒç”¨å·²æœ‰å¯¹è±¡çš„æ–¹æ³•è¾¾åˆ°å¤ç”¨åŠŸèƒ½çš„ç›®çš„</p><h5 id="è¿ªç±³ç‰¹æ³•åˆ™-law-of-demeter"><a class="markdownIt-Anchor" href="#è¿ªç±³ç‰¹æ³•åˆ™-law-of-demeter"></a> è¿ªç±³ç‰¹æ³•åˆ™ law of Demeter</h5><p>ä¸€ä¸ªè½¯ä»¶å®ä½“åº”è¯¥å°½å¯èƒ½å‡å°‘å’Œå…¶ä»–å®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨</p><h2 id="0x02-å…­ç§-åˆ›å»ºæ¨¡å¼"><a class="markdownIt-Anchor" href="#0x02-å…­ç§-åˆ›å»ºæ¨¡å¼"></a> 0x02 å…­ç§ åˆ›å»ºæ¨¡å¼</h2><h3 id="21-ç®€å•å·¥å‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#21-ç®€å•å·¥å‚æ¨¡å¼"></a> 2.1 ç®€å•å·¥å‚æ¨¡å¼</h3><p>é¦–å…ˆå°†éœ€è¦åˆ›å»ºçš„å„ç§ä¸åŒå¯¹è±¡çš„ç›¸å…³ä»£ç å°è£…åˆ°ä¸åŒçš„ç±»ä¸­ï¼Œè¿™ç§ç±»ç§°ä¹‹ä¸ºå…·ä½“äº§å“ç±»ï¼Œè€Œ å°†ä»–ä»¬çš„å…¬å…±çš„ä»£ç è¿›è¡ŒæŠ½è±¡å’Œæå–åå°è£…åœ¨ä¸€ä¸ªæŠ½è±¡äº§å“ç±»ä¸­ï¼Œæ¯ä¸€ä¸ªå…·ä½“äº§å“ç±»éƒ½æ˜¯æŠ½è±¡äº§å“ç±»çš„å­ç±»ï¼Œç„¶åæä¾›ä¸€ä¸ªå·¥å‚ç±»ç”¨äºåˆ›å»ºå„ç§äº§å“ï¼Œåœ¨å·¥å‚ç±»ä¸­æä¾›ä¸€ä¸ªåˆ›å»ºäº§å“çš„å·¥å‚æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ ¹æ®æ‰€ä¼ å…¥çš„å‚æ•°ä¸åŒåˆ›å»ºä¸åŒçš„å…·ä½“äº§å“å¯¹è±¡ï¼Œå®¢æˆ·ç«¯åªéœ€è¦è°ƒç”¨å·¥ç¨‹ç±»çš„å·¥å‚æ–¹æ³•å¹¶ä¼ å…¥å“åº”çš„å‚æ•°å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªäº§å“å¯¹è±¡</p><h2 id="0x03-ä¸ƒç§-ç»“æ„æ¨¡å¼"><a class="markdownIt-Anchor" href="#0x03-ä¸ƒç§-ç»“æ„æ¨¡å¼"></a> 0x03 ä¸ƒç§ ç»“æ„æ¨¡å¼</h2><h2 id="0x04-åä¸€ç§è¡Œä¸ºæ¨¡å¼"><a class="markdownIt-Anchor" href="#0x04-åä¸€ç§è¡Œä¸ºæ¨¡å¼"></a> 0x04 åä¸€ç§è¡Œä¸ºæ¨¡å¼</h2>]]></content>
    
    
    <categories>
      
      <category>Software</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Single</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-09--å­¦ä¹ ç†è®ºç»ˆç« </title>
    <link href="/posts/be2cd4f6.html"/>
    <url>/posts/be2cd4f6.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨ç›®å‰æ²¡æœ‰è¶³å¤Ÿåšçš„ç»éªŒæˆ–è€…è¯´æ˜¯æœºå™¨å­¦ä¹ ç´ å…»çš„æƒ…å†µä¸‹æ¥çœ‹è¿™ç§æ–‡ç« æ— ç–‘æ˜¯ä¸€ç§æŠ˜ç£¨ï¼Œå› æ­¤è¿‡ä¸€éæ¦‚å¿µå°±overæƒ¹ï¼ŒåŒæ—¶è®°å½•ä¸€ä¸‹æ–‡çŒ®ç®¡ç†ä¸­çš„ä¸€äº›ç»éªŒ</p><span id="more"></span><h2 id="01-è®¡ç®—å­¦ä¹ ç†è®º"><a class="markdownIt-Anchor" href="#01-è®¡ç®—å­¦ä¹ ç†è®º"></a> 01 è®¡ç®—å­¦ä¹ ç†è®º</h2><p>è®¡ç®—å­¦ä¹ ç†è®ºå¸Œæœ›å›ç­”</p><ol><li>åœ¨ä»€ä¹ˆæ ·çš„æ¡ä»¶ä¸‹æˆåŠŸçš„å­¦ä¹ æ˜¯å¯èƒ½çš„</li><li>åœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹æŸä¸ªç‰¹å®šçš„å­¦ä¹ ç®—æ³•å¯ä»¥ä¿è¯æˆåŠŸè¿è¡Œ</li></ol><p>åœ¨å¯èƒ½è¿‘ä¼¼æ­£ç¡®ï¼ˆprobably approximately correctï¼ŒPACï¼‰ä¸‹ï¼Œæˆ‘ä»¬ç¡®å®šè‹¥å¹²å‡è®¾ç±»åˆ«ï¼Œåˆ¤æ–­å®ƒä»¬èƒ½å¦ä»å¤šé¡¹å¼æ•°é‡çš„è®­ç»ƒé›†ä¸­å¾—åˆ°ï¼ŒåŒæ—¶å¯¹å‡è®¾ç©ºé—´çš„è‡ªç„¶åº¦é‡æ¥ç•Œå®šå½’çº³å­¦ä¹ æ‰€éœ€çš„æ ·ä¾‹çš„è®­ç»ƒæ•°ç›®</p><h3 id="11-é—®é¢˜å’Œé”™è¯¯ç‡"><a class="markdownIt-Anchor" href="#11-é—®é¢˜å’Œé”™è¯¯ç‡"></a> 1.1 é—®é¢˜å’Œé”™è¯¯ç‡</h3><p>æˆ‘ä»¬å…·æœ‰æ•°æ®é›†åˆ(x^{(i)},y^{(i)}ï¼‰ï¼Œä»¥åŠåšå‡ºçš„å‡è®¾çš„é›†åˆHå’Œå­¦ä¹ ç®—æ³•Lï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯åˆ»ç”»ä¸åŒçš„å­¦ä¹ å™¨Lçš„æ€§èƒ½ï¼Œè¿™äº›å­¦ä¹ å™¨ä½¿ç”¨ä¸åŒå‡è®¾ç©ºé—´Hæ¥å­¦ä¹ ä¸åŒç±»åˆ«çš„Cä¸­çš„ç›®æ ‡æ¦‚å¿µ</p><p>ä¸ºäº†æè¿°å­¦ä¹ å™¨Lè¾“å‡ºçš„å‡è®¾hå¯¹çœŸå®ç›®æ ‡çš„é€¼è¿‘æˆå¥ï¼Œæˆ‘ä»¬å®šä¹‰çœŸå®é”™è¯¯ç‡ï¼ˆtrue errorï¼‰,æ³¨æ„è¿™é‡Œçš„çœŸå®é”™è¯¯ç‡çš„å®šä¹‰æ˜¯åœ¨æ•´ä¸ªå®ä¾‹çš„åˆ†å¸ƒä¸Šï¼Œè€Œä¸åªæ˜¯è®­ç»ƒæ ·ä¾‹ä¸Šï¼Œå› ä¸ºå®ƒæ˜¯åœ¨å®é™…åº”ç”¨æ­¤å‡è®¾håé‡åˆ°çš„çœŸå®é”™è¯¯ç‡</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>e</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>r</mi><mo>(</mo><mi>h</mi><mo>)</mo><mo>=</mo><mi>P</mi><mi>r</mi><mo>[</mo><mi>c</mi><mo>(</mo><mi>x</mi><mo>)</mo><mtext>Â </mtext><mo>=</mo><mi>h</mi><mo>(</mo><mi>x</mi><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">error(h)=Pr[c(x)~=h(x)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mopen">[</span><span class="mord mathit">c</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord mspace">Â </span><span class="mrel">=</span><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0wnyejr42j21120f2q4m.jpg" alt="image-20220403173130140" style="zoom: 33%;" /><p>è¿™ä¸ªé”™è¯¯ç‡çš„åˆ†å¸ƒä¾èµ–äºæœªçŸ¥çš„æ¦‚ç‡åˆ†å¸ƒï¼Œè¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒæ˜¯å’Œå‡è®¾ç©ºé—´ç›¸å…³çš„ï¼›å¦å¤–ä¸€æ–¹é¢hå¯¹äºcçš„é”™è¯¯ç‡ä¸èƒ½ç›´æ¥ç”±å­¦ä¹ å™¨è§‚å¯Ÿåˆ°</p><p><strong>æˆ‘ä»¬çš„ç›®çš„æ˜¯åˆ»ç”»ä¸€ä¸ªï¼šèƒ½å¤Ÿä»åˆç†æ•°é‡çš„éšæœºæŠ½æ ·è®­ç»ƒæ ·ä¾‹ä¸­é€šè¿‡åˆç†çš„è®¡ç®—æ¥å¾—åˆ°ä¸€ä¸ªå¯é çš„å‡è®¾</strong>ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•æ¥æè¿°è¿™ç§å¯å­¦ä¹ æ€§ï¼Ÿæˆ‘ä»¬å½“ç„¶å¸Œæœ›æ‰€æœ‰çš„çœŸå®é”™è¯¯ç‡éƒ½ä¸º0ï¼Œä½†æ˜¯è¿™æ ·æ˜¯ä¸ç°å®çš„ï¼ˆæ€ç»´è¾©è¯å°±çŸ¥é“ä¸åˆé€‚ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»è¿™ä¸¤ä¸ªè§’åº¦çœ‹</p><ol><li>å°†çœŸå®é”™è¯¯ç‡é™å®šåœ¨ä¸€ä¸ªå¸¸æ•°èŒƒå›´å†…ï¼ŒåŒæ—¶è®©è¿™ä¸ªå¸¸æ•°å¯ä»¥ä»»æ„å°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Ïµ</span></span></span></span></li><li>å¹¶ä¸è¦æ±‚å¯¹æ‰€æœ‰çš„éšæœºæŠ½æ ·åºåˆ—éƒ½èƒ½æˆåŠŸï¼Œåªè¦æ±‚å…¶å®æ‹çš„æ¦‚ç‡åœ¨æŸä¸ªå¸¸æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïƒ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span></span></span></span></li></ol><p>ä¸€äº›PACçš„å®šä¹‰ï¼š</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0woijqf73j213206c765.jpg" alt="image-20220403175054274" /></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0woj3fm2uj216w07a3zz.jpg" alt="image-20220403175125351" /></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0wojrj3d0j217g0oadjy.jpg" alt="image-20220403175202889" /></p><p>åœ¨PACå­¦ä¹ å®šä¹‰ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¨¡å‹çš„å¯å­¦ä¹ æ€§å¾ˆå¤§ç¨‹åº¦ç”±æ‰€éœ€è¦çš„æ•°æ®é›†æ•°é‡ç¡®å®šï¼Œéšç€é—®é¢˜è§„æ¨¡çš„å¢é•¿æ‰€éœ€è¦çš„è®­ç»ƒæ ·ä¾‹çš„å¢é•¿è¢«ç§°ä¸ºè¯¥å­¦ä¹ é—®é¢˜çš„æ ·æœ¬å¤æ‚åº¦ï¼ˆsample complexityï¼‰</p><p>å¯¹äºä¸€ä¸ªå‡è®¾ç©ºé—´å¦‚ä½•ç¡®å®šå’Œæ•°æ®é›†ä¹‹é—´çš„å…³ç³»ï¼Œå¯ä»¥ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïµ</mi><mo>âˆ’</mo><mi>e</mi><mi>x</mi><mi>h</mi><mi>o</mi><mi>u</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">\epsilon-exhousted</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Ïµ</span><span class="mbin">âˆ’</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">h</span><span class="mord mathit">o</span><span class="mord mathit">u</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord mathit">d</span></span></span></span>æ¥åˆ»ç”»ï¼Œè¡¨ç¤ºäºè®­ç»ƒæ ·ä¾‹ä¸€è‡´çš„æ‰€æœ‰å‡è®¾çš„çœŸå®é”™è¯¯ç‡éƒ½æ°å¥½å°äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">Ïµ</span></span></span></span></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0woqpc00qj210o062wfh.jpg" alt="image-20220403175841000" /></p><p>ç”±æ­¤è®¡ç®—çš„å¾—åˆ°éœ€è¦çš„è®­ç»ƒå®é™…ä¾‹å­</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>&gt;</mo><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mo>(</mo><mi>Ïµ</mi><mo>)</mo><mo>(</mo><mi>I</mi><mi>n</mi><mi mathvariant="normal">âˆ£</mi><mi>H</mi><mi mathvariant="normal">âˆ£</mi><mo>+</mo><mi>i</mi><mi>n</mi><mo>(</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>Ïƒ</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">m&gt;=1/(\epsilon)(In|H|+in(1/\sigma ))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mrel">&gt;</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mopen">(</span><span class="mord mathit">Ïµ</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">n</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="mord mathrm">âˆ£</span><span class="mbin">+</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p><p>åŒæ ·å¯¹äºä¸€ä¸ªå‡è®¾ç©ºé—´çš„å¤æ‚ç¨‹åº¦ï¼Œå¯ä»¥ä½¿ç”¨Vapnik-Chervonenkisç»´åº¦æ¥è¯æ˜æ¨¡å‹çš„ç›¸å…³å¤æ‚ç¨‹åº¦</p><ul><li>å¸¸è§æ¨¡å‹çš„å¤æ‚ç¨‹åº¦</li><li>ç¥ç»ç½‘ç»œçš„å¤æ‚ç¨‹åº¦</li></ul><h2 id="02-åŸºäºå®ä¾‹å­¦ä¹ "><a class="markdownIt-Anchor" href="#02-åŸºäºå®ä¾‹å­¦ä¹ "></a> 02 åŸºäºå®ä¾‹å­¦ä¹ </h2><p>ä¸€ä¸ªå¾ˆç®€å•çš„æ€è·¯ï¼Œé€šè¿‡å¼ºå¤§çš„è®¡ç®—èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒå¸Œæœ›é¢„æµ‹çš„å€¼å’Œæ•°æ®é›†ä¸­æ‰€æœ‰å®ä¾‹ï¼Œå½“ä»è¿™äº›å®ä¾‹ä¸­æ³›åŒ–çš„å·¥ä½œè¢«æ¨è¿Ÿåˆ°å¿…é¡»åˆ†ç±»æ–°çš„å®ä¾‹æ—¶ï¼Œæ¯å½“å­¦ä¹ å™¨é‡åˆ°ä¸€ä¸ªæ–°çš„æŸ¥è¯¢å®ä¾‹å°±åˆ†æè¿™ä¸ªå®ä¾‹ä¸ä¹‹å‰å­˜å‚¨çš„çš„å…³ç³»ï¼Œæ¥ç”±æ­¤åŒºåˆ†ç›®æ ‡å‡½æ•°çš„å€¼ï¼Œè¿™æ ·çš„æ–¹æ³•åŒ…æ‹¬ï¼š</p><ol><li>æœ€è¿‘é‚»æ–¹æ³• nearest neighbor</li><li>å±€éƒ¨åŠ æƒå›å½’ locally weighted regression</li></ol><h2 id="03-å¢å¼ºå­¦ä¹ "><a class="markdownIt-Anchor" href="#03-å¢å¼ºå­¦ä¹ "></a> 03 å¢å¼ºå­¦ä¹ </h2><p>å¤§å‘ï¼Œä¸å­¦ï¼Œæ­»éƒ½ä¸å­¦</p><h2 id="04-æ–‡çŒ®ç®¡ç†"><a class="markdownIt-Anchor" href="#04-æ–‡çŒ®ç®¡ç†"></a> 04 æ–‡çŒ®ç®¡ç†</h2><p>è¿™é‡Œå°±æ˜¯ä½œä¸ºä¸€ä¸ªç®€å•çš„è®°å½•ï¼Œçœ‹æ–‡çŒ®ä¸­å¯èƒ½çš„åº”ç”¨åœºæ™¯</p><ol><li>æ—¥å¸¸æ³›è¯»æ¥äº†è§£è‡ªå·±çš„ç ”ç©¶ç°çŠ¶ï¼ˆå¯¹äºå­¦æœ¯å°ç™½é¼ ä¸è€ƒè™‘555ï¼Œæ‰€ä»¥æ²¡æœ‰è¿™ç§éœ€æ±‚ï¼‰</li><li>æ–‡çŒ®ç»¼è¿°</li><li>ç»„ä¼šæ±‡æŠ¥çš„å·¥ä½œ</li></ol><p>å› æ­¤éœ€è¦å¯¹è®ºæ–‡æ•´ç†æˆä¸€ä¸ªä¸€ä¸ªé¡¹ç›®æ¥ç®¡ç†ï¼ŒåŒæ—¶éœ€è¦å¯¹å…¶åšç¬”è®°ï¼Œæ›´é‡è¦çš„æ˜¯å¯ä»¥æ–¹ä¾¿å¼•ç”¨ï¼Œ</p><p>ç¬¬ä¸€éƒ¨åˆ†æŸ¥æ‰¾ï¼š</p><ol><li>å•çº¯çš„æ‰¾è®ºæ–‡å’Œç®¡ç†çš„è¯ï¼Œ<a href="https://scholar.google.com.hk/?hl=zh-CN">google scholar</a>+<a href="https://sci-hub.se/">sci-hub</a>æ„Ÿè§‰å°±å¤Ÿäº†</li><li>åœ¨è‡ªå·±çš„googleè´¦å·è´¦å›¾ä¹¦é¦†ä¸­æ–°å»ºè‡ªå·±çš„æ–‡ç« æ¡£æ¡ˆåº“ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿ç®¡ç†</li></ol><p>ç¬¬äºŒéƒ¨åˆ†é˜…è¯»ï¼š</p><p>å¯ä»¥åœ¨æ–‡æ¡£ä¸‹è½½å¯¼å…¥åˆ°zoteroï¼Œå†é“¾æ¥åˆ°notionï¼Œåˆ©ç”¨notionæ¥åšç¬”è®°å’Œä¸€äº›comment</p><p>ä½œä¸ºä¸€ä¸ªæ–‡çŒ®ç®¡ç†çš„è¿‡ç¨‹</p><p>ç¬¬ä¸‰éƒ¨åˆ†å¼•ç”¨ï¼š</p><p>å¯ä»¥åˆ©ç”¨zoteroé…åˆwordçš„æ’ä»¶</p><p>ä¹Ÿå¯ä»¥google scholarä¸­å¯¼å‡ºapaæ ¼å¼</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨latexä¸­çš„texbibæ ¼å¼</p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS229</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-08--é›†æˆå­¦ä¹ </title>
    <link href="/posts/2cac3df3.html"/>
    <url>/posts/2cac3df3.html</url>
    
    <content type="html"><![CDATA[<p>é›†æˆå­¦ä¹ æ˜¯é€šè¿‡æ„å»ºå¹¶ç»“åˆå¤šä¸ªå­¦ä¹ å™¨æ¥å®Œæˆå­¦ä¹ ä»»åŠ¡ï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸ºå¤šåˆ†ç±»ç³»ç»Ÿï¼ˆmulti- classifier systemï¼‰ã€åŸºäºå§”å‘˜ä¼šçš„å­¦ä¹ ï¼ˆcommittee based learningï¼‰ç­‰ç­‰ä¹‹ç±»çš„ï¼Œåœ¨å…¶ä¸­ä¸»è¦é¢ä¸´åŸºæœ¬å­¦ä¹ å™¨çš„é€‰æ‹©å’Œè®­ç»ƒè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¸Œæœ›å­¦ä¹ å™¨å¯ä»¥åœ¨ç›¸åŒçš„æ•°æ®é›†ä¸Šè®­ç»ƒï¼Œä½†æ˜¯å¾—åˆ°çš„æœ€ç»ˆçš„å¼±å­¦ä¹ å™¨æœ€å¥½çš„æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œè¿™æ ·æ‰èƒ½æé«˜æˆ‘ä»¬æœ€é«˜ç®—æ³•çš„å‡†ç¡®ç¨‹åº¦ã€‚</p><p>é›†æˆå­¦ä¹ æˆç«‹çš„åŸºç¡€æ˜¯ï¼šåŸºå­¦ä¹ å™¨çš„è¯¯å·®ç›¸äº’ç‹¬ç«‹ï¼Œå› æ­¤è¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨é›†æˆæ–¹æ³•ä¸­éœ€è¦å°½å¯èƒ½çš„å»å®ç°çš„ï¼Œå› æ­¤æœ¬æ–‡ä»åŸºæœ¬çš„æ–¹æ³•å’Œä»¥å†³ç­–æ ‘ä½œä¸ºä¸€ç³»åˆ—åŸºå­¦ä¹ å™¨å¼€å§‹</p><span id="more"></span><h2 id="0x01-å¼•è¨€"><a class="markdownIt-Anchor" href="#0x01-å¼•è¨€"></a> 0x01 å¼•è¨€</h2><p>åœ¨ä»»ä½•åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨å¤šä¸ªå­¦ä¹ ç®—æ³•æ±‡æ€»çš„ä¸€ä¸ªï¼Œä½¿ç”¨ç¡®å®šçš„ç®—æ³•éƒ½åœ¨ä¸€ç»„<strong>åŸºæœ¬å‡è®¾</strong>ï¼Œå¹¶è®­ç»ƒå¾—åˆ°å½±å“æœ€ç»ˆå­¦ä¹ å™¨çš„è¶…å‚æ•°ï¼Œå› æ­¤å¯ä»¥å°è¯•ä½¿ç”¨æ„å»ºå¤šä¸ªå½¼æ­¤ä¸åŒçš„å­¦ä¹ å™¨ï¼Œå°½å¯èƒ½çš„å‡å°‘å®ƒä»¬ä¹‹é—´è¯¯å·®çš„ç›¸å…³æ€§æ¥é€šè¿‡æŸç§ç­–ç•¥çš„ç»„åˆæ¥æå‡æ¨¡å‹çš„æ•ˆæœï¼Œå¦‚ä½•æ„å»ºä¸åŒçš„å­¦ä¹ å™¨ï¼Ÿ</p><ol><li>ä½¿ç”¨ä¸åŒçš„ç®—æ³•å’Œæ•°æ®é›†ï¼Œæ¯”å¦‚ä½¿ç”¨å‚æ•°åŒ–çš„é€»è¾‘å›å½’å’Œéå‚æ•°åŒ–çš„å†³ç­–æ ‘æ¨¡å‹ï¼Œè¿™æ ·å¤šç®—æ³•çš„å­¦ä¹ å™¨ä¹‹é—´çš„è¯¯å·®æ˜¯å¯èƒ½ç‹¬ç«‹çš„ï¼›å¯¹äºç›¸åŒçš„å‚æ•°åŒ–çš„æ¨¡å‹ä¹Ÿå¯ä»¥é‡‡ç”¨ä¸åŒçš„è¶…å‚æ•°ï¼Œæ¯”å¦‚å¯¹äºK-meansç®—æ³•å¯ä»¥åœ¨ä¸åŒçš„ç®—æ³•é€‰æ‹©ä¸åŒçš„kå€¼ï¼›åŒæ ·å¯¹äºä¸åŒçš„ç®—æ³•æ¨¡å‹ä¸­é€‰æ‹©ä¸åŒçš„æ•°æ®é›†æ˜¯ä¹Ÿå¯ä»¥äº§ç”Ÿä¸åŒçš„å­¦ä¹ å™¨ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è‡ªåŠ©æ³•ç­‰æ„å»ºå½¼æ­¤ç›¸äº’ç‹¬ç«‹æ•°æ®é›†çš„åŸºç¡€ä¸Šæ¥è®­ç»ƒå¾—åˆ°ä¸åŒçš„ç®—æ³•æ¨¡å‹</li><li>ä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„ç­–ç•¥ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šå¹³å‡æ³•ï¼ˆaveragingï¼‰ã€æŠ•ç¥¨æ³•ï¼ˆvotingï¼‰ã€å­¦ä¹ æ³•ï¼ˆlearningï¼‰</li><li>ä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„ç­–ç•¥ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šbaggingï¼ˆå…¸å‹æ¨¡å‹ï¼šéšæœºæ£®æ—random forestï¼‰å’Œboostingï¼ˆå…¸å‹æ¨¡å‹ï¼šAdaboostã€GBï¼‰</li></ol><h2 id="0x02-é›†æˆå­¦ä¹ -ä¸åŒçš„æ¨¡å‹"><a class="markdownIt-Anchor" href="#0x02-é›†æˆå­¦ä¹ -ä¸åŒçš„æ¨¡å‹"></a> 0x02  é›†æˆå­¦ä¹  â€“ ä¸åŒçš„æ¨¡å‹</h2><p>æ¯”è¾ƒç®€å•ï¼Œçœ‹0x01å¼•è¨€â€“ç¬¬ä¸€ç‚¹</p><h2 id="0x03-é›†æˆå­¦ä¹ -ä¸åŒçš„ç­–ç•¥"><a class="markdownIt-Anchor" href="#0x03-é›†æˆå­¦ä¹ -ä¸åŒçš„ç­–ç•¥"></a> 0x03 é›†æˆå­¦ä¹ -- ä¸åŒçš„ç­–ç•¥</h2><p>3.1 å¹³å‡æ³•averagingï¼ˆå›å½’å™¨ï¼‰</p><p>å¯¹äºæ•°å€¼å‹å¸¸ç”¨çš„ç»“åˆç­–ç•¥æ˜¯å¹³å‡æ³•ï¼Œåˆå¯ä»¥åˆ†ä¸ºç®€å•å¹³å‡æ³•ï¼ˆsimple averageï¼‰å’ŒåŠ æƒå¹³å‡æ³•ï¼ˆweighted averageï¼‰</p><p>è™½ç„¶çœ‹åå­—å¯èƒ½å°±çŸ¥é“è¿™ä¸ªä»£è¡¨æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯å¯¹äºåŠ æƒå¹³å‡æ³•å…¶ä¸­æœ€é‡è¦çš„æ˜¯æƒé‡çš„ç¡®å®šï¼Œæˆ–è®¸å¯ä»¥æ ¹æ®å¤šå…ƒé«˜æ–¯åˆ†å¸ƒæ¥ç¡®å®šç”±è¿‘åŠè¿œçš„æƒé‡ã€å¯ä»¥æ ¹æ®ä¸“å®¶æ‰“åˆ†çš„å¾·å°”è²æ³•ã€å¯ä»¥æœ‰è¿·ç³Šçš„ä¸€è‡´æ€§çŸ©é˜µè®¡ç®—å¾—åˆ°çš„AHPã€Kalman filterä¸­æ£€æµ‹å’ŒçŠ¶æ€è½¬ç§»çš„ä¼°è®¡ç­‰å¾—åˆ°çš„æƒé‡ï¼Œæ— è®ºæ˜¯ä½•ç§æ–¹æ³•æœ€é‡è¦çš„æ˜¯å¯ä»¥å¾—åˆ°ä¸€ä¸ªä»¤è‡ªå·±æ»¡æ„ã€é¡¶å¾—ä½åˆ«äººargueçš„å¤„ç†æ–¹æ³•</p><p>åŠ æƒå¹³å‡æ–¹æ³•è¢«ç”¨äºé›†æˆå­¦ä¹ å¯ä»¥è¢«çœ‹ä½œæ˜¯é›†æˆå­¦ä¹ ç ”ç©¶çš„åŸºæœ¬å‡ºå‘ç‚¹ï¼Œå¯¹ç»™å®šçš„åŸºå­¦ä¹ å™¨ï¼Œä¸åŒçš„å­¦ä¹ æ–¹æ³•å¯ä»¥è§†ä½œé€šè¿‡ä¸åŒçš„æ–¹å¼æ¥ç¡®å®šåŠ æƒå¹³å‡æ³•ä¸­çš„åŸºå­¦ä¹ å™¨çš„æƒé‡ã€‚</p><p>3.2 æŠ•ç¥¨æ³•votingï¼ˆåˆ†ç±»å™¨ï¼‰</p><p>æŠ•ç¥¨çš„æ–¹å¼æœ¬è´¨ä¸Šå’Œå›å½’çš„å¹³å‡æ³•æ˜¯ç±»ä¼¼çš„ï¼Œä½†æ˜¯å› ä¸ºclassæ˜¯å¯ä»¥æ•°æ¸…æ¥šçš„ï¼Œå› æ­¤å¯ä»¥åˆ†ä¸ºç»å¯¹å¤šæ•°æŠ•ç¥¨æ³•ï¼ˆmajority votingï¼‰ã€ç›¸å¯¹å¤šæ•°æŠ•ç¥¨æ³•ï¼ˆplurality votingï¼‰ã€åŠ æƒæŠ•ç¥¨æ³•ï¼ˆweighed votingï¼‰ã€</p><p>3.3 å­¦ä¹ æ³•</p><p>å½“è®­ç»ƒæ•°æ®å¾ˆå¤šçš„æ—¶å€™ï¼Œä¸€ç§æ›´ä¸ºå¼ºå¤§çš„ç»“åˆç­–ç•¥æ˜¯ä½¿ç”¨å­¦ä¹ æ³•ï¼Œé€šè¿‡å¦å¤–ä¸€ç§å­¦ä¹ å™¨æ¥è¿›è¡Œç»“åˆ</p><p>stackingæ˜¯å­¦ä¹ æ³•çš„å…¸å‹ä»£è¡¨ï¼Œåœ¨è¿™é‡Œå°†ä¸ªä½“å­¦ä¹ ç§°ä¸ºåˆçº§å­¦ä¹ å™¨ï¼Œç”¨äºç»“åˆçš„å­¦ä¹ å™¨ç§°ä¸ºæ¬¡çº§å­¦ä¹ å™¨æˆ–è€…å…ƒå­¦ä¹ å™¨ï¼ˆmeta- learnerï¼‰ï¼Œstackingå…ˆä»åˆå§‹æ•°æ®é›†å’Œä¸­è®­ç»ƒå¾—åˆ°åˆçº§å­¦ä¹ å™¨ï¼Œç„¶åâ€œç”Ÿæˆâ€œä¸€ä¸ªæ–°çš„æ•°æ®é›†æ¥è®­ç»ƒæ¬¡çº§å­¦ä¹ å™¨ï¼Œåœ¨è¿™ä¸ªæ–°çš„æ•°æ®é›†ä¸­ï¼Œåˆçº§å­¦ä¹ å™¨çš„è¾“å‡ºè¢«å½“ä½œæ ·ä¾‹æ¥è¾“å…¥ç‰¹å¾ï¼Œè€Œåˆå§‹æ ·æœ¬çš„æ ‡è®°è¢«å½“ä½œæ ·ä¾‹æ ‡è®°ï¼Œè¿™é‡Œçš„å‡è®¾æ˜¯åˆçº§å­¦ä¹ å™¨æ˜¯ä½¿ç”¨ä¸åŒå­¦ä¹ ç®—æ³•å¾—åˆ°çš„ä¸åŒçš„æ¨¡å‹ï¼Œå‚è€ƒå‘¨å¿—å-ã€Šæœºå™¨å­¦ä¹ ã€‹ä»£ç </p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0pyfbbnpuj20xa0letah.jpg" alt="image-20220328221446409" /></p><p>å¯ä»¥çœ‹å‡ºï¼Œå…¶ä¸­çš„æ¬¡çº§å­¦ä¹ ç®—æ³•å¯ä»¥çœ‹å‡ºæ˜¯ä¸€ç§è‡ªé€‚åº”adaptiveçš„æƒé‡è°ƒæ•´æ–¹æ³•ï¼ŒåŒæ—¶è¿™ç§æƒé‡æ˜¯é€šè¿‡ä¸€ä¸ªå­¦ä¹ å™¨æ¥è®­ç»ƒå¾—åˆ°çš„ï¼ŒæŠ›å¼ƒå…¶ä¸­çš„æ•°å­¦åŸç†ä¸è°ˆï¼Œè¿™é‡Œå¸¸ç”¨çš„åŒ…æ‹¬å¤šå“åº”çº¿æ€§å›å½’Multi- response Linear regressionå’Œè´å¶æ–¯æ¨¡å‹å¹³å‡Bayes Model AVeraging BMAç­‰æ•ˆæœè¾ƒå¥½</p><h2 id="0x04-é›†æˆå­¦ä¹ -ç‰¹æ®Šçš„æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#0x04-é›†æˆå­¦ä¹ -ç‰¹æ®Šçš„æ¦‚å¿µ"></a> 0x04 é›†æˆå­¦ä¹ -- ç‰¹æ®Šçš„æ¦‚å¿µ</h2><p>åœ¨é›†æˆå­¦ä¹ ä¸­æœ€æ™¦æ¶©çš„å°±æ˜¯boostingå’Œbaggingï¼ˆbootstrap aggregatingï¼‰ä¸¤ç§æ–¹æ³•</p><h3 id="41-baggingæœ‰æ”¾å›ç§°ä¸ºbagging-æ— æ”¾å›çš„ç§°ä¸ºpasting"><a class="markdownIt-Anchor" href="#41-baggingæœ‰æ”¾å›ç§°ä¸ºbagging-æ— æ”¾å›çš„ç§°ä¸ºpasting"></a> 4.1 baggingï¼ˆæœ‰æ”¾å›ç§°ä¸ºbaggingã€æ— æ”¾å›çš„ç§°ä¸ºpastingï¼‰</h3><p>åŒæ ·æ˜¯æ ¹æ®å¸Œæœ›çš„å¾—åˆ°ä¸åŒåŸºè®­ç»ƒæ¨¡å‹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹ç›¸åŒçš„å­¦ä¹ å™¨æ¥èµ‹äºˆä¸åŒçš„è®­ç»ƒé›†æ¥å¾—åˆ°ä¸åŒçš„æ¨¡å‹ï¼Œä½†æ˜¯ç”±äºæ•°æ®é›†æ˜¯æœ‰é™çš„ï¼Œå› æ­¤å¦‚æœæ•°æ®é›†å®Œå…¨éš”ç¦»å¼€ï¼Œè¿™æ ·è®­ç»ƒå¾—åˆ°çš„å­¦ä¹ å™¨å¿…ç„¶æ˜¯ä¸å¥½çš„ï¼ˆæˆ–è€…è¯´æ˜¯ä¸å¤Ÿå¥½çš„ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å°½å¯èƒ½çš„å¥½çš„å¾—åˆ°ç‹¬ç«‹åŒæ—¶æ•ˆæœä¹Ÿå¥½çš„å­¦ä¹ æ¨¡å‹ï¼Œ<a href="https://blog.tjdata.site/2022/02/25/Andrew%20Wu-%E7%95%AA%E5%A4%9602-%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E5%AE%9E%E9%AA%8C%E8%AE%BE%E8%AE%A1/">å¯ä»¥å‚è€ƒä¹‹å‰å¯¹æ¨¡å‹è¯„ä¼°</a>ä¸­çš„æ ·æœ¬çš„è‡ªåŠ©æ³•é€‰æ‹©ï¼ˆbootstrap samplingï¼‰æ¥å¾—åˆ°ç›¸äº’ç‹¬ç«‹æ•°æ®é›†å¾—åˆ°çš„ä¸åŒå­¦ä¹ æ¨¡å‹ï¼›åœ¨æ­¤åŸºç¡€ä¸Šå¾—åˆ°çš„ç»“æœå¯ä»¥ä½¿ç”¨<strong>ç®€å•å¹³å‡ç­–ç•¥</strong>æˆ–è€…<strong>ç®€å•æŠ•ç¥¨</strong>æ¥å¾—åˆ°æœ€ç»ˆçš„ç»“æœ</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0pyph23t9j20qw0dajsg.jpg" alt="image-20220328222435680" /></p><p>ä»bias=varianceçš„è§’åº¦æ¥çœ‹ï¼Œbaggingä¸»è¦é›†ä¸­åœ¨é™ä½æ–¹å·®</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0pzyg3jzvj20k50f075d.jpg" alt="bagging" /></p><h3 id="42-boosting"><a class="markdownIt-Anchor" href="#42-boosting"></a> 4.2 boosting</h3><p>æ˜¯ä¸€ç±»å¯ä»¥å°†å¼±å­¦ä¹ å™¨æå‡ä¸ºå¼ºå­¦ä¹ å™¨çš„ç®—æ³•ï¼Œè¿™ç§ç®—æ³•çš„å·¥ä½œæœºåˆ¶ç±»ä¼¼ï¼šå…ˆä»åˆå§‹è®­ç»ƒé›†è®­ç»ƒå¾—åˆ°ä¸€ä¸ªåŸºå­¦ä¹ å™¨ï¼Œå†æ ¹æ®åŸºå­¦ä¹ å™¨çš„è¡¨ç°å¯¹è®­ç»ƒæ ·æœ¬åˆ†å¸ƒè¿›è¡Œè°ƒæ•´ï¼Œä½¿å¾—å…ˆå‰åŸºå­¦ä¹ å™¨åšé”™çš„è®­ç»ƒæ ·æœ¬å†åç»­å—åˆ°è·Ÿå¤šå…³æ³¨ï¼Œç„¶ååŸºäºè°ƒæ•´åçš„æ ·æœ¬åˆ†å¸ƒæ˜¯çš„å…ˆå‰åŸºå­¦ä¹ å™¨åšé”™çš„è®­ç»ƒæ ·æœ¬å†åç»­æ”¶åˆ°æ›´å¤šçš„å…³æ³¨ï¼Œç„¶åä½¿ç”¨åŸºäºè°ƒæ•´åçš„æ ·æœ¬åˆ†å¸ƒæ¥è®­ç»ƒä¸‹ä¸€ä¸ªåŸºå­¦ä¹ å™¨ï¼Œå¦‚æ­¤é‡å¤è¿›è¡Œï¼Œç›´åˆ°åŸºå­¦ä¹ å™¨æ•°ç›®è¾¾åˆ°æ¥äº‹å…ˆåˆ¶å®šçš„å€¼ï¼Œæœ€ç»ˆå°†è¿™äº›åŸºå­¦ä¹ å™¨è¿›è¡ŒåŠ æƒç»“åˆ</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0pyyrf6zhj218a0ksact.jpg" alt="image-20220328223330564" /></p><p>ä»bias- varianceçš„è§’åº¦æ¥çœ‹ï¼Œboostingä¸»è¦é›†ä¸­åœ¨é™ä½åå·®</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0pzyl1pkaj20nf0cl405.jpg" alt="boosting" /></p><p>ï¼ˆè¿™é‡Œæ„Ÿè§‰ä¹¦ä¸Šè®²çš„è¿˜æ˜¯æ¯”è¾ƒæ¨¡ç³Šçš„ï¼Œä¸»è¦åœ¨åé¢çš„å®é™…ä¾‹å­ä¸­çœ‹ï¼‰</p><h3 id="43-baggingå’Œboostingçš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#43-baggingå’Œboostingçš„åŒºåˆ«"></a> 4.3 baggingå’Œboostingçš„åŒºåˆ«</h3><ol><li>ä»æ ·æœ¬é€‰æ‹©è§’åº¦</li><li>ä»æ ·æœ¬çš„æƒé‡</li><li>ä»é¢„æµ‹å‡½æ•°çš„æƒé‡</li><li>ä»è®¡ç®—çš„è§’åº¦</li></ol><h2 id="0x05-å®é™…ä¾‹å­"><a class="markdownIt-Anchor" href="#0x05-å®é™…ä¾‹å­"></a> 0x05 å®é™…ä¾‹å­</h2><h3 id="51-æŠ•ç¥¨æ³•"><a class="markdownIt-Anchor" href="#51-æŠ•ç¥¨æ³•"></a> 5.1 æŠ•ç¥¨æ³•</h3><p>ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ä¾‹å­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">## é›†æˆå­¦ä¹ éœ€è¦å¾—åˆ°çš„æ˜¯ä¸ç›¸å…³çš„é¢„æµ‹å™¨</span><br><span class="hljs-comment"># å¯ä»¥ä½¿ç”¨ä¸åŒçš„å­¦ä¹ å™¨</span><br><span class="hljs-comment"># å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ•°æ®æ¥è®­ç»ƒå¾—åˆ°ä¸åŒçš„å­¦ä¹ å™¨</span><br><span class="hljs-comment"># ä¸€äº›ç‰¹æ®Šçš„æ–¹æ³•baggingå’Œboosting</span><br><span class="hljs-comment">#%%</span><br><span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> make_moons<br><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split<br>x,y=make_moons(n_samples=<span class="hljs-number">100</span>,noise=<span class="hljs-number">0.25</span>)<br>x_train,x_val,y_train,y_val=train_test_split(x,y,test_size=<span class="hljs-number">0.2</span>)<br><span class="hljs-comment">#%%</span><br><span class="hljs-comment">## vote</span><br><span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> RandomForestClassifier<br><span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> VotingClassifier<br><span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression<br><span class="hljs-keyword">from</span> sklearn.svm <span class="hljs-keyword">import</span> SVC<br><br><span class="hljs-comment">#%%</span><br>lr_clf=LogisticRegression()<br>rnd_clf=RandomForestClassifier()<br>svm_clf=SVC()<br><span class="hljs-comment">#%%</span><br>voting_clf=VotingClassifier(estimators=[(<span class="hljs-string">&#x27;lr&#x27;</span>,lr_clf),(<span class="hljs-string">&#x27;rf&#x27;</span>,rnd_clf),(<span class="hljs-string">&#x27;svc&#x27;</span>,svm_clf),],voting=<span class="hljs-string">&#x27;hard&#x27;</span>)<br><span class="hljs-comment">#%%</span><br>voting_clf.fit(x_train,y_train)<br><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score<br><span class="hljs-keyword">for</span> clf <span class="hljs-keyword">in</span> (lr_clf,rnd_clf,svm_clf,voting_clf):<br>    clf.fit(x_train,y_train)<br>    y_pred=clf.predict(x_val)<br>    <span class="hljs-built_in">print</span>(accuracy_score(y_val,y_pred))<br></code></pre></td></tr></table></figure><h3 id="52-éšæœºæ£®æ—-random-forestbased-on-bagging"><a class="markdownIt-Anchor" href="#52-éšæœºæ£®æ—-random-forestbased-on-bagging"></a> 5.2 éšæœºæ£®æ— random forestï¼ˆbased on baggingï¼‰</h3><p>éšæœºæ£®æ—å°±æ˜¯ä½¿ç”¨è®¸å¤šä¸ªå†³ç­–æ ‘æ¥é›†æˆå¾—åˆ°æœ€ç»ˆçš„ç»“æœï¼Œè®ºæ–‡æœ€æ—©å‘å¸ƒä¸1997å¹´çš„å¦‚ä¸‹ï¼Œä»–æ˜¯å¦‚ä½•å°†æœ‰æ”¾å›çš„æŠ½æ ·åº”ç”¨åˆ°å†³ç­–æ ‘CARTä¸­çš„å‘¢ï¼Ÿï¼ˆè¿™æˆ–è®¸æ˜¯éšæœºæ£®æ—å­¦ä¹ çš„é‡ç‚¹ï¼‰ï¼Œä»¥åŠå…·ä½“çš„å®è·µæ–¹æ³•ï¼Œå…¶ä¸­çš„æ•°å­¦åŸç†å¯èƒ½æ¯”è¾ƒå›°éš¾</p><p>Paperï¼š<a href="https://link.springer.com/article/10.1023/A:1010933404324">Amit, Y., &amp; Geman, D. (1997). Shape quantization and recognition with randomized trees. <em>Neural computation</em>, <em>9</em>(7), 1545-1588.</a></p><p>API:<a href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html">sklearn.ensemble.RandomForestClassifier</a></p><p>å›é¡¾ä¹‹å‰å…³äºå®ç°<a href="https://blog.tjdata.site/2022/02/20/Andrew-Wu%E5%9F%BA%E6%9C%AC%E6%A8%A1%E5%9E%8B03-%E5%86%B3%E7%AD%96%E6%A0%91CART/">å†³ç­–æ ‘æ¨¡å‹çš„è¿‡ç¨‹</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„è¿‡ç¨‹ï¼Œä¸€ç§é‡‡ç”¨é€’å½’æ€æƒ³çš„ç®—æ³•ï¼Œåœ¨ä¸è€ƒè™‘æœ€ç»ˆåœæ­¢çš„æ¡ä»¶ï¼Œå®ƒæ€»æ˜¯ä»ç°æœ‰çš„ç‰¹å¾é›†ä¸­é€‰æ‹©æœ€å¥½çš„ç‰¹å¾æ¥è¿›è¡Œæ¨¡å‹çš„åˆ†å‰²ï¼Œç„¶ååˆ é™¤è¿™ä¸ªç‰¹å¾è¿›è¡Œä¸‹ä¸€æ¬¡é€’å½’ï¼Œé‚£ä¹ˆéšæœºæ£®æ—åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åšäº†ä»€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ</p><ol><li>æ ·æœ¬çš„è§’åº¦ï¼Œåœ¨è®­ç»ƒå†³ç­–æ ‘ä¸­å¹¶ä¸é€‰æ‹©æ‰€æœ‰çš„æ ·æœ¬è®­ç»ƒï¼Œåˆ©ç”¨bootstrapçš„æ–¹æ³•æ¥æœ‰æ”¾å›çš„æŠ½å–æ•°æ®é›†æ¥è®­ç»ƒä¸åŒçš„å†³ç­–æ ‘ï¼ˆdecision treeï¼‰</li><li>ç‰¹å¾çš„è§’åº¦ï¼Œä¼ ç»Ÿçš„decision treeç”±ä¸Šè¿°çš„æè¿°å¯ä»¥çœ‹å‡ºå®ƒå®é™…ä¸Šæ˜¯ä¸€ç§æ²¡æœ‰æ”¾å›æŠ½æ ·ï¼ˆwhyï¼Ÿï¼‰ï¼Œé‚£ä¹ˆéšæœºæ£®æ—çš„æ”¹è¿›å°±æ˜¯æ¯æ¬¡ä¸åˆ é™¤ç‰¹å¾é›†ï¼Œè€Œæ˜¯éšæœºé€‰æ‹©ä¸€å®šå±æ€§çš„ç‰¹å¾ï¼ˆæ¯”å¦‚åŸå§‹ç‰¹å¾é›†çš„10%ï¼‰æ¥é€‰æ‹©å…¶ä¸­æœ€ä½³çš„ç‰¹å¾æ¥è¿›è¡Œæ¨¡å‹çš„åˆ†å‰²ä¸€ç›´åˆ°ä¸èƒ½å†åˆ†è£‚ä¸ºæ­¢</li></ol><p>æ¨¡å‹çš„ä¼˜ç‚¹</p><ol><li>æœ‰å¯ä»¥åšå‡ºé«˜çº¬åº¦çš„æ•°æ®ã€å¹¶ä¸”ä¸ç”¨é™çº¬ï¼Œä¸éœ€è¦åšç‰¹å¾é€‰æ‹©</li><li>å¯ä»¥åˆ¤æ–­ç‰¹å¾çš„é‡è¦ç¨‹åº¦ã€ç‰¹å¾ä¹‹é—´çš„ç›¸äº’å½±å“</li><li>è®­ç»ƒé€Ÿåº¦å¯ä»¥å¾ˆå¿«ï¼Œåšæˆä¸€ç§å¹¶è¡Œå¤„ç†çš„æ–¹æ³•</li><li>å¯¹äºä¸å‡è¡¡çš„æ•°æ®å¯ä»¥å¹³è¡¡è¯¯å·®</li></ol><p>æ¨¡å‹çš„ç¼ºç‚¹</p><ol><li>è¢«è¯æ˜åœ¨æŸäº›noiseæ¯”è¾ƒå¤§çš„åˆ†ç±»æˆ–å›å½’é—®é¢˜ä¸­ä¼šäº§ç”Ÿè¿‡æ‹Ÿåˆ</li><li>å¯¹äºä¸åŒå–ä¹‹çš„å±æ€§çš„æ•°æ®ï¼Œå–å€¼åˆ’åˆ†è¾ƒå¤šçš„å±æ€§ä¼šå¯¹éšæœºæ£®æ—äº§ç”Ÿæ›´å¤§çš„å½±å“ï¼Œæ‰€ä»¥éšæœºæ£®æ—åœ¨è¿™ç§æ•°æ®ä¸Šäº§ç”Ÿçš„å±æ€§æƒé‡æ˜¯ä¸å¯ä¿¡çš„</li></ol><h3 id="53-adaboostbased-on-boostingshort-for-adaptive-boosting"><a class="markdownIt-Anchor" href="#53-adaboostbased-on-boostingshort-for-adaptive-boosting"></a> 5.3 Adaboostï¼ˆbased on boostingï¼Œshort for adaptive boostingï¼‰</h3><p>è‡ªé€‚åº”å¢å¼ºå­¦ä¹ Adaboostæ˜¯å¦‚ä½•å°†boostingçš„æ–¹æ³•ä½¿ç”¨åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­å‘¢ï¼Ÿæ€»çš„æ¥çœ‹å®ƒè€ƒè™‘å¦‚ä½•é€šè¿‡æ›´åŠ è§„åˆ™ï¼ˆè€Œä¸æ˜¯éšæœºï¼‰çš„æ–¹å¼æ¥å¾—åˆ°æ›´åŠ æœ‰æ•ˆçš„åŸºå­¦ä¹ å™¨çš„è®­ç»ƒï¼Œå¹¶é‡‡ç”¨ä¸€å®šçš„ç­–ç•¥æ¥åŠ æƒæ‰€æœ‰çš„é¢„æµ‹</p><p>Paperï¼š<a href="https://www.face-rec.org/algorithms/Boosting-Ensemble/decision-theoretic_generalization.pdf">Freund, Y., &amp; Schapire, R. E. (1997). A decision-theoretic generalization of on-line learning and an application to boosting. <em>Journal of computer and system sciences</em>, <em>55</em>(1), 119-139.</a></p><p>APIï¼š<a href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.AdaBoostClassifier.html">sklearn.ensemble.AdaBoostClassifier</a></p><p>Adaboostçš„ç®—æ³•å¯ä»¥ç®€è¿°ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol><li>åˆå§‹åŒ–æ•°æ®é›†ï¼Œè¿™é‡Œä¿è¯æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ ·æœ¬çš„æ•°æ®çš„æƒé‡æ˜¯ç›¸åŒçš„</li><li>åœ¨ç¬¬Næ¬¡çš„è®­ç»ƒä¸­ï¼Œå¾—åˆ°åŸå§‹æ ‡ç­¾å’Œæ¨¡å‹çš„è¾“å‡ºï¼Œå¦‚æœé¢„æµ‹æ˜¯æ­£ç¡®çš„é‚£ä¹ˆåœ¨ä¸‹ä¸€æ¬¡è®­ç»ƒä¸­éœ€è¦é™ä½å®ƒçš„æƒé‡ã€å¦‚æœé¢„æµ‹æ˜¯é”™è¯¯çš„åˆ™éœ€è¦æå‡å®ƒçš„æƒé‡ï¼Œåœ¨è¿›è¡ŒN+1å­¦ä¹ å™¨çš„è®­ç»ƒ</li><li>åœ¨ç»¼åˆæœ€ç»ˆçš„ç»“æœå°±æ˜¯å¯¹æ¯ä¸ªé˜¶æ®µçš„å­¦ä¹ å™¨è¿›è¡ŒåŠ æƒå¹³å‡ï¼Œå¦‚ä½•åŠ æƒå‘¢ï¼Ÿæ ¹æ®æ­£ç¡®ç‡æ¥åˆ¤æ–­ï¼Œæ­£ç¡®ç‡é«˜çš„æƒé‡å¤§</li></ol><p>æ¨¡å‹çš„ä¼˜ç‚¹ï¼šè¿™é‡Œå‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/41536315">https://zhuanlan.zhihu.com/p/41536315</a></p><ol><li>å¾ˆå¥½çš„åˆ©ç”¨å¼±åˆ†ç±»å™¨è¿›è¡Œçº§è”cascade</li><li>å¯ä»¥å°†ä¸åŒçš„åˆ†ç±»ç®—æ³•ä½œä¸ºå¼±åˆ†ç±»å™¨</li><li>AdaBoostå…·æœ‰å¾ˆé«˜çš„ç²¾åº¦</li><li>å¯ä»¥å……åˆ†è€ƒè™‘æ¯ä¸ªåˆ†ç±»å™¨çš„æƒé‡ï¼ˆä¹Ÿå°±æ˜¯åŠ æƒå¹³å‡ä¸­æƒçš„é€‰æ‹©åˆç†ï¼‰</li></ol><p>æ¨¡å‹çš„ç¼ºç‚¹ï¼š</p><ol><li>æ¨¡å‹çš„è¿­ä»£æ¬¡æ•°ä¸å¥½è®¾è®¡ï¼Œå¯ä»¥ä½¿ç”¨äº¤å‰éªŒè¯æ¥è¿›è¡Œç¡®å®š</li><li>æ•°æ®ä¸å¹³è¡¡å¯¼è‡´åˆ†ç±»ç²¾åº¦ä¸‹é™</li><li>ç”±äºä¸èƒ½å¹¶è¡Œè®­ç»ƒï¼Œå› æ­¤è®¡ç®—æ—¶é—´æ¯”è¾ƒé•¿</li></ol><h3 id="54-gbgradient-boostingbased-on-boosting-and-slightly-bagging"><a class="markdownIt-Anchor" href="#54-gbgradient-boostingbased-on-boosting-and-slightly-bagging"></a> 5.4 GBï¼ˆgradient boostingï¼Œbased on boosting and slightly baggingï¼‰</h3><p>æœ‰ä¸€ç‚¹å¤æ‚2022-03-28è¿˜æ²¡æœ‰å®Œå…¨ææ¸…æ¥šæ¢¯åº¦æå‡ï¼ˆgradient boostingï¼‰ï¼Œå…¶ç®—æ³•å®ç°ä¸»è¦åˆ†ä¸ºXGBoostå’ŒLightGBMï¼Œä»boostingç®—æ³•çš„è§’åº¦æ˜¯å¿…é¡»ä¸²è¡Œè®¡ç®—çš„ï¼Œä½†æ˜¯åœ¨å·¥ç¨‹çš„å®é™…åº”ç”¨ä¸­å¯ä»¥ä½¿ç”¨ä¸€äº›<strong>ç¨€å¥‡å¤æ€ª</strong> çš„æ–¹æ³•æ¥åå¤ä½¿ç”¨å…¶ä¸­çš„ä¸€äº›ä¸œè¥¿æ¥å¹¶è¡Œè®¡ç®—æé«˜è®¡ç®—æ•ˆç‡</p><p>Paperï¼š<a href="http://luthuli.cs.uiuc.edu/~daf/courses/Opt-2017/Papers/2699986.pdf">Friedman, J. H. (2001). Greedy function approximation: a gradient boosting machine. <em>Annals of statistics</em>, 1189-1232.</a></p><p>ä¸€äº›å·¥ä¸šåŒ–çš„å®ç°ï¼š</p><p>lightGBMï¼š<a href="https://proceedings.neurips.cc/paper/2017/file/6449f44a102fde848669bdd9eb6b76fa-Paper.pdf">https://proceedings.neurips.cc/paper/2017/file/6449f44a102fde848669bdd9eb6b76fa-Paper.pdf</a></p><p>XGBoostï¼š<a href="https://www.kdd.org/kdd2016/papers/files/rfp0697-chenAemb.pdf">Chen, T., &amp; Guestrin, C. (2016, August). Xgboost: A scalable tree boosting system. In <em>Proceedings of the 22nd acm sigkdd international conference on knowledge discovery and data mining</em> (pp. 785-794).</a></p><p><strong>å­˜ç–‘</strong>ï¼šGBDTï¼ˆé‡‡ç”¨decision treeä½œä¸ºåŸºå­¦ä¹ å™¨çš„GBç®—æ³•ï¼‰çš„æ ¸å¿ƒæ˜¯å­¦ä¹ ä¹‹å‰æ¯æ£µæ ‘ç»“è®ºå’Œçš„æ®‹å·®ï¼Œè¿™ä¸ªæ®‹å·®å°±æ˜¯ä¸€ä¸ªåŠ é¢„æµ‹å€¼åèƒ½å¾—åˆ°çš„çœŸå®å€¼çš„ç´¯åŠ é‡ï¼Œè¿™é‡Œç›¸æ¯”Adaboostçš„ä¼˜ç‚¹</p><ol><li>ä¸Adaboostç®—æ³•ä¸åŒçš„æ˜¯ï¼Œæ¢¯åº¦æå‡åœ¨è¿­ä»£æ¯ä¸€æ­¥æ„å»ºä¸€ä¸ªèƒ½å¤Ÿæ²¿ç€æ¢¯åº¦æœ€é™¡çš„æ–¹å‘é™ä½æŸå¤±æ¥å¼¥è¡¥ç°æœ‰æ¨¡å‹çš„ä¸è¶³</li><li>ç»å…¸çš„Adaboostçš„ç®—æ³•åªèƒ½é‡‡ç”¨æŒ‡æ•°æŸå¤±å‡½æ•°çš„äºŒåˆ†ç±»å­¦ä¹ ä»»åŠ¡ï¼Œè€Œæ¢¯åº¦æå‡å¯ä»¥é€šè¿‡ä¸åŒçš„å¯å¾®æŸå¤±å‡½æ•°æ¥å¤„ç†å„ç±»å­¦ä¹ ä»»åŠ¡ï¼ˆmulti-classã€regressionã€rankï¼‰</li><li>Adaboostä¸­å¯¹å¼‚å¸¸ç‚¹æ¯”è¾ƒæ•æ„Ÿï¼Œè€Œæ¢¯åº¦æå‡ç®—æ³•é€šè¿‡å¼•å…¥baggingçš„æ€æƒ³ã€æ­£åˆ™åŒ–å¯ä»¥æå‡robust</li></ol>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS229</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-07--è´å¶æ–¯å­¦ä¹ ï¼ˆæš¨åŸºæœ¬ç†è®ºå¼€ç¯‡ï¼‰</title>
    <link href="/posts/6378bc30.html"/>
    <url>/posts/6378bc30.html</url>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="0x00-è®¡ç®—å­¦ä¹ ç†è®ºçš„å¼€ç¯‡"><a class="markdownIt-Anchor" href="#0x00-è®¡ç®—å­¦ä¹ ç†è®ºçš„å¼€ç¯‡"></a> 0x00 è®¡ç®—å­¦ä¹ ç†è®ºçš„å¼€ç¯‡</h2><ul><li>è´å¶æ–¯å­¦ä¹ ï¼Œè´å¶æ–¯æ¨ç†æä¾›æ¥ä¸€ç§æ¨ç†çš„æ¦‚ç‡æ–¹æ³•ï¼ŒåŸºäºå¾…è€ƒå¯Ÿçš„é‡éµå¾ªæŸç§æ¦‚ç‡åˆ†å¸ƒï¼Œä¸”å¯æ ¹æ®è¿™äº›æ¦‚ç‡åŠå·²è§‚å¯Ÿåˆ°çš„æ•°æ®è¿›è¡Œæ¨ç†å¾—åˆ°æœ€ä¼˜çš„å†³ç­–</li><li>é›†æˆå­¦ä¹ ï¼Œä»å¤šä¸ªå¼±å­¦ä¹ å™¨ä¸­å¾—åˆ°ä¸€ä¸ªè¾ƒå¥½çš„å­¦ä¹ å™¨</li><li>è®¡ç®—å­¦ä¹ ç†è®ºï¼Œè‡´åŠ›äºå›ç­”â€œåœ¨ä»€ä¹ˆå…»çš„æ¡ä»¶ä¸‹æˆåŠŸçš„å­¦ä¹ æ˜¯å¯èƒ½çš„ã€‹â€å’Œâ€œåœ¨ ä»€ä¹ˆæ¡ä»¶ä¸‹æŸä¸ªç‰¹å®šçš„å­¦ä¹ ç®—æ³•å¯ä¿è¯æˆåŠŸè¿è¡Œï¼Ÿâ€ï¼Œä»è¿‘ä¼¼æ­£ç¡®ï¼ˆPACï¼‰å’Œå¯¹å‡è®¾ç©ºé—´çš„è‡ªç„¶åº¦é‡ä¸¤ä¸ªè§’åº¦æ¥åˆ†æå­¦ä¹ ç®—æ³•ï¼Œåœ¨å‡ºé”™ç•Œé™çš„æ¡†æ¶ä¸‹è€ƒå¯Ÿä¸€ä¸ªå­¦ä¹ å™¨åœ¨ç¡®å®šæ­£ç¡®å‡è®¾å‰å¯èƒ½äº§ç”Ÿçš„è®­ç»ƒé”™è¯¯æ•°é‡</li><li>åŸºäºå®ä¾‹çš„å­¦ä¹ ï¼Œæ¯å½“å­¦ä¹ å™¨é‡åˆ°ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œé€šè¿‡åˆ†æè¿™ä¸ªä¾‹å­å’Œä¹‹å‰å­˜å‚¨çš„å®ä¾‹å…³ç³»æ¥å°†è¿™ä¸ªç›®æ ‡å‡½æ•°èµ‹å€¼ç»™æ–°çš„å®ä¾‹</li><li>åŸºäºè§£é‡Šçš„å­¦ä¹ ï¼Œå…ˆéªŒçŸ¥è¯†ç”¨äºåˆ†æè§‚å¯Ÿåˆ°çš„å­¦ä¹ æ ·ä¾‹æ˜¯æ€æ ·æ»¡è¶³ç›®æ ‡æ¦‚å¿µçš„ï¼Œç„¶åè¿™ä¸ªè§£é‡Šè¢«ç”¨äºåŒºåˆ†è®­ç»ƒæ ·ä¾‹ä¸­å“ªäº›æ˜¯ç›¸å…³çš„ç‰¹å¾ã€å“ªäº›æ˜¯ä¸ç›¸å…³çš„ï¼Œè¿™æ ·å°±å¯ä»¥åŸºäºé€»è¾‘æ¨ç†è¿›è¡Œæ³›åŒ–ï¼Œè€Œä¸æ˜¯åŸºäºç»Ÿè®¡æ¨ç†</li><li>å¢å¼ºå­¦ä¹ ï¼Œç”¨æ¥ç¡®å®šæœ€ä¼˜æ§åˆ¶ç­–ç•¥</li></ul><h2 id="0x01-è´å¶æ–¯å­¦ä¹ ç®€ä»‹"><a class="markdownIt-Anchor" href="#0x01-è´å¶æ–¯å­¦ä¹ ç®€ä»‹"></a> 0x01 è´å¶æ–¯å­¦ä¹ ç®€ä»‹</h2><p>è´å¶æ–¯å­¦ä¹ å…·æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼šç¬¬ä¸€ï¼Œè´å¶æ–¯å­¦ä¹ ç®—æ³•èƒ½å¤Ÿè®¡ç®—æ˜¾å§‹çš„å‡è®¾æ¦‚ç‡ï¼Œæ¯”å¦‚æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼Œæ˜¯è§£å†³ç›¸åº”å­¦ä¹ é—®é¢˜çš„æœ€å®é™…çš„æ–¹æ³•ä¹‹ä¸€ï¼›ç¬¬äºŒï¼Œä¸ºç†è§£å¤šæ•°å­¦ä¹ ç®—æ³•æä¾›äº†ä¸€ç§æœ‰æ•ˆçš„æ‰‹æ®µï¼Œè¿™äº›ç®—æ³•ä¸ä¸€å®šç›´æ¥æ“çºµæ¦‚ç‡æ•°æ®</p><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œé€šå¸¸æœ€æ„Ÿå…´è¶£æ˜¯åœ¨ç»™å®šè®­ç»ƒæ•°æ®Dçš„æ—¶å€™ï¼Œç¡®å®šå‡è®¾ç©ºé—´Hä¸­æœ€å¯èƒ½çš„å‡è®¾ï¼š</p><blockquote><p>ä½¿ç”¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>h</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">P(h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mclose">)</span></span></span></span> æ¥ä»£è¡¨æ²¡æœ‰è®­ç»ƒæ•°æ®å‰å‡è®¾hæ‹¥æœ‰çš„æ¦‚ç‡ï¼Œé€šå¸¸è¢«ç§°ä¸ºprior probabilityï¼ˆå…ˆéªŒæ¦‚ç‡ï¼‰</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>D</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">P(D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span> ä»£è¡¨å°†è¦è§‚å¯Ÿçš„è®­ç»ƒæ•°æ®Dçš„å…ˆéªŒæ¦‚ç‡ï¼Œä¹Ÿå°±æ˜¯åœ¨æ²¡æœ‰æŸä¸€å‡è®¾æˆç«‹æ—¶Dçš„æ¦‚ç‡</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>h</mi><mi mathvariant="normal">âˆ£</mi><mi>D</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">P(h|D)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span> ä»£è¡¨çš„æ˜¯çœ‹åˆ°è®­ç»ƒæ•°æ®Dåhæˆç«‹çš„ç½®ä¿¡åº¦ï¼Œè¿™é‡Œæ˜¯posterior probabilityï¼ˆåéªŒæ¦‚ç‡ï¼‰</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>h</mi><mi mathvariant="normal">âˆ£</mi><mi>D</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo>(</mo><mi>D</mi><mi mathvariant="normal">âˆ£</mi><mi>h</mi><mo>)</mo><mi>P</mi><mo>(</mo><mi>h</mi><mo>)</mo></mrow><mrow><mi>P</mi><mo>(</mo><mi>D</mi><mo>)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">P(h|D)=\frac{P(D|h)P(h)}{P(D)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.01em;"></span><span class="strut bottom" style="height:1.53em;vertical-align:-0.52em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.34500000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">h</span><span class="mclose">)</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></p><p>æå¤§åéªŒï¼ˆmaximum a posteriorï¼ŒMAPï¼‰ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mi>P</mi><mo>(</mo><mi>D</mi><mi mathvariant="normal">âˆ£</mi><mi>h</mi><mo>)</mo><mi>P</mi><mo>(</mo><mi>h</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">max P(D|h)P(h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">h</span><span class="mclose">)</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">h</span><span class="mclose">)</span></span></span></span></p><p>æå¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆmaximum likelihoodï¼ŒMLEï¼‰ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mi>P</mi><mo>(</mo><mi>D</mi><mi mathvariant="normal">âˆ£</mi><mi>h</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">max P(D|h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">h</span><span class="mclose">)</span></span></span></span></p></blockquote><p>exampleï¼šè€ƒè™‘ä¸€ä¸ªåŒ»ç–—è¯Šæ–­é—®é¢˜ï¼Œè¿™é‡Œæ˜¯hæ˜¯æ˜¯å¦æ‚£æœ‰ç™Œç—‡ï¼Œè¿™é‡Œæ˜¯çš„æ•°æ®æ˜¯æ£€æµ‹ç»“æœæ˜¯æ­£ä¾‹+è¿˜æ˜¯è´Ÿä¾‹-</p><p>æˆ‘ä»¬çŸ¥é“äººç¾¤ä¸­æ‚£æœ‰ç™Œç—‡çš„æ¦‚ç‡æ˜¯0.008ï¼›ä¹Ÿå°±æ˜¯æ²¡æœ‰æ‚£æœ‰ç™Œç—‡çš„æ¦‚ç‡æ˜¯0.992</p><p>åŒæ—¶æˆ‘ä»¬çŸ¥é“å¯¹äºæ‚£æœ‰ç™Œç—‡çš„æ‚£è€…è¿”å›æ£€æµ‹ç»“æœï¼Œ0.98æ˜¯+ã€0.02æ˜¯-</p><p>å¯¹äºæ²¡æœ‰æ‚£æœ‰ç™Œç—‡çš„æ‚£è€…ï¼Œè¿”å›æ£€æµ‹ç»“æœï¼Œ0.03æ˜¯+ï¼Œ0.97-</p><p>å¦‚æœç°åœ¨æ¥äº†ä¸€ä¸ªç—…äººçš„æ£€æµ‹ç»“æœæ˜¯+ï¼Œé‚£ä¹ˆæ‚£æœ‰ç™Œç—‡çš„æ¦‚ç‡æ˜¯å¤šå°‘</p><p>P(h=æ‚£æœ‰ç™Œç—‡ï½œD=æ£€æµ‹ç»“æœ+)=\frac{Pï¼ˆD=+ï½œh=æ‚£æœ‰ç™Œç—‡ï¼‰Pï¼ˆh=æ‚£æœ‰ç™Œç—‡ï¼‰}{pï¼ˆD=+|h=æ‚£ï¼‰pï¼ˆh=æ‚£ï¼‰+pï¼ˆD=+ï½œh=ä¸æ‚£ï¼‰pï¼ˆä¸æ‚£ï¼‰}=0.21</p><p>example02ï½example03:</p><ul><li>çº¿æ€§å›å½’ä¸­æå¤§ä¼¼ç„¶å’Œæœ€å°è¯¯å·®å¹³æ–¹å‡è®¾</li><li>é€»è¾‘å›å½’ä¸­æå¤§ä¼¼ç„¶å’Œäº¤å‰ç†µ</li></ul><h2 id="0x02-è´å¶æ–¯åˆ†ç±»å™¨"><a class="markdownIt-Anchor" href="#0x02-è´å¶æ–¯åˆ†ç±»å™¨"></a> 0x02 è´å¶æ–¯åˆ†ç±»å™¨</h2><p>åŸºäºä¸€ä¸ªç®€å•è€Œåˆå¼ºå¤§çš„å‡è®¾ï¼šåœ¨ç»™å®šç›®æ ‡å€¼äº‹ï¼Œå±æ€§å€¼ä¹‹é—´çš„ç›¸äº’æ¡ä»¶ç‹¬ç«‹ï¼Œè¯¥å‡å®šè¯´æ˜åœ¨ç»™å®šå®ä¾‹çš„ç›®æ ‡å€¼æƒ…å†µä¸‹ï¼Œè§‚å¯Ÿåˆ°çš„è”åˆå±æ€§a1ã€a2ã€a3â€¦ çš„æ¦‚å¿µç­‰äºå•ä¸ªå±æ€§çš„æ¦‚ç‡ä¹˜ç§¯ï¼š</p>Pï¼ˆa_1,a_2,...,a_n|hï¼‰=\prod P(a_i|h)<p>exampleï¼š</p><p>æˆ‘ä»¬æ˜¯æ•°æ®é›†å’ŒçŸ¥é“äº†å…³äºä¸€ä¸ªğŸ‰æ˜¯å¦å¥½åçš„é¢œè‰²å’Œå¤§å°çš„å±æ€§ï¼š</p><p>å¯¹ä¸€ä¸ªçº¢è‰²ï¼Œå¤§çš„ğŸ‰åˆ¤æ–­æ˜¯å¦å¥½åï¼š</p><p>Pï¼ˆå¥½ï¼‰=0.8</p><p>Pï¼ˆåï¼‰=0.2</p><p>Pï¼ˆçº¢è‰²ï½œå¥½ï¼‰=0.8ï¼Œ</p><p>Pï¼ˆçº¢è‰²ï½œåï¼‰=0.1ï¼Œ</p><p>Pï¼ˆå¤§ï½œå¥½ï¼‰=0.9</p><p>Pï¼ˆå¤§ï½œåï¼‰=0.4</p><p>Pï¼ˆå¥½ï¼‰*Pï¼ˆçº¢è‰²ï½œå¥½ï¼‰*Pï¼ˆå¤§ï½œå¥½ï¼‰=0.576</p><p>åŒç†ï¼Œè§‚å¯Ÿåˆ°æ•°æ®ä¸­åçš„å¯èƒ½è¡Œ=0.008</p><p>æ‰€ä»¥ä¸ºå¥½ğŸ‰</p><p>åŠè¿›é˜¶ï¼Œéœ€è¦è€ƒè™‘åˆ°ç‹¬ä¾èµ–ä¼°è®¡ï¼ˆsemi- naive bayes classifiersï¼‰</p><p>è¿›é˜¶ï¼šè´å¶æ–¯ä¿¡å¿µç½‘</p><p>ç•™ä¸ªå‘ï¼šè´å¶æ–¯åˆ†ç±»å™¨çš„æ–‡æœ¬ä¼°è®¡</p><h2 id="0x03-æœŸæœ›æœ€å¤§åŒ–ç®—æ³•em"><a class="markdownIt-Anchor" href="#0x03-æœŸæœ›æœ€å¤§åŒ–ç®—æ³•em"></a> 0x03 æœŸæœ›æœ€å¤§åŒ–ç®—æ³•ï¼ˆEMï¼‰</h2><p>åœ¨è®¨è®ºä¸­ï¼Œä¸€ç›´å‡è®¾è®­ç»ƒæ ·æœ¬æ‰€æœ‰å±æ€§å˜é‡çš„å€¼åº¦å¯ä»¥è¢«è§‚æµ‹åˆ°ï¼Œä½†æ˜¯åœ¨å®é™…ä¸­å¾€å¾€ä¼šé‡åˆ°ç‰¹å¾åªæœ‰ä¸€éƒ¨åˆ†å¯ä»¥è§‚å¯Ÿåˆ°ï¼ŒEMç®—æ³•å¯ä»¥ç”¨äºå˜é‡ä»æ¥æ²¡æœ‰è¢«ç›´æ¥è§‚å¯Ÿåˆ°çš„æƒ…å†µï¼Œåªè¦è¿™äº›å˜é‡æ‰€éµå¾ªçš„æ¦‚ç‡åˆ†å¸ƒçš„ä¸€æ®µå½¢å¼</p><p>exampleï¼šç†è§£EMç®—æ³•å¯ä»¥ä»ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¨å¯¼æ¥å¾—åˆ°ï¼Œå‡è®¾ä¸€ä¸ªæ•°æ®æ˜¯ä»kä¸ªé«˜æ–¯åˆ†å¸ƒæ··åˆè€Œå¾—åˆ°çš„ï¼Œæ³¨æ„è¿™ä¸ªkæœªçŸ¥ï¼Œä½†æ˜¯è¿™ä¸ªkä¸ªé«˜æ–¯åˆ†å¸ƒçš„æ–¹å·®æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sigma ^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>çŸ¥é“ï¼Œç°åœ¨éœ€è¦é¢„æµ‹æ˜¯kä¸ªå‡å€¼<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&lt;</mo><msub><mi>Î¼</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>Î¼</mi><mn>2</mn></msub><mo separator="true">,</mo><mo separator="true">,</mo><mo separator="true">,</mo><msub><mi>Î¼</mi><mi>k</mi></msub><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;\mu_1,\mu_2,,,\mu_k&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.5391em;"></span><span class="strut bottom" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mrel">&lt;</span><span class="mord"><span class="mord mathit">Î¼</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">Î¼</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mpunct">,</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">Î¼</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">&gt;</span></span></span></span>,æˆ‘ä»¬éœ€è¦å…ˆå‡è®¾å‡å€¼çš„å€¼ï¼Œåœ¨é‡æ–°ä¼°è®¡éšè—å˜é‡çš„å€¼æ¥é‡æ–°è®¡ç®—æå¤§ä¼¼ç„¶å‡è®¾</p><p>Step01:å½“å‰çš„å‡è®¾ä¸º<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>&lt;</mo><msub><mi>Î¼</mi><mn>1</mn></msub><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>Î¼</mi><mi>k</mi></msub><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;\mu_1...,\mu_k&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.5391em;"></span><span class="strut bottom" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mrel">&lt;</span><span class="mord"><span class="mord mathit">Î¼</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">Î¼</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">&gt;</span></span></span></span> çš„å€¼ï¼Œè®¡ç®—å±äºæ¯ä¸ªç±»åˆ«çš„æœŸæœ›å€¼</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>(</mo><mi>z</mi><mo>=</mo><mi>k</mi><mi mathvariant="normal">âˆ£</mi><mi>D</mi><mo>)</mo><mo>=</mo><mi>p</mi><mo>(</mo><mi>x</mi><mo>=</mo><msub><mi>x</mi><mi>i</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>Î¼</mi><mo>=</mo><msub><mi>Î¼</mi><mi>i</mi></msub><mo>)</mo><mi mathvariant="normal">/</mi><mi>P</mi><mo>(</mo><mi>x</mi><mo>=</mo><msub><mi>x</mi><mi>i</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">E(z=k|D)=p(x=x_i|\mu=\mu_i)/P(x=x_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathit">Î¼</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">Î¼</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><p>Step02: è®¡ç®—ä¸€ä¸ªæ–°çš„æå¤§ä¼¼ç„¶å‡è®¾ï¼Œè®¡ç®—æ¯ä¸ªç‚¹å±äºæ¯å‘¨ç±»åˆ«çš„æœ€å¤§æ¦‚ç‡æ¥æ›´æ–°å‡å€¼ï¼Œæ¥æ›¿æ¢ç§°ä¸ºæ–°çš„å‡è®¾</p><ul><li>ç†è®ºæ¨å¯¼</li></ul><p>å¯¹äºnä¸ªæ ·æœ¬è§‚å¯Ÿæ•°æ®<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><msup><mi>x</mi><mi>i</mi></msup><msubsup><mo>}</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup></mrow><annotation encoding="application/x-tex">\{x^i\}_{i=1}^m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:1.0833279999999998em;vertical-align:-0.258664em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">}</span><span class="vlist"><span style="top:0.258664em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span> æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ ·æœ¬çš„æ¨¡å‹å‚æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span> æ¥æœ€å¤§å¯¹æ•°ä¼¼ç„¶å‡½æ•°ï¼Œå…¶ä¸­åŒ…å«æ²¡æœ‰è§‚å¯Ÿåˆ°çš„éšå«æ•°æ®Z</p>\bar \theta=argmax \Sigma log p(x^i;\theta)\\\bar \theta=argmax \Sigma log p(x^i,z^i;\theta)\\=\bar \theta=argmax \Sigma log \Sigma_{z^i}\ p(x_i,z^i;\theta)\\=\bar \theta=argmax \Sigma log Q_i(Z^i) \Sigma_{z^i}\ \frac{p(x^i,z^i;\theta)}{Q_i(z^i)}å¼•å…¥ä¸€ä¸ªæ–°çš„åˆ†å¸ƒ\\>=\Sigma\Sigma Q(Z_i) *log\frac{p(x_i,z_i;\theta)}{Q(z_i)}æ ¹æ®Jensenä¸ç­‰å¼<p>æˆ‘ä»¬æœ‰è®¸å¤šçš„é€‰æ‹©ï¼Œä½†æ˜¯è¿™æ ·Jesenä¼šåœ¨åé¢çš„å–å¸¸æ•°çš„æ—¶å€™æ‰‹é“¾</p>\frac{p(x^i,z^i;\theta)}{Q_i(z^i)}=c\\åŒæ—¶\Sigma Q_i(Z^i)=1<p>ç”±æ­¤å¯ä»¥çœ‹å‡º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Q</mi><mi>i</mi></msub><mo>(</mo><msup><mi>z</mi><mi>i</mi></msup><mo>)</mo><mo>=</mo><mi>p</mi><mo>(</mo><msup><mi>x</mi><mi>i</mi></msup><mo separator="true">,</mo><msup><mi>z</mi><mi>i</mi></msup><mo separator="true">;</mo><mi>Î¸</mi><mo>)</mo><mi mathvariant="normal">/</mi><mi mathvariant="normal">Î£</mi><mo>(</mo><mi>p</mi><mo>(</mo><msup><mi>x</mi><mi>i</mi></msup><mo separator="true">,</mo><msup><mi>z</mi><mi>i</mi></msup><mo separator="true">;</mo><mi>Î¸</mi><mo>)</mo><mo>)</mo><mo>=</mo><mi>p</mi><mo>(</mo><msup><mi>z</mi><mi>i</mi></msup><mi mathvariant="normal">âˆ£</mi><msup><mi>x</mi><mi>i</mi></msup><mo separator="true">,</mo><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Q_i(z^i)=p(x^i,z^i;\theta)/\Sigma(p(x^i,z^i;\theta))=p(z^i|x^i,\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8746639999999999em;"></span><span class="strut bottom" style="height:1.1246639999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">;</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathrm">/</span><span class="mord mathrm">Î£</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">;</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></p><p>E: è®¡ç®—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Q</mi><mi>i</mi></msub><mo>(</mo><msup><mi>Z</mi><mi>i</mi></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">Q_i(Z^i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:1.0746639999999998em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><p>M: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>r</mi><mi>g</mi><mi>m</mi><mi>a</mi><mi>x</mi><mi mathvariant="normal">Î£</mi><mi mathvariant="normal">Î£</mi><msub><mi>Q</mi><mi>i</mi></msub><mo>(</mo><msup><mi>Z</mi><mi>i</mi></msup><mo>)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo>(</mo><mi>p</mi><mo>(</mo><msup><mi>x</mi><mi>i</mi></msup><mo separator="true">,</mo><msup><mi>z</mi><mi>i</mi></msup><mo separator="true">;</mo><mi>Î¸</mi><mo>)</mo><mi mathvariant="normal">/</mi><msub><mi>Q</mi><mi>i</mi></msub><mo>(</mo><msup><mi>Z</mi><mi>i</mi></msup><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">argmax\Sigma\Sigma Q_i(Z^i)log(p(x^i,z^i;\theta)/Q_i(Z^i))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.824664em;"></span><span class="strut bottom" style="height:1.0746639999999998em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mord mathrm">Î£</span><span class="mord mathrm">Î£</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.04398em;">z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">;</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit">Q</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p><p><a href="https://chenrudan.github.io/blog/2015/12/02/emexample.html">EMç®—æ³•çš„ä¾‹å­</a></p><p>æ›´å®é™…çš„ä¾‹å­ï¼šå‡è®¾ABç”¨ç›¸åŒçš„æ¦‚ç‡é€‰æ‹©ä¸€ä¸ªç¡¬å¸ï¼Œè¿›è¡Œå®éªŒï¼Œæ¯æ¬¡éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œè¯·é—®å¦‚ä½•ä¼°è®¡ä¸¤ä¸ªç¡¬å¸æ­£é¢å‡ºç°çš„æ¦‚ç‡ï¼Ÿï¼ˆaæƒ…å†µæ˜¯çŸ¥é“é€‰æ‹©ç¡¬å¸Aè¿˜æ˜¯Bï¼›bæƒ…å†µä¸çŸ¥é“é€‰æ‹©ç¡¬å¸Aè¿˜æ˜¯Bï¼‰</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0fmnrydvej20p40sjgpq.jpg" alt="em1" /></p><p>Eï¼šæˆ‘ä»¬å‡è®¾Açš„æ¦‚ç‡æ˜¯0.6ï¼›å‡è®¾Bçš„æ¦‚ç‡æ˜¯0.5ï¼Œè¿™é‡Œä»…ä»…æ˜¯åˆå§‹åŒ–çš„å€¼ï¼ŒåŒæ—¶æ ¹æ®è§‚æµ‹çš„æ•°æ®æ¥è®¡ç®—æœŸæœ›çš„åˆ†å¸ƒ</p>Q_i(Z^i=A)=Pï¼ˆZ=Aï½œy_i,\bar\theta_Aï¼‰=\frac{Pï¼ˆZ=A,y_i|\bar\theta_Aï¼‰P(A)}{Pï¼ˆZ=A,y_i|\bar\theta_Aï¼‰P(A)+Pï¼ˆZ=B,y_i|\bar\theta_Aï¼‰P(B)}\\=[0.45,0.80,0.73,0.35,0.65]<p>Q: å…¶ä¸­çš„Qå‡½æ•°å½¢å¼ä¸º</p>Q(Î¸,Î¸i)=âˆ‘j=1Nâˆ‘zP(z|yj,Î¸i)logP(yj,z|Î¸)=âˆ‘j=1NÎ¼jlog(Î¸yjA(1âˆ’Î¸A)10âˆ’yj)+(1âˆ’Î¼j)log(Î¸yjB(1âˆ’Î¸B)10âˆ’yj)]Q(Î¸,Î¸i)=âˆ‘j=1Nâˆ‘zP(z|yj,Î¸i)logP(yj,z|Î¸)=âˆ‘j=1NÎ¼jlog(Î¸Ayj(1âˆ’Î¸A)10âˆ’yj)+(1âˆ’Î¼j)log(Î¸Byj(1âˆ’Î¸B)10âˆ’yj)] <p>æ±‚å¯¼æ¥å¾—åˆ°æ›´æ–°çš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î¸</mi><mi>A</mi></msub><mo separator="true">,</mo><msub><mi>Î¸</mi><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">\theta_A,\theta_B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">A</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>æ¯”å¦‚æ··åˆé«˜æ–¯æ¨¡å‹GMMã€K-meansèšç±»çš„æ–¹æ³•</p><h2 id="0x04-å¡å°”æ›¼æ»¤æ³¢800px-basic_concept_of_kalman_filteringsvg"><a class="markdownIt-Anchor" href="#0x04-å¡å°”æ›¼æ»¤æ³¢800px-basic_concept_of_kalman_filteringsvg"></a> 0x04 å¡å°”æ›¼æ»¤æ³¢<img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0fn3kit88j20m80b9mxt.jpg" alt="800px-Basic_concept_of_Kalman_filtering.svg" /></h2>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS229</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-04--å¸¸è§æ¨¡å‹æ€»ç»“</title>
    <link href="/posts/61a92f70.html"/>
    <url>/posts/61a92f70.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨æœºå™¨å­¦ä¹ çœ‹åˆ°ä¸€åŠçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºä¹‹å‰å­¦ä¹ çš„å¹¿ä¹‰çº¿æ€§æ¨¡å‹ã€é«˜æ–¯åˆ¤åˆ«åˆ†æã€æ”¯æŒå‘é‡æœºã€å†³ç­–æ ‘ã€å¤šå±‚æ„ŸçŸ¥å™¨è¿›è¡Œé˜¶æ®µæ€§çš„æ€»ç»“ï¼Œå¹¶å°è¯•ä½¿ç”¨è¿‡å»è¯¾ç¨‹ä¸­å¯èƒ½å­˜åœ¨ä¾‹å­æ¥è¿›è¡Œå±•ç¤ºï¼Œæœ€ååˆ©ç”¨Kaggleçš„å®éªŒæ¥è¿›è¡Œå±•ç¤º</p><p>å¦‚æœ‰ä¾µæƒï¼Œå¯ä»¥åˆ é™¤ï¼›å¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æå‡º</p><span id="more"></span><h2 id="0x01åŸºæœ¬æ¨¡å‹"><a class="markdownIt-Anchor" href="#0x01åŸºæœ¬æ¨¡å‹"></a> 0x01åŸºæœ¬æ¨¡å‹</h2><h3 id="11-glmlogistic-regression-linear-regression-softmax-regression"><a class="markdownIt-Anchor" href="#11-glmlogistic-regression-linear-regression-softmax-regression"></a> 1.1 GLMï¼ˆlogistic regressionã€linear regressionã€softmax regressionï¼‰</h3><p><a href="https://blog.tjdata.site/2022/01/29/Andrew-Wu-%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86-%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/">ä¹‹å‰çš„blogï¼Œå…³äºGLM</a></p><blockquote><p>åæ§½ï¼š</p><p>æ˜æ˜æ˜¯discriminateçš„æ¨¡å‹ï¼Œå´å«å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆgenerative linear modelï¼‰ï¼›æ˜æ˜æ˜¯generativeçš„æ¨¡å‹ï¼Œå´å«é«˜æ–¯åˆ¤åˆ«åˆ†æï¼ˆgaussian discriminat analysisï¼‰</p></blockquote><p>å¹¿ä¹‰çº¿æ€§æ¨¡å‹ä¸­çš„æ­¥éª¤æ˜¯ï¼Œå¯¹äºä¸€ç¾¤i.i.dï¼ˆç‹¬ç«‹åŒåˆ†å¸ƒï¼‰çš„æ•°æ®é›†Xï¼Œé€šè¿‡å­¦ä¹ ç®—æ³•å¾—åˆ°ä¸€ä¸ªå…³äºè¾“å‡ºé¢„æµ‹yçš„<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">P(\hat y|X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span>,å†æ¯æ¬¡è¾“å‡ºä¸­å°†æœŸæœ›å€¼ä½œä¸ºæœ€ç»ˆçš„è¾“å‡ºï¼Œä½¿å¾—å…¶çš„æ¦‚ç‡å¯ä»¥æœ€å¤§ã€‚å…¶ä¸­åšå‡ºä¸‰ä¸ªåŸºæœ¬å‡è®¾</p><blockquote><ol><li>Xï½Exponential\ Family(\eta)=b(y)exp(\eta^TT(y)-a(\eta))</li><li>è¾“å‡ºçš„é¢„æµ‹å€¼<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo>=</mo><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mi>E</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\hat y=h_{\theta}(x)=E(y|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span></li><li>ç”±äºæ˜¯çº¿æ€§æ¨¡å‹ï¼Œæœ€å¼ºçš„å‡è®¾æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î·</mi><mo>=</mo><msup><mi>Î¸</mi><mi>T</mi></msup><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">\eta =\theta^T x^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.0824399999999998em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></li></ol></blockquote><p>å¯ä»¥ä»ä¸‰ä¸ªä¾‹å­æ¥çœ‹å‡ºæ¨å¯¼è¿‡ç¨‹ï¼š</p><h4 id="example01é€»è¾‘å›å½’y01psy-11ä¸ä¸€æ ·"><a class="markdownIt-Anchor" href="#example01é€»è¾‘å›å½’y01psy-11ä¸ä¸€æ ·"></a> example01:é€»è¾‘å›å½’ï¼ˆy=ã€Œ0ï¼Œ1ã€,psï¼šy=[-1,1]ä¸ä¸€æ ·ï¼‰</h4><blockquote><p>GLMåˆ†æï¼š</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mi>E</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo separator="true">,</mo><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">h_{\theta}(x)=E(y|x,\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span>,è¿™é‡Œçš„åˆ†å¸ƒå‡è®¾æ˜¯Bernoulliï¼ˆä¼¯åŠªåˆ©åˆ†å¸ƒï¼‰ï¼Œå› æ­¤</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mi>Ï•</mi><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mo>(</mo><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mo>âˆ’</mo><mi>Î·</mi></mrow></msup><mo>)</mo><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mo>(</mo><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mo>âˆ’</mo><msup><mi>Î¸</mi><mi>T</mi></msup><mi>x</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">h_{\theta}(x)=\phi=1/(1+e^{-\eta})=1/(1+e^{-\theta^Tx})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9587649999999999em;"></span><span class="strut bottom" style="height:1.2087649999999999em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">Ï•</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">Î·</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p></blockquote><p>æ•°æ®é›†å’Œå‡è®¾ï¼ˆx^{(i)},y^{(i)}ï¼‰,y\in\{0,1\},h_{\theta}(x)=g(z),g(z)=\frac{1}{1+e^{-z}}</p><p>ç”±æ­¤æ¨å¯¼å¾—åˆ°é¢„æµ‹å€¼çš„è¾“å‡ºçš„æŸå¤±å‡½æ•°:<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo>)</mo><mo>=</mo><mo>âˆ</mo><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><msup><mo>)</mo><mi>y</mi></msup><mo>âˆ—</mo><mo>(</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><msup><mo>)</mo><mrow><mn>1</mn><mo>âˆ’</mo><mi>y</mi></mrow></msup></mrow><annotation encoding="application/x-tex">P(y|x)=\prod h_{\theta}(x)^y*(1-h_{\theta}(x)^{1-y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064118em;vertical-align:-0.25001em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>ä¹‹åä¸ºäº†åˆ©ç”¨æ¢¯åº¦ä¸‹é™Gradient Descentä¸‹é™çš„æ–¹å¼éœ€è¦è®¡ç®—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>l</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>Î¸</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial l}{\partial\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>,åŒæ—¶ä¸ºäº†ç®€ä¾¿è®¡ç®—</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>l</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>Î¸</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>I</mi><mi>n</mi><mo>(</mo><mi>P</mi><mo>)</mo></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>Î¸</mi></mrow></mfrac><mo>=</mo><mi mathvariant="normal">Î£</mi><mo>(</mo><mi>y</mi><mo>âˆ’</mo><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mi mathvariant="normal">.</mi><mo>âˆ—</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\frac{\partial l}{\partial\theta}=\frac{\partial In(P)}{\partial\theta}=\Sigma (y-h_{\theta}(x).*x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.01em;"></span><span class="strut bottom" style="height:1.355em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.01968em;">l</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathrm">Î£</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mord mathrm">.</span><span class="mbin">âˆ—</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span></p><h4 id="example02-çº¿æ€§å›å½’"><a class="markdownIt-Anchor" href="#example02-çº¿æ€§å›å½’"></a> example02: çº¿æ€§å›å½’</h4><blockquote><p>GLMåˆ†æï¼š</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mi>E</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo separator="true">,</mo><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">h_{\theta}(x)=E(y|x,\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span>,è¿™é‡Œçš„åˆ†å¸ƒå‡è®¾æ˜¯é«˜æ–¯åˆ†å¸ƒ</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mi>Ï•</mi><mo>=</mo><mi>Î·</mi><mo>=</mo><msup><mi>Î¸</mi><mi>T</mi></msup><mi>x</mi></mrow><annotation encoding="application/x-tex">h_{\theta}(x)=\phi=\eta=\theta^Tx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8413309999999999em;"></span><span class="strut bottom" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">Ï•</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span></span></span></span></p></blockquote><p>æ•°æ®é›†å’Œå‡è®¾ï¼ˆx^{(i)},y^{(i)}ï¼‰,h_{\theta}(x)=\theta^Tx</p><p>ç”±æ­¤æ¨å¯¼å¾—åˆ°é¢„æµ‹å€¼çš„è¾“å‡ºçš„æŸå¤±å‡½æ•°:<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo>)</mo><mo>=</mo><mi>N</mi><mo>(</mo><msup><mi>Î¸</mi><mi>T</mi></msup><mi>x</mi><mo separator="true">,</mo><msup><mi>Ïƒ</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">P(y|x)=N(\theta^Tx,\sigma^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8413309999999999em;"></span><span class="strut bottom" style="height:1.0913309999999998em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><p>ä¹‹åä¸ºäº†åˆ©ç”¨æ¢¯åº¦ä¸‹é™Gradient Descentä¸‹é™çš„æ–¹å¼éœ€è¦è®¡ç®—<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>Î¸</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial loss}{\partial\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit">s</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>,åŒæ—¶ä¸ºäº†ç®€ä¾¿è®¡ç®—</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mi>n</mi><mo>(</mo><mi>p</mi><mo>)</mo><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><mo>[</mo><mi>I</mi><mi>n</mi><mo>(</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi>Ïƒ</mi><mo>âˆ—</mo><msqrt><mo>(</mo></msqrt><mn>2</mn><mo>âˆ—</mo><mi>Ï€</mi><mo>)</mo></mrow></mfrac><mo>)</mo><mo>+</mo><mo>âˆ’</mo><mfrac><mrow><mo>(</mo><msup><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msup><mo>âˆ’</mo><msub><mi>h</mi><mi>Î¸</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><mo>âˆ—</mo><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac><mo>]</mo></mrow><annotation encoding="application/x-tex">In(p)=\Sigma_{i=1}^m[In(\frac{1}{\sigma*\sqrt(2*\pi)})+-\frac{(\hat y^i-h_\theta(X))^2}{2*\sigma^2}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.06886em;"></span><span class="strut bottom" style="height:1.91886em;vertical-align:-0.8500000000000001em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.258664em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">n</span><span class="mopen">(</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.5700000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="mbin">âˆ—</span><span class="sqrt mord"><span class="sqrt-sign" style="top:0.11428571428571432em;"><span class="style-wrap reset-scriptstyle textstyle uncramped">âˆš</span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1.4285714285714286em;">â€‹</span></span><span class="mopen">(</span></span><span style="top:-0.9714285714285715em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1.4285714285714286em;">â€‹</span></span><span class="reset-scriptstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1.4285714285714286em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">2</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mclose">)</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mord">âˆ’</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">]</span></span></span></span></p><p>ç­‰ä»·äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><mi mathvariant="normal">Î£</mi><mo>âˆ’</mo><mfrac><mrow><mo>(</mo><msup><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msup><mo>âˆ’</mo><msub><mi>h</mi><mi>Î¸</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">loss=\Sigma-\frac{(\hat y^i-h_\theta(X))^2}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.06886em;"></span><span class="strut bottom" style="height:1.41386em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit">s</span><span class="mrel">=</span><span class="mord mathrm">Î£</span><span class="mbin">âˆ’</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15122857142857138em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>Î¸</mi></mrow></mfrac><mo>=</mo><mi mathvariant="normal">Î£</mi><mo>(</mo><mi>y</mi><mo>âˆ’</mo><msub><mi>h</mi><mrow><mi>Î¸</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow></msub><mi mathvariant="normal">.</mi><mo>âˆ—</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\frac{\partial loss}{\partial\theta}=\Sigma(y-h_{\theta(x)}.*x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2353079999999999em;vertical-align:-0.3551999999999999em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit">s</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathrm">Î£</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.18019999999999992em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">.</span><span class="mbin">âˆ—</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span></p><h4 id="example03-softmax-å›å½’"><a class="markdownIt-Anchor" href="#example03-softmax-å›å½’"></a> example03: softmax å›å½’</h4><p>GLMåˆ†æï¼š</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mi>E</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo separator="true">,</mo><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">h_{\theta}(x)=E(y|x,\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span>,è¿™é‡Œæˆ‘ä»¬ä¸çŸ¥é“å…·ä½“çš„æ¦‚ç‡åˆ†å¸ƒæ˜¯ä»€ä¹ˆï¼Œåªèƒ½å‡è®¾æ¯ä¸€ç±»çš„è¾“å‡ºæ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï•</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\phi_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>,å¾—åˆ°æ¦‚ç‡åˆ†å¸ƒå‡½æ•°</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>y</mi><mo separator="true">;</mo><mi>Ï•</mi><mo>)</mo><mo>=</mo><msubsup><mi>Ï•</mi><mn>1</mn><mrow><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mo>=</mo><mn>1</mn></mrow></msubsup><mo>âˆ—</mo><msubsup><mi>Ï•</mi><mn>2</mn><mrow><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mo>=</mo><mn>1</mn></mrow></msubsup><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>âˆ—</mo><msubsup><mi>Ï•</mi><mi>k</mi><mrow><mn>1</mn><mo separator="true">,</mo><mi>y</mi><mo>=</mo><mi>k</mi></mrow></msubsup><mo>=</mo><msubsup><mi>Ï•</mi><mn>1</mn><mrow><mi>T</mi><mo>(</mo><mi>y</mi><msub><mo>)</mo><mn>1</mn></msub></mrow></msubsup><mo>âˆ—</mo><msubsup><mi>Ï•</mi><mn>2</mn><mrow><mi>T</mi><mo>(</mo><mi>y</mi><msub><mo>)</mo><mn>2</mn></msub><mo>âˆ—</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>âˆ—</mo><msubsup><mi>Ï•</mi><mi>k</mi><mrow><mi>T</mi><mo>(</mo><mi>y</mi><msub><mo>)</mo><mi>k</mi></msub></mrow></msubsup></mrow></msubsup><mo>=</mo><mi>b</mi><mo>(</mo><mi>y</mi><mo>)</mo><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><msup><mi>Î·</mi><mi>T</mi></msup><mo>(</mo><mi>y</mi><mo>)</mo><mo>âˆ’</mo><mi>a</mi><mo>(</mo><mi>Î·</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">p(y;\phi)=\phi_1^{1,y=1}*\phi_2^{1,y=1}...*\phi_k^{1,y=k}=\phi_1^{T(y)_1}*\phi_2^{T(y)_2*...*\phi_k^{T(y)_k}}=b(y)exp(\eta^T(y)-a(\eta))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.35384em;"></span><span class="strut bottom" style="height:1.6551479999999998em;vertical-align:-0.3013079999999999em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mpunct">;</span><span class="mord mathit">Ï•</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.266308em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.266308em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.3013079999999999em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span style="top:-0.480908em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.26630799999999993em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span style="top:-0.5198em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.266308em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span style="top:-0.5626599999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.31122857142857135em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span style="top:-0.5945428571428572em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord scriptscriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:0.34963999999999995em;margin-right:0.1em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptscriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">b</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathit">a</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p><p>ç»è¿‡åŒ–ç®€å¯ä»¥å¾—åˆ°</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î·</mi><mo>=</mo><mo>[</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo>(</mo><msub><mi>Ï•</mi><mn>1</mn></msub><mi mathvariant="normal">/</mi><msub><mi>Ï•</mi><mi>k</mi></msub><mo>)</mo><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo>(</mo><msub><mi>Ï•</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mi mathvariant="normal">/</mi><mi>l</mi><mi>o</mi><mi>g</mi><mo>(</mo><msub><mi>Ï•</mi><mi>k</mi></msub><mo>)</mo><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\eta=[log(\phi_1/\phi_k),...,log(\phi_{k-1}/log(\phi_k))]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="mrel">=</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></p><p>åŒæ—¶</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Î£</mi><msub><mi>Ï•</mi><mi>j</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\Sigma \phi_j=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">Î£</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span></p><p>å¯ä»¥å¾—åˆ°</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï•</mi><mi>k</mi></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi mathvariant="normal">Î£</mi><msup><mi>e</mi><mrow><msub><mi>Î·</mi><mi>i</mi></msub></mrow></msup><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi mathvariant="normal">Î£</mi><msup><mi>e</mi><mrow><msubsup><mi>Î¸</mi><mi>i</mi><mi>T</mi></msubsup><mi>x</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\phi_k=1/\Sigma e^{\eta_i}=1/\Sigma e^{\theta^T_i x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9587649999999999em;"></span><span class="strut bottom" style="height:1.2087649999999999em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathrm">Î£</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathrm">Î£</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.26808571428571426em;margin-left:-0.02778em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>å› æ­¤å¯¹äº</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Ï•</mi><mi>i</mi></msub><mo>=</mo><msup><mi>e</mi><mrow><msub><mi>Î·</mi><mi>i</mi></msub></mrow></msup><mi mathvariant="normal">/</mi><mi mathvariant="normal">Î£</mi><mo>(</mo><msup><mi>e</mi><mrow><msub><mi>Î·</mi><mi>j</mi></msub></mrow></msup><mo>)</mo><mo>=</mo><msup><mi>e</mi><mrow><msubsup><mi>Î¸</mi><mi>i</mi><mi>T</mi></msubsup><mi>x</mi></mrow></msup><mi mathvariant="normal">/</mi><mi mathvariant="normal">Î£</mi><mo>(</mo><msup><mi>e</mi><mrow><msubsup><mi>Î¸</mi><mi>j</mi><mi>T</mi></msubsup><mi>x</mi></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">\phi_i=e^{\eta_i}/\Sigma(e^{\eta_j})=e^{\theta^T_ix}/\Sigma(e^{\theta_j^T x})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9883949999999999em;"></span><span class="strut bottom" style="height:1.238395em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">/</span><span class="mord mathrm">Î£</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="vlist"><span style="top:0.15000000000000002em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.26808571428571426em;margin-left:-0.02778em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit">i</span></span></span><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">/</span><span class="mord mathrm">Î£</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:-0.39263em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.26808571428571426em;margin-left:-0.02778em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><p>åœ¨å¾—åˆ°åˆ†å¸ƒå‡½æ•°çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¡ç®—æœŸæœ›å€¼</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mrow><mi>Î¸</mi></mrow></msub><mo>(</mo><mi>x</mi><mo>)</mo><mo>=</mo><mi>E</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo separator="true">;</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><mo>[</mo><msub><mi>Ï•</mi><mn>1</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>Ï•</mi><mrow><mi>k</mi><mo>âˆ’</mo><mn>1</mn></mrow></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">h_{\theta}(x)=E(y|x;\theta)=[\phi_1,...,\phi_{k-1}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mpunct">;</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mopen">[</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">]</span></span></span></span></p><p>æŸå¤±å‡½æ•°å°±æ˜¯æˆ‘ä»¬æœ€åˆå®šä¹‰çš„ï¼š</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>s</mi><mi>s</mi><mo>=</mo><msubsup><mi>Ï•</mi><mn>1</mn><mrow><mi>T</mi><mo>(</mo><mi>y</mi><msub><mo>)</mo><mn>1</mn></msub></mrow></msubsup><mo>âˆ—</mo><msubsup><mi>Ï•</mi><mn>2</mn><mrow><mi>T</mi><mo>(</mo><mi>y</mi><msub><mo>)</mo><mn>2</mn></msub><mo>âˆ—</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>âˆ—</mo><msubsup><mi>Ï•</mi><mi>k</mi><mrow><mi>T</mi><mo>(</mo><mi>y</mi><msub><mo>)</mo><mi>k</mi></msub></mrow></msubsup></mrow></msubsup></mrow><annotation encoding="application/x-tex">loss=\phi_1^{T(y)_1}*\phi_2^{T(y)_2*...*\phi_k^{T(y)_k}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.35384em;"></span><span class="strut bottom" style="height:1.620148em;vertical-align:-0.266308em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit">s</span><span class="mord mathit">s</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.26630799999999993em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">1</span></span></span><span style="top:-0.5198em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.266308em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathrm">2</span></span></span><span style="top:-0.5626599999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit">Ï•</span><span class="vlist"><span style="top:0.31122857142857135em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span style="top:-0.5945428571428572em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord scriptscriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:0.34963999999999995em;margin-right:0.1em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptscriptstyle scriptscriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><h3 id="12-gdagaussian-discriminat-analysis"><a class="markdownIt-Anchor" href="#12-gdagaussian-discriminat-analysis"></a> 1.2 GDAï¼ˆGaussian Discriminat  Analysisï¼‰</h3><p>ä¸åˆ¤åˆ«å¼æ¨¡å‹ï¼ˆGLMï¼‰æƒ³æ¯”è¾ƒ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p(y|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span>ï¼Œç”Ÿæˆå¼æ¨¡å‹generativeç”¨äºç”Ÿæˆ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>y</mi><mo>)</mo><mi>p</mi><mo>(</mo><mi>y</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p(x|y)p(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span>æ¥å¯¹æ¯ä¸€ç§ç±»åˆ«å»ºæ¨¡ï¼Œå¯»æ‰¾æ¯ä¸ªç±»åˆ«çš„ç‰¹å¾ï¼Œä¹Ÿå°±æ˜¯æ¯”å¦‚è¾“å‡ºå¤šç§ç±»åˆ«ï¼ŒåŒæ—¶å‡è®¾æ¯ä¸ªç±»åˆ«éƒ½æ˜¯é«˜æ–¯åˆ†å¸ƒï¼Œåˆ™å¯ä»¥è®¡ç®—ä¸¤ä¸ªç±»åˆ«çš„é«˜æ–¯åˆ†å¸ƒå‚æ•°ï¼Œè¿™æ ·åœ¨å¾—åˆ°è¾“å…¥å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ†å¸ƒå‡½æ•°æ¥å¾—åˆ°è¾“å‡º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>y</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mo>(</mo><mn>2</mn><mo>âˆ—</mo><mi>Ï€</mi><msup><mo>)</mo><mrow><mi>n</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo>âˆ—</mo><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">Î£</mi><msup><mi mathvariant="normal">âˆ£</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup></mrow></mfrac><mo>âˆ—</mo><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>âˆ—</mo><mo>(</mo><mi>x</mi><mo>âˆ’</mo><msup><mi>Î¼</mi><mi>T</mi></msup><mo>)</mo><msup><mi mathvariant="normal">Î£</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>(</mo><mi>x</mi><mo>âˆ’</mo><mi>Î¼</mi><mo>)</mo><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">p(x|y)=\frac{1}{(2*\pi)^{n/2}*|\Sigma|^{1/2}}*exp(-1/2*(x-\mu^T)\Sigma^{-1}(x-\mu)))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.2754399999999997em;vertical-align:-0.954em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.704em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mopen">(</span><span class="mord mathrm">2</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathrm">âˆ£</span><span class="mord mathrm">Î£</span><span class="mord"><span class="mord mathrm">âˆ£</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mbin">âˆ—</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span><span class="mbin">âˆ—</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">Î¼</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord">âˆ’</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mbin">âˆ’</span><span class="mord mathit">Î¼</span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p>è®¡ç®—å°±å¥½äº†è›®</p><h3 id="13-svmsupport-vector-machine"><a class="markdownIt-Anchor" href="#13-svmsupport-vector-machine"></a> 1.3 SVM(Support Vector Machine)</h3><p>æ”¯æŒå‘é‡æœºæ˜¯æœ€å¤§è¾¹ç¼˜æ–¹æ³•ï¼Œå…è®¸æŠŠæ¨¡å‹è¡¨ç¤ºä¸ºè®­ç»ƒå®ä¾‹çš„ä¸€ä¸ªå­é›†çš„å½±å“ä¹‹å’Œï¼Œè¿™äº›å½±å“ç”¨é¢å‘åº”ç”¨çš„ç›¸ä¼¼æ€§æ ¸ç»™å‡ºï¼Œé‡‡ç”¨ï¼šä¸è¦åœ¨è§£å†³å®é™…é—®é¢˜ä¹‹å‰æŠŠè§£å†³ä¸€ä¸ªæ›´å¤æ‚çš„é—®é¢˜ä½œä¸ºç¬¬ä¸€æ­¥ï¼›åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¸Œæœ›æ‰¾åˆ°çš„æ˜¯é‚£ä¸ªæœ€ä½³åˆ†ç¦»å¹³é¢hyperplaneï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>w</mi><mi>T</mi></msup><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">w^Tx+b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8413309999999999em;"></span><span class="strut bottom" style="height:0.924661em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">x</span><span class="mbin">+</span><span class="mord mathit">b</span></span></span></span>ä¸­çš„ä¸¤ä¸ªå‚æ•°</p><p>æ¨¡å‹çš„è¾“å…¥æ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo separator="true">,</mo><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>)</mo><mo separator="true">,</mo><mi>y</mi><mo>âˆˆ</mo><mo>{</mo><mo>âˆ’</mo><mn>1</mn><mo separator="true">,</mo><mo>+</mo><mn>1</mn><mo>}</mo></mrow><annotation encoding="application/x-tex">(x^{(i)},y^{(i)}),y\in\{-1,+1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mrel">âˆˆ</span><span class="mopen">{</span><span class="mord">âˆ’</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord">+</span><span class="mord mathrm">1</span><span class="mclose">}</span></span></span></span>,å¸Œæœ›æ‰¾åˆ°çš„æ˜¯å¯ä»¥è®²æ•°æ®é›†å¯ä»¥æ­£ç¡®åŒºåˆ†å¼€çš„å‚æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mtext>Â </mtext><mi>b</mi></mrow><annotation encoding="application/x-tex">w\ b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mspace">Â </span><span class="mord mathit">b</span></span></span></span></p><p>Ps:ä¸ºäº†ç®€å•èµ·è§ï¼Œå¯ä»¥ä»çº¿æ€§å¯åˆ†çš„æƒ…å†µæ¥è°ˆè®ºï¼Œå†æ‹“å±•åˆ°éçº¿æ€§å¯åˆ†çš„æƒ…å†µ</p><img src="/Users/chenxia/Library/Application Support/typora-user-images/image-20220311145620775.png" alt="image-20220311145620775" style="zoom:33%;" /><p>é€šè¿‡å®šä¹‰functional marginå’Œgeometry marginï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹æœ€ç¬¦åˆç›´è§‰çš„æ¨¡å‹ä¸ºï¼š</p>target:max\  \gamma=min[y^{(i)}(w^Tx^{(i)}+b)]\\subject\ to:y^{(i)}(w^Tx^{(i)}+b)>\gamma\\||w||=1<p>ç»è¿‡å‡¸ä¼˜åŒ–ä¸­çš„ç›¸å…³å˜åŒ–ï¼Œä½¿å…¶å˜æˆå¯ä»¥æ±‚è§£çš„å½¢å¼</p>min:\frac{1}{2}||w||^2\\s.t.:y^{(i)}(w^Tx^{(i)}+b)>=1<p>å¯¹äºè¿™ç§ç±»å‹çš„å‡¸ä¼˜åŒ–é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨æ‹‰æ ¼æœ—æ—¥æ–¹æ³•æˆ–è€…å…¶ä»–æ–¹æ³•ç›´æ¥è¿›è¡Œæ±‚è§£ï¼›ä¹Ÿå¯ä»¥å°†å…¶è½¬æ¢ä¸ºå¯¹å¶é—®é¢˜dual problemï¼Œå†åˆ©ç”¨æ‹‰æ ¼æœ—æ—¥ç®—æ³•æˆ–è€…å…¶ä»–æ–¹æ³•æ¥æ±‚è§£ï¼Œâš ï¸æˆ‘ä»¬å¸Œæœ›æ±‚è§£çš„æ˜¯wå’Œbï¼ï¼</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>w</mi><mi mathvariant="normal">âˆ£</mi><msup><mi mathvariant="normal">âˆ£</mi><mn>2</mn></msup><mo>+</mo><msub><mi>Î±</mi><mi>i</mi></msub><mo>(</mo><mn>1</mn><mo>âˆ’</mo><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>(</mo><msup><mi>w</mi><mi>T</mi></msup><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>+</mo><mi>b</mi><mo>)</mo><mo>)</mo><mo>[</mo><mi>Î±</mi><mo>&gt;</mo><mo>=</mo><mn>0</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">L=\frac{1}{2}||w||^2+\alpha_i(1-y^{(i)}(w^Tx^{(i)}+b))[\alpha&gt;=0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.2329999999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord mathit">L</span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathrm">âˆ£</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose">)</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="mrel">&gt;</span><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mclose">]</span></span></span></span></p><p>å¯¹äºè¿™ä¸ªå‡½æ•°æ±‚æå€¼ï¼Œå°±æ˜¯å¸Œæœ›</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>w</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial w}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">L</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>å’Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>b</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8801079999999999em;"></span><span class="strut bottom" style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">b</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">L</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>ç­‰äº0</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>w</mi></mrow></mfrac><mo>=</mo><mi>w</mi><mo>âˆ’</mo><mi mathvariant="normal">Î£</mi><msub><mi>Î±</mi><mi>i</mi></msub><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial w}=w-\Sigma\alpha_iy^{(i)}x^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.2329999999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">L</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mbin">âˆ’</span><span class="mord mathrm">Î£</span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>b</mi></mrow></mfrac><mo>=</mo><mi mathvariant="normal">Î£</mi><msub><mi>Î±</mi><mi>i</mi></msub><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">\frac{\partial L}{\partial b}=\Sigma\alpha_iy^{(i)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.2329999999999999em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">b</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">L</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathrm">Î£</span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>å°†è¿™ä¸ªå¸¦å…¥åˆ°Lä¸­ï¼ŒåŒ–ç®€å¾—åˆ°</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>=</mo><mi mathvariant="normal">Î£</mi><msub><mi>Î±</mi><mi>i</mi></msub><mo>âˆ’</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn><mi mathvariant="normal">Î£</mi><mi mathvariant="normal">Î£</mi><msub><mi>Î±</mi><mi>i</mi></msub><msub><mi>Î±</mi><mi>j</mi></msub><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><msup><mi>y</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msup><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><msup><mi>x</mi><mrow><mo>(</mo><mi>j</mi><mo>)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">L=\Sigma\alpha_i-1/2\Sigma\Sigma\alpha_i\alpha_jy^{(i)}y^{(j)}x^{(i)}x^{(j)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.174108em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord mathit">L</span><span class="mrel">=</span><span class="mord mathrm">Î£</span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathrm">2</span><span class="mord mathrm">Î£</span><span class="mord mathrm">Î£</span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>æ„å»ºå¯¹å¶é—®é¢˜ï¼Œç­‰ä»·äº</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mtext>Â </mtext><mi>L</mi></mrow><annotation encoding="application/x-tex">max\ L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mord mspace">Â </span><span class="mord mathit">L</span></span></span></span></p><p>s.t. \alpha_i>=0\ å¹¶ä¸” \Sigma\alpha_i*y^{(i)}=0</p><p>å…¶ä¸­éœ€è¦æ»¡è¶³KKTæ¡ä»¶ï¼š</p><ol><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î±</mi><mi>i</mi></msub><mo>&gt;</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\alpha_i&gt;=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.79444em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">&gt;</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>(</mo><msup><mi>w</mi><mi>T</mi></msup><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>+</mo><mi>b</mi><mo>)</mo><mo>âˆ’</mo><mn>1</mn><mo>&gt;</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y^{(i)}(w^Tx^{(i)}+b)-1&gt;=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mrel">&gt;</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></li><li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î±</mi><mi>i</mi></msub><mo>(</mo><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>(</mo><msup><mi>w</mi><mi>T</mi></msup><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>+</mo><mi>b</mi><mo>)</mo><mo>âˆ’</mo><mn>1</mn><mo>&gt;</mo><mo>=</mo><mn>0</mn><mo>)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\alpha_i(y^{(i)}(w^Tx^{(i)}+b)-1&gt;=0)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mbin">âˆ’</span><span class="mord mathrm">1</span><span class="mrel">&gt;</span><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></li></ol><p>é€šè¿‡æŸç§ç®—æ³•SMOå¯ä»¥å¾ˆè½»æ¾çš„æ±‚è§£ä¸Šè¿°å¯¹å¶é—®é¢˜ï¼Œå¾—åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î±</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\alpha_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.0037em;">Î±</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.0037em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>å¹¶æ ¹æ®KKTæ¡ä»¶å¯ä»¥ç¡®å®šæ”¯æŒå‘é‡ï¼ˆsupport vectorï¼‰,ç”±æ­¤è®¡ç®—å¾—åˆ°wå’Œbï¼Œè¿™æ ·å°±å¯ä»¥åˆ¤æ–­æ­£ä¾‹è¿˜æ˜¯åä¾‹</p><ul><li>SMOç®—æ³•ï¼Ÿä»¥åæ‰çŸ¥é“å§</li></ul><p>åœ¨çº¿æ€§ä¸å¯åˆ†çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨æ ¸æœºå™¨ï¼ˆkernel functionï¼‰æ¥è¿›è¡Œé‡æ–°åº¦é‡å‘é‡ä¹‹é—´çš„éç›¸ä¼¼æ€§</p><p>åœ¨é—´éš”åˆ’åˆ†ä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®è½¯é—´éš”çš„æ–¹å¼æ¥å…è®¸æœ‰éƒ¨åˆ†å™ªå£°ç‚¹å‘ç”Ÿ</p><p>åŒæ—¶ä¸ºäº†è¿‡æ‹Ÿåˆçš„é£é™©ï¼Œä¾æ—§å¯ä»¥å¢åŠ æ¨¡å‹å¤æ‚ç¨‹åº¦çš„é¡¹ï¼ˆtermï¼‰</p><h3 id="14-cartclassfication-and-regression-tree"><a class="markdownIt-Anchor" href="#14-cartclassfication-and-regression-tree"></a> 1.4 CARTï¼ˆClassfication and regression treeï¼‰</h3><h3 id="15-annartificial-neural-network"><a class="markdownIt-Anchor" href="#15-annartificial-neural-network"></a> 1.5 ANNï¼ˆArtificial Neural Networkï¼‰</h3><p>å¯¹äºæ¯ä¸ªç¥ç»å…ƒåŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯æ¥å—å‰ç«¯çš„æ¿€æ´»æƒé‡ï¼Œå¦å¤–ä¸€æ–¹é¢æ˜¯è‡ªèº«çš„æ¿€æ´»å‡½æ•°çš„é€‰å–</p><p>çº¿æ€§è¿æ¥ï¼šz^i=w^ia^{i-1}+b^i</p><p>æ¿€æ´»è¾“å‡ºï¼ša^i=g(z^i)</p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h05z59kvdrj20yq0de3zc.jpg" alt="image-20220311152827951" style="zoom:33%;" /><p>å‡è®¾å¯¹äºè¿™æ ·çš„ä¸€ä¸ªå‡½æ•°ï¼š</p><p>å‰å‘ä¼ é€’ï¼š</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Z</mi><mn>1</mn></msup><mo>=</mo><msup><mi>W</mi><mn>1</mn></msup><mo>âˆ—</mo><mi>X</mi><mo>+</mo><msup><mi>b</mi><mn>1</mn></msup></mrow><annotation encoding="application/x-tex">Z^1=W^1*X+b^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mbin">+</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mn>1</mn></msup><mo>=</mo><mi>g</mi><mo>(</mo><msup><mi>Z</mi><mn>1</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">A^1=g(Z^1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Z</mi><mn>2</mn></msup><mo>=</mo><msup><mi>W</mi><mn>2</mn></msup><mo>âˆ—</mo><msup><mi>A</mi><mn>1</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">Z^2=W^2*A^1+b^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mn>2</mn></msup><mo>=</mo><mi>g</mi><mo>(</mo><msup><mi>Z</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">A^2=g(Z^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>Z</mi><mn>3</mn></msup><mo>=</mo><msup><mi>W</mi><mn>3</mn></msup><mo>âˆ—</mo><msup><mi>A</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">Z^3=W^3*A^2+b^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">b</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mn>3</mn></msup><mo>=</mo><mi>g</mi><mo>(</mo><msup><mi>Z</mi><mn>3</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">A^3=g(Z^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></p><p>æ¢¯åº¦ä¸‹é™æ¥æ›´æ–°å‚æ•°ï¼š</p><p>psï¼šè§£å†³é—®é¢˜è¦ä»æºå¤´ä¸€æ­¥ä¸€æ­¥è§£å†³</p><p>å¯ä»¥é€‰å–äº¤å‰ç†µä½œä¸ºè¯¯å·®å‡½æ•°</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>=</mo><mo>âˆ’</mo><mo>(</mo><mi>y</mi><mi>l</mi><mi>o</mi><mi>g</mi><mo>(</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo>)</mo><mo>+</mo><mo>(</mo><mn>1</mn><mo>âˆ’</mo><mi>y</mi><mo>)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mo>(</mo><mn>1</mn><mo>âˆ’</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">L=-(ylog(\hat y)+(1-y)log(1-\hat y))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">L</span><span class="mrel">=</span><span class="mord">âˆ’</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mbin">+</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi><mi mathvariant="normal">/</mi><mi mathvariant="normal">âˆ‚</mi><msup><mi>W</mi><mn>3</mn></msup><mo>=</mo><mi mathvariant="normal">âˆ‚</mi><mi>L</mi><mi mathvariant="normal">/</mi><mi mathvariant="normal">âˆ‚</mi><msup><mi>A</mi><mn>3</mn></msup><mo>âˆ—</mo><mi mathvariant="normal">âˆ‚</mi><msup><mi>A</mi><mn>3</mn></msup><mi mathvariant="normal">/</mi><mi mathvariant="normal">âˆ‚</mi><msup><mi>W</mi><mn>3</mn></msup><mo>=</mo><mo>(</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mo>âˆ’</mo><mi>y</mi><mo>)</mo><msup><mi>A</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\partial L/\partial W^3=\partial L/\partial A^3*\partial A^3/\partial W^3=(\hat y-y)A^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">L</span><span class="mord mathrm">/</span><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">L</span><span class="mord mathrm">/</span><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">/</span><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">3</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mopen">(</span><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord"><span class="mord mathit">A</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></p><p>å¾ˆamazingï¼Œåœ¨äºè¾“å‡ºçš„æ¢¯åº¦ä¸‹é™å¯ä»¥å’Œå‰ä¸€ä¸ªèŠ‚ç‚¹çš„æ¿€æ´»æœ‰å…³ï¼Œå¦‚æœä½¿ç”¨å†…å­˜æŠŠè¿™äº›è®°å½•ä¸‹æ¥ï¼Œå¯ä»¥å¤§å¹…åº¦çš„é™ä½è®­ç»ƒçš„æ—¶é—´ï¼ŒåŒæ—¶å¯ä»¥å¹¶è¡Œçš„è®¡ç®—ä¸€äº›å‚æ•°</p><p>åœ¨å®šä¹‰å¥½ä¸€ä¸ªç½‘ç»œç»“æœåªæ˜¯ä¸€ä¸ªåŸºç¡€ï¼Œè¿˜éœ€è¦ç¡®å®šç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°ï¼Œå®šä¹‰å¥½ç½‘ç»œä¸­è®­ç»ƒçš„åŸºæœ¬å‚æ•°åˆå§‹åŒ–ã€å‚æ•°çš„éšæœºé€‰æ‹©ã€ä»¥åŠé‡‡ç”¨æ¯”è¾ƒå¥½çš„ä¼˜åŒ–æ±‚è§£ç®—æ³•</p><p><strong>æ¿€æ´»å‡½æ•°</strong></p><p>softmaxã€tanhã€logisticã€ReLuç­‰ç­‰</p><p><strong>å‚æ•°å½’ä¸€åŒ–</strong></p><p>min-maxå½’ä¸€åŒ–ã€z-scoreã€å‡å€¼æ–¹å·®å½’ä¸€åŒ–</p><p><strong>å‚æ•°åˆå§‹åŒ–</strong></p><p>åœ¨ç½‘ç»œå±‚æ•°å˜å¤šçš„æƒ…å†µä¸‹ï¼Œæ¢¯åº¦ä¼šå‡ºç°çˆ†ç‚¸æˆ–è€…å˜å°çš„æƒ…å†µï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨çš„éšæœºåŒ–åŒ…æ‹¬ï¼šå‡å€¼ã€xvaier initiationã€he initializationã€np.random .randn(shaope)*np.sgrt(1/n[z-1]) simoid ç”¨1æ¯”è¾ƒå¥½ã€reluç”¨2æ¯”è¾ƒå¥½ç­‰ç­‰ä¸çŸ¥åçš„å‚æ•°åˆå§‹åŒ–</p><p><strong>ä¼˜åŒ–æ–¹æ³•</strong></p><p>GDã€SGDã€BGDã€åŠ¨é‡ç®—æ³•ã€Adamã€å¯å‘å¼ç®—æ³•ï¼ˆæ¨¡æ‹Ÿé€€ç«ã€é—ä¼ ç®—æ³•ï¼‰ç­‰ç­‰</p><p><strong>å¸¸è§çš„ç½‘ç»œ</strong></p><ol><li>RBFï¼ˆradial basis functionï¼Œå¾„å‘åŸºç½‘ç»œï¼‰</li><li>ARTï¼ˆadaptive resonance theoryï¼Œè‡ªé€‚åº”è°æŒ¯ç†è®ºï¼‰</li><li>SOMï¼ˆself- organizing map ï¼Œè‡ªç»„ç»‡æ˜ å°„ï¼‰</li><li>CCï¼ˆcascade- correlationï¼Œçº§è”ç›¸å…³ç½‘ç»œï¼‰</li><li>Elamnç½‘ç»œ</li><li>Boltzmannæœº</li></ol><h2 id="0x02å®éªŒ"><a class="markdownIt-Anchor" href="#0x02å®éªŒ"></a> 0x02å®éªŒ</h2><p>ä¸€äº›æ¯”è¾ƒç®€å•çš„codebase</p><p><a href="https://github.com/chenxia31/Mercury/blob/master/summary_AndrewWu/GLM.ipynb">GLM</a></p><p><a href="https://github.com/chenxia31/Mercury/blob/master/summary_AndrewWu/iris_CART.ipynb">å†³ç­–æ ‘CARTåœ¨IRIS</a></p><p><a href="https://github.com/chenxia31/Mercury/blob/master/summary_AndrewWu/mnist_NN.ipynb">tensorflowå®ç°çš„äººå·¥ç¥ç»ç½‘ç»œ</a></p><p><a href="https://github.com/chenxia31/Mercury/blob/master/summary_AndrewWu/supportVM.ipynb">æ”¯æŒå‘é‡æœº</a></p><h2 id="0x03kaggle-titanic"><a class="markdownIt-Anchor" href="#0x03kaggle-titanic"></a> 0x03Kaggle- Titanic</h2><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0692k9zb8j21jc0ecjuk.jpg" alt="image-20220311211139656" /></p><p>è‰ç‡çš„èŠ±äº†ä¸€æ™šä¸Šäº†è§£äº†ä¸€ä¸‹kaggleçš„æµç¨‹ï¼Œæœ‰ç‚¹æ‹‰èƒ¯ï¼Œä¸€ä¸‡å¤š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python">01 æ•°æ®é›†çš„å¯¼å…¥å’ŒåŸºæœ¬ä¿¡æ¯<br>trainæ•°æ®é›†ä¸­åŒ…æ‹¬çš„ç‰¹å¾æœ‰ï¼š PassengerIdï¼šä¹˜å®¢çš„ç¼–å· Survivedï¼šæ˜¯å¦å­˜æ´» Pclassï¼šç¥¨çš„ç±»å‹ï¼Œ<span class="hljs-number">1</span>æ˜¯æœ€å¥½çš„ã€<span class="hljs-number">3</span>æ˜¯æœ€å·®çš„ Name:æ€§å‘½ Sex:å¹´é¾„ Age:å¹´é¾„ SibSp:ç›¸ä¼´çš„å…„å¼Ÿå§å¦¹ä»¥åŠé…å¶ Parchï¼šç›¸ä¼´çš„çˆ¶æ¯æˆ–è€…å­©å­ Tickerï¼šä¹˜å®¢çš„ç¥¨å· Fare:ä¹˜å®¢çš„ç¥¨ä»· Cabinï¼šæœºèˆ±å·ç  Embarkedï¼šä¸‹è½¦åœ°ç‚¹<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br>train_data=pd.read_csv(<span class="hljs-string">&#x27;../titanic/train.csv&#x27;</span>)<br>test_data=pd.read_csv(<span class="hljs-string">&#x27;../titanic/test.csv&#x27;</span>)<br>train_data.head()<br><span class="hljs-comment"># å’Œäº¤é€šæ•°æ®ä¸­ä¸€æ ·æ‹¿åˆ°æ•°æ®éœ€è¦è€ƒè™‘æ•°æ®æ˜¯å¦å­˜åœ¨ç¼ºå¤±ã€å¼‚å¸¸ã€æˆ–è€…æ˜¯é‡å¤ç­‰ç­‰</span><br>train_data.info()<br><span class="hljs-comment"># å¯ä»¥çœ‹å‡ºæ•°æ®ä¸­å­˜åœ¨ç¼ºå¤±çš„ç‰¹å¾åŒ…æ‹¬ï¼šAgeã€Cabinã€Embarked</span><br><span class="hljs-comment">## ç¼ºå¤±å€¼çš„ä¿®è¡¥</span><br><span class="hljs-comment">#Embarked ä¸Šèˆ¹åœ°ç‚¹ä¸­ç¼ºå°‘ä¸¤ä¸ªæ•°ï¼Œå¯¹äºä¹‹åå¹¶æ²¡æœ‰å¤ªå¤§çš„å½±å“ï¼Œå¯ä»¥ä½¿ç”¨ä¼—æ•°è¿›è¡Œä¿®è¡¥</span><br>train_data.Embarked.fillna(value=train_data.Embarked.dropna().mode().values[<span class="hljs-number">0</span>])<br>data_test=test_data.Fare.fillna(value=test_data.Fare.dropna().mean())<br>test_data.loc[:,<span class="hljs-string">&#x27;Fare&#x27;</span>]=data_test<br><span class="hljs-comment"># ä»ç›´è§‰ä¸Šæ¥çœ‹ï¼Œå¹´é¾„å¯¹äºä¹‹åæ˜¯å¦å èˆ¹æœ‰ç›¸å…³çš„å½±å“ï¼Œå› æ­¤åœ¨è¿™é‡Œé€‰æ‹©å¯¹åº”çš„éç©ºç‰¹å¾è¿›è¡Œç»šç»ƒ</span><br>feature_name=[<span class="hljs-string">&#x27;Pclass&#x27;</span>,<span class="hljs-string">&#x27;Sex&#x27;</span>, <span class="hljs-string">&#x27;SibSp&#x27;</span>, <span class="hljs-string">&#x27;Parch&#x27;</span>,<span class="hljs-string">&#x27;Fare&#x27;</span>,<span class="hljs-string">&#x27;Embarked&#x27;</span>,<span class="hljs-string">&#x27;Survived&#x27;</span>]<br><span class="hljs-comment"># cabin çš„æœºåœºç¼ºå¤±å¤ªå¤šï¼Œè¿™é‡Œå°±ä¸ä½œä¸ºè®­ç»ƒæ¥</span><br><span class="hljs-comment"># å¯¹æ€§åˆ«è¿›è¡Œç¼–ç </span><br>train_data_copy=train_data[feature_name]<br><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> LabelEncoder<br>label=LabelEncoder()<br><br>train_data_copy.loc[:,<span class="hljs-string">&#x27;Sex&#x27;</span>]=label.fit_transform(train_data_copy.Sex)<br>train_data_copy.loc[:,<span class="hljs-string">&#x27;Embarked&#x27;</span>]=label.fit_transform(train_data_copy.Embarked)<br><br>test_data.loc[:,<span class="hljs-string">&#x27;Sex&#x27;</span>]=label.fit_transform(test_data.Sex)<br>test_data.loc[:,<span class="hljs-string">&#x27;Embarked&#x27;</span>]=label.fit_transform(test_data.Embarked)<br><span class="hljs-comment">## å°è¯•ä½¿ç”¨SVM</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> sklearn.pipeline <span class="hljs-keyword">import</span> Pipeline<br><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler<br><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> PolynomialFeatures<br><span class="hljs-keyword">from</span> sklearn.svm <span class="hljs-keyword">import</span> LinearSVC<br><br>p_s_c=Pipeline([<br>    (<span class="hljs-string">&#x27;poly_features&#x27;</span>,PolynomialFeatures(degree=<span class="hljs-number">3</span>)),<br>    (<span class="hljs-string">&#x27;scaler&#x27;</span>,StandardScaler()),<br>    (<span class="hljs-string">&#x27;svm_clf&#x27;</span>,LinearSVC(C=<span class="hljs-number">10</span>,loss=<span class="hljs-string">&#x27;hinge&#x27;</span>))<br>])<br>p_s_c.fit(train_data_copy.loc[:,(<span class="hljs-string">&#x27;Pclass&#x27;</span>,<span class="hljs-string">&#x27;Sex&#x27;</span>, <span class="hljs-string">&#x27;SibSp&#x27;</span>, <span class="hljs-string">&#x27;Parch&#x27;</span>,<span class="hljs-string">&#x27;Fare&#x27;</span>,<span class="hljs-string">&#x27;Embarked&#x27;</span>)],train_data_copy.iloc[:,-<span class="hljs-number">1</span>])<br><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score<br>result=p_s_c.predict(test_data.loc[:,(<span class="hljs-string">&#x27;Pclass&#x27;</span>,<span class="hljs-string">&#x27;Sex&#x27;</span>, <span class="hljs-string">&#x27;SibSp&#x27;</span>, <span class="hljs-string">&#x27;Parch&#x27;</span>,<span class="hljs-string">&#x27;Fare&#x27;</span>,<span class="hljs-string">&#x27;Embarked&#x27;</span>)])<br>submisstion=pd.DataFrame(&#123;<br>    <span class="hljs-string">&#x27;PassengerId&#x27;</span>:test_data[<span class="hljs-string">&#x27;PassengerId&#x27;</span>],<br>    <span class="hljs-string">&#x27;Survived&#x27;</span>:result<br>&#125;)<br>submisstion.to_csv(<span class="hljs-string">&#x27;submission.csv&#x27;</span>,index=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS229</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºDjangoçš„ä¸ªäººåšå®¢ç½‘ç«™è®¾è®¡</title>
    <link href="/posts/237951b2.html"/>
    <url>/posts/237951b2.html</url>
    
    <content type="html"><![CDATA[<p>æ–‡æœ¬å¸Œæœ›æ ¹æ®Djangoä½œä¸ºæ¡†æ¶ï¼Œå‰ç«¯åˆ©ç”¨Vueæ¥å®ç°ä¸ªäººåšå®¢ç½‘ç«™çš„å¼€å‘</p><p>ä½œä¸ºä¸€ä¸ªå¤–è¡Œäººçœ‹ä¸“é—¨çš„Djangoçš„ä¹¦æœ¬ä¼šè¢«ä¸€äº›åŸºç¡€çŸ¥è¯†æ‰€æ‹–ç´¯ï¼Œæ¯”å¦‚HTMLä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œç„¶è€ŒæŠ›å»ç»†èŠ‚ï¼Œç”¨è‡ªå·±çš„æ–¹å¼æ¥å®Œæˆä¸€ä¸ªæ¯”è¾ƒéš¾çš„ï¼ˆéš¾åº¦ä¸ä¼šç‰¹åˆ«é«˜ï¼Œä½†æ˜¯åˆä¼šæ¯”å®˜æ–¹æ•™ç¨‹å­¦ä¹ ï¼‰çš„å¤šä¸€äº›ï¼Œè¿™å¯èƒ½æ˜¯æœ¬æ•™ç¨‹çš„æ„ä¹‰åœ¨æ­¤</p><span id="more"></span><h2 id="0x00-åŸºç¡€çŸ¥è¯†"><a class="markdownIt-Anchor" href="#0x00-åŸºç¡€çŸ¥è¯†"></a> 0x00 åŸºç¡€çŸ¥è¯†</h2><p>ç½‘ç«™ä¸Šæ˜¯åç«¯æœåŠ¡å™¨ç”Ÿæˆè§†é¢‘ã€æ–‡å­—ã€å›¾ç‰‡ã€æ•°å­—ç­‰ç­‰æ•°æ®ï¼Œé€šè¿‡HTTPSæˆ–è€…å„ç§ç½‘ç»œé€šä¿¡åè®®æ¥ä¼ é€’åˆ°å‰ç«¯æµè§ˆå™¨ä¸­è¿›è¡Œæ˜¾ç¤ºï¼ˆB-Sæ¡†æ¶ï¼‰ï¼Œè¿™æ¶‰åŠä¸‰ä¸ªæ–¹é¢ï¼š</p><ol><li>æœåŠ¡ç«¯ï¼ˆserverï¼‰éœ€è¦ä»€ä¹ˆé€»è¾‘å¤„ç†ç¨‹åºè¯­è¨€ï¼Ÿéœ€è¦ä»€ä¹ˆæ•°æ®å­˜å‚¨è¯­è¨€ï¼Ÿ</li><li>ä¹‹é—´é€šä¿¡å¦‚ä½•å®‰æ’ï¼Ÿ</li><li>å‰ç«¯æ˜¾ç¤ºçš„æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ</li></ol><p>å¹¸è¿çš„æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬æœ‰ä¸€å¥—æ ‡å‡†ï¼Œå‰ç«¯æ˜¾ç¤ºæ˜¯HTMLï¼ˆhtml+css+jsï¼‰ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæœ‰ä¹Ÿæœ‰ä¸€äº›æ¡†æ¶å¦‚Vueã€Reactæ¥è®²ä¸€äº›æ¼‚äº®çš„æ ¼å¼å›ºå®šåŒ–æ–¹ä¾¿è°ƒç”¨ï¼Œé€šä¿¡ä¸­Djangoä½œä¸ºæ¡†æ¶å·²ç»å¤„ç†å¥½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨å®ƒå°±okäº†ï¼ï¼ŒæœåŠ¡ç«¯é€»è¾‘å¤„ç†ç¨‹åºè¯­è¨€ä¸­pythonã€Cã€Javaç­‰ç­‰éƒ½å¯ä»¥ï¼Œé‡è¦çš„æ˜¯è¦å¤„ç†é€»è¾‘ï¼Œè¿™é‡Œä½¿ç”¨pythonå°±å¥½ï¼Œæ•°æ®ç®¡ç†å¯ä»¥ä½¿ç”¨MySQL</p><p>å…¶ä¸­å†æ‹¿å‡ºDjangoå•ç‹¬è¯´ï¼Œå®ƒä¸ä»…ä»…æœåŠ¡äºç½‘ç»œé€šä¿¡ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©åå°ç½‘ç«™æ¨¡ç‰ˆçš„ç»„ç»‡ã€å¸®åŠ©åˆ©ç”¨pythonè¯­è¨€æ¥æ§åˆ¶æœåŠ¡åº“ï¼ŒåŒæ—¶å°†å‰åç«¯å¼€å‘ä¸­å¤æ‚çš„æ–‡ä»¶å…³ç³»ä½¿ç”¨MVCæ¨¡å¼</p><ol><li>modelï¼šå¤„ç†ä¸æ•°æ®ç›¸å…³çš„ä¸šåŠ¡ï¼ˆäººè¯ï¼šå¯ä»¥ç”¨pythonè¯­è¨€æ¥å¢åˆ æ”¹æŸ¥mysqlï¼Œæ‰€ä»¥ä¸ç”¨å­¦mysqlå…·ä½“è¯­å¥ï¼‰</li><li>templateï¼šå¤„ç†ä¸è¡¨ç°ç›¸å…³çš„å†³å®šï¼ˆä¹Ÿå°±æ˜¯å‰ç«¯çš„ç½‘é¡µæ˜¯å¦‚ä½•æ˜¾ç¤ºçš„ï¼‰</li><li>viewï¼šå­˜å–æ¨¡å‹åŠè°ƒç”¨æ°å½“æ¨¡ç‰ˆçš„ç›¸å…³é€»è¾‘ï¼ˆä¹Ÿå°±æ˜¯ç¨‹åºçš„æœ¬è´¨ï¼Œæ¯”å¦‚å‰ç«¯ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œåç«¯éœ€è¦è¿ç®—ä¸€æ®µç¨‹åºï¼Œæ¥è¿”å›ç»“æœï¼Œè¿™å°±æ˜¯éœ€è¦çš„å·¥ä½œï¼‰</li></ol><p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¸Œæœ›æ­å»ºè‡ªå·±çš„ä¸ªäººåšå®¢ç³»ç»Ÿï¼Œ<a href="https://www.dusaiphoto.com/article/4/">ä¸»è¦å‚è€ƒåˆ«äººçš„æ–‡ç« </a>ï¼Œåˆ†æä¸ªäººåšå®¢çš„é€»è¾‘å…¶å®æ¯”è¾ƒç®€å•ï¼š</p><p>æœåŠ¡ç«¯å­˜å‚¨åšå®¢çš„åŸå§‹æ•°æ®ã€å‰ç«¯ä¸­æ˜¾ç¤ºåšå®¢é¡µé¢ï¼Œä½¿ç”¨viewæ¥å®ç°ä¸€äº›åŠŸèƒ½ï¼Œä½¿ç”¨templateæ¥å®ç°åŸå§‹åšå®¢çš„ç¾è§‚å¹¶åœ¨å‰ç«¯ç”Ÿæˆï¼Œåˆ©ç”¨modelæ¥ä¿å­˜åšå®¢æ•°æ®</p><p>åœ¨ä¸€ä¸ªåšå®¢åº”ç”¨ä¸­ï¼Œéœ€è¦åˆ›å»ºçš„é€»è¾‘åŒ…æ‹¬</p><ul><li>åšå®¢é¦–é¡µã€ç”¨æ¥å±•ç¤ºæœ€è¿‘çš„å‡ é¡¹å†…å®¹</li><li>å†…å®¹è¯¦æƒ…é¡µï¼Œç”¨æ¥è¯¦ç»†å±•ç¤ºæŸé¡¹å†…å®¹</li><li>è¯„è®ºå¤„ç†å™¨ç”¨æ¥å“åº”ä¸ºä¸€é¡¹å†…å®¹æ·»åŠ è¯„è®ºçš„æ“ä½œ</li></ul><p><strong>æ— è®ºåšä»€ä¹ˆï¼Œéƒ½éœ€è¦åœ¨codingä¹‹å‰è®¤æ¸…æ¥šè‡ªå·±æƒ³åšä»€ä¹ˆï¼Œå½“ç„¶è·Ÿç€åˆ«äººçš„æ•™ç¨‹åšä¸ç”¨è€ƒè™‘è¿™äº›</strong></p><p>å¼€å‘ç¯å¢ƒï¼špython3.7+Django 2.2ï¼ˆcentOSï¼‰ï¼Œåˆ©ç”¨condaå®‰è£…ç¯èŠ‚</p><blockquote><p>conda create -n djangoblog python=3.7 // ç”¨æ¥ç”Ÿæˆpythonçš„ç¯èŠ‚ï¼Œ-nåé¢ä»£è¡¨æ˜¯djangoblogåç§°ï¼Œåç»­ä»å¤§ activate djangoblogå°±è¡Œäº†</p><p>conda acticate djangoblog</p><p>Pip install django==2.2</p></blockquote><p>æœ¬æ–‡å€Ÿé‰´äº†å¾ˆå¤šç½‘ä¸Šçš„æ•™ç¨‹ï¼Œè‹¥ä¾µåˆ </p><p><a href="https://www.dusaiphoto.com/article/2/">Djangoæ­å»ºä¸ªäººåšå®¢-æœå¡</a></p><p><a href="https://www.liaoxuefeng.com">å»–é›ªå³°ä¸ªäººç½‘ç«™</a></p><p><a href="https://www.runoob.com">èœé¸Ÿæ•™ç¨‹</a></p><p><a href="https://www.w3school.com.cn">W3School</a></p><p><a href="https://docs.djangoproject.com/zh-hans/4.0/">Djangoæ–‡æ¡£</a></p><h2 id="0x01-ä½¿ç”¨django"><a class="markdownIt-Anchor" href="#0x01-ä½¿ç”¨django"></a> 0x01 ä½¿ç”¨Django</h2><h3 id="11-åˆ›å»ºapp"><a class="markdownIt-Anchor" href="#11-åˆ›å»ºapp"></a> 1.1 åˆ›å»ºAPP</h3><blockquote><p>// cdåˆ°å¯¹åº”çš„ç›®å½•ï¼Œå¹¶æ¿€æ´»å¯¹åº”çš„conda</p><p>django-admin startproject my_blog</p></blockquote><p>ç”±æ­¤åˆ›å»ºçš„ç½‘ç«™æ–‡ä»¶å¤¹(ç”±äºæ˜¯Linuxç³»ç»Ÿæ²¡æœ‰db.sqlite3,å¥‡æ€ª)</p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1gzxwby1ohpj20d407u3yz.jpg" alt="image-20220304154634845" style="zoom: 33%;" /><p>ä¹‹å</p><blockquote><p>cd my_blog</p><p>python <a href="http://manage.py">manage.py</a> runserver 0.0.0.0:80</p><p>// åé¢æ˜¯è®¾ç½®ipåœ°å€å’ŒåŸŸåï¼Œå½“ç„¶å¯ä»¥ä¸è®¾ç½®</p></blockquote><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1gzxwk3mfbaj218i0u0ta3.jpg" alt="image-20220304155424813" style="zoom: 25%;" /><p>ç„¶ååˆ›å»ºAPPï¼Œåœ¨Djangoä¸­æ¯ä¸ªappä»£è¡¨ä¸€ä¸ªåŠŸèƒ½æ¨¡å—ï¼Œå¼€å‘è€…å¯ä»¥å°†ä¸åŒåŠŸèƒ½çš„æ¨¡å—æ”¾åˆ°ä¸åŒçš„appä¸­ï¼Œæ–¹ä¾¿ä»£ç çš„å¤ç”¨ï¼Œappå°±æ˜¯é¡¹ç›®çš„åŸºçŸ³ï¼Œå› æ­¤å¼€å‘åšå®¢çš„ç¬¬ä¸€æ­¥å°±æ˜¯åˆ›å»ºæ–°çš„app</p><blockquote><p>python <a href="http://manage.py">manage.py</a> startapp article</p></blockquote><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1gzxxduquplj20gm0k8mz3.jpg" alt="image-20220304162300428" style="zoom:25%;" /><p>æ¯ä¸ªæ–‡ä»¶å¤¹çš„ç®€å•åŠŸèƒ½ï¼›</p><ul><li>/my_blog/db.sqllite3 æ˜¯è½»é‡çº§çš„æ•°æ®åº“æ–‡ä»¶ï¼›/my_blog/manage.py æ˜¯é¡¹ç›®æ‰§è¡Œæ–‡ä»¶çš„å…¥å£</li><li>/my_blog/article æ˜¯ åˆšåˆ›å»ºçš„appï¼Œç”¨æ¥é˜²æ²»åšå®¢æ–‡ç« ç›¸å…³çš„ä»£ç ï¼Œåå°ç®¡ç†æ–‡ä»¶adminã€æ•°æ®æ¨¡å‹æ–‡ä»¶modelsã€è§†å›¾æ–‡ä»¶viewã€å­˜æ”¾æ•°æ®è¿ç§»æ–‡ä»¶migrations</li><li>/my_blog/my_blog å…¶ä¸­setting.pyåŒ…å«é¡¹ç›®çš„é…ç½®å‚æ•°ï¼Œ<a href="http://urls.py">urls.py</a> åŒ…å«é¡¹ç›®çš„æ ¹è·¯ç”±æ–‡ä»¶</li></ul><p>æ–°å»ºappéœ€è¦åšçš„ç®€å•çš„äº‹æƒ…</p><ol><li><p>æ³¨å†Œapp</p><p>åœ¨settingé‡Œé¢æ·»åŠ å°±è¡Œ</p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1gzxxj57uu3j20mu0bqta8.jpg" alt="image-20220304162805633" style="zoom:25%;" /></li><li><p><a href="http://xn--urls-zf5fz6gh00d552aba17h021y.py">ä¿®æ”¹é¡¹ç›®çš„ä¸­çš„urls.py</a>ï¼Œè¿™é‡Œå°†æ ¹è·¯ç”±è½¬å‘åˆ°appçš„è·¯ç”±ï¼ˆè¿™é‡Œè½¬å‘åˆ°articleçš„urlsï¼‰è¿™é‡Œçš„è·¯ç”±é…ç½®æ¯”è¾ƒå¤æ‚ï¼Œåç»­éœ€è¦æ·±å…¥äº†è§£</p></li></ol><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1gzxyuoihzpj20zm0asac1.jpg" alt="image-20220304171346834" style="zoom:25%;" /><blockquote><p>æ¥çœ‹pathä¸­ç›¸å…³çš„å‚æ•°</p><p>article/ è¡¨ç¤ºappçš„è®¿é—®è·¯å¾„</p><p>include å°†è·¯å¾„åˆ†å‘åˆ°ä¸‹ä¸€æ­¥å¤„ç†</p><p>namespace ä¿è¯åæŸ¥åˆ°å”¯ä¸€çš„url</p></blockquote><ol start="3"><li>ä¿®æ”¹appä¸­çš„urls</li></ol><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs clean"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><br># æ­£åœ¨éƒ¨ç½²çš„åº”ç”¨çš„åç§°<br>app_name = <span class="hljs-string">&#x27;article&#x27;</span><br><br>urlpatterns = [<br>    # ç›®å‰è¿˜æ²¡æœ‰urls<br>]<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæš‚æ—¶è¿˜æ˜¯ç©ºçš„</p><h3 id="12-åˆ›å»ºmodel"><a class="markdownIt-Anchor" href="#12-åˆ›å»ºmodel"></a> 1.2 åˆ›å»ºmodel</h3><p>æ•°æ®åº“çš„åŸºæœ¬æ¦‚å¿µï¼Œæ•°æ®åº“æ˜¯å­˜å‚¨ç”µå­æ–‡ä»¶çš„åœºæ‰€ï¼Œå­˜å‚¨å•ç‹¬çš„æ•°æ®é›†åˆï¼Œä¸€ä¸ªæ•°æ®åº“ç”±å¤šä¸ªæ•°æ®è¡¨æ„æˆï¼Œåœ¨æ•°æ®åº“ä¸­é€šå¸¸ä½¿ç”¨æ ‡å‡†çš„SQLè¯­å¥æ¥è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªæ–°çš„å†…å®¹ï¼Œåœ¨é¢å¯¹æ–°çš„å†…å®¹æ€»ä¼šå‡ºç°ä¸€å®šçš„å›°éš¾ï¼Œå› æ­¤ï¼š</p><p>Djangoä½¿ç”¨å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆobject relational mappingï¼ŒORMï¼‰æ¥å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­ä¸åŒç±»å‹ç³»ç»Ÿçš„æ•°æ®ä¹‹é—´çš„è½¬æ¢</p><p><strong>æ„å‘³ç€ä¸è¦å­¦ä¹ å¦‚ä½•ä½¿ç”¨SQLï¼Œå­¦ä¼šå¦‚ä½•é…ç½®models.pyå°±è¡Œ</strong></p><p>å¯¹äºåšå®¢åå°çš„æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬è®¾æƒ³å¦‚ä½•æè¿°æ–‡ç« è¿™ä¸ªå¯¹è±¡â€œ</p><blockquote><p>éœ€è¦æœ‰æ–‡ç« ä½œè€…authorã€éœ€è¦æœ‰æ–‡ç« æ ‡é¢˜titleã€éœ€è¦æœ‰æ–‡ç« æ­£æ–‡bodyã€éœ€è¦æœ‰æ–‡ç« çš„åˆ›å»ºæ—¶é—´createdã€éœ€è¦æœ‰æ–‡ç« æ›´æ–°æ—¶é—´updateï¼Œè¿™é‡Œçš„æ•°æ®ç±»å‹ç”±Djangoè‡ªå·±å®šä¹‰ï¼Œè¿™é‡Œæ¯ä¸ªæ¨¡å‹éƒ½è¢«è¡¨ç¤ºä¸ºDjango.db.models.Modelçš„ç±»ï¼Œéœ€è¦ç”¨æ³•å¯ä»¥ç›´æ¥å»æŸ¥</p></blockquote><p>Djangoæœ¬èº«å…·æœ‰ä¸€ä¸ªç®€å•çš„userè´¦å·ç³»ç»Ÿï¼Œå› æ­¤è¿™é‡Œå®šä¹‰foreignkeyå¯ä»¥åŒ…å«ä¸å¤–éƒ¨çš„ç¯å¢ƒ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Create your models here.</span><br><span class="hljs-keyword">from</span> django.db <span class="hljs-keyword">import</span> models<br><span class="hljs-comment"># å¯¼å…¥å†…å»ºçš„Useræ¨¡å‹ã€‚</span><br><span class="hljs-keyword">from</span> django.contrib.auth.models <span class="hljs-keyword">import</span> User<br><span class="hljs-comment"># timezone ç”¨äºå¤„ç†æ—¶é—´ç›¸å…³äº‹åŠ¡ã€‚</span><br><span class="hljs-keyword">from</span> django.utils <span class="hljs-keyword">import</span> timezone<br><br><span class="hljs-comment"># åšå®¢æ–‡ç« æ•°æ®æ¨¡å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ArticlePost</span>(models.Model):<br>    <span class="hljs-comment"># æ–‡ç« ä½œè€…ã€‚å‚æ•° on_delete ç”¨äºæŒ‡å®šæ•°æ®åˆ é™¤çš„æ–¹å¼</span><br>    author = models.ForeignKey(User, on_delete=models.CASCADE)<br><br>    <span class="hljs-comment"># æ–‡ç« æ ‡é¢˜ã€‚models.CharField ä¸ºå­—ç¬¦ä¸²å­—æ®µï¼Œç”¨äºä¿å­˜è¾ƒçŸ­çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚æ ‡é¢˜</span><br>    title = models.CharField(max_length=<span class="hljs-number">100</span>)<br><br>    <span class="hljs-comment"># æ–‡ç« æ­£æ–‡ã€‚ä¿å­˜å¤§é‡æ–‡æœ¬ä½¿ç”¨ TextField</span><br>    body = models.TextField()<br><br>    <span class="hljs-comment"># æ–‡ç« åˆ›å»ºæ—¶é—´ã€‚å‚æ•° default=timezone.now æŒ‡å®šå…¶åœ¨åˆ›å»ºæ•°æ®æ—¶å°†é»˜è®¤å†™å…¥å½“å‰çš„æ—¶é—´</span><br>    created = models.DateTimeField(default=timezone.now)<br><br>    <span class="hljs-comment"># æ–‡ç« æ›´æ–°æ—¶é—´ã€‚å‚æ•° auto_now=True æŒ‡å®šæ¯æ¬¡æ•°æ®æ›´æ–°æ—¶è‡ªåŠ¨å†™å…¥å½“å‰æ—¶é—´</span><br>    updated = models.DateTimeField(auto_now=<span class="hljs-literal">True</span>)<br>    <br>    <span class="hljs-comment"># å†…éƒ¨ç±» class Meta ç”¨äºç»™ model å®šä¹‰å…ƒæ•°æ®</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Meta</span>:<br>        <span class="hljs-comment"># ordering æŒ‡å®šæ¨¡å‹è¿”å›çš„æ•°æ®çš„æ’åˆ—é¡ºåº</span><br>        <span class="hljs-comment"># &#x27;-created&#x27; è¡¨æ˜æ•°æ®åº”è¯¥ä»¥å€’åºæ’åˆ—</span><br>        ordering = (<span class="hljs-string">&#x27;-created&#x27;</span>,)<br><br>    <span class="hljs-comment"># å‡½æ•° __str__ å®šä¹‰å½“è°ƒç”¨å¯¹è±¡çš„ str() æ–¹æ³•æ—¶çš„è¿”å›å€¼å†…å®¹</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># return self.title å°†æ–‡ç« æ ‡é¢˜è¿”å›</span><br>        <span class="hljs-keyword">return</span> self.title<br></code></pre></td></tr></table></figure><p>ForeignKeyï¼š</p><blockquote><p>æ•°æ®åº“ä¸­å¤šç§å¤šæ ·çš„æ•°æ®è¡¨ï¼Œæœ‰æ—¶å€™æ•°æ®è¡¨çš„æ•°æ®æ˜¯ç›¸äº’å…³è”çš„ï¼Œå› æ­¤è¿™ä¸¤å¼ è¡¨ä¹‹é—´å°±äº§ç”Ÿäº†å…³ç³»ï¼Œå¤–å¥å°±æ˜¯ç”¨æ¥è¡¨ç¤ºè¿™ç§å…³ç³»çš„ï¼Œï¼ˆæœ¬æ–‡ä¸­userç”±Djangoè‡ªå·±ç”Ÿæˆï¼‰ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€å¯¹å¤šonetoonefieldã€å¤šå¯¹å¤šmanytomanyfield</p></blockquote><p>å†…éƒ¨ç±»:</p><blockquote><p>å†…éƒ¨ç±»class-metaæä¾›æ¨¡å‹çš„å…ƒæ•°æ®ï¼Œä»»ä½•ä¸æ˜¯å­—æ®µçš„ä¸œè¥¿ï¼Œæ¯”å¦‚orderingã€æ•°æ®åº“åç§°ã€å•æ•°å’Œå¤æ•°åç§°</p></blockquote><p>åˆ›å»ºæ•°æ®åº“ä¹‹åéœ€è¦æ•°æ®è¿ç§»ï¼Œè¿ç§»æ—¶Djangoæ¨¡å‹æ‰€åšçš„æ›´æ”¹ä¼ é€’åˆ°æ•°æ®åº“ä¸­çš„æ–¹å¼ï¼ŒDjangoçš„å‰ä¸€ä»£ç æ—¶ç”±æ¨¡å‹æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå†å²è®°å½•ï¼Œå¯ä»¥å‹‡æ°”å¯å˜‰è¿›è¡Œæ•°æ®åº“çš„æ»šåŠ¨æ›´æ–°ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ä½¿å…¶èƒ½å¤Ÿå’Œå½“å‰çš„æ¨¡å‹åŒ¹é…</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> manage.<span class="hljs-keyword">py</span> makemigrations<br></code></pre></td></tr></table></figure><h3 id="13-ç¼–å†™view"><a class="markdownIt-Anchor" href="#13-ç¼–å†™view"></a> 1.3 ç¼–å†™view</h3><p>Djangoä¸­è¯•å›¾çš„æ¦‚å¿µæ˜¯ä¸€ç±»å…·æœ‰ç›¸åŒåŠŸèƒ½å’Œæ¨¡ç‰ˆçš„ç½‘é¡µçš„é›†åˆï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨é€šè¿‡viewæ¥å¤„ç†å‰ç«¯çš„è¯·æ±‚ï¼Œåœ¨æ•°æ®åº“ä¸­å¢åˆ æ”¹æŸ¥æ¥è¿”å›ç»™å‰ç«¯æ˜¾ç¤ºï¼Œå†™å¥½ä¸€ä¸ªviewå‡½æ•°åï¼Œè¿˜éœ€è¦é…ç½®è·¯ç”±æ¥è®²ç”¨æˆ·è¯·æ±‚å’Œè§†å›¾é“¾æ¥èµ·æ¥</p><h4 id="demo"><a class="markdownIt-Anchor" href="#demo"></a> demo</h4><p>åœ¨article/view.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å¯¼å…¥ HttpResponse æ¨¡å—</span><br><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse<br><br><span class="hljs-comment"># è§†å›¾å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">article_list</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-keyword">return</span> HttpResponse(<span class="hljs-string">&quot;Hello World!&quot;</span>)<br></code></pre></td></tr></table></figure><p>ä¹‹åé…ç½®è·¯ç”±URL</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path<br><span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views<br><br><span class="hljs-comment"># æ­£åœ¨éƒ¨ç½²çš„åº”ç”¨çš„åç§°</span><br>app_name = <span class="hljs-string">&#x27;article&#x27;</span><br><br>urlpatterns = [<br>    <span class="hljs-comment"># pathå‡½æ•°å°†urlæ˜ å°„åˆ°è§†å›¾</span><br>    path(<span class="hljs-string">&#x27;article-list/&#x27;</span>, views.article_list, name=<span class="hljs-string">&#x27;article_list&#x27;</span>),<br>]<br></code></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨è¾“å…¥</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span><span class="hljs-number">101.43</span>.<span class="hljs-number">56.17</span><span class="hljs-regexp">/article/</span>article-list/<br></code></pre></td></tr></table></figure><h4 id="viewå’Œmodelä¹‹é—´çš„è¿æ¥"><a class="markdownIt-Anchor" href="#viewå’Œmodelä¹‹é—´çš„è¿æ¥"></a> viewå’Œmodelä¹‹é—´çš„è¿æ¥</h4><p>Modelä¸­è™½ç„¶å®šä¹‰äº†æ•°æ®è¡¨ï¼Œä½†æ˜¯è¿™ä¸ªè¡¨æ˜¯ç©ºçš„ï¼Œä¸æ–¹ä¾¿å±•ç¤ºviewè°ƒå–æ•°æ®çš„æ•ˆæœï¼Œå› æ­¤éœ€è¦å‘æ•°æ®è¡¨ä¸­è®°å½•ä¸€äº›æ•°æ®</p><ol><li>åˆ›å»ºç®¡ç†å‘˜è´¦å·superuser</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">python manage.py createsuperuser<br></code></pre></td></tr></table></figure><ol><li>å°†articlepostï¼ˆä¹‹å‰æ•°æ®è¡¨ï¼‰æ³¨å†Œåˆ°åå°</li></ol><p>åœ¨admin.pyä¸­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin<br><br><span class="hljs-comment"># Register your models here.</span><br><span class="hljs-comment"># åˆ«å¿˜äº†å¯¼å…¥ArticlerPost</span><br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> ArticlePost<br><br><span class="hljs-comment"># æ³¨å†ŒArticlePoståˆ°adminä¸­</span><br>admin.site.register(ArticlePost)<br></code></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥åœ¨åå°è‡ªå·±ä¸Šä¼ æ–‡ç« å•¦ï¼ˆå¦‚ä½•æ”¯æŒmarkdownè¯­æ³•ï¼Ÿï¼Ÿï¼‰</p><h4 id="åˆ©ç”¨view"><a class="markdownIt-Anchor" href="#åˆ©ç”¨view"></a> åˆ©ç”¨view</h4><p>ä¸Šè¿°æˆ‘ä»¬å¯ä»¥å¢åŠ modelä¸­çš„æ•°æ®ï¼Œåç»­éœ€è¦å¢åŠ å°†æ•°æ®åº“çš„æ•°æ®æ˜¾ç¤ºåœ¨å‰ç«¯æ˜¯viewçš„å·¥ä½œï¼Œå¦‚ä½•ç¾è§‚çš„ç°å®æ˜¯templateçš„äº‹æƒ…</p><p>åœ¨article/views.pyå†…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render<br><br><span class="hljs-comment"># Create your views here.</span><br><span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse<br><br><span class="hljs-comment"># å¯¼å…¥æ•°æ®æ¨¡å‹ArticlePost</span><br><span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> ArticlePost<br><br><span class="hljs-comment"># è§†å›¾å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">article_list</span>(<span class="hljs-params">request</span>):<br>    <span class="hljs-comment"># å–å‡ºæ‰€æœ‰åšå®¢æ–‡ç« </span><br>    articles = ArticlePost.objects.<span class="hljs-built_in">all</span>()<br>    <span class="hljs-comment"># éœ€è¦ä¼ é€’ç»™æ¨¡æ¿ï¼ˆtemplatesï¼‰çš„å¯¹è±¡</span><br>    context = &#123; <span class="hljs-string">&#x27;articles&#x27;</span>: articles &#125;<br>    <span class="hljs-comment"># renderå‡½æ•°ï¼šè½½å…¥æ¨¡æ¿ï¼Œå¹¶è¿”å›contextå¯¹è±¡</span><br>    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&#x27;article/list.html&#x27;</span>, context)<br></code></pre></td></tr></table></figure><p>ä¹‹åé…ç½®æ¨¡ç‰ˆå­˜æ”¾çš„è·¯å¾„ï¼Œåœ¨settingæ–‡ä»¶å¤¹å†…</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">// <span class="hljs-number">55</span>è¡Œ<br>TEMPLATES = [<br>    &#123;<br>        <span class="hljs-string">&#x27;BACKEND&#x27;</span>: <span class="hljs-string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,<br>        <span class="hljs-string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR, <span class="hljs-string">&#x27;templates&#x27;</span>)],<br>        <span class="hljs-string">&#x27;APP_DIRS&#x27;</span>: <span class="hljs-literal">True</span>,<br>        <span class="hljs-string">&#x27;OPTIONS&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;context_processors&#x27;</span>: [<br>                <span class="hljs-string">&#x27;django.template.context_processors.debug&#x27;</span>,<br>                <span class="hljs-string">&#x27;django.template.context_processors.request&#x27;</span>,<br>                <span class="hljs-string">&#x27;django.contrib.auth.context_processors.auth&#x27;</span>,<br>                <span class="hljs-string">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,<br>            ],<br>        &#125;,<br>    &#125;,<br>]<br></code></pre></td></tr></table></figure><p>ä¹‹ååœ¨æ¨¡ç‰ˆä¸­list.htmlä¸­åŠ å…¥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;% for article in articles %&#125;<br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; article.title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>&#123;% endfor %&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥æŸ¥çœ‹åˆ°ç”Ÿæˆäº†æœ€æ–°çš„æ¨¡ç‰ˆ</p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1gzy83z3vsmj21bc07wt8q.jpg" alt="image-20220304223404387" style="zoom:25%;" /><h4 id="é˜¶æ®µæ€»ç»“"><a class="markdownIt-Anchor" href="#é˜¶æ®µæ€»ç»“"></a> é˜¶æ®µæ€»ç»“</h4><p>åœ¨ä¸Šè¿°èµ°è¿‡äº†Djangoçš„modelæ•°æ®åº“çš„å»ºç«‹å’Œadminç®¡ç†ã€viewå‡½æ•°å¯¹å‰ç«¯çš„è¯·æ±‚å“åº”ã€templatesä¸­å…³äºæ¨¡ç‰ˆçš„ä½¿ç”¨ï¼Œå®Œæ•´çš„å­¦ä¹ äº†Djangoçš„MVTæ¨¡å¼ï¼Œåœ¨ä¹‹åè¿˜éœ€è¦æ”¹è¿›çš„åœ°æ–¹æœ‰ï¼š</p><ol><li>æ•°æ®å±‚é¢ï¼Œæ•°æ®åº“çš„å»ºç«‹ã€‚æ•´ä¸ªæ•°æ®åº“ç³»ç»Ÿä¸­å¤šä¸ªè¡¨æ ¼çš„ä½¿ç”¨ï¼Œmodelå»ºç«‹è¿‡ç¨‹ä¸­å…³é”®å­—çš„å®šä¹‰ï¼Œå˜é‡ç±»å‹çš„å®šä¹‰</li><li>viewä¸­æ•°æ®é€»è¾‘ï¼Œå¦‚æœæ˜¯ä¸ªäººåšå®¢ç³»ç»Ÿéœ€è¦è€ƒè™‘åˆ°ç½‘ç«™æ•´ä½“çš„éœ€æ±‚ï¼Œç„¶ååœ¨viewå‡½æ•°ä¸­è¿›è¡Œè§£æï¼Œéœ€è¦è®¾è®¡å…·ä½“çš„åŠŸèƒ½å’Œå…·ä½“åŠŸèƒ½çš„æµç¨‹ï¼Œæœ€ååæ˜ åˆ°ç¼–ç¨‹ä¹‹ä¸­ï¼Œæ¯”å¦‚é¡µé¢çš„æ’åã€é¡µé¢çš„è¯¦ç»†ä¿¡æ¯ã€é¡µé¢çš„æµè§ˆç­‰ç­‰</li><li>æ¨¡ç‰ˆå’Œç½‘é¡µå‰ç«¯çš„äº¤äº’ï¼Œæ¨¡ç‰ˆä¸­è§„å®šäº†åŸºç¡€çš„Djangoæ•°æ®çš„ä¼ è¾“æ–¹å¼ï¼Œè¿˜æœ‰ç½‘é¡µä¸­é€šå¸¸ä½¿ç”¨çš„Ajaxé€šä¿¡æ¥ä¼ é€’ç›¸å…³ä¿¡æ¯ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨è„šæ‰‹æ¶æ¥ä½¿å¾—å‰ç«¯é¡µé¢æ›´åŠ å¥½çœ‹ï¼Œåˆ©ç”¨HTMLä¸­ç‰¹æ®Šå±æ€§æ¥æ·»åŠ å…ƒç´ ã€åˆ©ç”¨CSSæ¥è§„å®šå…ƒç´ çš„æ ¼å¼ã€åˆ©ç”¨JSæ¥è®¾ç½®é¡µé¢çš„åŠ¨æ€æ•ˆæœ</li><li>æ•´ä½“ç®¡ç†ï¼ŒåŒ…æ‹¬è·¯ç”±é…ç½®ã€åŒ…æ‹¬å®é™…éƒ¨ç½²ã€åŒ…æ‹¬å˜é‡çš„ç®¡ç†ç­‰ç­‰</li></ol><h3 id=""><a class="markdownIt-Anchor" href="#"></a> </h3>]]></content>
    
    
    <categories>
      
      <category>CS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Django</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-06---æœºå™¨å­¦ä¹ çš„å®éªŒè®¾è®¡</title>
    <link href="/posts/39e00dd8.html"/>
    <url>/posts/39e00dd8.html</url>
    
    <content type="html"><![CDATA[<p>éå¸¸å–œæ¬¢ã€Šæœºå™¨å­¦ä¹ å¯¼è®ºã€‹ä¸­å…³äºæ„ŸçŸ¥å™¨çš„ä¸€å¥è¯ï¼šâ€œç¥ç»ç½‘ç»œçš„ç›®çš„ä¸æ˜¯ä¸ºäº†ç ”ç©¶äººè„‘çš„å†…éƒ¨ç»“æ„å’Œè¿è¡Œæœºç†ï¼Œè€Œä»…ä»…æ˜¯æ¨¡ä»¿æ¥ä½œä¸ºä¸€ä¸ªå­¦ä¹ ç½¢äº†â€ï¼Œé€šè¿‡è¿™å¥è¯å¯ä»¥çœ‹å‡ºæœºå™¨å­¦ä¹ ä½œä¸ºä¸€é—¨å·¥ç¨‹ç±»çš„å­¦ç§‘ï¼Œæœ¬è´¨ç›®çš„è¿˜æ˜¯ä¸ºäº†å¯»æ‰¾ä¸€ç§å¥½çš„æ–¹æ³•ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­å°±è¦æ€è€ƒéœ€è¦ç”¨ä»€ä¹ˆæ ·çš„æ ‡å‡†æ¥è¯„ä»·å¥½åï¼Ÿè¿™æ˜¯ä¸€ä¸ªæ›¾ç»è§‚å¯Ÿé«˜ä¸­ç‰©ç†ã€é«˜ä¸­åŒ–å­¦ã€é«˜ä¸­ç”Ÿç‰©ä¸­çš„å®éªŒç§‘å­¦ï¼Œæ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬æ›´æœ‰ç€ç»Ÿè®¡çš„çŸ¥è¯†æ¥æŒ‡å¯¼æˆ‘ä»¬æ›´è¿‘ä¸€æ­¥åœ°æ­£ç¡®è®¾è®¡å®éªŒã€‚</p><span id="more"></span><h2 id="0x01-å¼•è¨€"><a class="markdownIt-Anchor" href="#0x01-å¼•è¨€"></a> 0x01 å¼•è¨€</h2><p>æœºå™¨å­¦ä¹ ä¸­ï¼Œå®ç°ä¸€ä¸ªç›®æ ‡ä¸­å¯ä»¥æœ‰å¾ˆå¤šä¸­ä¸åŒçš„å­¦ä¹ ç®—æ³•ï¼Œæ¥ä¹ˆï¼š</p><ol><li>å¦‚ä½•è¯„ä¼°ä¸€ä¸ªå­¦ä¹ ç®—æ³•åœ¨ç»™å®šé—®é¢˜ä¸Šçš„æœŸæœ›è¯¯å·®ï¼Ÿ</li><li>å¯¹äºåŒä¸€ä¸ªç›®æ ‡çš„ä¸åŒå­¦ä¹ ç®—æ³•ï¼Œæˆ‘ä»¬å¦‚ä½•è¯æ˜ä¸€ä¸ªç®—æ³•æ¯”å¦å¤–ä¸€ä¸ªç®—æ³•è¯¯å·®æ›´ä½ï¼Ÿ</li></ol><p>æˆ‘ä»¬ä¸èƒ½åªçœ‹è®­ç»ƒé›†ä¸Šçš„è¯¯å·®æ¥ä½œä¸ºåˆ¤æ–­ï¼Œå› ä¸ºå…·æœ‰æ›´å¤æ‚åº¦çš„æ¨¡å‹çš„è¯¯å·®æ€»æ˜¯æ¯”ç®€å•æ¨¡å‹å°</p><p>åŒæ ·åœ¨ä¸åŒä¸è®­ç»ƒåŠçš„éªŒè¯é›†ä¸­ä¸€è½®è¿è¡Œä¹Ÿä¸å¤Ÿï¼Œå› ä¸ºå¯èƒ½ä¼šæœ‰å™ªå£°å’Œç¦»ç¾¤ç‚¹çš„å½±å“ï¼ŒåŒæ ·å…·æœ‰è¶…å‚æ•°çš„ç®—æ³•çš„æ³›åŒ–è¿‡ç¨‹ä¸­ä¼šæœ‰è¿™å…¶ä»–çš„éšæœºå› ç´ ã€‚æˆ‘ä»¬é€šè¿‡è¿è¡Œlearning algorithmæ¥å¾—åˆ°ä¸€ä¸ªleanerï¼›å¦‚æœæˆ‘ä»¬åªè®­ç»ƒä¸€æ¬¡åªå¾—åˆ°ä¸€ä¸ªleanerå’Œä¸€ä¸ªvalidation errorï¼Œä¸ºäº†å¹³å‡å„ç§éšæœºæ€§ï¼Œæˆ‘ä»¬éœ€è¦äº§ç”Ÿå¤šç§leanerï¼Œè¿›è€Œåœ¨å¤šä¸ªéªŒè¯é›†ä¸Šè¯„ä¼°ï¼Œæˆ‘ä»¬å¯¹learning algorithmçš„è¯„ä¼°æ˜¯åº”è¯¥æ˜¯åŸºäºè¿™äº›validation errorçš„distributionæ¥çš„ï¼Œé€šè¿‡è¯„ä¼°expected erroræˆ–è€…æ˜¯varianceæ¥è¿›è¡Œæ¯”è¾ƒã€‚</p><p>æ€»ç»“ä¸Šè¿°ï¼Œå¯ä»¥çœ‹å‡ºæˆ‘ä»¬çš„ç›®æ ‡æ˜¯è§„åˆ’å’Œè®¾è®¡æœºå™¨å­¦ä¹ å®éªŒï¼Œæ¥åˆ†æå®éªŒäº§ç”Ÿçš„æ•°æ®ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ’é™¤éšæœºæ€§çš„å½±å“ï¼Œå¾—åˆ°ç»Ÿè®¡æ˜¾è‘—çš„ç»“è®ºï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¾—åˆ°å…·æœ‰æœ€é«˜çš„æ³›åŒ–å‡†ç¡®ç‡ã€æœ€å°å¤æ‚åº¦çš„å­¦ä¹ å™¨ï¼Œå¹¶ä¸”è¯¥å­¦ä¹ å™¨æ˜¯robust</p><p>æˆ‘ä»¬åœ¨å®éªŒè®¾è®¡ä¸­éœ€è¦è®¾è®¡çš„3é¡¹åŸºæœ¬åŸåˆ™ï¼š</p><ul><li>randomizationéšæœºåŒ–ï¼Œè¦æ±‚å®éªŒè¿è¡Œçš„æ¬¡åºåº”è¯¥æ˜¯éšæœºç¡®å®šçš„ï¼Œè¿™æ ·ä½¿å¾—ç»“æœæ˜¯ç‹¬ç«‹çš„</li><li>replicationé‡å¤ï¼Œå› ä¸ºè¿™åº”è¯¥å¯¹å¯æ§å› ç´ çš„ç›¸åŒé…ç½®å¤šæ¬¡å®éªŒï¼Œä»¥ä¾¿å¹³å‡ä¸å¯æ§å› ç´ çš„å½±å“ï¼Œé€šå¸¸åœ¨ç›¸åŒæ•°æ®é›†ä¸Šå†æŠ½æ ·çš„ç‰ˆæœ¬ä¸Šå«åšäº¤å‰éªŒè¯ï¼ˆcross- validationï¼‰</li><li>blockingé˜»æ­¢ï¼Œç”¨æ¥é™ä½æˆ–æ¶ˆé™¤æœ‰å®³å› ç´ å¯¼è‡´çš„å¯å˜æ€§ï¼Œå‡†ç¡®ç‡çš„å·®å¼‚ä¸ä»…å–å†³äºä¸åŒçš„ç®—æ³•è¿˜å–å†³äºä¸åŒçš„å­é›†ï¼Œå› æ­¤ä¸ºäº†åº¦é‡ä»…ç”±ç®—æ³•å¯¼è‡´çš„å·®åˆ«ï¼Œé‡å¤è¿è¡Œçš„ä¸åŒè®­ç»ƒé›†åº”è¯¥æ˜¯ç›¸åŒçš„ï¼Œåœ¨ç»Ÿè®¡ä¸­å¸¸æœ‰é…å¯¹æ£€éªŒï¼ˆpairing testï¼‰</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1gzpyiewji2j21420lgwh9.jpg" alt="image-20220225185723183" /></p><h2 id="0x02-å®éªŒè®¾è®¡çš„åŸºæœ¬ç­–ç•¥-strategy-of-experimentation"><a class="markdownIt-Anchor" href="#0x02-å®éªŒè®¾è®¡çš„åŸºæœ¬ç­–ç•¥-strategy-of-experimentation"></a> 0x02 å®éªŒè®¾è®¡çš„åŸºæœ¬ç­–ç•¥ strategy of experimentation</h2><p>è¿™é‡Œæ„Ÿè§‰æ›´å¤šæ˜¯å…³äºå¦‚ä½•è°ƒå‚çš„é€‰æ‹©ï¼Œå¦‚ä½•è®¾è®¡å¯¹æ¯”å‡ºä¸åŒç®—æ³•ä¼˜åŠ£ï¼Œæ¯”å¦‚æ¶ˆèå®éªŒä¹‹ç±»çš„è¿˜æ˜¯ä¾é å®è·µ</p><h3 id="æœ€ä½³çŒœæµ‹-best-guess"><a class="markdownIt-Anchor" href="#æœ€ä½³çŒœæµ‹-best-guess"></a> æœ€ä½³çŒœæµ‹ best- guess</h3><p>ä»æŸä¸ªæˆ‘ä»¬ç›¸ä¿¡æ˜¯å¥½é…ç½®çš„å› ç´ è®¾ç½®å¼€å§‹ï¼Œåœ¨æ­¤æ£€éªŒå“åº”ä¹‹å‰ï¼Œæ¯æ¬¡ç¨å¾®æ”¹åŠ¨ä¸€ä¸ªæˆ–è€…å°‘é‡å› ç´ ï¼Œæ¥æ£€éªŒæ¯ä¸ªç»„åˆæŒ‡å¯¼å¾—åˆ°ä¸€ä¸ªè¶³å¤Ÿå¥½çš„çŠ¶æ€</p><h3 id="ä¸€æ¬¡ä¸€ä¸ªå› ç´ -one-factor-at-a-tiem"><a class="markdownIt-Anchor" href="#ä¸€æ¬¡ä¸€ä¸ªå› ç´ -one-factor-at-a-tiem"></a> ä¸€æ¬¡ä¸€ä¸ªå› ç´  one factor at a tiem</h3><p>æˆ‘ä»¬ä¸ºæ¯ä¸ªå› ç´ ç¡®å®šä¸€ä¸ªåŸºçº¿çš„æŠ¹é¢è®¤çŸ¥ï¼Œç„¶åå¯¹ä¸€ä¸ªå› ç´ å°è¯•ä¸åŒæ°´å¹³è€Œä»¤å…¶ä»–å› ç´ ä¿æŒåœ¨æé™ä¸Šï¼Œè¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯å‡è®¾å› ç´ ä¹‹é—´ä¸ç›¸äº’å½±å“</p><h3 id="å› ç´ è®¾è®¡-factorial-design"><a class="markdownIt-Anchor" href="#å› ç´ è®¾è®¡-factorial-design"></a> å› ç´ è®¾è®¡ factorial design</h3><p>é€šå¸¸ä¹Ÿè¢«ç§°ä¸ºç½‘æ ¼æœç´¢grid searchï¼Œå…¶ä¸­å› ç´ ä¸€èµ·å˜åŒ–è€Œä¸æ˜¯å•å› ç´ å˜åŒ–</p><h3 id="å“åº”é¢è®¾è®¡-response-surface-design"><a class="markdownIt-Anchor" href="#å“åº”é¢è®¾è®¡-response-surface-design"></a> å“åº”é¢è®¾è®¡ response surface design</h3><p>é€šè¿‡è®¾è®¡åˆç†çš„æœ‰é™æ¬¡æ•°è¯•éªŒï¼Œå»ºç«‹ä¸€ä¸ªåŒ…æ‹¬å„æ˜¾è‘—å› ç´ çš„ä¸€æ¬¡é¡¹ã€å¹³æ–¹é¡¹å’Œä»»ä½•ä¸¤ä¸ªå› ç´ ä¹‹é—´çš„ä¸€çº§äº¤äº’ä½œç”¨é¡¹çš„æ•°å­¦æ¨¡å‹ï¼Œç²¾ç¡®ç ”ç©¶å„å› ç´ ä¸å“åº”å€¼ä¹‹é—´çš„å…³ç³»ï¼Œå¿«é€Ÿç¡®å®šå¤šå› ç´ ç³»ç»Ÿçš„æœ€ä½³æ¡ä»¶ï¼Œå¸¸ç”¨å…·ä½“æ–¹æ³•æœ‰ï¼šä¸­å¿ƒå¤åˆè¯•éªŒè®¾è®¡ï¼ˆcentral composite design CCDï¼‰å’ŒBox-Behnkenè¯•éªŒè®¾è®¡ï¼ˆDDBï¼‰</p><h2 id="0x03-æ¨¡å‹é€‰æ‹©é‡å¤æ ·æœ¬"><a class="markdownIt-Anchor" href="#0x03-æ¨¡å‹é€‰æ‹©é‡å¤æ ·æœ¬"></a> 0x03 æ¨¡å‹é€‰æ‹©â€“é‡å¤æ ·æœ¬</h2><blockquote><p>hold-out é€šå¸¸å¯¹è·å¾—æ•°æ®é›†ä¹‹åï¼Œä¼šå°†å…¶åˆ’åˆ†å‡ºæ¥ä¸€éƒ¨åˆ†ä¸ä¼šä½¿ç”¨çš„test setï¼›åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¼šç”¨åˆ°çš„æœ‰train setå’Œvalidation set</p></blockquote><p>é€šå¸¸train setå’Œvalidation setä¹‹é—´çš„æ¯”ä¾‹å¯ä»¥ä¸º10æˆ–è€…30ï¼Œä½†æ˜¯ä¸å¹¸çš„æ˜¯æ ·æœ¬é€šå¸¸æ²¡æœ‰è¿™ä¹ˆå¤šï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥åœ¨å°æ•°æ®é›†ä¸Šå°½åŠ›è€Œä¸ºï¼Œå…¶æ–¹æ³•æ˜¯ä»¥ä¸åŒåˆ’åˆ†æ¥é‡å¤ä½¿ç”¨å®ƒï¼Œè¿™ç§ç§°ä¸ºäº¤å‰éªŒè¯cross- validationï¼Œä½†æ˜¯æ½œåœ¨çš„é—®é¢˜æœ‰<strong>äº¤å‰éªŒè¯ä½¿å¾—é”™è¯¯ç‡æ˜¯ç›¸äº’ä¾èµ–çš„ï¼Œå› ä¸ºè¿™äº›ä¸åŒé›†åˆå…±äº«æ•°æ®</strong></p><p>åœ¨é‡å¤çˆ±æ¼¾ä¸­è¦å°½å¯èƒ½çš„ä¿æŒåˆ†å±‚stratificationï¼Œæˆ‘ä»¬å¸Œæœ›ä¿è¯è¯¯å·®ä¼°è®¡çš„é²æ£’æ€§ï¼ŒåŒæ—¶è¦ä¿æŒä¸åŒé›†åˆé—´çš„é‡å å°½å¯èƒ½çš„å°ï¼Œè¿˜ä¸èƒ½æ‰°ä¹±ç±»çš„å…ˆéªŒæ¦‚ç‡</p><h3 id="31-k-fold-cv"><a class="markdownIt-Anchor" href="#31-k-fold-cv"></a> 3.1 K- fold CV</h3><p>å°†è®­ç»ƒçš„ä¹¦ç±åˆ’åˆ†ä¸ºKç­‰åˆ†ï¼Œå°†Kä»½æ•°æ®é›†ä¸­çš„ä¸€ä»½åˆ’åˆ†ä¸ºéªŒè¯é›†ï¼Œå…¶ä»–ä½œä¸ºéªŒè¯é›†ï¼Œåœ¨è¾ƒä¸ºæç«¯çš„åŒ»ç–—ä¸­å¯èƒ½ä¼šæœ‰leave-one-out</p><h3 id="32-5x2-cv"><a class="markdownIt-Anchor" href="#32-5x2-cv"></a> 3.2 5x2 CV</h3><p>å¾ˆç¥å¥‡è€Œè®©äººä¸æƒ³å»äº†è§£</p><h3 id="33-bootstrappingè‡ªåŠ©æ³•"><a class="markdownIt-Anchor" href="#33-bootstrappingè‡ªåŠ©æ³•"></a> 3.3 bootstrappingï¼ˆè‡ªåŠ©æ³•ï¼‰</h3><p>é‡‡ç”¨ä»åŸå§‹æ ·æœ¬ä¸­ä»¥æœ‰æ”¾å›åœ°æŠ½å–å®ä¾‹çš„æ–¹æ³•æ¥äº§ç”Ÿæ–°çš„æ ·æœ¬ï¼Œè‡ªåŠ©æ ·æœ¬å¯èƒ½æ¯”äº¤å‰éªŒè¯æœ‰æ›´å¤šçš„é‡å ï¼Œå› è€Œå…¶ä¼°è®¡å¯èƒ½æ›´ç›¸äº’ä¾èµ–</p>ï¼ˆ1-\frac{1}{N})^N=1/e=0.368<p>æ„å‘³è®­ç»ƒé›†ä¸­åŒ…å«63.2%çš„å®ä¾‹ï¼Œå°†åŸå§‹æ•°æ®é›†ä½œä¸ºéªŒè¯é›†</p><h2 id="0x04-æ¨¡å‹é€‰æ‹©æ€§èƒ½åº¦é‡"><a class="markdownIt-Anchor" href="#0x04-æ¨¡å‹é€‰æ‹©æ€§èƒ½åº¦é‡"></a> 0x04 æ¨¡å‹é€‰æ‹©â€“æ€§èƒ½åº¦é‡</h2><h3 id="41-åˆ†ç±»"><a class="markdownIt-Anchor" href="#41-åˆ†ç±»"></a> 4.1 åˆ†ç±»</h3><p>äºŒåˆ†ç±»çš„æ··æ·†çŸ©é˜µconfusion matrix</p><table><thead><tr><th></th><th>é¢„æµ‹positive</th><th>é¢„æµ‹negative</th><th></th></tr></thead><tbody><tr><td>æ­£ä¾‹positive</td><td>TP</td><td>FN</td><td></td></tr><tr><td>è´Ÿä¾‹negative</td><td>FP</td><td>TN</td><td></td></tr></tbody></table>è¯¯å·®ï¼š(FP+FN)/N\\å‡†ç¡®ç‡ï¼š(TP+TN)/N\\ç²¾åº¦ï¼šTP/ï¼ˆTP+FPï¼‰\\å¬å›ç‡ï¼šTP/ï¼ˆTP+FNï¼‰\\çµæ•åº¦ï¼šå¬å›ç‡\\ç‰¹æ•ˆæ€§ï¼šTN/fp+tn\\tp-rate:tp/p\\fp-rate=fp/(tn+fp)<blockquote><p>å…³äºå‡æ­£å’Œå‡è´Ÿï¼Œä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·å¸Œæœ›ç™»é™†å¦å¤–ä¸€ä¸ªç”¨æˆ·çš„è´¦æˆ·ï¼Œå‡æ­£æ˜¯å…è®¸é¡¶æ›¿ï¼Œå‡è´Ÿæ˜¯æ­£å¸¸ç”¨æˆ·ç™»é™†ä¸äº†ï¼Œæ˜¾ç„¶å‰è€…å±å®³ä¼šæ›´é«˜</p><p>tp-rateï¼šè¡¡é‡é€šè¿‡èº«ä»½è®¤è¯åˆæ³•ç”¨æˆ·çš„æ¯”ä¾‹</p><p>FP-rateï¼šé”™è¯¯æ¥å—é¡¶æ›¿çš„æ¯”ä¾‹</p></blockquote><p>ï¼ˆtp-rateï¼Œfp-rateï¼‰å¾—åˆ°ROCï¼ˆreceiver operating characteristicï¼‰ï¼Œè¯¥æ›²çº¿ä¸‹é¢çš„ï¼ˆarea under the curve AUCï¼‰å¯ä»¥æ¥æ¯”è¾ƒä¸åŒæŸå¤±æ¡ä»¶ä¸‹å¹³å‡çš„æ•´ä½“æ€§èƒ½</p><p>å¯ä»¥å‚è€ƒç§‘æŠ€æ–‡çŒ®æ£€ç´¢ä¸­çš„æŸ¥å…¨ç‡å’ŒæŸ¥å‡†ç‡</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1gzq5dwqc82j20ro0gk75k.jpg" alt="image-20220225225500695" /></p><p>class confusion matrix</p><h3 id="42-å›å½’"><a class="markdownIt-Anchor" href="#42-å›å½’"></a> 4.2 å›å½’</h3><p>mean square error</p><p>RMSEä¹‹ç±»çš„</p><h2 id="0x05-æ¨¡å‹é€‰æ‹©-ç»“æœå¯é æ€§çœ‹ä¸æ‡‚ç»Ÿè®¡åŠŸåº•ä¸å¤Ÿ"><a class="markdownIt-Anchor" href="#0x05-æ¨¡å‹é€‰æ‹©-ç»“æœå¯é æ€§çœ‹ä¸æ‡‚ç»Ÿè®¡åŠŸåº•ä¸å¤Ÿ"></a> 0x05 æ¨¡å‹é€‰æ‹© â€“ ç»“æœå¯é æ€§ï¼ˆçœ‹ä¸æ‡‚ï¼Œç»Ÿè®¡åŠŸåº•ä¸å¤Ÿï¼‰</h2><h3 id="51-åŒºé—´ä¼°è®¡-interval-estimation"><a class="markdownIt-Anchor" href="#51-åŒºé—´ä¼°è®¡-interval-estimation"></a> 5.1 åŒºé—´ä¼°è®¡ interval estimation</h3><p>ã€Šæ¦‚ç‡è®ºã€‹</p><h3 id="52-å‡è®¾æ£€éªŒ-hypothesis-testing"><a class="markdownIt-Anchor" href="#52-å‡è®¾æ£€éªŒ-hypothesis-testing"></a> 5.2 å‡è®¾æ£€éªŒ hypothesis testing</h3><p>ã€Šæ¦‚ç‡è®ºå’Œæ•°ç†ç»Ÿè®¡ã€‹</p><h3 id="53-ç»“åˆè¯„ä¼°æ€§èƒ½"><a class="markdownIt-Anchor" href="#53-ç»“åˆè¯„ä¼°æ€§èƒ½"></a> 5.3 ç»“åˆè¯„ä¼°æ€§èƒ½</h3><p>ä¸€ä¸‹ç”¨äºå¯¹åˆ†ç±»é—®é¢˜ä¸­çš„é”™è¯¯ç‡è¿›è¡Œåˆ†æï¼ŒåŒæ ·å¯ä»¥é€‚ç”¨äºå›å½’çš„å°±æ”¾è¯¯å·®ã€éç›‘ç£å­¦ä¹ çš„å¯¹æ•°ä¼¼ç„¶ã€å¢å¼ºå­¦ä¹ çš„æœŸæœ›å¥–åŠ±ç­‰</p><h4 id="å•ä¸ªå­¦ä¹ å™¨çš„é”™è¯¯ç‡è¡¡é‡"><a class="markdownIt-Anchor" href="#å•ä¸ªå­¦ä¹ å™¨çš„é”™è¯¯ç‡è¡¡é‡"></a> å•ä¸ªå­¦ä¹ å™¨çš„é”™è¯¯ç‡è¡¡é‡</h4><p>äºŒé¡¹æ£€éªŒ</p><p>è¿‘ä¼¼æ­£æ€æ£€éªŒ</p><p>tæ£€éªŒï¼ˆK-foldï¼‰</p><h4 id="æ¯”è¾ƒä¸¤ä¸ªåˆ†ç±»ç®—æ³•é”™è¯¯ç‡"><a class="markdownIt-Anchor" href="#æ¯”è¾ƒä¸¤ä¸ªåˆ†ç±»ç®—æ³•é”™è¯¯ç‡"></a> æ¯”è¾ƒä¸¤ä¸ªåˆ†ç±»ç®—æ³•é”™è¯¯ç‡</h4><p>McNemaræ£€éªŒ</p><p>KæŠ˜+tæ£€éªŒ</p><h4 id="æ¯”è¾ƒå¤šä¸ªåˆ†ç±»çš„é”™è¯¯ç‡åŒæ—¶åˆ†ææ–¹å·®"><a class="markdownIt-Anchor" href="#æ¯”è¾ƒå¤šä¸ªåˆ†ç±»çš„é”™è¯¯ç‡åŒæ—¶åˆ†ææ–¹å·®"></a> æ¯”è¾ƒå¤šä¸ªåˆ†ç±»çš„é”™è¯¯ç‡åŒæ—¶åˆ†ææ–¹å·®</h4><h4 id="åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šæ¯”è¾ƒå¤šä¸ªç®—æ³•çš„é”™è¯¯ç‡"><a class="markdownIt-Anchor" href="#åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šæ¯”è¾ƒå¤šä¸ªç®—æ³•çš„é”™è¯¯ç‡"></a> åœ¨å¤šä¸ªæ•°æ®é›†ä¸Šæ¯”è¾ƒå¤šä¸ªç®—æ³•çš„é”™è¯¯ç‡</h4><h4 id="æ¯”è¾ƒå¤šä¸ªç®—æ³•çš„ä¸åŒæŒ‡æ ‡"><a class="markdownIt-Anchor" href="#æ¯”è¾ƒå¤šä¸ªç®—æ³•çš„ä¸åŒæŒ‡æ ‡"></a> æ¯”è¾ƒå¤šä¸ªç®—æ³•çš„ä¸åŒæŒ‡æ ‡</h4>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Experiment</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-03--å†³ç­–æ ‘CART</title>
    <link href="/posts/a32aa49a.html"/>
    <url>/posts/a32aa49a.html</url>
    
    <content type="html"><![CDATA[<p>å†³ç­–æ ‘å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåŸºå­¦ä¹ å™¨ï¼ŒåŒæ ·åœ¨è¿™ä¸ªä¾‹å­ä¸­éœ€è¦äº†è§£åˆ°ç›¸å…³æœºå™¨å­¦ä¹ ä¸­ç›¸å…³åŸºæœ¬æ¦‚å¿µã€æ¨¡å‹è¯„ä¼°å’Œé€‰æ‹©çš„è¿‡ç¨‹ä¸­æ‰èƒ½æ›´å¥½çš„ç»§ç»­ä¸‹å»ï¼Œå› ä¸ºæœ¬äººè§‰å¾—MLåœ¨é™¤äº†ç»Ÿè®¡ç†è®ºæ¨å¯¼ä¹‹å¤–ï¼Œå®éªŒçš„è®¾è®¡ä¸éªŒè¯ä¹Ÿæ˜¯éå¸¸é‡è¦</p><p>åŒæ ·åœ¨CARTçš„åŸºç¡€ä¸Šï¼Œç»“åˆé›†æˆå­¦ä¹ ï¼šBaggingã€Boostingç­‰å¯ä»¥æ›´åŠ ä¼˜åŒ–å†³ç­–æ ‘çš„æ€§èƒ½è¿›è€Œæ¨å‡ºæ›´å¥½çš„æ¨¡å‹ï¼Œä½†æ˜¯æœ€åŸºæœ¬çš„ä¸œè¥¿è¿˜æ˜¯æ¥æºäºå†³ç­–æ ‘çš„æµç¨‹ï¼Œæœ¬æ–‡å°†ä»‹ç»å†³ç­–æ ‘çš„åŸºæœ¬æµç¨‹ä»¥åŠä»£ç å®ç°</p><span id="more"></span><h2 id="0x01-å†³ç­–æ ‘decision-treeçš„åŸºæœ¬æµç¨‹"><a class="markdownIt-Anchor" href="#0x01-å†³ç­–æ ‘decision-treeçš„åŸºæœ¬æµç¨‹"></a> 0x01 å†³ç­–æ ‘ï¼ˆDecision treeï¼‰çš„åŸºæœ¬æµç¨‹</h2><h3 id="ä»‹ç»"><a class="markdownIt-Anchor" href="#ä»‹ç»"></a> ä»‹ç»</h3><p>å†³ç­–æ ‘æ˜¯ä¸€ç§å®ç°åˆ†æ²»ç­–ç•¥çš„å±‚æ¬¡æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§æœ‰æ•ˆçš„éå‚æ•°æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºåˆ†ç±»ä¸å›å½’</p><blockquote><p>å…³äºåˆ†æ²»æ³•ï¼Œdivide and conquer</p><ul><li><strong>Divide</strong> the problem into a number of subproblems that are smaller instances of the same problem</li><li><strong>Conquer</strong> the subproblems by solving them recurisvely. If the problem sizes are small enough, however,just solve the subproblems in a straightforward manner.</li><li><strong>Combine</strong> the solutions to the subpoblems into the solution for the original problem</li></ul><p>(1)å¯¹äºä¸€ä¸ªè§„æ¨¡ä¸ºN çš„é—®é¢˜ï¼Œè‹¥è¯¥é—®é¢˜å¯ä»¥å®¹æ˜“åœ°è§£å†³ï¼Œåˆ™ç›´æ¥è§£å†³,å¦åˆ™æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ã€‚<br />(2)å°†è¯¥é—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°çš„å­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜äº’ç›¸ç‹¬ç«‹ï¼Œå¹¶ä¸”åŸé—®é¢˜å½¢å¼ç›¸åŒã€‚<br />(3)é€’å½’recursivelyåœ°è§£å­é—®é¢˜ã€‚<br />(4)ç„¶åï¼Œå°†å„å­é—®é¢˜çš„è§£åˆå¹¶å¾—åˆ°åŸé—®é¢˜çš„è§£</p></blockquote><p>å¯¹äºå‚æ•°ä¼°è®¡ï¼Œæˆ‘ä»¬å®šä¹‰æ•´ä¸ªè¾“å…¥ç©ºé—´ä¸Šçš„æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨æ‰€æœ‰çš„è®­ç»ƒæ•°æ®å­¦ä¹ å®ƒçš„å‚æ•°ï¼Œç„¶åå¯¹äºä»»æ„çš„æ£€éªŒè¾“å…¥ä½¿ç”¨ç›¸åŒçš„æ¨¡å‹å’Œå‚æ•°</p><p>å¯¹äºéå‚æ•°ä¼°è®¡ï¼Œæˆ‘ä»¬å°†è¾“å…¥ç©ºé—´åˆ’åˆ†ä¸ºåˆ©ç”¨æ¬§å‡ é‡Œå¾—èŒƒæ•°è¿™æ ·å®šä¹‰çš„è·ç¦»åº¦é‡çš„å±€éƒ¨æ¨¡å‹ï¼Œå¹¶å¯¹æ¯ä¸ªè¾“å…¥ä½¿ç”¨ç”±è¯¥åŒºåŸŸçš„è®­ç»ƒæ•°æ®è®¡ç®—å¾—åˆ°çš„å¯¹åº”çš„å±€éƒ¨æ¨¡å‹ä¸­ï¼Œåœ¨éå‚æ•°æ¨¡å‹æ±‡æ€»ç»™å®šä¸€ä¸ªè¾“å…¥ï¼Œè¯†åˆ«å®šä¹‰å±€éƒ¨æ¨¡å‹çš„å±€éƒ¨æ•°æ®çš„å¼€é”€å¾ˆå¤§ï¼Œéœ€è¦è®¡ç®—ä»ç»™å®šçš„è¾“å…¥åˆ°æ‰€æœ‰è®­ç»ƒå®ä¾‹çš„è·ç¦»ã€‚</p><p>å†³ç­–æ ‘æ˜¯ä¸€ç§ç”¨äºç›‘ç£å­¦ä¹ çš„å±‚æ¬¡æ¨¡å‹ï¼Œå±€éƒ¨åŒºåŸŸé€šè¿‡å°‘æ•°å‡ æ­¥é€’å½’åˆ†ç±»ç¡®å®šï¼Œå†³ç­–æ ‘åˆä¸€äº›å†…éƒ¨å†³ç­–èŠ‚ç‚¹å’Œç»ˆç«¯æ ‘å¶ç»„æˆï¼Œæ¯ä¸ªå†³ç­–èŠ‚ç‚¹decision nodeå®ç°ä¸€ä¸ªå…·æœ‰ç¦»æ•£è¾“å‡ºçš„æµ‹è¯•å‡½æ•°ï¼Œç”±æ­¤åˆ°è¾¾ä¸€å®šæ¡ä»¶åå½¢æˆä¸€ä¸ªæ ‘å¶èŠ‚ç‚¹leaf nodeï¼Œå½¢æˆæœ€ç»ˆçš„å€¼å¹¶è¾“å‡ºã€‚</p><p>åœ¨å†³ç­–æ ‘çš„å®ç°å½“ä¸­ï¼Œå¯ä»¥ä»å•ä¸ªè¾“å…¥å˜é‡çš„å•å˜é‡æ ‘å¼€å§‹ï¼ˆè€ƒè™‘å¦‚ä½•ä½¿ç”¨åˆ†ç±»æˆ–è€…å›å½’çš„æ–¹å¼æ„é€ è¿™æ ·çš„æ ‘ï¼‰ï¼Œä¹‹åå°†è¿™ç§æ ‘æ¨å¹¿åˆ°æ‰€æœ‰è¾“å…¥çš„å¤šå˜é‡æ ‘çš„å†…éƒ¨èŠ‚ç‚¹</p><p>å‚è€ƒè¥¿ç“œä¹¦ä¸­çš„ç®—æ³•ä¸ºä»£ç ï¼š</p><p>å°†å†³ç­–æ ‘ç”Ÿæˆçš„æ•´ä¸ªè¿‡ç¨‹åˆ†è§£ï¼Œæœ¬è´¨ä¸Šæ˜¯ä»çˆ¶èŠ‚ç‚¹å‘ä¸‹åˆ†è§£çš„è¿‡ç¨‹ï¼Œåœ¨å…¶ä¸­å›å‡ºç°ä¸‰ç§æƒ…å†µï¼š</p><ol><li>åˆ’åˆ†å‰ï¼Œçˆ¶èŠ‚ç‚¹å…¨éƒ¨å±äºä¸€ç±»ï¼›</li><li>åˆ’åˆ†ä¸­ï¼Œçˆ¶èŠ‚ç‚¹æ ·æœ¬ä¸­ç‰¹å¾ç»“åˆä¸ºç©ºé›†æˆ–è€…æ‰€æœ‰å–å€¼ç›¸åŒ</li><li>åˆ’åˆ†åï¼Œæœ‰ä¸€ä¸ªåˆ†æ”¯ä¸ºç©ºé›†ï¼Œåˆ™ä¸å¦å¤–ä¸€ä¸ªåˆ†æ”¯åˆå¹¶ï¼Œå°†å…¶ç±»åˆ«æ ‡è®°ä¸ºæ ·æœ¬æœ€å¤šçš„ç±»</li></ol><p>åœ¨æ­£å¸¸åˆ’åˆ†ä¸­ï¼ŒåŒºåˆ†åˆ†ç±»æƒ…å†µå’Œå›å½’æƒ…å†µï¼ˆå³ç¦»æ•£å€¼å’Œè¿ç»­å€¼çš„åˆ’åˆ†æ–¹æ³•ï¼‰</p><p><img src="/Users/chenxia/Pictures/codeGen/cart.jpg" alt="image-20220221163207787" /></p><h3 id="å•å˜é‡åˆ†ç±»classficationæƒ…å†µ"><a class="markdownIt-Anchor" href="#å•å˜é‡åˆ†ç±»classficationæƒ…å†µ"></a> å•å˜é‡åˆ†ç±»ï¼ˆclassficationï¼‰æƒ…å†µ</h3><p>åœ¨åˆ†ç±»æ ‘ classfication treeä¸­ï¼Œåˆ’åˆ†çš„ä¼˜åŠ£ç”¨ä¸çº¯åº¦åº¦é‡ï¼ˆimpurity measureï¼‰åˆ†æï¼š</p>å¦‚æœå¯¹äºæ‰€æœ‰åˆ†æ”¯ï¼Œåˆ’åˆ†åé€‰æ‹©ç›¸åŒåˆ†æ”¯çš„æ‰€æœ‰å®ä¾‹éƒ½å±äºç›¸åŒçš„ç±»ï¼Œå¯¹äºèŠ‚ç‚¹mï¼Œä»¤N_mä¸ºåˆ°è¾¾èŠ‚ç‚¹mçš„è®­ç»ƒå®ä¾‹\\æ•°ï¼ŒN_mä¸ªå®ä¾‹ä¸­N_m^iéƒ½å±äºC_iç±»ï¼Œåˆ™å¯¹äºä¸€ä¸ªå®ä¾‹xåˆ°è¾¾èŠ‚ç‚¹mï¼Œå±äºC_iç±»çš„æ¦‚ç‡ä¼°è®¡ä¸º\\\bar p(C_i|X,m)=N_m^i/N_m\\ï¼ˆdefï¼‰èŠ‚ç‚¹mæ˜¯çº¯çš„ï¼Œå¦‚æœå¯¹äºæ‰€æœ‰çš„iï¼Œp_m^iä¸º0æˆ–1ï¼Œå½“åˆ°è¾¾èŠ‚ç‚¹mçš„æ‰€æœ‰å®ä¾‹éƒ½ä¸å±äºCç±»æ—¶ï¼Œp_m^iä¸º0ï¼Œ\\è€Œå½“æ‰€æœ‰èŠ‚ç‚¹åˆ°è¾¾mçš„æ‰€æœ‰å®ä¾‹éƒ½å±äºC_iç±»æ—¶å€™ï¼Œä¸º1\\<p><strong>åœ¨ä¸çº¯æ€§åº¦é‡åˆ’åˆ†çš„ä¾æ®ä¸­ï¼Œéœ€è¦æ»¡è¶³ä¸€ä¸‹åŸºæœ¬çš„æ€§è´¨</strong>ä¸”éœ€è¦å¤§äº0</p>1. å¯¹äºä»»æ„p\in [0,1],\phi(1/2,1/2)>=\phi(p,1-p)\\2.\phi(0,1)=\phi(1,0)=0\\3. åœ¨[0,1/2]ä¸Š\phi(p,1-p)æ˜¯é€’å¢çš„ï¼Œå½“påœ¨[1/2ï¼Œ1]ä¸Š\phi(p,1-p)æ˜¯é€’å‡çš„<p>ä¾‹å¦‚å¸¸è§çš„ä¸çº¯æ€§åº¦é‡å‡½æ•°åŒ…æ‹¬ï¼š</p><ol><li>ä¿¡æ¯ç†µ Information Entropy</li></ol>Gain=Gainï¼ˆDataSet_{parent}ï¼‰-\Sigma N(sub)/N(Dataset_{parent})*Gain(SubDataSet)<ol start="2"><li><p>å¢ç›Šç‡ Gain ratio: é™ä½åˆ†æ”¯è¿‡å¤šå¸¦æ¥çš„å½±å“ï¼Œç›¸å½“äºåŠ äº†ä¸€å±‚ç½šå‡½æ•°åœ¨åˆ†æ¯</p>Gain_{ratio}=Gain(DataSet_{parent})/IV(a)\\IV(a)=-\Sigma|D^v|/|D|*log_2|D^v|/|D| \ ~ æ˜¯è¯¥å±æ€§çš„å›ºæœ‰å€¼</li><li><p>åŸºå°¼æŒ‡æ•° gini index</p></li><li><p>è¯¯åˆ†ç±»å‡½æ•°</p></li><li><p>ç­‰ç­‰</p></li></ol><h3 id="å•å˜é‡å›å½’regressionæƒ…å†µ"><a class="markdownIt-Anchor" href="#å•å˜é‡å›å½’regressionæƒ…å†µ"></a> å•å˜é‡å›å½’(regression)æƒ…å†µ</h3><p>å›å½’æ ‘å¯ä»¥ä½¿ç”¨å‡ ä¹ä¸åˆ†ç±»ä¹¦å®Œå…¨ç›¸åŒçš„æ–¹æ³•æ„é€ ï¼Œå”¯ä¸€ä¸åŒæ˜¯é€‚åˆåˆ†ç±»çš„ä¸çº¯æ€§åº¦é‡ç”¨é€‚åˆå›å½’çš„ä¸çº¯æ€§åº¦é‡å–ä»£ï¼Œç›¸æ¯”è¾ƒå›å½’åˆ†æä¹‹å‰çš„å·®åˆ«å¯èƒ½æ˜¯ï¼š</p><ol><li><p>èŠ‚ç‚¹çš„åˆ†ç±»ä¸æŒ‰ç…§ç‰¹å¾é›†ä¸­çš„ç±»åˆ«ç›´æ¥åˆ†ç±»ï¼Œè€Œæ˜¯æŒ‰ç…§å‡å€¼æˆ–è€…ä¸­å€¼ï¼ˆnoiseå¤§çš„æ—¶å€™ç”¨ä¸­å€¼ï¼‰</p></li><li><p>èŠ‚ç‚¹çš„ä¸çº¯åº¦é‡åˆ©ç”¨å‡æ–¹è¯¯å·®æˆ–è€…æœ€å¤§è¯¯å·®æ¥å®ç°ï¼Œå½“è¯¯å·®å°äºè®¾å®šthresholdæ—¶ç”Ÿæˆæ ‘å¶ï¼Œå¦åˆ™ç»§ç»­åˆ†ç±»</p></li><li><p>thresholdçš„è®¾ç½®ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¤æ‚åº¦å‡½æ•°æ¥è®¾ç½®ï¼Œå€¼è¶Šå°äº§ç”Ÿçš„æ ‘ä¼šè¶Šå¤§å¯¼è‡´è¿‡æ‹Ÿåˆåˆ†çº¿è¶Šå¤§ï¼Œè¿™é‡ŒåŒæ ·å¼•å…¥æƒ©ç½šçš„æ¦‚å¿µ</p></li><li><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1gzm3mxfft7j20yq0nomz1.jpg" alt="image-20220222105230123" /></p></li><li><p>åŒæ ·çš„ï¼Œä¸åˆ©ç”¨å‡å€¼æˆ–è€…ä¸­å€¼ï¼Œå¯ä»¥ä½¿ç”¨çº¿æ€§å›å½’æ‹Ÿåˆé€‰å®šæ ‘å¶ä¸Šçš„å®ä¾‹ï¼Œä½†æ˜¯è¿™æ ·è®¡ç®—å¼€é”€ä¼šæ¯”è¾ƒå¤§</p></li></ol><h3 id="ä»£ç å®ç°"><a class="markdownIt-Anchor" href="#ä»£ç å®ç°"></a> ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> log<br><span class="hljs-keyword">import</span> operator<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">decisionTree</span>():<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">dataLoader</span>(<span class="hljs-params">self,filename</span>):<br>        dataSet = [];<br>        labels = []<br>        i=<span class="hljs-number">1</span><br>        fr = <span class="hljs-built_in">open</span>(filename)<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> fr.readlines():  <span class="hljs-comment"># é€è¡Œè¯»å–ï¼Œæ»¤é™¤ç©ºæ ¼ç­‰</span><br>            lineArr = line.strip().split(<span class="hljs-string">&#x27;,&#x27;</span>)<br>            <span class="hljs-keyword">if</span> i==<span class="hljs-number">1</span>:<br>                labels=lineArr[<span class="hljs-number">1</span>:(<span class="hljs-built_in">len</span>(lineArr)-<span class="hljs-number">1</span>)]<br>                i=i+<span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                dataSet.append(lineArr[<span class="hljs-number">1</span>:])<br>        <span class="hljs-keyword">return</span> dataSet,labels<br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">createExampleDataset</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        è¿”å›ç¤ºä¾‹æ•°æ®ï¼ŒåŒ…æ‹¬datasetã€labels</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        dataSet = [[<span class="hljs-string">&#x27;ç™½&#x27;</span>, <span class="hljs-string">&#x27;é«˜&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>],<br>                   [<span class="hljs-string">&#x27;é»‘&#x27;</span>, <span class="hljs-string">&#x27;é«˜&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>],<br>                   [<span class="hljs-string">&#x27;ç™½&#x27;</span>, <span class="hljs-string">&#x27;é«˜&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>],<br>                   [<span class="hljs-string">&#x27;é»‘&#x27;</span>, <span class="hljs-string">&#x27;ä½&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>],<br>                   [<span class="hljs-string">&#x27;é»‘&#x27;</span>, <span class="hljs-string">&#x27;ä½&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>],<br>                   [<span class="hljs-string">&#x27;é»‘&#x27;</span>, <span class="hljs-string">&#x27;é«˜&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>],<br>                   [<span class="hljs-string">&#x27;ç™½&#x27;</span>, <span class="hljs-string">&#x27;ä½&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>],<br>                   [<span class="hljs-string">&#x27;é»‘&#x27;</span>, <span class="hljs-string">&#x27;é«˜&#x27;</span>, <span class="hljs-string">&#x27;å¥³&#x27;</span>]]<br>        labels = [<span class="hljs-string">&#x27;é¢œè‰²&#x27;</span>, <span class="hljs-string">&#x27;èº«é«˜&#x27;</span>]  <span class="hljs-comment"># ä¸¤ä¸ªç‰¹å¾</span><br>        <span class="hljs-keyword">return</span> dataSet, labels<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calcCrossEntropy</span>(<span class="hljs-params">self, dataSet</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        è®¡ç®—æ•°æ®é›†åˆä¸­çš„æ•°æ®ç†µ</span><br><span class="hljs-string">        return crossEntropy</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        classList = [example[-<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> example <span class="hljs-keyword">in</span> dataSet]<br>        unique,counts=np.unique(classList,return_counts=<span class="hljs-literal">True</span>)<br>        crossEntropy=<span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> count <span class="hljs-keyword">in</span> counts:<br>            crossEntropy+=-<span class="hljs-built_in">float</span>(count/<span class="hljs-built_in">len</span>(classList))*log(<span class="hljs-built_in">float</span>(count/<span class="hljs-built_in">len</span>(classList)),<span class="hljs-number">2</span>)<br>        <span class="hljs-keyword">return</span> crossEntropy<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">chooseBestFeature</span>(<span class="hljs-params">self, dataSet</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        ä»ä¸åŒç‰¹å¾ä¸­é€‰æ‹©äº¤å‰ç†µå·®å€¼æœ€ä½çš„ä½œä¸ºåˆ†ç¦»ç‰¹å¾</span><br><span class="hljs-string">        return bestFeatureä¸‹æ ‡</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br>        bestInfoGain=-<span class="hljs-number">1</span><br>        baseCrossEntropy=self.calcCrossEntropy(dataSet)<br>        numFeature=<span class="hljs-built_in">len</span>(dataSet[<span class="hljs-number">0</span>])-<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numFeature):<br>        <span class="hljs-comment"># æ ¹æ®ä¸åŒç‰¹å¾åˆ†å¼€ï¼Œå¹¶é‡æ–°è®¡ç®—æ ¹æ®æ¯ä¸ªç‰¹å¾å¾—åˆ°çš„äº¤å‰ç†µçš„å’Œ</span><br>            featureList=<span class="hljs-built_in">set</span>([example[i] <span class="hljs-keyword">for</span> example <span class="hljs-keyword">in</span> dataSet])<br>            newCrossEntropy=<span class="hljs-number">0</span><br>            <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> featureList:<br>                subDataSet=self.splitDataSet(dataSet,i,value)<br><br>                newCrossEntropy+=<span class="hljs-built_in">len</span>(subDataSet)/<span class="hljs-built_in">len</span>(dataSet)*self.calcCrossEntropy(subDataSet)<br><br>            infoGain=baseCrossEntropy-newCrossEntropy<br>            <span class="hljs-keyword">if</span> infoGain&gt;bestInfoGain:<br>                bestInfoGain=infoGain<br>                bestFeature=i<br>        <span class="hljs-keyword">return</span> bestFeature<br><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">splitDataSet</span>(<span class="hljs-params">self, dataSet, index,value</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        æ ¹æ®æœ€ä½³çš„ç‰¹å¾åˆ†ç¦»æ•°æ®é›†ï¼Œå½¢æˆæ–°çš„å­é›†</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span><br><br>        subDataSet=[]<br>        <span class="hljs-keyword">for</span> example <span class="hljs-keyword">in</span> dataSet:<br>            <span class="hljs-keyword">if</span> example[index]==value:<br>                temp=example[:index]<br>                temp.extend(example[index+<span class="hljs-number">1</span>:])<br>                subDataSet.append(temp)<br>        <span class="hljs-keyword">return</span> subDataSet<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">ifNodeFeatureIsSame</span>(<span class="hljs-params">self,dataSet</span>):<br>        featureMat = [example[:(<span class="hljs-built_in">len</span>(dataSet[<span class="hljs-number">0</span>])-<span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> example <span class="hljs-keyword">in</span> dataSet]<br>        uniqueFeatureMat=np.unique(featureMat)<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(uniqueFeatureMat) == <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">majorityCount</span>(<span class="hljs-params">self,classList</span>):<br>        className,counts=np.unique(np.array(classList))<br>        <span class="hljs-keyword">return</span> className[np.argmax(counts)]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">createTree</span>(<span class="hljs-params">self,dataSet,labels</span>):<br>        <span class="hljs-comment"># ç”Ÿæˆç»“ç‚¹node</span><br>        classList=[example[-<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> example <span class="hljs-keyword">in</span> dataSet]<br><br>        <span class="hljs-comment"># æƒ…å†µ1ï¼šå½“å‰åˆ†æ”¯ä¸­å…¨éƒ¨éƒ½ä¸ºåŒä¸€ä¸ªå±æ€§ä¸éœ€è¦åˆ†ç±»</span><br>        <span class="hljs-comment"># æƒ…å†µ2ï¼šå½“å‰åˆ†æ”¯ä¸º1é›†åˆä¸éœ€è¦åˆ†ç±»</span><br>        <span class="hljs-comment"># æƒ…å†µ3ï¼šæœ€ä¼˜åŒ–åˆ’åˆ†</span><br><br>        <span class="hljs-keyword">if</span> classList.count(classList[<span class="hljs-number">0</span>])==<span class="hljs-built_in">len</span>(classList):<br>            <span class="hljs-keyword">return</span> classList[<span class="hljs-number">0</span>]<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(labels)==<span class="hljs-number">0</span> <span class="hljs-keyword">or</span> self.ifNodeFeatureIsSame(dataSet):<br>            <span class="hljs-keyword">return</span> self.majorityCount(classList)<br><br>        bestFeature=self.chooseBestFeature(dataSet)<br>        bestFeatureLabel=labels[bestFeature]<br>        myTree=&#123;bestFeatureLabel:&#123;&#125;&#125;<br><br>        <span class="hljs-comment">#åˆ é™¤åŒºåˆ†çš„å±æ€§</span><br>        <span class="hljs-keyword">del</span>(labels[bestFeature])<br><br>        featureValues=[example[bestFeature] <span class="hljs-keyword">for</span> example <span class="hljs-keyword">in</span> dataSet]<br>        uniqueValues=<span class="hljs-built_in">set</span>(featureValues)<br>        <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> uniqueValues:<br>            sublabels=labels[:]<br>            myTree[bestFeatureLabel][value]= \<br>                self.createTree(self.splitDataSet(dataSet, bestFeature, value), sublabels)<br>        <span class="hljs-keyword">return</span> myTree<br><br><br><br><br><span class="hljs-keyword">if</span> __name__==<span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    newTree=decisionTree()<br>    filename=<span class="hljs-string">&#x27;datasets/watermelon.txt&#x27;</span><br>    dataSet,labels=newTree.dataLoader(filename)<br>    <span class="hljs-comment">#æˆ–è€…ç›´æ¥æ ¹æ®ä¾‹å­æ¥</span><br>    <span class="hljs-comment">#dataSet,labels=newTree.createExampleDataset()</span><br>    <span class="hljs-built_in">print</span>(newTree.createTree(dataSet,labels))<br></code></pre></td></tr></table></figure><p>txtæ–‡ä»¶</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs">ç¼–å·,è‰²æ³½,æ ¹è’‚,æ•²å£°,çº¹ç†,è„éƒ¨,è§¦æ„Ÿ,å¥½ç“œ<br>1,é’ç»¿,èœ·ç¼©,æµŠå“,æ¸…æ™°,å‡¹é™·,ç¡¬æ»‘,æ˜¯<br>2,ä¹Œé»‘,èœ·ç¼©,æ²‰é—·,æ¸…æ™°,å‡¹é™·,ç¡¬æ»‘,æ˜¯<br>3,ä¹Œé»‘,èœ·ç¼©,æµŠå“,æ¸…æ™°,å‡¹é™·,ç¡¬æ»‘,æ˜¯<br>4,é’ç»¿,èœ·ç¼©,æ²‰é—·,æ¸…æ™°,å‡¹é™·,ç¡¬æ»‘,æ˜¯<br>5,æµ…ç™½,èœ·ç¼©,æµŠå“,æ¸…æ™°,å‡¹é™·,ç¡¬æ»‘,æ˜¯<br>6,é’ç»¿,ç¨èœ·,æµŠå“,æ¸…æ™°,ç¨å‡¹,è½¯ç²˜,æ˜¯<br>7,ä¹Œé»‘,ç¨èœ·,æµŠå“,ç¨ç³Š,ç¨å‡¹,è½¯ç²˜,æ˜¯<br>8,ä¹Œé»‘,ç¨èœ·,æµŠå“,æ¸…æ™°,ç¨å‡¹,ç¡¬æ»‘,æ˜¯<br>9,ä¹Œé»‘,ç¨èœ·,æ²‰é—·,ç¨ç³Š,ç¨å‡¹,ç¡¬æ»‘,å¦<br>10,é’ç»¿,ç¡¬æŒº,æ¸…è„†,æ¸…æ™°,å¹³å¦,è½¯ç²˜,å¦<br>11,æµ…ç™½,ç¡¬æŒº,æ¸…è„†,æ¨¡ç³Š,å¹³å¦,ç¡¬æ»‘,å¦<br>12,æµ…ç™½,èœ·ç¼©,æµŠå“,æ¨¡ç³Š,å¹³å¦,è½¯ç²˜,å¦<br>13,é’ç»¿,ç¨èœ·,æµŠå“,ç¨ç³Š,å‡¹é™·,ç¡¬æ»‘,å¦<br>14,æµ…ç™½,ç¨èœ·,æ²‰é—·,ç¨ç³Š,å‡¹é™·,ç¡¬æ»‘,å¦<br>15,ä¹Œé»‘,ç¨èœ·,æµŠå“,æ¸…æ™°,ç¨å‡¹,è½¯ç²˜,å¦<br>16,æµ…ç™½,èœ·ç¼©,æµŠå“,æ¨¡ç³Š,å¹³å¦,ç¡¬æ»‘,å¦<br>17,é’ç»¿,èœ·ç¼©,æ²‰é—·,ç¨ç³Š,ç¨å‡¹,ç¡¬æ»‘,å¦<br></code></pre></td></tr></table></figure><h2 id="0x02-å‰ªæå¤„ç†"><a class="markdownIt-Anchor" href="#0x02-å‰ªæå¤„ç†"></a> 0x02 å‰ªæå¤„ç†</h2><p>å…ˆå‰ªæï¼ˆprepruningï¼‰ï¼šåŸºäºè¿‡å°‘å®ä¾‹å†³ç­–æ ‘å¯¼è‡´è¾ƒå¤§æ–¹å·®ï¼Œè¿›è€Œå¯¼è‡´è¾ƒå¤§çš„æ³›åŒ–è¯¯å·®ï¼Œegï¼šåœ¨åˆ°è¾¾ä¸€ä¸ªèŠ‚ç‚¹çš„è®­ç»ƒå®ä¾‹æ ‘å°äºè®­ç»ƒé›†çš„æŸä¸ªç™¾åˆ†æ¯”ï¼ˆ5%ï¼‰ï¼Œåˆ™æ— è®ºæ˜¯å¦ä¸çº¯æˆ–è€…æœ‰é”™è¯¯éƒ½ä¸è¿‘ä¸€æ­¥åˆ†è£‚</p><p>åå‰ªæï¼ˆpostpruningï¼‰ï¼šå›æº¯å…¶ä»–çš„é€‰æ‹©ï¼ˆç•™ä¸ªå‘ï¼Œå›æº¯æ³•è¿˜æ²¡çœ‹ï¼‰ï¼Œæˆ‘ä»¬è®©æ ‘å®Œå…¨å¢é•¿çŸ¥é“æ‰€æœ‰çš„æ ‘å¶éƒ½æ˜¯çº¯çš„å¹¶å…·æœ‰é›¶è®­ç»ƒè¯¯å·®ï¼Œç„¶åæ‰¾å‡ºå¯¼è‡´è¿‡åˆ†æ‹Ÿåˆçš„å­æ ‘å¹¶å‰ªæ‰ã€‚egï¼šæˆ‘ä»¬ä»æœ€åˆçš„è¢«æ ‡è®°çš„æ•°æ®é›†ä¸­ä¿ç•™ä¸€ä¸ªå‰ªæé›†ï¼Œåœ¨è®­ç»ƒé˜¶æ®µä¸é€‚ç”¨ï¼Œå¯¹äºæ¯é¢—å­æ ‘ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªè¢«è¯¥å­æ ‘è¦†ç›–çš„è®­ç»ƒå®ä¾‹æ ‡è®°çš„æ ‘å¶èŠ‚ç‚¹æ›¿ä»£å®ƒï¼Œå¦‚æœè¯¥æ ‘å¶åœ¨å‰ªæé›†åˆä¸Šçš„æ€§èƒ½ä¸å¿…è¯¥å­æ ‘èŒ¶ï¼Œåˆ™å‰ªæ‰è¯¥å­æ ‘å¹¶ä¿ç•™æ ‘å¶èŠ‚ç‚¹å¯å› ä¸ºå­æ ‘çš„é™„åŠ çš„å¤æ‚æ€§æ˜¯ä¸å¿…è¦çš„</p><h2 id="0x03-è¿ç»­ä¸ç¼ºå¤±å€¼å¤„ç†"><a class="markdownIt-Anchor" href="#0x03-è¿ç»­ä¸ç¼ºå¤±å€¼å¤„ç†"></a> 0x03 è¿ç»­ä¸ç¼ºå¤±å€¼å¤„ç†</h2><p>æš‚æ—¶ä¸é‡è¦</p><h2 id="0x04-é¢å¤–çš„ä¸œè¥¿"><a class="markdownIt-Anchor" href="#0x04-é¢å¤–çš„ä¸œè¥¿"></a> 0x04 é¢å¤–çš„ä¸œè¥¿</h2><ul><li>é›†æˆå­¦ä¹ ï¼ˆ ensemble learningï¼‰ï¼šåˆ©ç”¨å¼±å­¦ä¹ å™¨ç»„åˆæ¥å½¢æˆä¸€ä¸ªå¼ºçš„å­¦ä¹ å™¨ï¼ŒåŒ…æ‹¬baggingã€stackingã€boosting</li><li>ç”±baggingå¾—åˆ°çš„éšæœºæ£®æ—ï¼ˆrandom forestï¼‰ã€ç”±boostingå¾—åˆ°çš„GBDTï¼ˆgradient boosting decision treeï¼‰å¹¶XGBOOSTå’ŒlightGBM</li></ul>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS229</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-05-å‚æ•°æ–¹æ³•å’Œéå‚æ•°æ–¹æ³•</title>
    <link href="/posts/f3d9a90.html"/>
    <url>/posts/f3d9a90.html</url>
    
    <content type="html"><![CDATA[<p>åœ¨åˆæ­¥äº†è§£äº†çº¿æ€§æ¨¡å‹ä¹‹åï¼Œæ€»ç»“ä¸€ä¸‹ç®—æ³•çš„ä¸€äº›è§„åˆ™</p><p>ï¼ˆææ–™æ¥è‡ªç½‘ç»œï¼Œå¯èƒ½ä¼šä¾µæƒï¼‰</p><span id="more"></span><h1 id="0x00-å¼•è¨€"><a class="markdownIt-Anchor" href="#0x00-å¼•è¨€"></a> 0X00 å¼•è¨€</h1><p>ï¼ˆå®éªŒè®¨è®ºå¦‚ä½•åœ¨ä½¿ç”¨æ¦‚ç‡å¯¹ä¸ç¡®å®šæ€§å»ºæ¨¡ï¼Œç•™ä¸ªå‘ä¹‹åå†è¯´ï¼Œå¦‚ä½•ä½œå‡ºæœ€ä¼˜å†³ç­–ï¼‰ç°åœ¨è€ƒè™‘å¦‚ä½•ä»ç»™å®šçš„è®­ç»ƒé›†ä¸­ä¼°è®¡è¿™äº›æ¦‚ç‡ï¼Œä»åˆ†ç±»å’Œå›å½’çš„å‚æ•°æ–¹æ³•å¼€å§‹</p><p>å‚æ•°æ–¹æ³•ï¼Œè¿™é‡Œå‡è®¾æ ·æœ¬å–è‡ªæœä»å·²çŸ¥æ¨¡å‹çš„æŸä¸ªåˆ†å¸ƒï¼ˆeg.é«˜æ–¯åˆ†å¸ƒï¼‰ï¼Œæ¨¡å‹å®šä¹‰åœ¨æœ‰æ•ˆç»Ÿè®¡é‡ï¼ˆeg. æ–¹å·®å’Œå‡å€¼ï¼‰ï¼Œä¸€æ—¦ä»æ ·æœ¬ä¸­ä¼°è®¡å‚æ•°å°±çŸ¥é“äº†æ•´ä¸ªåˆ†å¸ƒï¼Œæ–¹æ³•ä¸»è¦åˆ†ä¸ºæœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆmaximum likelihood estimationï¼‰ã€è´å¶æ–¯ä¼°è®¡ï¼ˆBayesâ€˜ estimatorï¼‰ç­‰</p><p>å‚æ•°æ–¹æ³•çš„ä¼˜ç‚¹ï¼šå°†ä¼°è®¡æ¦‚ç‡å¯†åº¦ã€åˆ¤åˆ«å¼æˆ–è€…å›å½’å‡½æ•°é—®é¢˜å½’ç»“æˆä¸ºå°‘é‡å‚æ•°å€¼</p><p>å‚æ•°æ–¹æ³•çš„ç¼ºç‚¹ï¼šå‡è®¾å¹¶ä¸æ˜¯æ€»æ˜¯æ•´ç†çš„ï¼Œå¹¶ä¸”ä¸æˆç«‹ä¼šå¯¼è‡´è¾ƒå¤§çš„è¯¯å·®</p><p>éå‚æ•°æ–¹æ³•ï¼ˆnonparametric estimationï¼‰ï¼šç®—æ³•ä½¿ç”¨åˆé€‚çš„è·ç¦»åº¦é‡ï¼Œä»è®­ç»ƒé›†ä¸­æ‰¾å‡ºç›¸ä¼¼çš„å®ä¾‹ï¼Œå¹¶ä¸”ç”±ä»–ä»¬æ’å€¼å¾—åˆ°æ­£ç¡®çš„è¾“å‡ºï¼ˆassumptionï¼šä¸–ç•Œæ˜¯å¹³ç¨³çš„ï¼Œå¹¶ä¸”æ— è®ºæ˜¯å¯†åº¦ã€åˆ¤åˆ«å¼è¿˜æ˜¯å›å½’å‡½æ•°éƒ½èƒ½ç¼“æ…¢å˜åŒ–ï¼Œç›¸ä¼¼çš„ä¾‹å­æ„å‘³è¿™ç›¸ä¼¼çš„äº‹ç‰©ï¼‰</p><hr /><p>åŸºæœ¬æ¦‚å¿µ</p><p>å¯†åº¦ä¼°è®¡ï¼ˆdensity estimationï¼‰</p><p>å¯†åº¦ä¼°è®¡æ˜¯ä¼°è®¡<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span>çš„ä¸€èˆ¬æƒ…å†µï¼Œåœ¨åˆ†ç±»ä¸­ï¼Œå…¶ä¸­ä¼°è®¡å¯†åº¦æ˜¯èƒ½å¤Ÿè®¡ç®—åéªŒæ¦‚ç‡<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><msub><mi>C</mi><mi>i</mi></msub><mi mathvariant="normal">/</mi><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">P(C_i/x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">/</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span>å¹¶åšå†³ç­–çš„ç±»å¯†åº¦<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>x</mi><mi mathvariant="normal">/</mi><msub><mi>C</mi><mi>i</mi></msub><mo>)</mo><mi>a</mi><mi>n</mi><mi>d</mi><mi>P</mi><mo>(</mo><msub><mi>C</mi><mi>i</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">P(x/C_i) and P(C_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.07153em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span>ï¼›åœ¨å›å½’ä¸­ï¼Œä¼°è®¡çš„å¯†åº¦æ˜¯ :<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>x</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">P(y|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit">x</span><span class="mclose">)</span></span></span></span></p><hr /><h1 id="0x01-å‚æ•°æ–¹æ³•"><a class="markdownIt-Anchor" href="#0x01-å‚æ•°æ–¹æ³•"></a> 0X01 å‚æ•°æ–¹æ³•</h1><h2 id="01-1-methodæœ€å¤§ä¼¼ç„¶ä¼°è®¡mlemaximum-likelihood-estimation"><a class="markdownIt-Anchor" href="#01-1-methodæœ€å¤§ä¼¼ç„¶ä¼°è®¡mlemaximum-likelihood-estimation"></a> 01-1 methodâ€”æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼ˆMLEï¼Œmaximum likelihood estimationï¼‰</h2><h3 id="å·²çŸ¥"><a class="markdownIt-Anchor" href="#å·²çŸ¥"></a> å·²çŸ¥</h3><p>æ ·æœ¬å‚æ•°ï¼Œå¤šä¸ªç‹¬ç«‹åŒåˆ†å¸ƒï¼ˆi.i.dï¼‰çš„æ ·æœ¬é›†ï¼š<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><msup><mi>x</mi><mi>t</mi></msup><msubsup><mo>}</mo><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup></mrow><annotation encoding="application/x-tex">\{x^t\}_{t=1}^m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.7935559999999999em;"></span><span class="strut bottom" style="height:1.043556em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">{</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">}</span><span class="vlist"><span style="top:0.24810799999999997em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span>ï¼ŒåŒæ—¶å‡è®¾æ ·æœ¬éƒ½æ˜¯<strong>æŸä¸ªå®šä¹‰åœ¨å‚æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span>çš„å·²çŸ¥æ¦‚ç‡å¯†åº¦æ—ä¸­æŠ½å–çš„å®ä¾‹ï¼š</strong></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>x</mi><mi>i</mi></msup><mo>âˆˆ</mo><mi>p</mi><mo>(</mo><mi>x</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">x^i\in p(x|\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8746639999999999em;"></span><span class="strut bottom" style="height:1.1246639999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">âˆˆ</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></p><h3 id="æ±‚"><a class="markdownIt-Anchor" href="#æ±‚"></a> æ±‚</h3><p>æœ€æ„Ÿå…´è¶£æ˜¯æ‰¾åˆ°å‚æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span></p><h3 id="è§£ç­”"><a class="markdownIt-Anchor" href="#è§£ç­”"></a> è§£ç­”ï¼š</h3><p>å› ä¸ºæ¯ä¸ªæ ·æœ¬æ˜¯ç‹¬ç«‹åˆ†å¸ƒçš„ï¼Œæ‰€ä»¥ç»™å®šå‚æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span>,æ ·æœ¬çš„ä¼¼ç„¶likelihoodæ˜¯å•ç‚¹ä¼¼ç„¶çš„ä¹˜ç§¯ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo><mo>=</mo><msubsup><mo>âˆ</mo><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></msubsup><mi>p</mi><mo>(</mo><msup><mi>x</mi><mi>t</mi></msup><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">l(\theta|X)=\prod_{t=1}^Mp(x^t|\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.8283360000000002em;"></span><span class="strut bottom" style="height:3.0954490000000003em;vertical-align:-1.267113em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mrel">=</span><span class="mop op-limits"><span class="vlist"><span style="top:1.1671129999999998em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.000005000000000143778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span><span class="op-symbol large-op mop">âˆ</span></span></span><span style="top:-1.2500050000000003em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">M</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></p><p>ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œå°†ä¹˜ç§¯è½¬æ¢ä¸ºæ±‚å’Œï¼Œå¹¶ä¸”å‡è®¾æŸç§å¯†åº¦æ—ï¼ˆeg. ä¹‹å‰çš„exp familyï¼‰è¿›ä¸€æ­¥ç®€åŒ–è®¡ç®—é‡</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo><mo>=</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></msubsup><mi>l</mi><mi>o</mi><mi>g</mi><mo>[</mo><mi>p</mi><mo>(</mo><msup><mi>x</mi><mi>t</mi></msup><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo>)</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">L(\theta|X)=\Sigma_{t=1}^Mlog[p(x^t|\theta)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">L</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">M</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mclose">]</span></span></span></span></span></p><p>å¸¸è§çš„ä¼¼ç„¶å‡½æ•°æ˜¯convexçš„ï¼Œæ‰€ä»¥ç›´æ¥æ±‚å¯¼å°±è¡Œäº†</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>L</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>Î¸</mi></mrow></mfrac><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\frac{\partial L(\theta|X)}{\partial \theta}=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.113em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit">L</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span></span></span></p><h3 id="eg"><a class="markdownIt-Anchor" href="#eg"></a> egï¼š</h3><p>å…³äºæŒ‡æ•°æ—çš„æ¨å¯¼</p><h2 id="01-2-methodæœ€å¤§åéªŒä¼°è®¡mapmaximum-a-posterior"><a class="markdownIt-Anchor" href="#01-2-methodæœ€å¤§åéªŒä¼°è®¡mapmaximum-a-posterior"></a> 01-2 methodâ€”æœ€å¤§åéªŒä¼°è®¡ï¼ˆMAPï¼Œmaximum A posteriorï¼‰</h2><h3 id="å·²çŸ¥-2"><a class="markdownIt-Anchor" href="#å·²çŸ¥-2"></a> å·²çŸ¥</h3><p>åœ¨MLEçš„likelihoodåŸºç¡€ä¸Šï¼Œæˆ‘ä»¬åˆçŸ¥é“äº†å‚æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span>çš„å…ˆéªŒprioråˆ†å¸ƒ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p(\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></p><h3 id="æ±‚-2"><a class="markdownIt-Anchor" href="#æ±‚-2"></a> æ±‚</h3><p>åœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬ä¾æ—§å¸Œæœ›å¾—åˆ°æœ€ä½³çš„å‚æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span></p><h3 id="è§£"><a class="markdownIt-Anchor" href="#è§£"></a> è§£</h3><p>æ ¹æ®è´å¶æ–¯è§„åˆ™ï¼ŒåéªŒå¯†åº¦posterior density,å‘Šè¯‰æˆ‘ä»¬åœ¨çœ‹åˆ°æ ·æœ¬ä¹‹å<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span>çš„å¯èƒ½å–å€¼ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mi>p</mi><mo>(</mo><mi>X</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo>)</mo><mi>p</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo></mrow><mrow><mi>P</mi><mo>(</mo><mi>X</mi><mo>)</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>p</mi><mo>(</mo><mi>X</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo>)</mo><mi>p</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo></mrow><mrow><mo>âˆ«</mo><mi>p</mi><mo>(</mo><mi>X</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo>)</mo><mi>p</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mi>d</mi><mi>Î¸</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">p(\theta|X)=\frac{p(X|\theta)p(\theta)}{P(X)}=\frac{p(X|\theta)p(\theta)}{\int p(X|\theta)p(\theta)d\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.42812em;vertical-align:-1.00112em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.6950000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="op-symbol small-op mop" style="margin-right:0.19445em;top:-0.0005599999999999772em;">âˆ«</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathit">d</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼ŒçŸ¥é“äº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p(\theta|X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span>ï¼Œä¹‹åæƒ³è¦ä¼°è®¡xåˆ™ï¼š</p>p(x|X)=\int p(x,\theta|X)d \theta\\=\int p(x|\theta,X)p(\theta|X)d\theta\\=\int p(x|\theta)p(\theta|X)d \theta<p>æ‰€ä»¥çŸ¥é“äº†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p(\theta|X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span>å°±çŸ¥é“äº†å…³äºåˆ†å¸ƒçš„ä¸€åˆ‡ï¼Œä½†æ˜¯è¿™ä¸ªç§¯åˆ†æ¯”è¾ƒå›°éš¾ï¼Œå› æ­¤ä¸ºäº†ç”¨ç®€ä¾¿ï¼Œæˆ‘ä»¬å¸Œæœ›å°†<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">p(\theta|X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span>çœ‹æˆä¸€ä¸ªå¸¸æ•°ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î¸</mi><mrow><mi>M</mi><mi>A</mi><mi>P</mi></mrow></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>g</mi><mi>m</mi><mi>a</mi><msub><mi>x</mi><mrow><mi>Î¸</mi></mrow></msub><mi>p</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\theta_{MAP}=argmax_{\theta}p(\theta|X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span></span></p><h2 id="01-3-methodè´å¶æ–¯ä¼°è®¡bayesian-estimation"><a class="markdownIt-Anchor" href="#01-3-methodè´å¶æ–¯ä¼°è®¡bayesian-estimation"></a> 01-3 methodâ€”è´å¶æ–¯ä¼°è®¡ï¼ˆBayesian estimationï¼‰</h2><p>å’ŒMAPç›¸ä¼¼ï¼Œä½†æ˜¯å¯¹äº<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span> å¤„ç†å¹¶ä¸æ˜¯æœ€å¤§å€¼ï¼Œè€Œæ˜¯å‡å€¼</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>Î¸</mi><mrow><mi>b</mi><mi>a</mi><mi>y</mi><mi>e</mi><mi>s</mi></mrow></msub><mo>=</mo><mi>E</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\theta_{bayes}=E(\theta|X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">b</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathit">e</span><span class="mord mathit">s</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span></span></p><h2 id="01-4-exampleå‚æ•°ä¼°è®¡"><a class="markdownIt-Anchor" href="#01-4-exampleå‚æ•°ä¼°è®¡"></a> 01-4 exampleâ€”å‚æ•°ä¼°è®¡</h2><p>æˆ‘ä»¬å‡è®¾</p>x^t=N(\theta,\sigma^2)\\ \theta=N(\mu_0,\sigma_0^2)\\ å…¶ä¸­\mu_0,\sigma_0^2,\sigma^2å·²çŸ¥<p>ç”±æ­¤çŸ¥é“äº†</p><p>ä¼¼ç„¶å‡½æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>X</mi><mi mathvariant="normal">âˆ£</mi><mi>Î¸</mi><mo>)</mo><mo>=</mo><msubsup><mo>âˆ</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><mfrac><mrow><mn>1</mn></mrow><mrow><msqrt><mo>(</mo></msqrt><mn>2</mn><mo>âˆ—</mo><mi>Ï€</mi><mo>)</mo><mo>âˆ—</mo><mi>Ïƒ</mi></mrow></mfrac><mo>âˆ—</mo><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mfrac><mrow><mo>(</mo><msup><mi>x</mi><mi>t</mi></msup><mo>âˆ’</mo><mi>Î¸</mi><msup><mo>)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>Ïƒ</mi><mn>2</mn></msup></mrow></mfrac><mo>)</mo></mrow><annotation encoding="application/x-tex">p(X|\theta)=\prod_{i=1}^m\frac{1}{\sqrt(2*\pi)*\sigma}*exp(-\frac{(x^t-\theta)^2}{2\sigma^2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.06132em;"></span><span class="strut bottom" style="height:1.9113200000000001em;vertical-align:-0.8500000000000001em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mop"><span class="op-symbol small-op mop" style="top:-0.0000050000000000050004em;">âˆ</span><span class="vlist"><span style="top:0.30001em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.364em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.5700000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="sqrt mord"><span class="sqrt-sign" style="top:0.11428571428571432em;"><span class="style-wrap reset-scriptstyle textstyle uncramped">âˆš</span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1.4285714285714286em;">â€‹</span></span><span class="mopen">(</span></span><span style="top:-0.9714285714285715em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1.4285714285714286em;">â€‹</span></span><span class="reset-scriptstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1.4285714285714286em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">2</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mclose">)</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mbin">âˆ—</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="vlist"><span style="top:-0.289em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathit">t</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>ã€</p><p>å…ˆéªŒå‚æ•°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>(</mo><mi>Î¸</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><msqrt><mo>(</mo></msqrt><mn>2</mn><mo>âˆ—</mo><mi>Ï€</mi><mo>)</mo><mo>âˆ—</mo><msub><mi>Ïƒ</mi><mn>0</mn></msub></mrow></mfrac><mo>âˆ—</mo><mi>e</mi><mi>x</mi><mi>p</mi><mo>(</mo><mo>âˆ’</mo><mfrac><mrow><mo>(</mo><mi>Î¸</mi><mo>âˆ’</mo><msub><mi>Î¼</mi><mn>0</mn></msub><msup><mo>)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><msubsup><mi>Ïƒ</mi><mn>0</mn><mn>2</mn></msubsup></mrow></mfrac><mo>)</mo></mrow><annotation encoding="application/x-tex">p(\theta)=\frac{1}{\sqrt(2*\pi)*\sigma_0}*exp(-\frac{(\theta-\mu_0)^2}{2\sigma_0^2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.06132em;"></span><span class="strut bottom" style="height:1.9113200000000001em;vertical-align:-0.8500000000000001em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.5700000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="sqrt mord"><span class="sqrt-sign" style="top:0.11428571428571432em;"><span class="style-wrap reset-scriptstyle textstyle uncramped">âˆš</span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1.4285714285714286em;">â€‹</span></span><span class="mopen">(</span></span><span style="top:-0.9714285714285715em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1.4285714285714286em;">â€‹</span></span><span class="reset-scriptstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1.4285714285714286em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">2</span><span class="mbin">âˆ—</span><span class="mord mathit" style="margin-right:0.03588em;">Ï€</span><span class="mclose">)</span><span class="mbin">âˆ—</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mbin">âˆ—</span><span class="mord mathit">e</span><span class="mord mathit">x</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord">âˆ’</span><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.37358em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ïƒ</span><span class="vlist"><span style="top:0.27551428571428577em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">0</span></span></span><span style="top:-0.34480000000000005em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.485em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">Î¼</span><span class="vlist"><span style="top:0.15em;margin-right:0.07142857142857144em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle cramped"><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></p><p>ç”±æ­¤å¾—åˆ°<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>E</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo><mtext>Â </mtext><mi>o</mi><mi>r</mi><mtext>Â </mtext><mi>a</mi><mi>r</mi><mi>g</mi><mi>m</mi><mi>a</mi><mi>x</mi><mi>P</mi><mo>(</mo><mi>Î¸</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">E(\theta|X)\ or\ argmaxP(\theta|X)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mord mspace">Â </span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mspace">Â </span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span></span></span></span></p><h3 id="01-5-discussion-è®¨è®º"><a class="markdownIt-Anchor" href="#01-5-discussion-è®¨è®º"></a> 01-5 discussion â€”è®¨è®º</h3><ul><li>MAPå’Œè´å¶æ–¯ä¼°è®¡éƒ½å°†æ•´ä¸ªåéªŒå¯†åº¦å½’çº¦åˆ°å•ä¸ªç‚¹ä¸”æŸå¤±ä¿¡æ¯ï¼Œé™¤éåéªŒå•å³°çš„ä¸”è¿™äº›ç‚¹å‘¨å›´æœ‰ä¸€ä¸ªçª„å³°ï¼Œä½†æ˜¯éšç€è®¡ç®—èƒ½åŠ›çš„æé«˜è›®å¯ä»¥ä½¿ç”¨è’™ç‰¹å¡æ´›æˆ–è€…è¿‘ä¼¼æ–¹æ³•æ¥è®¡ç®—æ•´ä¸ªç§¯åˆ†</li><li>ï¼ˆbiasï½œvariance dilemmaï¼‰ï¼Œå¸¸è§çš„è§£å†³æ–¹æ³•<ul><li>äº¤å‰éªŒè¯ cross-validationè®­ç»ƒçœ‹æŸå¤±å‡½æ•°çš„â€œæ‹ç‚¹â€</li><li>æ­£åˆ™åŒ–regularizationï¼šE=æ•°æ®ä¸Šè¯¯å·®+a*æ¨¡å‹å¤æ‚åº¦</li><li>æ­£åˆ™åŒ–å¦å¤–ä¸€ä¸ªè§’åº¦ï¼šE=è®­ç»ƒè¯¯å·®+a*åå·®çš„ä¹è§‚é¡¹ï¼Œåˆ©ç”¨AICï¼ˆAkaikeâ€˜s information criterionï¼‰å’ŒBICï¼ˆBayesian information criterionï¼‰</li><li>ç»“æ„é£é™©æœ€å°åŒ–ï¼ˆSRMï¼Œstructural risk minimizationï¼‰å°†æ¨¡å‹é›†åˆæŒ‰ç…§å¤æ‚ç¨‹åº¦ï¼ˆéšæœºå˜é‡çš„ä¸ªæ•°ï¼Œæˆ–è€…VCç»´ï¼‰æ’åºä¸€æ¬¡è®­ç»ƒ</li><li>æœ€å°æè¿°é•¿åº¦ï¼ˆminimum description lengthï¼ŒMDLï¼‰ï¼Œåˆ©ç”¨ä¿¡æ¯è®ºä¸­çš„kolmogorovå¤æ‚åº¦åº¦é‡</li></ul></li></ul><h1 id="0x02-åŠå‚æ•°æ–¹æ³•"><a class="markdownIt-Anchor" href="#0x02-åŠå‚æ•°æ–¹æ³•"></a> 0X02 åŠå‚æ•°æ–¹æ³•</h1><p>å¾…å®š</p><h1 id="0x03-éå‚æ•°æ–¹æ³•"><a class="markdownIt-Anchor" href="#0x03-éå‚æ•°æ–¹æ³•"></a> 0X03 éå‚æ•°æ–¹æ³•</h1><p>ä¸åŒçš„éå‚æ•°æ–¹æ³•ä¼šå®šä¹‰ä¸åŒç›¸ä¼¼æ€§ or æˆ–è€…ä¸åŒçš„å®šä¹‰æ’å€¼çš„æ–¹æ³•ï¼Œåœ¨éå‚æ•°æ¨¡å‹ä¸­ä¸å­˜åœ¨å•ä¸ªå…¨å±€æ¨¡å‹ï¼Œéœ€è¦æ—¶éœ€è¦æœ‰å±€éƒ¨æ¨¡å‹åªæ”¶åˆ°é‚»è¿‘è®­ç»ƒå®ä¾‹çš„å½±å“</p><p>å¸¸è§çš„æœºå™¨å­¦ä¹ ä¸­éå‚æ•°æ–¹æ³•åˆè¢«ç§°ä¸ºinstance-basedæˆ–è€…memory-basedæ–¹æ³•</p><h3 id="03-1-å¯†åº¦ä¼°è®¡"><a class="markdownIt-Anchor" href="#03-1-å¯†åº¦ä¼°è®¡"></a> 03-1 å¯†åº¦ä¼°è®¡</h3><ul><li>ç›´æ–¹å›¾ä¼°è®¡ histogram</li><li>è´¨æœ´ä¼°è®¡ naive estimator</li><li>æ ¸ä¼°è®¡ kernel estimator</li><li>kæœ€è¿‘é‚»ä¼°è®¡ k-nearest neighborï¼Œk-nn</li></ul><p>K-NNç®—æ³•</p><blockquote><p>1 è®¡ç®—æµ‹è¯•å¯¹è±¡åˆ°è®­ç»ƒé›†ä¸­æ¯ä¸ªå¯¹è±¡çš„è·ç¦»<br />2 æŒ‰ç…§è·ç¦»çš„è¿œè¿‘æ’åº<br />3 é€‰å–ä¸å½“å‰æµ‹è¯•å¯¹è±¡æœ€è¿‘çš„kçš„è®­ç»ƒå¯¹è±¡ï¼Œä½œä¸ºè¯¥æµ‹è¯•å¯¹è±¡çš„é‚»å±…<br />4 ç»Ÿè®¡è¿™ké‚»å±…çš„ç±»åˆ«é¢‘ç‡<br />5 é€‰æ‹©kä¸ªé‚»å±…ä¸­é¢‘ç‡æœ€é«˜çš„ç±»åˆ«ï¼Œä½œä¸ºæµ‹è¯•å¯¹è±¡çš„ç±»åˆ«</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">knn</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">loadDataset</span>(<span class="hljs-params">self,filename</span>):<br>        <span class="hljs-comment"># å€Ÿç”¨SVMçš„æ•°æ®é›†ï¼Œä½†æ˜¯è¿™é‡Œä½¿ç”¨numpyè¿”å›np.arrayæ•°æ®</span><br>        dataMat = [];<br>        labelMat = []<br>        fr = <span class="hljs-built_in">open</span>(filename)<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> fr.readlines():  <span class="hljs-comment"># é€è¡Œè¯»å–ï¼Œæ»¤é™¤ç©ºæ ¼ç­‰</span><br>            lineArr = line.strip().split(<span class="hljs-string">&#x27;\t&#x27;</span>)<br>            dataMat.append([<span class="hljs-built_in">float</span>(lineArr[<span class="hljs-number">0</span>]), <span class="hljs-built_in">float</span>(lineArr[<span class="hljs-number">1</span>])])  <span class="hljs-comment"># æ·»åŠ æ•°æ®</span><br>            labelMat.append(<span class="hljs-built_in">float</span>(lineArr[<span class="hljs-number">2</span>]))  <span class="hljs-comment"># æ·»åŠ æ ‡ç­¾</span><br>        dataMat=np.array(dataMat)<br>        self.dataMat=dataMat<br>        self.labelMat=labelMat<br><br>    <span class="hljs-keyword">def</span>  <span class="hljs-title function_">visualDataset</span>(<span class="hljs-params">self</span>):<br>        sns.scatterplot(self.dataMat[:, <span class="hljs-number">0</span>],self.dataMat[:, <span class="hljs-number">1</span>],hue=self.labelMat)<br>        plt.show()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>(<span class="hljs-params">self,<span class="hljs-built_in">input</span>,k</span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">distance</span>(<span class="hljs-params">point</span>):<br>            points=np.tile(point,(self.dataMat.shape[<span class="hljs-number">0</span>],<span class="hljs-number">1</span>))<br>            dis=np.linalg.norm(points - self.dataMat,axis=<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> dis<br>        dis=distance(<span class="hljs-built_in">input</span>)<br>        target=np.array(self.labelMat)[np.argsort(dis)&lt;k]<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span>(target)&gt;<span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    model=knn()<br>    model.loadDataset(<span class="hljs-string">&#x27;CS229_2018autumn/ProblemSet(è¯¾åä½œä¸šï¼‰/codeByhand/datasets/testSet.txt&#x27;</span>)<br>    model.visualDataset()<br>    example=[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]<br>    <span class="hljs-built_in">print</span>(model.predict(example,<span class="hljs-number">6</span>))<br></code></pre></td></tr></table></figure><h3 id="03-2-åˆ†ç±»"><a class="markdownIt-Anchor" href="#03-2-åˆ†ç±»"></a> 03-2 åˆ†ç±»</h3><p>ä¸Šæ¬¡çš„SVMç®—æ³•</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>è§£å†³é«˜ç»´ç‰¹å¾çš„åˆ†ç±»é—®é¢˜å’Œå›å½’é—®é¢˜å¾ˆæœ‰æ•ˆ,åœ¨ç‰¹å¾ç»´åº¦å¤§äºæ ·æœ¬æ•°æ—¶ä¾ç„¶æœ‰å¾ˆå¥½çš„æ•ˆæœã€‚</li><li>ä»…ä»…ä½¿ç”¨ä¸€éƒ¨åˆ†æ”¯æŒå‘é‡æ¥åšè¶…å¹³é¢çš„å†³ç­–ï¼Œæ— éœ€ä¾èµ–å…¨éƒ¨æ•°æ®ã€‚</li><li>æœ‰å¤§é‡çš„æ ¸å‡½æ•°å¯ä»¥ä½¿ç”¨ï¼Œä»è€Œå¯ä»¥å¾ˆçµæ´»çš„æ¥è§£å†³å„ç§éçº¿æ€§çš„åˆ†ç±»å›å½’é—®é¢˜ã€‚</li><li>æ ·æœ¬é‡ä¸æ˜¯æµ·é‡æ•°æ®çš„æ—¶å€™ï¼Œåˆ†ç±»å‡†ç¡®ç‡é«˜ï¼Œæ³›åŒ–èƒ½åŠ›å¼ºã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><ul><li>å¦‚æœç‰¹å¾ç»´åº¦è¿œè¿œå¤§äºæ ·æœ¬æ•°ï¼Œåˆ™SVMè¡¨ç°ä¸€èˆ¬ã€‚</li><li>SVMåœ¨æ ·æœ¬é‡éå¸¸å¤§ï¼Œæ ¸å‡½æ•°æ˜ å°„ç»´åº¦éå¸¸é«˜æ—¶ï¼Œè®¡ç®—é‡è¿‡å¤§ï¼Œä¸å¤ªé€‚åˆä½¿ç”¨ã€‚</li><li>éçº¿æ€§é—®é¢˜çš„æ ¸å‡½æ•°çš„é€‰æ‹©æ²¡æœ‰é€šç”¨æ ‡å‡†ï¼Œéš¾ä»¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ ¸å‡½æ•°ã€‚</li><li>SVMå¯¹ç¼ºå¤±æ•°æ®æ•æ„Ÿã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS229</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-02--æ”¯æŒå‘é‡æœºSVM</title>
    <link href="/posts/1b530e1a.html"/>
    <url>/posts/1b530e1a.html</url>
    
    <content type="html"><![CDATA[<p>è®¨è®ºä¸€ç§ä¸åŒçš„çº¿æ€§åˆ†ç±»å’Œå›å½’æ–¹æ³•ï¼Œæ¯ç§å­¦ä¹ ç®—æ³•éƒ½å…·æœ‰ä¸åŒçš„å½’çº³åå€šï¼Œåšä¸åŒçš„å‡è®¾ï¼Œå®šä¹‰ä¸åŒçš„ç›®æ ‡å‡½æ•°ï¼Œå› æ­¤å¯èƒ½æ‰¾åˆ°ä¸åŒçš„æ¨¡å‹ Support Vector Machine</p><span id="more"></span><h2 id="0x01-å¼•è¨€"><a class="markdownIt-Anchor" href="#0x01-å¼•è¨€"></a> 0x01 å¼•è¨€</h2><p>æ”¯æŒå‘é‡æœºä½¿ç”¨VapnikåŸåˆ™</p><blockquote><p>ä¸è¦åœ¨è§£å†³å®é™…é—®é¢˜ä¹‹å‰æŠŠè§£å†³ä¸€ä¸ªæ›´å¤æ‚çš„é—®é¢˜ä½œä¸ºç¬¬ä¸€æ­¥ï¼ˆvapnikï¼Œ1995ï¼‰</p></blockquote><p>è®­ç»ƒåï¼Œçº¿æ€§æ¨¡å‹çš„å‚æ•°ï¼ˆæƒé‡å‘é‡ï¼‰å¯ä»¥ç”¨è®­ç»ƒé›†çš„ä¸€ä¸ªå­é›†è¡¨ç¤ºï¼Œè¿™ä¸ªå­é›†ç§°ä¸ºæ”¯æŒå‘é‡support vectorã€‚å¯¹äºåˆ†ç±»è¿™äº›æ˜¯é è¿‘è¾¹ç•Œçš„å®ä¾‹ï¼Œå› æ­¤çŸ¥é“å®ƒä»¬å¯ä»¥æå–çŸ¥è¯†ï¼šè¿™äº›äº‹ä¸¤ä¸ªç±»ä¹‹é—´çš„è¾¹ç•Œé™„è¿‘ã€ä¸ç¡®å®šæˆ–æœ‰é”™è¯¯çš„å®ä¾‹ï¼Œå®ƒä»¬çš„ä¸ªæ•°ç»™æˆ‘ä»¬æä¾›äº†èŒƒåŒ–è¯¯å·®çš„ä¸€ä¸ªä¼°è®¡ï¼Œå¹¶ä¸”æ­£å¦‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢çœ‹åˆ°çš„ï¼Œèƒ½å¤Ÿç”¨å®ä¾‹é›†è¡¨ç¤ºæ¨¡å‹å‚æ•°è¿›è¡Œæ ¸åŒ–</p><p>å…¶æ€»ä½“æ¡†æ¶ï¼šæ˜¯ä¸€ç§åˆ†ç±»ç®—æ³•ï¼Œä¸»è¦åº”ç”¨äºäºŒåˆ†ç±»ç®—æ³•ï¼Œé€šè¿‡å®šä½ä¸¤ç±»æ•°æ®åœ¨é›†åˆç©ºé—´ä¸­çš„marginï¼Œæ¥ç¡®å®šåˆ†ç±»èµ·ï¼Œä¸»è¦æ­¥éª¤åˆ†ä¸ºï¼š</p><ol><li>ï¼ˆå»ºç«‹æ¨¡å‹ï¼‰å°†äºŒåˆ†ç±»é—®é¢˜è½¬æ¢æˆä¸ºä¸€ä¸ªä¼˜åŒ–é—®é¢˜</li><li>ï¼ˆæ±‚è§£æ¨¡å‹ï¼‰åˆ©ç”¨SMOç®—æ³•ã€æ‹‰æ ¼æœ—æ—¥å¯¹å¶ã€KKTæ¡ä»¶æ¥æ±‚è§£ç®€åŒ–ä¼˜åŒ–é—®é¢˜</li><li>ï¼ˆåˆ†ç±»è®¨è®ºï¼‰ä¹‹ååˆ©ç”¨æ¾å¼›å˜é‡ã€æ ¸å‡½æ•°ã€æƒ©ç½šå› å­ç­‰å¯¹ä¸åŒæƒ…å†µä¸‹çš„ä¼˜åŒ–é—®é¢˜è¿›è¡Œæ±‚è§£</li></ol><p>å®ƒçš„ä¼˜ç‚¹å’Œç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><ul><li>ä¼˜ç‚¹ï¼šå‚æ•°éå¸¸å°‘ï¼Œä¸åƒlogistic regressionè¿˜å…·æœ‰è¶…å‚æ•°ï¼Œè™½ç„¶æ¯”ç¥ç»ç½‘ç»œæ•ˆæœå·®ï¼Œä½†æ˜¯å¾ˆç®€å•</li><li>ç¼ºç‚¹ï¼š</li></ul><h2 id="0x02-å»ºç«‹æ¨¡å‹"><a class="markdownIt-Anchor" href="#0x02-å»ºç«‹æ¨¡å‹"></a> 0x02 å»ºç«‹æ¨¡å‹</h2><h3 id="ç¬¦å·è¯´æ˜notation"><a class="markdownIt-Anchor" href="#ç¬¦å·è¯´æ˜notation"></a> ç¬¦å·è¯´æ˜ï¼ˆnotationï¼‰</h3>input: X=(x_1,...,x_n)\\labelsï¼šy \in \{-1,1\}\\hyperplane:\omega^T*X+b(ç­‰ä»·äºä¹‹å‰çš„\theta^T*X)\\g(Z)=\begin {cases}1 \ if\ Z>=0\\-1\ if\ otherwise\end{cases}<p>æ•°æ®é›†å’Œè¶…å¹³é¢çš„è·ç¦»</p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gz2vg5c19fj30l00g8t8v.jpg" alt="image-20220205194330329" style="zoom:50%;" /><h3 id="å®šä¹‰è¾¹ç¼˜margin"><a class="markdownIt-Anchor" href="#å®šä¹‰è¾¹ç¼˜margin"></a> å®šä¹‰è¾¹ç¼˜ï¼ˆmarginï¼‰</h3><h3 id="geo-margin"><a class="markdownIt-Anchor" href="#geo-margin"></a> geo- margin</h3><p>ä»å•ä¸ªå®ä¾‹æ¥çœ‹ï¼Œå°±æ˜¯å‘é‡åˆ°ä¸€ä¸ªå¹³é¢çš„è·ç¦»ï¼Œæ ¹æ®å‘é‡çš„æ¨å¯¼çŸ¥è¯†å¯ä»¥çœ‹å‡ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mi>e</mi><msubsup><mi>o</mi><mrow><mi>m</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>i</mi><mi>n</mi></mrow><mrow><mi>i</mi></mrow></msubsup><mo>=</mo><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>âˆ—</mo><mo>(</mo><msup><mi>Ï‰</mi><mi>T</mi></msup><msup><mi>X</mi><mi>i</mi></msup><mo>+</mo><mi>b</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">geo_{margin}^{i}=y^{(i)}*(\omega^TX^i+b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.938em;"></span><span class="strut bottom" style="height:1.321108em;vertical-align:-0.383108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">i</span><span class="mord mathit">n</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï‰</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span></span></p><p>ä»æ•´ä¸ªæ•°æ®é›†æ¥çœ‹ï¼Œå°±æ˜¯ä¸€ç¾¤ç‚¹åˆ°ä¸€ä¸ªå¹³é¢ä¸­è·ç¦»çš„æœ€å°å€¼ï¼Œå®šä¹‰ä¸º</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mi>e</mi><msub><mi>o</mi><mrow><mi>m</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>=</mo><mi>m</mi><mi>i</mi><msubsup><mi>n</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><mi>g</mi><mi>e</mi><msubsup><mi>o</mi><mrow><mi>m</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>i</mi><mi>n</mi></mrow><mi>i</mi></msubsup></mrow><annotation encoding="application/x-tex">geo_{margin}=min_{i=1}^m geo_{margin}^i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.874664em;"></span><span class="strut bottom" style="height:1.2577720000000001em;vertical-align:-0.383108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">i</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit">o</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">i</span><span class="mord mathit">n</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><h3 id="fun-margin"><a class="markdownIt-Anchor" href="#fun-margin"></a> fun- margin</h3><p>ä¸Šè¿°çš„å‡ ä½•è¾¹ç¼˜çš„å®šä¹‰ä¸­ï¼Œæœ€ç»ˆå‡ºç°çš„ç»“æœå¯èƒ½ä¼šå‡ºç°ç»“æœä¼šéšç€ä¸åŒçš„wçš„å–å€¼è€Œå‡ºç°ä¸åŒçš„æƒ…å†µï¼Œå› æ­¤éœ€è¦ä»å½’ä¸€åŒ–çš„è§’åº¦æ¥æ›´æ–°è¾¹ç¼˜</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>u</mi><msubsup><mi>n</mi><mrow><mi>m</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>i</mi><mi>n</mi></mrow><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msubsup><mo>=</mo><mfrac><mrow><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>âˆ—</mo><mo>(</mo><msup><mi>Ï‰</mi><mi>T</mi></msup><msup><mi>X</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>+</mo><mi>b</mi><mo>)</mo></mrow><mrow><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>w</mi><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">fun_{margin}^{(i)}=\frac{y^{(i)}*(\omega^TX^{(i)}+b)}{||w||}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.565em;"></span><span class="strut bottom" style="height:2.501em;vertical-align:-0.936em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.276864em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">i</span><span class="mord mathit">n</span></span></span></span><span style="top:-0.5198em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">âˆ£</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathrm">âˆ£</span><span class="mord mathrm">âˆ£</span></span></span></span><span style="top:-0.2300000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">Ï‰</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>åŒæ ·å®šä¹‰æ•°æ®é›†çš„fun margin</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>u</mi><msub><mi>n</mi><mrow><mi>m</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>=</mo><mi>m</mi><mi>i</mi><msubsup><mi>n</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><mtext>Â </mtext><mi>f</mi><mi>u</mi><msubsup><mi>n</mi><mrow><mi>m</mi><mi>a</mi><mi>r</mi><mi>g</mi><mi>i</mi><mi>n</mi></mrow><mrow><mi>i</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">fun_{margin}=min_{i=1}^m\ fun_{margin}^{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.874664em;"></span><span class="strut bottom" style="height:1.2577720000000001em;vertical-align:-0.383108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">i</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mspace">Â </span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">u</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.24700000000000003em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathit">i</span><span class="mord mathit">n</span></span></span></span><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">i</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><h3 id="å¾—åˆ°æ¨¡å‹model"><a class="markdownIt-Anchor" href="#å¾—åˆ°æ¨¡å‹model"></a> å¾—åˆ°æ¨¡å‹ï¼ˆmodelï¼‰</h3><p>æœ€ç›´è§‚çš„ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰€æœ‰ç‚¹çš„marginå¯ä»¥éƒ½ä»¥å¤§äºé›¶ï¼Œåœ¨è¿™ä¸ªçº¦æŸçš„åŸºç¡€ä¸Šï¼Œæ•°æ®é›†çš„marginå¯ä»¥è¶Šå¤§è¶Šå¥½</p>target:max[min_{i=1}^m y^{(i)}*(\omega^TX^i+b)]\\s.t.:y^{(i)}*(\omega^TX^i+b)>=0\\||w||=1<p>åœ¨ä¸Šè¿°ç›´è§‰çš„åŸºç¡€ä¸Šï¼Œéœ€è¦å¯¹æ¨¡å‹è¿›è¡Œè¿›ä¸€æ­¥çš„è°ƒæ•´</p><ol><li><p>æˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„marginéƒ½å¯ä»¥å¤§äºé›¶ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å¸Œæœ›æ‰€æœ‰çš„marginéƒ½å¤§äºæœ€å°marginï¼ˆç›®æ ‡å‡½æ•°ï¼‰çš„å€¼</p>max\ \hat\gamma\\s.t.:y^{(i)}(w^Tx^{(i)}+b)>=\hat\gamma\\||w||=1</li><li><p>å¯ä»¥å°†||w||=1çš„å‡è®¾è°ƒæ•´åˆ°ç›®æ ‡å‡½æ•°ä¸Š</p>max\ \hat\gamma/||w||\\s.t.:y^{(i)}(w^Tx^{(i)}+b)>=\hat\gamma</li><li><p>åŒæ ·çš„è·Ÿè¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å‡è®¾ä¹‹é—´çš„è·ç¦»ä¸º1</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>Î³</mi><mo>^</mo></mover><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\hat \gamma=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.05556em;">Î³</span></span><span style="top:0em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span></span></p><p>é‚£ä¹ˆæ¨¡å‹ç­‰ä»·äº</p>max\ \frac{1}{||w||}\\s.t.:y^{(i)}(w^Tx^{(i)}+b)>=\hat\gamma<p>ä¸ºäº†æ–¹ä¾¿åç»­è®¡ç®—</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>w</mi><mi mathvariant="normal">âˆ£</mi><msup><mi mathvariant="normal">âˆ£</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">min \frac{1}{2}||w||^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathrm">âˆ£</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p></li><li><p>ç”±æ­¤è½¬æ¢ä¸ºä¸€ä¸ªå‡¸ä¼˜åŒ–é—®é¢˜</p>min \frac{1}{2}||w||^2\\s.t.:1-y^{(i)}(w^Tx^{(i)}+b)<=0</li></ol><h2 id="0x03-æ±‚è§£æ¨¡å‹"><a class="markdownIt-Anchor" href="#0x03-æ±‚è§£æ¨¡å‹"></a> 0x03 æ±‚è§£æ¨¡å‹</h2><h3 id="æ•°å­¦åŸºç¡€1å‡¸ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#æ•°å­¦åŸºç¡€1å‡¸ä¼˜åŒ–"></a> æ•°å­¦åŸºç¡€1ï¼ˆå‡¸ä¼˜åŒ–ï¼‰</h3><p>ä¼˜åŒ–é—®é¢˜å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p><p>åŒæ ·æ‰€æœ‰çš„ä¼˜åŒ–é—®é¢˜ï¼Œéƒ½å¯ä»¥è½¬æ¢æˆä¸ºå¯¹å¶é—®é¢˜ï¼Œæ¥ç®€åŒ–æ±‚è§£è¿‡ç¨‹</p><ul><li><p>æ— çº¦æŸæ¡ä»¶çš„ä¼˜åŒ–é—®é¢˜</p>min\ f(x)\\---\\eg:min\ f(x)=x_1^2+x_1-4<p>æ±‚è§£æ€è·¯ï¼šæ±‚å¯¼å®Œäº‹äº†</p></li><li><p>ä»…å«ç­‰å¼çº¦æŸçš„ä¼˜åŒ–é—®é¢˜</p>min\ f(x)\\s.t.\ h_j(x)=0,j\in \{1,2,...,n\}\\---\\eg: min\ f(x)=2x_1^2+3x_2^2+7x_3^2\\s.t.\ 2x_1+x_2=1\\2x_2+3x_3=2<p>æ±‚è§£æ€è·¯ï¼šåˆ©ç”¨æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ï¼Œè§ä¸‹ä¸€èŠ‚</p></li><li><p>å«ä¸ç­‰å¼å’Œç­‰å¼çš„ä¼˜åŒ–é—®é¢˜</p>min\ f(x)\\s.t. h_j(x)=0,j\in \{1,2,...,n\}\\g_j(x)<=0,j\in\{1,2,...,m\}\\---\\eg:min\ f(x)=x_1^2-2x_1+1+x_2^2+4x_2+4\\s.t.:x_1+10x_2>10\\10x_1-x_2<10<p>æ±‚è§£æ€è·¯ï¼šåˆ©ç”¨æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ï¼Œä½†æ˜¯éœ€è¦æ»¡è¶³KKTæ¡ä»¶</p></li></ul><h3 id="æ•°å­¦åŸºç¡€2æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•"><a class="markdownIt-Anchor" href="#æ•°å­¦åŸºç¡€2æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•"></a> æ•°å­¦åŸºç¡€2ï¼ˆæ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•ï¼‰</h3><h3 id="æ±‚è§£ä¸Šè¿°ä»…å«ç­‰å¼çº¦æŸçš„ä¼˜åŒ–é—®é¢˜"><a class="markdownIt-Anchor" href="#æ±‚è§£ä¸Šè¿°ä»…å«ç­‰å¼çº¦æŸçš„ä¼˜åŒ–é—®é¢˜"></a> æ±‚è§£ä¸Šè¿°ï¼šä»…å«ç­‰å¼çº¦æŸçš„ä¼˜åŒ–é—®é¢˜</h3><p>é¦–å…ˆæ„å»ºæ‹‰æ ¼æœ—æ—¥å‡½æ•°</p>Lï¼ˆxï¼Œ\alphaï¼‰=2x_1^2+3x_2^2+7x_3^2+\alpha_1*(2x_1+x_2-1)+\alpha_2*(2x_2+3x_3-2)<p>æ­¤æ—¶é’ˆå¯¹æ‹‰æ ¼æœ—æ—¥å‡½æ•°å¯¹å˜é‡Xæ±‚å¯¼ï¼Œå¸Œæœ›ç­‰äº0</p>\frac{\partial L}{\partial x_1}=0\\\frac{\partial L}{\partial x_2}=0\\\frac{\partial L}{\partial x_3}=0<p>å¾—åˆ°</p>x_1=-\frac {1}{2}\alpha_1\\x_2=-\frac {1}{6}\alpha_1-\frac {1}{3}\alpha_2\\x_3=-\frac {3}{14}\alpha_2\\<p>å¸¦å…¥çº¦æŸæ¡ä»¶ä¸­æ±‚è§£ç­‰å¼ï¼Œå¾—åˆ°æœ€ä¼˜è§£</p><h3 id="åŒæ ·çš„æ±‚è§£ä¸Šè¿°å«æœ‰ç­‰å¼å’Œä¸ç­‰å¼çš„ä¼˜åŒ–é—®é¢˜"><a class="markdownIt-Anchor" href="#åŒæ ·çš„æ±‚è§£ä¸Šè¿°å«æœ‰ç­‰å¼å’Œä¸ç­‰å¼çš„ä¼˜åŒ–é—®é¢˜"></a> åŒæ ·çš„æ±‚è§£ä¸Šè¿°ï¼šå«æœ‰ç­‰å¼å’Œä¸ç­‰å¼çš„ä¼˜åŒ–é—®é¢˜</h3>L(x,\alpha)=x_1^2-2x_1+1+x_2^2+4x_2+4+\alpha_1(-x_1-10x_2+10)+\alpha_2(10x_1-x_2-10)\\\alpha_i>=0<p>å’Œä¸Šè¿°ç›¸ä¼¼å¯¹æ‹‰æ ¼æœ—æ—¥æ±‚å¯¼ï¼Œå¸Œæœ›ç­‰äº0</p>\frac{\partial L}{\partial x_1}=0\\\frac{\partial L}{\partial x_2}=0\\<p>è¿™é‡Œéœ€è¦æ»¡è¶³KKTæ¡ä»¶</p>* å¯¼æ•°ç­‰äº0\\* h(X)=0\\*\Sigma_{j=1}^m\alpha_ig_i(X)=0<h3 id="æ•°å­¦åŸºç¡€3å¯¹å¶æ±‚è§£"><a class="markdownIt-Anchor" href="#æ•°å­¦åŸºç¡€3å¯¹å¶æ±‚è§£"></a> æ•°å­¦åŸºç¡€3ï¼ˆå¯¹å¶æ±‚è§£ï¼‰</h3><blockquote><p>Slateræ¡ä»¶ï¼šä¸€ä¸ªå‡¸ä¼˜åŒ–é—®é¢˜å¦‚æœå­˜åœ¨ä¸€ä¸ªå€™é€‰xæ˜¯çš„æ‰€æœ‰ä¸ç­‰å¼çº¦æŸéƒ½ä¸¥æ ¼æ»¡è¶³ï¼Œåˆ™å­˜åœ¨æ˜¯åŸé—®é¢˜çš„å¯¹å¶é—®é¢˜çš„æœ€ä¼˜è§£</p></blockquote><p>è¿™æ ·æœ‰æ—¶å€™å¯ä»¥ç®€åŒ–æ“ä½œè®¡ç®—,</p><h3 id="æ±‚è§£svmçš„å‡¸ä¼˜åŒ–é—®é¢˜"><a class="markdownIt-Anchor" href="#æ±‚è§£svmçš„å‡¸ä¼˜åŒ–é—®é¢˜"></a> æ±‚è§£SVMçš„å‡¸ä¼˜åŒ–é—®é¢˜</h3><ol><li>é¦–å…ˆå°†ä¼˜åŒ–é—®é¢˜è½¬æ¢æˆä¸ºä¸€ä¸ª convex optimizationï¼ˆPï¼‰</li><li>å› ä¸ºæ»¡è¶³Slateræ¡ä»¶ï¼ŒPä¸ºå¯¹å¶é—®é¢˜Dæ˜¯åŒè§£çš„</li></ol><p>æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•-Pé—®é¢˜çš„å‡½æ•°ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>(</mo><mi>x</mi><mo separator="true">,</mo><mi>w</mi><mo separator="true">,</mo><mi>a</mi><mo>)</mo><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>w</mi><mi mathvariant="normal">âˆ£</mi><msup><mi mathvariant="normal">âˆ£</mi><mn>2</mn></msup><mo>+</mo><msubsup><mi mathvariant="normal">Î£</mi><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>a</mi><mi>i</mi></msub><mo>(</mo><mn>1</mn><mo>âˆ’</mo><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>(</mo><mi>w</mi><msup><mi>x</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><mo>+</mo><mi>b</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">L(x,w,a)=\frac{1}{2}||w||^2+\Sigma_{i=1}^na_i(1-y^{(i)}(wx^{(i)}+b))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">L</span><span class="mopen">(</span><span class="mord mathit">x</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord mathrm">âˆ£</span><span class="mord"><span class="mord mathrm">âˆ£</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathrm">Î£</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p>åŸé—®é¢˜ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>=</mo><mi>m</mi><mi>i</mi><msub><mi>n</mi><mrow><mi>w</mi><mo separator="true">,</mo><mi>b</mi></mrow></msub><mi>m</mi><mi>a</mi><msub><mi>x</mi><mi>a</mi></msub><mi>L</mi></mrow><annotation encoding="application/x-tex">p=min_{w,b}max_a L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">p</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mord mathit">b</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">a</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">L</span></span></span></span></span></p><p>è½¬æ¢ä¸ºå¯¹å¶é—®é¢˜</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mo>=</mo><mi>m</mi><mi>a</mi><msub><mi>x</mi><mi>a</mi></msub><mi>m</mi><mi>i</mi><msub><mi>n</mi><mrow><mi>w</mi><mo separator="true">,</mo><mi>b</mi></mrow></msub><mi>L</mi></mrow><annotation encoding="application/x-tex">d=max_amin_{w,b}L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">d</span><span class="mrel">=</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">a</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">m</span><span class="mord mathit">i</span><span class="mord"><span class="mord mathit">n</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mord mathit">b</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">L</span></span></span></span></span></p><p>è¿™é‡Œæ˜¯å°†ç¬¬ä¸‰ç§å‡¸ä¼˜åŒ–é—®é¢˜è½¬æ¢æˆä¸ºä¸€ä¸ªæ— çº¦æŸçš„ç¬¬ä¸€ç§å‡¸ä¼˜åŒ–é—®é¢˜</p>\frac{\partial L}{\partial w}=w-\Sigma_{i=1}^na_iy^{(i)}x_i^T=0\\\frac{\partial L}{\partial b}=\Sigma_{i=1}^na_iy^{(i)}=0<p>å¸¦å…¥åˆ°æ‹‰æ ¼æœ—æ—¥å‡½æ•°ä¸­</p>L=\frac{1}{2}\Sigma_{i,j=1}^na_ia_jy_iy_jx_i^Tx_j-\Sigma_{i,j=1}^na_ia_jy_iy_jx_i^Tx_j-b\Sigma_{i=1}^na_iy^{(i)}+\Sigma_{i=1}^na_i\\=\Sigma_{i=1}^na_i-\frac{1}{2}\Sigma_{i,j=1}^na_ia_jy_iy_jx_i^Tx_j<p>çº¦æŸæ¡ä»¶ï¼š</p>s.t.:\Sigma_{i=1}^ma_iy_i=0\\a_i>=0<p>ä¹‹ååˆ©ç”¨SMOç®—æ³•æ¥æ±‚è§£å¾—åˆ°</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>ä¹‹åå¾—åˆ°hyperplaneä¸ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Î£</mi><mo>(</mo><msub><mi>a</mi><mi>i</mi></msub><msup><mi>y</mi><mrow><mo>(</mo><mi>i</mi><mo>)</mo></mrow></msup><msubsup><mi>x</mi><mi>i</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub><mo>+</mo><mi>b</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\Sigma (a_iy^{(i)}x_i^Tx_j+b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.938em;"></span><span class="strut bottom" style="height:1.224108em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathrm">Î£</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">a</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span></span></p><h2 id="0x04-åˆ†ç±»è®¨è®º"><a class="markdownIt-Anchor" href="#0x04-åˆ†ç±»è®¨è®º"></a> 0x04 åˆ†ç±»è®¨è®º</h2><ol><li>åœ¨çº¿æ€§å¯åˆ†çš„æƒ…å†µä¸‹å¯ä»¥é¡ºåˆ©çš„æ±‚è§£å‡º a_i</li><li>åŠ å…¥æ¾å¼›å˜é‡å’Œæƒ©ç½šå› å­æ¥æ‰¾åˆ°ç›¸å¯¹æ›´å¥½çš„hyperplane</li><li>ä½¿ç”¨kernel trickæ¥å°†ä½ç»´æ˜ å°„åˆ°é«˜çº¬çš„ç©ºé—´ï¼Œä½¿å¾—åœ¨é«˜çº¬ç©ºé—´ä¸­æ•°æ®æ˜¯çº¿æ€§å¯åˆ†çš„</li></ol><p>è¯¦ç»†ä»‹ç»kernel trickï¼š</p><p>æœ¬æ¥æ˜¯åœ¨ä½ç»´ä¸­ç›´æ¥å†…ç§¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>x</mi><mi>i</mi><mi>T</mi></msubsup><msub><mi>x</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">x_i^Tx_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.247em;margin-left:0em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span style="top:-0.4129999999999999em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span></span></p><p>ä¹‹åå¸Œæœ›éƒ½ä»åœ°ç»´è½¬æ¢åˆ°é«˜çº¬ï¼Œåœ¨è®¡ç®—å†…ç§¯</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Ï•</mi><mo>(</mo><msub><mi>x</mi><mi>i</mi></msub><msup><mo>)</mo><mi>T</mi></msup><mi>Ï•</mi><mo>(</mo><msub><mi>x</mi><mi>j</mi></msub><mo>)</mo></mrow><annotation encoding="application/x-tex">\phi(x_i)^T\phi(x_j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.177439em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">Ï•</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit">Ï•</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>è·Ÿè¿›ä¸€æ­¥ï¼Œå¸Œæœ›ç›´æ¥åœ¨ä½ç»´ç©ºé—´è®¡ç®—é«˜ç»´å†…ç§¯</p>çº¿æ€§æ ¸ï¼šx_i^Tx_j\\å¤šé¡¹å¼æ ¸ï¼šï¼ˆx_i^Tx_j+1ï¼‰^q\\é«˜æ–¯æ ¸ï¼šexp(-\frac{(||x_i-x_j||^2))}{2}\\sigmoid:tanh(x_i^Tx_j+1)<h2 id="0x05-svm-code"><a class="markdownIt-Anchor" href="#0x05-svm-code"></a> 0x05 SVM code</h2><p>[github](<a href="https://github.com/chenxia31/code_Study_Practice/tree/main/CS229_2018autumn/ProblemSet(%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A%EF%BC%89/%E8%AF%BE%E5%90%8E%E4%B9%A0%E9%A2%9802)">https://github.com/chenxia31/code_Study_Practice/tree/main/CS229_2018autumn/ProblemSet(è¯¾åä½œä¸šï¼‰/è¯¾åä¹ é¢˜02)</a></p><p>å€Ÿé‰´åˆ«äººçš„ï¼Œç•™ä¸€ä¸ªå‘è‡ªå·±å†™</p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gz2zfe6lj4j30u80mmq6j.jpg" alt="image-20220205220110225" style="zoom:50%;" /><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> random<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">å‡½æ•°è¯´æ˜:è¯»å–æ•°æ®</span><br><span class="hljs-string">Parameters:</span><br><span class="hljs-string">    fileName - æ–‡ä»¶å</span><br><span class="hljs-string">Returns:</span><br><span class="hljs-string">    dataMat - æ•°æ®çŸ©é˜µ</span><br><span class="hljs-string">    labelMat - æ•°æ®æ ‡ç­¾</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">loadDataSet</span>(<span class="hljs-params">fileName</span>):<br>    dataMat = []; labelMat = []<br>    fr = <span class="hljs-built_in">open</span>(fileName)<br>    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> fr.readlines():                                     <span class="hljs-comment">#é€è¡Œè¯»å–ï¼Œæ»¤é™¤ç©ºæ ¼ç­‰</span><br>        lineArr = line.strip().split(<span class="hljs-string">&#x27;\t&#x27;</span>)<br>        dataMat.append([<span class="hljs-built_in">float</span>(lineArr[<span class="hljs-number">0</span>]), <span class="hljs-built_in">float</span>(lineArr[<span class="hljs-number">1</span>])])      <span class="hljs-comment">#æ·»åŠ æ•°æ®</span><br>        labelMat.append(<span class="hljs-built_in">float</span>(lineArr[<span class="hljs-number">2</span>]))                          <span class="hljs-comment">#æ·»åŠ æ ‡ç­¾</span><br>    <span class="hljs-keyword">return</span> dataMat,labelMat<br><br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">å‡½æ•°è¯´æ˜:éšæœºé€‰æ‹©alpha</span><br><span class="hljs-string">Parameters:</span><br><span class="hljs-string">    i - alpha</span><br><span class="hljs-string">    m - alphaå‚æ•°ä¸ªæ•°</span><br><span class="hljs-string">Returns:</span><br><span class="hljs-string">    j -</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">selectJrand</span>(<span class="hljs-params">i, m</span>):<br>    j = i                                 <span class="hljs-comment">#é€‰æ‹©ä¸€ä¸ªä¸ç­‰äºiçš„j</span><br>    <span class="hljs-keyword">while</span> (j == i):<br>        j = <span class="hljs-built_in">int</span>(random.uniform(<span class="hljs-number">0</span>, m))<br>    <span class="hljs-keyword">return</span> j<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">å‡½æ•°è¯´æ˜:ä¿®å‰ªalpha</span><br><span class="hljs-string">Parameters:</span><br><span class="hljs-string">    aj - alphaå€¼</span><br><span class="hljs-string">    H - alphaä¸Šé™</span><br><span class="hljs-string">    L - alphaä¸‹é™</span><br><span class="hljs-string">Returns:</span><br><span class="hljs-string">    aj - alpahå€¼</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">clipAlpha</span>(<span class="hljs-params">aj,H,L</span>):<br>    <span class="hljs-keyword">if</span> aj &gt; H:<br>        aj = H<br>    <span class="hljs-keyword">if</span> L &gt; aj:<br>        aj = L<br>    <span class="hljs-keyword">return</span> aj<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">å‡½æ•°è¯´æ˜:ç®€åŒ–ç‰ˆSMOç®—æ³•</span><br><span class="hljs-string">Parameters:</span><br><span class="hljs-string">    dataMatIn - æ•°æ®çŸ©é˜µ</span><br><span class="hljs-string">    classLabels - æ•°æ®æ ‡ç­¾</span><br><span class="hljs-string">    C - æ¾å¼›å˜é‡</span><br><span class="hljs-string">    toler - å®¹é”™ç‡</span><br><span class="hljs-string">    maxIter - æœ€å¤§è¿­ä»£æ¬¡æ•°</span><br><span class="hljs-string">Returns:</span><br><span class="hljs-string">    æ— </span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># å‚æ•°åˆ†åˆ«ä¸º æ•°æ®é›†ã€ç±»åˆ«æ ‡ç­¾ã€å¸¸æ•°Cã€å®¹é”™ç‡ã€æœ€å¤§å¾ªç¯æ¬¡æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">smoSimple</span>(<span class="hljs-params">dataMatIn, classLabels, C, toler, maxIter</span>):<span class="hljs-comment">#</span><br>    <span class="hljs-comment">#è½¬æ¢ä¸ºnumpyçš„matå­˜å‚¨</span><br>    dataMatrix = np.mat(dataMatIn); labelMat = np.mat(classLabels).transpose()<span class="hljs-comment">#è½¬ç½®æˆåˆ—å‘é‡</span><br>    <span class="hljs-comment">#åˆå§‹åŒ–bå‚æ•°ï¼Œç»Ÿè®¡dataMatrixçš„ç»´åº¦</span><br>    b = <span class="hljs-number">0</span>; m,n = np.shape(dataMatrix)<span class="hljs-comment"># m=100,n=2</span><br>    <span class="hljs-comment">#åˆå§‹åŒ–alphaå‚æ•°ï¼Œè®¾ä¸º0</span><br>    alphas = np.mat(np.zeros((m,<span class="hljs-number">1</span>)))<span class="hljs-comment"># 100ä¸ªalpha</span><br>    <span class="hljs-comment">#åˆå§‹åŒ–è¿­ä»£æ¬¡æ•°</span><br>    iter_num = <span class="hljs-number">0</span><br>    <span class="hljs-comment">#æœ€å¤šè¿­ä»£matIteræ¬¡</span><br>    <span class="hljs-keyword">while</span> (iter_num &lt; maxIter):<br>        alphaPairsChanged = <span class="hljs-number">0</span> <span class="hljs-comment">#ç”¨äºè®°å½•alphaæ˜¯å¦å·²ç»è¿›è¡Œä¼˜åŒ–</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m):<br>            <span class="hljs-comment">#æ­¥éª¤1ï¼šè®¡ç®—è¯¯å·®Ei</span><br>            <span class="hljs-comment">#æ­¤å…¬å¼ä¸ºåˆ†ç±»å†³ç­–å…¬å¼</span><br>            fXi = <span class="hljs-built_in">float</span>(np.multiply(alphas,labelMat).T*(dataMatrix*dataMatrix[i,:].T)) + b<br>            <span class="hljs-comment">#print(&quot;fXi:&quot;,fXi)</span><br>            Ei = fXi - <span class="hljs-built_in">float</span>(labelMat[i])<span class="hljs-comment">#è¯¯å·®</span><br>            <span class="hljs-comment">#ä¼˜åŒ–alphaï¼Œæ›´è®¾å®šä¸€å®šçš„å®¹é”™ç‡ã€‚</span><br>            <span class="hljs-keyword">if</span> ((labelMat[i]*Ei &lt; -toler) <span class="hljs-keyword">and</span> (alphas[i] &lt; C)) <span class="hljs-keyword">or</span> ((labelMat[i]*Ei &gt; toler) <span class="hljs-keyword">and</span> (alphas[i] &gt; <span class="hljs-number">0</span>)):<br>                <span class="hljs-comment">#éšæœºé€‰æ‹©å¦ä¸€ä¸ªä¸alpha_iæˆå¯¹ä¼˜åŒ–çš„alpha_j</span><br>                j = selectJrand(i,m)<br>                <span class="hljs-comment">#æ­¥éª¤1ï¼šè®¡ç®—è¯¯å·®Ej</span><br>                fXj = <span class="hljs-built_in">float</span>(np.multiply(alphas,labelMat).T*(dataMatrix*dataMatrix[j,:].T)) + b<br>                Ej = fXj - <span class="hljs-built_in">float</span>(labelMat[j])<br>                <span class="hljs-comment">#ä¿å­˜æ›´æ–°å‰çš„aplphaå€¼ï¼Œä½¿ç”¨æ·±æ‹·è´</span><br>                alphaIold = alphas[i].copy(); alphaJold = alphas[j].copy();<br>                <span class="hljs-comment">#æ­¥éª¤2ï¼šè®¡ç®—ä¸Šä¸‹ç•ŒLå’ŒH</span><br>                <span class="hljs-keyword">if</span> (labelMat[i] != labelMat[j]):<br>                    L = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, alphas[j] - alphas[i])<br>                    H = <span class="hljs-built_in">min</span>(C, C + alphas[j] - alphas[i])<br>                <span class="hljs-keyword">else</span>:<br>                    L = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, alphas[j] + alphas[i] - C)<br>                    H = <span class="hljs-built_in">min</span>(C, alphas[j] + alphas[i])<br>                <span class="hljs-keyword">if</span> L==H: <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;L==H&quot;</span>); <span class="hljs-keyword">continue</span><br><br>                <span class="hljs-comment">#æ­¥éª¤3ï¼šè®¡ç®—etaï¼Œå³Î·ã€‚</span><br>                eta = dataMatrix[i,:]*dataMatrix[i,:].T +dataMatrix[j,:]*dataMatrix[j,:].T-<span class="hljs-number">2.0</span> * dataMatrix[i,:]*dataMatrix[j,:].T<br>                <span class="hljs-keyword">if</span> eta == <span class="hljs-number">0</span>: <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;eta=0&quot;</span>); <span class="hljs-keyword">continue</span><br>                <span class="hljs-comment">#æ­¥éª¤4ï¼šæ›´æ–°alpha_j</span><br>                alphas[j] += labelMat[j]*(Ei - Ej)/eta<br>                <span class="hljs-comment">#æ­¥éª¤5ï¼šä¿®å‰ªalpha_j</span><br>                alphas[j] = clipAlpha(alphas[j],H,L)<br>                <span class="hljs-comment">#abs å‡½æ•°  è¿”å›æ•°å­—çš„ç»å¯¹å€¼</span><br>                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(alphas[j] - alphaJold) &lt; <span class="hljs-number">0.00001</span>): <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;alpha_jå˜åŒ–å¤ªå°&quot;</span>); <span class="hljs-keyword">continue</span><br>                <span class="hljs-comment">#æ­¥éª¤6ï¼šæ›´æ–°alpha_i</span><br>                alphas[i] += labelMat[j]*labelMat[i]*(alphaJold - alphas[j])<br>                <span class="hljs-comment">#æ­¥éª¤7ï¼šæ›´æ–°b_1å’Œb_2</span><br>                b1 = b - Ei- labelMat[i]*(alphas[i]-alphaIold)*dataMatrix[i,:]*dataMatrix[i,:].T - labelMat[j]*(alphas[j]-alphaJold)*dataMatrix[i,:]*dataMatrix[j,:].T<br>                b2 = b - Ej- labelMat[i]*(alphas[i]-alphaIold)*dataMatrix[i,:]*dataMatrix[j,:].T - labelMat[j]*(alphas[j]-alphaJold)*dataMatrix[j,:]*dataMatrix[j,:].T<br>                <span class="hljs-comment">#æ­¥éª¤8ï¼šæ ¹æ®b_1å’Œb_2æ›´æ–°b</span><br>                <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> &lt; alphas[i]) <span class="hljs-keyword">and</span> (C &gt; alphas[i]): b = b1<br>                <span class="hljs-keyword">elif</span> (<span class="hljs-number">0</span> &lt; alphas[j]) <span class="hljs-keyword">and</span> (C &gt; alphas[j]): b = b2<br>                <span class="hljs-keyword">else</span>: b = (b1 + b2)/<span class="hljs-number">2.0</span><br>                <span class="hljs-comment">#ç»Ÿè®¡ä¼˜åŒ–æ¬¡æ•°</span><br>                alphaPairsChanged += <span class="hljs-number">1</span><br>                <span class="hljs-comment">#æ‰“å°ç»Ÿè®¡ä¿¡æ¯</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ç¬¬%dæ¬¡è¿­ä»£ æ ·æœ¬:%d, alphaä¼˜åŒ–æ¬¡æ•°:%d&quot;</span> % (iter_num,i,alphaPairsChanged))<br>        <span class="hljs-comment">#æ›´æ–°è¿­ä»£æ¬¡æ•°</span><br>        <span class="hljs-keyword">if</span> (alphaPairsChanged == <span class="hljs-number">0</span>): iter_num += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>: iter_num = <span class="hljs-number">0</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è¿­ä»£æ¬¡æ•°: %d&quot;</span> % iter_num)<br>    <span class="hljs-keyword">return</span> b,alphas<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">å‡½æ•°è¯´æ˜:åˆ†ç±»ç»“æœå¯è§†åŒ–</span><br><span class="hljs-string">Parameters:</span><br><span class="hljs-string">    dataMat - æ•°æ®çŸ©é˜µ</span><br><span class="hljs-string">    w - ç›´çº¿æ³•å‘é‡</span><br><span class="hljs-string">    b - ç›´çº¿è§£å†³</span><br><span class="hljs-string">Returns:</span><br><span class="hljs-string">    æ— </span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">showClassifer</span>(<span class="hljs-params">dataMat, w, b</span>):<br>    <span class="hljs-comment">#ç»˜åˆ¶æ ·æœ¬ç‚¹</span><br>    data_plus = []                                  <span class="hljs-comment">#æ­£æ ·æœ¬</span><br>    data_minus = []                                 <span class="hljs-comment">#è´Ÿæ ·æœ¬</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(dataMat)):<br>        <span class="hljs-keyword">if</span> labelMat[i] &gt; <span class="hljs-number">0</span>:<br>            data_plus.append(dataMat[i])<br>        <span class="hljs-keyword">else</span>:<br>            data_minus.append(dataMat[i])<br>    data_plus_np = np.array(data_plus)              <span class="hljs-comment">#è½¬æ¢ä¸ºnumpyçŸ©é˜µ</span><br>    data_minus_np = np.array(data_minus)            <span class="hljs-comment">#è½¬æ¢ä¸ºnumpyçŸ©é˜µ</span><br>    plt.scatter(np.transpose(data_plus_np)[<span class="hljs-number">0</span>], np.transpose(data_plus_np)[<span class="hljs-number">1</span>], s=<span class="hljs-number">30</span>, alpha=<span class="hljs-number">0.7</span>)   <span class="hljs-comment">#æ­£æ ·æœ¬æ•£ç‚¹å›¾</span><br>    plt.scatter(np.transpose(data_minus_np)[<span class="hljs-number">0</span>], np.transpose(data_minus_np)[<span class="hljs-number">1</span>], s=<span class="hljs-number">30</span>, alpha=<span class="hljs-number">0.7</span>) <span class="hljs-comment">#è´Ÿæ ·æœ¬æ•£ç‚¹å›¾</span><br>    <span class="hljs-comment">#ç»˜åˆ¶ç›´çº¿</span><br>    x1 = <span class="hljs-built_in">max</span>(dataMat)[<span class="hljs-number">0</span>]<br>    x2 = <span class="hljs-built_in">min</span>(dataMat)[<span class="hljs-number">0</span>]<br>    a1, a2 = w<br>    b = <span class="hljs-built_in">float</span>(b)<br>    a1 = <span class="hljs-built_in">float</span>(a1[<span class="hljs-number">0</span>])<br>    a2 = <span class="hljs-built_in">float</span>(a2[<span class="hljs-number">0</span>])<br>    y1, y2 = (-b- a1*x1)/a2, (-b - a1*x2)/a2<br>    plt.plot([x1, x2], [y1, y2])<br>    <span class="hljs-comment">#æ‰¾å‡ºæ”¯æŒå‘é‡ç‚¹</span><br>    <span class="hljs-keyword">for</span> i, alpha <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(alphas):<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">abs</span>(alpha) &gt; <span class="hljs-number">0</span>:<span class="hljs-comment">#å¦‚æœalpha&gt;0,è¡¨ç¤º alphaæ‰€åœ¨çš„ä¸ç­‰å¼æ¡ä»¶èµ·ä½œç”¨äº†</span><br>            x, y = dataMat[i]<br>            plt.scatter([x], [y], s=<span class="hljs-number">150</span>, c=<span class="hljs-string">&#x27;none&#x27;</span>, alpha=<span class="hljs-number">0.7</span>, linewidth=<span class="hljs-number">1.5</span>, edgecolor=<span class="hljs-string">&#x27;red&#x27;</span>)<br>    plt.show()<br><br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">å‡½æ•°è¯´æ˜:è®¡ç®—w</span><br><span class="hljs-string">Parameters:</span><br><span class="hljs-string">    dataMat - æ•°æ®çŸ©é˜µ</span><br><span class="hljs-string">    labelMat - æ•°æ®æ ‡ç­¾</span><br><span class="hljs-string">    alphas - alphaså€¼</span><br><span class="hljs-string">Returns:</span><br><span class="hljs-string">    w</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_w</span>(<span class="hljs-params">dataMat, labelMat, alphas</span>):<br>    alphas, dataMat, labelMat = np.array(alphas), np.array(dataMat), np.array(labelMat)<br>    w = np.dot((np.tile(labelMat.reshape(<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>).T, (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)) * dataMat).T, alphas)<br>    <span class="hljs-keyword">return</span> w.tolist()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    dataMat, labelMat = loadDataSet(<span class="hljs-string">&#x27;datasets/testSet.txt&#x27;</span>)<br>    b,alphas = smoSimple(dataMat, labelMat, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.001</span>, <span class="hljs-number">40</span>)<br>    <span class="hljs-comment"># print(&quot;b,alphas&quot;,b,alphas)</span><br>    w = get_w(dataMat, labelMat, alphas)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;w:&quot;</span>,w)<br>    showClassifer(dataMat, w, b)<br></code></pre></td></tr></table></figure><p>/datasets/testSet.txt</p><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs dns"><span class="hljs-number">3.542485</span><span class="hljs-number">1.977398</span>-<span class="hljs-number">1</span><br><span class="hljs-number">3.018896</span><span class="hljs-number">2.556416</span>-<span class="hljs-number">1</span><br><span class="hljs-number">7.551510</span>-<span class="hljs-number">1.580030</span><span class="hljs-number">1</span><br><span class="hljs-number">2.114999</span>-<span class="hljs-number">0.004466</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.1271131</span>.<span class="hljs-number">2743721</span><br><span class="hljs-number">7.108772</span>-<span class="hljs-number">0.986906</span><span class="hljs-number">1</span><br><span class="hljs-number">8.610639</span><span class="hljs-number">2.046708</span><span class="hljs-number">1</span><br><span class="hljs-number">2.326297</span><span class="hljs-number">0.265213</span>-<span class="hljs-number">1</span><br><span class="hljs-number">3.634009</span><span class="hljs-number">1.730537</span>-<span class="hljs-number">1</span><br><span class="hljs-number">0.341367</span>-<span class="hljs-number">0.894998</span>-<span class="hljs-number">1</span><br><span class="hljs-number">3.1259510</span>.<span class="hljs-number">293251</span>-<span class="hljs-number">1</span><br><span class="hljs-number">2.123252</span>-<span class="hljs-number">0.783563</span>-<span class="hljs-number">1</span><br><span class="hljs-number">0.887835</span>-<span class="hljs-number">2.797792</span>-<span class="hljs-number">1</span><br><span class="hljs-number">7.139979</span>-<span class="hljs-number">2.329896</span><span class="hljs-number">1</span><br><span class="hljs-number">1.696414</span>-<span class="hljs-number">1.212496</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.1170320</span>.<span class="hljs-number">6234931</span><br><span class="hljs-number">8.497162</span>-<span class="hljs-number">0.266649</span><span class="hljs-number">1</span><br><span class="hljs-number">4.6581913</span>.<span class="hljs-number">507396</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.1971811</span>.<span class="hljs-number">5451321</span><br><span class="hljs-number">1.2080470</span>.<span class="hljs-number">213100</span>-<span class="hljs-number">1</span><br><span class="hljs-number">1.928486</span>-<span class="hljs-number">0.321870</span>-<span class="hljs-number">1</span><br><span class="hljs-number">2.175808</span>-<span class="hljs-number">0.014527</span>-<span class="hljs-number">1</span><br><span class="hljs-number">7.886608</span><span class="hljs-number">0.461755</span><span class="hljs-number">1</span><br><span class="hljs-number">3.223038</span>-<span class="hljs-number">0.552392</span>-<span class="hljs-number">1</span><br><span class="hljs-number">3.628502</span><span class="hljs-number">2.190585</span>-<span class="hljs-number">1</span><br><span class="hljs-number">7.407860</span>-<span class="hljs-number">0.1219611</span><br><span class="hljs-number">7.286357</span><span class="hljs-number">0.2510771</span><br><span class="hljs-number">2.301095</span>-<span class="hljs-number">0.533988</span>-<span class="hljs-number">1</span><br>-<span class="hljs-number">0.232542</span>-<span class="hljs-number">0.547690</span>-<span class="hljs-number">1</span><br><span class="hljs-number">3.457096</span>-<span class="hljs-number">0.082216</span>-<span class="hljs-number">1</span><br><span class="hljs-number">3.023938</span>-<span class="hljs-number">0.057392</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.015003</span><span class="hljs-number">0.885325</span><span class="hljs-number">1</span><br><span class="hljs-number">8.991748</span><span class="hljs-number">0.9231541</span><br><span class="hljs-number">7.916831</span>-<span class="hljs-number">1.781735</span><span class="hljs-number">1</span><br><span class="hljs-number">7.616862</span>-<span class="hljs-number">0.2179581</span><br><span class="hljs-number">2.450939</span><span class="hljs-number">0.744967</span>-<span class="hljs-number">1</span><br><span class="hljs-number">7.270337</span>-<span class="hljs-number">2.507834</span><span class="hljs-number">1</span><br><span class="hljs-number">1.749721</span>-<span class="hljs-number">0.961902</span>-<span class="hljs-number">1</span><br><span class="hljs-number">1.803111</span>-<span class="hljs-number">0.176349</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.804461</span><span class="hljs-number">3.044301</span><span class="hljs-number">1</span><br><span class="hljs-number">1.231257</span>-<span class="hljs-number">0.568573</span>-<span class="hljs-number">1</span><br><span class="hljs-number">2.074915</span><span class="hljs-number">1.410550</span>-<span class="hljs-number">1</span><br>-<span class="hljs-number">0.743036</span>-<span class="hljs-number">1.736103</span>-<span class="hljs-number">1</span><br><span class="hljs-number">3.536555</span><span class="hljs-number">3.964960</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.4101430</span>.<span class="hljs-number">0256061</span><br><span class="hljs-number">7.382988</span>-<span class="hljs-number">0.478764</span><span class="hljs-number">1</span><br><span class="hljs-number">6.960661</span>-<span class="hljs-number">0.2453531</span><br><span class="hljs-number">8.2344600</span>.<span class="hljs-number">7018681</span><br><span class="hljs-number">8.168618</span>-<span class="hljs-number">0.903835</span><span class="hljs-number">1</span><br><span class="hljs-number">1.534187</span>-<span class="hljs-number">0.622492</span>-<span class="hljs-number">1</span><br><span class="hljs-number">9.2295182</span>.<span class="hljs-number">0660881</span><br><span class="hljs-number">7.8862420</span>.<span class="hljs-number">1918131</span><br><span class="hljs-number">2.893743</span>-<span class="hljs-number">1.643468</span>-<span class="hljs-number">1</span><br><span class="hljs-number">1.870457</span>-<span class="hljs-number">1.040420</span>-<span class="hljs-number">1</span><br><span class="hljs-number">5.286862</span>-<span class="hljs-number">2.358286</span><span class="hljs-number">1</span><br><span class="hljs-number">6.080573</span><span class="hljs-number">0.418886</span><span class="hljs-number">1</span><br><span class="hljs-number">2.544314</span><span class="hljs-number">1.714165</span>-<span class="hljs-number">1</span><br><span class="hljs-number">6.016004</span>-<span class="hljs-number">3.753712</span><span class="hljs-number">1</span><br><span class="hljs-number">0.926310</span>-<span class="hljs-number">0.564359</span>-<span class="hljs-number">1</span><br><span class="hljs-number">0.870296</span>-<span class="hljs-number">0.109952</span>-<span class="hljs-number">1</span><br><span class="hljs-number">2.369345</span><span class="hljs-number">1.375695</span>-<span class="hljs-number">1</span><br><span class="hljs-number">1.363782</span>-<span class="hljs-number">0.254082</span>-<span class="hljs-number">1</span><br><span class="hljs-number">7.279460</span>-<span class="hljs-number">0.1895721</span><br><span class="hljs-number">1.896005</span><span class="hljs-number">0.515080</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.102154</span>-<span class="hljs-number">0.603875</span><span class="hljs-number">1</span><br><span class="hljs-number">2.529893</span><span class="hljs-number">0.662657</span>-<span class="hljs-number">1</span><br><span class="hljs-number">1.963874</span>-<span class="hljs-number">0.365233</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.1320480</span>.<span class="hljs-number">7859141</span><br><span class="hljs-number">8.2459380</span>.<span class="hljs-number">3723661</span><br><span class="hljs-number">6.543888</span><span class="hljs-number">0.4331641</span><br>-<span class="hljs-number">0.236713</span>-<span class="hljs-number">5.766721</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.1125930</span>.<span class="hljs-number">2958391</span><br><span class="hljs-number">9.803425</span><span class="hljs-number">1.4951671</span><br><span class="hljs-number">1.497407</span>-<span class="hljs-number">0.552916</span>-<span class="hljs-number">1</span><br><span class="hljs-number">1.336267</span>-<span class="hljs-number">1.632889</span>-<span class="hljs-number">1</span><br><span class="hljs-number">9.205805</span>-<span class="hljs-number">0.586480</span><span class="hljs-number">1</span><br><span class="hljs-number">1.966279</span>-<span class="hljs-number">1.840439</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.398012</span><span class="hljs-number">1.584918</span><span class="hljs-number">1</span><br><span class="hljs-number">7.239953</span>-<span class="hljs-number">1.764292</span><span class="hljs-number">1</span><br><span class="hljs-number">7.5562010</span>.<span class="hljs-number">2411851</span><br><span class="hljs-number">9.015509</span><span class="hljs-number">0.345019</span><span class="hljs-number">1</span><br><span class="hljs-number">8.266085</span>-<span class="hljs-number">0.2309771</span><br><span class="hljs-number">8.545620</span><span class="hljs-number">2.788799</span><span class="hljs-number">1</span><br><span class="hljs-number">9.295969</span><span class="hljs-number">1.346332</span><span class="hljs-number">1</span><br><span class="hljs-number">2.4042340</span>.<span class="hljs-number">570278</span>-<span class="hljs-number">1</span><br><span class="hljs-number">2.037772</span><span class="hljs-number">0.021919</span>-<span class="hljs-number">1</span><br><span class="hljs-number">1.727631</span>-<span class="hljs-number">0.453143</span>-<span class="hljs-number">1</span><br><span class="hljs-number">1.979395</span>-<span class="hljs-number">0.050773</span>-<span class="hljs-number">1</span><br><span class="hljs-number">8.092288</span>-<span class="hljs-number">1.372433</span><span class="hljs-number">1</span><br><span class="hljs-number">1.667645</span><span class="hljs-number">0.239204</span>-<span class="hljs-number">1</span><br><span class="hljs-number">9.854303</span><span class="hljs-number">1.3651161</span><br><span class="hljs-number">7.921057</span>-<span class="hljs-number">1.327587</span><span class="hljs-number">1</span><br><span class="hljs-number">8.500757</span><span class="hljs-number">1.492372</span><span class="hljs-number">1</span><br><span class="hljs-number">1.339746</span>-<span class="hljs-number">0.291183</span>-<span class="hljs-number">1</span><br><span class="hljs-number">3.1075110</span>.<span class="hljs-number">758367</span>-<span class="hljs-number">1</span><br><span class="hljs-number">2.609525</span><span class="hljs-number">0.902979</span>-<span class="hljs-number">1</span><br><span class="hljs-number">3.263585</span><span class="hljs-number">1.367898</span>-<span class="hljs-number">1</span><br><span class="hljs-number">2.912122</span>-<span class="hljs-number">0.202359</span>-<span class="hljs-number">1</span><br><span class="hljs-number">1.731786</span><span class="hljs-number">0.589096</span>-<span class="hljs-number">1</span><br><span class="hljs-number">2.387003</span><span class="hljs-number">1.573131</span>-<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CS229</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS229-01--çº¿æ€§æ¨¡å‹</title>
    <link href="/posts/7a22647b.html"/>
    <url>/posts/7a22647b.html</url>
    
    <content type="html"><![CDATA[<p>æ ¹æ®Andrew wu <a href="https://www.bilibili.com/video/BV1JE411w7Ub?from=search&amp;seid=12699853882563574773&amp;spm_id_from=333.337.0.0">æœºå™¨å­¦ä¹ </a>çš„ç›‘ç£å­¦ä¹ çš„ç¬¬ä¸€éƒ¨åˆ†æ‰€æ€»ç»“çš„å…³äºï¼šlinear regressionã€logistic regressionã€gradient decentã€Newtonã€locally weighted linear regressionã€generalized linear model</p><span id="more"></span><h2 id="0x01-å¼•è¨€"><a class="markdownIt-Anchor" href="#0x01-å¼•è¨€"></a> 0x01 å¼•è¨€</h2><p>æœºå™¨å­¦ä¹ çš„å®šä¹‰ï¼š</p><blockquote><p>å¯¹äºæŸç±»ä»»åŠ¡taskå’Œæ€§èƒ½åº¦é‡performanceï¼Œå¦‚æœä¸€ä¸ªè®¡ç®—æœºç¨‹åºåœ¨taskä¸Šä»¥performanceè¡¡é‡çš„æ€§èƒ½éšç€ç»éªŒexperienceè€Œè‡ªæˆ‘å®Œå–„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°è¿™ä¸ªè®¡ç®—æœºç¨‹åºåœ¨ä»experienceä¸­å­¦ä¹ </p></blockquote><p>æœºå™¨å­¦ä¹ çš„æ–¹æ³•åœ¨ä¸åŒé¢†åŸŸä¸­ä»¥ä¸åŒçš„æ–¹å¼é€æ¸å‘å±•åˆ°å…±é€šçš„çŠ¶æ€ï¼Œä»ç»Ÿè®¡å­¦ä¹ ä¸­ä»ç‰¹æ®Šåˆ°ä¸€èˆ¬çš„inferenceã€ä»å·¥ç¨‹å­¦ä¸­çš„æ¨¡å¼è¯†åˆ«ï¼Œä»¥åŠç»“åˆç¥ç»ç½‘ç»œã€ä¿¡å·å¤„ç†ã€è‡ªåŠ¨æ§åˆ¶ã€äººå·¥æ™ºèƒ½ä»¥åŠæ•°æ®æŒ–æ˜ç­‰ä¸åŒé¢†åŸŸæ¥ç»¼åˆæ–¹æ³•ï¼Œä»æ•°æ®ä¸­inductionï¼Œä»è®­ç»ƒçš„æ¨¡å‹deduction</p><p>åœ¨åŒºåˆ†ä¸­æœºå™¨å­¦ä¹ å¸¸è§åˆ†ä¸ºç›‘ç£å­¦ä¹ supervised learningã€éç›‘ç£å­¦ä¹ unsupervised learningå’Œå¼ºåŒ–å­¦ä¹ reinforcement learning</p><ul><li>ç›‘ç£å­¦ä¹ ï¼Œç»™å®šdatasetï¼ŒåŒ…æ‹¬è¾“å…¥xå’Œè¾“å‡ºyï¼Œç”±æ­¤æ¥æ„å»ºä¸€ä¸ªç®—æ³•å¾—åˆ°xå’Œyçš„æ˜ å°„å…³ç³»</li><li>éç›‘ç£å­¦ä¹ ï¼šç»™å®šdatasetï¼ŒåŒ…æ‹¬è¾“å…¥xï¼Œç”±æ­¤æ¥æ„å»ºä¸€äº›ç®—æ³•</li></ul><p>æœºå™¨å­¦ä¹ ç®—æ³•çš„è¿‡ç¨‹åŒ…æ‹¬ï¼š</p><ol><li><p>é¦–å…ˆæ„å»ºä¸€ä¸ªå‡è®¾å‡½æ•°ï¼ˆhypothesisï¼‰ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæ¨¡å‹ä¸­éœ€è¦çš„å‚æ•°ï¼ˆparameterï¼‰</p></li><li><p>ä¹‹åæ„å»ºç›®æ ‡å‡½æ•°ï¼ˆtargetï¼‰ï¼Œæ¥è®©åŒ…å«å‚æ•°çš„æ¨¡å‹æ›´åŠ è´´åˆå®é™…ï¼Œè¿™é‡Œéœ€è¦ä¸€å®šçš„ç›®æ ‡å‡½æ•°æ¥åˆ»ç”»</p></li><li><p>è½¬æ¢æˆä¸ºä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼ˆoptimizationï¼‰ï¼Œå¯ä»¥åˆ©ç”¨ä¸€äº›ç®—æ³•æ¥è¿›å»æ±‚è§£</p></li><li><p>å¯¹æ¨¡å‹è¿›è¡ŒæŒ‡æ ‡çš„è¯„ä»·</p></li></ol><h2 id="0x02-çº¿æ€§å›å½’-linear-regression"><a class="markdownIt-Anchor" href="#0x02-çº¿æ€§å›å½’-linear-regression"></a> 0x02 çº¿æ€§å›å½’ linear regression</h2><h3 id="æ•°æ®é›†"><a class="markdownIt-Anchor" href="#æ•°æ®é›†"></a> æ•°æ®é›†</h3>è¾“å…¥å˜é‡ï¼šX^i=[x^i_1,x^i_2,...,x^i_n]\\è¾“å‡ºå˜é‡ï¼šy^i\\å•ä¸ªå®ä¾‹ï¼š\{X^i,y^i\}\\å®Œæ•´æ•°æ®é›†ï¼š\{(X^i,y^i),i=1,...,m\}<h3 id="å‡è®¾"><a class="markdownIt-Anchor" href="#å‡è®¾"></a> å‡è®¾</h3><p>çº¿æ€§å›å½’ä¸­æ¯”è¾ƒå¼ºçš„å‡è®¾ä¸º</p>\hat{y}=h_\theta(X)=\theta^T*X\theta:[1,(n+1)]\\X:=[x^0,x^1,...,x^n],x^0=1<h3 id="ç›®æ ‡å‡½æ•°"><a class="markdownIt-Anchor" href="#ç›®æ ‡å‡½æ•°"></a> ç›®æ ‡å‡½æ•°</h3><ul><li><p>ç›´è§‚çš„æ–¹æ³•ï¼Œç›®æ ‡å‡½æ•°æ˜¯é¢„æµ‹å€¼predictå’ŒçœŸå®å€¼ground- truthä¹‹é—´çš„æŸç§ä¸ç›¸ä¼¼çš„å…³ç³»ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯ä¸¤è€…å°½å¯èƒ½çš„ç›¸ä¼¼ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä½¿ç”¨æ¬§æ°è·ç¦»æ¥åˆ»ç”»ï¼š</p>loss\ function= 1/2*\Sigma_{i=1}^{m}[h_\theta(X^i)-y^i]^2\\<p>ï¼ˆè¿™é‡Œçš„1/2åªæ˜¯ä¸ºäº†æ–¹ä¾¿åç»­æ±‚å¯¼çš„æ–¹ä¾¿ï¼‰</p><p>æˆ‘ä»¬å¸Œæœ›è¿™ä¸ªè¶Šå°è¶Šå¥½</p></li><li><p>æ¦‚ç‡è§£é‡Šçš„æ–¹æ³•ï¼Œåœ¨é¢„æµ‹ä¸­æ€»ä¼šæœ‰ç€å„ç§å„æ ·çš„è¯¯å·®ï¼Œæ‰€ä»¥</p>\hat{y^i}=h_\theta(X^i)+\epsilon^i \\<p>è¿™æ ·è§£é‡Š<strong>å…¶å®æ˜¯å°†é¢„æµ‹å€¼ y çœ‹æˆæ˜¯ä¸€ä¸ªåˆ†å¸ƒï¼Œè¿™ä¸ªåˆ†å¸ƒé¦–å…ˆå…·æœ‰ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒå‡½æ•°ï¼Œä¹‹åæˆ‘ä»¬åœ¨é¢„æµ‹ä¸­å¸Œæœ›çš„æ˜¯æ‰€æœ‰é¢„æµ‹å€¼çš„åˆ†å¸ƒåœ¨å–çœŸå®å€¼çš„æ—¶å€™æ¦‚ç‡æœ€å¤§ï¼Œè¿™æ—¶å€™æ±‚è§£å‡ºæ¥çš„å‚æ•°å°±æ˜¯æ¨¡å‹æƒ³è¦çš„å‚æ•°</strong></p><p>æ ¹æ®ä¸­å¿ƒæé™å®šç†è¿™ä¸ªæ¨å¯¼å¾—å‡ºè¯¯å·®é¡¹åˆ†å¸ƒæ˜¯ä¸€ç§é«˜æ–¯åˆ†å¸ƒï¼Œåˆ™å¾—åˆ°é¢„æµ‹å€¼çš„åˆ†å¸ƒ</p>\epsilon^i \in N(0,\sigma^2)\\\hat {y^i}=\frac{1}{\sigma*\sqrt(2*\pi)}*exp(-\frac{(\hat y^i-h_\theta(X))^2}{2*\sigma^2})<p>å¾—åˆ°æœ€å¤§ä¼¼ç„¶å‡½æ•°ï¼ˆlikelihood functionï¼‰</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mo>=</mo><msubsup><mo>âˆ</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><mi>P</mi><mo>(</mo><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo separator="true">,</mo><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">L=\prod_{i=1}^m P(\hat y|X,\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.6513970000000002em;"></span><span class="strut bottom" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">L</span><span class="mrel">=</span><span class="mop op-limits"><span class="vlist"><span style="top:1.1776689999999999em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span><span style="top:-0.000005000000000143778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span><span class="op-symbol large-op mop">âˆ</span></span></span><span style="top:-1.2500050000000003em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></p><p>ç„¶åå¯¹å…¶å–å¯¹æ•°åæ±‚å¯¼</p>Inï¼ˆLï¼‰=\Sigma_{i=1}^{m}P(\hat{y})\\\frac{\partial(In (L))}{\partial \theta}=\Sigma_{i=1}^m[Ln(\frac{1}{\sigma*\sqrt(2*\pi)})+-\frac{(\hat y^i-h_\theta(X))^2}{2*\sigma^2}]<p>å¦‚æœå¸Œæœ›ä¸Šå¼æœ€å°ï¼Œ<strong>ç­‰ä»·</strong></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mi>a</mi><mi>x</mi><mo>âˆ’</mo><mfrac><mrow><mo>(</mo><msup><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msup><mo>âˆ’</mo><msub><mi>h</mi><mi>Î¸</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">Max -\frac{(\hat y^i-h_\theta(X))^2}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.5016639999999999em;"></span><span class="strut bottom" style="height:2.187664em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mbin">âˆ’</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p><p>æˆ–è€…<strong>ç­‰ä»·</strong>äº</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mi>i</mi><mi>n</mi><mtext>Â </mtext><mfrac><mrow><mo>(</mo><msup><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msup><mo>âˆ’</mo><msub><mi>h</mi><mi>Î¸</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">Min\ \frac{(\hat y^i-h_\theta(X))^2}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.5016639999999999em;"></span><span class="strut bottom" style="height:2.187664em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mspace">Â </span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mopen">(</span><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span style="top:0em;margin-left:0.11112em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p></li></ul><p>éå¸¸amazingçš„çœ‹å‡ºä¸¤ä¸ªæ–¹æ³•å±…ç„¶å¾—åˆ°ç›¸åŒçš„ç»“è®ºï¼ä½†å…¶å®æ·±æ€æˆ‘ä»¬ä¼šå‘ç°ç¬¬ä¸€ç§æ–¹æ³•æˆ‘ä»¬æ˜¯æ ¹æ®ç»éªŒæ¥å¾—åˆ°ï¼Œæˆ‘ä»¬ä¸»è§‚çš„è®¤è¯†ç”¨åœ¨çº¿æ€§å›å½’ä¸­åˆ©ç”¨æ¬§å¼è·ç¦»ä¼šå¥½ä¸€ç‚¹ï¼Œç¬¬äºŒç§æ–¹æ³•æˆ‘ä»¬å¸¦ç€ä¸€ä¸ªå‡è®¾ï¼ˆè¯¯å·®æ»¡è¶³é«˜æ–¯åˆ†å¸ƒï¼‰å‡ºå‘ï¼Œæ¥å¾—åˆ°æ¦‚ç‡åˆ†å¸ƒï¼Œé€šè¿‡maximum likelihood estimationï¼ˆMLEï¼‰å¾—åˆ°æŸå¤±å‡½æ•°,ä¸¤è€…åªæ˜¯è§£é‡Šçš„æ–¹æ³•ä¸åŒ</p><h3 id="ä¼˜åŒ–ç®—æ³•"><a class="markdownIt-Anchor" href="#ä¼˜åŒ–ç®—æ³•"></a> ä¼˜åŒ–ç®—æ³•</h3><p>è¿™ç§ä¼˜åŒ–ç®—æ³•çš„å¸¸è§æ˜¯ä½¿ç”¨æ¢¯åº¦ä¸‹é™çš„æ–¹å¼è¿›è¡Œè®¡ç®—ï¼š</p>init\ \ \theta=zeros(1,n+1)\\update:\theta_j:=\theta_j-lr*\frac{\partial J}{\partial \theta}\\lr:learning\ rate<p>ç”±ä¸Šè¿°æ¨å¯¼çœ‹å‡ºæˆ‘ä»¬çš„ç›®æ ‡å‡½æ•°çš„æ¢¯åº¦</p>J(\theta)=\frac{(\hat y^i-h_\theta (X^i))^2}{2}\\\frac{\partial J}{\partial \theta }=\Sigma_{i=1}^m(h_\theta(X^i)-y^i)*\frac{\partial h_\theta(X^i)}{\partial \theta}\\è¿™é‡Œçš„:X^i:(1,n+1)=\{x_0,x_1,...,x_j,...,x_n\}\\åˆ™ï¼š\frac{\partial J}{\partial \theta }=\Sigma_{i=1}^m(h_\theta(X^i)-y^i)*X^i<p>è¿™æ ·å°±å¯ä»¥æ¯æ¬¡è¿è¡Œä¸‹å»äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šå‘ç°åœ¨ä¼˜åŒ–çš„è¿‡ç¨‹æ¯æ¬¡æ¢¯åº¦ä¸‹é™çš„è¿‡ç¨‹éƒ½éœ€è¦å¯¹æ‰€æœ‰æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œæ‰€ä»¥é€šå¸¸è¢«ç§°ä¸º<strong>batch gradient descentï¼ˆBGDï¼‰</strong>ï¼Œä½†æ˜¯è¿™æ ·é€Ÿåº¦é€šå¸¸ä¼šå˜çš„å¾ˆæ…¢ï¼Œå› æ­¤éœ€è¦å°è¯•**stochastic gradient descentï¼ˆSGDï¼‰**ä¸‹é™çš„æ¢¯åº¦åªä½¿ç”¨ä¸€ä¸ªç‚¹è€Œä¸æ˜¯æ‰€æœ‰ç‚¹çš„æ¢¯åº¦ç›¸åŠ ï¼Œç”±æ­¤å¾—åˆ°æœ€ç»ˆè§£</p><h2 id="0x03-é€»è¾‘å›å½’-logistics-regression"><a class="markdownIt-Anchor" href="#0x03-é€»è¾‘å›å½’-logistics-regression"></a> 0x03 é€»è¾‘å›å½’ logistics regression</h2><h3 id="æ•°æ®é›†-2"><a class="markdownIt-Anchor" href="#æ•°æ®é›†-2"></a> æ•°æ®é›†</h3>è¾“å…¥å˜é‡ï¼šX^i=[x^i_1,x^i_2,...,x^i_n]\\è¾“å‡ºå˜é‡ï¼šy^i\in{0,1}\\å•ä¸ªå®ä¾‹ï¼š\{X^i,y^i\}\\å®Œæ•´æ•°æ®é›†ï¼š\{(X^i,y^i),i=1,...,m\}<p>ä¸ä¹‹å‰ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œçš„è¾“å‡ºå˜é‡æˆ–è€…è¯´æ˜¯labelï¼Œä»…ä¸º0æˆ–è€…1</p><h3 id="å‡è®¾-2"><a class="markdownIt-Anchor" href="#å‡è®¾-2"></a> å‡è®¾</h3><p>æˆ‘ä»¬ä»ç„¶å‡è®¾ä¸ºçº¿æ€§æ¨¡å‹ï¼š</p>h_\theta(X)=g(\theta^T*X)\\g(z)=\frac{1}{1+exp(-z)}\\ç”±æ­¤å¾—åˆ°çš„é¢„æµ‹å€¼è¾“å‡ºï¼š\\\hat y = \begin{cases}  0 & \theta^T X<0\\1 & \theta^T X >=0\end{cases}<h3 id="æŸå¤±å‡½æ•°"><a class="markdownIt-Anchor" href="#æŸå¤±å‡½æ•°"></a> æŸå¤±å‡½æ•°</h3><p>è¿™é‡Œæˆ‘ä»¬ä»æ¦‚ç‡åˆ†å¸ƒçš„è§’åº¦å‡ºå‘ï¼Œåˆ©ç”¨MLEçš„æ–¹å¼æ¥å¯»æ‰¾æœ€ä½³çš„æŸå¤±å‡½æ•°</p><p>é¦–å…ˆç¡®å®šé¢„æµ‹å€¼ y çš„åˆ†å¸ƒ</p>P(\hat{y}=0)=h_\theta(X)\\P(\hat{y}=1)=1-h_\theta(X)\\<p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥å‡ºé¢„æµ‹å€¼æ­£ç¡®çš„æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ä¸ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mover accent="true"><mrow><msup><mi>y</mi><mi>i</mi></msup></mrow><mo>^</mo></mover><mo>)</mo><mo>=</mo><msub><mi>h</mi><mi>Î¸</mi></msub><mo>(</mo><mi>X</mi><msup><mo>)</mo><mrow><mn>1</mn><mo>âˆ’</mo><msup><mi>y</mi><mi>i</mi></msup></mrow></msup><mo>âˆ—</mo><mo>(</mo><mn>1</mn><mo>âˆ’</mo><msub><mi>h</mi><mi>Î¸</mi></msub><mo>(</mo><mi>X</mi><msup><mo>)</mo><mrow><msup><mi>y</mi><mi>i</mi></msup></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">P(\hat{y^i})=h_\theta(X)^{1-y^i}*(1-h_\theta(X)^{y^i})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.014104em;"></span><span class="strut bottom" style="height:1.264104em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="mord displaystyle textstyle cramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.289em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span><span style="top:-0.319664em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="accent-body"><span>^</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mbin">âˆ—</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">âˆ’</span><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.41300000000000003em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:-0.363em;margin-right:0.07142857142857144em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-scriptstyle scriptscriptstyle uncramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mclose">)</span></span></span></span></span></p><p>æˆ‘ä»¬å¸Œæœ›é’ˆå¯¹æ‰€æœ‰çš„åˆ†å¸ƒå‡½æ•°å¯ä»¥æœ€å¤§åŒ–</p>L=\prod_{i=1}^m(h_\theta(X)^{1-y^i}*(1-h_\theta(X)^{y^i}))\\<h3 id="ä¼˜åŒ–ç®—æ³•-2"><a class="markdownIt-Anchor" href="#ä¼˜åŒ–ç®—æ³•-2"></a> ä¼˜åŒ–ç®—æ³•</h3><ul><li><p>GD æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•</p><p>é¦–å…ˆè®¡ç®—æ¢¯åº¦ã€ç„¶åæ›´æ–°</p>\frac{\partial(InJ)}{\partial\theta}=\Sigma_{i=1}^m[(1-y)*1/h_\theta(X)-y*/(1-h_\theta(X))]*\frac{\partial h_\theta(X)}{\partial\theta}\\åŒæ—¶\\\frac{\partial h_\theta(X)}{\partial \theta}=X*\frac{\partial g(\theta^TX)}{\partial \theta}\\å¯å¾—åˆ°\\\frac{\partial(InJ)}{\partial\theta}=(y-h_\theta(X))*X<p>æ›´æ–°æ¢¯åº¦</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î¸</mi><mo>:</mo><mo>=</mo><mi>Î¸</mi><mo>+</mo><mi>l</mi><mi>r</mi><mo>âˆ—</mo><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mo>(</mo><mi>I</mi><mi>n</mi><mi>J</mi><mo>)</mo></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><mi>Î¸</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\theta:=\theta+lr*\frac{\partial(InJ)}{\partial\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.427em;"></span><span class="strut bottom" style="height:2.113em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mrel">:</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mbin">âˆ—</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm" style="margin-right:0.05556em;">âˆ‚</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="mclose">)</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p></li><li><p>Newtonæ³•</p></li></ul><p>æ¨å¯¼è¿‡ç¨‹æ²¡æœ‰çœ‹ï¼Œä½†æ˜¯æ›´æ–°å‚æ•°çš„è¿‡ç¨‹ä¸º</p>\theta:=\theta-H^{-1}\bigtriangledown_\theta L(\theta)\\Hessian\ matrix:H_{ij}=\frac{\partial^2 L(\theta)}{\partial \theta_i\partial\theta_j}<h3 id="ç•ªå¤–-logistic-code"><a class="markdownIt-Anchor" href="#ç•ªå¤–-logistic-code"></a> ç•ªå¤–-- logistic code</h3><p>æ ¹æ®æœºå™¨å­¦ä¹ è¯¾åä¹ é¢˜æ¥çš„ï¼š</p><ol><li>å»ºç«‹ä¸€ä¸ªçº¿æ€§æ¨¡å‹çš„classï¼š</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LinearModel</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;Base class for linear models.&quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, step_size=<span class="hljs-number">0.2</span>, max_iter=<span class="hljs-number">100</span>, eps=<span class="hljs-number">1e-2</span>,</span><br><span class="hljs-params">                 theta_0=<span class="hljs-literal">None</span>, learning_rate=<span class="hljs-number">0.01</span>,verbose=<span class="hljs-literal">True</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            step_size: Step size for iterative solvers only.</span><br><span class="hljs-string">            max_iter: Maximum number of iterations for the solver.</span><br><span class="hljs-string">            eps: Threshold for determining convergence.</span><br><span class="hljs-string">            theta_0: Initial guess for theta. If None, use the zero vector.</span><br><span class="hljs-string">            verbose: Print loss values during training.</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        self.theta = theta_0<br>        self.step_size = step_size<br>        self.max_iter = max_iter<br>        self.eps = eps<br>        self.verbose = verbose<br>        self.learning_rate=learning_rate<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fit</span>(<span class="hljs-params">self, x, y</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;Run solver to fit linear model.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            x: Training example inputs. Shape (m, n).</span><br><span class="hljs-string">            y: Training example labels. Shape (m,).</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">raise</span> NotImplementedError(<span class="hljs-string">&#x27;Subclass of LinearModel must implement fit method.&#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;Make a prediction given new inputs x.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            x: Inputs of shape (m, n).</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            Outputs of shape (m,).</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">raise</span> NotImplementedError(<span class="hljs-string">&#x27;Subclass of LinearModel must implement predict method.&#x27;</span>)<br><br></code></pre></td></tr></table></figure><p>ä¹‹åå¯¹å…¶è¿›è¡Œæ›´æ”¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> util<br><span class="hljs-keyword">from</span> linear_model <span class="hljs-keyword">import</span> LinearModel<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">train_path, eval_path, pred_path</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;Problem 1(b): Logistic regression with Newton&#x27;s Method.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Args:</span><br><span class="hljs-string">        train_path: Path to CSV file containing dataset for training.</span><br><span class="hljs-string">        eval_path: Path to CSV file containing dataset for evaluation.</span><br><span class="hljs-string">        pred_path: Path to save predictions.</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    x_train, y_train = util.load_dataset(train_path, add_intercept=<span class="hljs-literal">True</span>)<br>    x_eval, y_eval = util.load_dataset(eval_path, add_intercept=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-comment"># *** START CODE HERE ***</span><br>    model = LogisticRegression()<br>    model.fit(x_train, y_train)<br>    <span class="hljs-comment"># *** END CODE HERE ***</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LogisticRegression</span>(<span class="hljs-title class_ inherited__">LinearModel</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;Logistic regression with Newton&#x27;s Method as the solver.</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Example usage:</span><br><span class="hljs-string">        &gt; clf = LogisticRegression()</span><br><span class="hljs-string">        &gt; clf.fit(x_train, y_train)</span><br><span class="hljs-string">        &gt; clf.predict(x_eval)</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fit</span>(<span class="hljs-params">self, x, y</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;Run Newton&#x27;s Method to minimize J(theta) for logistic regression.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            x: Training example inputs. Shape (m, n).</span><br><span class="hljs-string">            y: Training example labels. Shape (m,).</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br><br>        <span class="hljs-comment"># *** START CODE HERE ***</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">h</span>(<span class="hljs-params">theta, x</span>):<br>            <span class="hljs-string">&#x27;&#x27;&#x27; logisticçš„å‡è®¾</span><br><span class="hljs-string"></span><br><span class="hljs-string">            å‚æ•°ï¼š</span><br><span class="hljs-string">                thetaï¼šè¶…å‚æ•°</span><br><span class="hljs-string">                xï¼šè¾“å…¥å˜é‡ï¼Œæˆ–è€…æ˜¯ç‰¹å¾å€¼</span><br><span class="hljs-string">            &#x27;&#x27;&#x27;</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> / (<span class="hljs-number">1</span> + np.exp(-np.dot(x, theta)))<br><br>        <span class="hljs-comment"># *** END CODE HERE ***</span><br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">gradient</span>(<span class="hljs-params">theta, x, y</span>):<br>            <span class="hljs-string">&#x27;&#x27;&#x27; è®¡ç®—æ¢¯åº¦</span><br><span class="hljs-string"></span><br><span class="hljs-string">            å‚æ•°ï¼š</span><br><span class="hljs-string">                thetaï¼šè¶…å‚æ•°</span><br><span class="hljs-string">                xï¼šè¾“å…¥å˜é‡</span><br><span class="hljs-string">                yï¼šéªŒè¯å˜é‡</span><br><span class="hljs-string"></span><br><span class="hljs-string">            &#x27;&#x27;&#x27;</span><br>            m, _ = x.shape<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span> / m * np.dot(x.T, (y - h(theta, x)))<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">hessian</span>(<span class="hljs-params">theta, x</span>):<br>            <span class="hljs-string">&quot;&quot;&quot; è®¡ç®—Hessianå…¬å¼</span><br><span class="hljs-string">            &quot;&quot;&quot;</span><br>            m, _ = x.shape<br>            h_theta_x = np.reshape(h(theta, x), (-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> / m * np.dot(x.T, h_theta_x * (<span class="hljs-number">1</span> - h_theta_x) * x)<br><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">next_theta</span>(<span class="hljs-params">theta, x, y</span>):<br>            <span class="hljs-string">&quot;&quot;&quot;é€šè¿‡Newtonæ³•æ¥æ›´æ–°theta</span><br><span class="hljs-string"></span><br><span class="hljs-string">            :param theta: Shape (n,).</span><br><span class="hljs-string">            :return:      The updated theta of shape (n,).</span><br><span class="hljs-string">            &quot;&quot;&quot;</span><br>            <span class="hljs-keyword">return</span> theta - np.dot(np.linalg.inv(hessian(theta, x)), gradient(theta, x, y))<br><br>        m, n = x.shape  <span class="hljs-comment"># mæ˜¯è®­ç»ƒé›†çš„å¤§å°ï¼Œnæ˜¯ç‰¹å¾çš„å¤šå°‘</span><br><br>        <span class="hljs-comment"># åˆå§‹åŒ–theta</span><br>        <span class="hljs-keyword">if</span> self.theta <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            self.theta = np.zeros(n)<br><br>        <span class="hljs-comment"># æ›´æ–°theta</span><br>        old_theta = self.theta<br>        new_theta = next_theta(self.theta, x, y)<br><br>        <span class="hljs-comment"># åˆé€‚çš„æ—¶å€™åœæ­¢</span><br>        <span class="hljs-keyword">while</span> np.linalg.norm(new_theta - old_theta, <span class="hljs-number">1</span>) &gt;= self.eps:<br>            old_theta = new_theta<br>            new_theta = next_theta(old_theta, x, y)<br><br>        self.theta = new_theta<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;Make a prediction given new inputs x.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Args:</span><br><span class="hljs-string">            x: Inputs of shape (m, n).</span><br><span class="hljs-string"></span><br><span class="hljs-string">        Returns:</span><br><span class="hljs-string">            Outputs of shape (m,).</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-comment"># *** START CODE HERE ***</span><br>        <span class="hljs-keyword">return</span> x @ self.theta &gt;= <span class="hljs-number">0</span><br>        <span class="hljs-comment"># *** END CODE HERE ***</span><br><br><br>train_path = <span class="hljs-string">&#x27;../data/ds1_train.csv&#x27;</span><br>valid_path = <span class="hljs-string">&#x27;../data/ds1_valid.csv&#x27;</span><br>prad_path = <span class="hljs-string">&#x27;../data/ds1_valid.csv&#x27;</span><br>main(train_path, valid_path, prad_path)<br><br></code></pre></td></tr></table></figure><h2 id="0x04-å¹¿ä¹‰çº¿æ€§æ¨¡å‹-generative-linear-model"><a class="markdownIt-Anchor" href="#0x04-å¹¿ä¹‰çº¿æ€§æ¨¡å‹-generative-linear-model"></a> 0x04  å¹¿ä¹‰çº¿æ€§æ¨¡å‹ Generative linear model</h2><p>ä¸‰ä¸ªæœ€åŸºæœ¬çš„å‡è®¾</p><ol><li><p>é¢„æµ‹å€¼yçš„åˆ†å¸ƒæ˜¯æŒ‡æ•°æ—ï¼Œï½Exponential Familyï¼ˆnï¼‰å…¶ä¸­nä¸ºè¶…å‚æ•°</p></li><li><p>å¯¹äºç»™å®šçš„xï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªå…³äºé¢„æµ‹å€¼yçš„æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ï¼Œè¿™ä¸ªåˆ†å¸ƒå‡½æ•°çš„æœŸæœ›æˆ‘ä»¬å°†å…¶ä½œä¸ºæˆ‘ä»¬æœ€ç»ˆçš„é¢„æµ‹å€¼ï¼Œåˆ™æ»¡è¶³</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mo>(</mo><mi>X</mi><mo>)</mo><mo>=</mo><mi>E</mi><mo>(</mo><mi>y</mi><mi mathvariant="normal">âˆ£</mi><mi>X</mi><mo separator="true">,</mo><mi>Î¸</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">h(X)=E(y|X,\theta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">h</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mord mathrm">âˆ£</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="mclose">)</span></span></span></span></span></p></li><li><p>ï¼ˆé™åˆ¶æ€§æœ€å¤§çš„å‡è®¾ï¼‰å‡è®¾è‡ªç„¶å‚æ•°nå’Œè¾“å…¥å˜é‡xä¹‹å‰çš„å…³ç³»æ˜¯çº¿æ€§çš„</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Î·</mi><mo>=</mo><msup><mi>Î¸</mi><mi>T</mi></msup><mi>X</mi></mrow><annotation encoding="application/x-tex">\eta=\theta^TX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.0857709999999998em;vertical-align:-0.19444em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span></span></p></li></ol><blockquote><p><a href="https://zhangzhenhu.github.io/blog/glm/source/%E6%8C%87%E6%95%B0%E6%97%8F/content.html">å…³äºä»€ä¹ˆæ˜¯æŒ‡æ•°æ—</a></p><p>æŒ‡æ•°æ—åˆ†å¸ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æ¦‚ç‡åˆ†å¸ƒï¼ŒæŒ‡çš„æ˜¯ä¸€ç±»åˆ†å¸ƒï¼Œè¿™ç±»åˆ†å¸ƒå…·æœ‰ä¸€äº›å…±åŒçš„ç‰¹æ€§ï¼Œæ‰€ä»¥å½¢æˆä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒæ—familyï¼Œå¸¸è§çš„æŒ‡æ•°æ—åˆ†å¸ƒåŒ…æ‹¬é«˜æ–¯åˆ†å¸ƒã€äºŒé¡¹åˆ†å¸ƒã€å¤šé¡¹å¼åˆ†å¸ƒã€æ³Šæ¾åˆ†å¸ƒã€gammaåˆ†å¸ƒã€betaåˆ†å¸ƒç­‰</p>P(y,\eta)=b(y)*exp(\eta^TT(y)-a(\eta))\\è¿™é‡Œçš„\eta ä¸ºè‡ªç„¶å‚æ•°\\T(y)æ˜¯å……åˆ†ç»Ÿè®¡é‡\\a(\eta)æ˜¯å¯¹æ•°åˆ†å‰²å‡½æ•°ï¼Œæ¥å¸®åŠ©\int p(y,\eta)dy=1<p>å¸¸è§çš„æŒ‡æ•°æ—å’Œå¯¹åº”åˆ†ç±»ç®—æ³•çš„ï¼š</p><p>å®æ•°ï½é«˜æ–¯åˆ†å¸ƒ</p><p>0-1åˆ†å¸ƒï½ä¼¯åŠªåˆ©åˆ†å¸ƒ</p><p>è®¡æ•°åˆ†å¸ƒï½æ³Šæ¾åˆ†å¸ƒ</p><p>éé›¶å®æ•°ï½Gammaæ­£å‚æ•°åˆ†å¸ƒ</p></blockquote><h3 id="ç”±glmæ„å»ºçº¿æ€§æ¨¡å‹çš„è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#ç”±glmæ„å»ºçº¿æ€§æ¨¡å‹çš„è¿‡ç¨‹"></a> ç”±GLMæ„å»ºçº¿æ€§æ¨¡å‹çš„è¿‡ç¨‹</h3><ol><li><p>linear regression</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>h</mi><mi>Î¸</mi></msub><mo>(</mo><mi>X</mi><mo>)</mo><mo>=</mo><mi>E</mi><mo>(</mo><mi>y</mi><mo>)</mo><mo>=</mo><mi>u</mi><mo>=</mo><mi>Î·</mi><mo>=</mo><msup><mi>Î¸</mi><mi>T</mi></msup><mi>X</mi></mrow><annotation encoding="application/x-tex">h_\theta(X)=E(y)=u=\eta=\theta^TX</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8913309999999999em;"></span><span class="strut bottom" style="height:1.1413309999999999em;vertical-align:-0.25em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mord mathit">h</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit">u</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">Î·</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">Î¸</span><span class="vlist"><span style="top:-0.413em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">â€‹</span></span>â€‹</span></span></span><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span></span></p></li><li><p>logistic regression</p>h_\theta(x)=E(y)=\phi\\=\frac{1}{1+e^{-\eta}}\\=\frac{1}{1+e^{-\theta^Tx}}</li></ol><h2 id="0x05-é«˜æ–¯åˆ¤åˆ«å¼ç®—æ³•-gauss-discriminant-analysis"><a class="markdownIt-Anchor" href="#0x05-é«˜æ–¯åˆ¤åˆ«å¼ç®—æ³•-gauss-discriminant-analysis"></a> 0x05 é«˜æ–¯åˆ¤åˆ«å¼ç®—æ³• Gauss discriminant analysis</h2><p>åˆ¤åˆ«å¼ç®—æ³•ï¼šå¸Œæœ›æ‰¾åˆ°ä¸€ä¸ªåˆ†åˆ«çš„ç®—æ³•</p><p>ç”Ÿæˆå¼ç®—æ³•ï¼šå¸Œæœ›é’ˆå¯¹æ•°æ®æœ¬èº«å»ºæ¨¡</p><p>ï¼ˆåˆ¤åˆ«å¼ç®—æ³•æ„å‘³ç€ä¸€ä¸ªæ‰¾åˆ°ä¸€ä¸ªçº¿æ¥åŒºåˆ†ä¸¤è€…ï¼Œç”Ÿæˆç®—æ³•æ„å‘³ç€æ‰¾åˆ°æ•°æ®æœ¬èº«çš„æ€§è´¨ï¼‰</p><p>æˆ–è®¸ä¸€ä¸ªæ˜¯é¢‘ç‡å­¦æ´¾ã€ä¸€ä¸ªæ˜¯è´å¶æ–¯å­¦æ´¾â€¦</p>]]></content>
    
    
    <categories>
      
      <category>MachineLearning</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AndrewWu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HELLO WORLD</title>
    <link href="/posts/87e5865b.html"/>
    <url>/posts/87e5865b.html</url>
    
    <content type="html"><![CDATA[<p>å…³äºä¸ºä»€ä¹ˆæˆ‘å¸Œæœ›æ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„åšå®¢ï¼Ÿå¹¶æ‰¿è¯ºä¼šå°†è¿™ä»½åšå®¢å†™ä¸‹å»</p><span id="more"></span><h2 id="0x01-å…³äºblog"><a class="markdownIt-Anchor" href="#0x01-å…³äºblog"></a> 0x01 å…³äºblog</h2><p>åšå®¢æœ¬èº«ä¾¿æœ‰ç€å…¶è‡ªèº«ä½œä¸ºäº’è”ç½‘çš„æµªæ¼«ï¼ï¼ˆè¿™é‡Œä¸è°ˆweb3ï¼‰äº’è”ç½‘ä½œä¸ºå…¶è¯ç”Ÿä¹‹åˆä¾¿æ˜¯è®©æ¯ä¸ªäººéƒ½å¹³ç­‰çš„é“¾æ¥èµ·æ¥å¹¶å¯ä»¥åˆ†äº«å’Œå‘è¡¨è‡ªå·±çš„è§‚ç‚¹ï¼Œä½†æ˜¯éšç€å•†ä¸šå’Œæ”¿åºœçš„èå…¥ï¼Œäº’è”ç½‘é€æ¸æ˜¾ç¤ºå‡ºå…¶å·¥å…·æ€§çš„ç‰¹ç‚¹ï¼Œä¸ªäººåœ¨å…¶ä¸­çš„ä½œç”¨é€æ¸è¢«å„æ–­æ€§çš„äº’è”ç½‘å…¬å¸æ‰€æŠ¹é™¤ï¼Œä»¿ä½›äº’è”ç½‘å…¬å¸ä¾¿æ˜¯äº’è”ç½‘ä¸­çš„å®é™…æ‰§æ³•è€…ã€‚ä½†å›é¡¾åœ¨äº’è”ç½‘æœ€å¼€å§‹çš„æ„¿æ™¯ä¸­ï¼Œæ˜¯å¸Œæœ›æ¯ä¸ªäººå¯ä»¥é€šè¿‡äº’è”ç½‘è¿æ¥åœ¨ä¸€èµ·ï¼Œåšå®¢æœ‰ç€ä¸€å°æœåŠ¡å™¨ã€ä¸€ä¸ªåŸŸåä¾¿å¯ä»¥å‘ä¸å‡ºè‡ªå·±çš„ç”Ÿæ´»ç‚¹æ»´ã€è‡ªç”±æ€æƒ³ç­‰ï¼Œå¯ä»¥è®©è‡ªå·±çš„å£°éŸ³åœ¨äº’è”ç½‘çš„ä¸€è§’ä¸­çš„ç•™æœ‰å›å“</p><h2 id="0x02-å…³äºè‡ªå·±"><a class="markdownIt-Anchor" href="#0x02-å…³äºè‡ªå·±"></a> 0x02 å…³äºè‡ªå·±</h2><p>æœ¬äººçš„ä¸“ä¸šæ˜¯äº¤é€šè¿è¾“è¡Œä¸šä¸­çš„äº¤é€šä¿¡æ¯æ–¹å‘çš„å¤§å››å­¦ç”Ÿï¼ˆ2022å¹´ï¼‰ï¼Œä½œä¸ºä¸€åç»¼åˆæ€§çš„åº”ç”¨å­¦ç§‘ï¼Œäº¤é€šæœ¬ç§‘ä¸­å­¦ä¹ çš„æ–¹å‘å¾ˆå¤šï¼Œä½†æ˜¯åŒæ ·ä¹Ÿæœ‰å­¦çš„ä¸ç²¾ç»†çš„ç‰¹ç‚¹</p><ul><li>ï¼ˆåŸºç¡€ç±»ï¼‰é«˜ç­‰æ•°å­¦ã€çº¿æ€§ä»£æ•°ã€æ¦‚ç‡è®ºã€å¤å˜å‡½æ•°ã€ç†è®ºåŠ›å­¦ã€C++</li><li>ï¼ˆä¸“ä¸šåŸºç¡€ç±»ï¼‰æ¨¡ç”µæ•°ç”µã€ç”µè·¯åˆ†æã€äº¤é€šä¿¡å·åŸºç¡€ã€è‡ªåŠ¨æ§åˆ¶åŸç†ã€ä¿¡å·ä¸ç³»ç»Ÿã€ä¿¡æ¯ä¼ è¾“åŸç†</li><li>ï¼ˆä¸“ä¸šè¿›é˜¶ï¼‰åµŒå…¥å¼ç³»ç»Ÿã€äº¤é€šä¿¡æ¯æ£€æµ‹ä¸å¤„ç†ã€äº¤é€šæ•°æ®åˆ†æã€è½¦ç«™ä¸åŒºé—´ä¿¡å·æ§åˆ¶ã€åˆ—è½¦è¿è¡Œæ§åˆ¶ç³»ç»Ÿ</li></ul><p>åœ¨è®¡ç®—æœºæŠ€æœ¯åŠ æŒåœ¨ä¼ ç»Ÿè¡Œä¸šä¸­ï¼Œä»¥æ•°æ®æ¥è¯´è¯çš„æ€æƒ³æ¨åŠ¨ç€æ•°æ®åŒ–ã€ä¿¡æ¯åŒ–ã€æ™ºèƒ½åŒ–ã€è‡ªåŠ¨åŒ–çš„å‘å±•ï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯æœ¬äººç ”ç©¶ç”Ÿä¹‹åçš„æ–¹å‘ã€‚æ‰€ä»¥ä½œä¸ºä¸€ä¸ªéè®¡ç®—æœºç§‘å­¦ã€éæ•°å­¦ç§‘å­¦å‡ºç”Ÿçš„äººæ¥è¯´ï¼Œäº¤é€šè¡Œä¸šå¯¹äºæ•°æ®å¤„ç†çš„æ–¹å¼å¯èƒ½æœ€å¤šæ˜¯åœ¨äºæ¨¡å‹åº”ç”¨åœºæ™¯çš„äººä¸ºåŒºåˆ†ï¼Œä½†æ˜¯æœ¬äººè¿˜æ˜¯å¸Œæœ›å¯ä»¥å­¦ä¹ ä¸€äº›è®¡ç®—æœºã€æ•°å­¦ã€ç¼–ç¨‹ç­‰æ¯”è¾ƒæœ‰è¶£çš„çŸ¥è¯†æ¥æ­¦è£…è‡ªå·±ï¼Œå¹¶åœ¨æ¥è§¦æ–°é²œäº‹ç‰©ä¸­ä¿æŒç€è‡ªå·±çš„å‰è¿›çš„åŠ¨åŠ›ã€‚</p><p>æ­£å¦‚Jobsæ‰€è¿°ï¼šstay hungryï¼Œstay foolishï¼</p><h2 id="0x03-å…³äºè‡ªå·±çš„blog"><a class="markdownIt-Anchor" href="#0x03-å…³äºè‡ªå·±çš„blog"></a> 0x03 å…³äºè‡ªå·±çš„blog</h2><p>å¯¹äºä¸€ä¸ªç³»ç»Ÿçš„è®¾è®¡è‡ªç„¶è¦ä»éœ€æ±‚çš„è§’åº¦å‡ºå‘ï¼Œè‡ªå·±çš„blogä½“ç³»ä¹Ÿä¸æ„å¤–ï¼Œå› æ­¤å»ºç«‹è‡ªå·±åšå®¢çš„ç›®çš„æ˜¯æˆ‘å¸Œæœ›å°†è‡ªå·±çš„å­¦ä¹ çŸ¥è¯†ç”¨æ¯”è¾ƒä¸ªæ€§åŒ–çš„è¯­è¨€æ€»ç»“å‡ºæ¥å‘å¸ƒåˆ°ç½‘ä¸Š</p><ul><li>è®°å½•ï¼šå¹¶æ€»ç»“è‡ªå·±çš„æ‰€å­¦ï¼Œå¯èƒ½ä¼šèµ°å¼¯è·¯ï¼Œä½†æ˜¯è¦å°è¯•å»åš</li><li>ç£ä¿ƒï¼šè‡ªå·±å­¦ä¹ ï¼ŒåŒæ ·æ˜¯ä¸ºäº†è‡ªå·±åç»­çš„è¿›æ­¥</li></ul><p>å› æ­¤å¸Œæœ›ä»å¤§å››å¼€å§‹ï¼Œä»ä»Šå¤©å¼€å§‹ï¼Œè‡³å°‘ä¿è¯ä¸€ä¸ªæœˆä¸€ç¯‡ï¼Œæ­£å¸¸å°½å¯èƒ½çš„ä¿æŒä¸€ä¸ªæ˜ŸæœŸä¸€ç¯‡æ¥è®¤çœŸå†™å‡ºä¸€ä»½æ–‡ç« ã€‚</p><p>åŒæ—¶postçš„åˆ†ç±»å¯èƒ½ä¼šæœ‰ï¼š</p><ul><li>baseï¼Œæ¯”å¦‚Linuxçš„ç®€å•ä½¿ç”¨ã€pythonç¯å¢ƒçš„é…ç½®ç­‰</li><li>livesï¼Œè‡ªå·±æ‚è°ˆçš„æ‰€æ€æ‰€æƒ³</li><li>CSï¼Œæ¯”å¦‚webå¼€å‘ã€æ•°æ®ç»“æ„ä¹‹ç±»çš„çŸ¥è¯†</li><li>DSï¼Œæ¯”å¦‚ä¸€äº›æ•°æ®çš„ç¬”è®°ã€ç®—æ³•çš„æ¨å¯¼</li></ul><h2 id="0x04-æ­å»ºè¿‡ç¨‹"><a class="markdownIt-Anchor" href="#0x04-æ­å»ºè¿‡ç¨‹"></a> 0x04 æ­å»ºè¿‡ç¨‹</h2><p>åˆ©ç”¨<a href="https://zhuanlan.zhihu.com/p/35668237">GitHub pages+ Hexo</a>ï¼Œé€‰å–ä¸€ä¸ªå¥½çœ‹çš„ä¸»é¢˜</p><p>ä¹‹åè´­ä¹°åŸŸåæ¥è§£æåˆ°å¯¹åº”ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦åœ¨GitHubä¸­é…ç½®</p><p>åˆ©ç”¨typoraç®¡ç†postæ–‡ä»¶å¤¹ã€åˆ©ç”¨giteeæ¥ç®¡ç†å›¾åºŠ</p><p>ä¸€äº›å¸¸è§çš„å‘½ä»¤ï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs verilog">hexo clean ç”¨äºæ¸…é™¤æ··å­˜ä¸é™æ€æ–‡ä»¶<br>hexo <span class="hljs-keyword">new</span> post [æ–‡ç« æ ‡é¢˜] å¯ä»¥æ–°å»ºæ–‡ç« <br>hexo <span class="hljs-keyword">generate</span> ç”¨äºç”Ÿæˆé™æ€æ–‡ä»¶<br>hexo deploy ç”¨äºéƒ¨ç½²ç½‘ç«™<br></code></pre></td></tr></table></figure><p>åœ¨ç¼–å†™æ–‡ç« çš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ª</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">ä½¿ç”¨coverï¼š[å›¾ç‰‡url]æ¥ä¸ºæ·»åŠ å°é¢<br><span class="hljs-comment">&lt;!--more--&gt;</span><br>ä¹‹å‰çš„æ˜¯æ‘˜è¦çš„éƒ¨åˆ†<br><br></code></pre></td></tr></table></figure><p>ç¥çœ‹åˆ°çš„äººç”Ÿæ´»å­¦ä¹ æ„‰å¿«ï¼</p>]]></content>
    
    
    
    <tags>
      
      <tag>study</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•è®¾è®¡</title>
    <link href="/posts/95085cd8.html"/>
    <url>/posts/95085cd8.html</url>
    
    <content type="html"><![CDATA[<h3 id="divide-and-conquer"><a class="markdownIt-Anchor" href="#divide-and-conquer"></a> divide and conquer</h3><blockquote><p>In section 2.3.1 we can saw how merge sort serves as an example of the divide-and conquer paradigm.  Recalling that in divide-and-conquer, we solve a problem recursively, applying three step at each level of the recursion:</p></blockquote><span id="more"></span><ul><li><strong>Divide</strong> the problem into a number of subproblems that are smaller instances of the same problem</li><li><strong>Conquer</strong> the subproblems by solving them recurisvely. If the problem sizes are small enough, however,just solve the subproblems in a straightforward manner.</li><li><strong>Combine</strong> the solutions to the subpoblems into the solution for the original problem</li></ul><p>(1)å¯¹äºä¸€ä¸ªè§„æ¨¡ä¸ºN çš„é—®é¢˜ï¼Œè‹¥è¯¥é—®é¢˜å¯ä»¥å®¹æ˜“åœ°è§£å†³ï¼Œåˆ™ç›´æ¥è§£å†³,å¦åˆ™æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ã€‚<br />(2)å°†è¯¥é—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°çš„å­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜äº’ç›¸ç‹¬ç«‹ï¼Œå¹¶ä¸”åŸé—®é¢˜å½¢å¼ç›¸åŒã€‚<br />(3)é€’å½’recursivelyåœ°è§£å­é—®é¢˜ã€‚<br />(4)ç„¶åï¼Œå°†å„å­é—®é¢˜çš„è§£åˆå¹¶å¾—åˆ°åŸé—®é¢˜çš„è§£</p><hr /><p>exampleï¼š <a href="https://github.com/chenxia31/Train-of-introduction-to-algorithm-">merge sort</a></p><ol><li>å¯¹äºä¸€ä¸ªé•¿æ•°ç»„çš„æ’åºé—®é¢˜ï¼Œå…¶æ’åºå¯ä»¥åˆ†ä¸ºå·¦åŠè¾¹ã€å³åŠè¾¹çš„æ’åºæ‰‹æ®µ</li><li>è¿™æ ·ç‹¬ç«‹åˆ†é…çš„å­ä»»åŠ¡æœ€ç»ˆæ’åºä¸ºå¯ä»¥åˆ†ä¸ºæœ€å°çš„ä¸¤ä¸ªå…ƒç´ </li><li>æ’åºä¹‹åå†åˆå¹¶</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> floor<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge_sort</span>(<span class="hljs-params">A, p, r</span>):<br>    <span class="hljs-keyword">if</span> p &lt; r:<br>        q = floor((p + r) / <span class="hljs-number">2</span>)<br>        merge_sort(A, p, q)<br>        merge_sort(A, q + <span class="hljs-number">1</span>, r)<br>        merge(A, p, q, r)<br>    <span class="hljs-keyword">return</span> A<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">merge</span>(<span class="hljs-params">A, p, q, r</span>):<br>    n1 = q - p + <span class="hljs-number">1</span><br>    n2 = r - q<br>    L = []<br>    R = []<br>    ceiling = <span class="hljs-number">10000</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, n1):<br>        L.append(A[p + i - <span class="hljs-number">1</span>])<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, n2):<br>        R.append(A[q + j])<br>    L.append(ceiling)<br>    R.append(ceiling)<br>    i = <span class="hljs-number">0</span><br>    j = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(p - <span class="hljs-number">1</span>, r):<br>        <span class="hljs-keyword">if</span> L[i] &lt;= R[j]:<br>            A[k] = L[i]<br>            i = i + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            A[k] = R[j]<br>            j = j + <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> A<br><br><br><span class="hljs-built_in">print</span>(merge_sort([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>], <span class="hljs-number">1</span>, <span class="hljs-number">6</span>))<br></code></pre></td></tr></table></figure><h2 id="dymanic-programming"><a class="markdownIt-Anchor" href="#dymanic-programming"></a> Dymanic programming</h2><blockquote><p>dynamic programming, like the divide-and-conquer method ï¼Œsolves problems by combineing the solutions to subproblems.(â€œprogramming in this context refers to a tabular method,not ato wirting computer codeâ€). As we saw in cahpter 2 and 4, divide -and -conquer algorithm partition the problem into disjoint subproblems, solve the subproblems recursively, and then combine their solutions to solve the orignal problem. In contrast, ddynamic programming applies when the subproblems overlapâ€”that is, when subproblems share subsubproblems. In this context, a divide-and-conquer algotirhm does more work than necessary , reaped solving the common subsubproblems.</p></blockquote><p>A dynamic-programming algorithm solves each subsubproblems juest once and then saves its answei in the table, thereby avoiding the work of recomputing the answer every time it solves each subsubproblem.</p><p>We typically apply dynamic programming to optimization problems. Such problems can have many possible solutions. Each solution has a value, and we wish to find a solution with optimal value.</p><ul><li><strong>characterize</strong>the structure of an optimal solution</li><li><strong>Recursively</strong> defin ethe value of an opitmal solution</li><li><strong>Compute</strong> the value of an optimal solution, typically in a bottom-up fashion.</li><li><strong>Construst</strong> an optimal solution from computed information</li></ul><ol><li>ç¡®å®šdynamic programmingçš„æ•°ç»„ä»¥åŠå…·ä½“çš„ä¸‹æ ‡å®šä¹‰</li><li>ç¡®å®šé€’æ¨å…¬å¼</li><li>dynamic programmingæ•°ç»„çš„åˆå§‹åŒ–</li><li>å…·ä½“ä¸¾ä¾‹æ¥ä½¿å¾—è®¡ç®—è¿›è¡Œä¸‹å»</li></ol><hr /><p>Example: ä¸‰è§’å½¢æœ€å°å’Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">triangle=[[<span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>], [<span class="hljs-number">6</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">3</span>]]<br>DP=[]<br>DP.append(triangle[<span class="hljs-number">0</span>])<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(triangle)&gt;=<span class="hljs-number">1</span>:<br>    <span class="hljs-keyword">for</span> story <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(triangle)):<br>        temp=[]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(triangle[story])):<br>            <span class="hljs-keyword">if</span> i==<span class="hljs-number">0</span>:<br>                temp.append(DP[story-<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + triangle[story][<span class="hljs-number">0</span>])<br>            <span class="hljs-keyword">elif</span> i==(<span class="hljs-built_in">len</span>(triangle[story]) - <span class="hljs-number">1</span>):<br>                temp.append(DP[story-<span class="hljs-number">1</span>][i-<span class="hljs-number">1</span>] + triangle[story][i])<br>            <span class="hljs-keyword">else</span>:<br>                temp.append(<span class="hljs-built_in">min</span>(triangle[story][i] + DP[story - <span class="hljs-number">1</span>][i - <span class="hljs-number">1</span>], triangle[story][i] + DP[story - <span class="hljs-number">1</span>][i]))<br>        DP.append(temp)<br><span class="hljs-built_in">min</span>(DP[-<span class="hljs-number">1</span>])<br></code></pre></td></tr></table></figure><h3 id="greedy-programming"><a class="markdownIt-Anchor" href="#greedy-programming"></a> <strong>Greedy programming</strong></h3><p>â€“remain to studyingâ€“</p><h3 id="back-tracking"><a class="markdownIt-Anchor" href="#back-tracking"></a> back tracking</h3><p>â€“remain to studyingâ€“</p><h3 id="branch-and-bound"><a class="markdownIt-Anchor" href="#branch-and-bound"></a> branch and bound</h3><p>â€“remain to studyingâ€“</p>]]></content>
    
    
    
    <tags>
      
      <tag>study</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ”¿æ²»å¤ä¹ ç»¼è¿°</title>
    <link href="/posts/25d10cdc.html"/>
    <url>/posts/25d10cdc.html</url>
    
    <content type="html"><![CDATA[<h2 id="abstract"><a class="markdownIt-Anchor" href="#abstract"></a> abstract</h2><p>é¦–å…ˆäº†è§£è€ƒç ”æ”¿æ²»ç›¸å…³åŸºæœ¬ä¿¡æ¯ï¼Œå¹¶ä»è€ƒç ”æœºæ„ã€ä¸ªäººæœºæ„ç»éªŒã€ä¸ªäººçº¯ç²¹ç»éªŒä¸‰ä¸ªéƒ¨åˆ†å¯¹è€ƒç ”æ”¿æ²»æ€»ç»“ï¼Œå¾—åˆ°è€ƒç ”æ”¿æ²»å¤ä¹ çš„æ—¶é—´è§„åˆ’å’Œèµ„æ–™æ¨èã€‚</p><span id="more"></span><h2 id="introduction"><a class="markdownIt-Anchor" href="#introduction"></a> introduction</h2><h3 id="11-è€ƒç ”åŸºæœ¬èƒŒæ™¯background"><a class="markdownIt-Anchor" href="#11-è€ƒç ”åŸºæœ¬èƒŒæ™¯background"></a> 1.1 è€ƒç ”åŸºæœ¬èƒŒæ™¯background</h3><p><a href="https://pan.baidu.com/s/1fmE1wsLianrP9Cfwc_ocnQ">è€ƒç ”æ”¿æ²»çœŸé¢˜1994-2021å¹´PDFç”µå­ç‰ˆï¼ˆå«æœ‰è¯¦ç»†è§£æ+wordç‰ˆï¼‰</a><br />æå–ç ï¼šix4a<br />è€ƒç ”éœ€è¦æ˜ç™½çš„ç›¸å…³ç½‘ç«™æœ‰ï¼š</p><ul><li><a href="https://yz.chsi.com.cn">ä¸­å›½ç ”ç©¶ç”Ÿæ‹›ç”Ÿä¿¡æ¯ç½‘</a>ï¼Œä¿—ç§°ç ”æ‹›ç½‘ï¼Œæ˜¯æ•™è‚²éƒ¨ä»¥è€ƒç ”ä¸ºä¸»é¢˜çš„å®˜æ–¹ç½‘ç«™ï¼Œæ˜¯<strong>æ•™è‚²éƒ¨å”¯ä¸€æŒ‡å®šçš„ç ”ç©¶ç”Ÿæ‹›ç”Ÿè€ƒè¯•ç½‘ä¸ŠæŠ¥åä»¥åŠè°ƒå‰‚ç½‘ç«™</strong>ï¼ŒæŒ‰é“ç†åœ¨è¯¥ç½‘ç«™ä¼šå…¬å¸ƒåŸºç¡€ç§‘ç›®æ”¿æ²»ã€è‹±è¯­ã€æ•°å­¦çš„<a href="http://hb.offcn.com/html/2020/09/177396.html">è€ƒè¯•å¤§çº²è¯´æ˜</a>ï¼ˆæœ¨æœ‰æ‰¾åˆ°ï¼‰</li><li><a href="http://www.moe.gov.cn">æ•™è‚²éƒ¨å®˜ç½‘</a>ï¼ŒåŸºæœ¬æ‰€æœ‰çš„æƒå¨ä¿¡æ¯ä¸»è¦æ¥è‡ªäºæ•™è‚²éƒ¨å®˜ç½‘çš„ä¿¡æ¯å…¬å¼€éƒ¨åˆ†ï¼Œåœ¨2020-08-27æ—¥ï¼Œæ•™è‚²éƒ¨å¼•å‘äº†<a href="http://www.moe.gov.cn/srcsite/A15/moe_778/s3113/202009/t20200903_484958.html">2021å¹´å…¨å›½ç¡•å£«æ‹›ç”Ÿå·¥ä½œç®¡ç†è§„å®š</a>ï¼Œé‡ç‚¹åŒ…å«è€ƒéªŒä¸­å­¦ç”Ÿä¸ªäººçš„æŠ¥åã€å‡ºäº‹ã€å¤è¯•ä»¥åŠè°ƒå‰‚ç­‰ç›¸å…³è§„å®š</li><li>å„å­¦æ ¡çš„ç ”æ‹›ç½‘ï¼Œä¼šå‘å¸ƒæ‹›ç”Ÿç®€ç« å’Œä¸“ä¸šç›®å½•ï¼Œæœ‰çš„ä¼šé¢å¤–å‘å¸ƒè€ƒè¯•å¤§çº²ï¼Œ<a href="https://yjs.nuist.edu.cn">å—ä¿¡å¤§</a>ã€<a href="http://yjsy.xaut.edu.cn/zsgz/sszs.htm">è¥¿å®‰ç†å·¥</a>ç­‰</li></ul><p>è€ƒç ”åŸºæœ¬æµç¨‹ï¼š</p><ol><li>9æœˆï¼Œå›½å®¶é¢å¸ƒæ”¿æ²»ã€è‹±è¯­ã€æ•°å­¦çš„è€ƒè¯•å¤§çº²ï¼Œç¡®å®šåˆè¯•æ—¥æœŸ</li><li>8ï½9æœˆï¼Œæ‹›ç”Ÿå•ä½ï¼ˆé«˜æ ¡ï¼‰é¢å¸ƒæ‹›ç”Ÿç®€ç« å’Œä¸“ä¸šç›®å½•ï¼Œæœ‰çš„é¢å¤–é¢å¸ƒè€ƒè¯•å¤§çº²</li><li>10ï½11 å…¨å›½ç»Ÿä¸€ç½‘ä¸ŠæŠ¥åï¼Œç°åœºç¡®è®¤ï¼Œæ‰“å°è½¬è€ƒè¯</li><li>12æœˆï¼Œå…¨å›½ç»Ÿä¸€ç»„ç»‡è€ƒè¯•ï¼Œåˆè¯•å‡ä¸ºç¬”è¯•</li><li>æ¬¡å¹´3æœˆï¼Œæˆç»©å‘å¸ƒï¼Œåˆ†æ•°çº¿åˆ’å®šï¼Œå„æ‹›ç”Ÿå•ä½è¿›è¡Œå½•å–å·¥ä½œ</li><li>æ¬¡å¹´3ï½4æœˆï¼Œå¤è¯•ï¼Œå…·ä½“æ—¥æœŸç”±æ‹›ç”Ÿå•ä½ç¡®å®š</li><li>æ¬¡å¹´5ï½6æœˆï¼Œå„æ‹›ç”Ÿå•ä½ç¡®å®šæœ€ç»ˆå½•å–åå•ï¼Œå‘å¸ƒå½•å–åå•</li></ol><p>è€ƒç ”å¤§çº²çš„å‘å¸ƒæ—¥æœŸ</p><table><thead><tr><th>2021å¹´è€ƒè¯•å¤§çº²</th><th><strong>09.09</strong></th></tr></thead><tbody><tr><td><strong>2020è€ƒè¯•å¤§çº²</strong></td><td><strong>07.08</strong></td></tr><tr><td><strong>2019è€ƒè¯•å¤§çº²</strong></td><td><strong>09.15</strong></td></tr><tr><td><strong>2018è€ƒè¯•å¤§çº²</strong></td><td><strong>09.15</strong></td></tr></tbody></table><h3 id="1-2-æ”¿æ²»åˆ†æ"><a class="markdownIt-Anchor" href="#1-2-æ”¿æ²»åˆ†æ"></a> 1. 2 æ”¿æ²»åˆ†æ</h3><p>è€ƒç ”æ”¿æ²»çš„è€ƒè¯•ä¸»è¦åŒ…æ‹¬äº”ä¸ªç§‘ç›®ï¼š</p><ul><li>é©¬å…‹æ€ä¸»ä¹‰åŸºæœ¬åŸç†æ¦‚è®º 24%ï¼Œå››é“å•é€‰ï¼Œäº”é“å¤šé€‰ï¼Œä¸€é“åˆ†æ</li><li>æ¯›æ³½ä¸œæ€æƒ³å’Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰ç†è®ºä½“ç³»æ¦‚è®º30%ï¼Œå››é“å•é€‰ï¼Œèˆè¹ˆå¤šé€‰ï¼Œä¸€é“åˆ†æ</li><li>ä¸­å›½è¿‘ä»£å²çº²è¦14%ï¼Œä¸‰é“å•é€‰ï¼Œä¸‰é“å¤šé€‰ï¼Œä¸€é“åˆ†æ</li><li>æ€æƒ³é“å¾·ä¿®å…»ä¸æ³•å¾‹åŸºç¡€16%ï¼Œä¸¤é“å•é€‰ï¼Œä¸¤é“å¤šé€‰ï¼Œä¸€é“åˆ†æ</li><li>æ—¶äº‹æ”¿æ²»16%ï¼Œä¸¤é“å•é€‰ï¼Œä¸¤é“å¤šé€‰ï¼Œä¸€é“åˆ†æ</li></ul><p>å…¶ä¸­è€ƒè¯•çš„é‡ç‚¹ä¸»è¦æ˜¯é©¬åŸå’Œæ¯›æ¦‚</p><blockquote><p>é©¬åŸéœ€è¦å¼„æ¸…æ¥šåŒ…å«å‡ å¤§æ¨¡å—ï¼Œå¿ƒä¸­æœ‰ä¸ªçŸ¥è¯†æ¡†æ¶æ¢³ç†ç»“æ„ï¼ŒæŒæ¡å„ç§åŸºæœ¬åŸç†å¹¶äº†è§£å…·ä½“åŸç†çš„åŸºæœ¬å†…æ¶µ</p></blockquote><blockquote><p>æ¯›ä¸­ç‰¹çš„çŸ¥è¯†ç‚¹æ¯”è¾ƒåºæ‚ï¼Œå…¶å’Œè¿‘çº²æ—¶ç´§å¯†ç»“åˆçš„ï¼Œæ¯›ä¸­ç‰¹æ˜¯ä»¥å²çº²çš„èƒŒæ™¯çš„ç†è®ºæˆæœï¼Œé€šå¸¸éœ€è¦ç»“åˆå²çº²ä¸€èµ·å­¦ä¹ ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šç†æ¸…æ¥šæ¯›ä¸­ç‰¹çš„ çŸ¥è¯†æ¡†æ¶ï¼›åŒæ—¶è¿‘ä»£å²ä¹‹å¤–çš„æ—¶äº‹æ”¿æ²»ç›¸å½“äºæ˜¯å†å²è„‰ç»œçš„å»¶ä¼¸ï¼Œç»“åˆç”±æ­¤æ›´èƒ½å¯¹ç›¸å…³çŸ¥è¯†ç‚¹è¿›è¡Œä¸­æŒæ¡</p></blockquote><p>æ¯å¹´çš„è€ƒè¯•å¤§çº²æ˜¯å¯¹æ•™æé‡è¦è€ƒç‚¹çš„æ€»ç»“ï¼Œå¤§çº²æ¯å¹´éƒ½å‡ºæ–°ï¼Œä½†æ˜¯åŸºæœ¬è€ƒç‚¹æ¯å¹´å·®ä¸å¤šï¼Œå› æ­¤å¯ä»¥ä»å¾€å¹´çš„è€ƒè¯•å¤§çº²æ¥æ‹æ¸…æ¥šçŸ¥è¯†æ¡†æ¶ï¼Œç­‰æ–°å¤§çº²å‡ºæ¥ä¹‹åå†ä½œä¸ºå¼ºåŒ–é˜¶æ®µçš„å‚è€ƒèµ„æ–™</p><p>è¯•å·ç»“æ„ä¸»è¦åŒ…æ‹¬16å•é€‰ï¼ˆ16åˆ†ï¼‰ã€17å¤šé€‰ï¼ˆ34åˆ†ï¼‰ã€äº”é“åˆ†æé¢˜ï¼ˆ50åˆ†ï¼‰ï¼Œæ¯å¹´å¹³å‡åˆ†ä¸€èˆ¬åœ¨55ï½60åˆ†ï¼Œè€ƒä¸Š70ä»¥åŠæ›´é«˜æœ€ä½³</p><h2 id="method"><a class="markdownIt-Anchor" href="#method"></a> method</h2><h3 id="21-è€ƒç ”ç½‘ç«™è´´01æœºæ„ç±»å‹"><a class="markdownIt-Anchor" href="#21-è€ƒç ”ç½‘ç«™è´´01æœºæ„ç±»å‹"></a> 2.1 <a href="https://www.kyzs.com/zt/process.html">è€ƒç ”ç½‘ç«™è´´01</a>ï¼ˆæœºæ„ç±»å‹ï¼‰</h3><p>æ”¿æ²»è€ƒç ”åˆ†ä¸ºï¼š</p><ol><li><p>6æœˆä»½ä¹‹å‰çš„åŸºç¡€é˜¶æ®µ</p><blockquote><p>ç¿»é˜…çŸ¥è¯†ç‚¹ï¼Œçœ‹æ–°é—»è”æ’­å’Œç›¸å…³å½±è§†ï¼Œå¯¹å„ç§‘å†…å®¹ç•™ä¸‹æ•´ä½“å°è±¡ï¼Œä¸ºæš‘æœŸå¬è¯¾æ‰“ä¸‹åŸºç¡€</p></blockquote></li><li><p>7ï½8æœˆä»½çš„å¼ºåŒ–é˜¶æ®µ</p><blockquote><p>åˆ©ç”¨æš‘æœŸæ—¶é—´å¬ç½‘è¯¾æ¥äº†è§£å„ä¸ªç« èŠ‚çš„é‡ç‚¹å’Œéš¾ç‚¹ï¼Œæ˜ç™½åŸºæœ¬åŸç†å’ŒåŸºæœ¬æ¦‚å¿µï¼Œç”±æ­¤åŸºç¡€ä¸Šé”»ç‚¼è‡ªå·±åˆ†æé—®é¢˜çš„èƒ½åŠ›ã€‚å¯¹ç…§è®²ä¹‰è§£å†³é‡éš¾ç‚¹é—®é¢˜</p></blockquote></li><li><p>9ï½10æœˆä»½çš„æé«˜é˜¶æ®µ</p><blockquote><p>åšä¹ é¢˜å’ŒçœŸé¢˜æ¥æŸ¥ç¼ºè¡¥ç½—</p></blockquote></li><li><p>11ï½12æœˆä»½å†²åˆºé˜¶æ®µ</p><blockquote><p>å¤ä¹ é”™é¢˜é›†ï¼Œå¼ºåŒ–è®­ç»ƒï¼Œå¤šèƒŒ</p></blockquote></li></ol><h3 id="22-æ­»è®°ç¡¬èƒŒåˆ†æä¸ªäººåæœºæ„"><a class="markdownIt-Anchor" href="#22-æ­»è®°ç¡¬èƒŒåˆ†æä¸ªäººåæœºæ„"></a> 2.2 <a href="https://www.zhihu.com/question/19773464/answer/519155464">æ­»è®°ç¡¬èƒŒåˆ†æ</a>ï¼ˆä¸ªäººåæœºæ„ï¼‰</h3><ol><li><p>7ï½9æœˆä»½åŸºç¡€é˜¶æ®µ</p><blockquote><p>æ¨èå¤ä¹ çš„é¡ºåºæ˜¯é©¬åŸâ€“è¿‘ä»£å²â€“æ¯›ä¸­ç‰¹â€“æ€ä¿®â€“æ—¶æ”¿</p><p>è¿™ä¸ªé˜¶æ®µçš„ä¸»è¦ä»»åŠ¡æ˜¯å°†çŸ¥è¯†ç‚¹å®Œæ•´çš„è¿‡ä¸€éï¼Œæ•´ç†ç¬”è®°å’Œæ¢³ç†æ¡†æ¶ï¼Œ<strong>é©¬åŸ</strong>éƒ¨åˆ†ç”±äºæ™¦æ¶©éš¾æ‡‚ï¼Œå»ºè®®ç»“åˆç½‘è¯¾å­¦ä¹ ï¼Œå…¶ä»–éƒ¨åˆ†å¯ä»¥<strong>å¬ç½‘è¯¾æˆ–è€…è‡ªå·±çœ‹æ•™æ</strong></p><p>è¿™ä¸ªé˜¶æ®µåˆ·é¢˜æœ€å¥½ç­‰ä¸€æœ¬ä¹¦çŸ¥è¯†ç‚¹è¿‡å®Œå†å¤ä¹ ï¼Œä¸è¦ä¸€èŠ‚ä¸€èŠ‚åšé¢˜èµ·ä¸åˆ°ä½œç”¨ï¼Œåˆ·é¢˜ä¸»è¦åˆ·é€‰æ‹©é¢˜</p></blockquote></li><li><p>10ï½11æœˆä»½å¼ºåŒ–é˜¶æ®µ</p><blockquote><p>ç»“åˆè€å¸ˆå¤§çº²æ¥æ€»ç»“å‡ºçŸ¥è¯†ç‚¹ä¸­çš„é‡ç‚¹é«˜é¢‘ç†¬ç‚¹ï¼Œè¿›è¡Œé€‰æ‹©é¢˜çŸ¥è¯†ç‚¹çš„èƒŒè¯µï¼Œå¯ä»¥æœ‰é‡å¿ƒçš„å­¦ä¹ </p></blockquote></li><li><p>11ï½12æœˆä»½å†²åˆºé˜¶æ®µ</p><blockquote><p>ç»“åˆæ¨¡æ‹Ÿå·ä»¥åŠæ—¶äº‹æ”¿æ²»æ¥è¿›è¡Œå†²åˆºå¤ä¹ ï¼Œç”¨å¥½æ¨¡æ‹Ÿå·ï¼Œä¸»è¦è´Ÿè´£èƒŒè¯µåˆ†æé¢˜</p></blockquote></li></ol><h3 id="23-å•çº¯ä¸ªäººç»éªŒ"><a class="markdownIt-Anchor" href="#23-å•çº¯ä¸ªäººç»éªŒ"></a> 2.3 <a href="https://www.zhihu.com/question/19773464/answer/421350437">å•çº¯ä¸ªäººç»éªŒ</a></h3><p>å…«æœˆä»½å¼€å§‹å¤ä¹ æ”¿æ²»ï¼Œå‰æœŸå°†ä¹¦æœ¬é‡è¦çŸ¥è¯†ç‚¹ç”»åˆ°ankiä¸­è¿›è¡ŒèƒŒè¯µï¼ŒåŒæ—¶ç»“åˆ<strong>ç²¾è®²ç²¾ç‚¼</strong>åŸºæœ¬æ€æƒ³æ˜¯å‰æœŸåˆ·é€‰æ‹©é¢˜ï¼ŒåæœŸåˆ©ç”¨è‚–8âƒ£ï¸è‚–4âƒ£ï¸æ¥å¤ä¹ å¤§é¢˜ï¼Œåä¸€æœˆåº•çš„è‚–æŸçš„æ—¶äº‹ä¸æ”¿ç­–ä»¥åŠå½“ä»£ä¸–ç•Œç»æµä¸æ”¿æ²»ã€‚</p><ul><li>å®‰å“è½¯ä»¶åˆ©ç”¨å®‰è£…åŒ….apk</li><li>iPad osç«¯ä¸Šæ·˜å®æ‰¾å•†å®¶è´­ä¹°è´¦å·ä¸‹è½½anki</li><li>æ”¿æ²»çŸ¥è¯†ç‚¹ankiå¡ç‰‡</li></ul><p>åˆ·é¢˜çš„ç›®çš„ï¼š</p><ul><li>é€‰æ‹©é¢˜ï¼Œä¸€éƒ¨åˆ†æ˜¯ä¸ºäº†å·©å›ºçŸ¥è¯†ç‚¹ï¼Œäº†è§£ç›¸å…³çš„é‡ç‚¹çŸ¥è¯†ï¼Œå¦ä¸€æ–¹é¢æ˜¯äº†è§£é€‰æ‹©é¢˜ä¸­ç›¸å…³é™·é˜±çš„æ‰€åœ¨</li><li>åä¸€æœˆå¤§é¢˜ï¼ŒåŒæ ·åœ¨åæœŸæ˜¯ä¸ºäº†æ’çœŸé¢˜ï¼Œå¦å¤–ä¸€æ–¹é¢æ˜¯å­¦ä¹ ç­”æ¡ˆæ‰€ç»™å‡ºçš„æœ‰æ¡ç†çš„åˆ†ææ­¥éª¤ï¼Œè¿™æ ·æ‰èƒ½æ— æ‹›èƒœæœ‰æ‹›</li><li>åæœˆä¸­æ—¬å¼€å§‹çœŸé¢˜ï¼Œå¾€å¹´çš„è§„å¾‹è¦å¥½å¥½ç ”ç©¶ï¼Œå»ºç«‹åˆ·å¾ˆå¤šæ¬¡ï¼Œè‡ªå·±æ¥ç†è§£å…¶ä¸­çš„çœŸé¢˜çš„é‡ç‚¹å’Œéš¾ç‚¹æ‰€åœ¨</li><li>åä¸€æœˆä»½çš„æ”¿æ²»</li></ul><h3 id="24-æ”¿æ²»å„ç§èµ„æ–™çš„å‡†å¤‡"><a class="markdownIt-Anchor" href="#24-æ”¿æ²»å„ç§èµ„æ–™çš„å‡†å¤‡"></a> 2.4 æ”¿æ²»å„ç§èµ„æ–™çš„å‡†å¤‡</h3><p>éœ€è¦çš„èµ„æ–™æœ‰ï¼šç½‘è¯¾ã€è€ƒç‚¹ç²¾è®²ã€çœŸé¢˜ä»¥åŠæ¨¡æ‹Ÿé¢˜ã€èƒŒè¯µç¬”è®°ã€é¢„æµ‹å·</p><ul><li>ç½‘è¯¾ï¼šå¸¸è§çš„æ¨èå¾æ¶›çš„ç½‘è¯¾ï¼Œç”ŸåŠ¨æœ‰è¶£ï¼ˆä»çŸ¥è¯†ç‚¹å‡ºå‘å†™é¢˜ç›®ï¼‰ï¼›è…¿å§çš„ç½‘è¯¾çŸ¥è¯†ç‚¹å¤šä½†ä¸ç”ŸåŠ¨</li><li>è€ƒç‚¹ç²¾è®²ï¼šå…¶å®è€ƒç‚¹ç²¾è®²å’Œç½‘è¯¾ä¹‹å‰æœ‰æ‰€æƒè¡¡ï¼Œæ¨èè‚–çš„ã€ŠçŸ¥è¯†ç‚¹ç²¾è®²ç²¾ç»ƒã€‹</li><li>æ¨¡æ‹Ÿé¢˜ï¼šé¦–å…ˆæ¨èè‚–ç§€è£çš„1000é¢˜ï¼Œç”¨æ¥è¿‡åŸºç¡€çŸ¥è¯†å’Œäº†è§£åˆ·é¢˜å¥—è·¯</li><li>èƒŒè¯µç¬”è®°ï¼šæ¨èå¾æ¶›çš„æ”¿æ²»èƒŒè¯µç¬”è®°å’Œè‚–çš„çŸ¥è¯†ç‚¹æè¦</li><li>é¢„æµ‹å·ï¼šè‚–å…«è‚–å››ï¼ˆæŠ¼é¢˜ä¸­æ¦‚ç‡æ¯”è¾ƒå¤§ï¼Œå“²å­¦é¢˜å¾ˆéš¾ï¼‰ï¼Œå¿…å¤‡</li><li>åˆ·é¢˜å°ç¨‹åºï¼š1000é¢˜çš„2022å¹´çš„å°ç¨‹åºåˆ·é¢˜</li></ul><h2 id="discussion"><a class="markdownIt-Anchor" href="#discussion"></a> discussion</h2><p>ä½œä¸ºåº”è¯•è€ƒè¯•çš„ä¸€éƒ¨åˆ†ï¼Œè€ƒç ”æ”¿æ²»å‡†ç¡®çš„æ ¸å¿ƒä¸»è¦ç”± <strong>è‡ªèº«å†…åœ¨çŸ¥è¯†ç‚¹æŒæ¡+åº”è¯•æŠ€å·§</strong> ä¸¤éƒ¨åˆ†ç»„æˆ</p><h4 id="31-å†…åœ¨çŸ¥è¯†ç‚¹æŒæ¡"><a class="markdownIt-Anchor" href="#31-å†…åœ¨çŸ¥è¯†ç‚¹æŒæ¡"></a> 3.1 å†…åœ¨çŸ¥è¯†ç‚¹æŒæ¡</h4><p>é¦–å…ˆï¼Œä»å¾€å¹´çš„è€ƒè¯•å¤§çº²ä»¥åŠä¹æœˆä»½çš„è€ƒè¯•å¤§çº²ä¸­ï¼Œäº†è§£æ•™è‚²éƒ¨è§„å®šçš„è€ƒç ”é‡ç‚¹å’Œéš¾ç‚¹ï¼Œå› ä¸ºæ— è®ºæ˜¯è¾…å¯¼æœºæ„ã€ç½‘è¯¾æ•™å¸ˆã€ä¸ªäººå‡†å¤‡çš„æ‰€æœ‰<strong>æ ¹æœ¬</strong>éƒ½æ˜¯æ¥è‡ªäºæ­¤</p><p>ä¹‹åï¼Œæ˜ç™½äº†è€ƒä»€ä¹ˆï¼Œå°±éœ€è¦å¦‚ä½•å»èƒŒå®ƒï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°è¯¸å¤šçš„è¾…åŠ©æ‰‹æ®µï¼Œ<strong>æ•™æ+ç½‘è¯¾+ç½‘è¯¾å»¶ä¼¸æ•™æ+åˆ·é¢˜+å°ç¨‹åº</strong>ç­‰ç­‰</p><blockquote><p>å››æœ¬æ•™æå…¨éƒ¨èƒŒè¯µä¸‹æ¥å½“ç„¶æ˜¯æœ€å¥½ï¼Œä½†æ˜¯<strong>ä¸ç°å®</strong>ï¼Œå› æ­¤å¯ä»¥è®²å››æœ¬æ•™æè‡ªèº«çš„è„‰ç»œæ¢³ç†æ¸…æ¥šï¼Œæ¯ä¸€ç« èŠ‚çš„ä¸»è¦çŸ¥è¯†ç‚¹åè¯è®°ä½ï¼Œæœ‰ä¸ªæ€»ä½“çš„å°è±¡</p><p>ä¹‹åä¾¿æ˜¯å…·ä½“çŸ¥è¯†ç‚¹çš„<strong>äº†è§£</strong>éƒ¨åˆ†ï¼Œæ‰‹æ®µ1 æ˜¯åˆ©ç”¨ç½‘è¯¾é€šè¿‡learningçš„æ–¹å¼ï¼Œæ‰‹æ®µ2 æ˜¯çœ‹è€ƒç‚¹ç²¾é€‰é›†å¦‚è‚–ç§€è£çš„ã€ŠçŸ¥è¯†ç‚¹ç²¾è®²ç²¾ç‚¼ã€‹ æ‰‹æ®µ3 é€šè¿‡åˆ·1000é¢˜èƒŒè¯µç­”æ¡ˆçš„æ–¹å¼ æ‰‹æ®µ4 è‡ªå·±åˆ¶ä½œæ€ç»´å¯¼å›¾ï¼ˆå›°éš¾ï¼‰</p><p>åœ¨ç„¶åä¾¿æ˜¯çŸ¥è¯†ç‚¹çš„èƒŒè¯µéƒ¨åˆ† ï¼ŒèƒŒè¯µçŸ¥è¯†ç‚¹ï¼Œç»“åˆ1000é¢˜èƒŒè¯µé‡ç‚¹ï¼Œåœ¨ç»“åˆé”™é¢˜èƒŒè¯µé‡ç‚¹å’Œéš¾ç‚¹</p></blockquote><h4 id="32-åº”è¯•æŠ€å·§"><a class="markdownIt-Anchor" href="#32-åº”è¯•æŠ€å·§"></a> 3.2 åº”è¯•æŠ€å·§</h4><p>æŒæ¡çŸ¥è¯†å¹¶ä¸æ˜¯ç›®çš„ï¼Œç›®çš„æ˜¯æ›´å¥½çš„åœ¨è€ƒåœºä¸­å‘æŒ¥å‡ºæ¥ï¼Œåº”è¯•æŠ€å·§ä¸»è¦åŒ…æ‹¬é€‰æ‹©é¢˜å’Œå¤§é¢˜ï¼Œæœ‰ä¸ªæ€æƒ³æ˜¯å‰æœŸçš„å¤§é¢˜å‡†å¤‡ä½œä¸šå¾ˆå°‘ï¼Œå…ˆå‡†å¤‡é€‰æ‹©é¢˜ï¼Œä¹‹ååˆ©ç”¨è‚–å…«è‚–å››ç­‰å†²åˆºæ—¶é—´æ¥èƒŒè¯µå¤§é¢˜å¹¶æ¢³ç†ç»“æ„</p><blockquote><p>é€‰æ‹©é¢˜ï¼Œåˆ·1000é¢˜ï¼Œäº†è§£é™·é˜±ï¼Œåˆ©ç”¨1000é¢˜å°ç¨‹åºçš„æ–¹å¼æ¥èƒŒè¯µå’Œé”™é¢˜ç­”æ¡ˆ</p><p>å¤§é¢˜ï¼šè‚–å…«è‚–å››ï¼ŒèƒŒè¯µç­”æ¡ˆï¼Œäº†è§£ç­”é¢˜è„‰ç»œ</p><p>çœŸé¢˜ï¼šä½¿åŠ²åˆ·ï¼Œè‡ªå·±æ‰¾åˆ°å…¶ä¸­çš„è§„å¾‹æ‰€åœ¨</p></blockquote><h2 id="conclusion"><a class="markdownIt-Anchor" href="#conclusion"></a> conclusion</h2><ul><li>é¦–å…ˆå¯ä»¥ä¸€æœ¬ä¹¦ä¸€æœ¬ä¹¦çš„äº†è§£ç›¸å…³çŸ¥è¯†ç‚¹å’Œè€ƒçº²ä¸­çš„é‡ç‚¹ï¼Œé¡ºåº<strong>é©¬åŸâ€“è¿‘çº²â€“æ¯›æ¦‚â€“æ€ä¿®</strong>ï¼Œå…ˆè‡ªå·±å¯¹ç€ä¹¦æœ¬ç›®å½•æ¢³ç†è¯¾æœ¬çš„çŸ¥è¯†ç»“æ„ï¼Œä¸€èˆ¬<strong>å°äº</strong>ä¸¤å¼ A4çº¸è¶³å¤Ÿï¼Œä¹‹åè·Ÿç€ã€Œ <strong>å¾æ¶›</strong>çš„<strong>è§†é¢‘è¯¾</strong>äº†è§£è¾ƒä¸ºå›°éš¾çš„çŸ¥è¯†ç‚¹ or è‡ªå·±çœ‹è‚–ç§€è£çš„çŸ¥è¯†ç‚¹ç²¾è®²ç²¾ç»ƒã€ æ¥æ˜ç™½çŸ¥è¯†ç‚¹çš„è„‰ç»œï¼Œæ¯å¤ä¹ å®Œä¸€æœ¬ä¹¦ä¹‹åå¼€å§‹åˆ·1000é¢˜ä¸­å¯¹åº”çš„éƒ¨åˆ†ï¼Œæ³¨æ„èƒŒè¯µï¼ˆå¤§æ¦‚ä¸€ç›´åˆ°ä¹æœˆä¸­æ—¬è¿™æ ·ï¼‰</li><li>çº¯åˆ·é¢˜ï¼Œ1000é¢˜çš„é”™é¢˜éš¾é¢˜ï¼Œä»¥åŠå¤šåˆ·è¿‡å»äº”å¹´çš„çœŸé¢˜ï¼Œæ¥äº†è§£é€‰æ‹©é¢˜çš„æŠ€å·§å’ŒçŸ¥è¯†ç‚¹ï¼Œé”™é¢˜è®°å½•ä¸‹æ¥åå¤èƒŒè¯µ</li><li>åä¸€æœˆä»½å¼€å§‹ï¼Œå†²åˆºé˜¶æ®µï¼ŒèƒŒè¯µå¤§é¢˜ï¼ŒèƒŒå°é¢˜</li></ul><p>PSï¼šè§†é¢‘è¯¾å¯ä»¥ä½¿ç”¨è…¿å§çš„è¾ƒä¸ºæ¯ç‡¥çš„è§†é¢‘è¯¾</p><p>PSSï¼šæ¨èè‚–ç§€è£çš„æ‰€æœ‰èµ„æ–™</p>]]></content>
    
    
    
    <tags>
      
      <tag>study</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/posts/0.html"/>
    <url>/posts/0.html</url>
    
    <content type="html"><![CDATA[<p>1999-ã€Šé»‘å®¢å¸å›½ã€‹<br />å°±ä¸ªäººæœ€è¿‘çœ‹åˆ°çš„èµ„æ–™ï¼Œä¸»è¦ä»20ä¸–çºªè®¡ç®—æœºçš„å‘å±•ã€ä»¥åŠä»å“²å­¦æ„ä¹‰ä¸Šçš„å­˜åœ¨æ¥è§‚çœ‹è¿™ä¸ªç”µå½±ï¼ˆå½“ç„¶neoçš„the oneæ€æƒ³ä¹Ÿå¾ˆè´´åˆåœ£ç»ï¼Œæœ€åæ„Ÿæ‚Ÿçš„æ€æƒ³ä¹Ÿå¾ˆæƒ³äº‹äººå§‹ç»ˆå¾—ä¸åˆ°çš„åœ£æ¯ï¼Œå½“ç„¶å¾—æœ‰ä¸€ä¸ªå¥³æ€§è§’è‰²å†å±æœºå…³å¤´åˆ©ç”¨â€œloveâ€œæ¥æ‹¯æ•‘ä¸»è§’ï¼Œè¿™éƒ½ä¸æ˜¯ä¸é‡è¦çš„ç»†èŠ‚ï¼‰</p><span id="more"></span><h2 id="å“²å­¦çš„è§’åº¦philosophy"><a class="markdownIt-Anchor" href="#å“²å­¦çš„è§’åº¦philosophy"></a> â€” å“²å­¦çš„è§’åº¦philosophy</h2><p>å°±åƒæ˜¯æœ€åŸºæœ¬çš„é—®é¢˜ï¼Œmatrixä¸»è¦å¸¦ç»™æˆ‘ä»¬çš„é—®é¢˜æ˜¯ï¼š</p><ul><li>Matrixå¡‘é€ çš„ä¸–ç•Œå’ŒçœŸå®ä¸–ç•Œä¹‹é—´çš„å·®åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>é¢ä¸´matrixçš„æ—¶é—´ï¼Œä½œä¸ºhumançš„æˆ‘ä»¬å’Œthe oneæœ‰ä»€ä¹ˆåŒºåˆ«</li><li>ä¾æ—§æ¯ä¸ªäººä¿¡ä»°çš„ä½œç”¨<br />å…³äºä¸–ç•Œçš„æ„æˆå¯ä»¥åœ¨ç¬¬äºŒéƒ¨åˆ†ä¸­è¯¦ç»†é˜è¿°ï¼Œå…¶æœ€æ ¸å¿ƒçš„æ€æƒ³ä¾¿æ˜¯ï¼šmatrixçš„ä¸–ç•Œæ˜¯æ¨¡æ‹Ÿçš„ï¼Œâ€˜There is no spoonï¼ˆè¿™é‡Œæ²¡æœ‰æ±¤å‹ºï¼‰â€™<br />ä¸ºä»€ä¹ˆneoå¯ä»¥ç§°ä¸ºthe oneï¼Œæˆ‘æƒ³æ˜¯ç”±äºä»–å…·æœ‰knowç”Ÿæ´»åœ¨ä¸€ä¸ªæ¨¡æ‹Ÿçš„ä¸–ç•Œï¼Œç„¶åbelieveç”Ÿæ´»åœ¨æ¨¡æ‹Ÿçš„ä¸–ç•Œä¸­è‡ªå·±å¯ä»¥åšå‡ºä¸€äº›è¶…ä¹å¯»å¸¸è§„å¾‹çš„è¡Œä¸ºï¼Œæœ€åæ‰èƒ½realåœ°å°†è¿™ä¸ªè¿ç”¨åœ¨matrixè¿™ä¸ªä¸–ç•Œä¸­ï¼Œä¹‹årealçš„è¿ç”¨ä¸­åˆå›åå“ºbackupåœ°é‡æ–°å·©å›ºè‡ªå·±çš„believeè¿™ä¸ªè¡Œä¸ºï¼Œâš ï¸ä»…ä»…believeæ˜¯æ²¡æœ‰å¯¹å¯èƒ½owè¡Œä¸ºçš„åé¦ˆçš„ã€‚</li></ul><p><strong>å¤´å¤´æŸè²å°”æ€</strong>è¾¾åˆ°äº†believeçš„ä¿¡å¿µï¼Œæ‰€ä»¥ä»–å¯ä»¥å°†è¿™äº›äººï¼ˆreal manï¼‰èšé›†èµ·æ¥ï¼Œæ‰èƒ½äº†è§£åˆ°matrixæ˜¯è™šä¼ªçš„ä¸–ç•Œï¼Œæ‰å¯ä»¥åœ¨å±‚æ¬¡ä¸Šæ¿€å‘è¿™äº›äººï¼Œæ‰ä¼šç›¸ä¿¡æœ‰neoè¿™æ ·çš„the oneï¼Œä½†æ˜¯ä»–è‡ªå·±æœ¬èº«ä¸æ˜¯the oneï¼Œå› ä¸ºâ•â•ä»–ç›¸ä¿¡ä¸ä»£è¡¨ä»–èƒ½å»åšå‡ºæ¥è¿™ä»¶äº‹â•â•ï¼Œæ‰€ä»¥ä»–æ— æ³•æ›´è¿‘ä¸€æ­¥çš„äº†è§£åˆ°è¿™ä¸ªä¸–ç•Œæ˜¯è™šæ‹Ÿçš„æœ¬è´¨</p><p>Neoåœ¨believeè¿™ä¸ªäº‹å®ä¹‹åï¼Œåœ¨å’Œé»‘è¡£äººçš„å†³æ–—ä¸­ä¹Ÿåšåˆ°äº†è¿™ä¸€ç‚¹ï¼Œå¹¶æ›´æ¸…æ™°çš„è®¤è¯†åˆ°æ‰€è°“çš„æ¨¡æ‹Ÿä¸–ç•Œæ— éæ˜¯ä»£ç çš„æœ¬è´¨ï¼Œè¿™æ ·åˆç»™ä»–æœ¬èº«çš„believeå¸¦æ¥åé¦ˆï¼Œè¿™æ ·å˜æˆåšå¼ºçš„the oneï¼ï¼</p><h2 id="äºŒ-è®¡ç®—æœºå†å²å‘å±•çš„è§’åº¦"><a class="markdownIt-Anchor" href="#äºŒ-è®¡ç®—æœºå†å²å‘å±•çš„è§’åº¦"></a> äºŒ è®¡ç®—æœºå†å²å‘å±•çš„è§’åº¦</h2><p>è®¡ç®—ä¸€ç›´æ˜¯äººç±»å¸Œæœ›åšåˆ°çš„ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªé¥­åº—ä¸­çš„å¯¹è´¦ï¼Œé“¶è¡Œä¸­çš„æµæ°´çš„è®¡ç®—ï¼Œè¿™äº›å¯èƒ½ç”¨ç®—ç›˜å°±èƒ½è§£å†³ï¼Œä½†æ˜¯åˆ°å·¥ä¸šé©å‘½ï¼Œå„ç§ä¼ä¸šè“¬å‹ƒå‘å±•ï¼Œä½“é‡ä¸æ–­å¢å¤§ï¼Œä»¥åŠå†›äº‹ã€ç§‘å­¦æ–¹é¢å¯¹äºè®¡ç®—çš„éœ€æ±‚ä¸æ–­å¢å¤§ï¼Œé€æ¸å‡ºç°äº†æœºæ¢°ç”µåŠ¨è£…ç½®çš„è®¡ç®—æœºå™¨ï¼Œè¿™äº›æœºå™¨ä¸€èˆ¬è¾ƒä¸ºå¤æ‚ï¼Œéš¾ä»¥ç»´ä¿®ï¼Œæœºæ¢°è£…ç½®ä¸€èˆ¬ä¸å¯é ï¼Œåœ¨é€æ¸çš„å‘å±•ä¸­ï¼Œè®¡æ•°è£…ç½®ä»ç»§ç”µå™¨ã€åˆ°çœŸç©ºç®¡ã€åˆ°ç”µå­ç®¡ã€å†åˆ°åŠå¯¼ä½“ï¼Œå­˜å‚¨è£…ç½®ä»æœ€åˆçš„çº¸æ¡åˆ°å£°å‹ã€åˆ°ç£å¸¦ã€åˆ°ç£ç›˜ã€å†åˆ°ç°åœ¨çš„ç¡¬ç›˜ã€‚</p><p>è®¡ç®—èƒ½åŠ›ä¸æ–­å¢åŠ ï¼Œæœ€åˆçš„äºŒæˆ˜æ—¶æœŸçš„è®¡ç®—å¯èƒ½ç”¨äºå¯¼å¼¹è®¡ç®—ã€å¯†ç ç ´è§£ï¼Œç­‰ä»…ä»…ç”¨äºè®¡ç®—çš„åœºæ™¯ï¼Œä½†åœ¨50å¹´ä»£ï½70å¹´ä»£ï¼Œåœ¨è¿™ä¸ªè¾‰ç…Œçš„æ—¶ä»£ï¼Œè®¡ç®—æœºå™¨å¼€å§‹è¿›å…¥æ°‘ç”¨ç¯èŠ‚ï¼Œè®¡ç®—æœºå¯ç”¨äºç®€å•çš„è®¡ç®—ï¼Œä½†æ˜¯æ›´æœ‰è¶£çš„åŠ ä¸Šæ˜¾ç¤ºå±å’Œæ‰“å°æœºä¹‹åï¼Œä»¥åŠäº’è”ç½‘ï¼Œäººä»¬å¯ä»¥æƒŠè®¶çš„å‘ç°è®¡ç®—æœºå¯ä»¥åšè®¸å¤šä¹‹å‰éš¾ä»¥æƒ³è±¡çš„äº‹æƒ…ï¼šæ¯”å¦‚ä¸‹è±¡æ£‹ã€åˆ©ç”¨å›¾å½¢ç•Œé¢æ¥å®ç°CADï¼ˆcomputer aided designï¼‰ã€åˆ©ç”¨äº’è”ç½‘æ¥å®ç°å›¾ä¹¦éŸ³ä¹è§†é¢‘ç­‰ä¿¡æ¯çš„ä¼ è¾“ã€‚</p><p>è¿™ä¸ªæ—¶å€™è®¡ç®—æœºä¸å†ä»…ä»…æ˜¯ä¸ªâ€˜computeâ€™è®¡ç®—çš„è®¾å¤‡ï¼Œè€Œå˜æˆä¸€ä¸ªå¤šåŠŸèƒ½çš„â€˜ç”µè„‘â€™ï¼Œåˆ°80å¹´ä»£ï½2000å¹´ï¼Œè®¡ç®—æœºç¡¬ä»¶åœ¨æ‘©å°”å®šå¾‹ä¸‹ä¸€ç›´è“¬å‹ƒå‘å±•ï¼Œä»¥åŠå„ç§æ“ä½œç³»ç»Ÿçš„ä¸ä½†å‘å±•ï¼ŒåŠ ä¸ŠäºŒæˆ˜ä¹‹åäººä»¬æ–‡åŒ–çš„å‘å±•ï¼Œè¿™ä¸ªæ—¶ä»£çš„ç§‘å¹»å¼€å§‹å‘å±•ï¼Œä¸‰ä¸ªç†å¿µï¼šæœºå™¨äººã€äººå·¥æ™ºèƒ½ã€è®¡ç®—æœºå¯¹äºäººç±»çš„å¨èƒå§‹ç»ˆæ˜¯ä¸»é¢˜ã€‚</p><p>ã€Šå¤ªç©ºæ¼«æ¸¸2001ã€‹ç”µå½±ä¸­çš„ç»å…¸<br />ã€Šç¥ç»æ¼«æ¸¸è€…ã€‹ä¹¦ç±ä¸­çš„ç»å…¸</p><p>é»‘å®¢å¸å›½ã€Šmatrixã€‹ä¾¿æ˜¯æå‡ºä¸€ä¸ªç–‘é—®ï¼šâ€œå¦‚æœæˆ‘ä»¬çš„ä¸–ç•Œæ˜¯ç”±ç¨‹åºç¼–åˆ¶å¥½çš„ï¼Ÿå¦‚ä½•â€</p><p>å„ç§ç‰©ç†è§„å¾‹ä¸è¿‡æ˜¯ä¸€è¡Œä»£ç ï¼Œäººç±»æœ¬èº«çš„å„ç§å†²åŠ¨ä¸è¿‡æ˜¯æ¨¡æ‹Ÿçš„ç”µè„‰å†²ï¼Œä¸–ç•Œä¸­çš„å„ç§ç¾å¥½äº‹ç‰©ä¸è¿‡æ˜¯æ¨¡æ‹Ÿçš„ï¼Œå…¶ä¸­æœ€å¥½å¥‡çš„ä¸€ç‚¹ä¾¿æ˜¯ï¼Œäººä»¬åˆ©ç”¨ç²¾ç¥è¿›å…¥ä¸€ä¸ªè™šæ‹Ÿçš„ä¸–ç•Œï¼Œåœ¨è™šæ‹Ÿçš„ä¸–ç•Œå—åˆ°å†²å‡»ï¼Œè™šæ‹Ÿä¸–ç•Œä¸­è‡ªå·±ä»¥ä¸ºè‡ªå·±è¢«æ”»å‡»ï¼Œå¤§è„‘åšå‡ºååº”ï¼Œé‚£ä¹ˆç‰©ç†ä¸–ç•Œä¸­çš„å¤§è„‘ä¼šåšå‡ºå¯¹åº”çš„ååº”å—ï¼ŸåŒæ ·è™šæ‹Ÿä¸–ç•Œä¸­çš„ç²¾ç¥ä½“æ­»äº¡äº†ï¼Œæœ¬äººçš„è‚‰ä½“è¿˜ä¼šæˆ–è€…å—ï¼Œå¯ä»¥ğŸ”—yale universityä¸­<br /><strong><strong>Can my body survive f my deaths of spirit</strong></strong></p><p>é‚£ä¹ˆè¿™æ ·çš„ä¸–ç•Œçš„â€˜çœŸrealâ€™åœ¨å“ªé‡Œå‘¢ï¼Ÿ<br />æ‰€ä»¥know yourself</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>chenxia,hello world</title>
    <link href="/posts/3f0d2081.html"/>
    <url>/posts/3f0d2081.html</url>
    
    <content type="html"><![CDATA[<p>Welcome to chenxiaâ€˜s site ! This is my very first post.</p><span id="more"></span><h2 id="ç»ˆäºæå¥½äº†åšå®¢"><a class="markdownIt-Anchor" href="#ç»ˆäºæå¥½äº†åšå®¢"></a> ç»ˆäºæå¥½äº†åšå®¢</h2><ul><li><p>GitHubä¸­ä»¥<username>.github.ioå»ºç«‹è‡ªå·±çš„ä»“åº“æ¥å½“ä½œç½‘ç«™çš„ä»“åº“</p></li><li><p>ä¹‹ååˆ©ç”¨hexoæ¥æ­å»ºè‡ªå·±æœ¬åœ°çš„ç½‘ç«™</p></li><li><p>åˆ©ç”¨sshå’Œgitæ¥å°†æœ¬åœ°çš„ç½‘ç«™å’ŒGitHubçš„ä»“åº“è¿æ¥</p></li></ul><h2 id="ä¸»é¢˜å¤ªéš¾é€‰äº†"><a class="markdownIt-Anchor" href="#ä¸»é¢˜å¤ªéš¾é€‰äº†"></a> ä¸»é¢˜å¤ªéš¾é€‰äº†ï¼ï¼</h2><h2 id="ç›¸å…³åŸºæœ¬çš„æ“ä½œ"><a class="markdownIt-Anchor" href="#ç›¸å…³åŸºæœ¬çš„æ“ä½œ"></a> ç›¸å…³åŸºæœ¬çš„æ“ä½œ</h2><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs verilog">hexo <span class="hljs-keyword">generate</span><br>hexo <span class="hljs-keyword">new</span><br>hexo deploy<br>hexo sever<br>hexo publish<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>lives</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
